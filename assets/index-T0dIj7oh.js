(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ov(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const wt={},Qa=[],Ar=()=>{},CP=()=>!1,Tp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Nv=t=>t.startsWith("onUpdate:"),Xt=Object.assign,Mv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},RP=Object.prototype.hasOwnProperty,et=(t,e)=>RP.call(t,e),Ie=Array.isArray,Xa=t=>nh(t)==="[object Map]",wp=t=>nh(t)==="[object Set]",Pb=t=>nh(t)==="[object Date]",Me=t=>typeof t=="function",Ut=t=>typeof t=="string",Ks=t=>typeof t=="symbol",gt=t=>t!==null&&typeof t=="object",Pv=t=>(gt(t)||Me(t))&&Me(t.then)&&Me(t.catch),JI=Object.prototype.toString,nh=t=>JI.call(t),kP=t=>nh(t).slice(8,-1),QI=t=>nh(t)==="[object Object]",xv=t=>Ut(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fc=Ov(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},OP=/-(\w)/g,vi=Sp(t=>t.replace(OP,(e,n)=>n?n.toUpperCase():"")),NP=/\B([A-Z])/g,_a=Sp(t=>t.replace(NP,"-$1").toLowerCase()),Ip=Sp(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ym=Sp(t=>t?`on${Ip(t)}`:""),Ys=(t,e)=>!Object.is(t,e),Dd=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},of=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Ey=t=>{const e=parseFloat(t);return isNaN(e)?t:e},XI=t=>{const e=Ut(t)?Number(t):NaN;return isNaN(e)?t:e};let xb;const ZI=()=>xb||(xb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function tr(t){if(Ie(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Ut(r)?DP(r):tr(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Ut(t)||gt(t))return t}const MP=/;(?![^(]*\))/g,PP=/:([^]+)/,xP=/\/\*[^]*?\*\//g;function DP(t){const e={};return t.replace(xP,"").split(MP).forEach(n=>{if(n){const r=n.split(PP);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Js(t){let e="";if(Ut(t))e=t;else if(Ie(t))for(let n=0;n<t.length;n++){const r=Js(t[n]);r&&(e+=r+" ")}else if(gt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const LP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",VP=Ov(LP);function eA(t){return!!t||t===""}function FP(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ap(t[r],e[r]);return n}function Ap(t,e){if(t===e)return!0;let n=Pb(t),r=Pb(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Ks(t),r=Ks(e),n||r)return t===e;if(n=Ie(t),r=Ie(e),n||r)return n&&r?FP(t,e):!1;if(n=gt(t),r=gt(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ap(t[o],e[o]))return!1}}return String(t)===String(e)}function tA(t,e){return t.findIndex(n=>Ap(n,e))}const le=t=>Ut(t)?t:t==null?"":Ie(t)||gt(t)&&(t.toString===JI||!Me(t.toString))?JSON.stringify(t,nA,2):String(t),nA=(t,e)=>e&&e.__v_isRef?nA(t,e.value):Xa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Jm(r,s)+" =>"]=i,n),{})}:wp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Jm(n))}:Ks(e)?Jm(e):gt(e)&&!Ie(e)&&!QI(e)?String(e):e,Jm=(t,e="")=>{var n;return Ks(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ar;class rA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ar,!e&&ar&&(this.index=(ar.scopes||(ar.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=ar;try{return ar=this,e()}finally{ar=n}}}on(){ar=this}off(){ar=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function iA(t){return new rA(t)}function UP(t,e=ar){e&&e.active&&e.effects.push(t)}function Dv(){return ar}function sA(t){ar&&ar.cleanups.push(t)}let jo;class Lv{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,UP(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,va();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(BP(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ba()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Fs,n=jo;try{return Fs=!0,jo=this,this._runnings++,Db(this),this.fn()}finally{Lb(this),this._runnings--,jo=n,Fs=e}}stop(){var e;this.active&&(Db(this),Lb(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function BP(t){return t.value}function Db(t){t._trackId++,t._depsLength=0}function Lb(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)oA(t.deps[e],t);t.deps.length=t._depsLength}}function oA(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Fs=!0,Ty=0;const aA=[];function va(){aA.push(Fs),Fs=!1}function ba(){const t=aA.pop();Fs=t===void 0?!0:t}function Vv(){Ty++}function Fv(){for(Ty--;!Ty&&wy.length;)wy.shift()()}function lA(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&oA(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const wy=[];function cA(t,e,n){Vv();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&wy.push(r.scheduler)))}Fv()}const uA=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},af=new WeakMap,Wo=Symbol(""),Sy=Symbol("");function nr(t,e,n){if(Fs&&jo){let r=af.get(t);r||af.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=uA(()=>r.delete(n))),lA(jo,i)}}function qi(t,e,n,r,i,s){const o=af.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Ie(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!Ks(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Ie(t)?xv(n)&&a.push(o.get("length")):(a.push(o.get(Wo)),Xa(t)&&a.push(o.get(Sy)));break;case"delete":Ie(t)||(a.push(o.get(Wo)),Xa(t)&&a.push(o.get(Sy)));break;case"set":Xa(t)&&a.push(o.get(Wo));break}Vv();for(const l of a)l&&cA(l,4);Fv()}function $P(t,e){var n;return(n=af.get(t))==null?void 0:n.get(e)}const HP=Ov("__proto__,__v_isRef,__isVue"),hA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ks)),Vb=zP();function zP(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=tt(this);for(let s=0,o=this.length;s<o;s++)nr(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(tt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){va(),Vv();const r=tt(this)[e].apply(this,n);return Fv(),ba(),r}}),t}function jP(t){const e=tt(this);return nr(e,"has",t),e.hasOwnProperty(t)}class dA{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?rx:gA:s?mA:pA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ie(e);if(!i){if(o&&et(Vb,n))return Reflect.get(Vb,n,r);if(n==="hasOwnProperty")return jP}const a=Reflect.get(e,n,r);return(Ks(n)?hA.has(n):HP(n))||(i||nr(e,"get",n),s)?a:un(a)?o&&xv(n)?a:a.value:gt(a)?i?$v(a):rh(a):a}}class fA extends dA{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=_l(s);if(!lf(r)&&!_l(r)&&(s=tt(s),r=tt(r)),!Ie(e)&&un(s)&&!un(r))return l?!1:(s.value=r,!0)}const o=Ie(e)&&xv(n)?Number(n)<e.length:et(e,n),a=Reflect.set(e,n,r,i);return e===tt(i)&&(o?Ys(r,s)&&qi(e,"set",n,r):qi(e,"add",n,r)),a}deleteProperty(e,n){const r=et(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&qi(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Ks(n)||!hA.has(n))&&nr(e,"has",n),r}ownKeys(e){return nr(e,"iterate",Ie(e)?"length":Wo),Reflect.ownKeys(e)}}class WP extends dA{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const qP=new fA,GP=new WP,KP=new fA(!0),Uv=t=>t,Cp=t=>Reflect.getPrototypeOf(t);function Kh(t,e,n=!1,r=!1){t=t.__v_raw;const i=tt(t),s=tt(e);n||(Ys(e,s)&&nr(i,"get",e),nr(i,"get",s));const{has:o}=Cp(i),a=r?Uv:n?zv:pu;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Yh(t,e=!1){const n=this.__v_raw,r=tt(n),i=tt(t);return e||(Ys(t,i)&&nr(r,"has",t),nr(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Jh(t,e=!1){return t=t.__v_raw,!e&&nr(tt(t),"iterate",Wo),Reflect.get(t,"size",t)}function Fb(t){t=tt(t);const e=tt(this);return Cp(e).has.call(e,t)||(e.add(t),qi(e,"add",t,t)),this}function Ub(t,e){e=tt(e);const n=tt(this),{has:r,get:i}=Cp(n);let s=r.call(n,t);s||(t=tt(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Ys(e,o)&&qi(n,"set",t,e):qi(n,"add",t,e),this}function Bb(t){const e=tt(this),{has:n,get:r}=Cp(e);let i=n.call(e,t);i||(t=tt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&qi(e,"delete",t,void 0),s}function $b(){const t=tt(this),e=t.size!==0,n=t.clear();return e&&qi(t,"clear",void 0,void 0),n}function Qh(t,e){return function(r,i){const s=this,o=s.__v_raw,a=tt(o),l=e?Uv:t?zv:pu;return!t&&nr(a,"iterate",Wo),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function Xh(t,e,n){return function(...r){const i=this.__v_raw,s=tt(i),o=Xa(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?Uv:e?zv:pu;return!e&&nr(s,"iterate",l?Sy:Wo),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ds(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function YP(){const t={get(s){return Kh(this,s)},get size(){return Jh(this)},has:Yh,add:Fb,set:Ub,delete:Bb,clear:$b,forEach:Qh(!1,!1)},e={get(s){return Kh(this,s,!1,!0)},get size(){return Jh(this)},has:Yh,add:Fb,set:Ub,delete:Bb,clear:$b,forEach:Qh(!1,!0)},n={get(s){return Kh(this,s,!0)},get size(){return Jh(this,!0)},has(s){return Yh.call(this,s,!0)},add:ds("add"),set:ds("set"),delete:ds("delete"),clear:ds("clear"),forEach:Qh(!0,!1)},r={get(s){return Kh(this,s,!0,!0)},get size(){return Jh(this,!0)},has(s){return Yh.call(this,s,!0)},add:ds("add"),set:ds("set"),delete:ds("delete"),clear:ds("clear"),forEach:Qh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Xh(s,!1,!1),n[s]=Xh(s,!0,!1),e[s]=Xh(s,!1,!0),r[s]=Xh(s,!0,!0)}),[t,n,e,r]}const[JP,QP,XP,ZP]=YP();function Bv(t,e){const n=e?t?ZP:XP:t?QP:JP;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(et(n,i)&&i in r?n:r,i,s)}const ex={get:Bv(!1,!1)},tx={get:Bv(!1,!0)},nx={get:Bv(!0,!1)},pA=new WeakMap,mA=new WeakMap,gA=new WeakMap,rx=new WeakMap;function ix(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sx(t){return t.__v_skip||!Object.isExtensible(t)?0:ix(kP(t))}function rh(t){return _l(t)?t:Hv(t,!1,qP,ex,pA)}function yA(t){return Hv(t,!1,KP,tx,mA)}function $v(t){return Hv(t,!0,GP,nx,gA)}function Hv(t,e,n,r,i){if(!gt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=sx(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Za(t){return _l(t)?Za(t.__v_raw):!!(t&&t.__v_isReactive)}function _l(t){return!!(t&&t.__v_isReadonly)}function lf(t){return!!(t&&t.__v_isShallow)}function _A(t){return Za(t)||_l(t)}function tt(t){const e=t&&t.__v_raw;return e?tt(e):t}function Rp(t){return Object.isExtensible(t)&&of(t,"__v_skip",!0),t}const pu=t=>gt(t)?rh(t):t,zv=t=>gt(t)?$v(t):t;class vA{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Lv(()=>e(this._value),()=>Uc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=tt(this);return(!e._cacheable||e.effect.dirty)&&Ys(e._value,e._value=e.effect.run())&&Uc(e,4),jv(e),e.effect._dirtyLevel>=2&&Uc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function ox(t,e,n=!1){let r,i;const s=Me(t);return s?(r=t,i=Ar):(r=t.get,i=t.set),new vA(r,i,s||!i,n)}function jv(t){var e;Fs&&jo&&(t=tt(t),lA(jo,(e=t.dep)!=null?e:t.dep=uA(()=>t.dep=void 0,t instanceof vA?t:void 0)))}function Uc(t,e=4,n){t=tt(t);const r=t.dep;r&&cA(r,e)}function un(t){return!!(t&&t.__v_isRef===!0)}function ie(t){return EA(t,!1)}function bA(t){return EA(t,!0)}function EA(t,e){return un(t)?t:new ax(t,e)}class ax{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:tt(e),this._value=n?e:pu(e)}get value(){return jv(this),this._value}set value(e){const n=this.__v_isShallow||lf(e)||_l(e);e=n?e:tt(e),Ys(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:pu(e),Uc(this,4))}}function ee(t){return un(t)?t.value:t}function Di(t){return Me(t)?t():ee(t)}const lx={get:(t,e,n)=>ee(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return un(i)&&!un(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function TA(t){return Za(t)?t:new Proxy(t,lx)}class cx{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>jv(this),()=>Uc(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function wA(t){return new cx(t)}class ux{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return $P(tt(this._object),this._key)}}class hx{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function dx(t,e,n){return un(t)?t:Me(t)?new hx(t):gt(t)&&arguments.length>1?fx(t,e,n):ie(t)}function fx(t,e,n){const r=t[e];return un(r)?r:new ux(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Us(t,e,n,r){try{return r?t(...r):t()}catch(i){ih(i,e,n)}}function Or(t,e,n,r){if(Me(t)){const s=Us(t,e,n,r);return s&&Pv(s)&&s.catch(o=>{ih(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Or(t[s],e,n,r));return i}function ih(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Us(l,null,10,[t,o,a]);return}}px(t,n,i,r)}function px(t,e,n,r=!0){console.error(t)}let mu=!1,Iy=!1;const xn=[];let ni=0;const el=[];let bs=null,Co=0;const SA=Promise.resolve();let Wv=null;function ql(t){const e=Wv||SA;return t?e.then(this?t.bind(this):t):e}function mx(t){let e=ni+1,n=xn.length;for(;e<n;){const r=e+n>>>1,i=xn[r],s=gu(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function qv(t){(!xn.length||!xn.includes(t,mu&&t.allowRecurse?ni+1:ni))&&(t.id==null?xn.push(t):xn.splice(mx(t.id),0,t),IA())}function IA(){!mu&&!Iy&&(Iy=!0,Wv=SA.then(CA))}function gx(t){const e=xn.indexOf(t);e>ni&&xn.splice(e,1)}function Ay(t){Ie(t)?el.push(...t):(!bs||!bs.includes(t,t.allowRecurse?Co+1:Co))&&el.push(t),IA()}function Hb(t,e,n=mu?ni+1:0){for(;n<xn.length;n++){const r=xn[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;xn.splice(n,1),n--,r()}}}function AA(t){if(el.length){const e=[...new Set(el)].sort((n,r)=>gu(n)-gu(r));if(el.length=0,bs){bs.push(...e);return}for(bs=e,Co=0;Co<bs.length;Co++)bs[Co]();bs=null,Co=0}}const gu=t=>t.id==null?1/0:t.id,yx=(t,e)=>{const n=gu(t)-gu(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function CA(t){Iy=!1,mu=!0,xn.sort(yx);try{for(ni=0;ni<xn.length;ni++){const e=xn[ni];e&&e.active!==!1&&Us(e,null,14)}}finally{ni=0,xn.length=0,AA(),mu=!1,Wv=null,(xn.length||el.length)&&CA()}}function _x(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||wt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||wt;d&&(i=n.map(f=>Ut(f)?f.trim():f)),h&&(i=n.map(Ey))}let a,l=r[a=Ym(e)]||r[a=Ym(vi(e))];!l&&s&&(l=r[a=Ym(_a(e))]),l&&Or(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Or(c,t,6,i)}}function RA(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Me(t)){const l=c=>{const u=RA(c,e,!0);u&&(a=!0,Xt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(gt(t)&&r.set(t,null),null):(Ie(s)?s.forEach(l=>o[l]=null):Xt(o,s),gt(t)&&r.set(t,o),o)}function kp(t,e){return!t||!Tp(e)?!1:(e=e.slice(2).replace(/Once$/,""),et(t,e[0].toLowerCase()+e.slice(1))||et(t,_a(e))||et(t,e))}let Qt=null,Op=null;function cf(t){const e=Qt;return Qt=t,Op=t&&t.type.__scopeId||null,e}function sh(t){Op=t}function oh(){Op=null}function bt(t,e=Qt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&iE(-1);const s=cf(e);let o;try{o=t(...i)}finally{cf(s),r._d&&iE(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Qm(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=t;let g,y;const _=cf(t);try{if(n.shapeFlag&4){const w=i||r,I=w;g=Vr(u.call(I,w,h,s,f,d,p)),y=l}else{const w=e;g=Vr(w.length>1?w(s,{attrs:l,slots:a,emit:c}):w(s,null)),y=e.props?l:bx(l)}}catch(w){jc.length=0,ih(w,t,1),g=Te(Zn)}let T=g;if(y&&m!==!1){const w=Object.keys(y),{shapeFlag:I}=T;w.length&&I&7&&(o&&w.some(Nv)&&(y=Ex(y,o)),T=Qs(T,y))}return n.dirs&&(T=Qs(T),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),g=T,cf(_),g}function vx(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(_u(i)){if(i.type!==Zn||i.children==="v-if"){if(n)return;n=i}}else return}return n}const bx=t=>{let e;for(const n in t)(n==="class"||n==="style"||Tp(n))&&((e||(e={}))[n]=t[n]);return e},Ex=(t,e)=>{const n={};for(const r in t)(!Nv(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Tx(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?zb(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!kp(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?zb(r,o,c):!0:!!o;return!1}function zb(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!kp(n,s))return!0}return!1}function Gv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const kA="components";function is(t,e){return Sx(kA,t,!0,e)||t}const wx=Symbol.for("v-ndc");function Sx(t,e,n=!0,r=!1){const i=Qt||Tn;if(i){const s=i.type;if(t===kA){const a=ID(s,!1);if(a&&(a===e||a===vi(e)||a===Ip(vi(e))))return s}const o=jb(i[t]||s[t],e)||jb(i.appContext[t],e);return!o&&r?s:o}}function jb(t,e){return t&&(t[e]||t[vi(e)]||t[Ip(vi(e))])}const Ix=t=>t.__isSuspense;let Cy=0;const Ax={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)Cx(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}Rx(t,e,n,r,i,o,a,l,c)}},hydrate:kx,create:Kv,normalize:Ox},Wb=Ax;function yu(t,e){const n=t.props&&t.props[e];Me(n)&&n()}function Cx(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:u}}=l,h=u("div"),d=t.suspense=Kv(t,i,r,e,h,n,s,o,a,l);c(null,d.pendingBranch=t.ssContent,h,null,r,d,s,o),d.deps>0?(yu(t,"onPending"),yu(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),tl(d,t.ssFallback)):d.resolve(!1,!0)}function Rx(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:y}=h;if(m)h.pendingBranch=d,ri(d,m)?(l(m,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():g&&(y||(l(p,f,n,r,i,null,s,o,a),tl(h,f)))):(h.pendingId=Cy++,y?(h.isHydrating=!1,h.activeBranch=m):c(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),g?(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():(l(p,f,n,r,i,null,s,o,a),tl(h,f))):p&&ri(d,p)?(l(p,d,n,r,i,h,s,o,a),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0&&h.resolve()));else if(p&&ri(d,p))l(p,d,n,r,i,h,s,o,a),tl(h,d);else if(yu(e,"onPending"),h.pendingBranch=d,d.shapeFlag&512?h.pendingId=d.component.suspenseId:h.pendingId=Cy++,l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0)h.resolve();else{const{timeout:_,pendingId:T}=h;_>0?setTimeout(()=>{h.pendingId===T&&h.fallback(f)},_):_===0&&h.fallback(f)}}function Kv(t,e,n,r,i,s,o,a,l,c,u=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:m,remove:g}}=c;let y;const _=Mx(t);_&&e!=null&&e.pendingBranch&&(y=e.pendingId,e.deps++);const T=t.props?XI(t.props.timeout):void 0,w=s,I={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Cy++,timeout:typeof T=="number"?T:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(C=!1,x=!1){const{vnode:N,activeBranch:k,pendingBranch:j,pendingId:K,effects:z,parentComponent:V,container:D}=I;let P=!1;I.isHydrating?I.isHydrating=!1:C||(P=k&&j.transition&&j.transition.mode==="out-in",P&&(k.transition.afterLeave=()=>{K===I.pendingId&&(d(j,D,s===w?p(k):s,0),Ay(z))}),k&&(m(k.el)!==I.hiddenContainer&&(s=p(k)),f(k,V,I,!0)),P||d(j,D,s,0)),tl(I,j),I.pendingBranch=null,I.isInFallback=!1;let A=I.parent,$=!1;for(;A;){if(A.pendingBranch){A.effects.push(...z),$=!0;break}A=A.parent}!$&&!P&&Ay(z),I.effects=[],_&&e&&e.pendingBranch&&y===e.pendingId&&(e.deps--,e.deps===0&&!x&&e.resolve()),yu(N,"onResolve")},fallback(C){if(!I.pendingBranch)return;const{vnode:x,activeBranch:N,parentComponent:k,container:j,namespace:K}=I;yu(x,"onFallback");const z=p(N),V=()=>{I.isInFallback&&(h(null,C,j,z,k,null,K,a,l),tl(I,C))},D=C.transition&&C.transition.mode==="out-in";D&&(N.transition.afterLeave=V),I.isInFallback=!0,f(N,k,null,!0),D||V()},move(C,x,N){I.activeBranch&&d(I.activeBranch,C,x,N),I.container=C},next(){return I.activeBranch&&p(I.activeBranch)},registerDep(C,x){const N=!!I.pendingBranch;N&&I.deps++;const k=C.vnode.el;C.asyncDep.catch(j=>{ih(j,C,0)}).then(j=>{if(C.isUnmounted||I.isUnmounted||I.pendingId!==C.suspenseId)return;C.asyncResolved=!0;const{vnode:K}=C;Fy(C,j,!1),k&&(K.el=k);const z=!k&&C.subTree.el;x(C,K,m(k||C.subTree.el),k?null:p(C.subTree),I,o,l),z&&g(z),Gv(C,K.el),N&&--I.deps===0&&I.resolve()})},unmount(C,x){I.isUnmounted=!0,I.activeBranch&&f(I.activeBranch,n,C,x),I.pendingBranch&&f(I.pendingBranch,n,C,x)}};return I}function kx(t,e,n,r,i,s,o,a,l){const c=e.suspense=Kv(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),u}function Ox(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=qb(r?n.default:n),t.ssFallback=r?qb(n.fallback):Te(Zn)}function qb(t){let e;if(Me(t)){const n=vl&&t._c;n&&(t._d=!1,M()),t=t(),n&&(t._d=!0,e=Cr,KA())}return Ie(t)&&(t=vx(t)),t=Vr(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Nx(t,e){e&&e.pendingBranch?Ie(t)?e.effects.push(...t):e.effects.push(t):Ay(t)}function tl(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Gv(r,i))}function Mx(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}const Px=Symbol.for("v-scx"),xx=()=>Xn(Px);function OA(t,e){return Yv(t,null,e)}const Zh={};function Gi(t,e,n){return Yv(t,e,n)}function Yv(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=wt){if(e&&s){const C=e;e=(...x)=>{C(...x),I()}}const l=Tn,c=C=>r===!0?C:Mo(C,r===!1?1:void 0);let u,h=!1,d=!1;if(un(t)?(u=()=>t.value,h=lf(t)):Za(t)?(u=()=>c(t),h=!0):Ie(t)?(d=!0,h=t.some(C=>Za(C)||lf(C)),u=()=>t.map(C=>{if(un(C))return C.value;if(Za(C))return c(C);if(Me(C))return Us(C,l,2)})):Me(t)?e?u=()=>Us(t,l,2):u=()=>(f&&f(),Or(t,l,3,[p])):u=Ar,e&&r){const C=u;u=()=>Mo(C())}let f,p=C=>{f=T.onStop=()=>{Us(C,l,4),f=T.onStop=void 0}},m;if(Lp)if(p=Ar,e?n&&Or(e,l,3,[u(),d?[]:void 0,p]):u(),i==="sync"){const C=xx();m=C.__watcherHandles||(C.__watcherHandles=[])}else return Ar;let g=d?new Array(t.length).fill(Zh):Zh;const y=()=>{if(!(!T.active||!T.dirty))if(e){const C=T.run();(r||h||(d?C.some((x,N)=>Ys(x,g[N])):Ys(C,g)))&&(f&&f(),Or(e,l,3,[C,g===Zh?void 0:d&&g[0]===Zh?[]:g,p]),g=C)}else T.run()};y.allowRecurse=!!e;let _;i==="sync"?_=y:i==="post"?_=()=>Jn(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),_=()=>qv(y));const T=new Lv(u,Ar,_),w=Dv(),I=()=>{T.stop(),w&&Mv(w.effects,T)};return e?n?y():g=T.run():i==="post"?Jn(T.run.bind(T),l&&l.suspense):T.run(),m&&m.push(I),I}function Dx(t,e,n){const r=this.proxy,i=Ut(t)?t.includes(".")?NA(r,t):()=>r[t]:t.bind(r,r);let s;Me(e)?s=e:(s=e.handler,n=e);const o=ra(this),a=Yv(i,s.bind(r),n);return o(),a}function NA(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Mo(t,e,n=0,r){if(!gt(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),un(t))Mo(t.value,e,n,r);else if(Ie(t))for(let i=0;i<t.length;i++)Mo(t[i],e,n,r);else if(wp(t)||Xa(t))t.forEach(i=>{Mo(i,e,n,r)});else if(QI(t))for(const i in t)Mo(t[i],e,n,r);return t}function Ht(t,e){if(Qt===null)return t;const n=Vp(Qt)||Qt.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=wt]=e[i];s&&(Me(s)&&(s={mounted:s,updated:s}),s.deep&&Mo(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function _o(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(va(),Or(l,n,8,[t.el,a,t,e]),ba())}}const Es=Symbol("_leaveCb"),ed=Symbol("_enterCb");function Lx(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ah(()=>{t.isMounted=!0}),lh(()=>{t.isUnmounting=!0}),t}const Er=[Function,Array],MA={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Er,onEnter:Er,onAfterEnter:Er,onEnterCancelled:Er,onBeforeLeave:Er,onLeave:Er,onAfterLeave:Er,onLeaveCancelled:Er,onBeforeAppear:Er,onAppear:Er,onAfterAppear:Er,onAppearCancelled:Er},Vx={name:"BaseTransition",props:MA,setup(t,{slots:e}){const n=Ea(),r=Lx();return()=>{const i=e.default&&xA(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const d of i)if(d.type!==Zn){s=d;break}}const o=tt(t),{mode:a}=o;if(r.isLeaving)return Xm(s);const l=Gb(s);if(!l)return Xm(s);const c=Ry(l,o,r,n);ky(l,c);const u=n.subTree,h=u&&Gb(u);if(h&&h.type!==Zn&&!ri(l,h)){const d=Ry(h,o,r,n);if(ky(h,d),a==="out-in")return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Xm(s);a==="in-out"&&l.type!==Zn&&(d.delayLeave=(f,p,m)=>{const g=PA(r,h);g[String(h.key)]=h,f[Es]=()=>{p(),f[Es]=void 0,delete c.delayedLeave},c.delayedLeave=m})}return s}}},Fx=Vx;function PA(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ry(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:y,onAppearCancelled:_}=e,T=String(t.key),w=PA(n,t),I=(N,k)=>{N&&Or(N,r,9,k)},C=(N,k)=>{const j=k[1];I(N,k),Ie(N)?N.every(K=>K.length<=1)&&j():N.length<=1&&j()},x={mode:s,persisted:o,beforeEnter(N){let k=a;if(!n.isMounted)if(i)k=m||a;else return;N[Es]&&N[Es](!0);const j=w[T];j&&ri(t,j)&&j.el[Es]&&j.el[Es](),I(k,[N])},enter(N){let k=l,j=c,K=u;if(!n.isMounted)if(i)k=g||l,j=y||c,K=_||u;else return;let z=!1;const V=N[ed]=D=>{z||(z=!0,D?I(K,[N]):I(j,[N]),x.delayedLeave&&x.delayedLeave(),N[ed]=void 0)};k?C(k,[N,V]):V()},leave(N,k){const j=String(t.key);if(N[ed]&&N[ed](!0),n.isUnmounting)return k();I(h,[N]);let K=!1;const z=N[Es]=V=>{K||(K=!0,k(),V?I(p,[N]):I(f,[N]),N[Es]=void 0,w[j]===t&&delete w[j])};w[j]=t,d?C(d,[N,z]):z()},clone(N){return Ry(N,e,n,r)}};return x}function Xm(t){if(Np(t))return t=Qs(t),t.children=null,t}function Gb(t){return Np(t)?t.children?t.children[0]:void 0:t}function ky(t,e){t.shapeFlag&6&&t.component?ky(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xA(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===fe?(o.patchFlag&128&&i++,r=r.concat(xA(o.children,e,a))):(e||o.type!==Zn)&&r.push(a!=null?Qs(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Yt(t,e){return Me(t)?Xt({name:t.name},e,{setup:t}):t}const Bc=t=>!!t.type.__asyncLoader,Np=t=>t.type.__isKeepAlive;function Ux(t,e){DA(t,"a",e)}function Bx(t,e){DA(t,"da",e)}function DA(t,e,n=Tn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Mp(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Np(i.parent.vnode)&&$x(r,e,n,i),i=i.parent}}function $x(t,e,n,r){const i=Mp(e,t,r,!0);LA(()=>{Mv(r[e],i)},n)}function Mp(t,e,n=Tn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;va();const a=ra(n),l=Or(e,n,t,o);return a(),ba(),l});return r?i.unshift(s):i.push(s),s}}const ss=t=>(e,n=Tn)=>(!Lp||t==="sp")&&Mp(t,(...r)=>e(...r),n),Hx=ss("bm"),ah=ss("m"),zx=ss("bu"),jx=ss("u"),lh=ss("bum"),LA=ss("um"),VA=ss("sp"),Wx=ss("rtg"),qx=ss("rtc");function Gx(t,e=Tn){Mp("ec",t,e)}function vt(t,e,n,r){let i;const s=n&&n[r];if(Ie(t)||Ut(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(gt(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function nn(t,e,n={},r,i){if(Qt.isCE||Qt.parent&&Bc(Qt.parent)&&Qt.parent.isCE)return e!=="default"&&(n.name=e),Te("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),M();const o=s&&FA(s(n)),a=dt(fe,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function FA(t){return t.some(e=>_u(e)?!(e.type===Zn||e.type===fe&&!FA(e.children)):!0)?t:null}const Oy=t=>t?QA(t)?Vp(t)||t.proxy:Oy(t.parent):null,$c=Xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Oy(t.parent),$root:t=>Oy(t.root),$emit:t=>t.emit,$options:t=>Jv(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,qv(t.update)}),$nextTick:t=>t.n||(t.n=ql.bind(t.proxy)),$watch:t=>Dx.bind(t)}),Zm=(t,e)=>t!==wt&&!t.__isScriptSetup&&et(t,e),Kx={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Zm(r,e))return o[e]=1,r[e];if(i!==wt&&et(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&et(c,e))return o[e]=3,s[e];if(n!==wt&&et(n,e))return o[e]=4,n[e];Ny&&(o[e]=0)}}const u=$c[e];let h,d;if(u)return e==="$attrs"&&nr(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==wt&&et(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,et(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Zm(i,e)?(i[e]=n,!0):r!==wt&&et(r,e)?(r[e]=n,!0):et(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==wt&&et(t,o)||Zm(e,o)||(a=s[0])&&et(a,o)||et(r,o)||et($c,o)||et(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:et(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Kb(t){return Ie(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Gr(t){const e=Ea();let n=t();return Vy(),Pv(n)&&(n=n.catch(r=>{throw ra(e),r})),[n,()=>ra(e)]}let Ny=!0;function Yx(t){const e=Jv(t),n=t.proxy,r=t.ctx;Ny=!1,e.beforeCreate&&Yb(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:_,destroyed:T,unmounted:w,render:I,renderTracked:C,renderTriggered:x,errorCaptured:N,serverPrefetch:k,expose:j,inheritAttrs:K,components:z,directives:V,filters:D}=e;if(c&&Jx(c,r,null),o)for(const $ in o){const U=o[$];Me(U)&&(r[$]=U.bind(n))}if(i){const $=i.call(n,n);gt($)&&(t.data=rh($))}if(Ny=!0,s)for(const $ in s){const U=s[$],he=Me(U)?U.bind(n,n):Me(U.get)?U.get.bind(n,n):Ar,be=!Me(U)&&Me(U.set)?U.set.bind(n):Ar,Ne=pt({get:he,set:be});Object.defineProperty(r,$,{enumerable:!0,configurable:!0,get:()=>Ne.value,set:He=>Ne.value=He})}if(a)for(const $ in a)UA(a[$],r,n,$);if(l){const $=Me(l)?l.call(n):l;Reflect.ownKeys($).forEach(U=>{Ld(U,$[U])})}u&&Yb(u,t,"c");function A($,U){Ie(U)?U.forEach(he=>$(he.bind(n))):U&&$(U.bind(n))}if(A(Hx,h),A(ah,d),A(zx,f),A(jx,p),A(Ux,m),A(Bx,g),A(Gx,N),A(qx,C),A(Wx,x),A(lh,_),A(LA,w),A(VA,k),Ie(j))if(j.length){const $=t.exposed||(t.exposed={});j.forEach(U=>{Object.defineProperty($,U,{get:()=>n[U],set:he=>n[U]=he})})}else t.exposed||(t.exposed={});I&&t.render===Ar&&(t.render=I),K!=null&&(t.inheritAttrs=K),z&&(t.components=z),V&&(t.directives=V)}function Jx(t,e,n=Ar){Ie(t)&&(t=My(t));for(const r in t){const i=t[r];let s;gt(i)?"default"in i?s=Xn(i.from||r,i.default,!0):s=Xn(i.from||r):s=Xn(i),un(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Yb(t,e,n){Or(Ie(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function UA(t,e,n,r){const i=r.includes(".")?NA(n,r):()=>n[r];if(Ut(t)){const s=e[t];Me(s)&&Gi(i,s)}else if(Me(t))Gi(i,t.bind(n));else if(gt(t))if(Ie(t))t.forEach(s=>UA(s,e,n,r));else{const s=Me(t.handler)?t.handler.bind(n):e[t.handler];Me(s)&&Gi(i,s,t)}}function Jv(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>uf(l,c,o,!0)),uf(l,e,o)),gt(e)&&s.set(e,l),l}function uf(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&uf(t,s,n,!0),i&&i.forEach(o=>uf(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Qx[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Qx={data:Jb,props:Qb,emits:Qb,methods:Ec,computed:Ec,beforeCreate:Bn,created:Bn,beforeMount:Bn,mounted:Bn,beforeUpdate:Bn,updated:Bn,beforeDestroy:Bn,beforeUnmount:Bn,destroyed:Bn,unmounted:Bn,activated:Bn,deactivated:Bn,errorCaptured:Bn,serverPrefetch:Bn,components:Ec,directives:Ec,watch:Zx,provide:Jb,inject:Xx};function Jb(t,e){return e?t?function(){return Xt(Me(t)?t.call(this,this):t,Me(e)?e.call(this,this):e)}:e:t}function Xx(t,e){return Ec(My(t),My(e))}function My(t){if(Ie(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Bn(t,e){return t?[...new Set([].concat(t,e))]:e}function Ec(t,e){return t?Xt(Object.create(null),t,e):e}function Qb(t,e){return t?Ie(t)&&Ie(e)?[...new Set([...t,...e])]:Xt(Object.create(null),Kb(t),Kb(e??{})):e}function Zx(t,e){if(!t)return e;if(!e)return t;const n=Xt(Object.create(null),t);for(const r in e)n[r]=Bn(t[r],e[r]);return n}function BA(){return{app:null,config:{isNativeTag:CP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let eD=0;function tD(t,e){return function(r,i=null){Me(r)||(r=Xt({},r)),i!=null&&!gt(i)&&(i=null);const s=BA(),o=new WeakSet;let a=!1;const l=s.app={_uid:eD++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:CD,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Me(c.install)?(o.add(c),c.install(l,...u)):Me(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=Te(r,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Vp(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Hc;Hc=l;try{return c()}finally{Hc=u}}};return l}}let Hc=null;function Ld(t,e){if(Tn){let n=Tn.provides;const r=Tn.parent&&Tn.parent.provides;r===n&&(n=Tn.provides=Object.create(r)),n[t]=e}}function Xn(t,e,n=!1){const r=Tn||Qt;if(r||Hc){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Hc._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Me(e)?e.call(r&&r.proxy):e}}function nD(t,e,n,r=!1){const i={},s={};of(s,xp,1),t.propsDefaults=Object.create(null),$A(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:yA(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function rD(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=tt(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(kp(t.emitsOptions,d))continue;const f=e[d];if(l)if(et(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const p=vi(d);i[p]=Py(l,a,p,f,t,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{$A(t,e,i,s)&&(c=!0);let u;for(const h in a)(!e||!et(e,h)&&((u=_a(h))===h||!et(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=Py(l,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!et(e,h))&&(delete s[h],c=!0)}c&&qi(t,"set","$attrs")}function $A(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Fc(l))continue;const c=e[l];let u;i&&et(i,u=vi(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:kp(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=tt(n),c=a||wt;for(let u=0;u<s.length;u++){const h=s[u];n[h]=Py(i,l,h,c[h],t,!et(c,h))}}return o}function Py(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=et(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Me(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=ra(i);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===_a(n))&&(r=!0))}return r}function HA(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Me(t)){const u=h=>{l=!0;const[d,f]=HA(h,e,!0);Xt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return gt(t)&&r.set(t,Qa),Qa;if(Ie(s))for(let u=0;u<s.length;u++){const h=vi(s[u]);Xb(h)&&(o[h]=wt)}else if(s)for(const u in s){const h=vi(u);if(Xb(h)){const d=s[u],f=o[h]=Ie(d)||Me(d)?{type:d}:Xt({},d);if(f){const p=tE(Boolean,f.type),m=tE(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||et(f,"default"))&&a.push(h)}}}const c=[o,a];return gt(t)&&r.set(t,c),c}function Xb(t){return t[0]!=="$"&&!Fc(t)}function Zb(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function eE(t,e){return Zb(t)===Zb(e)}function tE(t,e){return Ie(e)?e.findIndex(n=>eE(n,t)):Me(e)&&eE(e,t)?0:-1}const zA=t=>t[0]==="_"||t==="$stable",Qv=t=>Ie(t)?t.map(Vr):[Vr(t)],iD=(t,e,n)=>{if(e._n)return e;const r=bt((...i)=>Qv(e(...i)),n);return r._c=!1,r},jA=(t,e,n)=>{const r=t._ctx;for(const i in t){if(zA(i))continue;const s=t[i];if(Me(s))e[i]=iD(i,s,r);else if(s!=null){const o=Qv(s);e[i]=()=>o}}},WA=(t,e)=>{const n=Qv(e);t.slots.default=()=>n},sD=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=tt(e),of(e,"_",n)):jA(e,t.slots={})}else t.slots={},e&&WA(t,e);of(t.slots,xp,1)},oD=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=wt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Xt(i,e),!n&&a===1&&delete i._):(s=!e.$stable,jA(e,i)),o=e}else e&&(WA(t,e),o={default:1});if(s)for(const a in i)!zA(a)&&o[a]==null&&delete i[a]};function xy(t,e,n,r,i=!1){if(Ie(t)){t.forEach((d,f)=>xy(d,e&&(Ie(e)?e[f]:e),n,r,i));return}if(Bc(r)&&!i)return;const s=r.shapeFlag&4?Vp(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===wt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Ut(c)?(u[c]=null,et(h,c)&&(h[c]=null)):un(c)&&(c.value=null)),Me(l))Us(l,a,12,[o,u]);else{const d=Ut(l),f=un(l);if(d||f){const p=()=>{if(t.f){const m=d?et(h,l)?h[l]:u[l]:l.value;i?Ie(m)&&Mv(m,s):Ie(m)?m.includes(s)||m.push(s):d?(u[l]=[s],et(h,l)&&(h[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,et(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Jn(p,n)):p()}}}const Jn=Nx;function aD(t){return lD(t)}function lD(t,e){const n=ZI();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Ar,insertStaticContent:p}=t,m=(b,S,O,F=null,L=null,X=null,ne=void 0,Z=null,re=!!S.dynamicChildren)=>{if(b===S)return;b&&!ri(b,S)&&(F=R(b),He(b,L,X,!0),b=null),S.patchFlag===-2&&(re=!1,S.dynamicChildren=null);const{type:Q,ref:pe,shapeFlag:Ce}=S;switch(Q){case Pp:g(b,S,O,F);break;case Zn:y(b,S,O,F);break;case Vd:b==null&&_(S,O,F,ne);break;case fe:z(b,S,O,F,L,X,ne,Z,re);break;default:Ce&1?I(b,S,O,F,L,X,ne,Z,re):Ce&6?V(b,S,O,F,L,X,ne,Z,re):(Ce&64||Ce&128)&&Q.process(b,S,O,F,L,X,ne,Z,re,Y)}pe!=null&&L&&xy(pe,b&&b.ref,X,S||b,!S)},g=(b,S,O,F)=>{if(b==null)r(S.el=a(S.children),O,F);else{const L=S.el=b.el;S.children!==b.children&&c(L,S.children)}},y=(b,S,O,F)=>{b==null?r(S.el=l(S.children||""),O,F):S.el=b.el},_=(b,S,O,F)=>{[b.el,b.anchor]=p(b.children,S,O,F,b.el,b.anchor)},T=({el:b,anchor:S},O,F)=>{let L;for(;b&&b!==S;)L=d(b),r(b,O,F),b=L;r(S,O,F)},w=({el:b,anchor:S})=>{let O;for(;b&&b!==S;)O=d(b),i(b),b=O;i(S)},I=(b,S,O,F,L,X,ne,Z,re)=>{S.type==="svg"?ne="svg":S.type==="math"&&(ne="mathml"),b==null?C(S,O,F,L,X,ne,Z,re):k(b,S,L,X,ne,Z,re)},C=(b,S,O,F,L,X,ne,Z)=>{let re,Q;const{props:pe,shapeFlag:Ce,transition:Se,dirs:De}=b;if(re=b.el=o(b.type,X,pe&&pe.is,pe),Ce&8?u(re,b.children):Ce&16&&N(b.children,re,null,F,L,eg(b,X),ne,Z),De&&_o(b,null,F,"created"),x(re,b,b.scopeId,ne,F),pe){for(const ht in pe)ht!=="value"&&!Fc(ht)&&s(re,ht,null,pe[ht],X,b.children,F,L,ut);"value"in pe&&s(re,"value",null,pe.value,X),(Q=pe.onVnodeBeforeMount)&&ei(Q,F,b)}De&&_o(b,null,F,"beforeMount");const We=cD(L,Se);We&&Se.beforeEnter(re),r(re,S,O),((Q=pe&&pe.onVnodeMounted)||We||De)&&Jn(()=>{Q&&ei(Q,F,b),We&&Se.enter(re),De&&_o(b,null,F,"mounted")},L)},x=(b,S,O,F,L)=>{if(O&&f(b,O),F)for(let X=0;X<F.length;X++)f(b,F[X]);if(L){let X=L.subTree;if(S===X){const ne=L.vnode;x(b,ne,ne.scopeId,ne.slotScopeIds,L.parent)}}},N=(b,S,O,F,L,X,ne,Z,re=0)=>{for(let Q=re;Q<b.length;Q++){const pe=b[Q]=Z?Ts(b[Q]):Vr(b[Q]);m(null,pe,S,O,F,L,X,ne,Z)}},k=(b,S,O,F,L,X,ne)=>{const Z=S.el=b.el;let{patchFlag:re,dynamicChildren:Q,dirs:pe}=S;re|=b.patchFlag&16;const Ce=b.props||wt,Se=S.props||wt;let De;if(O&&vo(O,!1),(De=Se.onVnodeBeforeUpdate)&&ei(De,O,S,b),pe&&_o(S,b,O,"beforeUpdate"),O&&vo(O,!0),Q?j(b.dynamicChildren,Q,Z,O,F,eg(S,L),X):ne||U(b,S,Z,null,O,F,eg(S,L),X,!1),re>0){if(re&16)K(Z,S,Ce,Se,O,F,L);else if(re&2&&Ce.class!==Se.class&&s(Z,"class",null,Se.class,L),re&4&&s(Z,"style",Ce.style,Se.style,L),re&8){const We=S.dynamicProps;for(let ht=0;ht<We.length;ht++){const kt=We[ht],tn=Ce[kt],Pr=Se[kt];(Pr!==tn||kt==="value")&&s(Z,kt,tn,Pr,L,b.children,O,F,ut)}}re&1&&b.children!==S.children&&u(Z,S.children)}else!ne&&Q==null&&K(Z,S,Ce,Se,O,F,L);((De=Se.onVnodeUpdated)||pe)&&Jn(()=>{De&&ei(De,O,S,b),pe&&_o(S,b,O,"updated")},F)},j=(b,S,O,F,L,X,ne)=>{for(let Z=0;Z<S.length;Z++){const re=b[Z],Q=S[Z],pe=re.el&&(re.type===fe||!ri(re,Q)||re.shapeFlag&70)?h(re.el):O;m(re,Q,pe,null,F,L,X,ne,!0)}},K=(b,S,O,F,L,X,ne)=>{if(O!==F){if(O!==wt)for(const Z in O)!Fc(Z)&&!(Z in F)&&s(b,Z,O[Z],null,ne,S.children,L,X,ut);for(const Z in F){if(Fc(Z))continue;const re=F[Z],Q=O[Z];re!==Q&&Z!=="value"&&s(b,Z,Q,re,ne,S.children,L,X,ut)}"value"in F&&s(b,"value",O.value,F.value,ne)}},z=(b,S,O,F,L,X,ne,Z,re)=>{const Q=S.el=b?b.el:a(""),pe=S.anchor=b?b.anchor:a("");let{patchFlag:Ce,dynamicChildren:Se,slotScopeIds:De}=S;De&&(Z=Z?Z.concat(De):De),b==null?(r(Q,O,F),r(pe,O,F),N(S.children||[],O,pe,L,X,ne,Z,re)):Ce>0&&Ce&64&&Se&&b.dynamicChildren?(j(b.dynamicChildren,Se,O,L,X,ne,Z),(S.key!=null||L&&S===L.subTree)&&Xv(b,S,!0)):U(b,S,O,pe,L,X,ne,Z,re)},V=(b,S,O,F,L,X,ne,Z,re)=>{S.slotScopeIds=Z,b==null?S.shapeFlag&512?L.ctx.activate(S,O,F,ne,re):D(S,O,F,L,X,ne,re):P(b,S,re)},D=(b,S,O,F,L,X,ne)=>{const Z=b.component=bD(b,F,L);if(Np(b)&&(Z.ctx.renderer=Y),ED(Z),Z.asyncDep){if(L&&L.registerDep(Z,A),!b.el){const re=Z.subTree=Te(Zn);y(null,re,S,O)}}else A(Z,b,S,O,L,X,ne)},P=(b,S,O)=>{const F=S.component=b.component;if(Tx(b,S,O))if(F.asyncDep&&!F.asyncResolved){$(F,S,O);return}else F.next=S,gx(F.update),F.effect.dirty=!0,F.update();else S.el=b.el,F.vnode=S},A=(b,S,O,F,L,X,ne)=>{const Z=()=>{if(b.isMounted){let{next:pe,bu:Ce,u:Se,parent:De,vnode:We}=b;{const ka=qA(b);if(ka){pe&&(pe.el=We.el,$(b,pe,ne)),ka.asyncDep.then(()=>{b.isUnmounted||Z()});return}}let ht=pe,kt;vo(b,!1),pe?(pe.el=We.el,$(b,pe,ne)):pe=We,Ce&&Dd(Ce),(kt=pe.props&&pe.props.onVnodeBeforeUpdate)&&ei(kt,De,pe,We),vo(b,!0);const tn=Qm(b),Pr=b.subTree;b.subTree=tn,m(Pr,tn,h(Pr.el),R(Pr),b,L,X),pe.el=tn.el,ht===null&&Gv(b,tn.el),Se&&Jn(Se,L),(kt=pe.props&&pe.props.onVnodeUpdated)&&Jn(()=>ei(kt,De,pe,We),L)}else{let pe;const{el:Ce,props:Se}=S,{bm:De,m:We,parent:ht}=b,kt=Bc(S);if(vo(b,!1),De&&Dd(De),!kt&&(pe=Se&&Se.onVnodeBeforeMount)&&ei(pe,ht,S),vo(b,!0),Ce&&me){const tn=()=>{b.subTree=Qm(b),me(Ce,b.subTree,b,L,null)};kt?S.type.__asyncLoader().then(()=>!b.isUnmounted&&tn()):tn()}else{const tn=b.subTree=Qm(b);m(null,tn,O,F,b,L,X),S.el=tn.el}if(We&&Jn(We,L),!kt&&(pe=Se&&Se.onVnodeMounted)){const tn=S;Jn(()=>ei(pe,ht,tn),L)}(S.shapeFlag&256||ht&&Bc(ht.vnode)&&ht.vnode.shapeFlag&256)&&b.a&&Jn(b.a,L),b.isMounted=!0,S=O=F=null}},re=b.effect=new Lv(Z,Ar,()=>qv(Q),b.scope),Q=b.update=()=>{re.dirty&&re.run()};Q.id=b.uid,vo(b,!0),Q()},$=(b,S,O)=>{S.component=b;const F=b.vnode.props;b.vnode=S,b.next=null,rD(b,S.props,F,O),oD(b,S.children,O),va(),Hb(b),ba()},U=(b,S,O,F,L,X,ne,Z,re=!1)=>{const Q=b&&b.children,pe=b?b.shapeFlag:0,Ce=S.children,{patchFlag:Se,shapeFlag:De}=S;if(Se>0){if(Se&128){be(Q,Ce,O,F,L,X,ne,Z,re);return}else if(Se&256){he(Q,Ce,O,F,L,X,ne,Z,re);return}}De&8?(pe&16&&ut(Q,L,X),Ce!==Q&&u(O,Ce)):pe&16?De&16?be(Q,Ce,O,F,L,X,ne,Z,re):ut(Q,L,X,!0):(pe&8&&u(O,""),De&16&&N(Ce,O,F,L,X,ne,Z,re))},he=(b,S,O,F,L,X,ne,Z,re)=>{b=b||Qa,S=S||Qa;const Q=b.length,pe=S.length,Ce=Math.min(Q,pe);let Se;for(Se=0;Se<Ce;Se++){const De=S[Se]=re?Ts(S[Se]):Vr(S[Se]);m(b[Se],De,O,null,L,X,ne,Z,re)}Q>pe?ut(b,L,X,!0,!1,Ce):N(S,O,F,L,X,ne,Z,re,Ce)},be=(b,S,O,F,L,X,ne,Z,re)=>{let Q=0;const pe=S.length;let Ce=b.length-1,Se=pe-1;for(;Q<=Ce&&Q<=Se;){const De=b[Q],We=S[Q]=re?Ts(S[Q]):Vr(S[Q]);if(ri(De,We))m(De,We,O,null,L,X,ne,Z,re);else break;Q++}for(;Q<=Ce&&Q<=Se;){const De=b[Ce],We=S[Se]=re?Ts(S[Se]):Vr(S[Se]);if(ri(De,We))m(De,We,O,null,L,X,ne,Z,re);else break;Ce--,Se--}if(Q>Ce){if(Q<=Se){const De=Se+1,We=De<pe?S[De].el:F;for(;Q<=Se;)m(null,S[Q]=re?Ts(S[Q]):Vr(S[Q]),O,We,L,X,ne,Z,re),Q++}}else if(Q>Se)for(;Q<=Ce;)He(b[Q],L,X,!0),Q++;else{const De=Q,We=Q,ht=new Map;for(Q=We;Q<=Se;Q++){const ir=S[Q]=re?Ts(S[Q]):Vr(S[Q]);ir.key!=null&&ht.set(ir.key,Q)}let kt,tn=0;const Pr=Se-We+1;let ka=!1,Ob=0;const lc=new Array(Pr);for(Q=0;Q<Pr;Q++)lc[Q]=0;for(Q=De;Q<=Ce;Q++){const ir=b[Q];if(tn>=Pr){He(ir,L,X,!0);continue}let Zr;if(ir.key!=null)Zr=ht.get(ir.key);else for(kt=We;kt<=Se;kt++)if(lc[kt-We]===0&&ri(ir,S[kt])){Zr=kt;break}Zr===void 0?He(ir,L,X,!0):(lc[Zr-We]=Q+1,Zr>=Ob?Ob=Zr:ka=!0,m(ir,S[Zr],O,null,L,X,ne,Z,re),tn++)}const Nb=ka?uD(lc):Qa;for(kt=Nb.length-1,Q=Pr-1;Q>=0;Q--){const ir=We+Q,Zr=S[ir],Mb=ir+1<pe?S[ir+1].el:F;lc[Q]===0?m(null,Zr,O,Mb,L,X,ne,Z,re):ka&&(kt<0||Q!==Nb[kt]?Ne(Zr,O,Mb,2):kt--)}}},Ne=(b,S,O,F,L=null)=>{const{el:X,type:ne,transition:Z,children:re,shapeFlag:Q}=b;if(Q&6){Ne(b.component.subTree,S,O,F);return}if(Q&128){b.suspense.move(S,O,F);return}if(Q&64){ne.move(b,S,O,Y);return}if(ne===fe){r(X,S,O);for(let Ce=0;Ce<re.length;Ce++)Ne(re[Ce],S,O,F);r(b.anchor,S,O);return}if(ne===Vd){T(b,S,O);return}if(F!==2&&Q&1&&Z)if(F===0)Z.beforeEnter(X),r(X,S,O),Jn(()=>Z.enter(X),L);else{const{leave:Ce,delayLeave:Se,afterLeave:De}=Z,We=()=>r(X,S,O),ht=()=>{Ce(X,()=>{We(),De&&De()})};Se?Se(X,We,ht):ht()}else r(X,S,O)},He=(b,S,O,F=!1,L=!1)=>{const{type:X,props:ne,ref:Z,children:re,dynamicChildren:Q,shapeFlag:pe,patchFlag:Ce,dirs:Se}=b;if(Z!=null&&xy(Z,null,O,b,!0),pe&256){S.ctx.deactivate(b);return}const De=pe&1&&Se,We=!Bc(b);let ht;if(We&&(ht=ne&&ne.onVnodeBeforeUnmount)&&ei(ht,S,b),pe&6)xt(b.component,O,F);else{if(pe&128){b.suspense.unmount(O,F);return}De&&_o(b,null,S,"beforeUnmount"),pe&64?b.type.remove(b,S,O,L,Y,F):Q&&(X!==fe||Ce>0&&Ce&64)?ut(Q,S,O,!1,!0):(X===fe&&Ce&384||!L&&pe&16)&&ut(re,S,O),F&&at(b)}(We&&(ht=ne&&ne.onVnodeUnmounted)||De)&&Jn(()=>{ht&&ei(ht,S,b),De&&_o(b,null,S,"unmounted")},O)},at=b=>{const{type:S,el:O,anchor:F,transition:L}=b;if(S===fe){yt(O,F);return}if(S===Vd){w(b);return}const X=()=>{i(O),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(b.shapeFlag&1&&L&&!L.persisted){const{leave:ne,delayLeave:Z}=L,re=()=>ne(O,X);Z?Z(b.el,X,re):re()}else X()},yt=(b,S)=>{let O;for(;b!==S;)O=d(b),i(b),b=O;i(S)},xt=(b,S,O)=>{const{bum:F,scope:L,update:X,subTree:ne,um:Z}=b;F&&Dd(F),L.stop(),X&&(X.active=!1,He(ne,b,S,O)),Z&&Jn(Z,S),Jn(()=>{b.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},ut=(b,S,O,F=!1,L=!1,X=0)=>{for(let ne=X;ne<b.length;ne++)He(b[ne],S,O,F,L)},R=b=>b.shapeFlag&6?R(b.component.subTree):b.shapeFlag&128?b.suspense.next():d(b.anchor||b.el);let B=!1;const W=(b,S,O)=>{b==null?S._vnode&&He(S._vnode,null,null,!0):m(S._vnode||null,b,S,null,null,null,O),B||(B=!0,Hb(),AA(),B=!1),S._vnode=b},Y={p:m,um:He,m:Ne,r:at,mt:D,mc:N,pc:U,pbc:j,n:R,o:t};let we,me;return e&&([we,me]=e(Y)),{render:W,hydrate:we,createApp:tD(W,we)}}function eg({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function vo({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function cD(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Xv(t,e,n=!1){const r=t.children,i=e.children;if(Ie(r)&&Ie(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Ts(i[s]),a.el=o.el),n||Xv(o,a)),a.type===Pp&&(a.el=o.el)}}function uD(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function qA(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:qA(e)}const hD=t=>t.__isTeleport,zc=t=>t&&(t.disabled||t.disabled===""),nE=t=>typeof SVGElement<"u"&&t instanceof SVGElement,rE=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Dy=(t,e)=>{const n=t&&t.to;return Ut(n)?e?e(n):null:n},dD={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:m,createComment:g}}=c,y=zc(e.props);let{shapeFlag:_,children:T,dynamicChildren:w}=e;if(t==null){const I=e.el=m(""),C=e.anchor=m("");f(I,n,r),f(C,n,r);const x=e.target=Dy(e.props,p),N=e.targetAnchor=m("");x&&(f(N,x),o==="svg"||nE(x)?o="svg":(o==="mathml"||rE(x))&&(o="mathml"));const k=(j,K)=>{_&16&&u(T,j,K,i,s,o,a,l)};y?k(n,C):x&&k(x,N)}else{e.el=t.el;const I=e.anchor=t.anchor,C=e.target=t.target,x=e.targetAnchor=t.targetAnchor,N=zc(t.props),k=N?n:C,j=N?I:x;if(o==="svg"||nE(C)?o="svg":(o==="mathml"||rE(C))&&(o="mathml"),w?(d(t.dynamicChildren,w,k,i,s,o,a),Xv(t,e,!0)):l||h(t,e,k,j,i,s,o,a,!1),y)N?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):td(e,n,I,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const K=e.target=Dy(e.props,p);K&&td(e,K,null,c,0)}else N&&td(e,C,x,c,1)}GA(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:d}=t;if(h&&s(u),o&&s(c),a&16){const f=o||!zc(d);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,n,f,!!m.dynamicChildren)}}},move:td,hydrate:fD};function td(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,h=s===2;if(h&&r(o,e,n),(!h||zc(u))&&l&16)for(let d=0;d<c.length;d++)i(c[d],e,n,2);h&&r(a,e,n)}function fD(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=Dy(e.props,l);if(u){const h=u._lpa||u.firstChild;if(e.shapeFlag&16)if(zc(e.props))e.anchor=c(o(t),e,a(t),n,r,i,s),e.targetAnchor=h;else{e.anchor=o(t);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(h,e,u,n,r,i,s)}GA(e)}return e.anchor&&o(e.anchor)}const pD=dD;function GA(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const fe=Symbol.for("v-fgt"),Pp=Symbol.for("v-txt"),Zn=Symbol.for("v-cmt"),Vd=Symbol.for("v-stc"),jc=[];let Cr=null;function M(t=!1){jc.push(Cr=t?null:[])}function KA(){jc.pop(),Cr=jc[jc.length-1]||null}let vl=1;function iE(t){vl+=t}function YA(t){return t.dynamicChildren=vl>0?Cr||Qa:null,KA(),vl>0&&Cr&&Cr.push(t),t}function H(t,e,n,r,i,s){return YA(v(t,e,n,r,i,s,!0))}function dt(t,e,n,r,i){return YA(Te(t,e,n,r,i,!0))}function _u(t){return t?t.__v_isVNode===!0:!1}function ri(t,e){return t.type===e.type&&t.key===e.key}const xp="__vInternal",JA=({key:t})=>t??null,Fd=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ut(t)||un(t)||Me(t)?{i:Qt,r:t,k:e,f:!!n}:t:null);function v(t,e=null,n=null,r=0,i=null,s=t===fe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&JA(e),ref:e&&Fd(e),scopeId:Op,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Qt};return a?(Zv(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Ut(n)?8:16),vl>0&&!o&&Cr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Cr.push(l),l}const Te=mD;function mD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===wx)&&(t=Zn),_u(t)){const a=Qs(t,e,!0);return n&&Zv(a,n),vl>0&&!s&&Cr&&(a.shapeFlag&6?Cr[Cr.indexOf(t)]=a:Cr.push(a)),a.patchFlag|=-2,a}if(AD(t)&&(t=t.__vccOpts),e){e=gD(e);let{class:a,style:l}=e;a&&!Ut(a)&&(e.class=Js(a)),gt(l)&&(_A(l)&&!Ie(l)&&(l=Xt({},l)),e.style=tr(l))}const o=Ut(t)?1:Ix(t)?128:hD(t)?64:gt(t)?4:Me(t)?2:0;return v(t,e,n,r,i,o,s,!0)}function gD(t){return t?_A(t)||xp in t?Xt({},t):t:null}function Qs(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?yD(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&JA(a),ref:e&&e.ref?n&&i?Ie(i)?i.concat(Fd(e)):[i,Fd(e)]:Fd(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==fe?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Qs(t.ssContent),ssFallback:t.ssFallback&&Qs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ce(t=" ",e=0){return Te(Pp,null,t,e)}function Dp(t,e){const n=Te(Vd,null,t);return n.staticCount=e,n}function _e(t="",e=!1){return e?(M(),dt(Zn,null,t)):Te(Zn,null,t)}function Vr(t){return t==null||typeof t=="boolean"?Te(Zn):Ie(t)?Te(fe,null,t.slice()):typeof t=="object"?Ts(t):Te(Pp,null,String(t))}function Ts(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Qs(t)}function Zv(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ie(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Zv(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(xp in e)?e._ctx=Qt:i===3&&Qt&&(Qt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Me(e)?(e={default:e,_ctx:Qt},n=32):(e=String(e),r&64?(n=16,e=[ce(e)]):n=8);t.children=e,t.shapeFlag|=n}function yD(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Js([e.class,r.class]));else if(i==="style")e.style=tr([e.style,r.style]);else if(Tp(i)){const s=e[i],o=r[i];o&&s!==o&&!(Ie(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function ei(t,e,n,r=null){Or(t,e,7,[n,r])}const _D=BA();let vD=0;function bD(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||_D,s={uid:vD++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new rA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:HA(r,i),emitsOptions:RA(r,i),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:r.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=_x.bind(null,s),t.ce&&t.ce(s),s}let Tn=null;const Ea=()=>Tn||Qt;let hf,Ly;{const t=ZI(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};hf=e("__VUE_INSTANCE_SETTERS__",n=>Tn=n),Ly=e("__VUE_SSR_SETTERS__",n=>Lp=n)}const ra=t=>{const e=Tn;return hf(t),t.scope.on(),()=>{t.scope.off(),hf(e)}},Vy=()=>{Tn&&Tn.scope.off(),hf(null)};function QA(t){return t.vnode.shapeFlag&4}let Lp=!1;function ED(t,e=!1){e&&Ly(e);const{props:n,children:r}=t.vnode,i=QA(t);nD(t,n,i,e),sD(t,r);const s=i?TD(t,e):void 0;return e&&Ly(!1),s}function TD(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Rp(new Proxy(t.ctx,Kx));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?SD(t):null,s=ra(t);va();const o=Us(r,t,0,[t.props,i]);if(ba(),s(),Pv(o)){if(o.then(Vy,Vy),e)return o.then(a=>{Fy(t,a,e)}).catch(a=>{ih(a,t,0)});t.asyncDep=o}else Fy(t,o,e)}else XA(t,e)}function Fy(t,e,n){Me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:gt(e)&&(t.setupState=TA(e)),XA(t,n)}let sE;function XA(t,e,n){const r=t.type;if(!t.render){if(!e&&sE&&!r.render){const i=r.template||Jv(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Xt(Xt({isCustomElement:s,delimiters:a},o),l);r.render=sE(i,c)}}t.render=r.render||Ar}{const i=ra(t);va();try{Yx(t)}finally{ba(),i()}}}function wD(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return nr(t,"get","$attrs"),e[n]}}))}function SD(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return wD(t)},slots:t.slots,emit:t.emit,expose:e}}function Vp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(TA(Rp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in $c)return $c[n](t)},has(e,n){return n in e||n in $c}}))}function ID(t,e=!0){return Me(t)?t.displayName||t.name:t.name||e&&t.__name}function AD(t){return Me(t)&&"__vccOpts"in t}const pt=(t,e)=>ox(t,e,Lp);function qo(t,e,n){const r=arguments.length;return r===2?gt(e)&&!Ie(e)?_u(e)?Te(t,null,[e]):Te(t,e):Te(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&_u(n)&&(n=[n]),Te(t,e,n))}const CD="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const RD="http://www.w3.org/2000/svg",kD="http://www.w3.org/1998/Math/MathML",ws=typeof document<"u"?document:null,oE=ws&&ws.createElement("template"),OD={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?ws.createElementNS(RD,t):e==="mathml"?ws.createElementNS(kD,t):ws.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ws.createTextNode(t),createComment:t=>ws.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ws.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{oE.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=oE.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},fs="transition",cc="animation",vu=Symbol("_vtc"),df=(t,{slots:e})=>qo(Fx,ND(t),e);df.displayName="Transition";const ZA={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};df.props=Xt({},MA,ZA);const bo=(t,e=[])=>{Ie(t)?t.forEach(n=>n(...e)):t&&t(...e)},aE=t=>t?Ie(t)?t.some(e=>e.length>1):t.length>1:!1;function ND(t){const e={};for(const z in t)z in ZA||(e[z]=t[z]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=MD(i),m=p&&p[0],g=p&&p[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:T,onLeave:w,onLeaveCancelled:I,onBeforeAppear:C=y,onAppear:x=_,onAppearCancelled:N=T}=e,k=(z,V,D)=>{Eo(z,V?u:a),Eo(z,V?c:o),D&&D()},j=(z,V)=>{z._isLeaving=!1,Eo(z,h),Eo(z,f),Eo(z,d),V&&V()},K=z=>(V,D)=>{const P=z?x:_,A=()=>k(V,z,D);bo(P,[V,A]),lE(()=>{Eo(V,z?l:s),ps(V,z?u:a),aE(P)||cE(V,r,m,A)})};return Xt(e,{onBeforeEnter(z){bo(y,[z]),ps(z,s),ps(z,o)},onBeforeAppear(z){bo(C,[z]),ps(z,l),ps(z,c)},onEnter:K(!1),onAppear:K(!0),onLeave(z,V){z._isLeaving=!0;const D=()=>j(z,V);ps(z,h),DD(),ps(z,d),lE(()=>{z._isLeaving&&(Eo(z,h),ps(z,f),aE(w)||cE(z,r,g,D))}),bo(w,[z,D])},onEnterCancelled(z){k(z,!1),bo(T,[z])},onAppearCancelled(z){k(z,!0),bo(N,[z])},onLeaveCancelled(z){j(z),bo(I,[z])}})}function MD(t){if(t==null)return null;if(gt(t))return[tg(t.enter),tg(t.leave)];{const e=tg(t);return[e,e]}}function tg(t){return XI(t)}function ps(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[vu]||(t[vu]=new Set)).add(e)}function Eo(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[vu];n&&(n.delete(e),n.size||(t[vu]=void 0))}function lE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let PD=0;function cE(t,e,n,r){const i=t._endId=++PD,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=xD(t,e);if(!o)return r();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,d),s()},d=f=>{f.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,d)}function xD(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${fs}Delay`),s=r(`${fs}Duration`),o=uE(i,s),a=r(`${cc}Delay`),l=r(`${cc}Duration`),c=uE(a,l);let u=null,h=0,d=0;e===fs?o>0&&(u=fs,h=o,d=s.length):e===cc?c>0&&(u=cc,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?fs:cc:null,d=u?u===fs?s.length:l.length:0);const f=u===fs&&/\b(transform|all)(,|$)/.test(r(`${fs}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function uE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>hE(n)+hE(t[r])))}function hE(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function DD(){return document.body.offsetHeight}function LD(t,e,n){const r=t[vu];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ff=Symbol("_vod"),eC=Symbol("_vsh"),uc={beforeMount(t,{value:e},{transition:n}){t[ff]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):hc(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),hc(t,!0),r.enter(t)):r.leave(t,()=>{hc(t,!1)}):hc(t,e))},beforeUnmount(t,{value:e}){hc(t,e)}};function hc(t,e){t.style.display=e?t[ff]:"none",t[eC]=!e}const VD=Symbol(""),FD=/(^|;)\s*display\s*:/;function UD(t,e,n){const r=t.style,i=Ut(n);let s=!1;if(n&&!i){if(e)if(Ut(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ud(r,a,"")}else for(const o in e)n[o]==null&&Ud(r,o,"");for(const o in n)o==="display"&&(s=!0),Ud(r,o,n[o])}else if(i){if(e!==n){const o=r[VD];o&&(n+=";"+o),r.cssText=n,s=FD.test(n)}}else e&&t.removeAttribute("style");ff in t&&(t[ff]=s?r.display:"",t[eC]&&(r.display="none"))}const dE=/\s*!important$/;function Ud(t,e,n){if(Ie(n))n.forEach(r=>Ud(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=BD(t,e);dE.test(n)?t.setProperty(_a(r),n.replace(dE,""),"important"):t[r]=n}}const fE=["Webkit","Moz","ms"],ng={};function BD(t,e){const n=ng[e];if(n)return n;let r=vi(e);if(r!=="filter"&&r in t)return ng[e]=r;r=Ip(r);for(let i=0;i<fE.length;i++){const s=fE[i]+r;if(s in t)return ng[e]=s}return e}const pE="http://www.w3.org/1999/xlink";function $D(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(pE,e.slice(6,e.length)):t.setAttributeNS(pE,e,n);else{const s=VP(e);n==null||s&&!eA(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function HD(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=eA(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Ro(t,e,n,r){t.addEventListener(e,n,r)}function zD(t,e,n,r){t.removeEventListener(e,n,r)}const mE=Symbol("_vei");function jD(t,e,n,r,i=null){const s=t[mE]||(t[mE]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=WD(e);if(r){const c=s[e]=KD(r,i);Ro(t,a,c,l)}else o&&(zD(t,a,o,l),s[e]=void 0)}}const gE=/(?:Once|Passive|Capture)$/;function WD(t){let e;if(gE.test(t)){e={};let r;for(;r=t.match(gE);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):_a(t.slice(2)),e]}let rg=0;const qD=Promise.resolve(),GD=()=>rg||(qD.then(()=>rg=0),rg=Date.now());function KD(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Or(YD(r,n.value),e,5,[r])};return n.value=t,n.attached=GD(),n}function YD(t,e){if(Ie(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const yE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,JD=(t,e,n,r,i,s,o,a,l)=>{const c=i==="svg";e==="class"?LD(t,r,c):e==="style"?UD(t,n,r):Tp(e)?Nv(e)||jD(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):QD(t,e,r,c))?HD(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),$D(t,e,r,c))};function QD(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&yE(e)&&Me(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return yE(e)&&Ut(n)?!1:e in t}const pf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ie(e)?n=>Dd(e,n):e};function XD(t){t.target.composing=!0}function _E(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const nl=Symbol("_assign"),wr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[nl]=pf(i);const s=r||i.props&&i.props.type==="number";Ro(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Ey(a)),t[nl](a)}),n&&Ro(t,"change",()=>{t.value=t.value.trim()}),e||(Ro(t,"compositionstart",XD),Ro(t,"compositionend",_E),Ro(t,"change",_E))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[nl]=pf(s),t.composing)return;const o=i||t.type==="number"?Ey(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},Uy={deep:!0,created(t,e,n){t[nl]=pf(n),Ro(t,"change",()=>{const r=t._modelValue,i=ZD(t),s=t.checked,o=t[nl];if(Ie(r)){const a=tA(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(wp(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(tC(t,s))})},mounted:vE,beforeUpdate(t,e,n){t[nl]=pf(n),vE(t,e,n)}};function vE(t,{value:e,oldValue:n},r){t._modelValue=e,Ie(e)?t.checked=tA(e,r.props.value)>-1:wp(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Ap(e,tC(t,!0)))}function ZD(t){return"_value"in t?t._value:t.value}function tC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const e4=["ctrl","shift","alt","meta"],t4={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>e4.some(n=>t[`${n}Key`]&&!e.includes(n))},nt=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=t4[e[o]];if(a&&a(i,e))return}return t(i,...s)})},n4={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Dr=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=_a(i.key);if(e.some(o=>o===s||n4[o]===s))return t(i)})},r4=Xt({patchProp:JD},OD);let bE;function i4(){return bE||(bE=aD(r4))}const s4=(...t)=>{const e=i4().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=a4(r);if(!i)return;const s=e._component;!Me(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,o4(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function o4(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function a4(t){return Ut(t)?document.querySelector(t):t}var l4=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const c4=Symbol();var EE;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(EE||(EE={}));function u4(){const t=iA(!0),e=t.run(()=>ie({}));let n=[],r=[];const i=Rp({install(s){i._a=s,s.provide(c4,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!l4?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}var TE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe=function(t,e){if(!t)throw Gl(e)},Gl=function(t){return new Error("Firebase Database ("+nC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},h4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Fp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):h4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new d4;const d=s<<2|a>>4;if(r.push(d),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iC=function(t){const e=rC(t);return Fp.encodeByteArray(e,!0)},mf=function(t){return iC(t).replace(/\./g,"")},gf=function(t){try{return Fp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t){return sC(void 0,t)}function sC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!p4(n)||(t[n]=sC(t[n],e[n]));return t}function p4(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=()=>m4().__FIREBASE_DEFAULTS__,y4=()=>{if(typeof process>"u"||typeof TE>"u")return;const t=TE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gf(t[1]);return e&&JSON.parse(e)},Up=()=>{try{return g4()||y4()||_4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},v4=t=>{var e,n;return(n=(e=Up())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},b4=t=>{const e=v4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oC=()=>{var t;return(t=Up())===null||t===void 0?void 0:t.config},E4=t=>{var e;return(e=Up())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mf(JSON.stringify(n)),mf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function w4(){var t;const e=(t=Up())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function S4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I4(){const t=Kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lC(){return nC.NODE_ADMIN===!0}function A4(){return!w4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function t1(){try{return typeof indexedDB=="object"}catch{return!1}}function C4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="FirebaseError";class Ni extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=R4,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kl.prototype.create)}}class Kl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?k4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ni(i,a,r)}}function k4(t,e){return t.replace(O4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const O4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){return JSON.parse(t)}function wn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Eu(gf(s[0])||""),n=Eu(gf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},N4=function(t){const e=cC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},M4=function(t){const e=cC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function By(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Tu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(wE(s)&&wE(o)){if(!Tu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const d=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function x4(t,e){const n=new D4(t,e);return n.subscribe.bind(n)}class D4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");L4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ig),i.error===void 0&&(i.error=ig),i.complete===void 0&&(i.complete=ig);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ig(){}function V4(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,oe(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Bp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t){return t&&t._delegate?t._delegate:t}class Kr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($4(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B4(t){return t===So?void 0:t}function $4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new U4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const z4={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},j4=qe.INFO,W4={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},q4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=W4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ch{constructor(e){this.name=e,this._logLevel=j4,this._logHandler=q4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const G4=(t,e)=>e.some(n=>t instanceof n);let SE,IE;function K4(){return SE||(SE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y4(){return IE||(IE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uC=new WeakMap,$y=new WeakMap,hC=new WeakMap,sg=new WeakMap,n1=new WeakMap;function J4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Bs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uC.set(n,t)}).catch(()=>{}),n1.set(e,t),e}function Q4(t){if($y.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$y.set(t,e)}let Hy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $y.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X4(t){Hy=t(Hy)}function Z4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(og(this),e,...n);return hC.set(r,e.sort?e.sort():[e]),Bs(r)}:Y4().includes(t)?function(...e){return t.apply(og(this),e),Bs(uC.get(this))}:function(...e){return Bs(t.apply(og(this),e))}}function e3(t){return typeof t=="function"?Z4(t):(t instanceof IDBTransaction&&Q4(t),G4(t,K4())?new Proxy(t,Hy):t)}function Bs(t){if(t instanceof IDBRequest)return J4(t);if(sg.has(t))return sg.get(t);const e=e3(t);return e!==t&&(sg.set(t,e),n1.set(e,t)),e}const og=t=>n1.get(t);function t3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Bs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Bs(o.result),l.oldVersion,l.newVersion,Bs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const n3=["get","getKey","getAll","getAllKeys","count"],r3=["put","add","delete","clear"],ag=new Map;function AE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ag.get(e))return ag.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=r3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||n3.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return ag.set(e,s),s}X4(t=>({...t,get:(e,n,r)=>AE(e,n)||t.get(e,n,r),has:(e,n)=>!!AE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(s3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function s3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zy="@firebase/app",CE="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new ch("@firebase/app"),o3="@firebase/app-compat",a3="@firebase/analytics-compat",l3="@firebase/analytics",c3="@firebase/app-check-compat",u3="@firebase/app-check",h3="@firebase/auth",d3="@firebase/auth-compat",f3="@firebase/database",p3="@firebase/database-compat",m3="@firebase/functions",g3="@firebase/functions-compat",y3="@firebase/installations",_3="@firebase/installations-compat",v3="@firebase/messaging",b3="@firebase/messaging-compat",E3="@firebase/performance",T3="@firebase/performance-compat",w3="@firebase/remote-config",S3="@firebase/remote-config-compat",I3="@firebase/storage",A3="@firebase/storage-compat",C3="@firebase/firestore",R3="@firebase/firestore-compat",k3="firebase",O3="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="[DEFAULT]",N3={[zy]:"fire-core",[o3]:"fire-core-compat",[l3]:"fire-analytics",[a3]:"fire-analytics-compat",[u3]:"fire-app-check",[c3]:"fire-app-check-compat",[h3]:"fire-auth",[d3]:"fire-auth-compat",[f3]:"fire-rtdb",[p3]:"fire-rtdb-compat",[m3]:"fire-fn",[g3]:"fire-fn-compat",[y3]:"fire-iid",[_3]:"fire-iid-compat",[v3]:"fire-fcm",[b3]:"fire-fcm-compat",[E3]:"fire-perf",[T3]:"fire-perf-compat",[w3]:"fire-rc",[S3]:"fire-rc-compat",[I3]:"fire-gcs",[A3]:"fire-gcs-compat",[C3]:"fire-fst",[R3]:"fire-fst-compat","fire-js":"fire-js",[k3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=new Map,M3=new Map,Wy=new Map;function RE(t,e){try{t.container.addComponent(e)}catch(n){ia.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bi(t){const e=t.name;if(Wy.has(e))return ia.debug(`There were multiple attempts to register component ${e}.`),!1;Wy.set(e,t);for(const n of _f.values())RE(n,t);for(const n of M3.values())RE(n,t);return!0}function dC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ui(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new Kl("app","Firebase",P3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=O3;function fC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $s.create("bad-app-name",{appName:String(i)});if(n||(n=oC()),!n)throw $s.create("no-options");const s=_f.get(i);if(s){if(Tu(n,s.options)&&Tu(r,s.config))return s;throw $s.create("duplicate-app",{appName:i})}const o=new H4(i);for(const l of Wy.values())o.addComponent(l);const a=new x3(n,r,o);return _f.set(i,a),a}function pC(t=jy){const e=_f.get(t);if(!e&&t===jy&&oC())return fC();if(!e)throw $s.create("no-app",{appName:t});return e}function fr(t,e,n){var r;let i=(r=N3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ia.warn(a.join(" "));return}bi(new Kr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3="firebase-heartbeat-database",L3=1,wu="firebase-heartbeat-store";let lg=null;function mC(){return lg||(lg=t3(D3,L3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wu)}catch(n){console.warn(n)}}}}).catch(t=>{throw $s.create("idb-open",{originalErrorMessage:t.message})})),lg}async function V3(t){try{const n=(await mC()).transaction(wu),r=await n.objectStore(wu).get(gC(t));return await n.done,r}catch(e){if(e instanceof Ni)ia.warn(e.message);else{const n=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ia.warn(n.message)}}}async function kE(t,e){try{const r=(await mC()).transaction(wu,"readwrite");await r.objectStore(wu).put(e,gC(t)),await r.done}catch(n){if(n instanceof Ni)ia.warn(n.message);else{const r=$s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ia.warn(r.message)}}}function gC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=1024,U3=30*24*60*60*1e3;class B3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new H3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=OE();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=U3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=OE(),{heartbeatsToSend:r,unsentEntries:i}=$3(this._heartbeatsCache.heartbeats),s=mf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function OE(){return new Date().toISOString().substring(0,10)}function $3(t,e=F3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),NE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),NE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class H3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t1()?C4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await V3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function NE(t){return mf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(t){bi(new Kr("platform-logger",e=>new i3(e),"PRIVATE")),bi(new Kr("heartbeat",e=>new B3(e),"PRIVATE")),fr(zy,CE,t),fr(zy,CE,"esm2017"),fr("fire-js","")}z3("");function r1(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j3=yC,_C=new Kl("auth","Firebase",yC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=new ch("@firebase/auth");function W3(t,...e){vf.logLevel<=qe.WARN&&vf.warn(`Auth (${ao}): ${t}`,...e)}function Bd(t,...e){vf.logLevel<=qe.ERROR&&vf.error(`Auth (${ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,...e){throw s1(t,...e)}function jr(t,...e){return s1(t,...e)}function i1(t,e,n){const r=Object.assign(Object.assign({},j3()),{[e]:n});return new Kl("auth","Firebase",r).create(e,{appName:t.name})}function Go(t){return i1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ei(t,"argument-error"),i1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function s1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _C.create(t,...e)}function Fe(t,e,...n){if(!t)throw s1(e,...n)}function Bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bd(e),new Error(e)}function Qi(t,e){t||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function G3(){return ME()==="http:"||ME()==="https:"}function ME(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G3()||S4()||"connection"in navigator)?navigator.onLine:!0}function Y3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qi(n>e,"Short delay should be less than long delay!"),this.isMobile=e1()||aC()}get(){return K3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t,e){Qi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new uh(3e4,6e4);function a1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Jl(t,e,n,r,i={}){return bC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Yl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),vC.fetch()(EC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function bC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},J3),e);try{const i=new Z3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw nd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw nd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw i1(t,u,c);Ei(t,u)}}catch(i){if(i instanceof Ni)throw i;Ei(t,"network-request-failed",{message:String(i)})}}async function X3(t,e,n,r,i={}){const s=await Jl(t,e,n,r,i);return"mfaPendingCredential"in s&&Ei(t,"multi-factor-auth-required",{_serverResponse:s}),s}function EC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?o1(t.config,i):`${t.config.apiScheme}://${i}`}class Z3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jr(this.auth,"network-request-failed")),Q3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=jr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(t,e){return Jl(t,"POST","/v1/accounts:delete",e)}async function TC(t,e){return Jl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tL(t,e=!1){const n=hn(t),r=await n.getIdToken(e),i=l1(r);Fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Wc(cg(i.auth_time)),issuedAtTime:Wc(cg(i.iat)),expirationTime:Wc(cg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cg(t){return Number(t)*1e3}function l1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const i=gf(n);return i?JSON.parse(i):(Bd("Failed to decode base64 JWT payload"),null)}catch(i){return Bd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function PE(t){const e=l1(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ni&&nL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wc(this.lastLoginAt),this.creationTime=Wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Su(t,TC(n,{idToken:r}));Fe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?wC(s.providerUserInfo):[],a=sL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function iL(t){const e=hn(t);await bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wC(t){return t.map(e=>{var{providerId:n}=e,r=r1(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t,e){const n=await bC(t,{},async()=>{const r=Yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=EC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aL(t,e){return Jl(t,"POST","/v2/accounts:revokeToken",a1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=PE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await oL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new rl;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rl,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $i{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=r1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Su(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tL(this,e)}reload(){return iL(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ui(this.auth.app))return Promise.reject(Go(this.auth));const e=await this.getIdToken();return await Su(this,eL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:w,isAnonymous:I,providerData:C,stsTokenManager:x}=n;Fe(T&&x,e,"internal-error");const N=rl.fromJSON(this.name,x);Fe(typeof T=="string",e,"internal-error"),ms(h,e.name),ms(d,e.name),Fe(typeof w=="boolean",e,"internal-error"),Fe(typeof I=="boolean",e,"internal-error"),ms(f,e.name),ms(p,e.name),ms(m,e.name),ms(g,e.name),ms(y,e.name),ms(_,e.name);const k=new $i({uid:T,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:I,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:N,createdAt:y,lastLoginAt:_});return C&&Array.isArray(C)&&(k.providerData=C.map(j=>Object.assign({},j))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new rl;i.updateFromServerResponse(n);const s=new $i({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?wC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new rl;a.updateFromIdToken(r);const l=new $i({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Gy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Map;function Hi(t){Qi(t instanceof Function,"Expected a class definition");let e=xE.get(t);return e?(Qi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}SC.type="NONE";const DE=SC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t,e,n){return`firebase:${t}:${e}:${n}`}class il{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$d(this.userKey,i.apiKey,s),this.fullPersistenceKey=$d("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$i._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new il(Hi(DE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Hi(DE);const o=$d(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=$i._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new il(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new il(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kC(e))return"Blackberry";if(OC(e))return"Webos";if(c1(e))return"Safari";if((e.includes("chrome/")||AC(e))&&!e.includes("edge/"))return"Chrome";if(RC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IC(t=Kt()){return/firefox\//i.test(t)}function c1(t=Kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AC(t=Kt()){return/crios\//i.test(t)}function CC(t=Kt()){return/iemobile/i.test(t)}function RC(t=Kt()){return/android/i.test(t)}function kC(t=Kt()){return/blackberry/i.test(t)}function OC(t=Kt()){return/webos/i.test(t)}function $p(t=Kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lL(t=Kt()){var e;return $p(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cL(){return I4()&&document.documentMode===10}function NC(t=Kt()){return $p(t)||RC(t)||OC(t)||kC(t)||/windows phone/i.test(t)||CC(t)}function uL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e=[]){let n;switch(t){case"Browser":n=LE(Kt());break;case"Worker":n=`${LE(Kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dL(t,e={}){return Jl(t,"GET","/v2/passwordPolicy",a1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=6;class pL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VE(this),this.idTokenSubscription=new VE(this),this.beforeStateQueue=new hL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_C,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await TC(this,{idToken:e}),r=await $i._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ui(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Y3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ui(this.app))return Promise.reject(Go(this));const n=e?hn(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ui(this.app)?Promise.reject(Go(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ui(this.app)?Promise.reject(Go(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dL(this),n=new pL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Kl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await aL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hi(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&W3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function u1(t){return hn(t)}class VE{constructor(e){this.auth=e,this.observer=null,this.addObserver=x4(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gL(t){h1=t}function yL(t){return h1.loadJS(t)}function _L(){return h1.gapiScript}function vL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t,e){const n=dC(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Tu(s,e??{}))return i;Ei(i,"already-initialized")}return n.initialize({options:e})}function EL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,n){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t,e){return X3(t,"POST","/v1/accounts:signInWithIdp",a1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="http://localhost";class sa extends PC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=r1(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new sa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return sl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sl(e,n)}buildRequest(){const e={requestUri:TL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends d1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends hh{constructor(){super("facebook.com")}static credential(e){return sa._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends hh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sa._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vi.credential(n,r)}catch{return null}}}Vi.GOOGLE_SIGN_IN_METHOD="google.com";Vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends hh{constructor(){super("github.com")}static credential(e){return sa._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com";ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends hh{constructor(){super("twitter.com")}static credential(e,n){return sa._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Os.credential(n,r)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await $i._fromIdTokenResponse(e,r,i),o=FE(r);return new El({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=FE(r);return new El({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function FE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends Ni{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ef.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ef(e,n,r,i)}}function xC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ef._fromErrorAndOperation(t,s,e,r):s})}async function wL(t,e,n=!1){const r=await Su(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return El._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(t,e,n=!1){const{auth:r}=t;if(Ui(r.app))return Promise.reject(Go(r));const i="reauthenticate";try{const s=await Su(t,xC(r,i,e,t),n);Fe(s.idToken,r,"internal-error");const o=l1(s.idToken);Fe(o,r,"internal-error");const{sub:a}=o;return Fe(t.uid===a,r,"user-mismatch"),El._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ei(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(t,e,n=!1){if(Ui(t.app))return Promise.reject(Go(t));const r="signIn",i=await xC(t,r,e),s=await El._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function AL(t,e,n,r){return hn(t).onIdTokenChanged(e,n,r)}function CL(t){return hn(t).signOut()}const Tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(){const t=Kt();return c1(t)||$p(t)}const kL=1e3,OL=10;class LC extends DC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=RL()&&uL(),this.fallbackToPolling=NC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,OL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LC.type="LOCAL";const NL=LC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends DC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VC.type="SESSION";const FC=VC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Hp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await ML(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=f1("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(){return window}function xL(t){pi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function DL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VL(){return UC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="firebaseLocalStorageDb",FL=1,wf="firebaseLocalStorage",$C="fbase_key";class dh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zp(t,e){return t.transaction([wf],e?"readwrite":"readonly").objectStore(wf)}function UL(){const t=indexedDB.deleteDatabase(BC);return new dh(t).toPromise()}function Ky(){const t=indexedDB.open(BC,FL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wf,{keyPath:$C})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wf)?e(r):(r.close(),await UL(),e(await Ky()))})})}async function UE(t,e,n){const r=zp(t,!0).put({[$C]:e,value:n});return new dh(r).toPromise()}async function BL(t,e){const n=zp(t,!1).get(e),r=await new dh(n).toPromise();return r===void 0?null:r.value}function BE(t,e){const n=zp(t,!0).delete(e);return new dh(n).toPromise()}const $L=800,HL=3;class HC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ky(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hp._getInstance(VL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DL(),!this.activeServiceWorker)return;this.sender=new PL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ky();return await UE(e,Tf,"1"),await BE(e,Tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>UE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>BE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zp(i,!1).getAll();return new dh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$L)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HC.type="LOCAL";const zL=HC;new uh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t,e){return e?Hi(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1 extends PC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jL(t){return IL(t.auth,new p1(t),t.bypassAuthState)}function WL(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),SL(n,new p1(t),t.bypassAuthState)}async function qL(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),wL(n,new p1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jL;case"linkViaPopup":case"linkViaRedirect":return qL;case"reauthViaPopup":case"reauthViaRedirect":return WL;default:Ei(this.auth,"internal-error")}}resolve(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=new uh(2e3,1e4);async function KL(t,e,n){if(Ui(t.app))return Promise.reject(jr(t,"operation-not-supported-in-this-environment"));const r=u1(t);q3(t,e,d1);const i=zC(r,n);return new Po(r,"signInViaPopup",e,i).executeNotNull()}class Po extends jC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Qi(this.filter.length===1,"Popup operations only handle one event");const e=f1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GL.get())};e()}}Po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="pendingRedirect",Hd=new Map;class JL extends jC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const r=await QL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QL(t,e){const n=e6(e),r=ZL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function XL(t,e){Hd.set(t._key(),e)}function ZL(t){return Hi(t._redirectPersistence)}function e6(t){return $d(YL,t.config.apiKey,t.name)}async function t6(t,e,n=!1){if(Ui(t.app))return Promise.reject(Go(t));const r=u1(t),i=zC(r,e),o=await new JL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=10*60*1e3;class r6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n6&&this.cachedEventUids.clear(),this.cachedEventUids.has($E(e))}saveEventToCache(e){this.cachedEventUids.add($E(e)),this.lastProcessedEventTime=Date.now()}}function $E(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function i6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s6(t,e={}){return Jl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a6=/^https?/;async function l6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await s6(t);for(const n of e)try{if(c6(n))return}catch{}Ei(t,"unauthorized-domain")}function c6(t){const e=qy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!a6.test(n))return!1;if(o6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=new uh(3e4,6e4);function HE(){const t=pi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function h6(t){return new Promise((e,n)=>{var r,i,s;function o(){HE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HE(),n(jr(t,"network-request-failed"))},timeout:u6.get()})}if(!((i=(r=pi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=pi().gapi)===null||s===void 0)&&s.load)o();else{const a=vL("iframefcb");return pi()[a]=()=>{gapi.load?o():n(jr(t,"network-request-failed"))},yL(`${_L()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zd=null,e})}let zd=null;function d6(t){return zd=zd||h6(t),zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=new uh(5e3,15e3),p6="__/auth/iframe",m6="emulator/auth/iframe",g6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _6(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?o1(e,m6):`https://${t.config.authDomain}/${p6}`,r={apiKey:e.apiKey,appName:t.name,v:ao},i=y6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Yl(r).slice(1)}`}async function v6(t){const e=await d6(t),n=pi().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:_6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=jr(t,"network-request-failed"),a=pi().setTimeout(()=>{s(o)},f6.get());function l(){pi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E6=500,T6=600,w6="_blank",S6="http://localhost";class zE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function I6(t,e,n,r=E6,i=T6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},b6),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Kt().toLowerCase();n&&(a=AC(c)?w6:n),IC(c)&&(e=e||S6,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(lL(c)&&a!=="_self")return A6(e||"",a),new zE(null);const h=window.open(e||"",a,u);Fe(h,t,"popup-blocked");try{h.focus()}catch{}return new zE(h)}function A6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6="__/auth/handler",R6="emulator/auth/handler",k6=encodeURIComponent("fac");async function jE(t,e,n,r,i,s){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ao,eventId:i};if(e instanceof d1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",By(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof hh){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${k6}=${encodeURIComponent(l)}`:"";return`${O6(t)}?${Yl(a).slice(1)}${c}`}function O6({config:t}){return t.emulator?o1(t,R6):`https://${t.authDomain}/${C6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="webStorageSupport";class N6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FC,this._completeRedirectFn=t6,this._overrideRedirectResult=XL}async _openPopup(e,n,r,i){var s;Qi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await jE(e,n,r,qy(),i);return I6(e,o,f1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await jE(e,n,r,qy(),i);return xL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await v6(e),r=new r6(e);return n.register("authEvent",i=>(Fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ug,{type:ug},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ug];o!==void 0&&n(!!o),Ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NC()||c1()||$p()}}const M6=N6;var WE="@firebase/auth",qE="1.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D6(t){bi(new Kr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MC(t)},c=new mL(r,i,s,l);return EL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bi(new Kr("auth-internal",e=>{const n=u1(e.getProvider("auth").getImmediate());return(r=>new P6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(WE,qE,x6(t)),fr(WE,qE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=5*60;E4("authIdTokenMaxAge");function V6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=jr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",V6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D6("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6=new Map,U6={activated:!1,tokenObservers:[]};function Yr(t){return F6.get(t)||Object.assign({},U6)}const GE={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new bu,this.pending.promise.catch(n=>{}),await $6(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new bu,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function $6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Sf=new Kl("appCheck","AppCheck",H6);function qC(t){if(!Yr(t).activated)throw Sf.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="firebase-app-check-database",j6=1,Yy="firebase-app-check-store";let rd=null;function W6(){return rd||(rd=new Promise((t,e)=>{try{const n=indexedDB.open(z6,j6);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Sf.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Yy,{keyPath:"compositeKey"})}}}catch(n){e(Sf.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),rd)}function q6(t,e){return G6(K6(t),e)}async function G6(t,e){const r=(await W6()).transaction(Yy,"readwrite"),s=r.objectStore(Yy).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Sf.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function K6(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=new ch("@firebase/app-check");function KE(t,e){return t1()?q6(t,e).catch(n=>{Jy.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={error:"UNKNOWN_ERROR"};function J6(t){return Fp.encodeString(JSON.stringify(t),!1)}async function Qy(t,e=!1){const n=t.app;qC(n);const r=Yr(n);let i=r.token,s;if(i&&!Tc(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(Tc(l)?i=l:await KE(n,void 0))}if(!e&&i&&Tc(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Yr(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Jy.warn(l.message):Jy.error(l),s=l}let a;return i?s?Tc(i)?a={token:i.token,internalError:s}:a=JE(s):(a={token:i.token},r.token=i,await KE(n,i)):a=JE(s),o&&e5(n,a),a}async function Q6(t){const e=t.app;qC(e);const{provider:n}=Yr(e);{const{token:r}=await n.getToken();return{token:r}}}function X6(t,e,n,r){const{app:i}=t,s=Yr(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Tc(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),YE(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>YE(t))}function GC(t,e){const n=Yr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function YE(t){const{app:e}=t,n=Yr(e);let r=n.tokenRefresher;r||(r=Z6(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Z6(t){const{app:e}=t;return new B6(async()=>{const n=Yr(e);let r;if(n.token?r=await Qy(t,!0):r=await Qy(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Yr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},GE.RETRIAL_MIN_WAIT,GE.RETRIAL_MAX_WAIT)}function e5(t,e){const n=Yr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Tc(t){return t.expireTimeMillis-Date.now()>0}function JE(t){return{token:J6(Y6),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Yr(this.app);for(const n of e)GC(this.app,n.next);return Promise.resolve()}}function n5(t,e){return new t5(t,e)}function r5(t){return{getToken:e=>Qy(t,e),getLimitedUseToken:()=>Q6(t),addTokenListener:e=>X6(t,"INTERNAL",e),removeTokenListener:e=>GC(t.app,e)}}const i5="@firebase/app-check",s5="0.8.3",o5="app-check",QE="app-check-internal";function a5(){bi(new Kr(o5,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return n5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(QE).initialize()})),bi(new Kr(QE,t=>{const e=t.getProvider("app-check").getImmediate();return r5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),fr(i5,s5)}a5();var l5="firebase",c5="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(l5,c5,"app");const KC=Symbol("firebaseApp");function jp(t){return Ea()&&Xn(KC,null)||pC(t)}const oi=()=>{},u5=typeof window<"u";function m1(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function h5(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,a)=>o&&o[a],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function Ta(t){return!!t&&typeof t=="object"}const d5=Object.prototype;function f5(t){return Ta(t)&&Object.getPrototypeOf(t)===d5}function g1(t){return Ta(t)&&t.type==="document"}function p5(t){return Ta(t)&&t.type==="collection"}function m5(t){return g1(t)||p5(t)}function g5(t){return Ta(t)&&t.type==="query"}function y5(t){return Ta(t)&&"ref"in t}function _5(t){return Ta(t)&&typeof t.bucket=="string"}function v5(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const b5=Symbol.for("v-scx");function E5(){return!!Xn(b5,0)}const id=new WeakMap;function T5(t,e){if(!id.has(t)){const n=iA(!0);id.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),id.delete(t)}}return id.get(t)}const YC=new WeakMap;function w5(t){return YC.get(jp(t))}const sd=new WeakMap;function JC(t){const e=jp(t);if(!sd.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{sd.set(e,s),n(s.value)}];sd.set(e,i)}return sd.get(e)}function lo(t){const e=JC(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function S5(t,e){AL(e,n=>{const r=JC();t.value=n,Array.isArray(r)&&r[1](t)})}var XE={};const ZE="@firebase/database",eT="1.0.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QC="";function I5(t){QC=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Eu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return as(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new A5(e)}}catch{}return new C5},xo=XC("localStorage"),Xy=XC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new ch("@firebase/database"),R5=function(){let t=1;return function(){return t++}}(),ZC=function(t){const e=F4(t),n=new P4;n.update(e);const r=n.digest();return Fp.encodeByteArray(r)},fh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=fh.apply(null,r):typeof r=="object"?e+=wn(r):e+=r,e+=" "}return e};let Ko=null,tT=!0;const k5=function(t,e){oe(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ol.logLevel=qe.VERBOSE,Ko=ol.log.bind(ol),e&&Xy.set("logging_enabled",!0)):typeof t=="function"?Ko=t:(Ko=null,Xy.remove("logging_enabled"))},Nn=function(...t){if(tT===!0&&(tT=!1,Ko===null&&Xy.get("logging_enabled")===!0&&k5(!0)),Ko){const e=fh.apply(null,t);Ko(e)}},ph=function(t){return function(...e){Nn(t,...e)}},Zy=function(...t){const e="FIREBASE INTERNAL ERROR: "+fh(...t);ol.error(e)},oa=function(...t){const e=`FIREBASE FATAL ERROR: ${fh(...t)}`;throw ol.error(e),new Error(e)},pr=function(...t){const e="FIREBASE WARNING: "+fh(...t);ol.warn(e)},O5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&pr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},eR=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},N5=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Tl="[MIN_NAME]",aa="[MAX_NAME]",Ql=function(t,e){if(t===e)return 0;if(t===Tl||e===aa)return-1;if(e===Tl||t===aa)return 1;{const n=nT(t),r=nT(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},M5=function(t,e){return t===e?0:t<e?-1:1},dc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wn(e))},y1=function(t){if(typeof t!="object"||t===null)return wn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=wn(e[r]),n+=":",n+=y1(t[e[r]]);return n+="}",n},tR=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Mr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const nR=function(t){oe(!eR(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},P5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},x5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},D5=new RegExp("^-?(0*)\\d{1,10}$"),L5=-2147483648,V5=2147483647,nT=function(t){if(D5.test(t)){const e=Number(t);if(e>=L5&&e<=V5)return e}return null},mh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw pr("Exception was thrown by user callback.",n),e},Math.floor(0))}},F5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){pr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pr(e)}}class e_{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}e_.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="5",rR="v",iR="s",sR="r",oR="f",aR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lR="ls",cR="p",t_="ac",uR="websocket",hR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function H5(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dR(t,e,n){oe(typeof e=="string","typeof type must == string"),oe(typeof n=="object","typeof params must == object");let r;if(e===uR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===hR)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);H5(t)&&(n.ns=t.namespace);const i=[];return Mr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this.counters_={}}incrementCounter(e,n=1){as(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return f4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg={},dg={};function v1(t){const e=t.toString();return hg[e]||(hg[e]=new z5),hg[e]}function j5(t,e){const n=t.toString();return dg[n]||(dg[n]=e()),dg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&mh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="start",q5="close",G5="pLPCommand",K5="pRTLPCB",fR="id",pR="pw",mR="ser",Y5="cb",J5="seg",Q5="ts",X5="d",Z5="dframe",gR=1870,yR=30,eV=gR-yR,tV=25e3,nV=3e4;class za{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ph(e),this.stats_=v1(n),this.urlFn=l=>(this.appCheckToken&&(l[t_]=this.appCheckToken),dR(n,hR,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new W5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nV)),N5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new b1((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===rT)this.id=a,this.password=l;else if(o===q5)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[rT]="t",r[mR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Y5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[rR]=_1,this.transportSessionId&&(r[iR]=this.transportSessionId),this.lastSessionId&&(r[lR]=this.lastSessionId),this.applicationId&&(r[cR]=this.applicationId),this.appCheckToken&&(r[t_]=this.appCheckToken),typeof location<"u"&&location.hostname&&aR.test(location.hostname)&&(r[sR]=oR);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){za.forceAllow_=!0}static forceDisallow(){za.forceDisallow_=!0}static isAvailable(){return za.forceAllow_?!0:!za.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!P5()&&!x5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=iC(n),i=tR(r,eV);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Z5]="t",r[fR]=e,r[pR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=wn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class b1{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=R5(),window[G5+this.uniqueCallbackIdentifier]=e,window[K5+this.uniqueCallbackIdentifier]=n,this.myIFrame=b1.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Nn("frame writing exception"),a.stack&&Nn(a.stack),Nn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Nn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[fR]=this.myID,e[pR]=this.myPW,e[mR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+yR+r.length<=gR;){const o=this.pendingSegs.shift();r=r+"&"+J5+i+"="+o.seg+"&"+Q5+i+"="+o.ts+"&"+X5+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(tV)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=16384,iV=45e3;let If=null;typeof MozWebSocket<"u"?If=MozWebSocket:typeof WebSocket<"u"&&(If=WebSocket);class Ur{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ph(this.connId),this.stats_=v1(n),this.connURL=Ur.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[rR]=_1,typeof location<"u"&&location.hostname&&aR.test(location.hostname)&&(o[sR]=oR),n&&(o[iR]=n),r&&(o[lR]=r),i&&(o[t_]=i),s&&(o[cR]=s),dR(e,uR,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xo.set("previous_websocket_failure",!0);try{let r;lC(),this.mySock=new If(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Ur.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&If!==null&&!Ur.forceDisallow_}static previouslyFailed(){return xo.isInMemoryStorage||xo.get("previous_websocket_failure")===!0}markConnectionHealthy(){xo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Eu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=tR(n,rV);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(iV))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ur.responsesRequiredToBeHealthy=2;Ur.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[za,Ur]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Ur&&Ur.isAvailable();let r=n&&!Ur.previouslyFailed();if(e.webSocketOnly&&(n||pr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ur];else{const i=this.transports_=[];for(const s of Iu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Iu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Iu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=6e4,oV=5e3,aV=10*1024,lV=100*1024,fg="t",iT="d",cV="s",sT="r",uV="e",oT="o",aT="a",lT="n",cT="p",hV="h";class dV{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ph("c:"+this.id+":"),this.transportManager_=new Iu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>aV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(fg in e){const n=e[fg];n===aT?this.upgradeIfSecondaryHealthy_():n===sT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===oT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=dc("t",e),r=dc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:aT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:lT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=dc("t",e),r=dc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=dc(fg,e);if(iT in e){const r=e[iT];if(n===hV){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===lT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===cV?this.onConnectionShutdown_(r):n===sT?this.onReset_(r):n===uV?Zy("Server Error: "+r):n===oT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Zy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_1!==r&&pr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(sV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(oV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vR=class{constructor(e){this.allowedEvents_=e,this.listeners_={},oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){oe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends vR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!e1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Af}getInitialEvent(e){return oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=32,hT=768;class Rt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function mt(){return new Rt("")}function Qe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xs(t){return t.pieces_.length-t.pieceNum_}function St(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Rt(t.pieces_,e)}function bR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function fV(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ER(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function TR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Rt(e,0)}function an(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Rt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Rt(n,0)}function Ke(t){return t.pieceNum_>=t.pieces_.length}function Rr(t,e){const n=Qe(t),r=Qe(e);if(n===null)return e;if(n===r)return Rr(St(t),St(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wR(t,e){if(Xs(t)!==Xs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function $r(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Xs(t)>Xs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class pV{constructor(e,n){this.errorPrefix_=n,this.parts_=ER(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Bp(this.parts_[r]);SR(this)}}function mV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Bp(e),SR(t)}function gV(t){const e=t.parts_.pop();t.byteLength_-=Bp(e),t.parts_.length>0&&(t.byteLength_-=1)}function SR(t){if(t.byteLength_>hT)throw new Error(t.errorPrefix_+"has a key path longer than "+hT+" bytes ("+t.byteLength_+").");if(t.parts_.length>uT)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+uT+") or object contains a cycle "+Io(t))}function Io(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1 extends vR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new E1}getInitialEvent(e){return oe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=1e3,yV=60*5*1e3,dT=30*1e3,_V=1.3,vV=3e4,bV="server_kill",fT=3;class Ki extends _R{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ki.nextPersistentConnectionId_++,this.log_=ph("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fc,this.maxReconnectDelay_=yV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!lC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");E1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Af.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(wn(s)),oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new bu,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oe(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Ki.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&as(e,"w")){const r=bl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();pr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||M4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=dT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=N4(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+wn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Zy("Unrecognized action received from server: "+wn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=fc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vV&&(this.reconnectDelay_=fc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_V)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ki.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){oe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Nn("getToken() completed but was canceled"):(Nn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new dV(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{pr(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(bV)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&pr(h),l())}}}interrupt(e){Nn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Nn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],By(this.interruptReasons_)&&(this.reconnectDelay_=fc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>y1(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Rt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Nn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=fT&&(this.reconnectDelay_=dT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Nn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=fT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+QC.replace(/\./g,"-")]=1,e1()?e["framework.cordova"]=1:aC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Af.getInstance().currentlyOnline();return By(this.interruptReasons_)&&e}}Ki.nextPersistentConnectionId_=0;Ki.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Xe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Xe(Tl,e),i=new Xe(Tl,n);return this.compare(r,i)!==0}minPost(){return Xe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od;class IR extends Wp{static get __EMPTY_NODE(){return od}static set __EMPTY_NODE(e){od=e}compare(e,n){return Ql(e.name,n.name)}isDefinedOn(e){throw Gl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Xe.MIN}maxPost(){return new Xe(aa,od)}makePost(e,n){return oe(typeof e=="string","KeyIndex indexValue must always be a string."),new Xe(e,od)}toString(){return".key"}}const al=new IR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},lr=class wc{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wc.RED,this.left=i??ai.EMPTY_NODE,this.right=s??ai.EMPTY_NODE}copy(e,n,r,i,s){return new wc(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ai.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ai.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,wc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,wc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};lr.RED=!0;lr.BLACK=!1;class EV{copy(e,n,r,i,s){return this}insert(e,n,r){return new lr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ai=class jd{constructor(e,n=jd.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new jd(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,lr.BLACK,null,null))}remove(e){return new jd(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,lr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ad(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ad(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ad(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ad(this.root_,null,this.comparator_,!0,e)}};ai.EMPTY_NODE=new EV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t,e){return Ql(t.name,e.name)}function T1(t,e){return Ql(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_;function wV(t){n_=t}const AR=function(t){return typeof t=="number"?"number:"+nR(t):"string:"+t},CR=function(t){if(t.isLeafNode()){const e=t.val();oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&as(e,".sv"),"Priority must be a string or number.")}else oe(t===n_||t.isEmpty(),"priority of unexpected type.");oe(t===n_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pT;class rn{constructor(e,n=rn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),CR(this.priorityNode_)}static set __childrenNodeConstructor(e){pT=e}static get __childrenNodeConstructor(){return pT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new rn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ke(e)?this:Qe(e)===".priority"?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:rn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Qe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(oe(r!==".priority"||Xs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,rn.__childrenNodeConstructor.EMPTY_NODE.updateChild(St(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+AR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=nR(this.value_):e+=this.value_,this.lazyHash_=ZC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===rn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof rn.__childrenNodeConstructor?-1:(oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=rn.VALUE_TYPE_ORDER.indexOf(n),s=rn.VALUE_TYPE_ORDER.indexOf(r);return oe(i>=0,"Unknown leaf type: "+n),oe(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}rn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RR,kR;function SV(t){RR=t}function IV(t){kR=t}class AV extends Wp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ql(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Xe.MIN}maxPost(){return new Xe(aa,new rn("[PRIORITY-POST]",kR))}makePost(e,n){const r=RR(e);return new Xe(n,new rn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Dn=new AV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=Math.log(2);class RV{constructor(e){const n=s=>parseInt(Math.log(s)/CV,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cf=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new lr(d,h.node,lr.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),m=i(f+1,c);return h=t[f],d=n?n(h):h,new lr(d,h.node,lr.BLACK,p,m)}},s=function(l){let c=null,u=null,h=t.length;const d=function(p,m){const g=h-p,y=h;h-=p;const _=i(g+1,y),T=t[g],w=n?n(T):T;f(new lr(w,T.node,m,null,_))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));m?d(g,lr.BLACK):(d(g,lr.BLACK),d(g,lr.RED))}return u},o=new RV(t.length),a=s(o);return new ai(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pg;const Oa={};class zi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return oe(Oa&&Dn,"ChildrenNode.ts has not been loaded"),pg=pg||new zi({".priority":Oa},{".priority":Dn}),pg}get(e){const n=bl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ai?n:null}hasIndex(e){return as(this.indexSet_,e.toString())}addIndex(e,n){oe(e!==al,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Xe.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Cf(r,e.getCompare()):a=Oa;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new zi(u,c)}addToIndexes(e,n){const r=yf(this.indexes_,(i,s)=>{const o=bl(this.indexSet_,s);if(oe(o,"Missing index implementation for "+s),i===Oa)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Xe.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Cf(a,o.getCompare())}else return Oa;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Xe(e.name,a))),l.insert(e,e.node)}});return new zi(r,this.indexSet_)}removeFromIndexes(e,n){const r=yf(this.indexes_,i=>{if(i===Oa)return i;{const s=n.get(e.name);return s?i.remove(new Xe(e.name,s)):i}});return new zi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc;class ot{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&CR(this.priorityNode_),this.children_.isEmpty()&&oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pc||(pc=new ot(new ai(T1),null,zi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pc}updatePriority(e){return this.children_.isEmpty()?this:new ot(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?pc:n}}getChild(e){const n=Qe(e);return n===null?this:this.getImmediateChild(n).getChild(St(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(oe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Xe(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?pc:this.priorityNode_;return new ot(i,o,s)}}updateChild(e,n){const r=Qe(e);if(r===null)return n;{oe(Qe(e)!==".priority"||Xs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(St(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Dn,(o,a)=>{n[o]=a.val(e),r++,s&&ot.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+AR(this.getPriority().val())+":"),this.forEachChild(Dn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":ZC(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Xe(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Xe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Xe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Xe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Xe.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gh?-1:0}withIndex(e){if(e===al||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ot(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===al||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Dn),i=n.getIterator(Dn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===al?null:this.indexMap_.get(e.toString())}}ot.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class kV extends ot{constructor(){super(new ai(T1),ot.EMPTY_NODE,zi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ot.EMPTY_NODE}isEmpty(){return!1}}const gh=new kV;Object.defineProperties(Xe,{MIN:{value:new Xe(Tl,ot.EMPTY_NODE)},MAX:{value:new Xe(aa,gh)}});IR.__EMPTY_NODE=ot.EMPTY_NODE;rn.__childrenNodeConstructor=ot;wV(gh);IV(gh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=!0;function Mn(t,e=null){if(t===null)return ot.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new rn(n,Mn(e))}if(!(t instanceof Array)&&OV){const n=[];let r=!1;if(Mr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Mn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Xe(o,l)))}}),n.length===0)return ot.EMPTY_NODE;const s=Cf(n,TV,o=>o.name,T1);if(r){const o=Cf(n,Dn.getCompare());return new ot(s,Mn(e),new zi({".priority":o},{".priority":Dn}))}else return new ot(s,Mn(e),zi.Default)}else{let n=ot.EMPTY_NODE;return Mr(t,(r,i)=>{if(as(t,r)&&r.substring(0,1)!=="."){const s=Mn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Mn(e))}}SV(Mn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV extends Wp{constructor(e){super(),this.indexPath_=e,oe(!Ke(e)&&Qe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ql(e.name,n.name):s}makePost(e,n){const r=Mn(e),i=ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new Xe(n,i)}maxPost(){const e=ot.EMPTY_NODE.updateChild(this.indexPath_,gh);return new Xe(aa,e)}toString(){return ER(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV extends Wp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ql(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Xe.MIN}maxPost(){return Xe.MAX}makePost(e,n){const r=Mn(e);return new Xe(n,r)}toString(){return".value"}}const PV=new MV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){return{type:"value",snapshotNode:t}}function DV(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function LV(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function mT(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function VV(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Tl}hasEnd(){return this.endSet_}getIndexEndValue(){return oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:aa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dn}copy(){const e=new w1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Dn?n="$priority":t.index_===PV?n="$value":t.index_===al?n="$key":(oe(t.index_ instanceof NV,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=wn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=wn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+wn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=wn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+wn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function yT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Dn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends _R{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ph("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Rf.getListenId_(e,r),a={};this.listens_[o]=a;const l=gT(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,r),bl(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",i(d,null)}})}unlisten(e,n){const r=Rf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=gT(e._queryParams),r=e._path.toString(),i=new bu;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Eu(a.responseText)}catch{pr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&pr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(){this.rootNode_=ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(){return{value:null,children:new Map}}function OR(t,e,n){if(Ke(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Qe(e);t.children.has(r)||t.children.set(r,kf());const i=t.children.get(r);e=St(e),OR(i,e,n)}}function r_(t,e,n){t.value!==null?n(e,t.value):UV(t,(r,i)=>{const s=new Rt(e.toString()+"/"+r);r_(i,s,n)})}function UV(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Mr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=10*1e3,$V=30*1e3,HV=5*60*1e3;class zV{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new BV(e);const r=_T+($V-_T)*Math.random();qc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Mr(e,(i,s)=>{s>0&&as(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),qc(this.reportStats_.bind(this),Math.floor(Math.random()*2*HV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(li||(li={}));function NR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function MR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function PR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=li.ACK_USER_WRITE,this.source=NR()}operationForChild(e){if(Ke(this.path)){if(this.affectedTree.value!=null)return oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Rt(e));return new Of(mt(),n,this.revert)}}else return oe(Qe(this.path)===e,"operationForChild called for unrelated child."),new Of(St(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=li.OVERWRITE}operationForChild(e){return Ke(this.path)?new la(this.source,mt(),this.snap.getImmediateChild(e)):new la(this.source,St(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=li.MERGE}operationForChild(e){if(Ke(this.path)){const n=this.children.subtree(new Rt(e));return n.isEmpty()?null:n.value?new la(this.source,mt(),n.value):new Au(this.source,mt(),n)}else return oe(Qe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Au(this.source,St(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ke(e))return this.isFullyInitialized()&&!this.filtered_;const n=Qe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function jV(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(VV(o.childName,o.snapshotNode))}),mc(t,i,"child_removed",e,r,n),mc(t,i,"child_added",e,r,n),mc(t,i,"child_moved",s,r,n),mc(t,i,"child_changed",e,r,n),mc(t,i,"value",e,r,n),i}function mc(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>qV(t,a,l)),o.forEach(a=>{const l=WV(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function WV(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function qV(t,e,n){if(e.childName==null||n.childName==null)throw Gl("Should only compare child_ events.");const r=new Xe(e.childName,e.snapshotNode),i=new Xe(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t,e){return{eventCache:t,serverCache:e}}function Gc(t,e,n,r){return xR(new S1(e,n,r),t.serverCache)}function DR(t,e,n,r){return xR(t.eventCache,new S1(e,n,r))}function i_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ca(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mg;const GV=()=>(mg||(mg=new ai(M5)),mg);class Tt{constructor(e,n=GV()){this.value=e,this.children=n}static fromObject(e){let n=new Tt(null);return Mr(e,(r,i)=>{n=n.set(new Rt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:mt(),value:this.value};if(Ke(e))return null;{const r=Qe(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(St(e),n);return s!=null?{path:an(new Rt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ke(e))return this;{const n=Qe(e),r=this.children.get(n);return r!==null?r.subtree(St(e)):new Tt(null)}}set(e,n){if(Ke(e))return new Tt(n,this.children);{const r=Qe(e),s=(this.children.get(r)||new Tt(null)).set(St(e),n),o=this.children.insert(r,s);return new Tt(this.value,o)}}remove(e){if(Ke(e))return this.children.isEmpty()?new Tt(null):new Tt(null,this.children);{const n=Qe(e),r=this.children.get(n);if(r){const i=r.remove(St(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Tt(null):new Tt(this.value,s)}else return this}}get(e){if(Ke(e))return this.value;{const n=Qe(e),r=this.children.get(n);return r?r.get(St(e)):null}}setTree(e,n){if(Ke(e))return n;{const r=Qe(e),s=(this.children.get(r)||new Tt(null)).setTree(St(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Tt(this.value,o)}}fold(e){return this.fold_(mt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(an(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,mt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ke(e))return null;{const s=Qe(e),o=this.children.get(s);return o?o.findOnPath_(St(e),an(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,mt(),n)}foreachOnPath_(e,n,r){if(Ke(e))return this;{this.value&&r(n,this.value);const i=Qe(e),s=this.children.get(i);return s?s.foreachOnPath_(St(e),an(n,i),r):new Tt(null)}}foreach(e){this.foreach_(mt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(an(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.writeTree_=e}static empty(){return new Wr(new Tt(null))}}function Kc(t,e,n){if(Ke(e))return new Wr(new Tt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Rr(i,e);return s=s.updateChild(o,n),new Wr(t.writeTree_.set(i,s))}else{const i=new Tt(n),s=t.writeTree_.setTree(e,i);return new Wr(s)}}}function vT(t,e,n){let r=t;return Mr(n,(i,s)=>{r=Kc(r,an(e,i),s)}),r}function bT(t,e){if(Ke(e))return Wr.empty();{const n=t.writeTree_.setTree(e,new Tt(null));return new Wr(n)}}function s_(t,e){return wa(t,e)!=null}function wa(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Rr(n.path,e)):null}function ET(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Dn,(r,i)=>{e.push(new Xe(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Xe(r,i.value))}),e}function Hs(t,e){if(Ke(e))return t;{const n=wa(t,e);return n!=null?new Wr(new Tt(n)):new Wr(t.writeTree_.subtree(e))}}function o_(t){return t.writeTree_.isEmpty()}function wl(t,e){return LR(mt(),t.writeTree_,e)}function LR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(oe(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=LR(an(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(an(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){return HR(e,t)}function KV(t,e,n,r,i){oe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Kc(t.visibleWrites,e,n)),t.lastWriteId=r}function YV(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function JV(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);oe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&QV(a,r.path)?i=!1:$r(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return XV(t),!0;if(r.snap)t.visibleWrites=bT(t.visibleWrites,r.path);else{const a=r.children;Mr(a,l=>{t.visibleWrites=bT(t.visibleWrites,an(r.path,l))})}return!0}else return!1}function QV(t,e){if(t.snap)return $r(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&$r(an(t.path,n),e))return!0;return!1}function XV(t){t.visibleWrites=FR(t.allWrites,ZV,mt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ZV(t){return t.visible}function FR(t,e,n){let r=Wr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)$r(n,o)?(a=Rr(n,o),r=Kc(r,a,s.snap)):$r(o,n)&&(a=Rr(o,n),r=Kc(r,mt(),s.snap.getChild(a)));else if(s.children){if($r(n,o))a=Rr(n,o),r=vT(r,a,s.children);else if($r(o,n))if(a=Rr(o,n),Ke(a))r=vT(r,mt(),s.children);else{const l=bl(s.children,Qe(a));if(l){const c=l.getChild(St(a));r=Kc(r,mt(),c)}}}else throw Gl("WriteRecord should have .snap or .children")}}return r}function UR(t,e,n,r,i){if(!r&&!i){const s=wa(t.visibleWrites,e);if(s!=null)return s;{const o=Hs(t.visibleWrites,e);if(o_(o))return n;if(n==null&&!s_(o,mt()))return null;{const a=n||ot.EMPTY_NODE;return wl(o,a)}}}else{const s=Hs(t.visibleWrites,e);if(!i&&o_(s))return n;if(!i&&n==null&&!s_(s,mt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&($r(c.path,e)||$r(e,c.path))},a=FR(t.allWrites,o,e),l=n||ot.EMPTY_NODE;return wl(a,l)}}}function e9(t,e,n){let r=ot.EMPTY_NODE;const i=wa(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Dn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Hs(t.visibleWrites,e);return n.forEachChild(Dn,(o,a)=>{const l=wl(Hs(s,new Rt(o)),a);r=r.updateImmediateChild(o,l)}),ET(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Hs(t.visibleWrites,e);return ET(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function t9(t,e,n,r,i){oe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=an(e,n);if(s_(t.visibleWrites,s))return null;{const o=Hs(t.visibleWrites,s);return o_(o)?i.getChild(n):wl(o,i.getChild(n))}}function n9(t,e,n,r){const i=an(e,n),s=wa(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Hs(t.visibleWrites,i);return wl(o,r.getNode().getImmediateChild(n))}else return null}function r9(t,e){return wa(t.visibleWrites,e)}function i9(t,e,n,r,i,s,o){let a;const l=Hs(t.visibleWrites,e),c=wa(l,mt());if(c!=null)a=c;else if(n!=null)a=wl(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&u.length<i;)h(f,r)!==0&&u.push(f),f=d.getNext();return u}else return[]}function s9(){return{visibleWrites:Wr.empty(),allWrites:[],lastWriteId:-1}}function a_(t,e,n,r){return UR(t.writeTree,t.treePath,e,n,r)}function BR(t,e){return e9(t.writeTree,t.treePath,e)}function TT(t,e,n,r){return t9(t.writeTree,t.treePath,e,n,r)}function Nf(t,e){return r9(t.writeTree,an(t.treePath,e))}function o9(t,e,n,r,i,s){return i9(t.writeTree,t.treePath,e,n,r,i,s)}function I1(t,e,n){return n9(t.writeTree,t.treePath,e,n)}function $R(t,e){return HR(an(t.treePath,e),t.writeTree)}function HR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;oe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),oe(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,mT(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,LV(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,DV(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,mT(r,e.snapshotNode,i.oldSnap));else throw Gl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const zR=new l9;class A1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new S1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return I1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ca(this.viewCache_),s=o9(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function c9(t,e){oe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),oe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function u9(t,e,n,r,i){const s=new a9;let o,a;if(n.type===li.OVERWRITE){const c=n;c.source.fromUser?o=l_(t,e,c.path,c.snap,r,i,s):(oe(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ke(c.path),o=Mf(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===li.MERGE){const c=n;c.source.fromUser?o=d9(t,e,c.path,c.children,r,i,s):(oe(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=c_(t,e,c.path,c.children,r,i,a,s))}else if(n.type===li.ACK_USER_WRITE){const c=n;c.revert?o=m9(t,e,c.path,r,i,s):o=f9(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===li.LISTEN_COMPLETE)o=p9(t,e,n.path,r,s);else throw Gl("Unknown operation type: "+n.type);const l=s.getChanges();return h9(e,o,l),{viewCache:o,changes:l}}function h9(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=i_(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(xV(i_(e)))}}function jR(t,e,n,r,i,s){const o=e.eventCache;if(Nf(r,n)!=null)return e;{let a,l;if(Ke(n))if(oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ca(e),u=c instanceof ot?c:ot.EMPTY_NODE,h=BR(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=a_(r,ca(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Qe(n);if(c===".priority"){oe(Xs(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=TT(r,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=St(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=TT(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=I1(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,i,s):a=o.getNode()}}return Gc(e,a,o.isFullyInitialized()||Ke(n),t.filter.filtersNodes())}}function Mf(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Ke(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Qe(n);if(!l.isCompleteForPath(n)&&Xs(n)>1)return e;const p=St(n),g=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),f,g,p,zR,null)}const h=DR(e,c,l.isFullyInitialized()||Ke(n),u.filtersNodes()),d=new A1(i,h,s);return jR(t,h,n,i,d,a)}function l_(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new A1(i,e,s);if(Ke(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Gc(e,c,!0,t.filter.filtersNodes());else{const h=Qe(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Gc(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=St(n),f=a.getNode().getImmediateChild(h);let p;if(Ke(d))p=r;else{const m=u.getCompleteChild(h);m!=null?bR(d)===".priority"&&m.getChild(TR(d)).isEmpty()?p=m:p=m.updateChild(d,r):p=ot.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=Gc(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function wT(t,e){return t.eventCache.isCompleteForChild(e)}function d9(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=an(n,l);wT(e,Qe(u))&&(a=l_(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=an(n,l);wT(e,Qe(u))||(a=l_(t,a,u,c,i,s,o))}),a}function ST(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function c_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Ke(n)?c=r:c=new Tt(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=ST(t,f,d);l=Mf(t,l,new Rt(h),p,i,s,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),m=ST(t,p,d);l=Mf(t,l,new Rt(h),m,i,s,o,a)}}),l}function f9(t,e,n,r,i,s,o){if(Nf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ke(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Mf(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Ke(n)){let c=new Tt(null);return l.getNode().forEachChild(al,(u,h)=>{c=c.set(new Rt(u),h)}),c_(t,e,n,c,i,s,a,o)}else return e}else{let c=new Tt(null);return r.foreach((u,h)=>{const d=an(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),c_(t,e,n,c,i,s,a,o)}}function p9(t,e,n,r,i){const s=e.serverCache,o=DR(e,s.getNode(),s.isFullyInitialized()||Ke(n),s.isFiltered());return jR(t,o,n,r,zR,i)}function m9(t,e,n,r,i,s){let o;if(Nf(r,n)!=null)return e;{const a=new A1(r,e,i),l=e.eventCache.getNode();let c;if(Ke(n)||Qe(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=a_(r,ca(e));else{const h=e.serverCache.getNode();oe(h instanceof ot,"serverChildren would be complete if leaf node"),u=BR(r,h)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Qe(n);let h=I1(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,St(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,ot.EMPTY_NODE,St(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=a_(r,ca(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Nf(r,mt())!=null,Gc(e,c,o,t.filter.filtersNodes())}}function g9(t,e){const n=ca(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ke(e)&&!n.getImmediateChild(Qe(e)).isEmpty())?n.getChild(e):null}function IT(t,e,n,r){e.type===li.MERGE&&e.source.queryId!==null&&(oe(ca(t.viewCache_),"We should always have a full cache before handling merges"),oe(i_(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=u9(t.processor_,i,e,n,r);return c9(t.processor_,s.viewCache),oe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,y9(t,s.changes,s.viewCache.eventCache.getNode(),null)}function y9(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return jV(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AT;function _9(t){oe(!AT,"__referenceConstructor has already been defined"),AT=t}function C1(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return oe(s!=null,"SyncTree gave us an op for an invalid query."),IT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(IT(o,e,n,r));return s}}function R1(t,e){let n=null;for(const r of t.views.values())n=n||g9(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CT;function v9(t){oe(!CT,"__referenceConstructor has already been defined"),CT=t}class RT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Tt(null),this.pendingWriteTree_=s9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function b9(t,e,n,r,i){return KV(t.pendingWriteTree_,e,n,r,i),i?Gp(t,new la(NR(),e,n)):[]}function ja(t,e,n=!1){const r=YV(t.pendingWriteTree_,e);if(JV(t.pendingWriteTree_,e)){let s=new Tt(null);return r.snap!=null?s=s.set(mt(),!0):Mr(r.children,o=>{s=s.set(new Rt(o),!0)}),Gp(t,new Of(r.path,s,n))}else return[]}function qp(t,e,n){return Gp(t,new la(MR(),e,n))}function E9(t,e,n){const r=Tt.fromObject(n);return Gp(t,new Au(MR(),e,r))}function T9(t,e,n,r){const i=KR(t,r);if(i!=null){const s=YR(i),o=s.path,a=s.queryId,l=Rr(o,e),c=new la(PR(a),l,n);return JR(t,o,c)}else return[]}function w9(t,e,n,r){const i=KR(t,r);if(i){const s=YR(i),o=s.path,a=s.queryId,l=Rr(o,e),c=Tt.fromObject(n),u=new Au(PR(a),l,c);return JR(t,o,u)}else return[]}function WR(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Rr(o,e),c=R1(a,l);if(c)return c});return UR(i,e,s,n,!0)}function Gp(t,e){return qR(e,t.syncPointTree_,null,VR(t.pendingWriteTree_,mt()))}function qR(t,e,n,r){if(Ke(t.path))return GR(t,e,n,r);{const i=e.get(mt());n==null&&i!=null&&(n=R1(i,mt()));let s=[];const o=Qe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=$R(r,o);s=s.concat(qR(a,l,c,u))}return i&&(s=s.concat(C1(i,t,r,n))),s}}function GR(t,e,n,r){const i=e.get(mt());n==null&&i!=null&&(n=R1(i,mt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=$R(r,o),u=t.operationForChild(o);u&&(s=s.concat(GR(u,a,l,c)))}),i&&(s=s.concat(C1(i,t,r,n))),s}function KR(t,e){return t.tagToQueryMap.get(e)}function YR(t){const e=t.indexOf("$");return oe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Rt(t.substr(0,e))}}function JR(t,e,n){const r=t.syncPointTree_.get(e);oe(r,"Missing sync point for query tag that we're tracking");const i=VR(t.pendingWriteTree_,e);return C1(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new k1(n)}node(){return this.node_}}class O1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=an(this.path_,e);return new O1(this.syncTree_,n)}node(){return WR(this.syncTree_,this.path_)}}const S9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},kT=function(t,e,n){if(!t||typeof t!="object")return t;if(oe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return I9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return A9(t[".sv"],e);oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},I9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:oe(!1,"Unexpected server value: "+t)}},A9=function(t,e,n){t.hasOwnProperty("increment")||oe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&oe(!1,"Unexpected increment value: "+r);const i=e.node();if(oe(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},C9=function(t,e,n,r){return N1(e,new O1(n,t),r)},R9=function(t,e,n){return N1(t,new k1(e),n)};function N1(t,e,n){const r=t.getPriority().val(),i=kT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=kT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new rn(a,Mn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new rn(i))),o.forEachChild(Dn,(a,l)=>{const c=N1(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function P1(t,e){let n=e instanceof Rt?e:new Rt(e),r=t,i=Qe(n);for(;i!==null;){const s=bl(r.node.children,i)||{children:{},childCount:0};r=new M1(i,r,s),n=St(n),i=Qe(n)}return r}function Xl(t){return t.node.value}function QR(t,e){t.node.value=e,u_(t)}function XR(t){return t.node.childCount>0}function k9(t){return Xl(t)===void 0&&!XR(t)}function Kp(t,e){Mr(t.node.children,(n,r)=>{e(new M1(n,t,r))})}function ZR(t,e,n,r){n&&!r&&e(t),Kp(t,i=>{ZR(i,e,!0,r)}),n&&r&&e(t)}function O9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function yh(t){return new Rt(t.parent===null?t.name:yh(t.parent)+"/"+t.name)}function u_(t){t.parent!==null&&N9(t.parent,t.name,t)}function N9(t,e,n){const r=k9(n),i=as(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,u_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,u_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=/[\[\].#$\/\u0000-\u001F\u007F]/,P9=/[\[\].#$\u0000-\u001F\u007F]/,gg=10*1024*1024,ek=function(t){return typeof t=="string"&&t.length!==0&&!M9.test(t)},x9=function(t){return typeof t=="string"&&t.length!==0&&!P9.test(t)},D9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),x9(t)},tk=function(t,e,n){const r=n instanceof Rt?new pV(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Io(r));if(typeof e=="function")throw new Error(t+"contains a function "+Io(r)+" with contents = "+e.toString());if(eR(e))throw new Error(t+"contains "+e.toString()+" "+Io(r));if(typeof e=="string"&&e.length>gg/3&&Bp(e)>gg)throw new Error(t+"contains a string greater than "+gg+" utf8 bytes "+Io(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Mr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!ek(o)))throw new Error(t+" contains an invalid key ("+o+") "+Io(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);mV(r,o),tk(t,a,r),gV(r)}),i&&s)throw new Error(t+' contains ".value" child '+Io(r)+" in addition to actual children.")}},L9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ek(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!D9(n))throw new Error(V4(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function F9(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!wR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Sa(t,e,n){F9(t,n),U9(t,r=>$r(r,e)||$r(e,r))}function U9(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(B9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function B9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ko&&Nn("event: "+n.toString()),mh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9="repo_interrupt",H9=25;class z9{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new V9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kf(),this.transactionQueueTree_=new M1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function j9(t,e,n){if(t.stats_=v1(t.repoInfo_),t.forceRestClient_||F5())t.server_=new Rf(t.repoInfo_,(r,i,s,o)=>{OT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>NT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ki(t.repoInfo_,e,(r,i,s,o)=>{OT(t,r,i,s,o)},r=>{NT(t,r)},r=>{q9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=j5(t.repoInfo_,()=>new zV(t.stats_,t.server_)),t.infoData_=new FV,t.infoSyncTree_=new RT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=qp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),x1(t,"connected",!1),t.serverSyncTree_=new RT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Sa(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function W9(t){const n=t.infoData_.getNode(new Rt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function nk(t){return S9({timestamp:W9(t)})}function OT(t,e,n,r,i){t.dataUpdateCount++;const s=new Rt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=yf(n,c=>Mn(c));o=w9(t.serverSyncTree_,s,l,i)}else{const l=Mn(n);o=T9(t.serverSyncTree_,s,l,i)}else if(r){const l=yf(n,c=>Mn(c));o=E9(t.serverSyncTree_,s,l)}else{const l=Mn(n);o=qp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=L1(t,s)),Sa(t.eventQueue_,a,o)}function NT(t,e){x1(t,"connected",e),e===!1&&K9(t)}function q9(t,e){Mr(e,(n,r)=>{x1(t,n,r)})}function x1(t,e,n){const r=new Rt("/.info/"+e),i=Mn(n);t.infoData_.updateSnapshot(r,i);const s=qp(t.infoSyncTree_,r,i);Sa(t.eventQueue_,r,s)}function G9(t){return t.nextWriteId_++}function K9(t){rk(t,"onDisconnectEvents");const e=nk(t),n=kf();r_(t.onDisconnect_,mt(),(i,s)=>{const o=C9(i,s,t.serverSyncTree_,e);OR(n,i,o)});let r=[];r_(n,mt(),(i,s)=>{r=r.concat(qp(t.serverSyncTree_,i,s));const o=X9(t,i);L1(t,o)}),t.onDisconnect_=kf(),Sa(t.eventQueue_,mt(),r)}function Y9(t){t.persistentConnection_&&t.persistentConnection_.interrupt($9)}function rk(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Nn(n,...e)}function ik(t,e,n){return WR(t.serverSyncTree_,e,n)||ot.EMPTY_NODE}function D1(t,e=t.transactionQueueTree_){if(e||Yp(t,e),Xl(e)){const n=ok(t,e);oe(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&J9(t,yh(e),n)}else XR(e)&&Kp(e,n=>{D1(t,n)})}function J9(t,e,n){const r=n.map(c=>c.currentWriteId),i=ik(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];oe(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Rr(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{rk(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(ja(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Yp(t,P1(t.transactionQueueTree_,e)),D1(t,t.transactionQueueTree_),Sa(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)mh(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{pr("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}L1(t,e)}},o)}function L1(t,e){const n=sk(t,e),r=yh(n),i=ok(t,n);return Q9(t,i,r),r}function Q9(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Rr(n,l.path);let u=!1,h;if(oe(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(ja(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=H9)u=!0,h="maxretry",i=i.concat(ja(t.serverSyncTree_,l.currentWriteId,!0));else{const d=ik(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){tk("transaction failed: Data returned ",f,l.path);let p=Mn(f);typeof f=="object"&&f!=null&&as(f,".priority")||(p=p.updatePriority(d.getPriority()));const g=l.currentWriteId,y=nk(t),_=R9(p,d,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=_,l.currentWriteId=G9(t),o.splice(o.indexOf(g),1),i=i.concat(b9(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(ja(t.serverSyncTree_,g,!0))}else u=!0,h="nodata",i=i.concat(ja(t.serverSyncTree_,l.currentWriteId,!0))}Sa(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Yp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)mh(r[a]);D1(t,t.transactionQueueTree_)}function sk(t,e){let n,r=t.transactionQueueTree_;for(n=Qe(e);n!==null&&Xl(r)===void 0;)r=P1(r,n),e=St(e),n=Qe(e);return r}function ok(t,e){const n=[];return ak(t,e,n),n.sort((r,i)=>r.order-i.order),n}function ak(t,e,n){const r=Xl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Kp(e,i=>{ak(t,i,n)})}function Yp(t,e){const n=Xl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,QR(e,n.length>0?n:void 0)}Kp(e,r=>{Yp(t,r)})}function X9(t,e){const n=yh(sk(t,e)),r=P1(t.transactionQueueTree_,e);return O9(r,i=>{yg(t,i)}),yg(t,r),ZR(r,i=>{yg(t,i)}),n}function yg(t,e){const n=Xl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(oe(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(oe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ja(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?QR(e,void 0):n.length=s+1,Sa(t.eventQueue_,yh(e),i);for(let o=0;o<r.length;o++)mh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function eF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):pr(`Invalid query segment '${n}' in query '${t}'`)}return e}const MT=function(t,e){const n=tF(t),r=n.namespace;n.domain==="firebase.com"&&oa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&oa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||O5();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new $5(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Rt(n.pathString)}},tF=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=Z9(t.substring(u,h)));const d=eF(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ke(this._path)?null:bR(this._path)}get ref(){return new Zl(this._repo,this._path)}get _queryIdentifier(){const e=yT(this._queryParams),n=y1(e);return n==="{}"?"default":n}get _queryObject(){return yT(this._queryParams)}isEqual(e){if(e=hn(e),!(e instanceof V1))return!1;const n=this._repo===e._repo,r=wR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+fV(this._path)}}class Zl extends V1{constructor(e,n){super(e,n,new w1,!1)}get parent(){const e=TR(this._path);return e===null?null:new Zl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}_9(Zl);v9(Zl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="FIREBASE_DATABASE_EMULATOR_HOST",h_={};let rF=!1;function iF(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||oa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=MT(s,i),a=o.repoInfo,l,c;typeof process<"u"&&XE&&(c=XE[nF]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=MT(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new e_(e_.OWNER):new B5(t.name,t.options,e);L9("Invalid Firebase Database URL",o),Ke(o.path)||oa("Database URL must point to the root of a Firebase Database (not including a child path).");const h=oF(a,t,u,new U5(t.name,n));return new aF(h,t)}function sF(t,e){const n=h_[e];(!n||n[t.key]!==t)&&oa(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Y9(t),delete n[t.key]}function oF(t,e,n,r){let i=h_[e.name];i||(i={},h_[e.name]=i);let s=i[t.toURLString()];return s&&oa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new z9(t,rF,n,r),i[t.toURLString()]=s,s}class aF{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(j9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zl(this._repo,mt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(sF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&oa("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t){I5(ao),bi(new Kr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return iF(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),fr(ZE,eT,t),fr(ZE,eT,"esm2017")}Ki.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ki.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};lF();var cF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ae,F1=F1||{},xe=cF||self;function Jp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function _h(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function uF(t){return Object.prototype.hasOwnProperty.call(t,_g)&&t[_g]||(t[_g]=++hF)}var _g="closure_uid_"+(1e9*Math.random()>>>0),hF=0;function dF(t,e,n){return t.call.apply(t.bind,arguments)}function fF(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ln(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ln=dF:Ln=fF,Ln.apply(null,arguments)}function ld(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function pn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function co(){this.s=this.s,this.o=this.o}var pF=0;co.prototype.s=!1;co.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),pF!=0)&&uF(this)};co.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lk=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function U1(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function PT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Jp(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Vn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vn.prototype.h=function(){this.defaultPrevented=!0};var mF=function(){if(!xe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};xe.addEventListener("test",n,e),xe.removeEventListener("test",n,e)}catch{}return t}();function Cu(t){return/^[\s\xa0]*$/.test(t)}function Qp(){var t=xe.navigator;return t&&(t=t.userAgent)?t:""}function ii(t){return Qp().indexOf(t)!=-1}function B1(t){return B1[" "](t),t}B1[" "]=function(){};function gF(t,e){var n=lU;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var yF=ii("Opera"),Sl=ii("Trident")||ii("MSIE"),ck=ii("Edge"),d_=ck||Sl,uk=ii("Gecko")&&!(Qp().toLowerCase().indexOf("webkit")!=-1&&!ii("Edge"))&&!(ii("Trident")||ii("MSIE"))&&!ii("Edge"),_F=Qp().toLowerCase().indexOf("webkit")!=-1&&!ii("Edge");function hk(){var t=xe.document;return t?t.documentMode:void 0}var f_;e:{var vg="",bg=function(){var t=Qp();if(uk)return/rv:([^\);]+)(\)|;)/.exec(t);if(ck)return/Edge\/([\d\.]+)/.exec(t);if(Sl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(_F)return/WebKit\/(\S+)/.exec(t);if(yF)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(bg&&(vg=bg?bg[1]:""),Sl){var Eg=hk();if(Eg!=null&&Eg>parseFloat(vg)){f_=String(Eg);break e}}f_=vg}var p_;if(xe.document&&Sl){var xT=hk();p_=xT||parseInt(f_,10)||void 0}else p_=void 0;var vF=p_;function Ru(t,e){if(Vn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(uk){e:{try{B1(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:bF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ru.$.h.call(this)}}pn(Ru,Vn);var bF={2:"touch",3:"pen",4:"mouse"};Ru.prototype.h=function(){Ru.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var vh="closure_listenable_"+(1e6*Math.random()|0),EF=0;function TF(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++EF,this.fa=this.ia=!1}function Xp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function $1(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function wF(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function dk(t){const e={};for(const n in t)e[n]=t[n];return e}const DT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fk(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<DT.length;s++)n=DT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Zp(t){this.src=t,this.g={},this.h=0}Zp.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=g_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new TF(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function m_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=lk(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Xp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function g_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var H1="closure_lm_"+(1e6*Math.random()|0),Tg={};function pk(t,e,n,r,i){if(r&&r.once)return gk(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)pk(t,e[s],n,r,i);return null}return n=W1(n),t&&t[vh]?t.O(e,n,_h(r)?!!r.capture:!!r,i):mk(t,e,n,!1,r,i)}function mk(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=_h(i)?!!i.capture:!!i,a=j1(t);if(a||(t[H1]=a=new Zp(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=SF(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)mF||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_k(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function SF(){function t(n){return e.call(t.src,t.listener,n)}const e=IF;return t}function gk(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)gk(t,e[s],n,r,i);return null}return n=W1(n),t&&t[vh]?t.P(e,n,_h(r)?!!r.capture:!!r,i):mk(t,e,n,!0,r,i)}function yk(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)yk(t,e[s],n,r,i);else r=_h(r)?!!r.capture:!!r,n=W1(n),t&&t[vh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=g_(s,n,r,i),-1<n&&(Xp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=j1(t))&&(e=t.g[e.toString()],t=-1,e&&(t=g_(e,n,r,i)),(n=-1<t?e[t]:null)&&z1(n))}function z1(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[vh])m_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_k(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=j1(e))?(m_(n,t),n.h==0&&(n.src=null,e[H1]=null)):Xp(t)}}}function _k(t){return t in Tg?Tg[t]:Tg[t]="on"+t}function IF(t,e){if(t.fa)t=!0;else{e=new Ru(e,this);var n=t.listener,r=t.la||t.src;t.ia&&z1(t),t=n.call(r,e)}return t}function j1(t){return t=t[H1],t instanceof Zp?t:null}var wg="__closure_events_fn_"+(1e9*Math.random()>>>0);function W1(t){return typeof t=="function"?t:(t[wg]||(t[wg]=function(e){return t.handleEvent(e)}),t[wg])}function dn(){co.call(this),this.i=new Zp(this),this.S=this,this.J=null}pn(dn,co);dn.prototype[vh]=!0;dn.prototype.removeEventListener=function(t,e,n,r){yk(this,t,e,n,r)};function In(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Vn(e,t);else if(e instanceof Vn)e.target=e.target||t;else{var i=e;e=new Vn(r,t),fk(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=cd(o,r,!0,e)&&i}if(o=e.g=t,i=cd(o,r,!0,e)&&i,i=cd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=cd(o,r,!1,e)&&i}dn.prototype.N=function(){if(dn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Xp(n[r]);delete t.g[e],t.h--}}this.J=null};dn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};dn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function cd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&m_(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var q1=xe.JSON.stringify;class AF{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function CF(){var t=G1;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class RF{constructor(){this.h=this.g=null}add(e,n){const r=vk.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var vk=new AF(()=>new kF,t=>t.reset());class kF{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function OF(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function NF(t){xe.setTimeout(()=>{throw t},0)}let ku,Ou=!1,G1=new RF,bk=()=>{const t=xe.Promise.resolve(void 0);ku=()=>{t.then(MF)}};var MF=()=>{for(var t;t=CF();){try{t.h.call(t.g)}catch(n){NF(n)}var e=vk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ou=!1};function em(t,e){dn.call(this),this.h=t||1,this.g=e||xe,this.j=Ln(this.qb,this),this.l=Date.now()}pn(em,dn);ae=em.prototype;ae.ga=!1;ae.T=null;ae.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),In(this,"tick"),this.ga&&(K1(this),this.start()))}};ae.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function K1(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ae.N=function(){em.$.N.call(this),K1(this),delete this.g};function Y1(t,e,n){if(typeof t=="function")n&&(t=Ln(t,n));else if(t&&typeof t.handleEvent=="function")t=Ln(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:xe.setTimeout(t,e||0)}function Ek(t){t.g=Y1(()=>{t.g=null,t.i&&(t.i=!1,Ek(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class PF extends co{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ek(this)}N(){super.N(),this.g&&(xe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nu(t){co.call(this),this.h=t,this.g={}}pn(Nu,co);var LT=[];function Tk(t,e,n,r){Array.isArray(n)||(n&&(LT[0]=n.toString()),n=LT);for(var i=0;i<n.length;i++){var s=pk(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function wk(t){$1(t.g,function(e,n){this.g.hasOwnProperty(n)&&z1(e)},t),t.g={}}Nu.prototype.N=function(){Nu.$.N.call(this),wk(this)};Nu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function tm(){this.g=!0}tm.prototype.Ea=function(){this.g=!1};function xF(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function DF(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Wa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+VF(t,n)+(r?" "+r:"")})}function LF(t,e){t.info(function(){return"TIMEOUT: "+e})}tm.prototype.info=function(){};function VF(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return q1(n)}catch{return e}}var Ia={},VT=null;function nm(){return VT=VT||new dn}Ia.Ta="serverreachability";function Sk(t){Vn.call(this,Ia.Ta,t)}pn(Sk,Vn);function Mu(t){const e=nm();In(e,new Sk(e))}Ia.STAT_EVENT="statevent";function Ik(t,e){Vn.call(this,Ia.STAT_EVENT,t),this.stat=e}pn(Ik,Vn);function Hn(t){const e=nm();In(e,new Ik(e,t))}Ia.Ua="timingevent";function Ak(t,e){Vn.call(this,Ia.Ua,t),this.size=e}pn(Ak,Vn);function bh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return xe.setTimeout(function(){t()},e)}var rm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ck={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function J1(){}J1.prototype.h=null;function FT(t){return t.h||(t.h=t.i())}function Rk(){}var Eh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Q1(){Vn.call(this,"d")}pn(Q1,Vn);function X1(){Vn.call(this,"c")}pn(X1,Vn);var y_;function im(){}pn(im,J1);im.prototype.g=function(){return new XMLHttpRequest};im.prototype.i=function(){return{}};y_=new im;function Th(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Nu(this),this.P=FF,t=d_?125:void 0,this.V=new em(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kk}function kk(){this.i=null,this.g="",this.h=!1}var FF=45e3,Ok={},__={};ae=Th.prototype;ae.setTimeout=function(t){this.P=t};function v_(t,e,n){t.L=1,t.A=om(Xi(e)),t.u=n,t.S=!0,Nk(t,null)}function Nk(t,e){t.G=Date.now(),wh(t),t.B=Xi(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Uk(n.i,"t",r),t.o=0,n=t.l.J,t.h=new kk,t.g=o2(t.l,n?e:null,!t.u),0<t.O&&(t.M=new PF(Ln(t.Pa,t,t.g),t.O)),Tk(t.U,t.g,"readystatechange",t.nb),e=t.I?dk(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Mu(),xF(t.j,t.v,t.B,t.m,t.W,t.u)}ae.nb=function(t){t=t.target;const e=this.M;e&&ci(t)==3?e.l():this.Pa(t)};ae.Pa=function(t){try{if(t==this.g)e:{const u=ci(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||d_||this.g&&(this.h.h||this.g.ja()||HT(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Mu(3):Mu(2)),sm(this);var n=this.g.da();this.ca=n;t:if(Mk(this)){var r=HT(this.g);t="";var i=r.length,s=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Do(this),Yc(this);var o="";break t}this.h.i=new xe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,DF(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cu(a)){var c=a;break t}}c=null}if(n=c)Wa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,b_(this,n);else{this.i=!1,this.s=3,Hn(12),Do(this),Yc(this);break e}}this.S?(Pk(this,u,o),d_&&this.i&&u==3&&(Tk(this.U,this.V,"tick",this.mb),this.V.start())):(Wa(this.j,this.m,o,null),b_(this,o)),u==4&&Do(this),this.i&&!this.J&&(u==4?n2(this.l,this):(this.i=!1,wh(this)))}else sU(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Hn(12)):(this.s=0,Hn(13)),Do(this),Yc(this)}}}catch{}finally{}};function Mk(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Pk(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=UF(t,n),i==__){e==4&&(t.s=4,Hn(14),r=!1),Wa(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Ok){t.s=4,Hn(15),Wa(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Wa(t.j,t.m,i,null),b_(t,i);Mk(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Hn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),i0(e),e.M=!0,Hn(11))):(Wa(t.j,t.m,n,"[Invalid Chunked Response]"),Do(t),Yc(t))}ae.mb=function(){if(this.g){var t=ci(this.g),e=this.g.ja();this.o<e.length&&(sm(this),Pk(this,t,e),this.i&&t!=4&&wh(this))}};function UF(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?__:(n=Number(e.substring(n,r)),isNaN(n)?Ok:(r+=1,r+n>e.length?__:(e=e.slice(r,r+n),t.o=r+n,e)))}ae.cancel=function(){this.J=!0,Do(this)};function wh(t){t.Y=Date.now()+t.P,xk(t,t.P)}function xk(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=bh(Ln(t.lb,t),e)}function sm(t){t.C&&(xe.clearTimeout(t.C),t.C=null)}ae.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(LF(this.j,this.B),this.L!=2&&(Mu(),Hn(17)),Do(this),this.s=2,Yc(this)):xk(this,this.Y-t)};function Yc(t){t.l.H==0||t.J||n2(t.l,t)}function Do(t){sm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,K1(t.V),wk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function b_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||E_(n.i,t))){if(!t.K&&E_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Df(n),um(n);else break e;r0(n),Hn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=bh(Ln(n.ib,n),6e3));if(1>=Hk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Lo(n,11)}else if((t.K||n.g==t)&&Df(n),!Cu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Z1(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,At(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=s2(r,r.J?r.pa:null,r.Y),o.K){zk(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(sm(a),wh(a)),r.g=o}else e2(r);0<n.j.length&&hm(n)}else c[0]!="stop"&&c[0]!="close"||Lo(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Lo(n,7):n0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Mu(4)}catch{}}function BF(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Jp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function $F(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Jp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Dk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Jp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=$F(t),r=BF(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Lk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HF(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Yo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Yo){this.h=t.h,Pf(this,t.j),this.s=t.s,this.g=t.g,xf(this,t.m),this.l=t.l;var e=t.i,n=new Pu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),UT(this,n),this.o=t.o}else t&&(e=String(t).match(Lk))?(this.h=!1,Pf(this,e[1]||"",!0),this.s=Sc(e[2]||""),this.g=Sc(e[3]||"",!0),xf(this,e[4]),this.l=Sc(e[5]||"",!0),UT(this,e[6]||"",!0),this.o=Sc(e[7]||"")):(this.h=!1,this.i=new Pu(null,this.h))}Yo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ic(e,BT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ic(e,BT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ic(n,n.charAt(0)=="/"?WF:jF,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ic(n,GF)),t.join("")};function Xi(t){return new Yo(t)}function Pf(t,e,n){t.j=n?Sc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function xf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function UT(t,e,n){e instanceof Pu?(t.i=e,KF(t.i,t.h)):(n||(e=Ic(e,qF)),t.i=new Pu(e,t.h))}function At(t,e,n){t.i.set(e,n)}function om(t){return At(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Sc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ic(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,zF),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var BT=/[#\/\?@]/g,jF=/[#\?:]/g,WF=/[#\?]/g,qF=/[#\?@]/g,GF=/#/g;function Pu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function uo(t){t.g||(t.g=new Map,t.h=0,t.i&&HF(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ae=Pu.prototype;ae.add=function(t,e){uo(this),this.i=null,t=ec(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Vk(t,e){uo(t),e=ec(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Fk(t,e){return uo(t),e=ec(t,e),t.g.has(e)}ae.forEach=function(t,e){uo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ae.ta=function(){uo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ae.Z=function(t){uo(this);let e=[];if(typeof t=="string")Fk(this,t)&&(e=e.concat(this.g.get(ec(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ae.set=function(t,e){return uo(this),this.i=null,t=ec(this,t),Fk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ae.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Uk(t,e,n){Vk(t,e),0<n.length&&(t.i=null,t.g.set(ec(t,e),U1(n)),t.h+=n.length)}ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ec(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function KF(t,e){e&&!t.j&&(uo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Vk(this,r),Uk(this,i,n))},t)),t.j=e}var YF=class{constructor(t,e){this.g=t,this.map=e}};function Bk(t){this.l=t||JF,xe.PerformanceNavigationTiming?(t=xe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(xe.g&&xe.g.Ka&&xe.g.Ka()&&xe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var JF=10;function $k(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Hk(t){return t.h?1:t.g?t.g.size:0}function E_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Z1(t,e){t.g?t.g.add(e):t.h=e}function zk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Bk.prototype.cancel=function(){if(this.i=jk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function jk(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return U1(t.i)}var QF=class{stringify(t){return xe.JSON.stringify(t,void 0)}parse(t){return xe.JSON.parse(t,void 0)}};function XF(){this.g=new QF}function ZF(t,e,n){const r=n||"";try{Dk(t,function(i,s){let o=i;_h(i)&&(o=q1(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function eU(t,e){const n=new tm;if(xe.Image){const r=new Image;r.onload=ld(ud,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ld(ud,n,r,"TestLoadImage: error",!1,e),r.onabort=ld(ud,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ld(ud,n,r,"TestLoadImage: timeout",!1,e),xe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ud(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function am(t){this.l=t.ec||null,this.j=t.ob||!1}pn(am,J1);am.prototype.g=function(){return new lm(this.l,this.j)};am.prototype.i=function(t){return function(){return t}}({});function lm(t,e){dn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=e0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pn(lm,dn);var e0=0;ae=lm.prototype;ae.open=function(t,e){if(this.readyState!=e0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,xu(this)};ae.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||xe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sh(this)),this.readyState=e0};ae.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,xu(this)),this.g&&(this.readyState=3,xu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof xe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Wk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ae.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Sh(this):xu(this),this.readyState==3&&Wk(this)}};ae.Za=function(t){this.g&&(this.response=this.responseText=t,Sh(this))};ae.Ya=function(t){this.g&&(this.response=t,Sh(this))};ae.ka=function(){this.g&&Sh(this)};function Sh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,xu(t)}ae.setRequestHeader=function(t,e){this.v.append(t,e)};ae.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ae.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function xu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(lm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var tU=xe.JSON.parse;function Ft(t){dn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=qk,this.L=this.M=!1}pn(Ft,dn);var qk="",nU=/^https?$/i,rU=["POST","PUT"];ae=Ft.prototype;ae.Oa=function(t){this.M=t};ae.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():y_.g(),this.C=this.u?FT(this.u):FT(y_),this.g.onreadystatechange=Ln(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){$T(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=xe.FormData&&t instanceof xe.FormData,!(0<=lk(rU,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Yk(this),0<this.B&&((this.L=iU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ln(this.ua,this)):this.A=Y1(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){$T(this,s)}};function iU(t){return Sl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ae.ua=function(){typeof F1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))};function $T(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Gk(t),cm(t)}function Gk(t){t.F||(t.F=!0,In(t,"complete"),In(t,"error"))}ae.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,In(this,"complete"),In(this,"abort"),cm(this))};ae.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cm(this,!0)),Ft.$.N.call(this)};ae.La=function(){this.s||(this.G||this.v||this.l?Kk(this):this.kb())};ae.kb=function(){Kk(this)};function Kk(t){if(t.h&&typeof F1<"u"&&(!t.C[1]||ci(t)!=4||t.da()!=2)){if(t.v&&ci(t)==4)Y1(t.La,0,t);else if(In(t,"readystatechange"),ci(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Lk)[1]||null;!i&&xe.self&&xe.self.location&&(i=xe.self.location.protocol.slice(0,-1)),r=!nU.test(i?i.toLowerCase():"")}n=r}if(n)In(t,"complete"),In(t,"success");else{t.m=6;try{var s=2<ci(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Gk(t)}}finally{cm(t)}}}}function cm(t,e){if(t.g){Yk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||In(t,"ready");try{n.onreadystatechange=r}catch{}}}function Yk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(xe.clearTimeout(t.A),t.A=null)}ae.isActive=function(){return!!this.g};function ci(t){return t.g?t.g.readyState:0}ae.da=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}};ae.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ae.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),tU(e)}};function HT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case qk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function sU(t){const e={};t=(t.g&&2<=ci(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Cu(t[r]))continue;var n=OF(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}wF(e,function(r){return r.join(", ")})}ae.Ia=function(){return this.m};ae.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Jk(t){let e="";return $1(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function t0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Jk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):At(t,e,n))}function gc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qk(t){this.Ga=0,this.j=[],this.l=new tm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=gc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=gc("baseRetryDelayMs",5e3,t),this.hb=gc("retryDelaySeedMs",1e4,t),this.eb=gc("forwardChannelMaxRetries",2,t),this.xa=gc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Bk(t&&t.concurrentRequestLimit),this.Ja=new XF,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ae=Qk.prototype;ae.ra=8;ae.H=1;function n0(t){if(Xk(t),t.H==3){var e=t.W++,n=Xi(t.I);if(At(n,"SID",t.K),At(n,"RID",e),At(n,"TYPE","terminate"),Ih(t,n),e=new Th(t,t.l,e),e.L=2,e.A=om(Xi(n)),n=!1,xe.navigator&&xe.navigator.sendBeacon)try{n=xe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&xe.Image&&(new Image().src=e.A,n=!0),n||(e.g=o2(e.l,null),e.g.ha(e.A)),e.G=Date.now(),wh(e)}i2(t)}function um(t){t.g&&(i0(t),t.g.cancel(),t.g=null)}function Xk(t){um(t),t.u&&(xe.clearTimeout(t.u),t.u=null),Df(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&xe.clearTimeout(t.m),t.m=null)}function hm(t){if(!$k(t.i)&&!t.m){t.m=!0;var e=t.Na;ku||bk(),Ou||(ku(),Ou=!0),G1.add(e,t),t.C=0}}function oU(t,e){return Hk(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=bh(Ln(t.Na,t,e),r2(t,t.C)),t.C++,!0)}ae.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Th(this,this.l,t);let s=this.s;if(this.U&&(s?(s=dk(s),fk(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Zk(this,i,e),n=Xi(this.I),At(n,"RID",t),At(n,"CVER",22),this.F&&At(n,"X-HTTP-Session-Id",this.F),Ih(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Jk(s)))+"&"+e:this.o&&t0(n,this.o,s)),Z1(this.i,i),this.bb&&At(n,"TYPE","init"),this.P?(At(n,"$req",e),At(n,"SID","null"),i.aa=!0,v_(i,n,null)):v_(i,n,e),this.H=2}}else this.H==3&&(t?zT(this,t):this.j.length==0||$k(this.i)||zT(this))};function zT(t,e){var n;e?n=e.m:n=t.W++;const r=Xi(t.I);At(r,"SID",t.K),At(r,"RID",n),At(r,"AID",t.V),Ih(t,r),t.o&&t.s&&t0(r,t.o,t.s),n=new Th(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Zk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Z1(t.i,n),v_(n,r,e)}function Ih(t,e){t.na&&$1(t.na,function(n,r){At(e,r,n)}),t.h&&Dk({},function(n,r){At(e,r,n)})}function Zk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ln(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{ZF(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function e2(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ku||bk(),Ou||(ku(),Ou=!0),G1.add(e,t),t.A=0}}function r0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=bh(Ln(t.Ma,t),r2(t,t.A)),t.A++,!0)}ae.Ma=function(){if(this.u=null,t2(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=bh(Ln(this.jb,this),t)}};ae.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hn(10),um(this),t2(this))};function i0(t){t.B!=null&&(xe.clearTimeout(t.B),t.B=null)}function t2(t){t.g=new Th(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Xi(t.wa);At(e,"RID","rpc"),At(e,"SID",t.K),At(e,"AID",t.V),At(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&At(e,"TO",t.qa),At(e,"TYPE","xmlhttp"),Ih(t,e),t.o&&t.s&&t0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=om(Xi(e)),n.u=null,n.S=!0,Nk(n,t)}ae.ib=function(){this.v!=null&&(this.v=null,um(this),r0(this),Hn(19))};function Df(t){t.v!=null&&(xe.clearTimeout(t.v),t.v=null)}function n2(t,e){var n=null;if(t.g==e){Df(t),i0(t),t.g=null;var r=2}else if(E_(t.i,e))n=e.F,zk(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=nm(),In(r,new Ak(r,n)),hm(t)}else e2(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&oU(t,e)||r==2&&r0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Lo(t,5);break;case 4:Lo(t,10);break;case 3:Lo(t,6);break;default:Lo(t,2)}}}function r2(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Lo(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ln(t.pb,t);n||(n=new Yo("//www.google.com/images/cleardot.gif"),xe.location&&xe.location.protocol=="http"||Pf(n,"https"),om(n)),eU(n.toString(),r)}else Hn(2);t.H=0,t.h&&t.h.za(e),i2(t),Xk(t)}ae.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Hn(2)):(this.l.info("Failed to ping google.com"),Hn(1))};function i2(t){if(t.H=0,t.ma=[],t.h){const e=jk(t.i);(e.length!=0||t.j.length!=0)&&(PT(t.ma,e),PT(t.ma,t.j),t.i.i.length=0,U1(t.j),t.j.length=0),t.h.ya()}}function s2(t,e,n){var r=n instanceof Yo?Xi(n):new Yo(n);if(r.g!="")e&&(r.g=e+"."+r.g),xf(r,r.m);else{var i=xe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Yo(null);r&&Pf(s,r),e&&(s.g=e),i&&xf(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&At(r,n,e),At(r,"VER",t.ra),Ih(t,r),r}function o2(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ft(new am({ob:n})):new Ft(t.va),e.Oa(t.J),e}ae.isActive=function(){return!!this.h&&this.h.isActive(this)};function a2(){}ae=a2.prototype;ae.Ba=function(){};ae.Aa=function(){};ae.za=function(){};ae.ya=function(){};ae.isActive=function(){return!0};ae.Va=function(){};function Lf(){if(Sl&&!(10<=Number(vF)))throw Error("Environmental error: no available transport.")}Lf.prototype.g=function(t,e){return new yr(t,e)};function yr(t,e){dn.call(this),this.g=new Qk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Cu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new tc(this)}pn(yr,dn);yr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Hn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=s2(t,null,t.Y),hm(t)};yr.prototype.close=function(){n0(this.g)};yr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=q1(t),t=n);e.j.push(new YF(e.fb++,t)),e.H==3&&hm(e)};yr.prototype.N=function(){this.g.h=null,delete this.j,n0(this.g),delete this.g,yr.$.N.call(this)};function l2(t){Q1.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}pn(l2,Q1);function c2(){X1.call(this),this.status=1}pn(c2,X1);function tc(t){this.g=t}pn(tc,a2);tc.prototype.Ba=function(){In(this.g,"a")};tc.prototype.Aa=function(t){In(this.g,new l2(t))};tc.prototype.za=function(t){In(this.g,new c2)};tc.prototype.ya=function(){In(this.g,"b")};function aU(){this.blockSize=-1}function Jr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}pn(Jr,aU);Jr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Sg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Jr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Sg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Sg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Sg(this,r),i=0;break}}this.h=i,this.i+=e};Jr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ct(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var lU={};function s0(t){return-128<=t&&128>t?gF(t,function(e){return new ct([e|0],0>e?-1:0)}):new ct([t|0],0>t?-1:0)}function ui(t){if(isNaN(t)||!isFinite(t))return ll;if(0>t)return vn(ui(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=T_;return new ct(e,0)}function u2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return vn(u2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ui(Math.pow(e,8)),r=ll,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ui(Math.pow(e,s)),r=r.R(s).add(ui(o))):(r=r.R(n),r=r.add(ui(o)))}return r}var T_=4294967296,ll=s0(0),w_=s0(1),jT=s0(16777216);ae=ct.prototype;ae.ea=function(){if(Ir(this))return-vn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:T_+r)*e,e*=T_}return t};ae.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ji(this))return"0";if(Ir(this))return"-"+vn(this).toString(t);for(var e=ui(Math.pow(t,6)),n=this,r="";;){var i=Ff(n,e).g;n=Vf(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,ji(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ae.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ji(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ir(t){return t.h==-1}ae.X=function(t){return t=Vf(this,t),Ir(t)?-1:ji(t)?0:1};function vn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ct(n,~t.h).add(w_)}ae.abs=function(){return Ir(this)?vn(this):this};ae.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ct(n,n[n.length-1]&-2147483648?-1:0)};function Vf(t,e){return t.add(vn(e))}ae.R=function(t){if(ji(this)||ji(t))return ll;if(Ir(this))return Ir(t)?vn(this).R(vn(t)):vn(vn(this).R(t));if(Ir(t))return vn(this.R(vn(t)));if(0>this.X(jT)&&0>t.X(jT))return ui(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,hd(n,2*r+2*i),n[2*r+2*i+1]+=s*l,hd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,hd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,hd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ct(n,0)};function hd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function yc(t,e){this.g=t,this.h=e}function Ff(t,e){if(ji(e))throw Error("division by zero");if(ji(t))return new yc(ll,ll);if(Ir(t))return e=Ff(vn(t),e),new yc(vn(e.g),vn(e.h));if(Ir(e))return e=Ff(t,vn(e)),new yc(vn(e.g),e.h);if(30<t.g.length){if(Ir(t)||Ir(e))throw Error("slowDivide_ only works with positive integers.");for(var n=w_,r=e;0>=r.X(t);)n=WT(n),r=WT(r);var i=Na(n,1),s=Na(r,1);for(r=Na(r,2),n=Na(n,2);!ji(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Na(r,1),n=Na(n,1)}return e=Vf(t,i.R(e)),new yc(i,e)}for(i=ll;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ui(n),o=s.R(e);Ir(o)||0<o.X(t);)n-=r,s=ui(n),o=s.R(e);ji(s)&&(s=w_),i=i.add(s),t=Vf(t,o)}return new yc(i,t)}ae.gb=function(t){return Ff(this,t).h};ae.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ct(n,this.h&t.h)};ae.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ct(n,this.h|t.h)};ae.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ct(n,this.h^t.h)};function WT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ct(n,t.h)}function Na(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ct(i,t.h)}Lf.prototype.createWebChannel=Lf.prototype.g;yr.prototype.send=yr.prototype.u;yr.prototype.open=yr.prototype.m;yr.prototype.close=yr.prototype.close;rm.NO_ERROR=0;rm.TIMEOUT=8;rm.HTTP_ERROR=6;Ck.COMPLETE="complete";Rk.EventType=Eh;Eh.OPEN="a";Eh.CLOSE="b";Eh.ERROR="c";Eh.MESSAGE="d";dn.prototype.listen=dn.prototype.O;Ft.prototype.listenOnce=Ft.prototype.P;Ft.prototype.getLastError=Ft.prototype.Sa;Ft.prototype.getLastErrorCode=Ft.prototype.Ia;Ft.prototype.getStatus=Ft.prototype.da;Ft.prototype.getResponseJson=Ft.prototype.Wa;Ft.prototype.getResponseText=Ft.prototype.ja;Ft.prototype.send=Ft.prototype.ha;Ft.prototype.setWithCredentials=Ft.prototype.Oa;Jr.prototype.digest=Jr.prototype.l;Jr.prototype.reset=Jr.prototype.reset;Jr.prototype.update=Jr.prototype.j;ct.prototype.add=ct.prototype.add;ct.prototype.multiply=ct.prototype.R;ct.prototype.modulo=ct.prototype.gb;ct.prototype.compare=ct.prototype.X;ct.prototype.toNumber=ct.prototype.ea;ct.prototype.toString=ct.prototype.toString;ct.prototype.getBits=ct.prototype.D;ct.fromNumber=ui;ct.fromString=u2;var cU=function(){return new Lf},uU=function(){return nm()},Ig=rm,hU=Ck,dU=Ia,qT={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},dd=Rk,fU=Ft,pU=Jr,cl=ct;const GT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new ch("@firebase/firestore");function _c(){return ua.logLevel}function se(t,...e){if(ua.logLevel<=qe.DEBUG){const n=e.map(o0);ua.debug(`Firestore (${nc}): ${t}`,...n)}}function Ti(t,...e){if(ua.logLevel<=qe.ERROR){const n=e.map(o0);ua.error(`Firestore (${nc}): ${t}`,...n)}}function Il(t,...e){if(ua.logLevel<=qe.WARN){const n=e.map(o0);ua.warn(`Firestore (${nc}): ${t}`,...n)}}function o0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: `+t;throw Ti(e),new Error(e)}function Et(t,e){t||Pe()}function $e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(On.UNAUTHENTICATED))}shutdown(){}}class gU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class yU{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string"),new h2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string"),new On(e)}}class _U{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vU{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _U(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Et(typeof n.token=="string"),this.R=n.token,new bU(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=TU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function Al(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ve(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Gt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Gt(0,0))}static max(){return new Ve(new Gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(),r===void 0?r=e.length-n:r>e.length-n&&Pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Du.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Du?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Nt extends Du{construct(e,n,r){return new Nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const wU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends Du{construct(e,n,r){return new Sn(e,n,r)}static isValidIdentifier(e){return wU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Sn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ve(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ve(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ve(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(n)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Nt.fromString(e))}static fromName(e){return new Ae(Nt.fromString(e).popFirst(5))}static empty(){return new Ae(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Nt(e.slice()))}}function SU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new Gt(n+1,0):new Gt(n,r));return new Zs(i,Ae.empty(),e)}function IU(t){return new Zs(t.readTime,t.key,-1)}class Zs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Zs(Ve.min(),Ae.empty(),-1)}static max(){return new Zs(Ve.max(),Ae.empty(),-1)}}function AU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ah(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==CU)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new mi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Jc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=l0(r.target.error);this.V.reject(new Jc(e,i))}}static open(e,n,r,i){try{return new a0(n,e.transaction(i,r))}catch(s){throw new Jc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(se("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new OU(n)}}class Vo{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Vo.S(Kt())===12.2&&Ti("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return se("SimpleDb","Removing database:",e),ko(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!t1())return!1;if(Vo.C())return!0;const e=Kt(),n=Vo.S(e),r=0<n&&n<10,i=Vo.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(se("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Jc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ve(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ve(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Jc(e,o))},i.onupgradeneeded=s=>{se("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{se("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=a0.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),q.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(se("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class kU{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ko(this.k.delete())}}class Jc extends ve{constructor(e,n){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ch(t){return t.name==="IndexedDbTransactionError"}class OU{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(se("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(se("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ko(r)}add(e){return se("SimpleDb","ADD",this.store.name,e,e),ko(this.store.add(e))}get(e){return ko(this.store.get(e)).next(n=>(n===void 0&&(n=null),se("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return se("SimpleDb","DELETE",this.store.name,e),ko(this.store.delete(e))}count(){return se("SimpleDb","COUNT",this.store.name),ko(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new q((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){se("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new q((r,i)=>{n.onerror=s=>{const o=l0(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new kU(a),c=n(a.primaryKey,a.value,l);if(c instanceof q){const u=c.catch(h=>(l.done(),q.reject(h)));r.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ko(t){return new q((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=l0(r.target.error);n(i)}})}let KT=!1;function l0(t){const e=Vo.S(Kt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KT||(KT=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}c0._e=-1;function dm(t){return t==null}function Uf(t){return t===0&&1/t==-1/0}function NU(t){return typeof t=="number"&&Number.isInteger(t)&&!Uf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Aa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function f2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}}class fd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_n.RED,this.left=i??_n.EMPTY,this.right=s??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _n(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new JT(this.data.getIterator())}getIteratorFrom(e){return new JT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new An(this.comparator);return n.data=e,n}}class JT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new hr([])}unionWith(e){let n=new An(Sn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new p2("Invalid base64 string: "+s):s}}(e);return new Fn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const MU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(t){if(Et(!!t),typeof t=="string"){let e=0;const n=MU.exec(t);if(Et(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(t.seconds),nanos:zt(t.nanos)}}function zt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ha(t){return typeof t=="string"?Fn.fromBase64String(t):Fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function h0(t){const e=t.mapValue.fields.__previous_value__;return u0(e)?h0(e):e}function Lu(t){const e=eo(t.mapValue.fields.__local_write_time__.timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Vu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function da(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?u0(t)?4:xU(t)?9007199254740991:10:Pe()}function wi(t,e){if(t===e)return!0;const n=da(t);if(n!==da(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lu(t).isEqual(Lu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=eo(i.timestampValue),a=eo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ha(i.bytesValue).isEqual(ha(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return zt(i.geoPointValue.latitude)===zt(s.geoPointValue.latitude)&&zt(i.geoPointValue.longitude)===zt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return zt(i.integerValue)===zt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=zt(i.doubleValue),a=zt(s.doubleValue);return o===a?Uf(o)===Uf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Al(t.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(YT(o)!==YT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!wi(o[l],a[l])))return!1;return!0}(t,e);default:return Pe()}}function Fu(t,e){return(t.values||[]).find(n=>wi(n,e))!==void 0}function Cl(t,e){if(t===e)return 0;const n=da(t),r=da(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=zt(s.integerValue||s.doubleValue),l=zt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return QT(t.timestampValue,e.timestampValue);case 4:return QT(Lu(t),Lu(e));case 5:return st(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ha(s),l=ha(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=st(a[c],l[c]);if(u!==0)return u}return st(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=st(zt(s.latitude),zt(o.latitude));return a!==0?a:st(zt(s.longitude),zt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Cl(a[c],l[c]);if(u)return u}return st(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===pd.mapValue&&o===pd.mapValue)return 0;if(s===pd.mapValue)return 1;if(o===pd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=st(l[h],u[h]);if(d!==0)return d;const f=Cl(a[l[h]],c[u[h]]);if(f!==0)return f}return st(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Pe()}}function QT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=eo(t),r=eo(e),i=st(n.seconds,r.seconds);return i!==0?i:st(n.nanos,r.nanos)}function Rl(t){return S_(t)}function S_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=eo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ha(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=S_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${S_(n.fields[o])}`;return i+"}"}(t.mapValue):Pe()}function I_(t){return!!t&&"integerValue"in t}function d0(t){return!!t&&"arrayValue"in t}function XT(t){return!!t&&"nullValue"in t}function ZT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wd(t){return!!t&&"mapValue"in t}function Qc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Aa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.value=e}static empty(){return new Qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qc(n)}setAll(e){let n=Sn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Qc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Wd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Aa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Qn(Qc(this.value))}}function m2(t){const e=[];return Aa(t.fields,(n,r)=>{const i=new Sn([n]);if(Wd(r)){const s=m2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Pn(e,0,Ve.min(),Ve.min(),Ve.min(),Qn.empty(),0)}static newFoundDocument(e,n,r,i){return new Pn(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new Pn(e,2,n,Ve.min(),Ve.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Ve.min(),Ve.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.position=e,this.inclusive=n}}function ew(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Ae.comparator(Ae.fromName(o.referenceValue),n.key):r=Cl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n="asc"){this.field=e,this.dir=n}}function DU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{}class Jt extends g2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VU(e,n,r):n==="array-contains"?new BU(e,r):n==="in"?new $U(e,r):n==="not-in"?new HU(e,r):n==="array-contains-any"?new zU(e,r):new Jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FU(e,r):new UU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Cl(n,this.value)):n!==null&&da(this.value)===da(n)&&this.matchesComparison(Cl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends g2{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Si(e,n)}matches(e){return y2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function y2(t){return t.op==="and"}function _2(t){return LU(t)&&y2(t)}function LU(t){for(const e of t.filters)if(e instanceof Si)return!1;return!0}function A_(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+Rl(t.value);if(_2(t))return t.filters.map(e=>A_(e)).join(",");{const e=t.filters.map(n=>A_(n)).join(",");return`${t.op}(${e})`}}function v2(t,e){return t instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.field.isEqual(i.field)&&wi(r.value,i.value)}(t,e):t instanceof Si?function(r,i){return i instanceof Si&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&v2(o,i.filters[a]),!0):!1}(t,e):void Pe()}function b2(t){return t instanceof Jt?function(n){return`${n.field.canonicalString()} ${n.op} ${Rl(n.value)}`}(t):t instanceof Si?function(n){return n.op.toString()+" {"+n.getFilters().map(b2).join(" ,")+"}"}(t):"Filter"}class VU extends Jt{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class FU extends Jt{constructor(e,n){super(e,"in",n),this.keys=E2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UU extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=E2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function E2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ae.fromName(r.referenceValue))}class BU extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return d0(n)&&Fu(n.arrayValue,this.value)}}class $U extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Fu(this.value.arrayValue,n)}}class HU extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Fu(this.value.arrayValue,n)}}class zU extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!d0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Fu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function nw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new jU(t,e,n,r,i,s,o)}function f0(t){const e=$e(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>A_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),dm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rl(r)).join(",")),e.ce=n}return e.ce}function p0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tw(t.startAt,e.startAt)&&tw(t.endAt,e.endAt)}function C_(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function WU(t,e,n,r,i,s,o,a){return new fm(t,e,n,r,i,s,o,a)}function pm(t){return new fm(t)}function rw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qU(t){return t.collectionGroup!==null}function Xc(t){const e=$e(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new An(Sn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new $f(s,r))}),n.has(Sn.keyField().canonicalString())||e.le.push(new $f(Sn.keyField(),r))}return e.le}function gi(t){const e=$e(t);return e.he||(e.he=GU(e,Xc(t))),e.he}function GU(t,e){if(t.limitType==="F")return nw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new $f(i.field,s)});const n=t.endAt?new Bf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bf(t.startAt.position,t.startAt.inclusive):null;return nw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function R_(t,e,n){return new fm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mm(t,e){return p0(gi(t),gi(e))&&t.limitType===e.limitType}function T2(t){return`${f0(gi(t))}|lt:${t.limitType}`}function La(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>b2(i)).join(", ")}]`),dm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Rl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Rl(i)).join(",")),`Target(${r})`}(gi(t))}; limitType=${t.limitType})`}function gm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Xc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=ew(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Xc(r),i)||r.endAt&&!function(o,a,l){const c=ew(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Xc(r),i))}(t,e)}function KU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w2(t){return(e,n)=>{let r=!1;for(const i of Xc(t)){const s=YU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function YU(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Cl(l,c):Pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Aa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return f2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU=new Pt(Ae.comparator);function Zi(){return JU}const S2=new Pt(Ae.comparator);function Ac(...t){let e=S2;for(const n of t)e=e.insert(n.key,n);return e}function I2(t){let e=S2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fo(){return Zc()}function A2(){return Zc()}function Zc(){return new rc(t=>t.toString(),(t,e)=>t.isEqual(e))}const QU=new Pt(Ae.comparator),XU=new An(Ae.comparator);function Ge(...t){let e=XU;for(const n of t)e=e.add(n);return e}const ZU=new An(st);function eB(){return ZU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uf(e)?"-0":e}}function R2(t){return{integerValue:""+t}}function tB(t,e){return NU(e)?R2(e):C2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this._=void 0}}function nB(t,e,n){return t instanceof Hf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&u0(s)&&(s=h0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof kl?O2(t,e):t instanceof Uu?N2(t,e):function(i,s){const o=k2(i,s),a=iw(o)+iw(i.Ie);return I_(o)&&I_(i.Ie)?R2(a):C2(i.serializer,a)}(t,e)}function rB(t,e,n){return t instanceof kl?O2(t,e):t instanceof Uu?N2(t,e):n}function k2(t,e){return t instanceof zf?function(r){return I_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Hf extends ym{}class kl extends ym{constructor(e){super(),this.elements=e}}function O2(t,e){const n=M2(e);for(const r of t.elements)n.some(i=>wi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Uu extends ym{constructor(e){super(),this.elements=e}}function N2(t,e){let n=M2(e);for(const r of t.elements)n=n.filter(i=>!wi(i,r));return{arrayValue:{values:n}}}class zf extends ym{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function iw(t){return zt(t.integerValue||t.doubleValue)}function M2(t){return d0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,n){this.field=e,this.transform=n}}function sB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof kl&&i instanceof kl||r instanceof Uu&&i instanceof Uu?Al(r.elements,i.elements,wi):r instanceof zf&&i instanceof zf?wi(r.Ie,i.Ie):r instanceof Hf&&i instanceof Hf}(t.transform,e.transform)}class oB{constructor(e,n){this.version=e,this.transformResults=n}}class mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _m{}function P2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new m0(t.key,mr.none()):new Rh(t.key,t.data,mr.none());{const n=t.data,r=Qn.empty();let i=new An(Sn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ho(t.key,r,new hr(i.toArray()),mr.none())}}function aB(t,e,n){t instanceof Rh?function(i,s,o){const a=i.value.clone(),l=ow(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ho?function(i,s,o){if(!qd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ow(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(x2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function eu(t,e,n,r){return t instanceof Rh?function(s,o,a,l){if(!qd(s.precondition,o))return a;const c=s.value.clone(),u=aw(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ho?function(s,o,a,l){if(!qd(s.precondition,o))return a;const c=aw(s.fieldTransforms,l,o),u=o.data;return u.setAll(x2(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return qd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function lB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=k2(r.transform,i||null);s!=null&&(n===null&&(n=Qn.empty()),n.set(r.field,s))}return n||null}function sw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Al(r,i,(s,o)=>sB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rh extends _m{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ho extends _m{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function x2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ow(t,e,n){const r=new Map;Et(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,rB(o,a,n[i]))}return r}function aw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,nB(s,o,e))}return r}class m0 extends _m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cB extends _m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aB(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=eu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=eu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=A2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=P2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,(n,r)=>sw(n,r))&&Al(this.baseMutations,e.baseMutations,(n,r)=>sw(n,r))}}class g0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Et(e.mutations.length===r.length);let i=function(){return QU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new g0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Je;function fB(t){switch(t){default:return Pe();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function D2(t){if(t===void 0)return Ti("GRPC error has no .code"),G.UNKNOWN;switch(t){case Bt.OK:return G.OK;case Bt.CANCELLED:return G.CANCELLED;case Bt.UNKNOWN:return G.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return G.INTERNAL;case Bt.UNAVAILABLE:return G.UNAVAILABLE;case Bt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Bt.NOT_FOUND:return G.NOT_FOUND;case Bt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Bt.ABORTED:return G.ABORTED;case Bt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Bt.DATA_LOSS:return G.DATA_LOSS;default:return Pe()}}(Je=Bt||(Bt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=new cl([4294967295,4294967295],0);function lw(t){const e=pB().encode(t),n=new pU;return n.update(e),new Uint8Array(n.digest())}function cw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new cl([n,r],0),new cl([i,s],0)]}class y0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cc(`Invalid padding: ${n}`);if(r<0)throw new Cc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=cl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(cl.fromNumber(r)));return i.compare(mB)===1&&(i=new cl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=lw(e),[r,i]=cw(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new y0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=lw(e),[r,i]=cw(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,kh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vm(Ve.min(),i,new Pt(st),Zi(),Ge())}}class kh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kh(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class L2{constructor(e,n){this.targetId=e,this.fe=n}}class V2{constructor(e,n,r=Fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class uw{constructor(){this.ge=0,this.pe=dw(),this.ye=Fn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ge(),n=Ge(),r=Ge();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pe()}}),new kh(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=dw()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Et(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class gB{constructor(e){this.Be=e,this.ke=new Map,this.qe=Zi(),this.Qe=hw(),this.Ke=new Pt(st)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(C_(s))if(r===0){const o=new Ae(s.path);this.We(n,o,Pn.newNoDocument(o,Ve.min()))}else Et(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ha(r).toUint8Array()}catch(l){if(l instanceof p2)return Il("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new y0(o,i,s)}catch(l){return Il(l instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&C_(a.target)){const l=new Ae(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Pn.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ge();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new vm(e,n,this.Ke,this.qe,r);return this.qe=Zi(),this.Qe=hw(),this.Ke=new Pt(st),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new uw,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new An(st),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new uw),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function hw(){return new Pt(Ae.comparator)}function dw(){return new Pt(Ae.comparator)}const yB={asc:"ASCENDING",desc:"DESCENDING"},_B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vB={and:"AND",or:"OR"};class bB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function k_(t,e){return t.useProto3Json||dm(e)?e:{value:e}}function jf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EB(t,e){return jf(t,e.toTimestamp())}function yi(t){return Et(!!t),Ve.fromTimestamp(function(n){const r=eo(n);return new Gt(r.seconds,r.nanos)}(t))}function _0(t,e){return O_(t,e).canonicalString()}function O_(t,e){const n=function(i){return new Nt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function U2(t){const e=Nt.fromString(t);return Et(j2(e)),e}function N_(t,e){return _0(t.databaseId,e.path)}function Ag(t,e){const n=U2(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae($2(n))}function B2(t,e){return _0(t.databaseId,e)}function TB(t){const e=U2(t);return e.length===4?Nt.emptyPath():$2(e)}function M_(t){return new Nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $2(t){return Et(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fw(t,e,n){return{name:N_(t,e),fields:n.value.mapValue.fields}}function wB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Et(u===void 0||typeof u=="string"),Fn.fromBase64String(u||"")):(Et(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Fn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?G.UNKNOWN:D2(c.code);return new ve(u,c.message||"")}(o);n=new V2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ag(t,r.document.name),s=yi(r.document.updateTime),o=r.document.createTime?yi(r.document.createTime):Ve.min(),a=new Qn({mapValue:{fields:r.document.fields}}),l=Pn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Gd(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ag(t,r.document),s=r.readTime?yi(r.readTime):Ve.min(),o=Pn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Gd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ag(t,r.document),s=r.removedTargetIds||[];n=new Gd([],s,i,null)}else{if(!("filter"in e))return Pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new dB(i,s),a=r.targetId;n=new L2(a,o)}}return n}function SB(t,e){let n;if(e instanceof Rh)n={update:fw(t,e.key,e.value)};else if(e instanceof m0)n={delete:N_(t,e.key)};else if(e instanceof ho)n={update:fw(t,e.key,e.data),updateMask:PB(e.fieldMask)};else{if(!(e instanceof cB))return Pe();n={verify:N_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Hf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof kl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Uu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:EB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pe()}(t,e.precondition)),n}function IB(t,e){return t&&t.length>0?(Et(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?yi(i.updateTime):yi(s);return o.isEqual(Ve.min())&&(o=yi(s)),new oB(o,i.transformResults||[])}(n,e))):[]}function AB(t,e){return{documents:[B2(t,e.path)]}}function CB(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=B2(t,i);const s=function(c){if(c.length!==0)return z2(Si.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Va(d.field),direction:OB(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=k_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function RB(t){let e=TB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Et(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=H2(h);return d instanceof Si&&_2(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new $f(Fa(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,dm(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Bf(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Bf(f,d)}(n.endAt)),WU(e,i,o,s,a,"F",l,c)}function kB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function H2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fa(n.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fa(n.unaryFilter.field);return Jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fa(n.unaryFilter.field);return Jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fa(n.unaryFilter.field);return Jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(t):t.fieldFilter!==void 0?function(n){return Jt.create(Fa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Si.create(n.compositeFilter.filters.map(r=>H2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe()}}(n.compositeFilter.op))}(t):Pe()}function OB(t){return yB[t]}function NB(t){return _B[t]}function MB(t){return vB[t]}function Va(t){return{fieldPath:t.canonicalString()}}function Fa(t){return Sn.fromServerFormat(t.fieldPath)}function z2(t){return t instanceof Jt?function(n){if(n.op==="=="){if(ZT(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NAN"}};if(XT(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZT(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NOT_NAN"}};if(XT(n.value))return{unaryFilter:{field:Va(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(n.field),op:NB(n.op),value:n.value}}}(t):t instanceof Si?function(n){const r=n.getFilters().map(i=>z2(i));return r.length===1?r[0]:{compositeFilter:{op:MB(n.op),filters:r}}}(t):Pe()}function PB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function j2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n,r,i,s=Ve.min(),o=Ve.min(),a=Fn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e){this.ct=e}}function DB(t){const e=RB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?R_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this._n=new VB}addToCollectionParentIndex(e,n){return this._n.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Zs.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class VB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new An(Nt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new An(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Ol(0)}static Ln(){return new Ol(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(){this.changes=new rc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&eu(r.mutation,i,hr.empty(),Gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ge()){const i=Fo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ac();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Zi();const o=Zc(),a=function(){return Zc()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof ho)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),eu(u.mutation,c,u.mutation.getFieldMask(),Gt.now())):o.set(c.key,hr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new UB(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Zc();let i=new Pt((o,a)=>o-a),s=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||hr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Ge()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=A2();u.forEach(d=>{if(!s.has(d)){const f=P2(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(Fo());let a=-1,l=s;return o.next(c=>q.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ge())).next(u=>({batchId:a,changes:I2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(r=>{let i=Ac();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ac();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,l=>{const c=function(h,d){return new fm(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Pn.newInvalidDocument(u)))});let a=Ac();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&eu(u.mutation,c,hr.empty(),Gt.now()),gm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return q.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yi(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:DB(i.bundledQuery),readTime:yi(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(){this.overlays=new Pt(Ae.comparator),this.hr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fo();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Fo(),s=n.length+1,o=new Ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Fo(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Fo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return q.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hB(n,r));let s=this.hr.get(n);s===void 0&&(s=Ge(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this.Pr=new An(sn.Ir),this.Tr=new An(sn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new sn(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new sn(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new Ae(new Nt([])),r=new sn(n,e),i=new sn(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Ae(new Nt([])),r=new sn(n,e),i=new sn(n,e+1);let s=Ge();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new sn(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sn{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Ae.comparator(e.key,n.key)||st(e.pr,n.pr)}static Er(e,n){return st(e.pr,n.pr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new An(sn.Ir)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new uB(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new sn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sn(n,0),i=new sn(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new An(st);return n.forEach(i=>{const s=new sn(i,0),o=new sn(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),q.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Ae.isDocumentKey(s)||(s=s.child(""));const o=new sn(new Ae(s),0);let a=new An(st);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),q.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Et(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return q.forEach(n.mutations,i=>{const s=new sn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new sn(n,0),i=this.wr.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e){this.vr=e,this.docs=function(){return new Pt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let r=Zi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Zi();const o=n.path,a=new Ae(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||AU(IU(u),r)<=0||(i.has(u.key)||gm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Pe()}Fr(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new WB(this)}getSize(e){return q.resolve(this.size)}}class WB extends FB{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e){this.persistence=e,this.Mr=new rc(n=>f0(n),p0),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Or=0,this.Nr=new v0,this.targetCount=0,this.Lr=Ol.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),q.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ol(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.qn(n),q.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,n){this.Br={},this.overlays={},this.kr=new c0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new qB(this),this.indexManager=new LB,this.remoteDocumentCache=function(i){return new jB(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new xB(n),this.$r=new $B(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new zB(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new KB(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return q.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class KB extends RU{constructor(e){super(),this.currentSequenceNumber=e}}class b0{constructor(e){this.persistence=e,this.zr=new v0,this.jr=null}static Hr(e){return new b0(e)}get Jr(){if(this.jr)return this.jr;throw Pe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),q.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Jr,r=>{const i=Ae.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Ve.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return q.or([()=>q.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ge(),i=Ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new E0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return A4()?8:Vo.v(Kt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new YB;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(_c()<=qe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",La(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),q.resolve()):(_c()<=qe.DEBUG&&se("QueryEngine","Query:",La(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(_c()<=qe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",La(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(n))):q.resolve())}ji(e,n){if(rw(n))return q.resolve(null);let r=gi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=R_(n,null,"F"),r=gi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ge(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,R_(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return rw(n)||i.isEqual(Ve.min())?q.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?q.resolve(null):(_c()<=qe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),La(n)),this.es(e,o,n,SU(i,-1)).next(a=>a))})}Zi(e,n){let r=new An(w2(e));return n.forEach((i,s)=>{gm(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return _c()<=qe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",La(n)),this.zi.getDocumentsMatchingQuery(e,n,Zs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Pt(st),this.rs=new rc(s=>f0(s),p0),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BB(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function XB(t,e,n,r){return new QB(t,e,n,r)}async function W2(t,e){const n=$e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ge();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function ZB(t,e){const n=$e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=q.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(m=>{const g=c.docVersions.get(p);Et(g!==null),m.version.compareTo(g)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function q2(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function e8(t,e){const n=$e(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Fn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let l=Zi(),c=Ge();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(t8(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(Ve.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function t8(t,e,n){let r=Ge(),i=Ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Zi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function n8(t,e){const n=$e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function r8(t,e){const n=$e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ps(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function P_(t,e,n){const r=$e(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ch(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function pw(t,e,n){const r=$e(t);let i=Ve.min(),s=Ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=$e(l),d=h.rs.get(u);return d!==void 0?q.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,gi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Ve.min(),n?s:Ge())).next(a=>(i8(r,KU(e),a),{documents:a,hs:s})))}function i8(t,e,n){let r=t.ss.get(e)||Ve.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class mw{constructor(){this.activeTargetIds=eB()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s8{constructor(){this.no=new mw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new mw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md=null;function Cg(){return md===null?md=function(){return 268435456+Math.round(2147483648*Math.random())}():md++,"0x"+md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class c8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=Cg(),l=this.bo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,i).then(u=>(se("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Il("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=a8[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=Cg();return new Promise((o,a)=>{const l=new fU;l.setWithCredentials(!0),l.listenOnce(hU.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ig.NO_ERROR:const u=l.getResponseJson();se(Cn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Ig.TIMEOUT:se(Cn,`RPC '${e}' ${s} timed out`),a(new ve(G.DEADLINE_EXCEEDED,"Request time out"));break;case Ig.HTTP_ERROR:const h=l.getStatus();if(se(Cn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(y)>=0?y:G.UNKNOWN}(f.status);a(new ve(p,f.message))}else a(new ve(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ve(G.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{se(Cn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);se(Cn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=Cg(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cU(),a=uU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");se(Cn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new l8({lo:g=>{f?se(Cn,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(d||(se(Cn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),se(Cn,`RPC '${e}' stream ${i} sending:`,g),h.send(g))},ho:()=>h.close()}),m=(g,y,_)=>{g.listen(y,T=>{try{_(T)}catch(w){setTimeout(()=>{throw w},0)}})};return m(h,dd.EventType.OPEN,()=>{f||se(Cn,`RPC '${e}' stream ${i} transport opened.`)}),m(h,dd.EventType.CLOSE,()=>{f||(f=!0,se(Cn,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(h,dd.EventType.ERROR,g=>{f||(f=!0,Il(Cn,`RPC '${e}' stream ${i} transport errored:`,g),p.Vo(new ve(G.UNAVAILABLE,"The operation could not be completed")))}),m(h,dd.EventType.MESSAGE,g=>{var y;if(!f){const _=g.data[0];Et(!!_);const T=_,w=T.error||((y=T[0])===null||y===void 0?void 0:y.error);if(w){se(Cn,`RPC '${e}' stream ${i} received error:`,w);const I=w.status;let C=function(k){const j=Bt[k];if(j!==void 0)return D2(j)}(I),x=w.message;C===void 0&&(C=G.INTERNAL,x="Unknown error status: "+I+" with message "+w.message),f=!0,p.Vo(new ve(C,x)),h.close()}else se(Cn,`RPC '${e}' stream ${i} received:`,_),p.mo(_)}}),m(a,dU.STAT_EVENT,g=>{g.stat===qT.PROXY?se(Cn,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===qT.NOPROXY&&se(Cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function Rg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){return new bB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new G2(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Ti(n.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new ve(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u8 extends K2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=wB(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ve.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?yi(o.readTime):Ve.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=M_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=C_(l)?{documents:AB(s,l)}:{query:CB(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=F2(s,o.resumeToken);const c=k_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ve.min())>0){a.readTime=jf(s,o.snapshotVersion.toTimestamp());const c=k_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=kB(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=M_(this.serializer),n.removeTarget=e,this.t_(n)}}class h8 extends K2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=IB(e.writeResults,e.commitTime),r=yi(e.commitTime);return this.listener.T_(r,n)}return Et(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=M_(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>SB(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ve(G.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,O_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(G.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,O_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(G.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class f8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ti(n),this.g_=!1):se("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{Ca(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=$e(l);c.v_.add(4),await Oh(c),c.x_.set("Unknown"),c.v_.delete(4),await Em(c)}(this))})}),this.x_=new f8(r,i)}}async function Em(t){if(Ca(t))for(const e of t.F_)await e(!0)}async function Oh(t){for(const e of t.F_)await e(!1)}function Y2(t,e){const n=$e(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),I0(n)?S0(n):ic(n).Jo()&&w0(n,e))}function T0(t,e){const n=$e(t),r=ic(n);n.C_.delete(e),r.Jo()&&J2(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Ca(n)&&n.x_.set("Unknown"))}function w0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ic(t).c_(e)}function J2(t,e){t.O_.Oe(e),ic(t).l_(e)}function S0(t){t.O_=new gB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ic(t).start(),t.x_.p_()}function I0(t){return Ca(t)&&!ic(t).Ho()&&t.C_.size>0}function Ca(t){return $e(t).v_.size===0}function Q2(t){t.O_=void 0}async function m8(t){t.C_.forEach((e,n)=>{w0(t,e)})}async function g8(t,e){Q2(t),I0(t)?(t.x_.S_(e),S0(t)):t.x_.set("Unknown")}async function y8(t,e,n){if(t.x_.set("Online"),e instanceof V2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(t,r)}else if(e instanceof Gd?t.O_.$e(e):e instanceof L2?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ve.min()))try{const r=await q2(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(Fn.EMPTY_BYTE_STRING,u.snapshotVersion)),J2(s,l);const h=new Ps(u.target,l,c,u.sequenceNumber);w0(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await Wf(t,r)}}async function Wf(t,e,n){if(!Ch(e))throw e;t.v_.add(1),await Oh(t),t.x_.set("Offline"),n||(n=()=>q2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Em(t)})}function X2(t,e){return e().catch(n=>Wf(t,n,e))}async function Tm(t){const e=$e(t),n=to(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;_8(e);)try{const i=await n8(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,v8(e,i)}catch(i){await Wf(e,i)}Z2(e)&&eO(e)}function _8(t){return Ca(t)&&t.D_.length<10}function v8(t,e){t.D_.push(e);const n=to(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Z2(t){return Ca(t)&&!to(t).Ho()&&t.D_.length>0}function eO(t){to(t).start()}async function b8(t){to(t).d_()}async function E8(t){const e=to(t);for(const n of t.D_)e.I_(n.mutations)}async function T8(t,e,n){const r=t.D_.shift(),i=g0.from(r,e,n);await X2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tm(t)}async function w8(t,e){e&&to(t).P_&&await async function(r,i){if(function(o){return fB(o)&&o!==G.ABORTED}(i.code)){const s=r.D_.shift();to(r).Zo(),await X2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Tm(r)}}(t,e),Z2(t)&&eO(t)}async function yw(t,e){const n=$e(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=Ca(n);n.v_.add(3),await Oh(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Em(n)}async function S8(t,e){const n=$e(t);e?(n.v_.delete(2),await Em(n)):e||(n.v_.add(2),await Oh(n),n.x_.set("Unknown"))}function ic(t){return t.N_||(t.N_=function(n,r,i){const s=$e(n);return s.R_(),new u8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:m8.bind(null,t),To:g8.bind(null,t),u_:y8.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),I0(t)?S0(t):t.x_.set("Unknown")):(await t.N_.stop(),Q2(t))})),t.N_}function to(t){return t.L_||(t.L_=function(n,r,i){const s=$e(n);return s.R_(),new h8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:b8.bind(null,t),To:w8.bind(null,t),E_:E8.bind(null,t),T_:T8.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Tm(t)):(await t.L_.stop(),t.D_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new A0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C0(t,e){if(Ti("AsyncQueue",`${e}: ${t}`),Ch(t))return new ve(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=Ac(),this.sortedSet=new Pt(this.comparator)}static emptySet(e){return new ul(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ul)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(){this.B_=new Pt(Ae.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Pe():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nl(e,n,ul.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class A8{constructor(){this.queries=new rc(e=>T2(e),mm),this.onlineState="Unknown",this.W_=new Set}}async function R0(t,e){const n=$e(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new I8,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=C0(o,`Initialization of query '${La(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&O0(n)}async function k0(t,e){const n=$e(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function C8(t,e){const n=$e(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&O0(n)}function R8(t,e,n){const r=$e(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function O0(t){t.W_.forEach(e=>{e.next()})}var x_,vw;(vw=x_||(x_={})).j_="default",vw.Cache="cache";class N0{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==x_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.key=e}}class nO{constructor(e){this.key=e}}class k8{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Ge(),this.mutatedKeys=Ge(),this.ha=w2(e),this.Pa=new ul(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new _w,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=gm(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),g=!0):this.da(d,f)||(r.track({type:2,doc:f}),g=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),g=!0):d&&!f&&(r.track({type:1,doc:d}),g=!0,(l||c)&&(a=!0)),g&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(f,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return m(f)-m(p)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new Nl(this.query,e.Pa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new _w,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Ge(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new nO(r))}),this.la.forEach(r=>{e.has(r)||n.push(new tO(r))}),n}fa(e){this.ua=e.hs,this.la=Ge();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Nl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class O8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class N8{constructor(e){this.key=e,this.pa=!1}}class M8{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new rc(a=>T2(a),mm),this.Sa=new Map,this.ba=new Set,this.Da=new Pt(Ae.comparator),this.Ca=new Map,this.va=new v0,this.Fa={},this.Ma=new Map,this.xa=Ol.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function P8(t,e,n=!0){const r=lO(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await rO(r,e,n,!0),i}async function x8(t,e){const n=lO(t);await rO(n,e,!0,!1)}async function rO(t,e,n,r){const i=await r8(t.localStore,gi(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await D8(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Y2(t.remoteStore,i),a}async function D8(t,e,n,r,i){t.Na=(h,d,f)=>async function(m,g,y,_){let T=g.view.Ta(y);T.Xi&&(T=await pw(m.localStore,g.query,!1).then(({documents:x})=>g.view.Ta(x,T)));const w=_&&_.targetChanges.get(g.targetId),I=_&&_.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(T,m.isPrimaryClient,w,I);return Ew(m,g.targetId,C.Va),C.snapshot}(t,h,d,f);const s=await pw(t.localStore,e,!0),o=new k8(e,s.hs),a=o.Ta(s.documents),l=kh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Ew(t,n,c.Va);const u=new O8(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function L8(t,e,n){const r=$e(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!mm(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await P_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&T0(r.remoteStore,i.targetId),D_(r,i.targetId)}).catch(Ah)):(D_(r,i.targetId),await P_(r.localStore,i.targetId,!0))}async function V8(t,e){const n=$e(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),T0(n.remoteStore,r.targetId))}async function F8(t,e,n){const r=W8(t);try{const i=await function(o,a){const l=$e(o),c=Gt.now(),u=a.reduce((f,p)=>f.add(p.key),Ge());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Zi(),m=Ge();return l.os.getEntries(f,u).next(g=>{p=g,p.forEach((y,_)=>{_.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(g=>{h=g;const y=[];for(const _ of a){const T=lB(_,h.get(_.key).overlayedDocument);T!=null&&y.push(new ho(_.key,T,m2(T.value.mapValue),mr.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:I2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new Pt(st)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Nh(r,i.changes),await Tm(r.remoteStore)}catch(i){const s=C0(i,"Failed to persist write");n.reject(s)}}async function iO(t,e){const n=$e(t);try{const r=await e8(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?Et(o.pa):i.removedDocuments.size>0&&(Et(o.pa),o.pa=!1))}),await Nh(n,r,e)}catch(r){await Ah(r)}}function bw(t,e,n){const r=$e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=$e(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&O0(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function U8(t,e,n){const r=$e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Pt(Ae.comparator);o=o.insert(s,Pn.newNoDocument(s,Ve.min()));const a=Ge().add(s),l=new vm(Ve.min(),new Map,new Pt(st),o,a);await iO(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),M0(r)}else await P_(r.localStore,e,!1).then(()=>D_(r,e,n)).catch(Ah)}async function B8(t,e){const n=$e(t),r=e.batch.batchId;try{const i=await ZB(n.localStore,e);oO(n,r,null),sO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nh(n,i)}catch(i){await Ah(i)}}async function $8(t,e,n){const r=$e(t);try{const i=await function(o,a){const l=$e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Et(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);oO(r,e,n),sO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nh(r,i)}catch(i){await Ah(i)}}function sO(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function oO(t,e,n){const r=$e(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function D_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||aO(t,r)})}function aO(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(T0(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),M0(t))}function Ew(t,e,n){for(const r of n)r instanceof tO?(t.va.addReference(r.key,e),H8(t,r)):r instanceof nO?(se("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||aO(t,r.key)):Pe()}function H8(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(se("SyncEngine","New document in limbo: "+n),t.ba.add(r),M0(t))}function M0(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new Ae(Nt.fromString(e)),r=t.xa.next();t.Ca.set(r,new N8(n)),t.Da=t.Da.insert(n,r),Y2(t.remoteStore,new Ps(gi(pm(n.path)),r,"TargetPurposeLimboResolution",c0._e))}}async function Nh(t,e,n){const r=$e(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=E0.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,c){const u=$e(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>q.forEach(c,d=>q.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>q.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Ch(h))throw h;se("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(d,m)}}}(r.localStore,s))}async function z8(t,e){const n=$e(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await W2(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new ve(G.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nh(n,r.us)}}function j8(t,e){const n=$e(t),r=n.Ca.get(e);if(r&&r.pa)return Ge().add(r.key);{let i=Ge();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function lO(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U8.bind(null,e),e.ya.u_=C8.bind(null,e.eventManager),e.ya.La=R8.bind(null,e.eventManager),e}function W8(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$8.bind(null,e),e}class Tw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=bm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return XB(this.persistence,new JB,e.initialUser,this.serializer)}createPersistence(e){return new GB(b0.Hr,this.serializer)}createSharedClientState(e){return new s8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class q8{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=z8.bind(null,this.syncEngine),await S8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new A8}()}createDatastore(e){const n=bm(e.databaseInfo.databaseId),r=function(s){return new c8(s)}(e.databaseInfo);return function(s,o,a,l){return new d8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new p8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bw(this.syncEngine,n,0),function(){return gw.D()?new gw:new o8}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new M8(i,s,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=$e(r);se("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Oh(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=On.UNAUTHENTICATED,this.clientId=d2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{se("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(se("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ve(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=C0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kg(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await W2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ww(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Y8(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yw(e.remoteStore,i)),t._onlineComponents=e}function K8(t){return t.name==="FirebaseError"?t.code===G.FAILED_PRECONDITION||t.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Y8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await kg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!K8(n))throw n;Il("Error using user provided cache. Falling back to memory cache: "+n),await kg(t,new Tw)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await kg(t,new Tw);return t._offlineComponents}async function cO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await ww(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await ww(t,new q8))),t._onlineComponents}function J8(t){return cO(t).then(e=>e.syncEngine)}async function qf(t){const e=await cO(t),n=e.eventManager;return n.onListen=P8.bind(null,e.syncEngine),n.onUnlisten=L8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=V8.bind(null,e.syncEngine),n}function Q8(t,e,n={}){const r=new mi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new P0({next:d=>{o.enqueueAndForget(()=>k0(s,h));const f=d.docs.has(a);!f&&d.fromCache?c.reject(new ve(G.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?c.reject(new ve(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new N0(pm(a.path),u,{includeMetadataChanges:!0,ta:!0});return R0(s,h)}(await qf(t),t.asyncQueue,e,n,r)),r.promise}function X8(t,e,n={}){const r=new mi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new P0({next:d=>{o.enqueueAndForget(()=>k0(s,h)),d.fromCache&&l.source==="server"?c.reject(new ve(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new N0(a,u,{includeMetadataChanges:!0,ta:!0});return R0(s,h)}(await qf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t,e,n){if(!n)throw new ve(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Z8(t,e,n,r){if(e===!0&&r===!0)throw new ve(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Iw(t){if(!Ae.isDocumentKey(t))throw new ve(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Aw(t){if(Ae.isDocumentKey(t))throw new ve(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function x0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function gr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=x0(t);throw new ve(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ve(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ve(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mU;switch(r.type){case"firstParty":return new vU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Sw.get(n);r&&(se("ComponentProvider","Removing Datastore"),Sw.delete(n),r.terminate())}(this),Promise.resolve()}}function e7(t,e,n,r={}){var i;const s=(t=gr(t,wm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=On.MOCK_USER;else{a=T4(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ve(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new On(c)}t._authCredentials=new gU(new h2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mh(this.firestore,e,this._query)}}class jn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class zs extends Mh{constructor(e,n,r){super(e,n,pm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Ae(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function kr(t,e,...n){if(t=hn(t),hO("collection","path",e),t instanceof wm){const r=Nt.fromString(e,...n);return Aw(r),new zs(t,null,r)}{if(!(t instanceof jn||t instanceof zs))throw new ve(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Nt.fromString(e,...n));return Aw(r),new zs(t.firestore,null,r)}}function rt(t,e,...n){if(t=hn(t),arguments.length===1&&(e=d2.newId()),hO("doc","path",e),t instanceof wm){const r=Nt.fromString(e,...n);return Iw(r),new jn(t,null,new Ae(r))}{if(!(t instanceof jn||t instanceof zs))throw new ve(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Nt.fromString(e,...n));return Iw(r),new jn(t.firestore,t instanceof zs?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new G2(this,"async_queue_retry"),this.cu=()=>{const n=Rg();n&&se("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Rg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=Rg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new mi;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Ch(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ti("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=A0.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&Pe()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function Rw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class no extends wm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new t7}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dO(this),this._firestoreClient.terminate()}}function n7(t,e){const n=typeof t=="object"?t:pC(),r=typeof t=="string"?t:e||"(default)",i=dC(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=b4("firestore");s&&e7(i,...s)}return i}function Ph(t){return t._firestoreClient||dO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dO(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new PU(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,uO(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new G8(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ml(Fn.fromBase64String(e))}catch(n){throw new ve(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ml(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=/^__.*__$/;class i7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rh(e,this.data,n,this.fieldTransforms)}}class fO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ho(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Am{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Gf(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(pO(this.Vu)&&r7.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class s7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bm(e)}Cu(e,n,r,i=!1){return new Am({Vu:e,methodName:n,Du:r,path:Sn.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D0(t){const e=t._freezeSettings(),n=bm(t._databaseId);return new s7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mO(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);V0("Data must be an object, but it was:",o,r);const a=_O(r,o);let l,c;if(s.merge)l=new hr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=L_(e,h,n);if(!o.contains(d))throw new ve(G.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);bO(u,d)||u.push(d)}l=new hr(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new i7(new Qn(a),l,c)}class Cm extends Sm{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cm}}function o7(t,e,n){return new Am({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class L0 extends Sm{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=o7(this,e,!0),r=this.vu.map(s=>Dh(s,n)),i=new kl(r);return new iB(e.path,i)}isEqual(e){return e instanceof L0&&Tu(this.vu,e.vu)}}function gO(t,e,n,r){const i=t.Cu(1,e,n);V0("Data must be an object, but it was:",i,r);const s=[],o=Qn.empty();Aa(r,(l,c)=>{const u=F0(e,l,n);c=hn(c);const h=i.yu(u);if(c instanceof Cm)s.push(u);else{const d=Dh(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new hr(s);return new fO(o,a,i.fieldTransforms)}function yO(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[L_(e,r,n)],l=[i];if(s.length%2!=0)throw new ve(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(L_(e,s[d])),l.push(s[d+1]);const c=[],u=Qn.empty();for(let d=a.length-1;d>=0;--d)if(!bO(c,a[d])){const f=a[d];let p=l[d];p=hn(p);const m=o.yu(f);if(p instanceof Cm)c.push(f);else{const g=Dh(p,m);g!=null&&(c.push(f),u.set(f,g))}}const h=new hr(c);return new fO(u,h,o.fieldTransforms)}function Dh(t,e){if(vO(t=hn(t)))return V0("Unsupported field value:",e,t),_O(t,e);if(t instanceof Sm)return function(r,i){if(!pO(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Dh(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Gt.fromDate(r);return{timestampValue:jf(i.serializer,s)}}if(r instanceof Gt){const s=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jf(i.serializer,s)}}if(r instanceof Im)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ml)return{bytesValue:F2(i.serializer,r._byteString)};if(r instanceof jn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${x0(r)}`)}(t,e)}function _O(t,e){const n={};return f2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Aa(t,(r,i)=>{const s=Dh(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function vO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Gt||t instanceof Im||t instanceof Ml||t instanceof jn||t instanceof Sm)}function V0(t,e,n){if(!vO(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=x0(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function L_(t,e,n){if((e=hn(e))instanceof xh)return e._internalPath;if(typeof e=="string")return F0(t,e);throw Gf("Field path arguments must be of type string or ",t,!1,void 0,n)}const a7=new RegExp("[~\\*/\\[\\]]");function F0(t,e,n){if(e.search(a7)>=0)throw Gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xh(...e.split("."))._internalPath}catch{throw Gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ve(G.INVALID_ARGUMENT,a+t+l)}function bO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(TO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class l7 extends EO{data(){return super.data()}}function TO(t,e){return typeof e=="string"?F0(t,e):e instanceof xh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ve(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c7{convertValue(e,n="none"){switch(da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Aa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Im(zt(e.latitude),zt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=h0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lu(e));default:return null}}convertTimestamp(e){const n=eo(e);return new Gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Nt.fromString(e);Et(j2(r));const i=new Vu(r.get(1),r.get(3)),s=new Ae(r.popFirst(5));return i.isEqual(n)||Ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class IO extends EO{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(TO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kd extends IO{data(e={}){return super.data(e)}}class AO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Rc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kd(this._firestore,this._userDataWriter,r.key,r,new Rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Kd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Kd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:u7(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function u7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){t=gr(t,jn);const e=gr(t.firestore,no);return Q8(Ph(e),t._key).then(n=>CO(e,t,n))}class U0 extends c7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,n)}}function V_(t){t=gr(t,Mh);const e=gr(t.firestore,no),n=Ph(e),r=new U0(e);return wO(t._query),X8(n,t._query).then(i=>new AO(e,r,t,i))}function kw(t,e,n){t=gr(t,jn);const r=gr(t.firestore,no),i=SO(t.converter,e,n);return $0(r,[mO(D0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,mr.none())])}function Jo(t,e,n,...r){t=gr(t,jn);const i=gr(t.firestore,no),s=D0(i);let o;return o=typeof(e=hn(e))=="string"||e instanceof xh?yO(s,"updateDoc",t._key,e,n,r):gO(s,"updateDoc",t._key,e),$0(i,[o.toMutation(t._key,mr.exists(!0))])}function B0(t,...e){var n,r,i;t=hn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Rw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Rw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof jn)c=gr(t.firestore,no),u=pm(t._key.path),l={next:h=>{e[o]&&e[o](CO(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=gr(t,Mh);c=gr(h.firestore,no),u=h._query;const d=new U0(c);l={next:f=>{e[o]&&e[o](new AO(c,d,h,f))},error:e[o+1],complete:e[o+2]},wO(t._query)}return function(d,f,p,m){const g=new P0(m),y=new N0(f,g,p);return d.asyncQueue.enqueueAndForget(async()=>R0(await qf(d),y)),()=>{g.Qa(),d.asyncQueue.enqueueAndForget(async()=>k0(await qf(d),y))}}(Ph(c),u,a,l)}function $0(t,e){return function(r,i){const s=new mi;return r.asyncQueue.enqueueAndForget(async()=>F8(await J8(r),i,s)),s.promise}(Ph(t),e)}function CO(t,e,n){const r=n.docs.get(e._key),i=new U0(t);return new IO(t,i,e._key,r,new Rc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=D0(e)}set(e,n,r){this._verifyNotCommitted();const i=Og(e,this._firestore),s=SO(i.converter,n,r),o=mO(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,mr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Og(e,this._firestore);let o;return o=typeof(n=hn(n))=="string"||n instanceof xh?yO(this._dataReader,"WriteBatch.update",s._key,n,r,i):gO(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Og(e,this._firestore);return this._mutations=this._mutations.concat(new m0(n._key,mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Og(t,e){if((t=hn(t)).firestore!==e)throw new ve(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function d7(...t){return new L0("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){return Ph(t=gr(t,no)),new h7(t,e=>$0(t,e))}(function(e,n=!0){(function(i){nc=i})(ao),bi(new Kr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new no(new yU(r.getProvider("auth-internal")),new EU(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ve(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vu(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),fr(GT,"4.6.0",e),fr(GT,"4.6.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="firebasestorage.googleapis.com",f7="storageBucket",p7=2*60*1e3,m7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Ni{constructor(e,n,r=0){super(Ng(e),`Firebase Storage: ${n} (${Ng(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ng(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ai;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ai||(Ai={}));function Ng(t){return"storage/"+t}function g7(){const t="An unknown error occurred, please check the error payload for server response.";return new Mi(Ai.UNKNOWN,t)}function y7(){return new Mi(Ai.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _7(){return new Mi(Ai.CANCELED,"User canceled the upload/download.")}function v7(t){return new Mi(Ai.INVALID_URL,"Invalid URL '"+t+"'.")}function b7(t){return new Mi(Ai.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ow(t){return new Mi(Ai.INVALID_ARGUMENT,t)}function kO(){return new Mi(Ai.APP_DELETED,"The Firebase app was deleted.")}function E7(t){return new Mi(Ai.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Hr.makeFromUrl(e,n)}catch{return new Hr(e,"")}if(r.path==="")return r;throw b7(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===RO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<T.length;w++){const I=T[w],C=I.regex.exec(e);if(C){const x=C[I.indices.bucket];let N=C[I.indices.path];N||(N=""),r=new Hr(x,N),I.postModify(r);break}}if(r==null)throw v7(e);return r}}class T7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w7(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function h(g){i=setTimeout(()=>{i=null,t(f,l())},g)}function d(){s&&clearTimeout(s)}function f(g,...y){if(c){d();return}if(g){d(),u.call(null,g,...y);return}if(l()||o){d(),u.call(null,g,...y);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,h(T)}let p=!1;function m(g){p||(p=!0,d(),!c&&(i!==null?(g||(a=2),clearTimeout(i),h(0)):g||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function S7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(t){return t!==void 0}function Nw(t,e,n,r){if(r<e)throw Ow(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ow(`Invalid value for '${t}'. Expected ${n} or less.`)}function A7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Kf||(Kf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,n,r,i,s,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new gd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Kf.NO_ERROR,l=s.getStatus();if(!a||C7(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Kf.ABORT;r(!1,new gd(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new gd(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());I7(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=g7();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?kO():_7();o(l)}else{const l=y7();o(l)}};this.canceled_?n(!1,new gd(!1,null,!0)):this.backoffId_=w7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function k7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function O7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function N7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function M7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function P7(t,e,n,r,i,s,o=!0){const a=A7(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return N7(c,e),k7(c,n),O7(c,s),M7(c,r),new R7(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function D7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this._service=e,n instanceof Hr?this._location=n:this._location=Hr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yf(e,n)}get root(){const e=new Hr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return D7(this._location.path)}get storage(){return this._service}get parent(){const e=x7(this._location.path);if(e===null)return null;const n=new Hr(this._location.bucket,e);return new Yf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw E7(e)}}function Mw(t,e){const n=e==null?void 0:e[f7];return n==null?null:Hr.makeFromBucketSpec(n,t)}class L7{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=RO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p7,this._maxUploadRetryTime=m7,this._requests=new Set,i!=null?this._bucket=Hr.makeFromBucketSpec(i,this._host):this._bucket=Mw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hr.makeFromBucketSpec(this._url,e):this._bucket=Mw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Nw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Nw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yf(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new T7(kO());{const o=P7(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Pw="@firebase/storage",xw="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V7="storage";function F7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new L7(n,r,i,e,ao)}function U7(){bi(new Kr(V7,F7,"PUBLIC").setMultipleInstances(!0)),fr(Pw,xw,""),fr(Pw,xw,"esm2017")}U7();const Mg=new WeakMap;function OO(t,e){return Mg.has(e)||Mg.set(e,t||{f:{},r:{},s:{},u:{}}),Mg.get(e)}function B7(t,e,n,r){if(!t)return n;const[i,s]=NO(t);if(!i)return n;const o=OO(void 0,r)[i]||{},a=e||s;return a&&a in o?o[a]:n}function $7(t,e,n,r){if(!t)return;const[i,s]=NO(t);if(!i)return;const o=OO(void 0,r)[i],a=e||s;if(a)return n.then(l=>{o[a]=l}).catch(oi),a}function NO(t){return m5(t)||g5(t)?["f",t.path]:y5(t)?["r",t.toString()]:_5(t)?["s",t.toString()]:[]}const Pg=new WeakMap;function H7(t,e,n){const r=jp();Pg.has(r)||Pg.set(r,new Map);const i=Pg.get(r),s=$7(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):oi}const z7={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function F_(t,e,n,r){if(!f5(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((a,l)=>{const c=n[l];return a[c.path]=c.data(),a},{});function o(a,l,c,u){l=l||{};const[h,d]=u;Object.getOwnPropertyNames(a).forEach(f=>{const p=Object.getOwnPropertyDescriptor(a,f);p&&!p.enumerable&&Object.defineProperty(h,f,p)});for(const f in a){const p=a[f];if(p==null||p instanceof Date||p instanceof Gt||p instanceof Im)h[f]=p;else if(g1(p)){const m=c+f;h[f]=m in n?l[f]:p.path,d[m]=p.converter?p:p.withConverter(r.converter)}else if(Array.isArray(p)){h[f]=Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];g&&g.path in s&&(h[f][m]=s[g.path])}o(p,l[f]||h[f],c+f+".",[h[f],d])}else Ta(p)?(h[f]={},o(p,l[f],c+f+".",[h[f],d])):h[f]=p}}return o(t,e,"",i),i}const H0={reset:!1,wait:!0,maxRefDepth:2,converter:z7,snapshotOptions:{serverTimestamps:"estimate"}};function Jf(t){for(const e in t)t[e].unsub()}function U_(t,e,n,r,i,s,o,a,l){const[c,u]=F_(r.data(t.snapshotOptions),m1(e,n),i,t);s.set(e,n,c),B_(t,e,n,i,u,s,o,a,l)}function j7({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},a){const l=Object.create(null);let c=oi;return a.once?Ii(t).then(u=>{u.exists()?U_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())}).catch(s):c=B0(t,u=>{u.exists()?U_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())},s),()=>{c(),Jf(l)}}function B_(t,e,n,r,i,s,o,a,l){const c=Object.keys(i);if(Object.keys(r).filter(m=>c.indexOf(m)<0).forEach(m=>{r[m].unsub(),delete r[m]}),!c.length||++o>t.maxRefDepth)return a(n);let h=0;const d=c.length,f=Object.create(null);function p(m){m in f&&++h>=d&&a(n)}c.forEach(m=>{const g=r[m],y=i[m],_=`${n}.${m}`;if(f[_]=!0,g)if(g.path!==y.path)g.unsub();else return;r[m]={data:()=>m1(e,_),unsub:j7({ref:y,target:e,path:_,depth:o,ops:s,resolve:p.bind(null,_),reject:l},t),path:y.path}})}function W7(t,e,n,r,i,s){const o=Object.assign({},H0,s),{snapshotListenOptions:a,snapshotOptions:l,wait:c,once:u}=o,h="value";let d=ie(c?[]:t.value);c||n.set(t,h,[]);const f=r;let p,m=oi;const g=[],y={added:({newIndex:T,doc:w})=>{g.splice(T,0,Object.create(null));const I=g[T],[C,x]=F_(w.data(l),void 0,I,o);n.add(Di(d),T,C),B_(o,d,`${h}.${T}`,I,x,n,0,r.bind(null,w),i)},modified:({oldIndex:T,newIndex:w,doc:I})=>{const C=Di(d),x=g[T],N=C[T],[k,j]=F_(I.data(l),N,x,o);g.splice(w,0,x),n.remove(C,T),n.add(C,w,k),B_(o,d,`${h}.${w}`,x,j,n,0,r,i)},removed:({oldIndex:T})=>{const w=Di(d);n.remove(w,T),Jf(g.splice(T,1)[0])}};function _(T){const w=T.docChanges(a);if(!p&&w.length){p=!0;let I=0;const C=w.length,x=Object.create(null);for(let N=0;N<C;N++)x[w[N].doc.id]=!0;r=N=>{N&&N.id in x&&++I>=C&&(c&&(n.set(t,h,Di(d)),d=t),f(Di(d)),r=oi)}}w.forEach(I=>{y[I.type](I)}),w.length||(c&&(n.set(t,h,Di(d)),d=t),r(Di(d)))}return u?V_(e).then(_).catch(i):m=B0(e,_,i),T=>{if(m(),T){const w=typeof T=="function"?T():[];n.set(t,h,w)}g.forEach(Jf)}}function q7(t,e,n,r,i,s){const o=Object.assign({},H0,s),a="value",l=Object.create(null);r=v5(r,()=>m1(t,a));let c=oi;function u(h){h.exists()?U_(o,t,a,h,l,n,0,r,i):(n.set(t,a,null),r(null))}return o.once?Ii(e).then(u).catch(i):c=B0(e,u,i),h=>{if(c(),h){const d=typeof h=="function"?h():null;n.set(t,a,d)}Jf(l)}}const Dw=Symbol();function MO(t,e){let n=oi;const r=Object.assign({},H0,e),i=Di(t),s=r.target||ie();E5()&&(r.once=!0);const o=B7(i,r.ssrKey,Dw,jp()),a=o!==Dw;a&&(s.value=o);let l=!a;const c=ie(!1),u=ie(),h=bA(),d=Dv();let f=oi;function p(){let y=Di(t);const _=new Promise((T,w)=>{if(n(r.reset),!y)return n=oi,T(null);c.value=l,l=!0,y.converter||(y=y.withConverter(r.converter)),n=(g1(y)?q7:W7)(s,y,G7,T,w,r)}).catch(T=>(h.value===_&&(u.value=T),Promise.reject(T))).finally(()=>{h.value===_&&(c.value=!1)});h.value=_}let m=oi;(un(t)||typeof t=="function")&&(m=Gi(t,p)),p(),i&&(f=H7(h.value,i,r.ssrKey)),Ea()&&VA(()=>h.value),d&&sA(g);function g(y=r.reset){m(),f(),n(y)}return Object.defineProperties(s,{error:{get:()=>u},data:{get:()=>s},pending:{get:()=>c},promise:{get:()=>h},stop:{get:()=>g}})}const G7={set:(t,e,n)=>h5(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function js(t,e){return MO(t,{target:ie([]),...e})}function sc(t,e){return MO(t,e)}function K7(t){return Y7({initialUser:t,dependencies:{popupRedirectResolver:M6,persistence:[zL,NL,FC]}})}const PO=Symbol("VueFireAuth");function Y7({dependencies:t,initialUser:e}){return(n,r)=>{const[i,s]=J7(n,r,e,t);S5(i,s)}}function J7(t,e,n,r,i=bL(t,r)){const s=T5(t,e).run(()=>ie(n));return YC.set(t,s),e.provide(PO,i),[s,i]}function Q7(t){return u5?Xn(PO):null}function X7(t,{firebaseApp:e,modules:n=[]}){t.provide(KC,e);for(const r of n)r(e,t)}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ua=typeof document<"u";function Z7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const lt=Object.assign;function xg(t,e){const n={};for(const r in e){const i=e[r];n[r]=Qr(i)?i.map(t):t(i)}return n}const tu=()=>{},Qr=Array.isArray,xO=/#/g,e$=/&/g,t$=/\//g,n$=/=/g,r$=/\?/g,DO=/\+/g,i$=/%5B/g,s$=/%5D/g,LO=/%5E/g,o$=/%60/g,VO=/%7B/g,a$=/%7C/g,FO=/%7D/g,l$=/%20/g;function z0(t){return encodeURI(""+t).replace(a$,"|").replace(i$,"[").replace(s$,"]")}function c$(t){return z0(t).replace(VO,"{").replace(FO,"}").replace(LO,"^")}function $_(t){return z0(t).replace(DO,"%2B").replace(l$,"+").replace(xO,"%23").replace(e$,"%26").replace(o$,"`").replace(VO,"{").replace(FO,"}").replace(LO,"^")}function u$(t){return $_(t).replace(n$,"%3D")}function h$(t){return z0(t).replace(xO,"%23").replace(r$,"%3F")}function d$(t){return t==null?"":h$(t).replace(t$,"%2F")}function Bu(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const f$=/\/$/,p$=t=>t.replace(f$,"");function Dg(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=_$(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Bu(o)}}function m$(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Lw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function g$(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Pl(e.matched[r],n.matched[i])&&UO(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Pl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function UO(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!y$(t[n],e[n]))return!1;return!0}function y$(t,e){return Qr(t)?Vw(t,e):Qr(e)?Vw(e,t):t===e}function Vw(t,e){return Qr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function _$(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}var $u;(function(t){t.pop="pop",t.push="push"})($u||($u={}));var nu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(nu||(nu={}));function v$(t){if(!t)if(Ua){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),p$(t)}const b$=/^[^#]+#/;function E$(t,e){return t.replace(b$,"#")+e}function T$(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Rm=()=>({left:window.scrollX,top:window.scrollY});function w$(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=T$(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Fw(t,e){return(history.state?history.state.position-e:-1)+t}const H_=new Map;function S$(t,e){H_.set(t,e)}function I$(t){const e=H_.get(t);return H_.delete(t),e}let A$=()=>location.protocol+"//"+location.host;function BO(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Lw(l,"")}return Lw(n,t)+r+i}function C$(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=BO(t,location),p=n.value,m=e.value;let g=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}g=m?d.position-m.position:0}else r(f);i.forEach(y=>{y(n.value,p,{delta:g,type:$u.pop,direction:g?g>0?nu.forward:nu.back:nu.unknown})})};function l(){o=n.value}function c(d){i.push(d);const f=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(lt({},d.state,{scroll:Rm()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Uw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Rm():null}}function R$(t){const{history:e,location:n}=window,r={value:BO(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:A$()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=lt({},e.state,Uw(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=lt({},i.value,e.state,{forward:l,scroll:Rm()});s(u.current,u,!0);const h=lt({},Uw(r.value,l,null),{position:u.position+1},c);s(l,h,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function k$(t){t=v$(t);const e=R$(t),n=C$(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=lt({location:"",base:t,go:r,createHref:E$.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function O$(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),k$(t)}function N$(t){return typeof t=="string"||t&&typeof t=="object"}function $O(t){return typeof t=="string"||typeof t=="symbol"}const gs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},HO=Symbol("");var Bw;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Bw||(Bw={}));function xl(t,e){return lt(new Error,{type:t,[HO]:!0},e)}function Pi(t,e){return t instanceof Error&&HO in t&&(e==null||!!(t.type&e))}const $w="[^/]+?",M$={sensitive:!1,strict:!1,start:!0,end:!0},P$=/[.+*?^${}()[\]/\\]/g;function x$(t,e){const n=lt({},M$,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(P$,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:g,regexp:y}=d;s.push({name:p,repeatable:m,optional:g});const _=y||$w;if(_!==$w){f+=10;try{new RegExp(`(${_})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+w.message)}}let T=m?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;h||(T=g&&c.length<2?`(?:/${T})`:"/"+T),g&&(T+="?"),i+=T,f+=20,g&&(f+=-8),m&&(f+=-20),_===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=s[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:g}=f,y=p in c?c[p]:"";if(Qr(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=Qr(y)?y.join("/"):y;if(!_)if(g)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=_}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function D$(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function L$(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=D$(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(Hw(r))return 1;if(Hw(i))return-1}return i.length-r.length}function Hw(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const V$={type:0,value:""},F$=/[a-zA-Z0-9_]/;function U$(t){if(!t)return[[]];if(t==="/")return[[V$]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:F$.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}function B$(t,e,n){const r=x$(U$(t.path),n),i=lt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function $$(t,e){const n=[],r=new Map;e=Ww({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,h,d){const f=!d,p=H$(u);p.aliasOf=d&&d.record;const m=Ww(e,u),g=[p];if("alias"in u){const T=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of T)g.push(lt({},p,{components:d?d.record.components:p.components,path:w,aliasOf:d?d.record:p}))}let y,_;for(const T of g){const{path:w}=T;if(h&&w[0]!=="/"){const I=h.record.path,C=I[I.length-1]==="/"?"":"/";T.path=h.record.path+(w&&C+w)}if(y=B$(T,h,m),d?d.alias.push(y):(_=_||y,_!==y&&_.alias.push(y),f&&u.name&&!jw(y)&&o(u.name)),p.children){const I=p.children;for(let C=0;C<I.length;C++)s(I[C],y,d&&d.children[C])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return _?()=>{o(_)}:tu}function o(u){if($O(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&L$(u,n[h])>=0&&(u.record.path!==n[h].record.path||!zO(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!jw(u)&&r.set(u.record.name,u)}function c(u,h){let d,f={},p,m;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw xl(1,{location:u});m=d.record.name,f=lt(zw(h.params,d.keys.filter(_=>!_.optional).concat(d.parent?d.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),u.params&&zw(u.params,d.keys.map(_=>_.name))),p=d.stringify(f)}else if(u.path!=null)p=u.path,d=n.find(_=>_.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=h.name?r.get(h.name):n.find(_=>_.re.test(h.path)),!d)throw xl(1,{location:u,currentLocation:h});m=d.record.name,f=lt({},h.params,u.params),p=d.stringify(f)}const g=[];let y=d;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:p,params:f,matched:g,meta:j$(g)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function zw(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function H$(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:z$(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function z$(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function jw(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function j$(t){return t.reduce((e,n)=>lt(e,n.meta),{})}function Ww(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function zO(t,e){return e.children.some(n=>n===t||zO(t,n))}function W$(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(DO," "),o=s.indexOf("="),a=Bu(o<0?s:s.slice(0,o)),l=o<0?null:Bu(s.slice(o+1));if(a in e){let c=e[a];Qr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function qw(t){let e="";for(let n in t){const r=t[n];if(n=u$(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Qr(r)?r.map(s=>s&&$_(s)):[r&&$_(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function q$(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Qr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const G$=Symbol(""),Gw=Symbol(""),km=Symbol(""),j0=Symbol(""),z_=Symbol("");function vc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ss(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(xl(4,{from:n,to:e})):d instanceof Error?l(d):N$(d)?l(xl(2,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=s(()=>t.call(r&&r.instances[i],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function Lg(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(K$(l)){const u=(l.__vccOpts||l)[e];u&&s.push(Ss(u,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=Z7(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&Ss(f,n,r,o,a,i)()}))}}return s}function K$(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Kw(t){const e=Xn(km),n=Xn(j0),r=pt(()=>e.resolve(ee(t.to))),i=pt(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Pl.bind(null,u));if(d>-1)return d;const f=Yw(l[c-2]);return c>1&&Yw(u)===f&&h[h.length-1].path!==f?h.findIndex(Pl.bind(null,l[c-2])):d}),s=pt(()=>i.value>-1&&X$(n.params,r.value.params)),o=pt(()=>i.value>-1&&i.value===n.matched.length-1&&UO(n.params,r.value.params));function a(l={}){return Q$(l)?e[ee(t.replace)?"replace":"push"](ee(t.to)).catch(tu):Promise.resolve()}return{route:r,href:pt(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const Y$=Yt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Kw,setup(t,{slots:e}){const n=rh(Kw(t)),{options:r}=Xn(km),i=pt(()=>({[Jw(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Jw(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:qo("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),J$=Y$;function Q$(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function X$(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Qr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Yw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Jw=(t,e,n)=>t??e??n,Z$=Yt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Xn(z_),i=pt(()=>t.route||r.value),s=Xn(Gw,0),o=pt(()=>{let c=ee(s);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=pt(()=>i.value.matched[o.value]);Ld(Gw,pt(()=>o.value+1)),Ld(G$,a),Ld(z_,i);const l=ie();return Gi(()=>[l.value,a.value,t.name],([c,u,h],[d,f,p])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Pl(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Qw(n.default,{Component:d,route:c});const f=h.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,g=qo(d,lt({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Qw(n.default,{Component:g,route:c})||g}}});function Qw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const eH=Z$;function tH(t){const e=$$(t.routes,t),n=t.parseQuery||W$,r=t.stringifyQuery||qw,i=t.history,s=vc(),o=vc(),a=vc(),l=bA(gs);let c=gs;Ua&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=xg.bind(null,R=>""+R),h=xg.bind(null,d$),d=xg.bind(null,Bu);function f(R,B){let W,Y;return $O(R)?(W=e.getRecordMatcher(R),Y=B):Y=R,e.addRoute(Y,W)}function p(R){const B=e.getRecordMatcher(R);B&&e.removeRoute(B)}function m(){return e.getRoutes().map(R=>R.record)}function g(R){return!!e.getRecordMatcher(R)}function y(R,B){if(B=lt({},B||l.value),typeof R=="string"){const S=Dg(n,R,B.path),O=e.resolve({path:S.path},B),F=i.createHref(S.fullPath);return lt(S,O,{params:d(O.params),hash:Bu(S.hash),redirectedFrom:void 0,href:F})}let W;if(R.path!=null)W=lt({},R,{path:Dg(n,R.path,B.path).path});else{const S=lt({},R.params);for(const O in S)S[O]==null&&delete S[O];W=lt({},R,{params:h(S)}),B.params=h(B.params)}const Y=e.resolve(W,B),we=R.hash||"";Y.params=u(d(Y.params));const me=m$(r,lt({},R,{hash:c$(we),path:Y.path})),b=i.createHref(me);return lt({fullPath:me,hash:we,query:r===qw?q$(R.query):R.query||{}},Y,{redirectedFrom:void 0,href:b})}function _(R){return typeof R=="string"?Dg(n,R,l.value.path):lt({},R)}function T(R,B){if(c!==R)return xl(8,{from:B,to:R})}function w(R){return x(R)}function I(R){return w(lt(_(R),{replace:!0}))}function C(R){const B=R.matched[R.matched.length-1];if(B&&B.redirect){const{redirect:W}=B;let Y=typeof W=="function"?W(R):W;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=_(Y):{path:Y},Y.params={}),lt({query:R.query,hash:R.hash,params:Y.path!=null?{}:R.params},Y)}}function x(R,B){const W=c=y(R),Y=l.value,we=R.state,me=R.force,b=R.replace===!0,S=C(W);if(S)return x(lt(_(S),{state:typeof S=="object"?lt({},we,S.state):we,force:me,replace:b}),B||W);const O=W;O.redirectedFrom=B;let F;return!me&&g$(r,Y,W)&&(F=xl(16,{to:O,from:Y}),Ne(Y,Y,!0,!1)),(F?Promise.resolve(F):j(O,Y)).catch(L=>Pi(L)?Pi(L,2)?L:be(L):U(L,O,Y)).then(L=>{if(L){if(Pi(L,2))return x(lt({replace:b},_(L.to),{state:typeof L.to=="object"?lt({},we,L.to.state):we,force:me}),B||O)}else L=z(O,Y,!0,b,we);return K(O,Y,L),L})}function N(R,B){const W=T(R,B);return W?Promise.reject(W):Promise.resolve()}function k(R){const B=yt.values().next().value;return B&&typeof B.runWithContext=="function"?B.runWithContext(R):R()}function j(R,B){let W;const[Y,we,me]=nH(R,B);W=Lg(Y.reverse(),"beforeRouteLeave",R,B);for(const S of Y)S.leaveGuards.forEach(O=>{W.push(Ss(O,R,B))});const b=N.bind(null,R,B);return W.push(b),ut(W).then(()=>{W=[];for(const S of s.list())W.push(Ss(S,R,B));return W.push(b),ut(W)}).then(()=>{W=Lg(we,"beforeRouteUpdate",R,B);for(const S of we)S.updateGuards.forEach(O=>{W.push(Ss(O,R,B))});return W.push(b),ut(W)}).then(()=>{W=[];for(const S of me)if(S.beforeEnter)if(Qr(S.beforeEnter))for(const O of S.beforeEnter)W.push(Ss(O,R,B));else W.push(Ss(S.beforeEnter,R,B));return W.push(b),ut(W)}).then(()=>(R.matched.forEach(S=>S.enterCallbacks={}),W=Lg(me,"beforeRouteEnter",R,B,k),W.push(b),ut(W))).then(()=>{W=[];for(const S of o.list())W.push(Ss(S,R,B));return W.push(b),ut(W)}).catch(S=>Pi(S,8)?S:Promise.reject(S))}function K(R,B,W){a.list().forEach(Y=>k(()=>Y(R,B,W)))}function z(R,B,W,Y,we){const me=T(R,B);if(me)return me;const b=B===gs,S=Ua?history.state:{};W&&(Y||b?i.replace(R.fullPath,lt({scroll:b&&S&&S.scroll},we)):i.push(R.fullPath,we)),l.value=R,Ne(R,B,W,b),be()}let V;function D(){V||(V=i.listen((R,B,W)=>{if(!xt.listening)return;const Y=y(R),we=C(Y);if(we){x(lt(we,{replace:!0}),Y).catch(tu);return}c=Y;const me=l.value;Ua&&S$(Fw(me.fullPath,W.delta),Rm()),j(Y,me).catch(b=>Pi(b,12)?b:Pi(b,2)?(x(b.to,Y).then(S=>{Pi(S,20)&&!W.delta&&W.type===$u.pop&&i.go(-1,!1)}).catch(tu),Promise.reject()):(W.delta&&i.go(-W.delta,!1),U(b,Y,me))).then(b=>{b=b||z(Y,me,!1),b&&(W.delta&&!Pi(b,8)?i.go(-W.delta,!1):W.type===$u.pop&&Pi(b,20)&&i.go(-1,!1)),K(Y,me,b)}).catch(tu)}))}let P=vc(),A=vc(),$;function U(R,B,W){be(R);const Y=A.list();return Y.length?Y.forEach(we=>we(R,B,W)):console.error(R),Promise.reject(R)}function he(){return $&&l.value!==gs?Promise.resolve():new Promise((R,B)=>{P.add([R,B])})}function be(R){return $||($=!R,D(),P.list().forEach(([B,W])=>R?W(R):B()),P.reset()),R}function Ne(R,B,W,Y){const{scrollBehavior:we}=t;if(!Ua||!we)return Promise.resolve();const me=!W&&I$(Fw(R.fullPath,0))||(Y||!W)&&history.state&&history.state.scroll||null;return ql().then(()=>we(R,B,me)).then(b=>b&&w$(b)).catch(b=>U(b,R,B))}const He=R=>i.go(R);let at;const yt=new Set,xt={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:g,getRoutes:m,resolve:y,options:t,push:w,replace:I,go:He,back:()=>He(-1),forward:()=>He(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:A.add,isReady:he,install(R){const B=this;R.component("RouterLink",J$),R.component("RouterView",eH),R.config.globalProperties.$router=B,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>ee(l)}),Ua&&!at&&l.value===gs&&(at=!0,w(i.location).catch(we=>{}));const W={};for(const we in gs)Object.defineProperty(W,we,{get:()=>l.value[we],enumerable:!0});R.provide(km,B),R.provide(j0,yA(W)),R.provide(z_,l);const Y=R.unmount;yt.add(R),R.unmount=function(){yt.delete(R),yt.size<1&&(c=gs,V&&V(),V=null,l.value=gs,at=!1,$=!1),Y()}}};function ut(R){return R.reduce((B,W)=>B.then(()=>k(W)),Promise.resolve())}return xt}function nH(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Pl(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Pl(c,l))||i.push(l))}return[n,r,i]}function jO(){return Xn(km)}function Ra(){return Xn(j0)}const rH=["src"],iH=Yt({__name:"menuBar.vapor",async setup(t){let e,n;const r=Ra(),i=([e,n]=Gr(()=>lo()),e=await e,n(),e);return(s,o)=>{const a=is("router-link");return M(),H("header",null,[v("nav",null,[Te(a,{to:{name:"Home"},class:"btn",icon:"",current:ee(r).name=="Home"},{default:bt(()=>[ce(" home ")]),_:1},8,["current"]),Te(a,{to:{name:"loginScreen"},current:ee(r).name=="loginScreen",class:"btn"},{default:bt(()=>[ce(" account ")]),_:1},8,["current"]),Te(a,{to:{name:"loginScreen"},current:ee(r).name=="loginScreen",class:"imgbtn"},{default:bt(()=>{var l,c;return[(l=ee(i))!=null&&l.photoURL?(M(),H("img",{key:0,class:"bobble",src:(c=ee(i))==null?void 0:c.photoURL},null,8,rH)):_e("",!0)]}),_:1},8,["current"])])])}}}),ls=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},sH=ls(iH,[["__scopeId","data-v-5ceb0c48"]]),oH=Yt({__name:"App",setup(t){const e=Ra();return(n,r)=>{const i=is("RouterView");return M(),H(fe,null,[(M(),dt(Wb,null,{default:bt(()=>[Te(sH)]),_:1})),(M(),dt(Wb,null,{default:bt(()=>[(M(),dt(i,{key:ee(e).fullPath}))]),_:1}))],64)}}}),WO=fC({apiKey:"AIzaSyAnOiG77O1ukT9C2x8u1VbMLw7For9C_3w",authDomain:"auth.odinn.nl",databaseURL:"https://bingo-50cec-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bingo-50cec",storageBucket:"bingo-50cec.appspot.com",messagingSenderId:"866066986693",appId:"1:866066986693:web:de513df8434d232b0562ac",measurementId:"G-8F3EECYHQ0"}),Ue=n7(WO);function qO(t){return Dv()?(sA(t),!0):!1}function Hu(t){return typeof t=="function"?t():ee(t)}const GO=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const aH=t=>t!=null,lH=()=>{};function KO(t){return t||Ea()}function cH(...t){if(t.length!==1)return dx(...t);const e=t[0];return typeof e=="function"?$v(wA(()=>({get:e,set:lH}))):ie(e)}function uH(t,e){KO(e)&&lh(t,e)}function hH(t,e=!0,n){KO()?ah(t,n):e?t():ql(t)}function YO(t){var e;const n=Hu(t);return(e=n==null?void 0:n.$el)!=null?e:n}const dH=GO?window:void 0,JO=GO?window.document:void 0;function fH(){const t=ie(!1),e=Ea();return e&&ah(()=>{t.value=!0},e),t}function pH(t){const e=fH();return pt(()=>(e.value,!!t()))}function mH(t,e,n={}){const{window:r=dH,...i}=n;let s;const o=pH(()=>r&&"MutationObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},l=pt(()=>{const d=Hu(t),f=(Array.isArray(d)?d:[d]).map(YO).filter(aH);return new Set(f)}),c=Gi(()=>l.value,d=>{a(),o.value&&r&&d.size&&(s=new MutationObserver(e),d.forEach(f=>s.observe(f,i)))},{immediate:!0,flush:"post"}),u=()=>s==null?void 0:s.takeRecords(),h=()=>{a(),c()};return qO(h),{isSupported:o,stop:h,takeRecords:u}}function Lh(t=null,e={}){var n,r,i;const{document:s=JO,restoreOnUnmount:o=h=>h}=e,a=(n=s==null?void 0:s.title)!=null?n:"",l=cH((r=t??(s==null?void 0:s.title))!=null?r:null),c=t&&typeof t=="function";function u(h){if(!("titleTemplate"in e))return h;const d=e.titleTemplate||"%s";return typeof d=="function"?d(h):Hu(d).replace(/%s/g,h)}return Gi(l,(h,d)=>{h!==d&&s&&(s.title=u(typeof h=="string"?h:""))},{immediate:!0}),e.observe&&!e.titleTemplate&&s&&!c&&mH((i=s.head)==null?void 0:i.querySelector("title"),()=>{s&&s.title!==l.value&&(l.value=u(s.title))},{childList:!0}),uH(()=>{if(o){const h=o(a,l.value||"");h!=null&&s&&(s.title=h)}}),l}const gH=v("h1",{class:"font-size-H"},[ce("Bingo "),v("em",null,"Bongo")],-1),yH=v("h2",{class:"font-size-L"},"Simplifying OSRS Clan Bingos",-1),_H={class:"col-2"},vH={class:"ghost-board"},bH=v("h2",null,"No more spreadsheets",-1),EH=v("p",null," You know how annoying it is to keep track of scores during clan bingos, right? Yeah, it's a pain. ",-1),TH=v("p",null," No more dealing with spreadsheets or scribbling down scores - Bingo Bongo has got my back on that front. It's like having a reliable sidekick for our clan events, making everything run smoothly and keeping the stress levels down. ",-1),wH=v("div",null,null,-1),SH=Yt({__name:"home.vapor",setup(t){const e=Lh();e.value="Bingo Bongo - an osrs bingo app";const n=ie(40963),r=new Set,i=s=>{for(;r.size<3;)r.add(Math.floor(Math.random()*9)+1);return r.has(s)?"var(--secondary)":"var(--primary)"};return(s,o)=>{const a=is("router-link");return M(),H(fe,null,[gH,yH,v("div",_H,[v("div",vH,[(M(),H(fe,null,vt(9,l=>v("div",{class:"tile",key:l+"tile",style:tr({"--rotate":Math.random()*6-3+"deg",backgroundColor:i(l)})},null,4)),64))]),v("div",null,[bH,EH,TH,Ht(v("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>n.value=l)},null,512),[[wr,n.value]]),Te(a,{class:"btn",big:"",submit:"",to:{name:"viewBoard",params:{boardUUID:n.value}}},{default:bt(()=>[ce(" Go to the event! ")]),_:1},8,["to"])])]),wH],64)}}});var QO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function XO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZO={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(QO,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var P=["th","st","nd","rd"],A=D%100;return"["+D+(P[(A-20)%10]||P[A]||P[0])+"]"}},T=function(D,P,A){var $=String(D);return!$||$.length>=P?D:""+Array(P+1-$.length).join(A)+D},w={s:T,z:function(D){var P=-D.utcOffset(),A=Math.abs(P),$=Math.floor(A/60),U=A%60;return(P<=0?"+":"-")+T($,2,"0")+":"+T(U,2,"0")},m:function D(P,A){if(P.date()<A.date())return-D(A,P);var $=12*(A.year()-P.year())+(A.month()-P.month()),U=P.clone().add($,h),he=A-U<0,be=P.clone().add($+(he?-1:1),h);return+(-($+(A-U)/(he?U-be:be-U))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:h,y:f,w:u,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},I="en",C={};C[I]=_;var x="$isDayjsObject",N=function(D){return D instanceof z||!(!D||!D[x])},k=function D(P,A,$){var U;if(!P)return I;if(typeof P=="string"){var he=P.toLowerCase();C[he]&&(U=he),A&&(C[he]=A,U=he);var be=P.split("-");if(!U&&be.length>1)return D(be[0])}else{var Ne=P.name;C[Ne]=P,U=Ne}return!$&&U&&(I=U),U||!$&&I},j=function(D,P){if(N(D))return D.clone();var A=typeof P=="object"?P:{};return A.date=D,A.args=arguments,new z(A)},K=w;K.l=k,K.i=N,K.w=function(D,P){return j(D,{locale:P.$L,utc:P.$u,x:P.$x,$offset:P.$offset})};var z=function(){function D(A){this.$L=k(A.locale,null,!0),this.parse(A),this.$x=this.$x||A.x||{},this[x]=!0}var P=D.prototype;return P.parse=function(A){this.$d=function($){var U=$.date,he=$.utc;if(U===null)return new Date(NaN);if(K.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var be=U.match(g);if(be){var Ne=be[2]-1||0,He=(be[7]||"0").substring(0,3);return he?new Date(Date.UTC(be[1],Ne,be[3]||1,be[4]||0,be[5]||0,be[6]||0,He)):new Date(be[1],Ne,be[3]||1,be[4]||0,be[5]||0,be[6]||0,He)}}return new Date(U)}(A),this.init()},P.init=function(){var A=this.$d;this.$y=A.getFullYear(),this.$M=A.getMonth(),this.$D=A.getDate(),this.$W=A.getDay(),this.$H=A.getHours(),this.$m=A.getMinutes(),this.$s=A.getSeconds(),this.$ms=A.getMilliseconds()},P.$utils=function(){return K},P.isValid=function(){return this.$d.toString()!==m},P.isSame=function(A,$){var U=j(A);return this.startOf($)<=U&&U<=this.endOf($)},P.isAfter=function(A,$){return j(A)<this.startOf($)},P.isBefore=function(A,$){return this.endOf($)<j(A)},P.$g=function(A,$,U){return K.u(A)?this[$]:this.set(U,A)},P.unix=function(){return Math.floor(this.valueOf()/1e3)},P.valueOf=function(){return this.$d.getTime()},P.startOf=function(A,$){var U=this,he=!!K.u($)||$,be=K.p(A),Ne=function(W,Y){var we=K.w(U.$u?Date.UTC(U.$y,Y,W):new Date(U.$y,Y,W),U);return he?we:we.endOf(c)},He=function(W,Y){return K.w(U.toDate()[W].apply(U.toDate("s"),(he?[0,0,0,0]:[23,59,59,999]).slice(Y)),U)},at=this.$W,yt=this.$M,xt=this.$D,ut="set"+(this.$u?"UTC":"");switch(be){case f:return he?Ne(1,0):Ne(31,11);case h:return he?Ne(1,yt):Ne(0,yt+1);case u:var R=this.$locale().weekStart||0,B=(at<R?at+7:at)-R;return Ne(he?xt-B:xt+(6-B),yt);case c:case p:return He(ut+"Hours",0);case l:return He(ut+"Minutes",1);case a:return He(ut+"Seconds",2);case o:return He(ut+"Milliseconds",3);default:return this.clone()}},P.endOf=function(A){return this.startOf(A,!1)},P.$set=function(A,$){var U,he=K.p(A),be="set"+(this.$u?"UTC":""),Ne=(U={},U[c]=be+"Date",U[p]=be+"Date",U[h]=be+"Month",U[f]=be+"FullYear",U[l]=be+"Hours",U[a]=be+"Minutes",U[o]=be+"Seconds",U[s]=be+"Milliseconds",U)[he],He=he===c?this.$D+($-this.$W):$;if(he===h||he===f){var at=this.clone().set(p,1);at.$d[Ne](He),at.init(),this.$d=at.set(p,Math.min(this.$D,at.daysInMonth())).$d}else Ne&&this.$d[Ne](He);return this.init(),this},P.set=function(A,$){return this.clone().$set(A,$)},P.get=function(A){return this[K.p(A)]()},P.add=function(A,$){var U,he=this;A=Number(A);var be=K.p($),Ne=function(yt){var xt=j(he);return K.w(xt.date(xt.date()+Math.round(yt*A)),he)};if(be===h)return this.set(h,this.$M+A);if(be===f)return this.set(f,this.$y+A);if(be===c)return Ne(1);if(be===u)return Ne(7);var He=(U={},U[a]=r,U[l]=i,U[o]=n,U)[be]||1,at=this.$d.getTime()+A*He;return K.w(at,this)},P.subtract=function(A,$){return this.add(-1*A,$)},P.format=function(A){var $=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var he=A||"YYYY-MM-DDTHH:mm:ssZ",be=K.z(this),Ne=this.$H,He=this.$m,at=this.$M,yt=U.weekdays,xt=U.months,ut=U.meridiem,R=function(Y,we,me,b){return Y&&(Y[we]||Y($,he))||me[we].slice(0,b)},B=function(Y){return K.s(Ne%12||12,Y,"0")},W=ut||function(Y,we,me){var b=Y<12?"AM":"PM";return me?b.toLowerCase():b};return he.replace(y,function(Y,we){return we||function(me){switch(me){case"YY":return String($.$y).slice(-2);case"YYYY":return K.s($.$y,4,"0");case"M":return at+1;case"MM":return K.s(at+1,2,"0");case"MMM":return R(U.monthsShort,at,xt,3);case"MMMM":return R(xt,at);case"D":return $.$D;case"DD":return K.s($.$D,2,"0");case"d":return String($.$W);case"dd":return R(U.weekdaysMin,$.$W,yt,2);case"ddd":return R(U.weekdaysShort,$.$W,yt,3);case"dddd":return yt[$.$W];case"H":return String(Ne);case"HH":return K.s(Ne,2,"0");case"h":return B(1);case"hh":return B(2);case"a":return W(Ne,He,!0);case"A":return W(Ne,He,!1);case"m":return String(He);case"mm":return K.s(He,2,"0");case"s":return String($.$s);case"ss":return K.s($.$s,2,"0");case"SSS":return K.s($.$ms,3,"0");case"Z":return be}return null}(Y)||be.replace(":","")})},P.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},P.diff=function(A,$,U){var he,be=this,Ne=K.p($),He=j(A),at=(He.utcOffset()-this.utcOffset())*r,yt=this-He,xt=function(){return K.m(be,He)};switch(Ne){case f:he=xt()/12;break;case h:he=xt();break;case d:he=xt()/3;break;case u:he=(yt-at)/6048e5;break;case c:he=(yt-at)/864e5;break;case l:he=yt/i;break;case a:he=yt/r;break;case o:he=yt/n;break;default:he=yt}return U?he:K.a(he)},P.daysInMonth=function(){return this.endOf(h).$D},P.$locale=function(){return C[this.$L]},P.locale=function(A,$){if(!A)return this.$L;var U=this.clone(),he=k(A,$,!0);return he&&(U.$L=he),U},P.clone=function(){return K.w(this.$d,this)},P.toDate=function(){return new Date(this.valueOf())},P.toJSON=function(){return this.isValid()?this.toISOString():null},P.toISOString=function(){return this.$d.toISOString()},P.toString=function(){return this.$d.toUTCString()},D}(),V=z.prototype;return j.prototype=V,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",p]].forEach(function(D){V[D[1]]=function(P){return this.$g(P,D[0],D[1])}}),j.extend=function(D,P){return D.$i||(D(P,z,j),D.$i=!0),j},j.locale=k,j.isDayjs=N,j.unix=function(D){return j(1e3*D)},j.en=C[I],j.Ls=C,j.p={},j})})(ZO);var IH=ZO.exports;const eN=XO(IH);var tN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(QO,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(m){return(m=+m)+(m>68?1900:2e3)},c=function(m){return function(g){this[m]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),_=60*y[1]+(+y[2]||0);return _===0?0:y[0]==="+"?-_:_}(m)}],h=function(m){var g=a[m];return g&&(g.indexOf?g:g.s.concat(g.f))},d=function(m,g){var y,_=a.meridiem;if(_){for(var T=1;T<=24;T+=1)if(m.indexOf(_(T,0,g))>-1){y=T>12;break}}else y=m===(g?"pm":"PM");return y},f={A:[o,function(m){this.afternoon=d(m,!1)}],a:[o,function(m){this.afternoon=d(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[i,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[i,c("day")],Do:[o,function(m){var g=a.ordinal,y=m.match(/\d+/);if(this.day=y[0],g)for(var _=1;_<=31;_+=1)g(_).replace(/\[|\]/g,"")===m&&(this.day=_)}],M:[s,c("month")],MM:[i,c("month")],MMM:[o,function(m){var g=h("months"),y=(h("monthsShort")||g.map(function(_){return _.slice(0,3)})).indexOf(m)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(m){var g=h("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(m){this.year=l(m)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function p(m){var g,y;g=m,y=a&&a.formats;for(var _=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(k,j,K){var z=K&&K.toUpperCase();return j||y[K]||n[K]||y[z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(V,D,P){return D||P.slice(1)})})).match(r),T=_.length,w=0;w<T;w+=1){var I=_[w],C=f[I],x=C&&C[0],N=C&&C[1];_[w]=N?{regex:x,parser:N}:I.replace(/^\[|\]$/g,"")}return function(k){for(var j={},K=0,z=0;K<T;K+=1){var V=_[K];if(typeof V=="string")z+=V.length;else{var D=V.regex,P=V.parser,A=k.slice(z),$=D.exec(A)[0];P.call(j,$),k=k.replace($,"")}}return function(U){var he=U.afternoon;if(he!==void 0){var be=U.hours;he?be<12&&(U.hours+=12):be===12&&(U.hours=0),delete U.afternoon}}(j),j}}return function(m,g,y){y.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var _=g.prototype,T=_.parse;_.parse=function(w){var I=w.date,C=w.utc,x=w.args;this.$u=C;var N=x[1];if(typeof N=="string"){var k=x[2]===!0,j=x[3]===!0,K=k||j,z=x[2];j&&(z=x[2]),a=this.$locale(),!k&&z&&(a=y.Ls[z]),this.$d=function(A,$,U){try{if(["x","X"].indexOf($)>-1)return new Date(($==="X"?1e3:1)*A);var he=p($)(A),be=he.year,Ne=he.month,He=he.day,at=he.hours,yt=he.minutes,xt=he.seconds,ut=he.milliseconds,R=he.zone,B=new Date,W=He||(be||Ne?1:B.getDate()),Y=be||B.getFullYear(),we=0;be&&!Ne||(we=Ne>0?Ne-1:B.getMonth());var me=at||0,b=yt||0,S=xt||0,O=ut||0;return R?new Date(Date.UTC(Y,we,W,me,b,S,O+60*R.offset*1e3)):U?new Date(Date.UTC(Y,we,W,me,b,S,O)):new Date(Y,we,W,me,b,S,O)}catch{return new Date("")}}(I,N,C),this.init(),z&&z!==!0&&(this.$L=this.locale(z).$L),K&&I!=this.format(N)&&(this.$d=new Date("")),a={}}else if(N instanceof Array)for(var V=N.length,D=1;D<=V;D+=1){x[1]=N[D-1];var P=y.apply(this,x);if(P.isValid()){this.$d=P.$d,this.$L=P.$L,this.init();break}D===V&&(this.$d=new Date(""))}else T.call(this,w)}}})})(tN);var AH=tN.exports;const CH=XO(AH);var RH={},Xw={defaultUserAgent:`WiseOldMan JS Client v${RH.npm_package_version}`,baseAPIUrl:"https://api.wiseoldman.net/v2"};function kH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ys(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}eN.extend(CH);function j_(t,e){return Array.isArray(t)?t.map(n=>j_(n,e)):t!==null&&typeof t=="object"?Object.fromEntries(Object.keys(t).map(n=>[n,j_(t[n],e)])):e(t)}function OH(t){return!t||typeof t!="string"?!1:t.endsWith("Z")&&eN(t.slice(0,-1),"YYYY-MM-DDTHH:mm:ss.SSS",!0).isValid()}function NH(t){return j_(t,e=>OH(e)?new Date(e):e)}function Zw(t,e,n){if(n){if(t===400)throw new MH(e,n.message,n.data);if(t===403)throw new PH(e,n.message);if(t===404)throw new xH(e,n.message);if(t===429)throw new DH(e,n.message);if(t===500)throw new LH(e,n.message)}}class MH extends Error{constructor(e,n,r){super(n),this.name="BadRequestError",this.resource=e,this.statusCode=400,this.data=r}}class PH extends Error{constructor(e,n){super(n),this.name="ForbiddenError",this.resource=e,this.statusCode=403}}class xH extends Error{constructor(e,n){super(n),this.name="NotFoundError",this.resource=e,this.statusCode=404}}class DH extends Error{constructor(e,n){super(n),this.name="RateLimitError",this.resource=e,this.statusCode=429}}class LH extends Error{constructor(e,n){super(n),this.name="InternalServerError",this.resource=e,this.statusCode=500}}class fo{constructor(e,n){this.baseUrl=n,this.headers=Object.assign({Accept:"application/json","Content-Type":"application/json"},e)}buildParams(e){var n=kH(e,[]);const r=new URLSearchParams;Object.keys(n).filter(s=>n[s]!==void 0).forEach(s=>r.set(s,n[s]));const i=r.toString();return i?`?${i}`:""}fetch({method:e,path:n,body:r,params:i}){return ys(this,void 0,void 0,function*(){const s={method:e,body:void 0,headers:this.headers};let o="";return r&&(s.body=JSON.stringify(r)),i&&(o=this.buildParams(i)),yield fetch(this.baseUrl+n+o,s)})}request({method:e,path:n,body:r,params:i}){return ys(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.json();if(s.ok)return NH(o);Zw(s.status,n,o)})}requestText({method:e,path:n,body:r,params:i}){return ys(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.text();if(s.ok)return o;Zw(s.status,n,JSON.parse(o))})}postRequest(e,n){return ys(this,void 0,void 0,function*(){return yield this.request({method:"POST",path:e,body:n||{}})})}putRequest(e,n){return ys(this,void 0,void 0,function*(){return yield this.request({method:"PUT",path:e,body:n||{}})})}deleteRequest(e,n){return ys(this,void 0,void 0,function*(){return yield this.request({method:"DELETE",path:e,body:n||{}})})}getRequest(e,n){return ys(this,void 0,void 0,function*(){return yield this.request({method:"GET",path:e,params:n})})}getText(e,n){return ys(this,void 0,void 0,function*(){return yield this.requestText({method:"GET",path:e,params:n})})}}class VH extends fo{getDeltaLeaderboard(e){return this.getRequest("/deltas/leaderboard",e)}}class FH extends fo{searchGroups(e,n){return this.getRequest("/groups",Object.assign({name:e},n))}getGroupDetails(e){return this.getRequest(`/groups/${e}`)}createGroup(e){return this.postRequest("/groups",e)}editGroup(e,n,r){return this.putRequest(`/groups/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteGroup(e,n){return this.deleteRequest(`/groups/${e}`,{verificationCode:n})}addMembers(e,n,r){return this.postRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}removeMembers(e,n,r){return this.deleteRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}changeRole(e,n,r){return this.putRequest(`/groups/${e}/role`,Object.assign(Object.assign({},n),{verificationCode:r}))}updateAll(e,n){return this.postRequest(`/groups/${e}/update-all`,{verificationCode:n})}getGroupCompetitions(e,n){return this.getRequest(`/groups/${e}/competitions`,Object.assign({},n))}getGroupGains(e,n,r){return this.getRequest(`/groups/${e}/gained`,Object.assign(Object.assign({},r),n))}getGroupAchievements(e,n){return this.getRequest(`/groups/${e}/achievements`,Object.assign({},n))}getGroupRecords(e,n,r){return this.getRequest(`/groups/${e}/records`,Object.assign(Object.assign({},r),n))}getGroupHiscores(e,n,r){return this.getRequest(`/groups/${e}/hiscores`,Object.assign(Object.assign({},r),{metric:n}))}getGroupNameChanges(e,n){return this.getRequest(`/groups/${e}/name-changes`,Object.assign({},n))}getGroupStatistics(e){return this.getRequest(`/groups/${e}/statistics`)}getGroupActivity(e,n){return this.getRequest(`/groups/${e}/activity`,Object.assign({},n))}getMembersCSV(e){return this.getText(`/groups/${e}/csv`)}}class UH extends fo{searchPlayers(e,n){return this.getRequest("/players/search",Object.assign({username:e},n))}updatePlayer(e){return this.postRequest(`/players/${e}`)}assertPlayerType(e){return this.postRequest(`/players/${e}/assert-type`)}getPlayerDetails(e){return this.getRequest(`/players/${e}`)}getPlayerDetailsById(e){return this.getRequest(`/players/id/${e}`)}getPlayerAchievements(e){return this.getRequest(`/players/${e}/achievements`)}getPlayerAchievementProgress(e){return this.getRequest(`/players/${e}/achievements/progress`)}getPlayerCompetitions(e,n,r){return this.getRequest(`/players/${e}/competitions`,Object.assign(Object.assign({},n),r))}getPlayerCompetitionStandings(e,n){return this.getRequest(`/players/${e}/competitions/standings`,n)}getPlayerGroups(e,n){return this.getRequest(`/players/${e}/groups`,n)}getPlayerGains(e,n){return this.getRequest(`/players/${e}/gained`,n)}getPlayerGainsAsArray(e,n){return this.getRequest(`/players/${e}/gained`,Object.assign(Object.assign({},n),{formatting:"array"}))}getPlayerRecords(e,n){return this.getRequest(`/players/${e}/records`,n)}getPlayerSnapshots(e,n,r){return this.getRequest(`/players/${e}/snapshots`,Object.assign(Object.assign({},n),r))}getPlayerSnapshotTimeline(e,n,r){return this.getRequest(`/players/${e}/snapshots/timeline`,Object.assign(Object.assign({},r),{metric:n}))}getPlayerNames(e){return this.getRequest(`/players/${e}/names`)}getPlayerArchives(e){return this.getRequest(`/players/${e}/archives`)}}class BH extends fo{getRecordLeaderboard(e){return this.getRequest("/records/leaderboard",e)}}const _t={OVERALL:"overall",ATTACK:"attack",DEFENCE:"defence",STRENGTH:"strength",HITPOINTS:"hitpoints",RANGED:"ranged",PRAYER:"prayer",MAGIC:"magic",COOKING:"cooking",WOODCUTTING:"woodcutting",FLETCHING:"fletching",FISHING:"fishing",FIREMAKING:"firemaking",CRAFTING:"crafting",SMITHING:"smithing",MINING:"mining",HERBLORE:"herblore",AGILITY:"agility",THIEVING:"thieving",SLAYER:"slayer",FARMING:"farming",RUNECRAFTING:"runecrafting",HUNTER:"hunter",CONSTRUCTION:"construction"},mn={LEAGUE_POINTS:"league_points",BOUNTY_HUNTER_HUNTER:"bounty_hunter_hunter",BOUNTY_HUNTER_ROGUE:"bounty_hunter_rogue",CLUE_SCROLLS_ALL:"clue_scrolls_all",CLUE_SCROLLS_BEGINNER:"clue_scrolls_beginner",CLUE_SCROLLS_EASY:"clue_scrolls_easy",CLUE_SCROLLS_MEDIUM:"clue_scrolls_medium",CLUE_SCROLLS_HARD:"clue_scrolls_hard",CLUE_SCROLLS_ELITE:"clue_scrolls_elite",CLUE_SCROLLS_MASTER:"clue_scrolls_master",LAST_MAN_STANDING:"last_man_standing",PVP_ARENA:"pvp_arena",SOUL_WARS_ZEAL:"soul_wars_zeal",GUARDIANS_OF_THE_RIFT:"guardians_of_the_rift",COLOSSEUM_GLORY:"colosseum_glory"},ge={ABYSSAL_SIRE:"abyssal_sire",ALCHEMICAL_HYDRA:"alchemical_hydra",ARTIO:"artio",BARROWS_CHESTS:"barrows_chests",BRYOPHYTA:"bryophyta",CALLISTO:"callisto",CALVARION:"calvarion",CERBERUS:"cerberus",CHAMBERS_OF_XERIC:"chambers_of_xeric",CHAMBERS_OF_XERIC_CM:"chambers_of_xeric_challenge_mode",CHAOS_ELEMENTAL:"chaos_elemental",CHAOS_FANATIC:"chaos_fanatic",COMMANDER_ZILYANA:"commander_zilyana",CORPOREAL_BEAST:"corporeal_beast",CRAZY_ARCHAEOLOGIST:"crazy_archaeologist",DAGANNOTH_PRIME:"dagannoth_prime",DAGANNOTH_REX:"dagannoth_rex",DAGANNOTH_SUPREME:"dagannoth_supreme",DERANGED_ARCHAEOLOGIST:"deranged_archaeologist",DUKE_SUCELLUS:"duke_sucellus",GENERAL_GRAARDOR:"general_graardor",GIANT_MOLE:"giant_mole",GROTESQUE_GUARDIANS:"grotesque_guardians",HESPORI:"hespori",KALPHITE_QUEEN:"kalphite_queen",KING_BLACK_DRAGON:"king_black_dragon",KRAKEN:"kraken",KREEARRA:"kreearra",KRIL_TSUTSAROTH:"kril_tsutsaroth",LUNAR_CHESTS:"lunar_chests",MIMIC:"mimic",NEX:"nex",NIGHTMARE:"nightmare",PHOSANIS_NIGHTMARE:"phosanis_nightmare",OBOR:"obor",PHANTOM_MUSPAH:"phantom_muspah",SARACHNIS:"sarachnis",SCORPIA:"scorpia",SCURRIUS:"scurrius",SKOTIZO:"skotizo",SOL_HEREDIT:"sol_heredit",SPINDEL:"spindel",TEMPOROSS:"tempoross",THE_GAUNTLET:"the_gauntlet",THE_CORRUPTED_GAUNTLET:"the_corrupted_gauntlet",THE_LEVIATHAN:"the_leviathan",THE_WHISPERER:"the_whisperer",THEATRE_OF_BLOOD:"theatre_of_blood",THEATRE_OF_BLOOD_HARD_MODE:"theatre_of_blood_hard_mode",THERMONUCLEAR_SMOKE_DEVIL:"thermonuclear_smoke_devil",TOMBS_OF_AMASCUT:"tombs_of_amascut",TOMBS_OF_AMASCUT_EXPERT:"tombs_of_amascut_expert",TZKAL_ZUK:"tzkal_zuk",TZTOK_JAD:"tztok_jad",VARDORVIS:"vardorvis",VENENATIS:"venenatis",VETION:"vetion",VORKATH:"vorkath",WINTERTODT:"wintertodt",ZALCANO:"zalcano",ZULRAH:"zulrah"},Qf={EHP:"ehp",EHB:"ehb"},W_=Object.assign(Object.assign(Object.assign(Object.assign({},_t),mn),ge),Qf),E={ACHIEVER:"achiever",ADAMANT:"adamant",ADEPT:"adept",ADMINISTRATOR:"administrator",ADMIRAL:"admiral",ADVENTURER:"adventurer",AIR:"air",ANCHOR:"anchor",APOTHECARY:"apothecary",ARCHER:"archer",ARMADYLEAN:"armadylean",ARTILLERY:"artillery",ARTISAN:"artisan",ASGARNIAN:"asgarnian",ASSASSIN:"assassin",ASSISTANT:"assistant",ASTRAL:"astral",ATHLETE:"athlete",ATTACKER:"attacker",BANDIT:"bandit",BANDOSIAN:"bandosian",BARBARIAN:"barbarian",BATTLEMAGE:"battlemage",BEAST:"beast",BERSERKER:"berserker",BLISTERWOOD:"blisterwood",BLOOD:"blood",BLUE:"blue",BOB:"bob",BODY:"body",BRASSICAN:"brassican",BRAWLER:"brawler",BRIGADIER:"brigadier",BRIGAND:"brigand",BRONZE:"bronze",BRUISER:"bruiser",BULWARK:"bulwark",BURGLAR:"burglar",BURNT:"burnt",CADET:"cadet",CAPTAIN:"captain",CARRY:"carry",CHAMPION:"champion",CHAOS:"chaos",CLERIC:"cleric",COLLECTOR:"collector",COLONEL:"colonel",COMMANDER:"commander",COMPETITOR:"competitor",COMPLETIONIST:"completionist",CONSTRUCTOR:"constructor",COOK:"cook",COORDINATOR:"coordinator",CORPORAL:"corporal",COSMIC:"cosmic",COUNCILLOR:"councillor",CRAFTER:"crafter",CREW:"crew",CRUSADER:"crusader",CUTPURSE:"cutpurse",DEATH:"death",DEFENDER:"defender",DEFILER:"defiler",DEPUTY_OWNER:"deputy_owner",DESTROYER:"destroyer",DIAMOND:"diamond",DISEASED:"diseased",DOCTOR:"doctor",DOGSBODY:"dogsbody",DRAGON:"dragon",DRAGONSTONE:"dragonstone",DRUID:"druid",DUELLIST:"duellist",EARTH:"earth",ELITE:"elite",EMERALD:"emerald",ENFORCER:"enforcer",EPIC:"epic",EXECUTIVE:"executive",EXPERT:"expert",EXPLORER:"explorer",FARMER:"farmer",FEEDER:"feeder",FIGHTER:"fighter",FIRE:"fire",FIREMAKER:"firemaker",FIRESTARTER:"firestarter",FISHER:"fisher",FLETCHER:"fletcher",FORAGER:"forager",FREMENNIK:"fremennik",GAMER:"gamer",GATHERER:"gatherer",GENERAL:"general",GNOME_CHILD:"gnome_child",GNOME_ELDER:"gnome_elder",GOBLIN:"goblin",GOLD:"gold",GOON:"goon",GREEN:"green",GREY:"grey",GUARDIAN:"guardian",GUTHIXIAN:"guthixian",HARPOON:"harpoon",HEALER:"healer",HELLCAT:"hellcat",HELPER:"helper",HERBOLOGIST:"herbologist",HERO:"hero",HOLY:"holy",HOARDER:"hoarder",HUNTER:"hunter",IGNITOR:"ignitor",ILLUSIONIST:"illusionist",IMP:"imp",INFANTRY:"infantry",INQUISITOR:"inquisitor",IRON:"iron",JADE:"jade",JUSTICIAR:"justiciar",KANDARIN:"kandarin",KARAMJAN:"karamjan",KHARIDIAN:"kharidian",KITTEN:"kitten",KNIGHT:"knight",LABOURER:"labourer",LAW:"law",LEADER:"leader",LEARNER:"learner",LEGACY:"legacy",LEGEND:"legend",LEGIONNAIRE:"legionnaire",LIEUTENANT:"lieutenant",LOOTER:"looter",LUMBERJACK:"lumberjack",MAGIC:"magic",MAGICIAN:"magician",MAJOR:"major",MAPLE:"maple",MARSHAL:"marshal",MASTER:"master",MAXED:"maxed",MEDIATOR:"mediator",MEDIC:"medic",MENTOR:"mentor",MEMBER:"member",MERCHANT:"merchant",MIND:"mind",MINER:"miner",MINION:"minion",MISTHALINIAN:"misthalinian",MITHRIL:"mithril",MODERATOR:"moderator",MONARCH:"monarch",MORYTANIAN:"morytanian",MYSTIC:"mystic",MYTH:"myth",NATURAL:"natural",NATURE:"nature",NECROMANCER:"necromancer",NINJA:"ninja",NOBLE:"noble",NOVICE:"novice",NURSE:"nurse",OAK:"oak",OFFICER:"officer",ONYX:"onyx",OPAL:"opal",ORACLE:"oracle",ORANGE:"orange",OWNER:"owner",PAGE:"page",PALADIN:"paladin",PAWN:"pawn",PILGRIM:"pilgrim",PINE:"pine",PINK:"pink",PREFECT:"prefect",PRIEST:"priest",PRIVATE:"private",PRODIGY:"prodigy",PROSELYTE:"proselyte",PROSPECTOR:"prospector",PROTECTOR:"protector",PURE:"pure",PURPLE:"purple",PYROMANCER:"pyromancer",QUESTER:"quester",RACER:"racer",RAIDER:"raider",RANGER:"ranger",RECORD_CHASER:"record_chaser",RECRUIT:"recruit",RECRUITER:"recruiter",RED_TOPAZ:"red_topaz",RED:"red",ROGUE:"rogue",RUBY:"ruby",RUNE:"rune",RUNECRAFTER:"runecrafter",SAGE:"sage",SAPPHIRE:"sapphire",SARADOMINIST:"saradominist",SAVIOUR:"saviour",SCAVENGER:"scavenger",SCHOLAR:"scholar",SCOURGE:"scourge",SCOUT:"scout",SCRIBE:"scribe",SEER:"seer",SENATOR:"senator",SENTRY:"sentry",SERENIST:"serenist",SERGEANT:"sergeant",SHAMAN:"shaman",SHERIFF:"sheriff",SHORT_GREEN_GUY:"short_green_guy",SKILLER:"skiller",SKULLED:"skulled",SLAYER:"slayer",SMITER:"smiter",SMITH:"smith",SMUGGLER:"smuggler",SNIPER:"sniper",SOUL:"soul",SPECIALIST:"specialist",SPEED_RUNNER:"speed_runner",SPELLCASTER:"spellcaster",SQUIRE:"squire",STAFF:"staff",STEEL:"steel",STRIDER:"strider",STRIKER:"striker",SUMMONER:"summoner",SUPERIOR:"superior",SUPERVISOR:"supervisor",TEACHER:"teacher",TEMPLAR:"templar",THERAPIST:"therapist",THIEF:"thief",TIRANNIAN:"tirannian",TRIALIST:"trialist",TRICKSTER:"trickster",TZKAL:"tzkal",TZTOK:"tztok",UNHOLY:"unholy",VAGRANT:"vagrant",VANGUARD:"vanguard",WALKER:"walker",WANDERER:"wanderer",WARDEN:"warden",WARLOCK:"warlock",WARRIOR:"warrior",WATER:"water",WILD:"wild",WILLOW:"willow",WILY:"wily",WINTUMBER:"wintumber",WITCH:"witch",WIZARD:"wizard",WORKER:"worker",WRATH:"wrath",XERICIAN:"xerician",YELLOW:"yellow",YEW:"yew",ZAMORAKIAN:"zamorakian",ZAROSIAN:"zarosian",ZEALOT:"zealot",ZENYTE:"zenyte"};var hl;(function(t){t.UPCOMING="upcoming",t.ONGOING="ongoing",t.FINISHED="finished"})(hl||(hl={}));var eS;(function(t){t.TEAM="team",t.TEAMS="teams",t.PARTICIPANTS="participants"})(eS||(eS={}));hl.UPCOMING+"",hl.ONGOING+"",hl.FINISHED+"";Object.values(hl);function Vh(t,e){const n={};return Object.keys(t).forEach(r=>{const i=r;n[i]=e(t[i],i,t)}),n}const $H=[E.ADMINISTRATOR,E.OWNER,E.LEADER,E.DEPUTY_OWNER,E.MODERATOR];Vh({[E.ACHIEVER]:{name:"Achiever"},[E.ADAMANT]:{name:"Adamant"},[E.ADEPT]:{name:"Adept"},[E.ADMINISTRATOR]:{name:"Administrator"},[E.ADMIRAL]:{name:"Admiral"},[E.ADVENTURER]:{name:"Adventurer"},[E.AIR]:{name:"Air"},[E.ANCHOR]:{name:"Anchor"},[E.APOTHECARY]:{name:"Apothecary"},[E.ARCHER]:{name:"Archer"},[E.ARMADYLEAN]:{name:"Armadylean"},[E.ARTILLERY]:{name:"Artillery"},[E.ARTISAN]:{name:"Artisan"},[E.ASGARNIAN]:{name:"Asgarnian"},[E.ASSASSIN]:{name:"Assassin"},[E.ASSISTANT]:{name:"Assistant"},[E.ASTRAL]:{name:"Astral"},[E.ATHLETE]:{name:"Athlete"},[E.ATTACKER]:{name:"Attacker"},[E.BANDIT]:{name:"Bandit"},[E.BANDOSIAN]:{name:"Bandosian"},[E.BARBARIAN]:{name:"Barbarian"},[E.BATTLEMAGE]:{name:"Battlemage"},[E.BEAST]:{name:"Beast"},[E.BERSERKER]:{name:"Berserker"},[E.BLISTERWOOD]:{name:"Blisterwood"},[E.BLOOD]:{name:"Blood"},[E.BLUE]:{name:"Blue"},[E.BOB]:{name:"Bob"},[E.BODY]:{name:"Body"},[E.BRASSICAN]:{name:"Brassican"},[E.BRAWLER]:{name:"Brawler"},[E.BRIGADIER]:{name:"Brigadier"},[E.BRIGAND]:{name:"Brigand"},[E.BRONZE]:{name:"Bronze"},[E.BRUISER]:{name:"Bruiser"},[E.BULWARK]:{name:"Bulwark"},[E.BURGLAR]:{name:"Burglar"},[E.BURNT]:{name:"Burnt"},[E.CADET]:{name:"Cadet"},[E.CAPTAIN]:{name:"Captain"},[E.CARRY]:{name:"Carry"},[E.CHAMPION]:{name:"Champion"},[E.CHAOS]:{name:"Chaos"},[E.CLERIC]:{name:"Cleric"},[E.COLLECTOR]:{name:"Collector"},[E.COLONEL]:{name:"Colonel"},[E.COMMANDER]:{name:"Commander"},[E.COMPETITOR]:{name:"Competitor"},[E.COMPLETIONIST]:{name:"Completionist"},[E.CONSTRUCTOR]:{name:"Constructor"},[E.COOK]:{name:"Cook"},[E.COORDINATOR]:{name:"Coordinator"},[E.CORPORAL]:{name:"Corporal"},[E.COSMIC]:{name:"Cosmic"},[E.COUNCILLOR]:{name:"Councillor"},[E.CRAFTER]:{name:"Crafter"},[E.CREW]:{name:"Crew"},[E.CRUSADER]:{name:"Crusader"},[E.CUTPURSE]:{name:"Cutpurse"},[E.DEATH]:{name:"Death"},[E.DEFENDER]:{name:"Defender"},[E.DEFILER]:{name:"Defiler"},[E.DEPUTY_OWNER]:{name:"Deputy Owner"},[E.DESTROYER]:{name:"Destroyer"},[E.DIAMOND]:{name:"Diamond"},[E.DISEASED]:{name:"Diseased"},[E.DOCTOR]:{name:"Doctor"},[E.DOGSBODY]:{name:"Dogsbody"},[E.DRAGON]:{name:"Dragon"},[E.DRAGONSTONE]:{name:"Dragonstone"},[E.DRUID]:{name:"Druid"},[E.DUELLIST]:{name:"Duellist"},[E.EARTH]:{name:"Earth"},[E.ELITE]:{name:"Elite"},[E.EMERALD]:{name:"Emerald"},[E.ENFORCER]:{name:"Enforcer"},[E.EPIC]:{name:"Epic"},[E.EXECUTIVE]:{name:"Executive"},[E.EXPERT]:{name:"Expert"},[E.EXPLORER]:{name:"Explorer"},[E.FARMER]:{name:"Farmer"},[E.FEEDER]:{name:"Feeder"},[E.FIGHTER]:{name:"Fighter"},[E.FIRE]:{name:"Fire"},[E.FIREMAKER]:{name:"Firemaker"},[E.FIRESTARTER]:{name:"Firestarter"},[E.FISHER]:{name:"Fisher"},[E.FLETCHER]:{name:"Fletcher"},[E.FORAGER]:{name:"Forager"},[E.FREMENNIK]:{name:"Fremennik"},[E.GAMER]:{name:"Gamer"},[E.GATHERER]:{name:"Gatherer"},[E.GENERAL]:{name:"General"},[E.GNOME_CHILD]:{name:"Gnome Child"},[E.GNOME_ELDER]:{name:"Gnome Elder"},[E.GOBLIN]:{name:"Goblin"},[E.GOLD]:{name:"Gold"},[E.GOON]:{name:"Goon"},[E.GREEN]:{name:"Green"},[E.GREY]:{name:"Grey"},[E.GUARDIAN]:{name:"Guardian"},[E.GUTHIXIAN]:{name:"Guthixian"},[E.HARPOON]:{name:"Harpoon"},[E.HEALER]:{name:"Healer"},[E.HELLCAT]:{name:"Hellcat"},[E.HELPER]:{name:"Helper"},[E.HERBOLOGIST]:{name:"Herbologist"},[E.HERO]:{name:"Hero"},[E.HOLY]:{name:"Holy"},[E.HOARDER]:{name:"Hoarder"},[E.HUNTER]:{name:"Hunter"},[E.IGNITOR]:{name:"Ignitor"},[E.ILLUSIONIST]:{name:"Illusionist"},[E.IMP]:{name:"Imp"},[E.INFANTRY]:{name:"Infantry"},[E.INQUISITOR]:{name:"Inquisitor"},[E.IRON]:{name:"Iron"},[E.JADE]:{name:"Jade"},[E.JUSTICIAR]:{name:"Justiciar"},[E.KANDARIN]:{name:"Kandarin"},[E.KARAMJAN]:{name:"Karamjan"},[E.KHARIDIAN]:{name:"Kharidian"},[E.KITTEN]:{name:"Kitten"},[E.KNIGHT]:{name:"Knight"},[E.LABOURER]:{name:"Labourer"},[E.LAW]:{name:"Law"},[E.LEADER]:{name:"Leader"},[E.LEARNER]:{name:"Learner"},[E.LEGACY]:{name:"Legacy"},[E.LEGEND]:{name:"Legend"},[E.LEGIONNAIRE]:{name:"Legionnaire"},[E.LIEUTENANT]:{name:"Lieutenant"},[E.LOOTER]:{name:"Looter"},[E.LUMBERJACK]:{name:"Lumberjack"},[E.MAGIC]:{name:"Magic"},[E.MAGICIAN]:{name:"Magician"},[E.MAJOR]:{name:"Major"},[E.MAPLE]:{name:"Maple"},[E.MARSHAL]:{name:"Marshal"},[E.MASTER]:{name:"Master"},[E.MAXED]:{name:"Maxed"},[E.MEDIATOR]:{name:"Mediator"},[E.MEDIC]:{name:"Medic"},[E.MENTOR]:{name:"Mentor"},[E.MEMBER]:{name:"Member"},[E.MERCHANT]:{name:"Merchant"},[E.MIND]:{name:"Mind"},[E.MINER]:{name:"Miner"},[E.MINION]:{name:"Minion"},[E.MISTHALINIAN]:{name:"Misthalinian"},[E.MITHRIL]:{name:"Mithril"},[E.MODERATOR]:{name:"Moderator"},[E.MONARCH]:{name:"Monarch"},[E.MORYTANIAN]:{name:"Morytanian"},[E.MYSTIC]:{name:"Mystic"},[E.MYTH]:{name:"Myth"},[E.NATURAL]:{name:"Natural"},[E.NATURE]:{name:"Nature"},[E.NECROMANCER]:{name:"Necromancer"},[E.NINJA]:{name:"Ninja"},[E.NOBLE]:{name:"Noble"},[E.NOVICE]:{name:"Novice"},[E.NURSE]:{name:"Nurse"},[E.OAK]:{name:"Oak"},[E.OFFICER]:{name:"Officer"},[E.ONYX]:{name:"Onyx"},[E.OPAL]:{name:"Opal"},[E.ORACLE]:{name:"Oracle"},[E.ORANGE]:{name:"Orange"},[E.OWNER]:{name:"Owner"},[E.PAGE]:{name:"Page"},[E.PALADIN]:{name:"Paladin"},[E.PAWN]:{name:"Pawn"},[E.PILGRIM]:{name:"Pilgrim"},[E.PINE]:{name:"Pine"},[E.PINK]:{name:"Pink"},[E.PREFECT]:{name:"Prefect"},[E.PRIEST]:{name:"Priest"},[E.PRIVATE]:{name:"Private"},[E.PRODIGY]:{name:"Prodigy"},[E.PROSELYTE]:{name:"Proselyte"},[E.PROSPECTOR]:{name:"Prospector"},[E.PROTECTOR]:{name:"Protector"},[E.PURE]:{name:"Pure"},[E.PURPLE]:{name:"Purple"},[E.PYROMANCER]:{name:"Pyromancer"},[E.QUESTER]:{name:"Quester"},[E.RACER]:{name:"Racer"},[E.RAIDER]:{name:"Raider"},[E.RANGER]:{name:"Ranger"},[E.RECORD_CHASER]:{name:"Record-Chaser"},[E.RECRUIT]:{name:"Recruit"},[E.RECRUITER]:{name:"Recruiter"},[E.RED_TOPAZ]:{name:"Red Topaz"},[E.RED]:{name:"Red"},[E.ROGUE]:{name:"Rogue"},[E.RUBY]:{name:"Ruby"},[E.RUNE]:{name:"Rune"},[E.RUNECRAFTER]:{name:"Runecrafter"},[E.SAGE]:{name:"Sage"},[E.SAPPHIRE]:{name:"Sapphire"},[E.SARADOMINIST]:{name:"Saradominist"},[E.SAVIOUR]:{name:"Saviour"},[E.SCAVENGER]:{name:"Scavenger"},[E.SCHOLAR]:{name:"Scholar"},[E.SCOURGE]:{name:"Scourge"},[E.SCOUT]:{name:"Scout"},[E.SCRIBE]:{name:"Scribe"},[E.SEER]:{name:"Seer"},[E.SENATOR]:{name:"Senator"},[E.SENTRY]:{name:"Sentry"},[E.SERENIST]:{name:"Serenist"},[E.SERGEANT]:{name:"Sergeant"},[E.SHAMAN]:{name:"Shaman"},[E.SHERIFF]:{name:"Sheriff"},[E.SHORT_GREEN_GUY]:{name:"Short Green Guy"},[E.SKILLER]:{name:"Skiller"},[E.SKULLED]:{name:"Skulled"},[E.SLAYER]:{name:"Slayer"},[E.SMITER]:{name:"Smiter"},[E.SMITH]:{name:"Smith"},[E.SMUGGLER]:{name:"Smuggler"},[E.SNIPER]:{name:"Sniper"},[E.SOUL]:{name:"Soul"},[E.SPECIALIST]:{name:"Specialist"},[E.SPEED_RUNNER]:{name:"Speed-Runner"},[E.SPELLCASTER]:{name:"Spellcaster"},[E.SQUIRE]:{name:"Squire"},[E.STAFF]:{name:"Staff"},[E.STEEL]:{name:"Steel"},[E.STRIDER]:{name:"Strider"},[E.STRIKER]:{name:"Striker"},[E.SUMMONER]:{name:"Summoner"},[E.SUPERIOR]:{name:"Superior"},[E.SUPERVISOR]:{name:"Supervisor"},[E.TEACHER]:{name:"Teacher"},[E.TEMPLAR]:{name:"Templar"},[E.THERAPIST]:{name:"Therapist"},[E.THIEF]:{name:"Thief"},[E.TIRANNIAN]:{name:"Tirannian"},[E.TRIALIST]:{name:"Trialist"},[E.TRICKSTER]:{name:"Trickster"},[E.TZKAL]:{name:"TzKal"},[E.TZTOK]:{name:"TzTok"},[E.UNHOLY]:{name:"Unholy"},[E.VAGRANT]:{name:"Vagrant"},[E.VANGUARD]:{name:"Vanguard"},[E.WALKER]:{name:"Walker"},[E.WANDERER]:{name:"Wanderer"},[E.WARDEN]:{name:"Warden"},[E.WARLOCK]:{name:"Warlock"},[E.WARRIOR]:{name:"Warrior"},[E.WATER]:{name:"Water"},[E.WILD]:{name:"Wild"},[E.WILLOW]:{name:"Willow"},[E.WILY]:{name:"Wily"},[E.WINTUMBER]:{name:"Wintumber"},[E.WITCH]:{name:"Witch"},[E.WIZARD]:{name:"Wizard"},[E.WORKER]:{name:"Worker"},[E.WRATH]:{name:"Wrath"},[E.XERICIAN]:{name:"Xerician"},[E.YELLOW]:{name:"Yellow"},[E.YEW]:{name:"Yew"},[E.ZAMORAKIAN]:{name:"Zamorakian"},[E.ZAROSIAN]:{name:"Zarosian"},[E.ZEALOT]:{name:"Zealot"},[E.ZENYTE]:{name:"Zenyte"}},(t,e)=>Object.assign(Object.assign({},t),{isPriveleged:$H.includes(e)}));var Dl;(function(t){t.SKILL="skill",t.BOSS="boss",t.ACTIVITY="activity",t.COMPUTED="computed"})(Dl||(Dl={}));var Ll;(function(t){t.EXPERIENCE="experience",t.KILLS="kills",t.SCORE="score",t.VALUE="value"})(Ll||(Ll={}));const HH=Vh({[_t.OVERALL]:{name:"Overall"},[_t.ATTACK]:{name:"Attack",isCombat:!0},[_t.DEFENCE]:{name:"Defence",isCombat:!0},[_t.STRENGTH]:{name:"Strength",isCombat:!0},[_t.HITPOINTS]:{name:"Hitpoints",isCombat:!0},[_t.RANGED]:{name:"Ranged",isCombat:!0},[_t.PRAYER]:{name:"Prayer",isCombat:!0},[_t.MAGIC]:{name:"Magic",isCombat:!0},[_t.COOKING]:{name:"Cooking"},[_t.WOODCUTTING]:{name:"Woodcutting"},[_t.FLETCHING]:{name:"Fletching",isMembers:!0},[_t.FISHING]:{name:"Fishing"},[_t.FIREMAKING]:{name:"Firemaking"},[_t.CRAFTING]:{name:"Crafting"},[_t.SMITHING]:{name:"Smithing"},[_t.MINING]:{name:"Mining"},[_t.HERBLORE]:{name:"Herblore",isMembers:!0},[_t.AGILITY]:{name:"Agility",isMembers:!0},[_t.THIEVING]:{name:"Thieving",isMembers:!0},[_t.SLAYER]:{name:"Slayer",isMembers:!0},[_t.FARMING]:{name:"Farming",isMembers:!0},[_t.RUNECRAFTING]:{name:"Runecrafting"},[_t.HUNTER]:{name:"Hunter",isMembers:!0},[_t.CONSTRUCTION]:{name:"Construction",isMembers:!0}},t=>Object.assign(Object.assign({},t),{type:Dl.SKILL,measure:Ll.EXPERIENCE,isCombat:"isCombat"in t?t.isCombat:!1,isMembers:"isMembers"in t?t.isMembers:!1})),zH=Vh({[ge.ABYSSAL_SIRE]:{name:"Abyssal Sire"},[ge.ALCHEMICAL_HYDRA]:{name:"Alchemical Hydra"},[ge.ARTIO]:{name:"Artio"},[ge.BARROWS_CHESTS]:{name:"Barrows Chests"},[ge.BRYOPHYTA]:{name:"Bryophyta",isMembers:!1},[ge.CALLISTO]:{name:"Callisto"},[ge.CALVARION]:{name:"Calvar'ion"},[ge.CERBERUS]:{name:"Cerberus"},[ge.CHAMBERS_OF_XERIC]:{name:"Chambers Of Xeric"},[ge.CHAMBERS_OF_XERIC_CM]:{name:"Chambers Of Xeric (CM)"},[ge.CHAOS_ELEMENTAL]:{name:"Chaos Elemental"},[ge.CHAOS_FANATIC]:{name:"Chaos Fanatic"},[ge.COMMANDER_ZILYANA]:{name:"Commander Zilyana"},[ge.CORPOREAL_BEAST]:{name:"Corporeal Beast"},[ge.CRAZY_ARCHAEOLOGIST]:{name:"Crazy Archaeologist"},[ge.DAGANNOTH_PRIME]:{name:"Dagannoth Prime"},[ge.DAGANNOTH_REX]:{name:"Dagannoth Rex"},[ge.DAGANNOTH_SUPREME]:{name:"Dagannoth Supreme"},[ge.DERANGED_ARCHAEOLOGIST]:{name:"Deranged Archaeologist"},[ge.DUKE_SUCELLUS]:{name:"Duke Sucellus"},[ge.GENERAL_GRAARDOR]:{name:"General Graardor"},[ge.GIANT_MOLE]:{name:"Giant Mole"},[ge.GROTESQUE_GUARDIANS]:{name:"Grotesque Guardians"},[ge.HESPORI]:{name:"Hespori"},[ge.KALPHITE_QUEEN]:{name:"Kalphite Queen"},[ge.KING_BLACK_DRAGON]:{name:"King Black Dragon"},[ge.KRAKEN]:{name:"Kraken"},[ge.KREEARRA]:{name:"Kree'Arra"},[ge.KRIL_TSUTSAROTH]:{name:"K'ril Tsutsaroth"},[ge.LUNAR_CHESTS]:{name:"Lunar Chests"},[ge.MIMIC]:{name:"Mimic",minimumValue:1},[ge.NEX]:{name:"Nex"},[ge.NIGHTMARE]:{name:"Nightmare"},[ge.PHOSANIS_NIGHTMARE]:{name:"Phosani's Nightmare"},[ge.OBOR]:{name:"Obor",isMembers:!1},[ge.PHANTOM_MUSPAH]:{name:"Phantom Muspah"},[ge.SARACHNIS]:{name:"Sarachnis"},[ge.SCORPIA]:{name:"Scorpia"},[ge.SCURRIUS]:{name:"Scurrius"},[ge.SKOTIZO]:{name:"Skotizo"},[ge.SOL_HEREDIT]:{name:"Sol Heredit"},[ge.SPINDEL]:{name:"Spindel"},[ge.TEMPOROSS]:{name:"Tempoross"},[ge.THE_GAUNTLET]:{name:"The Gauntlet"},[ge.THE_CORRUPTED_GAUNTLET]:{name:"The Corrupted Gauntlet"},[ge.THE_LEVIATHAN]:{name:"The Leviathan"},[ge.THE_WHISPERER]:{name:"The Whisperer"},[ge.THEATRE_OF_BLOOD]:{name:"Theatre Of Blood"},[ge.THEATRE_OF_BLOOD_HARD_MODE]:{name:"Theatre Of Blood (HM)"},[ge.THERMONUCLEAR_SMOKE_DEVIL]:{name:"Thermonuclear Smoke Devil"},[ge.TOMBS_OF_AMASCUT]:{name:"Tombs of Amascut"},[ge.TOMBS_OF_AMASCUT_EXPERT]:{name:"Tombs of Amascut (Expert Mode)"},[ge.TZKAL_ZUK]:{name:"TzKal-Zuk",minimumValue:1},[ge.TZTOK_JAD]:{name:"TzTok-Jad"},[ge.VARDORVIS]:{name:"Vardorvis"},[ge.VENENATIS]:{name:"Venenatis"},[ge.VETION]:{name:"Vet'ion"},[ge.VORKATH]:{name:"Vorkath"},[ge.WINTERTODT]:{name:"Wintertodt"},[ge.ZALCANO]:{name:"Zalcano"},[ge.ZULRAH]:{name:"Zulrah"}},t=>Object.assign(Object.assign({},t),{type:Dl.BOSS,measure:Ll.KILLS,isMembers:"isMembers"in t?t.isMembers:!0,minimumValue:"minimumValue"in t?t.minimumValue:5})),jH=Vh({[mn.LEAGUE_POINTS]:{name:"League Points",minimumValue:100},[mn.BOUNTY_HUNTER_HUNTER]:{name:"Bounty Hunter (Hunter)",minimumValue:2},[mn.BOUNTY_HUNTER_ROGUE]:{name:"Bounty Hunter (Rogue)",minimumValue:2},[mn.CLUE_SCROLLS_ALL]:{name:"Clue Scrolls (All)"},[mn.CLUE_SCROLLS_BEGINNER]:{name:"Clue Scrolls (Beginner)"},[mn.CLUE_SCROLLS_EASY]:{name:"Clue Scrolls (Easy)"},[mn.CLUE_SCROLLS_MEDIUM]:{name:"Clue Scrolls (Medium)"},[mn.CLUE_SCROLLS_HARD]:{name:"Clue Scrolls (Hard)"},[mn.CLUE_SCROLLS_ELITE]:{name:"Clue Scrolls (Elite)"},[mn.CLUE_SCROLLS_MASTER]:{name:"Clue Scrolls (Master)"},[mn.LAST_MAN_STANDING]:{name:"Last Man Standing",minimumValue:500},[mn.PVP_ARENA]:{name:"PvP Arena",minimumValue:2525},[mn.SOUL_WARS_ZEAL]:{name:"Soul Wars Zeal",minimumValue:200},[mn.GUARDIANS_OF_THE_RIFT]:{name:"Guardians of the Rift",minimumValue:2},[mn.COLOSSEUM_GLORY]:{name:"Colosseum Glory",minimumValue:300}},t=>Object.assign(Object.assign({},t),{type:Dl.ACTIVITY,measure:Ll.SCORE,minimumValue:"minimumValue"in t?t.minimumValue:1})),WH=Vh({[Qf.EHP]:{name:"EHP"},[Qf.EHB]:{name:"EHB"}},t=>Object.assign(Object.assign({},t),{type:Dl.COMPUTED,measure:Ll.VALUE})),W0=Object.assign(Object.assign(Object.assign(Object.assign({},HH),zH),jH),WH),qH=Object.values(W_),Fh=Object.values(_t),q0=Object.values(ge),nN=Object.values(mn);Object.values(Qf);Fh.filter(t=>t!==_t.OVERALL);q0.filter(t=>!W0[t].isMembers);Fh.filter(t=>W0[t].isMembers);Fh.filter(t=>W0[t].isCombat);[...Fh,...q0,...nN];var tS;(function(t){t.MAIN="main",t.IRONMAN="ironman",t.ULTIMATE="ultimate",t.LVL3="lvl3",t.F2P="f2p",t.F2P_LVL3="f2p_lvl3",t.F2P_IRONMAN="f2p_ironman",t.F2P_LVL3_IRONMAN="f2p_lvl3_ironman"})(tS||(tS={}));var nS;(function(t){t[t.TEMPLE_OSRS=0]="TEMPLE_OSRS",t[t.CRYSTAL_MATH_LABS=1]="CRYSTAL_MATH_LABS"})(nS||(nS={}));class GH extends fo{getEfficiencyLeaderboards(e,n){return this.getRequest("/efficiency/leaderboard",Object.assign(Object.assign({},e),n))}getEHPRates(e){return this.getRequest("/efficiency/rates",{metric:W_.EHP,type:e})}getEHBRates(e){return this.getRequest("/efficiency/rates",{metric:W_.EHB,type:e})}}class KH extends fo{searchNameChanges(e,n){return this.getRequest("/names",Object.assign(Object.assign({},e),n))}submitNameChange(e,n){return this.postRequest("/names",{oldName:e,newName:n})}}class YH extends fo{searchCompetitions(e,n){return this.getRequest("/competitions",Object.assign(Object.assign({},e),n))}getCompetitionDetails(e,n){return this.getRequest(`/competitions/${e}`,{metric:n})}getCompetitionDetailsCSV(e,n){return this.getText(`/competitions/${e}/csv`,Object.assign({metric:n.previewMetric},n))}getCompetitionTopHistory(e,n){return this.getRequest(`/competitions/${e}/top-history`,{metric:n})}createCompetition(e){return this.postRequest("/competitions",e)}editCompetition(e,n,r){return this.putRequest(`/competitions/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteCompetition(e,n){return this.deleteRequest(`/competitions/${e}`,{verificationCode:n})}addParticipants(e,n,r){return this.postRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}removeParticipants(e,n,r){return this.deleteRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}addTeams(e,n,r){return this.postRequest(`/competitions/${e}/teams`,{verificationCode:r,teams:n})}removeTeams(e,n,r){return this.deleteRequest(`/competitions/${e}/teams`,{verificationCode:r,teamNames:n})}updateAll(e,n){return this.postRequest(`/competitions/${e}/update-all`,{verificationCode:n})}}class G0 extends fo{constructor(e){const n=(e==null?void 0:e.baseAPIUrl)||Xw.baseAPIUrl,r={"x-user-agent":(e==null?void 0:e.userAgent)||Xw.defaultUserAgent};e!=null&&e.apiKey&&(r["x-api-key"]=e.apiKey),super(r,n),this.deltas=new VH(r,n),this.groups=new FH(r,n),this.players=new UH(r,n),this.records=new BH(r,n),this.efficiency=new GH(r,n),this.nameChanges=new KH(r,n),this.competitions=new YH(r,n)}}const JH={key:0},QH=v("h1",null,"Create new Bingo",-1),XH={key:0},ZH={key:2},ez=Yt({__name:"newBoard.vapor",async setup(t){let e,n;const r=jO(),i=([e,n]=Gr(()=>lo()),e=await e,n(),e),s=ie(!1),o=ie(40963),a=ie(),l=new G0({apiKey:"zpyy03zybxt0oiznjw6e1mz2",userAgent:"_Odinh"}),c=ie({}),u=ie({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),h=ie({}),d=async()=>{!o.value||o.value<=0||isNaN(o.value)||await l.competitions.getCompetitionDetails(o.value).then(async m=>{if(m!=null&&m.message)throw new Error("Error creating bingo: "+m.message);if((m==null?void 0:m.metric)!="overall")throw new Error("Error creating bingo: Metric should be set to `Overall`");if((m==null?void 0:m.type)!="team")throw new Error("Error creating bingo: Type should be set to `Team`");if(!(m!=null&&m.participations))throw new Error("Error creating bingo: No participants found");if(new Date>m.endsAt)throw new Error("Error creating bingo: Competition has already ended");const g=rt(Ue,"Boards",o.value.toString());if((await Ii(g)).exists())throw new Error("Error creating bingo: Board already exists");h.value={name:m.title,start:m.startsAt,end:m.endsAt,published:!1},c.value=f(m),s.value=!0}).catch(m=>{a.value=m.message})},f=m=>{var _;const g=ie(),y=ie({});return g.value=m.participations,(_=g.value)==null||_.map(T=>{y.value[T.teamName]={teamName:T.teamName,players:[],stats:null}}),g.value.map(T=>{delete T.player.ehb,delete T.player.exp,delete T.player.ehp,y.value[T.teamName].players=[...y.value[T.teamName].players,y.value[T.teamName].players[T.player.username]={...T.player}]}),y.value},p=async()=>{const m=rt(Ue,"Boards",o.value.toString());i&&await kw(m,{ownerID:i.uid}).then(()=>{const g=rt(Ue,"Users",i.uid);for(let y in c.value){const _=rt(kr(Ue,"Boards",m.id,"Groups")),T=c.value[y];kw(rt(Ue,_.path),{teamName:T.teamName,teamId:_.id,players:c.value[y].players,stats:null})}Jo(m,{name:h.value.name,start:h.value.start,end:h.value.end}),Jo(g,{boards:d7(m.id)})}).then(()=>{r.push({name:"editBoard",params:{boardUUID:m.id}})}).catch(g=>{a.value=g.message}),s.value=!1};return(m,g)=>{var y,_;return ee(i)?(M(),H("div",JH,[QH,a.value?(M(),H("p",XH,le(a.value),1)):_e("",!0),Ht(v("input",{type:"number","onUpdate:modelValue":g[0]||(g[0]=T=>o.value=T),placeholder:"12345 WOM Team competition code",min:"0",onFocusin:g[1]||(g[1]=()=>{a.value=""})},null,544),[[wr,o.value]]),v("button",{onClick:g[2]||(g[2]=T=>d())},"Create new Bingo"),s.value?(M(),H("button",{key:1,onClick:g[3]||(g[3]=T=>p())},"finish setup")):_e("",!0),c.value!==null&&s.value?(M(),H("div",ZH,[v("h1",null,le(h.value.name),1),h.value.start?(M(),H(fe,{key:0},[v("p",null," Starts: "+le(h.value.start.toLocaleDateString(void 0,u.value)),1),v("code",null,"<t:"+le(((y=h.value.start)==null?void 0:y.valueOf())/1e3)+":F>",1)],64)):_e("",!0),h.value.end?(M(),H(fe,{key:1},[v("p",null," Ends: "+le(h.value.end.toLocaleDateString(void 0,u.value)),1),v("code",null,"<t:"+le(((_=h.value.end)==null?void 0:_.valueOf())/1e3)+":F>",1)],64)):_e("",!0),(M(!0),H(fe,null,vt(c.value,T=>(M(),H("div",{key:T.teamName},[ce(le(T)+" ",1),v("h2",null,le(T.teamName),1),(M(!0),H(fe,null,vt(T.players,w=>(M(),H("div",{key:w.username},[v("div",null,le(w.username),1)]))),128))]))),128))])):_e("",!0)])):_e("",!0)}}}),tz=Yt({__name:"userBoardListItems.vapor",props:{boardID:{}},async setup(t){let e,n;const r=t,{data:i,promise:s}=sc(rt(Ue,"Boards",r.boardID));[e,n]=Gr(()=>Promise.all([s.value])),await e,n();const o=()=>{var a;if((a=i.value)!=null&&a.published){i.value.published=!i.value.published,Jo(rt(Ue,"Boards",r.boardID),{published:i.value.published});return}Jo(rt(Ue,"Boards",r.boardID),{published:!0})};return(a,l)=>{var u,h,d,f;const c=is("router-link");return M(),H(fe,null,[ee(i)?(M(),H("label",{key:(u=ee(i))==null?void 0:u.id},[ce(le((h=ee(i))==null?void 0:h.name)+" ",1),Te(c,{to:{name:"editBoard",params:{boardUUID:(d=ee(i))==null?void 0:d.id}},class:"btn",icon:""},{default:bt(()=>[ce(" edit ")]),_:1},8,["to"])])):_e("",!0),Te(c,{to:{name:"viewBoard",params:{boardUUID:(f=ee(i))==null?void 0:f.id}},class:"btn",icon:""},{default:bt(()=>[ce(" visibility ")]),_:1},8,["to"]),Ht(v("input",{type:"checkbox",onClick:o,toggle:"","onUpdate:modelValue":l[0]||(l[0]=p=>ee(i).published=p)},null,512),[[Uy,ee(i).published]])],64)}}}),nz={key:0},rz=v("h1",null,"Log in",-1),iz=v("p",null,"you need to be signed in to edit, create and moderate a board",-1),sz=v("h1",null,"User details",-1),oz=v("h2",null,"Boards",-1),az=Yt({__name:"loginView.vapor",async setup(t){let e,n;const r=jO(),i=new Vi,s=Q7(),o=w5(),a=ie();if(o.value){const{data:d,promise:f}=sc(rt(Ue,"Users",o.value.uid));[e,n]=Gr(()=>f.value.then(()=>{var p;a.value=(p=d.value)==null?void 0:p.boards})),await e,n()}const l=Lh(),c=()=>o.value?"User details":"log in";l.value=c()+" - Bingo Bongo";const u=()=>{KL(s,i).then(()=>{r.push({name:"Home"})}).catch(d=>{const f=d.message;console.error(f)})},h=()=>{CL(s).then(()=>r.push({name:"Home"}))};return(d,f)=>ee(o)?(M(),H(fe,{key:1},[v("div",null,[sz,v("button",{class:"btn",onClick:nt(h,["prevent"])},"Log out")]),v("div",null,[oz,v("ul",null,[(M(!0),H(fe,null,vt(a.value,p=>(M(),H("li",null,[(M(),dt(tz,{boardID:p,key:p},null,8,["boardID"]))]))),256))])])],64)):(M(),H("div",nz,[rz,iz,ee(o)?_e("",!0):(M(),H("button",{key:0,class:"btn",onClick:nt(u,["prevent"])},"Log in with Google"))]))}});/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function rS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ci(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rS(Object(n),!0).forEach(function(r){lz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yd(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yd=function(e){return typeof e}:Yd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function lz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function es(){return es=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},es.apply(this,arguments)}function cz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uz(t,e){if(t==null)return{};var n=cz(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var hz="1.15.2";function Yi(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var cs=Yi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Uh=Yi(/Edge/i),iS=Yi(/firefox/i),ru=Yi(/safari/i)&&!Yi(/chrome/i)&&!Yi(/android/i),rN=Yi(/iP(ad|od|hone)/i),iN=Yi(/chrome/i)&&Yi(/android/i),sN={capture:!1,passive:!1};function it(t,e,n){t.addEventListener(e,n,!cs&&sN)}function Ze(t,e,n){t.removeEventListener(e,n,!cs&&sN)}function Xf(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function dz(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Lr(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Xf(t,e):Xf(t,e))||r&&t===n)return t;if(t===n)break}while(t=dz(t))}return null}var sS=/\s+/g;function sr(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(sS," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(sS," ")}}function ke(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function dl(t,e){var n="";if(typeof t=="string")n=t;else do{var r=ke(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function oN(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function _i(){var t=document.scrollingElement;return t||document.documentElement}function jt(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,u,h;if(t!==window&&t.parentNode&&t!==_i()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!cs))do if(i&&i.getBoundingClientRect&&(ke(i,"transform")!=="none"||n&&ke(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(ke(i,"border-top-width")),a-=d.left+parseInt(ke(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var f=dl(i||t),p=f&&f.a,m=f&&f.d;f&&(o/=m,a/=p,h/=p,u/=m,l=o+u,c=a+h)}return{top:o,left:a,bottom:l,right:c,width:h,height:u}}}function oS(t,e,n){for(var r=xs(t,!0),i=jt(t)[e];r;){var s=jt(r)[n],o=void 0;if(n==="top"||n==="left"?o=i>=s:o=i<=s,!o)return r;if(r===_i())break;r=xs(r,!1)}return!1}function Vl(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Oe.ghost&&(r||o[s]!==Oe.dragged)&&Lr(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function K0(t,e){for(var n=t.lastElementChild;n&&(n===Oe.ghost||ke(n,"display")==="none"||e&&!Xf(n,e));)n=n.previousElementSibling;return n||null}function Tr(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Oe.clone&&(!e||Xf(t,e))&&n++;return n}function aS(t){var e=0,n=0,r=_i();if(t)do{var i=dl(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function fz(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function xs(t,e){if(!t||!t.getBoundingClientRect)return _i();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=ke(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return _i();if(r||e)return n;r=!0}}while(n=n.parentNode);return _i()}function pz(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Vg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var iu;function aN(t,e){return function(){if(!iu){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),iu=setTimeout(function(){iu=void 0},e)}}}function mz(){clearTimeout(iu),iu=void 0}function lN(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function cN(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function uN(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var s,o,a,l;if(!(!Lr(i,e.draggable,t,!1)||i.animated||i===n)){var c=jt(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var cr="Sortable"+new Date().getTime();function gz(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(ke(i,"display")==="none"||i===Oe.ghost)){t.push({target:i,rect:jt(i)});var s=Ci({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=dl(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(fz(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=jt(c),d=c.prevFromRect,f=c.prevToRect,p=a.rect,m=dl(c,!0);m&&(h.top-=m.f,h.left-=m.e),c.toRect=h,c.thisAnimationDuration&&Vg(d,h)&&!Vg(u,h)&&(p.top-h.top)/(p.left-h.left)===(u.top-h.top)/(u.left-h.left)&&(l=_z(p,d,f,i.options)),Vg(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=i.options.animation),i.animate(c,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){ke(r,"transition",""),ke(r,"transform","");var a=dl(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-s.left)/(l||1),h=(i.top-s.top)/(c||1);r.animatingX=!!u,r.animatingY=!!h,ke(r,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=yz(r),ke(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ke(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){ke(r,"transition",""),ke(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function yz(t){return t.offsetWidth}function _z(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Ma=[],Fg={initializeByDefault:!0},Bh={mount:function(e){for(var n in Fg)Fg.hasOwnProperty(n)&&!(n in e)&&(e[n]=Fg[n]);Ma.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ma.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Ma.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Ci({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Ci({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Ma.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,es(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Ma.forEach(function(i){typeof i.eventProperties=="function"&&es(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Ma.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function vz(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[cr],!!e){var m,g=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!cs&&!Uh?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||n,m.from=a||n,m.item=i||n,m.clone=s,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=d,m.pullMode=f?f.lastPutMode:void 0;var _=Ci(Ci({},p),Bh.getEventProperties(r,e));for(var T in _)m[T]=_[T];n&&n.dispatchEvent(m),g[y]&&g[y].call(e,m)}}var bz=["evt"],Kn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=uz(r,bz);Bh.pluginEvent.bind(Oe)(e,n,Ci({dragEl:te,parentEl:Dt,ghostEl:Le,rootEl:Ot,nextEl:Ao,lastDownEl:Jd,cloneEl:Mt,cloneHidden:Ns,dragStarted:Oc,putSortable:gn,activeSortable:Oe.active,originalEvent:i,oldIndex:qa,oldDraggableIndex:su,newIndex:or,newDraggableIndex:Is,hideGhostForTarget:pN,unhideGhostForTarget:mN,cloneNowHidden:function(){Ns=!0},cloneNowShown:function(){Ns=!1},dispatchSortableEvent:function(a){$n({sortable:n,name:a,originalEvent:i})}},s))};function $n(t){vz(Ci({putSortable:gn,cloneEl:Mt,targetEl:te,rootEl:Ot,oldIndex:qa,oldDraggableIndex:su,newIndex:or,newDraggableIndex:Is},t))}var te,Dt,Le,Ot,Ao,Jd,Mt,Ns,qa,or,su,Is,yd,gn,Ba=!1,Zf=!1,ep=[],To,xr,Ug,Bg,lS,cS,Oc,Pa,ou,au=!1,_d=!1,Qd,Rn,$g=[],q_=!1,tp=[],Om=typeof document<"u",vd=rN,uS=Uh||cs?"cssFloat":"float",Ez=Om&&!iN&&!rN&&"draggable"in document.createElement("div"),hN=function(){if(Om){if(cs)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),dN=function(e,n){var r=ke(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Vl(e,0,n),o=Vl(e,1,n),a=s&&ke(s),l=o&&ke(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+jt(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+jt(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[uS]==="none"||o&&r[uS]==="none"&&c+u>i)?"vertical":"horizontal"},Tz=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},wz=function(e,n){var r;return ep.some(function(i){var s=i[cr].options.emptyInsertThreshold;if(!(!s||K0(i))){var o=jt(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},fN=function(e){function n(s,o){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,u),o)(a,l,c,u);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},i=e.group;(!i||Yd(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},pN=function(){!hN&&Le&&ke(Le,"display","none")},mN=function(){!hN&&Le&&ke(Le,"display","")};Om&&!iN&&document.addEventListener("click",function(t){if(Zf)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Zf=!1,!1},!0);var wo=function(e){if(te){e=e.touches?e.touches[0]:e;var n=wz(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[cr]._onDragOver(r)}}},Sz=function(e){te&&te.parentNode[cr]._isOutsideThisEl(e.target)};function Oe(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=es({},e),t[cr]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return dN(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Oe.supportPointer!==!1&&"PointerEvent"in window&&!ru,emptyInsertThreshold:5};Bh.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);fN(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Ez,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?it(t,"pointerdown",this._onTapStart):(it(t,"mousedown",this._onTapStart),it(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(it(t,"dragover",this),it(t,"dragenter",this)),ep.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),es(this,gz())}Oe.prototype={constructor:Oe,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Pa=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,te):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(Mz(r),!te&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&ru&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Lr(l,i.draggable,r,!1),!(l&&l.animated)&&Jd!==l)){if(qa=Tr(l),su=Tr(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){$n({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Kn("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=Lr(c,h.trim(),r,!1),h)return $n({sortable:n,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),Kn("filter",n,{evt:e}),!0}),u)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Lr(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!te&&r.parentNode===s){var c=jt(r);if(Ot=s,te=r,Dt=te.parentNode,Ao=te.nextSibling,Jd=r,yd=o.group,Oe.dragged=te,To={target:te,clientX:(n||e).clientX,clientY:(n||e).clientY},lS=To.clientX-c.left,cS=To.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,te.style["will-change"]="all",l=function(){if(Kn("delayEnded",i,{evt:e}),Oe.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!iS&&i.nativeDraggable&&(te.draggable=!0),i._triggerDragStart(e,n),$n({sortable:i,name:"choose",originalEvent:e}),sr(te,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){oN(te,u.trim(),Hg)}),it(a,"dragover",wo),it(a,"mousemove",wo),it(a,"touchmove",wo),it(a,"mouseup",i._onDrop),it(a,"touchend",i._onDrop),it(a,"touchcancel",i._onDrop),iS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,te.draggable=!0),Kn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Uh||cs))){if(Oe.eventCanceled){this._onDrop();return}it(a,"mouseup",i._disableDelayedDrag),it(a,"touchend",i._disableDelayedDrag),it(a,"touchcancel",i._disableDelayedDrag),it(a,"mousemove",i._delayedDragTouchMoveHandler),it(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&it(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){te&&Hg(te),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ze(e,"mouseup",this._disableDelayedDrag),Ze(e,"touchend",this._disableDelayedDrag),Ze(e,"touchcancel",this._disableDelayedDrag),Ze(e,"mousemove",this._delayedDragTouchMoveHandler),Ze(e,"touchmove",this._delayedDragTouchMoveHandler),Ze(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?it(document,"pointermove",this._onTouchMove):n?it(document,"touchmove",this._onTouchMove):it(document,"mousemove",this._onTouchMove):(it(te,"dragend",this),it(Ot,"dragstart",this._onDragStart));try{document.selection?Xd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Ba=!1,Ot&&te){Kn("dragStarted",this,{evt:n}),this.nativeDraggable&&it(document,"dragover",Sz);var r=this.options;!e&&sr(te,r.dragClass,!1),sr(te,r.ghostClass,!0),Oe.active=this,e&&this._appendGhost(),$n({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(xr){this._lastX=xr.clientX,this._lastY=xr.clientY,pN();for(var e=document.elementFromPoint(xr.clientX,xr.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(xr.clientX,xr.clientY),e!==n);)n=e;if(te.parentNode[cr]._isOutsideThisEl(e),n)do{if(n[cr]){var r=void 0;if(r=n[cr]._onDragOver({clientX:xr.clientX,clientY:xr.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);mN()}},_onTouchMove:function(e){if(To){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Le&&dl(Le,!0),a=Le&&o&&o.a,l=Le&&o&&o.d,c=vd&&Rn&&aS(Rn),u=(s.clientX-To.clientX+i.x)/(a||1)+(c?c[0]-$g[0]:0)/(a||1),h=(s.clientY-To.clientY+i.y)/(l||1)+(c?c[1]-$g[1]:0)/(l||1);if(!Oe.active&&!Ba){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Le){o?(o.e+=u-(Ug||0),o.f+=h-(Bg||0)):o={a:1,b:0,c:0,d:1,e:u,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ke(Le,"webkitTransform",d),ke(Le,"mozTransform",d),ke(Le,"msTransform",d),ke(Le,"transform",d),Ug=u,Bg=h,xr=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Le){var e=this.options.fallbackOnBody?document.body:Ot,n=jt(te,!0,vd,!0,e),r=this.options;if(vd){for(Rn=e;ke(Rn,"position")==="static"&&ke(Rn,"transform")==="none"&&Rn!==document;)Rn=Rn.parentNode;Rn!==document.body&&Rn!==document.documentElement?(Rn===document&&(Rn=_i()),n.top+=Rn.scrollTop,n.left+=Rn.scrollLeft):Rn=_i(),$g=aS(Rn)}Le=te.cloneNode(!0),sr(Le,r.ghostClass,!1),sr(Le,r.fallbackClass,!0),sr(Le,r.dragClass,!0),ke(Le,"transition",""),ke(Le,"transform",""),ke(Le,"box-sizing","border-box"),ke(Le,"margin",0),ke(Le,"top",n.top),ke(Le,"left",n.left),ke(Le,"width",n.width),ke(Le,"height",n.height),ke(Le,"opacity","0.8"),ke(Le,"position",vd?"absolute":"fixed"),ke(Le,"zIndex","100000"),ke(Le,"pointerEvents","none"),Oe.ghost=Le,e.appendChild(Le),ke(Le,"transform-origin",lS/parseInt(Le.style.width)*100+"% "+cS/parseInt(Le.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Kn("dragStart",this,{evt:e}),Oe.eventCanceled){this._onDrop();return}Kn("setupClone",this),Oe.eventCanceled||(Mt=cN(te),Mt.removeAttribute("id"),Mt.draggable=!1,Mt.style["will-change"]="",this._hideClone(),sr(Mt,this.options.chosenClass,!1),Oe.clone=Mt),r.cloneId=Xd(function(){Kn("clone",r),!Oe.eventCanceled&&(r.options.removeCloneOnHide||Ot.insertBefore(Mt,te),r._hideClone(),$n({sortable:r,name:"clone"}))}),!n&&sr(te,s.dragClass,!0),n?(Zf=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Ze(document,"mouseup",r._onDrop),Ze(document,"touchend",r._onDrop),Ze(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,te)),it(document,"drop",r),ke(te,"transform","translateZ(0)")),Ba=!0,r._dragStartId=Xd(r._dragStarted.bind(r,n,e)),it(document,"selectstart",r),Oc=!0,ru&&ke(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Oe.active,u=yd===l,h=a.sort,d=gn||c,f,p=this,m=!1;if(q_)return;function g(U,he){Kn(U,p,Ci({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:d,target:r,completed:_,onMove:function(Ne,He){return bd(Ot,n,te,i,Ne,jt(Ne),e,He)},changed:T},he))}function y(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _(U){return g("dragOverCompleted",{insertion:U}),U&&(u?c._hideClone():c._showClone(p),p!==d&&(sr(te,gn?gn.options.ghostClass:c.options.ghostClass,!1),sr(te,a.ghostClass,!0)),gn!==p&&p!==Oe.active?gn=p:p===Oe.active&&gn&&(gn=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===te&&!te.animated||r===n&&!r.animated)&&(Pa=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(te.parentNode[cr]._isOutsideThisEl(e.target),!U&&wo(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function T(){or=Tr(te),Is=Tr(te,a.draggable),$n({sortable:p,name:"change",toEl:n,newIndex:or,newDraggableIndex:Is,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Lr(r,a.draggable,n,!0),g("dragOver"),Oe.eventCanceled)return m;if(te.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return _(!1);if(Zf=!1,c&&!a.disabled&&(u?h||(o=Dt!==Ot):gn===this||(this.lastPutMode=yd.checkPull(this,c,te,e))&&l.checkPut(this,c,te,e))){if(f=this._getDirection(e,r)==="vertical",i=jt(te),g("dragOverValid"),Oe.eventCanceled)return m;if(o)return Dt=Ot,y(),this._hideClone(),g("revert"),Oe.eventCanceled||(Ao?Ot.insertBefore(te,Ao):Ot.appendChild(te)),_(!0);var w=K0(n,a.draggable);if(!w||Rz(e,f,this)&&!w.animated){if(w===te)return _(!1);if(w&&n===e.target&&(r=w),r&&(s=jt(r)),bd(Ot,n,te,i,r,s,e,!!r)!==!1)return y(),w&&w.nextSibling?n.insertBefore(te,w.nextSibling):n.appendChild(te),Dt=n,T(),_(!0)}else if(w&&Cz(e,f,this)){var I=Vl(n,0,a,!0);if(I===te)return _(!1);if(r=I,s=jt(r),bd(Ot,n,te,i,r,s,e,!1)!==!1)return y(),n.insertBefore(te,I),Dt=n,T(),_(!0)}else if(r.parentNode===n){s=jt(r);var C=0,x,N=te.parentNode!==n,k=!Tz(te.animated&&te.toRect||i,r.animated&&r.toRect||s,f),j=f?"top":"left",K=oS(r,"top","top")||oS(te,"top","top"),z=K?K.scrollTop:void 0;Pa!==r&&(x=s[j],au=!1,_d=!k&&a.invertSwap||N),C=kz(e,r,s,f,k?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,_d,Pa===r);var V;if(C!==0){var D=Tr(te);do D-=C,V=Dt.children[D];while(V&&(ke(V,"display")==="none"||V===Le))}if(C===0||V===r)return _(!1);Pa=r,ou=C;var P=r.nextElementSibling,A=!1;A=C===1;var $=bd(Ot,n,te,i,r,s,e,A);if($!==!1)return($===1||$===-1)&&(A=$===1),q_=!0,setTimeout(Az,30),y(),A&&!P?n.appendChild(te):r.parentNode.insertBefore(te,A?P:r),K&&lN(K,0,z-K.scrollTop),Dt=te.parentNode,x!==void 0&&!_d&&(Qd=Math.abs(x-jt(r)[j])),T(),_(!0)}if(n.contains(te))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ze(document,"mousemove",this._onTouchMove),Ze(document,"touchmove",this._onTouchMove),Ze(document,"pointermove",this._onTouchMove),Ze(document,"dragover",wo),Ze(document,"mousemove",wo),Ze(document,"touchmove",wo)},_offUpEvents:function(){var e=this.el.ownerDocument;Ze(e,"mouseup",this._onDrop),Ze(e,"touchend",this._onDrop),Ze(e,"pointerup",this._onDrop),Ze(e,"touchcancel",this._onDrop),Ze(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(or=Tr(te),Is=Tr(te,r.draggable),Kn("drop",this,{evt:e}),Dt=te&&te.parentNode,or=Tr(te),Is=Tr(te,r.draggable),Oe.eventCanceled){this._nulling();return}Ba=!1,_d=!1,au=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),G_(this.cloneId),G_(this._dragStartId),this.nativeDraggable&&(Ze(document,"drop",this),Ze(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ru&&ke(document.body,"user-select",""),ke(te,"transform",""),e&&(Oc&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Le&&Le.parentNode&&Le.parentNode.removeChild(Le),(Ot===Dt||gn&&gn.lastPutMode!=="clone")&&Mt&&Mt.parentNode&&Mt.parentNode.removeChild(Mt),te&&(this.nativeDraggable&&Ze(te,"dragend",this),Hg(te),te.style["will-change"]="",Oc&&!Ba&&sr(te,gn?gn.options.ghostClass:this.options.ghostClass,!1),sr(te,this.options.chosenClass,!1),$n({sortable:this,name:"unchoose",toEl:Dt,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ot!==Dt?(or>=0&&($n({rootEl:Dt,name:"add",toEl:Dt,fromEl:Ot,originalEvent:e}),$n({sortable:this,name:"remove",toEl:Dt,originalEvent:e}),$n({rootEl:Dt,name:"sort",toEl:Dt,fromEl:Ot,originalEvent:e}),$n({sortable:this,name:"sort",toEl:Dt,originalEvent:e})),gn&&gn.save()):or!==qa&&or>=0&&($n({sortable:this,name:"update",toEl:Dt,originalEvent:e}),$n({sortable:this,name:"sort",toEl:Dt,originalEvent:e})),Oe.active&&((or==null||or===-1)&&(or=qa,Is=su),$n({sortable:this,name:"end",toEl:Dt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Kn("nulling",this),Ot=te=Dt=Le=Ao=Mt=Jd=Ns=To=xr=Oc=or=Is=qa=su=Pa=ou=gn=yd=Oe.dragged=Oe.ghost=Oe.clone=Oe.active=null,tp.forEach(function(e){e.checked=!0}),tp.length=Ug=Bg=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":te&&(this._onDragOver(e),Iz(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Lr(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Nz(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Lr(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Lr(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Bh.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&fN(r)},destroy:function(){Kn("destroy",this);var e=this.el;e[cr]=null,Ze(e,"mousedown",this._onTapStart),Ze(e,"touchstart",this._onTapStart),Ze(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ze(e,"dragover",this),Ze(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ep.splice(ep.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ns){if(Kn("hideClone",this),Oe.eventCanceled)return;ke(Mt,"display","none"),this.options.removeCloneOnHide&&Mt.parentNode&&Mt.parentNode.removeChild(Mt),Ns=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ns){if(Kn("showClone",this),Oe.eventCanceled)return;te.parentNode==Ot&&!this.options.group.revertClone?Ot.insertBefore(Mt,te):Ao?Ot.insertBefore(Mt,Ao):Ot.appendChild(Mt),this.options.group.revertClone&&this.animate(te,Mt),ke(Mt,"display",""),Ns=!1}}};function Iz(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function bd(t,e,n,r,i,s,o,a){var l,c=t[cr],u=c.options.onMove,h;return window.CustomEvent&&!cs&&!Uh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||jt(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),u&&(h=u.call(c,l,o)),h}function Hg(t){t.draggable=!1}function Az(){q_=!1}function Cz(t,e,n){var r=jt(Vl(n.el,0,n.options,!0)),i=uN(n.el,n.options,Le),s=10;return e?t.clientX<i.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-s||t.clientY<r.bottom&&t.clientX<r.left}function Rz(t,e,n){var r=jt(K0(n.el,n.options.draggable)),i=uN(n.el,n.options,Le),s=10;return e?t.clientX>i.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+s||t.clientX>r.right&&t.clientY>r.top}function kz(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,h=r?n.bottom:n.right,d=!1;if(!o){if(a&&Qd<c*i){if(!au&&(ou===1?l>u+c*s/2:l<h-c*s/2)&&(au=!0),au)d=!0;else if(ou===1?l<u+Qd:l>h-Qd)return-ou}else if(l>u+c*(1-i)/2&&l<h-c*(1-i)/2)return Oz(e)}return d=d||o,d&&(l<u+c*s/2||l>h-c*s/2)?l>u+c/2?1:-1:0}function Oz(t){return Tr(te)<Tr(t)?1:-1}function Nz(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function Mz(t){tp.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&tp.push(r)}}function Xd(t){return setTimeout(t,0)}function G_(t){return clearTimeout(t)}Om&&it(document,"touchmove",function(t){(Oe.active||Ba)&&t.cancelable&&t.preventDefault()});Oe.utils={on:it,off:Ze,css:ke,find:oN,is:function(e,n){return!!Lr(e,n,e,!1)},extend:pz,throttle:aN,closest:Lr,toggleClass:sr,clone:cN,index:Tr,nextTick:Xd,cancelNextTick:G_,detectDirection:dN,getChild:Vl};Oe.get=function(t){return t[cr]};Oe.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Oe.utils=Ci(Ci({},Oe.utils),r.utils)),Bh.mount(r)})};Oe.create=function(t,e){return new Oe(t,e)};Oe.version=hz;var $t=[],Nc,K_,Y_=!1,zg,jg,np,Mc;function Pz(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?it(document,"dragover",this._handleAutoScroll):this.options.supportPointer?it(document,"pointermove",this._handleFallbackAutoScroll):r.touches?it(document,"touchmove",this._handleFallbackAutoScroll):it(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Ze(document,"dragover",this._handleAutoScroll):(Ze(document,"pointermove",this._handleFallbackAutoScroll),Ze(document,"touchmove",this._handleFallbackAutoScroll),Ze(document,"mousemove",this._handleFallbackAutoScroll)),hS(),Zd(),mz()},nulling:function(){np=K_=Nc=Y_=Mc=zg=jg=null,$t.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(np=n,r||this.options.forceAutoScrollFallback||Uh||cs||ru){Wg(n,this.options,a,r);var l=xs(a,!0);Y_&&(!Mc||s!==zg||o!==jg)&&(Mc&&hS(),Mc=setInterval(function(){var c=xs(document.elementFromPoint(s,o),!0);c!==l&&(l=c,Zd()),Wg(n,i.options,c,r)},10),zg=s,jg=o)}else{if(!this.options.bubbleScroll||xs(a,!0)===_i()){Zd();return}Wg(n,this.options,xs(a,!1),!1)}}},es(t,{pluginName:"scroll",initializeByDefault:!0})}function Zd(){$t.forEach(function(t){clearInterval(t.pid)}),$t=[]}function hS(){clearInterval(Mc)}var Wg=aN(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=_i(),c=!1,u;K_!==n&&(K_=n,Zd(),Nc=e.scroll,u=e.scrollFn,Nc===!0&&(Nc=xs(n,!0)));var h=0,d=Nc;do{var f=d,p=jt(f),m=p.top,g=p.bottom,y=p.left,_=p.right,T=p.width,w=p.height,I=void 0,C=void 0,x=f.scrollWidth,N=f.scrollHeight,k=ke(f),j=f.scrollLeft,K=f.scrollTop;f===l?(I=T<x&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),C=w<N&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(I=T<x&&(k.overflowX==="auto"||k.overflowX==="scroll"),C=w<N&&(k.overflowY==="auto"||k.overflowY==="scroll"));var z=I&&(Math.abs(_-i)<=o&&j+T<x)-(Math.abs(y-i)<=o&&!!j),V=C&&(Math.abs(g-s)<=o&&K+w<N)-(Math.abs(m-s)<=o&&!!K);if(!$t[h])for(var D=0;D<=h;D++)$t[D]||($t[D]={});($t[h].vx!=z||$t[h].vy!=V||$t[h].el!==f)&&($t[h].el=f,$t[h].vx=z,$t[h].vy=V,clearInterval($t[h].pid),(z!=0||V!=0)&&(c=!0,$t[h].pid=setInterval((function(){r&&this.layer===0&&Oe.active._onTouchMove(np);var P=$t[this.layer].vy?$t[this.layer].vy*a:0,A=$t[this.layer].vx?$t[this.layer].vx*a:0;typeof u=="function"&&u.call(Oe.dragged.parentNode[cr],A,P,t,np,$t[this.layer].el)!=="continue"||lN($t[this.layer].el,A,P)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=xs(d,!1)));Y_=c}},30),gN=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function Y0(){}Y0.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Vl(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:gN};es(Y0,{pluginName:"revertOnSpill"});function J0(){}J0.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:gN};es(J0,{pluginName:"removeOnSpill"});Oe.mount(new Pz);Oe.mount(J0,Y0);function xz(t,e,n={}){let r;const{document:i=JO,...s}=n,o={onUpdate:u=>{yN(e,u.oldIndex,u.newIndex)}},a=()=>{const u=typeof t=="string"?i==null?void 0:i.querySelector(t):YO(t);!u||r!==void 0||(r=new Oe(u,{...o,...s}))},l=()=>{r==null||r.destroy(),r=void 0},c=(u,h)=>{if(h!==void 0)r==null||r.option(u,h);else return r==null?void 0:r.option(u)};return hH(a),qO(l),{stop:l,start:a,option:c}}function yN(t,e,n){const r=un(t),i=r?[...Hu(t)]:Hu(t);if(n>=0&&n<i.length){const s=i.splice(e,1)[0];ql(()=>{i.splice(n,0,s),r&&(t.value=i)})}}function Dz(){let t=["Bal","Bar","Dal","Dar","Den","Dok","Jar","Jik","Lar","Rak","Ral","Ril","Sig","Tal","Thor","Ton"],e=["dar","dor","dur","kal","kar","kir","kur","lah","lak","lim","lor","rak","tin","ton","tor","vald"],n=["Rockcrusher","Spinewielder","Skullbearer","Drpare"];return t[Math.floor(Math.random()*t.length)]+e[Math.floor(Math.random()*e.length)]+" "+n[Math.floor(Math.random()*n.length)]}function J_(t=4){let e=t,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}const Lz={class:"header"},Vz={class:"body"},Fz={class:"controls"},Uz=Yt({__name:"Modal.vapor",setup(t,{expose:e}){const n=ie();return e({showModal:()=>{n.value&&n.value.showModal()},closeModal:()=>{n.value&&n.value.close()}}),(s,o)=>(M(),H("dialog",{ref_key:"dialog",ref:n,class:"danger"},[v("div",Lz,[nn(s.$slots,"header")]),v("div",Vz,[nn(s.$slots,"body")]),v("div",Fz,[nn(s.$slots,"controls")])],512))}});function yn(t){this.content=t}yn.prototype={constructor:yn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new yn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new yn(n)},addToStart:function(t,e){return new yn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new yn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new yn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=yn.from(t),t.size?new yn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=yn.from(t),t.size?new yn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=yn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};yn.from=function(t){if(t instanceof yn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new yn(e)};function _N(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=_N(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function vN(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=vN(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class J{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new J(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new J(r,i)}cutByIndex(e,n){return e==n?J.empty:e==0&&n==this.content.length?this:new J(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new J(i,s)}addToStart(e){return new J([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new J(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return _N(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return vN(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Ed(0,e);if(e==this.size)return Ed(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?Ed(r+1,o):Ed(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return J.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new J(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return J.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new J(n||e,r)}static from(e){if(!e)return J.empty;if(e instanceof J)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new J([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}J.empty=new J([],0);const qg={index:0,offset:0};function Ed(t,e){return qg.index=t,qg.offset=e,qg}function rp(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!rp(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!rp(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ft=class Q_{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&rp(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Q_.none;if(e instanceof Q_)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ft.none=[];class ip extends Error{}class ue{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=EN(this.content,e+this.openStart,n);return r&&new ue(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ue(bN(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ue.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ue(J.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new ue(e,r,i)}}ue.empty=new ue(J.empty,0,0);function bN(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(bN(s.content,e-i-1,n-i-1)))}function EN(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=EN(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function Bz(t,e,n){if(n.openStart>t.depth)throw new ip("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ip("Inconsistent open depths");return TN(t,e,n,0)}function TN(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=TN(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Xo(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=$z(n,t);return Xo(s,SN(t,o,a,e,r))}else return Xo(s,sp(t,e,r))}function wN(t,e){if(!e.type.compatibleContent(t.type))throw new ip("Cannot join "+e.type.name+" onto "+t.type.name)}function X_(t,e,n){let r=t.node(n);return wN(r,e.node(n)),r}function Qo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function lu(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Qo(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Qo(i.child(a),r);e&&e.depth==n&&e.textOffset&&Qo(e.nodeBefore,r)}function Xo(t,e){return t.type.checkContent(e),t.copy(e)}function SN(t,e,n,r,i){let s=t.depth>i&&X_(t,e,i+1),o=r.depth>i&&X_(n,r,i+1),a=[];return lu(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(wN(s,o),Qo(Xo(s,SN(t,e,n,r,i+1)),a)):(s&&Qo(Xo(s,sp(t,e,i+1)),a),lu(e,n,i,a),o&&Qo(Xo(o,sp(n,r,i+1)),a)),lu(r,null,i,a),new J(a)}function sp(t,e,n){let r=[];if(lu(null,t,n,r),t.depth>n){let i=X_(t,e,n+1);Qo(Xo(i,sp(t,e,n+1)),r)}return lu(e,null,n,r),new J(r)}function $z(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(J.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class zu{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ft.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new op(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new zu(n,r,s)}static resolveCached(e,n){for(let i=0;i<Gg.length;i++){let s=Gg[i];if(s.pos==n&&s.doc==e)return s}let r=Gg[Kg]=zu.resolve(e,n);return Kg=(Kg+1)%Hz,r}}let Gg=[],Kg=0,Hz=12;class op{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const zz=Object.create(null);let Zo=class Z_{constructor(e,n,r,i=ft.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||J.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&rp(this.attrs,n||e.defaultAttrs||zz)&&ft.sameSet(this.marks,r||ft.none)}copy(e=null){return e==this.content?this:new Z_(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Z_(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ue.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new ue(c,i.depth-o,s.depth-o)}replace(e,n,r){return Bz(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return zu.resolveCached(this,e)}resolveNoCache(e){return zu.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),IN(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=J.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=ft.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!ft.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=J.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};Zo.prototype.text=void 0;class ap extends Zo{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):IN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ap(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ap(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function IN(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class fa{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new jz(e,n);if(r.next==null)return fa.empty;let i=AN(r);r.next&&r.err("Unexpected trailing text");let s=Qz(Jz(i));return Xz(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return J.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let d=s(h,a.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}fa.empty=new fa(!0);class jz{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function AN(t){let e=[];do e.push(Wz(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Wz(t){let e=[];do e.push(qz(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function qz(t){let e=Yz(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Gz(t,e);else break;return e}function dS(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Gz(t,e){let n=dS(t),r=n;return t.eat(",")&&(t.next!="}"?r=dS(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Kz(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Yz(t){if(t.eat("(")){let e=AN(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Kz(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Jz(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function CN(t,e){return e-t}function fS(t,e){let n=[];return r(e),n.sort(CN);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Qz(t){let e=Object.create(null);return n(fS(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);fS(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new fa(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(CN);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function Xz(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function RN(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function kN(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function ON(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new Zz(t[n]);return e}let pS=class NN{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ON(r.attrs),this.defaultAttrs=RN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==fa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:kN(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Zo(this,this.computeAttrs(e),J.from(n),ft.setFrom(r))}createChecked(e=null,n,r){return n=J.from(n),this.checkContent(n),new Zo(this,this.computeAttrs(e),n,ft.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=J.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(J.empty,!0);return s?new Zo(this,e,n.append(s),ft.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ft.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new NN(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class Zz{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Nm{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=ON(i.attrs),this.excluded=null;let s=RN(this.attrs);this.instance=s?new ft(this,s):null}create(e=null){return!e&&this.instance?this.instance:new ft(this,kN(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Nm(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class ej{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=yn.from(e.nodes),n.marks=yn.from(e.marks||{}),this.nodes=pS.compile(this.spec.nodes,this),this.marks=Nm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=fa.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?mS(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:mS(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof pS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new ap(r,r.defaultAttrs,e,ft.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Zo.fromJSON(this,e)}markFromJSON(e){return ft.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function mS(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function tj(t){return t.tag!=null}function nj(t){return t.style!=null}class Fl{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{tj(r)?this.tags.push(r):nj(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new yS(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new yS(this,n,!0);return r.addAll(e,n.from,n.to),ue.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(sj(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=_S(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=_S(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Fl(e,Fl.schemaRules(e)))}}const MN={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},rj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},PN={ol:!0,ul:!0},lp=1,cp=2,cu=4;function gS(t,e,n){return e!=null?(e?lp:0)|(e==="full"?cp:0):t&&t.whitespace=="pre"?lp|cp:n&~cu}class Td{constructor(e,n,r,i,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=ft.none,this.stashMarks=[],this.match=o||(a&cu?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(J.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&lp)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=J.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(J.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):aj(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!MN.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class yS{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=gS(null,n.preserveWhitespace,0)|(r?cu:0);i?s=new Td(i.type,i.attrs,ft.none,ft.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Td(null,null,ft.none,ft.none,!0,null,o):s=new Td(e.schema.topNodeType,null,ft.none,ft.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(oj(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&cp||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&lp)r.options&cp?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;PN.hasOwnProperty(r)&&this.parser.normalizeLists&&ij(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:rj.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(MN.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=ft.none,r=ft.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=gS(e,i,s.options);s.options&cu&&s.content.length==0&&(o|=cu),this.nodes.push(new Td(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=lj(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function ij(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&PN.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function sj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function oj(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function _S(t){let e={};for(let n in t)e[n]=t[n];return e}function aj(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function lj(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class hi{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Yg(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=hi.renderSpec(Yg(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&hi.renderSpec(Yg(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let h=u.indexOf(" ");h>0?a.setAttributeNS(u.slice(0,h),u.slice(h+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let h=n[u];if(h===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:f}=hi.renderSpec(e,h,r);if(a.appendChild(d),f){if(o)throw new RangeError("Multiple content holes");o=f}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new hi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=vS(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return vS(e.marks)}}function vS(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Yg(t){return t.document||window.document}const xN=65535,DN=Math.pow(2,16);function cj(t,e){return t+e*DN}function bS(t){return t&xN}function uj(t){return(t-(t&xN))/DN}const LN=1,VN=2,ef=4,FN=8;class ev{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&FN)>0}get deletedBefore(){return(this.delInfo&(LN|ef))>0}get deletedAfter(){return(this.delInfo&(VN|ef))>0}get deletedAcross(){return(this.delInfo&ef)>0}}class ur{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ur.empty)return ur.empty}recover(e){let n=0,r=bS(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+uj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(e<=h){let d=c?e==l?-1:e==h?1:n:n,f=l+i+(d<0?0:u);if(r)return f;let p=e==(n<0?l:h)?null:cj(a/3,e-l),m=e==l?VN:e==h?LN:ef;return(n<0?e!=l:e!=h)&&(m|=FN),new ev(f,m,p)}i+=u-c}return r?e+i:new ev(e+i,0,null)}touches(e,n){let r=0,i=bS(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new ur(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ur.empty:new ur(e<0?[0,-e,0]:[0,0,e])}}ur.empty=new ur([]);class fl{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new fl(this.maps,this.mirror,e,n)}copy(){return new fl(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new fl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new ev(e,i,null)}}const Jg=Object.create(null);class Un{getMap(){return ur.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Jg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Jg)throw new RangeError("Duplicate use of step JSON ID "+e);return Jg[e]=n,n.prototype.jsonID=e,n}}class qt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new qt(e,null)}static fail(e){return new qt(null,e)}static fromReplace(e,n,r,i){try{return qt.ok(e.replace(n,r,i))}catch(s){if(s instanceof ip)return qt.fail(s.message);throw s}}}function Q0(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Q0(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return J.fromArray(r)}class Ds extends Un{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ue(Q0(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return qt.fromReplace(e,this.from,this.to,s)}invert(){return new di(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ds(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ds&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ds(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ds(n.from,n.to,e.markFromJSON(n.mark))}}Un.jsonID("addMark",Ds);class di extends Un{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ue(Q0(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return qt.fromReplace(e,this.from,this.to,r)}invert(){return new Ds(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new di(n.pos,r.pos,this.mark)}merge(e){return e instanceof di&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new di(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new di(n.from,n.to,e.markFromJSON(n.mark))}}Un.jsonID("removeMark",di);class Ls extends Un{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return qt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return qt.fromReplace(e,this.pos,this.pos+1,new ue(J.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Ls(this.pos,n.marks[i]);return new Ls(this.pos,this.mark)}}return new Ul(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ls(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ls(n.pos,e.markFromJSON(n.mark))}}Un.jsonID("addNodeMark",Ls);class Ul extends Un{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return qt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return qt.fromReplace(e,this.pos,this.pos+1,new ue(J.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ls(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ul(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ul(n.pos,e.markFromJSON(n.mark))}}Un.jsonID("removeNodeMark",Ul);class on extends Un{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&tv(e,this.from,this.to)?qt.fail("Structure replace would overwrite content"):qt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ur([this.from,this.to-this.from,this.slice.size])}invert(e){return new on(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new on(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof on)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ue.empty:new ue(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new on(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ue.empty:new ue(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new on(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new on(n.from,n.to,ue.fromJSON(e,n.slice),!!n.structure)}}Un.jsonID("replace",on);class ln extends Un{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(tv(e,this.from,this.gapFrom)||tv(e,this.gapTo,this.to)))return qt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return qt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?qt.fromReplace(e,this.from,this.to,r):qt.fail("Content does not fit in gap")}getMap(){return new ur([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ln(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new ln(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ln(n.from,n.to,n.gapFrom,n.gapTo,ue.fromJSON(e,n.slice),n.insert,!!n.structure)}}Un.jsonID("replaceAround",ln);function tv(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function hj(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[m])?o.to=f:i.push(o=new di(d,f,h[m])));a&&a.to==d?a.to=f:s.push(a=new Ds(d,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function dj(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Nm){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let h=l[u],d;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&h.eq(i[f].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new di(o.from,o.to,o.style)))}function fj(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new on(o,c,ue.empty));else{r=u;for(let h=0;h<l.marks.length;h++)n.allowsMarkType(l.marks[h].type)||t.step(new di(o,c,l.marks[h]));if(l.isText&&!n.spec.code){let h,d=/\r?\n|\r/g,f;for(;h=d.exec(l.text);)f||(f=new ue(J.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new on(o+h.index,o+h.index+h[0].length,f))}}o=c}if(!r.validEnd){let a=r.fillBefore(J.empty,!0);t.replace(o,o,new ue(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function pj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function oc(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!pj(i,s,o))break}return null}function mj(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=J.empty,h=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=J.from(r.node(p).copy(u)),h++):l--;let d=J.empty,f=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=J.from(i.node(p).copy(d)),f++):c++;t.step(new ln(l,c,o,a,new ue(u.append(d),h,f),u.size-h,!0))}function X0(t,e,n=null,r=t){let i=gj(t,e),s=i&&yj(r,e);return s?i.map(ES).concat({type:e,attrs:n}).concat(s.map(ES)):null}function ES(t){return{type:t,attrs:null}}function gj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function yj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function _j(t,e,n){let r=J.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=J.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new ln(i,s,i,s,new ue(r,0,0),n.length,!0))}function vj(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&bj(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return t.step(new ln(c,u,c+1,u-1,new ue(J.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function bj(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Ej(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ln(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ue(J.from(o),0,0),1,!0))}function pl(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let h=i.node(c),d=i.index(c);if(h.type.spec.isolating)return!1;let f=h.content.cutByIndex(d,h.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||h;if(!h.canReplace(d+1,h.childCount)||!m.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Tj(t,e,n=1,r){let i=t.doc.resolve(e),s=J.empty,o=J.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=J.from(i.node(a).copy(s));let u=r&&r[c];o=J.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new on(e,e,new ue(s.append(o),n,n),!0))}function po(t,e){let n=t.resolve(e),r=n.index();return UN(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function UN(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Mm(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&UN(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function wj(t,e,n){let r=new on(e-n,e+n,ue.empty,!0);t.step(r)}function Sj(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function BN(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Pm(t,e,n=e,r=ue.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return $N(i,s,r)?new on(e,n,r):new Ij(i,s,r).fit()}function $N(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Ij{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=J.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=J.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ue(s,o,a);return e>-1?new ln(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new on(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Qg(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(n==1&&(o?c.matchType(o.type)||(h=c.fillBefore(J.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:h};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Qg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ue(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Qg(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new ue(Pc(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ue(Pc(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:h,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));h=h.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=h.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(h=g,u.push(HN(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=xc(this.placed,n,J.from(u)),this.frontier[n].match=h,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<f;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?ue.empty:new ue(Pc(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new ue(Pc(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Xg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Xg(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Xg(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=xc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=xc(this.placed,this.depth,J.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(J.empty,!0);n.childCount&&(this.placed=xc(this.placed,this.frontier.length,n))}}function Pc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Pc(t.firstChild.content,e-1,n)))}function xc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(xc(t.lastChild.content,e-1,n)))}function Qg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function HN(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,HN(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(J.empty,!0)))),t.copy(r)}function Xg(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Aj(n,s.content,o)?a:null}function Aj(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Cj(t){return t.spec.defining||t.spec.definingForContent}function Rj(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if($N(i,s,r))return t.step(new on(e,n,r));let o=jN(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let d=i.depth,f=i.pos-1;d>0;d--,f--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:i.before(d)==f&&o.splice(1,0,-d)}let l=o.indexOf(a),c=[],u=r.openStart;for(let d=r.content,f=0;;f++){let p=d.firstChild;if(c.push(p),f==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let f=c[d],p=Cj(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=d;else if(p||!f.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let f=(d+u+1)%(r.openStart+1),p=c[f];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let _=i.node(g-1),T=i.index(g-1);if(_.canReplaceWith(T,T,p.type,p.marks))return t.replace(i.before(g),y?s.after(g):n,new ue(zN(r.content,0,r.openStart,f),f,r.openEnd))}}let h=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>h));d--){let f=o[d];f<0||(e=i.before(f),n=s.after(f))}}function zN(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(zN(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(J.empty,!0))}return t}function kj(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Sj(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ue(J.from(r),0,0))}function Oj(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=jN(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function jN(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class ml extends Un{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return qt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return qt.fromReplace(e,this.pos,this.pos+1,new ue(J.from(i),0,n.isLeaf?0:1))}getMap(){return ur.empty}invert(e){return new ml(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ml(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ml(n.pos,n.attr,n.value)}}Un.jsonID("attr",ml);class ju extends Un{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return qt.ok(r)}getMap(){return ur.empty}invert(e){return new ju(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ju(n.attr,n.value)}}Un.jsonID("docAttr",ju);let Bl=class extends Error{};Bl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Bl.prototype=Object.create(Error.prototype);Bl.prototype.constructor=Bl;Bl.prototype.name="TransformError";class Nj{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new fl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Bl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ue.empty){let i=Pm(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ue(J.from(r),0,0))}delete(e,n){return this.replace(e,n,ue.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Rj(this,e,n,r),this}replaceRangeWith(e,n,r){return kj(this,e,n,r),this}deleteRange(e,n){return Oj(this,e,n),this}lift(e,n){return mj(this,e,n),this}join(e,n=1){return wj(this,e,n),this}wrap(e,n){return _j(this,e,n),this}setBlockType(e,n=e,r,i=null){return vj(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Ej(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new ml(e,n,r)),this}setDocAttribute(e,n){return this.step(new ju(e,n)),this}addNodeMark(e,n){return this.step(new Ls(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ft)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Ul(e,n)),this}split(e,n=1,r){return Tj(this,e,n,r),this}addMark(e,n,r){return hj(this,e,n,r),this}removeMark(e,n,r){return dj(this,e,n,r),this}clearIncompatible(e,n,r){return fj(this,e,n,r),this}}const Zg=Object.create(null);class je{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Mj(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ue.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?ue.empty:n),a==0&&SS(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),SS(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Be(e):$a(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?$a(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):$a(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new qr(e.node(0))}static atStart(e){return $a(e,e,0,0,1)||new qr(e)}static atEnd(e){return $a(e,e,e.content.size,e.childCount,-1)||new qr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Zg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Zg)throw new RangeError("Duplicate use of selection JSON ID "+e);return Zg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}je.prototype.visible=!0;class Mj{constructor(e,n){this.$from=e,this.$to=n}}let TS=!1;function wS(t){!TS&&!t.parent.inlineContent&&(TS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends je{constructor(e,n=e){wS(e),wS(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return je.near(r);let i=e.resolve(n.map(this.anchor));return new Be(i.parent.inlineContent?i:r,r)}replace(e,n=ue.empty){if(super.replace(e,n),n==ue.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new xm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=je.findFrom(n,r,!0)||je.findFrom(n,-r,!0);if(s)n=s.$head;else return je.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(je.findFrom(e,-r,!0)||je.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Be(e,n)}}je.jsonID("text",Be);class xm{constructor(e,n){this.anchor=e,this.head=n}map(e){return new xm(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class Re extends je{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?je.near(s):new Re(s)}content(){return new ue(J.from(this.node),0,0)}eq(e){return e instanceof Re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Z0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(e.resolve(n.anchor))}static create(e,n){return new Re(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Re.prototype.visible=!1;je.jsonID("node",Re);class Z0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new xm(r,r):new Z0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Re.isSelectable(r)?new Re(n):je.near(n)}}class qr extends je{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ue.empty){if(n==ue.empty){e.delete(0,e.doc.content.size);let r=je.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new qr(e)}map(e){return new qr(e)}eq(e){return e instanceof qr}getBookmark(){return Pj}}je.jsonID("all",qr);const Pj={map(){return this},resolve(t){return new qr(t)}};function $a(t,e,n,r,i,s=!1){if(e.inlineContent)return Be.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Re.isSelectable(a))return Re.create(t,n-(i<0?a.nodeSize:0))}else{let l=$a(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function SS(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof on||i instanceof ln))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(je.near(t.doc.resolve(o),n))}const IS=1,wd=2,AS=4;class xj extends Nj{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|IS)&~wd,this.storedMarks=null,this}get selectionSet(){return(this.updated&IS)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wd,this}ensureMarks(e){return ft.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wd)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~wd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ft.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(je.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=AS,this}get scrolledIntoView(){return(this.updated&AS)>0}}function CS(t,e){return!e||!t?t:t.bind(e)}class Dc{constructor(e,n,r){this.name=e,this.init=CS(n.init,r),this.apply=CS(n.apply,r)}}const Dj=[new Dc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Dc("selection",{init(t,e){return t.selection||je.atStart(e.doc)},apply(t){return t.selection}}),new Dc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Dc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class ey{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Dj.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Dc(r.key,r.spec.state,r))})}}class Ga{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ga(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new xj(this)}static create(e){let n=new ey(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ga(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new ey(this.schema,e.plugins),r=n.fields,i=new Ga(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new ey(e.schema,e.plugins),s=new Ga(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Zo.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=je.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function WN(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=WN(i,e,{})),n[r]=i}return n}class _r{constructor(e){this.spec=e,this.props={},e.props&&WN(e.props,this,this.props),this.key=e.key?e.key.key:qN("plugin")}getState(e){return e[this.key]}}const ty=Object.create(null);function qN(t){return t in ty?t+"$"+ ++ty[t]:(ty[t]=0,t+"$")}class us{constructor(e="key"){this.key=qN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const bn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Wu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let nv=null;const Li=function(t,e,n){let r=nv||(nv=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Lj=function(){nv=null},pa=function(t,e,n,r){return n&&(RS(t,e,n,r,-1)||RS(t,e,n,r,1))},Vj=/^(img|br|input|textarea|hr)$/i;function RS(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:si(t))){let s=t.parentNode;if(!s||s.nodeType!=1||$h(t)||Vj.test(t.nodeName)||t.contentEditable=="false")return!1;e=bn(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?si(t):0}else return!1}}function si(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Fj(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=si(t)}else if(t.parentNode&&!$h(t))e=bn(t),t=t.parentNode;else return null}}function Uj(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!$h(t))e=bn(t)+1,t=t.parentNode;else return null}}function Bj(t,e,n){for(let r=e==0,i=e==si(t);r||i;){if(t==n)return!0;let s=bn(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==si(t)}}function $h(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Dm=function(t){return t.focusNode&&pa(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Oo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function $j(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Hj(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const Ri=typeof navigator<"u"?navigator:null,kS=typeof document<"u"?document:null,mo=Ri&&Ri.userAgent||"",rv=/Edge\/(\d+)/.exec(mo),GN=/MSIE \d/.exec(mo),iv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(mo),er=!!(GN||iv||rv),Ws=GN?document.documentMode:iv?+iv[1]:rv?+rv[1]:0,Xr=!er&&/gecko\/(\d+)/i.test(mo);Xr&&+(/Firefox\/(\d+)/.exec(mo)||[0,0])[1];const sv=!er&&/Chrome\/(\d+)/.exec(mo),zn=!!sv,zj=sv?+sv[1]:0,Wn=!er&&!!Ri&&/Apple Computer/.test(Ri.vendor),$l=Wn&&(/Mobile\/\w+/.test(mo)||!!Ri&&Ri.maxTouchPoints>2),Sr=$l||(Ri?/Mac/.test(Ri.platform):!1),jj=Ri?/Win/.test(Ri.platform):!1,Fr=/Android \d/.test(mo),Hh=!!kS&&"webkitFontSmoothing"in kS.documentElement.style,Wj=Hh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function qj(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function xi(t,e){return typeof t=="number"?t:t[e]}function Gj(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function OS(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Wu(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?qj(s):Gj(a),u=0,h=0;if(e.top<c.top+xi(r,"top")?h=-(c.top-e.top+xi(i,"top")):e.bottom>c.bottom-xi(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+xi(i,"top")-c.top:e.bottom-c.bottom+xi(i,"bottom")),e.left<c.left+xi(r,"left")?u=-(c.left-e.left+xi(i,"left")):e.right>c.right-xi(r,"right")&&(u=e.right-c.right+xi(i,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let d=a.scrollLeft,f=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let p=a.scrollLeft-d,m=a.scrollTop-f;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function Kj(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:KN(t.dom)}}function KN(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Wu(r));return e}function Yj({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;YN(n,r==0?0:r-e)}function YN(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let xa=null;function Jj(t){if(t.setActive)return t.setActive();if(xa)return t.focus(xa);let e=KN(t);t.focus(xa==null?{get preventScroll(){return xa={preventScroll:!0},!0}}:void 0),xa||(xa=!1,YN(e,0))}function JN(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Li(u).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?Qj(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:JN(n,i)}function Qj(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=vs(r,1);if(s.top!=s.bottom&&eb(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function eb(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Xj(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Zj(t,e,n){let{node:r,offset:i}=JN(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function eW(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function QN(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(eb(e,c))return QN(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function tW(t,e){let n=t.dom.ownerDocument,r,i=0,s=Hj(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!eb(e,c)||(o=QN(t.dom,e,c),!o))return null}if(Wn)for(let c=o;r&&c;c=Wu(c))c.draggable&&(r=void 0);if(o=Xj(o,e),r){if(Xr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;Hh&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=eW(t,r,i,e))}a==null&&(a=Zj(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function NS(t){return t.top<t.bottom||t.left<t.right}function vs(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(NS(r))return r}return Array.prototype.find.call(n,NS)||t.getBoundingClientRect()}const nW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function XN(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Hh||Xr;if(r.nodeType==3)if(o&&(nW.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=vs(Li(r,i,i),n);if(Xr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=vs(Li(r,i-1,i-1),-1);if(c.top==l.top){let u=vs(Li(r,i,i+1),-1);if(u.top!=l.top)return bc(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,bc(vs(Li(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==si(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return ny(l.getBoundingClientRect(),!1)}if(s==null&&i<si(r)){let l=r.childNodes[i];if(l.nodeType==1)return ny(l.getBoundingClientRect(),!0)}return ny(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==si(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Li(l,si(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return bc(vs(c,1),!1)}if(s==null&&i<si(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Li(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return bc(vs(c,-1),!0)}return bc(vs(r.nodeType==3?Li(r):r,-n),n>=0)}function bc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ny(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ZN(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function rW(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return ZN(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=XN(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Li(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const iW=/[\u0590-\u08ac]/;function sW(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return!iW.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:ZN(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),g})}let MS=null,PS=null,xS=!1;function oW(t,e,n){return MS==e&&PS==n?xS:(MS=e,PS=n,xS=n=="up"||n=="down"?rW(t,e,n):sW(t,e,n))}const Nr=0,DS=1,Uo=2,ki=3;class zh{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Nr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>bn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof tM){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof eM&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?bn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?bn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let h=a;h>0;h--){let d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=bn(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=bn(h.dom);break}n+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let d=0,f=0;d<this.children.length;d++){let p=this.children[d],m=f+p.size;if(s>f&&o<m)return p.setSelection(e-f-p.border,n-f-p.border,r,i);f=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((Xr||Wn)&&e==n){let{node:d,offset:f}=a;if(d.nodeType==3){if(u=!!(f&&d.nodeValue[f-1]==`
`),u&&f==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:bn(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=d.childNodes[f-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(Xr&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&Wn)&&pa(a.node,a.offset,c.anchorNode,c.anchorOffset)&&pa(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let f=a;a=l,l=f}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Uo:DS,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ki:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Uo:ki}r=o}this.dirty=Uo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Uo:DS;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class eM extends zh{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Nr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class aW extends zh{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ma extends zh{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=hi.renderSpec(document,n.type.spec.toDOM(n,r))),new ma(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&ki||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ki&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Nr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Nr}}slice(e,n,r){let i=ma.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=lv(s,n,o,r)),e>0&&(s=lv(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class qs extends zh{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,h=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=hi.renderSpec(document,n.type.spec.toDOM(n)));!h&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=iM(u,r,n),c?l=new lW(e,n,r,i,u,h||null,d,c,s,o+1):n.isText?new Lm(e,n,r,i,u,d,s):new qs(e,n,r,i,u,h||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>J.empty)}return e}matchesNode(e,n,r){return this.dirty==Nr&&e.eq(this.node)&&av(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new uW(this,o&&o.node,e);fW(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?ft.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,h,d)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,h,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,f,e)||l.updateNextNode(c,u,h,e,d,i)||l.addNode(c,u,h,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Uo)&&(o&&this.protectLocalComposition(e,o),nM(this.contentDOM,this.children,e),$l&&pW(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=mW(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new aW(this,s,n,i);e.input.compositionNodes.push(o),this.children=lv(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==ki||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Nr}updateOuterDeco(e){if(av(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=rM(this.dom,this.nodeDOM,ov(this.outerDeco,this.node,n),ov(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function LS(t,e,n,r,i){iM(r,e,t);let s=new qs(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Lm extends qs{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==ki||this.dirty!=Nr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Nr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Nr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Lm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ki)}get domAtom(){return!1}isText(e){return this.node.text==e}}class tM extends zh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Nr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class lW extends qs{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==ki)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function nM(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=VS(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof ma){let l=r?r.previousSibling:t.lastChild;nM(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=VS(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const uu=function(t){t&&(this.nodeName=t)};uu.prototype=Object.create(null);const Bo=[new uu];function ov(t,e,n){if(t.length==0)return Bo;let r=n?Bo[0]:new uu,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new uu(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new uu(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function rM(t,e,n,r){if(n==Bo&&r==Bo)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Bo[0]),i=l}cW(i,a||Bo[0],o)}return i}function cW(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function iM(t,e,n){return rM(t,t,Bo,ov(e,n,t.nodeType!=1))}function av(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function VS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class uW{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hW(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Nr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ma.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==ki&&o.dom==o.contentDOM&&(o.dirty=Uo),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof qs){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,h,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=ki&&av(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(l,e,n,r,i,o)))return this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Uo,h.updateChildren(i,o+1),h.dirty=Nr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=qs.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=qs.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new eM(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ma;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Lm)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Wn||zn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new tM(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hW(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ma)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function dW(t,e){return t.type.side-e.type.side}function fW(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(u?(h||(h=[u])).push(g):u=g)}if(u)if(h){h.sort(dW);for(let g=0;g<h.length;g++)n(h[g],c,!!l)}else n(u,c,!!l);let d,f;if(l)f=-1,d=l,l=null;else if(c<t.childCount)f=c,d=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=d.cut(g-s),d=d.cut(0,g-s),p=g,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();r(d,m,e.forChild(s,d),f),s=p}}function pW(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function mW(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function lv(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function tb(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Dm(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&Re.isSelectable(u)&&i.parent&&!(u.isInline&&Bj(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new Re(o==h?a:r.resolve(h))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=nb(t,l,a,u)}return c}function sM(t){return t.editable?t.hasFocus():aM(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ji(t,e=!1){let n=t.state.selection;if(oM(t,n),!!sM(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&zn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&pa(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)yW(t);else{let{anchor:r,head:i}=n,s,o;FS&&!(n instanceof Be)&&(n.$from.parent.inlineContent||(s=US(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=US(t,n.to))),t.docView.setSelection(r,i,t.root,e),FS&&(s&&BS(s),o&&BS(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gW(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const FS=Wn||zn&&zj<63;function US(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Wn&&i&&i.contentEditable=="false")return ry(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ry(i);if(s)return ry(s)}}function ry(t){return t.contentEditable="true",Wn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function BS(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function gW(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!sM(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function yW(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,bn(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&er&&Ws<=11&&(r.disabled=!0,r.disabled=!1)}function oM(t,e){if(e instanceof Re){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&($S(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else $S(t)}function $S(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function nb(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Be.between(e,n,r)}function HS(t){return t.editable&&!t.hasFocus()?!1:aM(t)}function aM(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function _W(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return pa(e.node,e.offset,n.anchorNode,n.anchorOffset)}function cv(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&je.findFrom(s,e)}function As(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function zS(t,e,n){let r=t.state.selection;if(r instanceof Be)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return As(t,new Be(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=cv(t.state,e);return i&&i instanceof Re?As(t,i):!1}else if(!(Sr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Re.isSelectable(s)?As(t,new Re(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Hh?As(t,new Be(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Re&&r.node.isInline)return As(t,new Be(e>0?r.$to:r.$from));{let i=cv(t.state,e);return i?As(t,i):!1}}}function up(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function hu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Da(t,e){return e<0?vW(t):bW(t)}function vW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Xr&&n.nodeType==1&&r<up(n)&&hu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(hu(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(lM(n))break;{let a=n.previousSibling;for(;a&&hu(a,-1);)i=n.parentNode,s=bn(a),a=a.previousSibling;if(a)n=a,r=up(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?uv(t,n,r):i&&uv(t,i,s)}function bW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=up(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(hu(a,1))s=n,o=++r;else break}else{if(lM(n))break;{let a=n.nextSibling;for(;a&&hu(a,1);)s=a.parentNode,o=bn(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=up(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&uv(t,s,o)}function lM(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function EW(t,e){for(;t&&e==t.childNodes.length&&!$h(t);)e=bn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function TW(t,e){for(;t&&!e&&!$h(t);)e=bn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function uv(t,e,n){if(e.nodeType!=3){let s,o;(o=EW(e,n))?(e=o,n=0):(s=TW(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(Dm(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ji(t)},50)}function jS(t,e){let n=t.state.doc.resolve(e);if(!(zn||jj)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function WS(t,e,n){let r=t.state.selection;if(r instanceof Be&&!r.empty||n.indexOf("s")>-1||Sr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=cv(t.state,e);if(o&&o instanceof Re)return As(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof qr?je.near(o,e):je.findFrom(o,e);return a?As(t,a):!1}return!1}function qS(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function GS(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function wW(t){if(!Wn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;GS(t,r,"true"),setTimeout(()=>GS(t,r,"false"),20)}return!1}function SW(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function IW(t,e){let n=e.keyCode,r=SW(e);if(n==8||Sr&&n==72&&r=="c")return qS(t,-1)||Da(t,-1);if(n==46&&!e.shiftKey||Sr&&n==68&&r=="c")return qS(t,1)||Da(t,1);if(n==13||n==27)return!0;if(n==37||Sr&&n==66&&r=="c"){let i=n==37?jS(t,t.state.selection.from)=="ltr"?-1:1:-1;return zS(t,i,r)||Da(t,i)}else if(n==39||Sr&&n==70&&r=="c"){let i=n==39?jS(t,t.state.selection.from)=="ltr"?1:-1:1;return zS(t,i,r)||Da(t,i)}else{if(n==38||Sr&&n==80&&r=="c")return WS(t,-1,r)||Da(t,-1);if(n==40||Sr&&n==78&&r=="c")return wW(t)||WS(t,1,r)||Da(t,1);if(r==(Sr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function cM(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||hi.fromSchema(t.state.schema),a=mM(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=pM[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d}}function uM(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new ue(J.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ue.empty;let h=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(h)a=h;else{let d=i.marks(),{schema:f}=t.state,p=hi.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(f.text(m,d)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=RW(n),Hh&&kW(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Fl.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!AW.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=OW(KS(a,+u[1],+u[2]),u[4]);else if(a=ue.maxOpen(CW(a.content,i),!0),a.openStart||a.openEnd){let h=0,d=0;for(let f=a.content.firstChild;h<a.openStart&&!f.type.spec.isolating;h++,f=f.firstChild);for(let f=a.content.lastChild;d<a.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);a=KS(a,h,d)}return t.someProp("transformPasted",h=>{a=h(a,t)}),a}const AW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function CW(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&dM(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=fM(o[o.length-1],s.length));let u=hM(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return J.from(o)}return t}function hM(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,J.from(t));return t}function dM(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=dM(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(J.from(hM(n,t,i+1))))}}function fM(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,fM(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(J.empty,!0);return t.copy(n.append(r))}function hv(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=hv(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(J.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function KS(t,e,n){return e<t.openStart&&(t=new ue(hv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ue(hv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const pM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let YS=null;function mM(){return YS||(YS=document.implementation.createHTMLDocument("title"))}function RW(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=mM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&pM[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function kW(t){let e=t.querySelectorAll(zn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function OW(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=J.from(l.create(r[a+1],i)),s++,o++}return new ue(i,s,o)}const qn={},Gn={},NW={touchstart:!0,touchmove:!0};class MW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function PW(t){for(let e in qn){let n=qn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{DW(t,r)&&!rb(t,r)&&(t.editable||!(r.type in Gn))&&n(t,r)},NW[e]?{passive:!0}:void 0)}Wn&&t.dom.addEventListener("input",()=>null),dv(t)}function Vs(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function xW(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function dv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>rb(t,r))})}function rb(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function DW(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function LW(t,e){!rb(t,e)&&qn[e.type]&&(t.editable||!(e.type in Gn))&&qn[e.type](t,e)}Gn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!yM(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Fr&&zn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),$l&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Oo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||IW(t,n)?n.preventDefault():Vs(t,"key")};Gn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Gn.keypress=(t,e)=>{let n=e;if(yM(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Sr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Be)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Vm(t){return{left:t.clientX,top:t.clientY}}function VW(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function ib(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function gl(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function FW(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Re.isSelectable(r)?(gl(t,new Re(n),"pointer"),!0):!1}function UW(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Re&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(gl(t,Re.create(t.state.doc,i),"pointer"),!0):!1}function BW(t,e,n,r,i){return ib(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?UW(t,n):FW(t,n))}function $W(t,e,n,r){return ib(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function HW(t,e,n,r){return ib(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||zW(t,n,r)}function zW(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(gl(t,Be.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)gl(t,Be.create(r,a+1,a+1+o.content.size),"pointer");else if(Re.isSelectable(o))gl(t,Re.create(r,a),"pointer");else continue;return!0}}function sb(t){return hp(t)}const gM=Sr?"metaKey":"ctrlKey";qn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=sb(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&VW(n,t.input.lastClick)&&!n[gM]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(Vm(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new jW(t,o,n,!!r)):(s=="doubleClick"?$W:HW)(t,o.pos,o.inside,n)?n.preventDefault():Vs(t,"pointer"))};class jW{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[gM],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Re&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Xr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Vs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ji(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Vm(e))),this.updateAllowDefault(e),this.allowDefault||!n?Vs(this.view,"pointer"):BW(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Wn&&this.mightDrag&&!this.mightDrag.node.isAtom||zn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(gl(this.view,je.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Vs(this.view,"pointer")}move(e){this.updateAllowDefault(e),Vs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}qn.touchstart=t=>{t.input.lastTouch=Date.now(),sb(t),Vs(t,"pointer")};qn.touchmove=t=>{t.input.lastTouch=Date.now(),Vs(t,"pointer")};qn.contextmenu=t=>sb(t);function yM(t,e){return t.composing?!0:Wn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const WW=Fr?5e3:-1;Gn.compositionstart=Gn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),hp(t,!0),t.markCursor=null;else if(hp(t),Xr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}_M(t,WW)};Gn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,_M(t,20))};function _M(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>hp(t),e))}function vM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=GW());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function qW(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Fj(e.focusNode,e.focusOffset),r=Uj(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n}function GW(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function hp(t,e=!1){if(!(Fr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),vM(t),e||t.docView&&t.docView.dirty){let n=tb(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function KW(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const qu=er&&Ws<15||$l&&Wj<604;qn.copy=Gn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=qu?null:n.clipboardData,o=r.content(),{dom:a,text:l}=cM(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):KW(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function YW(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function JW(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Gu(t,r.value,null,i,e):Gu(t,r.textContent,r.innerHTML,i,e)},50)}function Gu(t,e,n,r,i){let s=uM(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||ue.empty)))return!0;if(!s)return!1;let o=YW(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function bM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Gn.paste=(t,e)=>{let n=e;if(t.composing&&!Fr)return;let r=qu?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Gu(t,bM(r),r.getData("text/html"),i,n)?n.preventDefault():JW(t,n)};class EM{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const TM=Sr?"altKey":"ctrlKey";qn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Vm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(r&&r.mightDrag)o=Re.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(o=Re.create(t.state.doc,u.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c}=cM(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(qu?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",qu||n.dataTransfer.setData("text/plain",c),t.dragging=new EM(a,!n[TM],o)};qn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Gn.dragover=Gn.dragenter=(t,e)=>e.preventDefault();Gn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Vm(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=uM(t,bM(n.dataTransfer),qu?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[TM]);if(t.someProp("handleDrop",p=>p(t,n,o||ue.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?BN(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let f=c.doc.resolve(u);if(h&&Re.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Re(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,_)=>p=_),c.setSelection(nb(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};qn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ji(t)},20))};qn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};qn.beforeinput=(t,e)=>{if(zn&&Fr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Oo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Gn)qn[t]=Gn[t];function Ku(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class dp{constructor(e,n){this.toDOM=e,this.spec=n||ea,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new dr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof dp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ku(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Gs{constructor(e,n){this.attrs=e,this.spec=n||ea}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new dr(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Gs&&Ku(this.attrs,e.attrs)&&Ku(this.spec,e.spec)}static is(e){return e.type instanceof Gs}destroy(){}}class ob{constructor(e,n){this.attrs=e,this.spec=n||ea}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new dr(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof ob&&Ku(this.attrs,e.attrs)&&Ku(this.spec,e.spec)}destroy(){}}class dr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new dr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new dr(e,e,new dp(n,r))}static inline(e,n,r,i){return new dr(e,n,new Gs(r,i))}static node(e,n,r,i){return new dr(e,n,new ob(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Gs}get widget(){return this.type instanceof dp}}const Ha=[],ea={};class Wt{constructor(e,n){this.local=e.length?e:Ha,this.children=n.length?n:Ha}static create(e,n){return n.length?fp(n,e,0,ea):kn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==kn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ea)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?QW(this.children,o||[],e,n,r,i,s):o?new Wt(o.sort(ta),Ha):kn}add(e,n){return n.length?this==kn?Wt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=SM(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,fp(u,a,c+1,ea)),s+=3}});let o=wM(s?IM(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Wt(o.length?this.local.concat(o).sort(ta):this.local,i||this.children)}remove(e){return e.length==0||this==kn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=kn?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Wt(i,r):kn}forChild(e,n){if(this==kn)return this;if(n.isLeaf)return Wt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Gs){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Wt(i.sort(ta),Ha);return r?new Ms([a,r]):a}return r||kn}eq(e){if(this==e)return!0;if(!(e instanceof Wt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ab(this.localsInner(e))}localsInner(e){if(this==kn)return Ha;if(e.inlineContent||!this.local.some(Gs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Gs||n.push(this.local[r]);return n}}Wt.empty=new Wt([],[]);Wt.removeOverlap=ab;const kn=Wt.empty;class Ms{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ea));return Ms.from(r)}forChild(e,n){if(n.isLeaf)return Wt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=kn&&(s instanceof Ms?r=r.concat(s.members):r.push(s))}return Ms.from(r)}eq(e){if(!(e instanceof Ms)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?ab(r?n:n.sort(ta)):Ha}static from(e){switch(e.length){case 0:return kn;case 1:return e[0];default:return new Ms(e.every(n=>n instanceof Wt)?e:e.reduce((n,r)=>n.concat(r instanceof Wt?r:r.members),[]))}}}function QW(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let h=0;n.maps[c].forEach((d,f,p,m)=>{let g=m-p-(f-d);for(let y=0;y<a.length;y+=3){let _=a[y+1];if(_<0||d>_+u-h)continue;let T=a[y]+u-h;f>=T?a[y+1]=d<=T?-2:-1:d>=u&&g&&(a[y]+=g,a[y+1]+=g)}h+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),h=u-i;if(h<0||h>=r.content.size){l=!0;continue}let d=n.map(t[c+1]+s,-1),f=d-i,{index:p,offset:m}=r.content.findIndex(h),g=r.maybeChild(p);if(g&&m==h&&m+g.nodeSize==f){let y=a[c+2].mapInner(n,g,u+1,t[c]+s+1,o);y!=kn?(a[c]=h,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=XW(a,t,e,n,i,s,o),u=fp(c,r,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,d=0;h<u.children.length;h+=3){let f=u.children[h];for(;d<a.length&&a[d]<f;)d+=3;a.splice(d,0,u.children[h],u.children[h+1],u.children[h+2])}}return new Wt(e.sort(ta),a)}function wM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new dr(i.from+e,i.to+e,i.type))}return n}function XW(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(r,i,c);h?n.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function SM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function IM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function fp(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=SM(t,a,l+n);if(c){s=!0;let u=fp(c,a,n+l+1,r);u!=kn&&i.push(l,l+a.nodeSize,u)}});let o=wM(s?IM(t):t,-n).sort(ta);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Wt(o,i):kn}function ta(t,e){return t.from-e.from||t.to-e.to}function ab(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),JS(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),JS(e,i,r.copy(s.from,r.to)));break}}}return e}function JS(t,e,n){for(;e<t.length&&ta(n,t[e])>0;)e++;t.splice(e,0,n)}function iy(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=kn&&e.push(r)}),t.cursorWrapper&&e.push(Wt.create(t.state.doc,[t.cursorWrapper.deco])),Ms.from(e)}const ZW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},eq=er&&Ws<=11;class tq{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class nq{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new tq,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);er&&Ws<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),eq&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ZW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(HS(this.view)){if(this.suppressingSelectionUpdates)return Ji(this.view);if(er&&Ws<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&pa(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Wu(s))n.add(s);for(let s=e.anchorNode;s;s=Wu(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&HS(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let h=this.registerMutation(n[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Xr&&l.length>1){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let h=u[0],d=u[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Dm(r)&&(c=tb(e))&&c.eq(je.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ji(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),rq(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ji(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(er&&Ws<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:d}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?bn(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?bn(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let QS=new WeakMap,XS=!1;function rq(t){if(!QS.has(t)&&(QS.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Xr,XS)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),XS=!0}}function ZS(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return pa(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function iq(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ZS(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?ZS(t,n):null}function sq(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Dm(l)||c.push({node:l.focusNode,offset:l.focusOffset})),zn&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],_=y.pmViewDesc;if(y.nodeName=="BR"&&!_){s=g;break}if(!_||_.size)break}let h=t.state.doc,d=t.someProp("domParser")||Fl.fromSchema(t.state.schema),f=h.resolve(o),p=null,m=d.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:oq,context:f});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function oq(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Wn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Wn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const aq=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function lq(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let k=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,j=tb(t,k);if(j&&!t.state.selection.eq(j)){if(zn&&Fr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",z=>z(t,Oo(13,"Enter"))))return;let K=t.state.tr.setSelection(j);k=="pointer"?K.setMeta("pointer",!0):k=="key"&&K.scrollIntoView(),s&&K.setMeta("composition",s),t.dispatch(K)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=sq(t,e,n),u=t.state.doc,h=u.slice(c.from,c.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=hq(h.content,c.doc.content,c.from,d,f);if(($l&&t.input.lastIOSEnter>Date.now()-225||Fr)&&i.some(k=>k.nodeType==1&&!aq.test(k.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",k=>k(t,Oo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Be&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let k=eI(t,t.state.doc,c.sel);if(k&&!k.eq(t.state.selection)){let j=t.state.tr.setSelection(k);s&&j.setMeta("composition",s),t.dispatch(j)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Be&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),er&&Ws<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),_=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,T;if(($l&&t.input.lastIOSEnter>Date.now()-225&&(!_||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!_&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(T=je.findFrom(c.doc.resolve(m.pos+1),1,!0))&&T.head==g.pos)&&t.someProp("handleKeyDown",k=>k(t,Oo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&uq(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",k=>k(t,Oo(8,"Backspace")))){Fr&&zn&&t.domObserver.suppressSelectionUpdates();return}zn&&Fr&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),Fr&&!_&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(k){return k(t,Oo(13,"Enter"))})},20));let w=p.start,I=p.endA,C,x,N;if(_){if(m.pos==g.pos)er&&Ws<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ji(t),20)),C=t.state.tr.delete(w,I),x=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(N=cq(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))C=t.state.tr,N.type=="add"?C.addMark(w,I,N.mark):C.removeMark(w,I,N.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let k=m.parent.textBetween(m.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",j=>j(t,w,I,k)))return;C=t.state.tr.insertText(k,w,I)}}if(C||(C=t.state.tr.replace(w,I,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let k=eI(t,C.doc,c.sel);k&&!(zn&&Fr&&t.composing&&k.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(k.head==w||k.head==C.mapping.map(I)-1)||er&&k.empty&&k.head==w)&&C.setSelection(k)}x&&C.ensureMarks(x),s&&C.setMeta("composition",s),t.dispatch(C.scrollIntoView())}function eI(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:nb(t,e.resolve(n.anchor),e.resolve(n.head))}function cq(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(J.from(c).eq(t))return{mark:a,type:o}}function uq(t,e,n,r,i){if(n-e<=i.pos-r.pos||sy(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(sy(s,!0,!0));return!o.parent.isTextblock||o.pos>n||sy(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function sy(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function hq(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&tI(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&tI(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function tI(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class dq{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new MW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(oI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=iI(this),rI(this),this.nodeViews=sI(this),this.docView=LS(this.state.doc,nI(this),iy(this),this.dom,this),this.domObserver=new nq(this,(r,i,s,o)=>lq(this,r,i,s,o)),this.domObserver.start(),PW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&dv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(oI),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(vM(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=sI(this);pq(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&dv(this),this.editable=iI(this),rI(this);let l=iy(this),c=nI(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Kj(this);if(o){this.domObserver.stop();let f=h&&(er||zn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&fq(i.selection,e.selection);if(h){let p=zn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=qW(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=LS(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&_W(this))?Ji(this,f):(oM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&Yj(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Re){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&OS(this,n.getBoundingClientRect(),e)}else OS(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new EM(e.slice,e.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(er){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Jj(this.dom),Ji(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return tW(this,e)}coordsAtPos(e,n=1){return XN(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return oW(this,n||this.state,e)}pasteHTML(e,n){return Gu(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Gu(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(xW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],iy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Lj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return LW(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return Wn&&this.root.nodeType===11&&$j(this.dom.ownerDocument)==this.dom&&iq(this,e)||e}domSelection(){return this.root.getSelection()}}function nI(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[dr.node(0,t.state.doc.content.size,e)]}function rI(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:dr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function iI(t){return!t.someProp("editable",e=>e(t.state)===!1)}function fq(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function sI(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function pq(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function oI(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ro={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},pp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mq=typeof navigator<"u"&&/Mac/.test(navigator.platform),gq=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var En=0;En<10;En++)ro[48+En]=ro[96+En]=String(En);for(var En=1;En<=24;En++)ro[En+111]="F"+En;for(var En=65;En<=90;En++)ro[En]=String.fromCharCode(En+32),pp[En]=String.fromCharCode(En);for(var oy in ro)pp.hasOwnProperty(oy)||(pp[oy]=ro[oy]);function yq(t){var e=mq&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||gq&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?pp:ro)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const _q=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function vq(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))_q?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function bq(t){let e=Object.create(null);for(let n in t)e[vq(n)]=t[n];return e}function ay(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Eq(t){return new _r({props:{handleKeyDown:AM(t)}})}function AM(t){let e=bq(t);return function(n,r){let i=yq(r),s,o=e[ay(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[ay(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=ro[r.keyCode])&&s!=i){let a=e[ay(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const Tq=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function CM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const wq=(t,e,n)=>{let r=CM(t,n);if(!r)return!1;let i=lb(r);if(!i){let o=r.blockRange(),a=o&&oc(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&NM(t,i,e))return!0;if(r.parent.content.size==0&&(Hl(s,"end")||Re.isSelectable(s))){let o=Pm(t.doc,r.before(),r.after(),ue.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Hl(s,"end")?je.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Re.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Sq=(t,e,n)=>{let r=CM(t,n);if(!r)return!1;let i=lb(r);return i?RM(t,i,e):!1},Iq=(t,e,n)=>{let r=kM(t,n);if(!r)return!1;let i=cb(r);return i?RM(t,i,e):!1};function RM(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Pm(t.doc,s,l,ue.empty);if(!c||c.from!=s||c instanceof on&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Be.create(u.doc,s)),n(u.scrollIntoView())}return!0}function Hl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Aq=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=lb(r)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function lb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function kM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Cq=(t,e,n)=>{let r=kM(t,n);if(!r)return!1;let i=cb(r);if(!i)return!1;let s=i.nodeAfter;if(NM(t,i,e))return!0;if(r.parent.content.size==0&&(Hl(s,"start")||Re.isSelectable(s))){let o=Pm(t.doc,r.before(),r.after(),ue.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Hl(s,"start")?je.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Re.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Rq=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=cb(r)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Re.create(t.doc,s.pos)).scrollIntoView()),!0)};function cb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const kq=(t,e)=>{let n=t.selection,r=n instanceof Re,i;if(r){if(n.node.isTextblock||!po(t.doc,n.from))return!1;i=n.from}else if(i=Mm(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Re.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Oq=(t,e)=>{let n=t.selection,r;if(n instanceof Re){if(n.node.isTextblock||!po(t.doc,n.to))return!1;r=n.to}else if(r=Mm(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Nq=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&oc(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Mq=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function OM(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Pq=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=OM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(je.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},xq=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof qr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=OM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Be.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Dq=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(pl(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&oc(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},Lq=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Re.create(t.doc,i))),!0)};function Vq(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||po(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function NM(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Vq(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,d=J.empty;for(let m=s.length-1;m>=0;m--)d=J.from(s[m].create(null,d));d=J.from(r.copy(d));let f=t.tr.step(new ln(e.pos-1,h,e.pos,h,new ue(d,1,0),s.length,!0)),p=h+2*s.length;po(f.doc,p)&&f.join(p),n(f.scrollIntoView())}return!0}let l=je.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&oc(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&Hl(i,"start",!0)&&Hl(r,"end")){let h=r,d=[];for(;d.push(h),!h.isTextblock;)h=h.lastChild;let f=i,p=1;for(;!f.isTextblock;f=f.firstChild)p++;if(h.canReplace(h.childCount,h.childCount,f.content)){if(n){let m=J.empty;for(let y=d.length-1;y>=0;y--)m=J.from(d[y].copy(m));let g=t.tr.step(new ln(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new ue(m,d.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function MM(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Be.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Fq=MM(-1),Uq=MM(1);function Bq(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&X0(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function aI(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function $q(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);l=new op(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new op(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=X0(l,t,e,o);return c?(r&&r(Hq(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function Hq(t,e,n,r,i){let s=J.empty;for(let u=n.length-1;u>=0;u--)s=J.from(n[u].type.create(n[u].attrs,s));t.step(new ln(e.start-(r?2:0),e.end,e.start,e.end,new ue(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,h=e.endIndex,d=!0;u<h;u++,d=!1)!d&&pl(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function zq(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?jq(e,n,t,s):Wq(e,n,s):!0:!1}}function jq(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new ln(s-1,o,s,o,new ue(J.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new op(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=oc(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return po(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function Wq(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?J.empty:J.from(i))))return!1;let h=s.pos,d=h+o.nodeSize;return r.step(new ln(h-(a?1:0),d+(l?1:0),h+1,d-1,new ue((a?J.empty:J.from(i.copy(J.empty))).append(l?J.empty:J.from(i.copy(J.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function qq(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=J.from(c?t.create():null),h=new ue(J.from(t.create(null,J.from(a.type.create(null,u)))),c?3:1,0),d=s.start,f=s.end;n(e.tr.step(new ln(d-(c?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}function Fm(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class Um{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const h=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),h={...Object.fromEntries(Object.entries(r).map(([d,f])=>[d,(...m)=>{const g=this.buildProps(c,n),y=f(...m)(g);return a.push(y),h}])),run:u};return h}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Fm({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class Gq{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function ye(t,e,n){return t.config[e]===void 0&&t.parent?ye(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ye(t.parent,e,n):null}):t.config[e]}function Bm(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function PM(t){const e=[],{nodeExtensions:n,markExtensions:r}=Bm(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=ye(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([d,f])=>{e.push({type:h,name:d,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=ye(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const d={...s,...h};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function fn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Zt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function fv(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Zt(n,r),{})}function xM(t){return typeof t=="function"}function ze(t,e=void 0,...n){return xM(t)?e?t.bind(e)(...n):t(...n):t}function Kq(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Yq(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function lI(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):Yq(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function cI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Kq(n)?!1:n!=null))}function Jq(t,e){var n;const r=PM(t),{nodeExtensions:i,markExtensions:s}=Bm(t),o=(n=i.find(c=>ye(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((y,_)=>{const T=ye(_,"extendNodeSchema",h);return{...y,...T?T(c):{}}},{}),f=cI({...d,content:ze(ye(c,"content",h)),marks:ze(ye(c,"marks",h)),group:ze(ye(c,"group",h)),inline:ze(ye(c,"inline",h)),atom:ze(ye(c,"atom",h)),selectable:ze(ye(c,"selectable",h)),draggable:ze(ye(c,"draggable",h)),code:ze(ye(c,"code",h)),defining:ze(ye(c,"defining",h)),isolating:ze(ye(c,"isolating",h)),attrs:Object.fromEntries(u.map(y=>{var _;return[y.name,{default:(_=y==null?void 0:y.attribute)===null||_===void 0?void 0:_.default}]}))}),p=ze(ye(c,"parseHTML",h));p&&(f.parseDOM=p.map(y=>lI(y,u)));const m=ye(c,"renderHTML",h);m&&(f.toDOM=y=>m({node:y,HTMLAttributes:fv(y,u)}));const g=ye(c,"renderText",h);return g&&(f.toText=g),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,y)=>{const _=ye(y,"extendMarkSchema",h);return{...g,..._?_(c):{}}},{}),f=cI({...d,inclusive:ze(ye(c,"inclusive",h)),excludes:ze(ye(c,"excludes",h)),group:ze(ye(c,"group",h)),spanning:ze(ye(c,"spanning",h)),code:ze(ye(c,"code",h)),attrs:Object.fromEntries(u.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=ze(ye(c,"parseHTML",h));p&&(f.parseDOM=p.map(g=>lI(g,u)));const m=ye(c,"renderHTML",h);return m&&(f.toDOM=g=>m({mark:g,HTMLAttributes:fv(g,u)})),[c.name,f]}));return new ej({topNode:o,nodes:a,marks:l})}function ly(t,e){return e.nodes[t]||e.marks[t]||null}function uI(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const Qq=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function ub(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class $m{constructor(e){this.find=e.find,this.handler=e.handler}}const Xq=(t,e)=>{if(ub(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Sd(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const h=Qq(c)+s;return o.forEach(d=>{if(u)return;const f=Xq(h,d.find);if(!f)return;const p=l.state.tr,m=Fm({state:l.state,transaction:p}),g={from:r-(f[0].length-s.length),to:i},{commands:y,chain:_,can:T}=new Um({editor:n,state:m});d.handler({state:m,range:g,match:f,commands:y,chain:_,can:T})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function Zq(t){const{editor:e,rules:n}=t,r=new _r({state:{init(){return null},apply(i,s){const o=i.getMeta(r);if(o)return o;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:c,text:u}=a,h=c+u.length;Sd({editor:e,from:c,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Sd({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Sd({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Sd({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function eG(t){return typeof t=="number"}class tG{constructor(e){this.find=e.find,this.handler=e.handler}}const nG=(t,e,n)=>{if(ub(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function rG(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Um({editor:e,state:n}),h=[];return n.doc.nodesBetween(r,i,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(r,p),g=Math.min(i,p+f.content.size),y=f.textBetween(m-p,g-p,void 0,"");nG(y,s.find,o).forEach(T=>{if(T.index===void 0)return;const w=m+T.index+1,I=w+T[0].length,C={from:n.tr.mapping.map(w),to:n.tr.mapping.map(I)},x=s.handler({state:n,range:C,match:T,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});h.push(x)})}),h.every(f=>f!==null)}const iG=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function sG(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:u,from:h,to:d,rule:f,pasteEvt:p})=>{const m=u.tr,g=Fm({state:u,transaction:m});if(!(!rG({editor:e,state:g,from:Math.max(h-1,0),to:d.b-1,rule:f,pasteEvent:p,dropEvent:a})||!m.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m};return n.map(u=>new _r({view(h){const d=f=>{var p;r=!((p=h.dom.parentElement)===null||p===void 0)&&p.contains(f.target)?h.dom.parentElement:null};return window.addEventListener("dragstart",d),{destroy(){window.removeEventListener("dragstart",d)}}},props:{handleDOMEvents:{drop:(h,d)=>(s=r===h.dom.parentElement,a=d,!1),paste:(h,d)=>{var f;const p=(f=d.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=d,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(h,d,f)=>{const p=h[0],m=p.getMeta("uiEvent")==="paste"&&!i,g=p.getMeta("uiEvent")==="drop"&&!s,y=p.getMeta("applyPasteRules"),_=!!y;if(!m&&!g&&!_)return;if(_){const{from:I,text:C}=y,x=I+C.length,N=iG(C);return l({rule:u,state:f,from:I,to:{b:x},pasteEvt:N})}const T=d.doc.content.findDiffStart(f.doc.content),w=d.doc.content.findDiffEnd(f.doc.content);if(!(!eG(T)||!w||T===w.b))return l({rule:u,state:f,from:T,to:w,pasteEvt:o})}}))}function oG(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Ka{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Ka.resolve(e),this.schema=Jq(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:ly(r.name,this.schema)};r.type==="mark"&&(!((i=ze(ye(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=ye(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=ye(r,"onCreate",s);a&&this.editor.on("create",a);const l=ye(r,"onUpdate",s);l&&this.editor.on("update",l);const c=ye(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=ye(r,"onTransaction",s);u&&this.editor.on("transaction",u);const h=ye(r,"onFocus",s);h&&this.editor.on("focus",h);const d=ye(r,"onBlur",s);d&&this.editor.on("blur",d);const f=ye(r,"onDestroy",s);f&&this.editor.on("destroy",f)})}static resolve(e){const n=Ka.sort(Ka.flatten(e)),r=oG(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=ye(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=ye(r,"priority")||100,o=ye(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ly(n.name,this.schema)},i=ye(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Ka.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:ly(o.name,this.schema)},l=[],c=ye(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>Oi.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,y])=>[g,()=>y({editor:e})]));u={...u,...m}}const h=Eq(u);l.push(h);const d=ye(o,"addInputRules",a);uI(o,e.options.enableInputRules)&&d&&r.push(...d());const f=ye(o,"addPasteRules",a);uI(o,e.options.enablePasteRules)&&f&&i.push(...f());const p=ye(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[Zq({editor:e,rules:r}),...sG({editor:e,rules:i}),...s]}get attributes(){return PM(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Bm(this.extensions);return Object.fromEntries(n.filter(r=>!!ye(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:fn(r.name,this.schema)},o=ye(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,h)=>{const d=fv(l,i);return o()({editor:e,node:l,getPos:u,decorations:h,HTMLAttributes:d,extension:r})};return[r.name,a]}))}}function aG(t){return Object.prototype.toString.call(t).slice(8,-1)}function cy(t){return aG(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Hm(t,e){const n={...t};return cy(t)&&cy(e)&&Object.keys(e).forEach(r=>{cy(e[r])?r in t?n[r]=Hm(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class rr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ze(ye(this,"addOptions",{name:this.name}))),this.storage=ze(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new rr(e)}configure(e={}){const n=this.extend();return n.options=Hm(this.options,e),n.storage=ze(ye(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new rr({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ze(ye(n,"addOptions",{name:n.name})),n.storage=ze(ye(n,"addStorage",{name:n.name,options:n.options})),n}}function DM(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,u,h,d)=>{var f;const p=o==null?void 0:o[c.type.name];if(p)return c.isBlock&&!l&&(a+=s,l=!0),h&&(a+=p({node:c,pos:u,parent:h,index:d,range:e})),!1;c.isText?(a+=(f=c==null?void 0:c.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function LM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const lG=rr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new _r({key:new us("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=LM(n);return DM(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),cG=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),uG=(t=!1)=>({commands:e})=>e.setContent("",t),hG=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,h=c.resolve(u.map(l)),d=c.resolve(u.map(l+a.nodeSize)),f=h.blockRange(d);if(!f)return;const p=oc(f);if(a.type.isTextblock){const{defaultType:m}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(f.start,m)}(p||p===0)&&e.lift(f,p)})}),!0},dG=t=>e=>t(e),fG=()=>({state:t,dispatch:e})=>xq(t,e),pG=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Be(r.doc.resolve(o-1))),!0},mG=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},gG=t=>({tr:e,state:n,dispatch:r})=>{const i=fn(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},yG=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},_G=()=>({state:t,dispatch:e})=>Tq(t,e),vG=()=>({commands:t})=>t.keyboardShortcut("Enter"),bG=()=>({state:t,dispatch:e})=>Pq(t,e);function mp(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:ub(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function pv(t,e,n={}){return t.find(r=>r.type===e&&mp(r.attrs,n))}function EG(t,e,n={}){return!!pv(t,e,n)}function hb(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=pv([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(pv([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&EG([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function go(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const TG=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=go(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const h=hb(l,s,e);if(h&&h.from<=c&&h.to>=u){const d=Be.create(o,h.from,h.to);n.setSelection(d)}}return!0},wG=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function VM(t){return t instanceof Be}function $o(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function FM(t,e=null){if(!e)return null;const n=je.atStart(t),r=je.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Be.create(t,$o(0,i,s),$o(t.content.size,i,s)):Be.create(t,$o(e,i,s),$o(e,i,s))}function db(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const SG=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{db()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!VM(n.state.selection))return o(),!0;const a=FM(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},IG=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),AG=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),UM=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&UM(r)}return t};function hI(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return UM(n)}function gp(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?J.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),gp("",e,n)}if(typeof t=="string"){const r=Fl.fromSchema(e);return n.slice?r.parseSlice(hI(t),n.parseOptions).content:r.parse(hI(t),n.parseOptions)}return gp("",e,n)}function CG(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof on||i instanceof ln))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(je.near(t.doc.resolve(o),n))}const RG=t=>t.toString().startsWith("<"),kG=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const o=gp(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,u=!0;if((RG(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}let d;c?(Array.isArray(e)?d=e.map(f=>f.text||"").join(""):typeof e=="object"&&e&&e.text?d=e.text:d=e,r.insertText(d,a,l)):(d=o,r.replaceWith(a,l,d)),n.updateSelection&&CG(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:d}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:d})}return!0},OG=()=>({state:t,dispatch:e})=>kq(t,e),NG=()=>({state:t,dispatch:e})=>Oq(t,e),MG=()=>({state:t,dispatch:e})=>wq(t,e),PG=()=>({state:t,dispatch:e})=>Cq(t,e),xG=()=>({tr:t,state:e,dispatch:n})=>{try{const r=Mm(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},DG=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Mm(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},LG=()=>({state:t,dispatch:e})=>Sq(t,e),VG=()=>({state:t,dispatch:e})=>Iq(t,e);function fb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function FG(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))db()||fb()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const UG=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=FG(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Yu(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?fn(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(h,d)=>{if(h.isText)return;const f=Math.max(r,d),p=Math.min(i,d+h.nodeSize);a.push({node:h,from:f,to:p})});const l=i-r,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>mp(h.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((h,d)=>h+d.to-d.from,0)>=l}const BG=(t,e={})=>({state:n,dispatch:r})=>{const i=fn(t,n.schema);return Yu(n,i,e)?Nq(n,r):!1},$G=()=>({state:t,dispatch:e})=>Dq(t,e),HG=t=>({state:e,dispatch:n})=>{const r=fn(t,e.schema);return zq(r)(e,n)},zG=()=>({state:t,dispatch:e})=>Mq(t,e);function zm(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function dI(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const jG=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=zm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=fn(t,r.schema)),a==="mark"&&(o=go(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,dI(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&n.addMark(u,u+c.nodeSize,o.create(dI(h.attrs,e)))})})}),!0):!1},WG=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),qG=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),GG=()=>({state:t,dispatch:e})=>Aq(t,e),KG=()=>({state:t,dispatch:e})=>Rq(t,e),YG=()=>({state:t,dispatch:e})=>Lq(t,e),JG=()=>({state:t,dispatch:e})=>Uq(t,e),QG=()=>({state:t,dispatch:e})=>Fq(t,e);function BM(t,e,n={}){return gp(t,e,{slice:!1,parseOptions:n})}const XG=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=BM(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function jm(t,e){const n=go(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function ZG(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function eK(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function pb(t){return e=>eK(e.$from,t)}function tK(t,e){const n=hi.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function nK(t,e){const n={from:0,to:t.content.size};return DM(t,n,e)}function rK(t,e){const n=fn(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function iK(t,e){const n=zm(typeof e=="string"?e:e.name,t.schema);return n==="node"?rK(t,e):n==="mark"?jm(t,e):{}}function $M(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=hb(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function tf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function mv(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?go(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>mp(h.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:d})=>{const f=h.pos,p=d.pos;t.doc.nodesBetween(f,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,g),_=Math.min(p,g+m.nodeSize),T=_-y;o+=T,a.push(...m.marks.map(w=>({mark:w,from:y,to:_})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>mp(h.mark.attrs,n,{strict:!1})).reduce((h,d)=>h+d.to-d.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,d)=>h+d.to-d.from,0);return(l>0?l+c:l)>=o}function sK(t,e,n={}){if(!e)return Yu(t,null,n)||mv(t,null,n);const r=zm(e,t.schema);return r==="node"?Yu(t,e,n):r==="mark"?mv(t,e,n):!1}function fI(t,e){const{nodeExtensions:n}=Bm(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ze(ye(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function oK(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function aK(t,e,n){var r;const{selection:i}=e;let s=null;if(VM(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,h,d)=>{if(c)return!1;if(u.isInline){const f=!d||d.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=f&&p}return!c}),c})}const lK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=go(t,r.schema);if(i)if(o){const c=jm(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;r.doc.nodesBetween(u,h,(d,f)=>{const p=Math.max(f,u),m=Math.min(f+d.nodeSize,h);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&n.addMark(p,m,l.create({...y.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return aK(r,n,l)},cK=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),uK=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=fn(t,n.schema);return s.isTextblock?i().command(({commands:o})=>aI(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>aI(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},hK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=$o(t,0,r.content.size),s=Re.create(r,i);e.setSelection(s)}return!0},dK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Be.atStart(r).from,a=Be.atEnd(r).to,l=$o(i,o,a),c=$o(s,o,a),u=Be.create(r,l,c);e.setSelection(u)}return!0},fK=t=>({state:e,dispatch:n})=>{const r=fn(t,e.schema);return qq(r)(e,n)};function pI(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const pK=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=tf(c,a.node().type.name,a.node().attrs);if(s instanceof Re&&s.node.isBlock)return!a.parentOffset||!pl(o,a.pos)?!1:(r&&(t&&pI(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const h=l.parentOffset===l.parent.content.size;s instanceof Be&&e.deleteSelection();const d=a.depth===0?void 0:ZG(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=h&&d?[{type:d,attrs:u}]:void 0,p=pl(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&pl(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,f=d?[{type:d,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,f),d&&!h&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&pI(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},mK=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=fn(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const h=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=J.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let x=a.depth-y;x>=a.depth-3;x-=1)g=J.from(a.node(x).copy(g));const _=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,T=tf(h,a.node().type.name,a.node().attrs),w=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(T))||void 0;g=g.append(J.from(o.createAndFill(null,w)||void 0));const I=a.before(a.depth-(y-1));e.replace(I,a.after(-_),new ue(g,4-y,0));let C=-1;e.doc.nodesBetween(I,e.doc.content.size,(x,N)=>{if(C>-1)return!1;x.isTextblock&&x.content.size===0&&(C=N+1)}),C>-1&&e.setSelection(Be.near(e.doc.resolve(C))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,f=tf(h,u.type.name,u.attrs),p=tf(h,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:o,attrs:f},{type:d,attrs:p}]:[{type:o,attrs:f}];if(!pl(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=n,{splittableMarks:_}=i.extensionManager,T=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!T||!r)return!0;const w=T.filter(I=>_.includes(I.type.name));e.ensureMarks(w)}return!0},uy=(t,e)=>{const n=pb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&po(t.doc,n.pos)&&t.join(n.pos),!0},hy=(t,e)=>{const n=pb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&po(t.doc,r)&&t.join(r),!0},gK=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:h,splittableMarks:d}=i.extensionManager,f=fn(t,o.schema),p=fn(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:_}=m,T=y.blockRange(_),w=g||m.$to.parentOffset&&m.$from.marks();if(!T)return!1;const I=pb(C=>fI(C.type.name,h))(m);if(T.depth>=1&&I&&T.depth-I.depth<=1){if(I.node.type===f)return c.liftListItem(p);if(fI(I.node.type.name,h)&&f.validContent(I.node.content)&&a)return l().command(()=>(s.setNodeMarkup(I.pos,f),!0)).command(()=>uy(s,f)).command(()=>hy(s,f)).run()}return!n||!w||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>uy(s,f)).command(()=>hy(s,f)).run():l().command(()=>{const C=u().wrapInList(f,r),x=w.filter(N=>d.includes(N.type.name));return s.ensureMarks(x),C?!0:c.clearNodes()}).wrapInList(f,r).command(()=>uy(s,f)).command(()=>hy(s,f)).run()},yK=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=go(t,r.schema);return mv(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},_K=(t,e,n={})=>({state:r,commands:i})=>{const s=fn(t,r.schema),o=fn(e,r.schema);return Yu(r,s,n)?i.setNode(o):i.setNode(s,n)},vK=(t,e={})=>({state:n,commands:r})=>{const i=fn(t,n.schema);return Yu(n,i,e)?r.lift(i):r.wrapIn(i,e)},bK=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},EK=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},TK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=go(t,r.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&o){let{from:d,to:f}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=hb(c,l,p);m&&(d=m.from,f=m.to),n.removeMark(d,f,l)}else h.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},wK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=zm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=fn(t,r.schema)),a==="mark"&&(o=go(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(h,d)=>{s&&s===h.type&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(f=>{if(o===f.type){const p=Math.max(d,c),m=Math.min(d+h.nodeSize,u);n.addMark(p,m,o.create({...f.attrs,...e}))}})})}),!0):!1},SK=(t,e={})=>({state:n,dispatch:r})=>{const i=fn(t,n.schema);return Bq(i,e)(n,r)},IK=(t,e={})=>({state:n,dispatch:r})=>{const i=fn(t,n.schema);return $q(i,e)(n,r)};var AK=Object.freeze({__proto__:null,blur:cG,clearContent:uG,clearNodes:hG,command:dG,createParagraphNear:fG,cut:pG,deleteCurrentNode:mG,deleteNode:gG,deleteRange:yG,deleteSelection:_G,enter:vG,exitCode:bG,extendMarkRange:TG,first:wG,focus:SG,forEach:IG,insertContent:AG,insertContentAt:kG,joinUp:OG,joinDown:NG,joinBackward:MG,joinForward:PG,joinItemBackward:xG,joinItemForward:DG,joinTextblockBackward:LG,joinTextblockForward:VG,keyboardShortcut:UG,lift:BG,liftEmptyBlock:$G,liftListItem:HG,newlineInCode:zG,resetAttributes:jG,scrollIntoView:WG,selectAll:qG,selectNodeBackward:GG,selectNodeForward:KG,selectParentNode:YG,selectTextblockEnd:JG,selectTextblockStart:QG,setContent:XG,setMark:lK,setMeta:cK,setNode:uK,setNodeSelection:hK,setTextSelection:dK,sinkListItem:fK,splitBlock:pK,splitListItem:mK,toggleList:gK,toggleMark:yK,toggleNode:_K,toggleWrap:vK,undoInputRule:bK,unsetAllMarks:EK,unsetMark:TK,updateAttributes:wK,wrapIn:SK,wrapInList:IK});const CK=rr.create({name:"commands",addCommands(){return{...AK}}}),RK=rr.create({name:"editable",addProseMirrorPlugins(){return[new _r({key:new us("editable"),props:{editable:()=>this.editor.options.editable}})]}}),kK=rr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new _r({key:new us("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),OK=rr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:d,parent:f}=h,p=h.parent.isTextblock&&d>0?a.doc.resolve(d-1):h,m=p.parent.type.spec.isolating,g=h.pos-h.parentOffset,y=m&&p.parent.childCount===1?g===h.pos:je.atStart(c).from===d;return!u||!y||!f.type.isTextblock||f.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return db()||fb()?s:i},addProseMirrorPlugins(){return[new _r({key:new us("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=je.atStart(e.doc).from,l=je.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const h=n.tr,d=Fm({state:n,transaction:h}),{commands:f}=new Um({editor:this.editor,state:d});if(f.clearNodes(),!!h.steps.length)return h}})]}}),NK=rr.create({name:"tabindex",addProseMirrorPlugins(){return[new _r({key:new us("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class No{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new No(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new No(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new No(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+1,o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new No(o,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new No(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];return!this.children||this.children.length===0||this.children.forEach(s=>{if(s.node.type.name===e){if(Object.keys(n).length>0){const o=s.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(o[c]!==n[c])return}}if(i.push(s),r)return}i=i.concat(s.querySelectorAll(e))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const MK=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function PK(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let xK=class extends Gq{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=PK(MK,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=xM(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[RK,lG.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),CK,kK,OK,NK]:[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Ka(i,this)}createCommandManager(){this.commandManager=new Um({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=BM(this.options.content,this.schema,this.options.parseOptions),n=FM(e,this.options.autofocus);this.view=new dq(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Ga.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return iK(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return sK(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return tK(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return nK(this.state.doc,{blockSeparator:n,textSerializers:{...LM(this.schema),...r}})}get isEmpty(){return oK(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new No(n,this)}get $doc(){return this.$pos(0)}};function zl(t){return new $m({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ze(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if($M(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(m=>m===t.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const d=n.from+l+o.length;s.addMark(n.from+l,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function DK(t){return new $m({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ze(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const h=r[0][r[0].length-1];s.insertText(h,o+r[0].length-1),s.replaceWith(u,a,l)}else r[0]&&s.insert(o-1,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}})}function gv(t){return new $m({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=ze(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Ju(t){return new $m({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=ze(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&X0(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:d}=e,{splittableMarks:f}=t.editor.extensionManager,p=d||h.$to.parentOffset&&h.$from.marks();if(p){const m=p.filter(g=>f.includes(g.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&po(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class Oi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ze(ye(this,"addOptions",{name:this.name}))),this.storage=ze(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Oi(e)}configure(e={}){const n=this.extend();return n.options=Hm(this.options,e),n.storage=ze(ye(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Oi({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ze(ye(n,"addOptions",{name:n.name})),n.storage=ze(ye(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}let vr=class yv{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ze(ye(this,"addOptions",{name:this.name}))),this.storage=ze(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new yv(e)}configure(e={}){const n=this.extend();return n.options=Hm(this.options,e),n.storage=ze(ye(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new yv({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ze(ye(n,"addOptions",{name:n.name})),n.storage=ze(ye(n,"addStorage",{name:n.name,options:n.options})),n}};function jl(t){return new tG({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=ze(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),h=n.from+l.indexOf(a),d=h+a.length;if($M(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>h).length)return null;d<n.to&&o.delete(d,n.to),h>n.from&&o.delete(n.from+u,h),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const LK=/^\s*>\s$/,VK=vr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ju({find:LK,type:this.type})]}}),FK=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,UK=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,BK=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,$K=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,HK=Oi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[zl({find:FK,type:this.type}),zl({find:BK,type:this.type})]},addPasteRules(){return[jl({find:UK,type:this.type}),jl({find:$K,type:this.type})]}}),zK=vr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Zt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),mI=Oi.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=jm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),gI=/^\s*([-+*])\s$/,jK=vr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zK.name,this.editor.getAttributes(mI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ju({find:gI,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ju({find:gI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mI.name),editor:this.editor})),[t]}}),WK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,qK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,GK=Oi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[zl({find:WK,type:this.type})]},addPasteRules(){return[jl({find:qK,type:this.type})]}}),KK=/^```([a-z]+)?[\s\n]$/,YK=/^~~~([a-z]+)?[\s\n]$/,JK=vr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Zt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[gv({find:KK,type:this.type,getAttributes:t=>({language:t[1]})}),gv({find:YK,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new _r({key:new us("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o}=t.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(Be.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),QK=vr.create({name:"doc",topNode:!0,content:"block+"});function XK(t={}){return new _r({view(e){return new ZK(e,t)}})}class ZK{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),h=a?u.bottom:u.top;a&&l&&(h=(h+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:h-this.width/2,bottom:h+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=BN(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const eY=rr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[XK(this.options)]}});class Lt extends je{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Lt.valid(r)?new Lt(r):je.near(r)}content(){return ue.empty}eq(e){return e instanceof Lt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Lt(e.resolve(n.pos))}getBookmark(){return new mb(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!tY(e)||!nY(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Lt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Lt.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Lt.valid(a))return a}return null}}}Lt.prototype.visible=!1;Lt.findFrom=Lt.findGapCursorFrom;je.jsonID("gapcursor",Lt);class mb{constructor(e){this.pos=e}map(e){return new mb(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Lt.valid(n)?new Lt(n):je.near(n)}}function tY(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function nY(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function rY(){return new _r({props:{decorations:aY,createSelectionBetween(t,e,n){return e.pos==n.pos&&Lt.valid(n)?new Lt(n):null},handleClick:sY,handleKeyDown:iY,handleDOMEvents:{beforeinput:oY}}})}const iY=AM({ArrowLeft:Id("horiz",-1),ArrowRight:Id("horiz",1),ArrowUp:Id("vert",-1),ArrowDown:Id("vert",1)});function Id(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Be){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Lt.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Lt(c))),!0):!1}}function sY(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Lt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Re.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Lt(r))),!0)}function oY(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Lt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=J.empty;for(let o=r.length-1;o>=0;o--)i=J.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new ue(i,0,0));return s.setSelection(Be.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function aY(t){if(!(t.selection instanceof Lt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Wt.create(t.doc,[dr.widget(t.selection.head,e,{key:"gapcursor"})])}const lY=rr.create({name:"gapCursor",addProseMirrorPlugins(){return[rY()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ze(ye(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),cY=vr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Zt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(d=>a.includes(d.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),uY=vr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Zt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>gv({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var yp=200,cn=function(){};cn.prototype.append=function(e){return e.length?(e=cn.from(e),!this.length&&e||e.length<yp&&this.leafAppend(e)||this.length<yp&&e.leafPrepend(this)||this.appendInner(e)):this};cn.prototype.prepend=function(e){return e.length?cn.from(e).append(this):this};cn.prototype.appendInner=function(e){return new hY(this,e)};cn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?cn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};cn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};cn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};cn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};cn.from=function(e){return e instanceof cn?e:e&&e.length?new HM(e):cn.empty};var HM=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=yp)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=yp)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(cn);cn.empty=new HM([]);var hY=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(cn);const dY=500;class Br{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((h,d)=>{if(!h.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new ti(h.map));let f=h.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new ti(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new Br(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),d=new ti(e.mapping.maps[u],h,n),f;(f=l&&l.merge(d))&&(d=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(d),n&&(o++,n=void 0),i||(l=d)}let c=o-r.depth;return c>pY&&(a=fY(a,c),o-=c),new Br(a.append(s),o)}remapping(e,n){let r=new fl;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Br(this.items.append(e.map(n=>new ti(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(d.step){let m=e.steps[f].invert(e.docs[f]),g=d.selection&&d.selection.map(s.slice(l+1,f));g&&a++,r.push(new ti(p,m,g))}else r.push(new ti(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new ti(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),h=new Br(u,a);return h.emptyItemCount()>dY&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let h=new ti(c.invert(),l,u),d,f=i.length-1;(d=i.length&&i[f].merge(h))?i[f]=d:i.push(h)}}else o.map&&r--},this.items.length,0),new Br(cn.from(i.reverse()),s)}}Br.empty=new Br(cn.empty,0);function fY(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class ti{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ti(n.getMap().invert(),n,this.selection)}}}class Cs{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const pY=20;function mY(t,e,n,r){let i=n.getMeta(na),s;if(i)return i.historyState;n.getMeta(_Y)&&(t=new Cs(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(na))return o.getMeta(na).redo?new Cs(t.done.addTransform(n,void 0,r,nf(e)),t.undone,yI(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Cs(t.done,t.undone.addTransform(n,void 0,r,nf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!gY(n,t.prevRanges)),c=o?dy(t.prevRanges,n.mapping):yI(n.mapping.maps[n.steps.length-1]);return new Cs(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,nf(e)),Br.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Cs(t.done.rebased(n,s),t.undone.rebased(n,s),dy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Cs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),dy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function gY(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function yI(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function dy(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function yY(t,e,n){let r=nf(e),i=na.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Cs(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(na,{redo:n,historyState:l})}let fy=!1,_I=null;function nf(t){let e=t.plugins;if(_I!=e){fy=!1,_I=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){fy=!0;break}}return fy}const na=new us("history"),_Y=new us("closeHistory");function vY(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new _r({key:na,state:{init(){return new Cs(Br.empty,Br.empty,null,0,-1)},apply(e,n,r){return mY(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?jM:r=="historyRedo"?WM:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function zM(t,e){return(n,r)=>{let i=na.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=yY(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const jM=zM(!1,!0),WM=zM(!0,!0),bY=rr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>jM(t,e),redo:()=>({state:t,dispatch:e})=>WM(t,e)}},addProseMirrorPlugins(){return[vY(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),EY=vr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Zt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){const{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(Be.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(Re.create(i.doc,a.pos)):i.setSelection(Be.create(i.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(i.insert(l,c),i.setSelection(Be.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[DK({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),TY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,wY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,SY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,IY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,AY=Oi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[zl({find:TY,type:this.type}),zl({find:SY,type:this.type})]},addPasteRules(){return[jl({find:wY,type:this.type}),jl({find:IY,type:this.type})]}}),CY=vr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Zt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),RY=vr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Zt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),vI=Oi.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=jm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),bI=/^(\d+)\.\s$/,kY=vr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Zt(this.options.HTMLAttributes,n),0]:["ol",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(RY.name,this.editor.getAttributes(vI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ju({find:bI,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ju({find:bI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(vI.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),OY=vr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),NY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,MY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,PY=Oi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){const t={};return fb()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[zl({find:NY,type:this.type})]},addPasteRules(){return[jl({find:MY,type:this.type})]}}),xY=vr.create({name:"text",group:"inline"}),DY=rr.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,h,d,f,p,m,g,y;const _=[];return this.options.blockquote!==!1&&_.push(VK.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&_.push(HK.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&_.push(jK.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&_.push(GK.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&_.push(JK.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&_.push(QK.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&_.push(eY.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&_.push(lY.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&_.push(cY.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&_.push(uY.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&_.push(bY.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&_.push(EY.configure((h=this.options)===null||h===void 0?void 0:h.horizontalRule)),this.options.italic!==!1&&_.push(AY.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&_.push(CY.configure((f=this.options)===null||f===void 0?void 0:f.listItem)),this.options.orderedList!==!1&&_.push(kY.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&_.push(OY.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&_.push(PY.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&_.push(xY.configure((y=this.options)===null||y===void 0?void 0:y.text)),_}}),LY=rr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,considerAnyAsEmpty:!1,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new _r({key:new us("placeholder"),props:{decorations:({doc:t,selection:e})=>{var n;const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=e,s=[];if(!r)return null;const{firstChild:o}=t.content,a=o&&o.type.isLeaf,l=o&&o.isAtom,c=this.options.considerAnyAsEmpty?!0:o&&o.type.name===((n=t.type.contentMatch.defaultType)===null||n===void 0?void 0:n.name),u=t.content.childCount<=1&&o&&c&&o.nodeSize<=2&&(!a||!l);return t.descendants((h,d)=>{const f=i>=d&&i<=d+h.nodeSize,p=!h.isLeaf&&!h.childCount;if((f||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];u&&m.push(this.options.emptyEditorClass);const g=dr.node(d,d+h.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:h,pos:d,hasAnchor:f}):this.options.placeholder});s.push(g)}return this.options.includeChildren}),Wt.create(t,s)}}})]}});function EI(t){return wA((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class VY extends xK{constructor(e={}){return super(e),this.vueRenderers=rh(new Map),this.contentComponent=null,this.reactiveState=EI(this.view.state),this.reactiveExtensionStorage=EI(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),Rp(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const FY=Yt({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=ie(),n=Ea();return OA(()=>{const r=t.editor;r&&r.options.element&&e.value&&ql(()=>{if(!e.value||!r.options.element.firstChild)return;const i=ee(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),lh(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=qo(pD,{to:e.teleportElement,key:e.id},qo(e.component,{ref:e.id,...e.props}));t.push(n)}),qo("div",{ref:e=>{this.rootEl=e}},...t)}}),UY={class:"editor"},BY={class:"controlls"},$Y=Yt({__name:"tiptapEditor.vapor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=ie();return Gi(()=>n.modelValue,s=>{var a,l;((a=i.value)==null?void 0:a.getHTML())!==s&&((l=i.value)==null||l.commands.setContent(s,!1))}),ah(()=>{i.value=new VY({extensions:[DY,LY.configure({placeholder:"Write something "})],content:n.modelValue,onUpdate:()=>{var s;r("update:modelValue",(s=i.value)==null?void 0:s.getHTML())}})}),lh(()=>{var s;(s=i.value)==null||s.destroy()}),(s,o)=>(M(),H("div",UY,[v("div",BY,[i.value?(M(),H(fe,{key:0},[v("button",{icon:"",big:"",onClick:o[0]||(o[0]=a=>i.value.chain().focus().toggleBold().run())}," format_bold "),v("button",{icon:"",big:"",onClick:o[1]||(o[1]=a=>i.value.chain().focus().toggleItalic().run())}," format_italic "),v("button",{icon:"",big:"",onClick:o[2]||(o[2]=a=>i.value.chain().focus().toggleBulletList().run())}," format_list_bulleted "),v("button",{icon:"",big:"",onClick:o[3]||(o[3]=a=>i.value.chain().focus().toggleOrderedList().run())}," format_list_numbered ")],64)):_e("",!0)]),Te(ee(FY),{editor:i.value,class:"editor-content",placeholder:"bla"},null,8,["editor"])]))}}),qM=ls($Y,[["__scopeId","data-v-9ecefcbc"]]);function py(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function HY(t){return(...e)=>!t(...e)}function zY(t,e){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(e.trim())!==-1}function GM(t,e,n,r){return e?t.filter(i=>zY(r(i,n),e)).sort((i,s)=>r(i,n).length-r(s,n).length):t}function jY(t){return t.filter(e=>!e.$isLabel)}function my(t,e){return n=>n.reduce((r,i)=>i[t]&&i[t].length?(r.push({$groupLabel:i[e],$isLabel:!0}),r.concat(i[t])):r,[])}function WY(t,e,n,r,i){return s=>s.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const a=GM(o[n],t,e,i);return a.length?{[r]:o[r],[n]:a}:[]})}const TI=(...t)=>e=>t.reduce((n,r)=>r(n),e);var qY={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,e){return py(t)?"":e?t[e]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",e=t.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,e,this.label):GM(n,e,this.label,this.customLabel):n=this.groupValues?my(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(HY(this.isSelected)):n,this.taggable&&e.length&&!this.isExistingOption(e)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:t}):n.unshift({isTag:!0,label:t})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,e,n){return TI(WY(e,n,this.groupValues,this.groupLabel,this.customLabel),my(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return TI(my(this.groupValues,this.groupLabel),jY)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const e=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(e)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(py(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const e=this.customLabel(t,this.label);return py(e)?"":e},select(t,e){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(e)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(e==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){e!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const e=this.options.find(n=>n[this.groupLabel]===t.$groupLabel);if(e){if(this.wholeGroupSelected(e)){this.$emit("remove",e[this.groupValues],this.id);const n=this.trackBy?e[this.groupValues].map(i=>i[this.trackBy]):e[this.groupValues],r=this.internalValue.filter(i=>n.indexOf(this.trackBy?i[this.trackBy]:i)===-1);this.$emit("update:modelValue",r)}else{let n=e[this.groupValues].filter(r=>!(this.isOptionDisabled(r)||this.isSelected(r)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,e=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const r=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",r)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&e&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const t=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},GY={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,e){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight(t,e){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":e.$isLabel}];const n=this.options.find(r=>r[this.groupLabel]===e.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},Wi={name:"vue-multiselect",mixins:[qY,GY],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const KY={ref:"tags",class:"multiselect__tags"},YY={class:"multiselect__tags-wrap"},JY={class:"multiselect__spinner"},QY={key:0},XY={class:"multiselect__option"},ZY={class:"multiselect__option"},eJ=ce("No elements found. Consider changing the search query."),tJ={class:"multiselect__option"},nJ=ce("List is empty.");function rJ(t,e,n,r,i,s){return M(),dt("div",{tabindex:t.searchable?-1:n.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":s.isAbove,"multiselect--has-options-group":s.hasOptionGroup},"multiselect"],onFocus:e[14]||(e[14]=o=>t.activate()),onBlur:e[15]||(e[15]=o=>t.searchable?!1:t.deactivate()),onKeydown:[e[16]||(e[16]=Dr(nt(o=>t.pointerForward(),["self","prevent"]),["down"])),e[17]||(e[17]=Dr(nt(o=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:e[18]||(e[18]=Dr(nt(o=>t.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:e[19]||(e[19]=Dr(o=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[nn(t.$slots,"caret",{toggle:t.toggle},()=>[Te("div",{onMousedown:e[1]||(e[1]=nt(o=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),nn(t.$slots,"clear",{search:t.search}),Te("div",KY,[nn(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:s.visibleValues,isOpen:t.isOpen},()=>[Ht(Te("div",YY,[(M(!0),dt(fe,null,vt(s.visibleValues,(o,a)=>nn(t.$slots,"tag",{option:o,search:t.search,remove:t.removeElement},()=>[(M(),dt("span",{class:"multiselect__tag",key:a},[Te("span",{textContent:le(t.getOptionLabel(o))},null,8,["textContent"]),Te("i",{tabindex:"1",onKeypress:Dr(nt(l=>t.removeElement(o),["prevent"]),["enter"]),onMousedown:nt(l=>t.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[uc,s.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>n.limit?nn(t.$slots,"limit",{key:0},()=>[Te("strong",{class:"multiselect__strong",textContent:le(n.limitText(t.internalValue.length-n.limit))},null,8,["textContent"])]):_e("v-if",!0)]),Te(df,{name:"multiselect__loading"},{default:bt(()=>[nn(t.$slots,"loading",{},()=>[Ht(Te("div",JY,null,512),[[uc,n.loading]])])]),_:3}),t.searchable?(M(),dt("input",{key:0,ref:"search",name:n.name,id:t.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:t.placeholder,style:s.inputStyle,value:t.search,disabled:n.disabled,tabindex:n.tabindex,onInput:e[2]||(e[2]=o=>t.updateSearch(o.target.value)),onFocus:e[3]||(e[3]=nt(o=>t.activate(),["prevent"])),onBlur:e[4]||(e[4]=nt(o=>t.deactivate(),["prevent"])),onKeyup:e[5]||(e[5]=Dr(o=>t.deactivate(),["esc"])),onKeydown:[e[6]||(e[6]=Dr(nt(o=>t.pointerForward(),["prevent"]),["down"])),e[7]||(e[7]=Dr(nt(o=>t.pointerBackward(),["prevent"]),["up"])),e[9]||(e[9]=Dr(nt(o=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:e[8]||(e[8]=Dr(nt(o=>t.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):_e("v-if",!0),s.isSingleLabelVisible?(M(),dt("span",{key:1,class:"multiselect__single",onMousedown:e[10]||(e[10]=nt((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[nn(t.$slots,"singleLabel",{option:s.singleValue},()=>[ce(le(t.currentOptionLabel),1)])],32)):_e("v-if",!0),s.isPlaceholderVisible?(M(),dt("span",{key:2,class:"multiselect__placeholder",onMousedown:e[11]||(e[11]=nt((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[nn(t.$slots,"placeholder",{},()=>[ce(le(t.placeholder),1)])],32)):_e("v-if",!0)],512),Te(df,{name:"multiselect"},{default:bt(()=>[Ht(Te("div",{class:"multiselect__content-wrapper",onFocus:e[12]||(e[12]=(...o)=>t.activate&&t.activate(...o)),tabindex:"-1",onMousedown:e[13]||(e[13]=nt(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[Te("ul",{class:"multiselect__content",style:s.contentStyle,role:"listbox",id:"listbox-"+t.id},[nn(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(M(),dt("li",QY,[Te("span",XY,[nn(t.$slots,"maxElements",{},()=>[ce("Maximum of "+le(t.max)+" options selected. First remove a selected option to select another.",1)])])])):_e("v-if",!0),!t.max||t.internalValue.length<t.max?(M(!0),dt(fe,{key:1},vt(t.filteredOptions,(o,a)=>(M(),dt("li",{class:"multiselect__element",key:a,id:t.id+"-"+a,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?_e("v-if",!0):(M(),dt("span",{key:0,class:[t.optionHighlight(a,o),"multiselect__option"],onClick:nt(l=>t.select(o),["stop"]),onMouseenter:nt(l=>t.pointerSet(a),["self"]),"data-select":o&&o.isTag?t.tagPlaceholder:s.selectLabelText,"data-selected":s.selectedLabelText,"data-deselect":s.deselectLabelText},[nn(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Te("span",null,le(t.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(M(),dt("span",{key:1,"data-select":t.groupSelect&&s.selectGroupLabelText,"data-deselect":t.groupSelect&&s.deselectGroupLabelText,class:[t.groupHighlight(a,o),"multiselect__option"],onMouseenter:nt(l=>t.groupSelect&&t.pointerSet(a),["self"]),onMousedown:nt(l=>t.selectGroup(o),["prevent"])},[nn(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Te("span",null,le(t.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):_e("v-if",!0)],8,["id","role"]))),128)):_e("v-if",!0),Ht(Te("li",null,[Te("span",ZY,[nn(t.$slots,"noResult",{search:t.search},()=>[eJ])])],512),[[uc,n.showNoResults&&t.filteredOptions.length===0&&t.search&&!n.loading]]),Ht(Te("li",null,[Te("span",tJ,[nn(t.$slots,"noOptions",{},()=>[nJ])])],512),[[uc,n.showNoOptions&&(t.options.length===0||s.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!n.loading]]),nn(t.$slots,"afterList")],12,["id"])],36),[[uc,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}Wi.render=rJ;const Lc=t=>{const e=ie(t),n=["k","m"];for(let r=n.length-1;r>=0;r--){const i=1e3**(r+1);if(e.value>=i){let o=(e.value/i).toFixed(2).replace(/\.?0+$/,"");return o.length>4&&(o=o.slice(0,4)),o+n[r]}}return e.value.toString()},yo=t=>(sh("data-v-ebcdcf12"),t=t(),oh(),t),iJ={key:0},sJ={class:"left-column"},oJ={class:"img-container"},aJ=["src"],lJ=yo(()=>v("h3",{class:"fs-4"},"Points",-1)),cJ=yo(()=>v("p",null,"the points the competitors will get when they complete the tile",-1)),uJ={class:"right-column"},hJ={icon:"",class:"pen fs-4"},dJ=yo(()=>v("h3",{class:"fs-4"},"Tile type",-1)),fJ={key:0},pJ={class:"fs-4"},mJ={class:"drop-list-input"},gJ={key:1},yJ=yo(()=>v("h3",{class:"fs-4"},"Drops",-1)),_J=yo(()=>v("p",null,[ce(" Add drops to the list of valid drops and configure the required amount."),v("br"),v("em",null,"if none are set it defaults to target count")],-1)),vJ={key:0,class:"drop-list-input"},bJ={key:0},EJ={class:"drop-list"},TJ={class:"drop-row"},wJ={class:"drop-list-input"},SJ={style:{"margin-left":"0","margin-right":"auto","font-weight":"bold"}},IJ={key:0},AJ={key:1},CJ=["onClick"],RJ={class:"drop-list-input"},kJ={key:0,class:"drop-list-input"},OJ={class:"drop-list-input"},NJ={class:"drop-list-input"},MJ=yo(()=>v("h3",{class:"fs-4"},"Metric",-1)),PJ=yo(()=>v("p",null,"Search and select the metric you want to associate with this tile.",-1)),xJ={key:2},DJ=yo(()=>v("p",null,[v("em",null,"these are example values in edit mode, in view mode it will be with actual data")],-1)),LJ={class:"spread"},VJ=["value","max"],FJ=Yt({__name:"EditTileModal.vapor",props:{localTileData:{}},emits:["save","cancel","delete"],setup(t,{expose:e,emit:n}){const r=t,i=ie(!1),s=ie(),o=ie({name:"",count:0,min:0,max:0}),a=pt(()=>{var w;return((w=r.localTileData)==null?void 0:w.type)=="drop"?"Total Count":"Required "+r.localTileData.type}),l=pt(()=>{var w;return((w=r.localTileData)==null?void 0:w.type)=="drop"?"Drop Count":"Required "+r.localTileData.type}),c=()=>{r.localTileData&&![void 0,""].includes(o.value.name)&&(r.localTileData.drops?r.localTileData.drops.push({id:J_(),...o.value}):r.localTileData.drops=[{id:J_(),...o.value}],o.value.count=0,o.value.min=0,o.value.max=0)},u=w=>{r.localTileData&&r.localTileData.drops&&r.localTileData.drops.indexOf(w)>-1&&r.localTileData.drops.splice(r.localTileData.drops.indexOf(w),1)},h=ie(["ehb","ehp","league_points","overall"]),d=ie(nN.filter(w=>!h.value.includes(w))),f=ie(Fh.filter(w=>!["overall"].includes(w))),p=ie(qH.filter(w=>!h.value.includes(w))),m=ie([...q0,...d.value]);e({showModal:()=>{s.value&&s.value.showModal()},closeModal:()=>{s.value&&(o.value.name="",s.value.close())}});const _=w=>{document.querySelector(w).focus()},T=w=>{[void 0,""].includes(w.target.innerHTML)&&(w.target.innerHTML="Please enter a title..."),r.localTileData.title=w.target.innerHTML};return(w,I)=>{var x,N,k,j,K,z,V,D,P;const C=is("font-awesome-icon");return M(),H("dialog",{class:"modal",ref_key:"dialog",ref:s},[r.localTileData?(M(),H("div",iJ,[v("div",sJ,[v("div",oJ,[v("img",{src:r.localTileData.image},null,8,aJ),Ht(v("input",{required:"",type:"url","onUpdate:modelValue":I[0]||(I[0]=A=>r.localTileData.image=A)},null,512),[[wr,r.localTileData.image]])]),Te(qM,{class:"editable",modelValue:r.localTileData.description,"onUpdate:modelValue":I[1]||(I[1]=A=>r.localTileData.description=A)},null,8,["modelValue"]),v("div",null,[lJ,cJ,v("label",null,[ce("points value: "),Ht(v("input",{type:"number",min:"0","onUpdate:modelValue":I[2]||(I[2]=A=>r.localTileData.points=A)},null,512),[[wr,r.localTileData.points]])]),v("label",null,[ce("Repeatable "),Ht(v("input",{toggle:"",type:"checkbox","onUpdate:modelValue":I[3]||(I[3]=A=>r.localTileData.repeatable=A)},null,512),[[Uy,r.localTileData.repeatable]]),ce(" "+le(r.localTileData.repeatable),1)])])]),v("div",uJ,[v("h2",{onClick:I[7]||(I[7]=A=>_("#title")),class:"fs-1 title"},[v("span",{ref:"props.localTileData.title",contenteditable:"",class:"editable",spellcheck:"false",onFocus:I[4]||(I[4]=A=>i.value=!0),onKeydown:I[5]||(I[5]=Dr(nt(A=>{i.value=!1,T(A)},["prevent"]),["enter"])),onBlur:I[6]||(I[6]=nt(A=>{i.value=!1,T(A)},["prevent"])),name:"title",id:"title"},le(r.localTileData.title),545),v("span",hJ,[Te(C,{icon:["fas","pen"]})])]),v("button",{submit:"",onClick:I[8]||(I[8]=A=>w.$emit("save"))},"Save changes"),v("button",{cancel:"",onClick:I[9]||(I[9]=A=>w.$emit("cancel"))},"Cancel"),v("button",{icon:"",onClick:I[10]||(I[10]=A=>w.$emit("delete"))},"delete"),v("small",null,[ce(" tile id: "),v("code",null,le((x=r.localTileData)==null?void 0:x.id),1)]),v("div",null,[dJ,Te(ee(Wi),{modelValue:r.localTileData.type,"onUpdate:modelValue":I[11]||(I[11]=A=>r.localTileData.type=A),options:["drop","exp","kc"],"close-on-select":!0,"clear-on-select":!1,"allow-empty":!1},null,8,["modelValue"])]),["kc","exp"].includes((N=r.localTileData)==null?void 0:N.type)?(M(),H("div",fJ,[v("h3",pJ,le(l.value),1),v("p",null," The required "+le(r.localTileData.type)+" per metric the competitors need to complete the tile ",1),v("div",null,[v("label",mJ,[ce(le(a.value)+": ",1),Ht(v("input",{type:"number",min:"0","onUpdate:modelValue":I[12]||(I[12]=A=>r.localTileData.count=A)},null,512),[[wr,r.localTileData.count]])])])])):_e("",!0),((k=r.localTileData)==null?void 0:k.type)=="drop"?(M(),H("div",gJ,[yJ,_J,v("div",null,[v("label",null,[ce(" Individual amount "),Ht(v("input",{type:"checkbox",toggle:"",choice:"","onUpdate:modelValue":I[13]||(I[13]=A=>r.localTileData.needAny=A)},null,512),[[Uy,r.localTileData.needAny]]),ce(" Total amount ")])]),v("div",null,[(j=r.localTileData)!=null&&j.needAny?(M(),H("label",vJ,[ce(" Required amount: "),Ht(v("input",{type:"number",min:"0","onUpdate:modelValue":I[14]||(I[14]=A=>r.localTileData.count=A)},null,512),[[wr,r.localTileData.count]])])):_e("",!0)]),(K=r.localTileData)!=null&&K.drops&&((z=r.localTileData)==null?void 0:z.drops.length)>0?(M(),H("hr",bJ)):_e("",!0),v("ul",EJ,[(M(!0),H(fe,null,vt(r.localTileData.drops,A=>(M(),H("li",null,[v("div",TJ,[v("div",wJ,[v("p",SJ,le(A.name),1),(A.min||A.max)&&r.localTileData.needAny?(M(),H("small",IJ,[A.min?(M(),H(fe,{key:0},[ce("min: "+le(A.min),1)],64)):_e("",!0),A.min&&A.max?(M(),H(fe,{key:1},[ce(" / ")],64)):_e("",!0),A.max?(M(),H(fe,{key:2},[ce("max: "+le(A.max),1)],64)):_e("",!0)])):_e("",!0),r.localTileData.needAny?_e("",!0):(M(),H("div",AJ,le(A.count)+"x",1)),v("button",{icon:"",outline:"",onClick:$=>u(A)}," delete ",8,CJ)])])]))),256)),v("li",null,[v("div",RJ,[ce(" Drop: "),Ht(v("input",{type:"text","onUpdate:modelValue":I[15]||(I[15]=A=>o.value.name=A),placeholder:"Bandos tassets"},null,512),[[wr,o.value.name]])]),r.localTileData.needAny?r.localTileData.needAny?(M(),H(fe,{key:1},[v("div",OJ,[ce(" Minimum needed: "),Ht(v("input",{type:"number",placeholder:"unset","onUpdate:modelValue":I[17]||(I[17]=A=>o.value.min=A)},null,512),[[wr,o.value.min]])]),v("div",NJ,[ce(" Maximum allowed: "),Ht(v("input",{type:"number",placeholder:"unset","onUpdate:modelValue":I[18]||(I[18]=A=>o.value.max=A)},null,512),[[wr,o.value.max]])])],64)):_e("",!0):(M(),H("div",kJ,[ce(" Required ammount: "),Ht(v("input",{type:"number","onUpdate:modelValue":I[16]||(I[16]=A=>o.value.count=A)},null,512),[[wr,o.value.count]])])),v("button",{onClick:c},"Add Drop")])])])):_e("",!0),v("div",null,[MJ,PJ,((V=r.localTileData)==null?void 0:V.type)=="drop"?(M(),dt(ee(Wi),{key:0,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":I[19]||(I[19]=A=>r.localTileData.metric=A),options:p.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):_e("",!0),((D=r.localTileData)==null?void 0:D.type)=="kc"?(M(),dt(ee(Wi),{key:1,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":I[20]||(I[20]=A=>r.localTileData.metric=A),options:m.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):_e("",!0),((P=r.localTileData)==null?void 0:P.type)=="exp"?(M(),dt(ee(Wi),{key:2,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":I[21]||(I[21]=A=>r.localTileData.metric=A),options:f.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):_e("",!0)]),["kc","exp"].includes(r.localTileData.type)&&r.localTileData.metric?(M(),H("div",xJ,[(M(!0),H(fe,null,vt(r.localTileData.metric,A=>(M(),H(fe,null,[v("h3",null,le(A.replace("_"," ")),1),DJ,v("div",LJ,[v("progress",{min:"0",value:Math.random()*r.localTileData.count,max:r.localTileData.count},null,8,VJ),v("p",null,le(ee(Lc)(Math.floor(Math.random()*r.localTileData.count))),1)])],64))),256))])):_e("",!0)])])):_e("",!0)],512)}}}),UJ=ls(FJ,[["__scopeId","data-v-ebcdcf12"]]),BJ=t=>(sh("data-v-45c72334"),t=t(),oh(),t),$J=BJ(()=>v("span",{icon:""},"sync",-1)),HJ={id:"board-info"},zJ={key:0,class:"fs-2"},jJ={key:0,id:"controlls-are-editing"},WJ={key:1,id:"controlls-are-viewing"},qJ=["src","onClick"],GJ=Yt({__name:"editBoard.vapor",async setup(t){var xt,ut;let e,n;const r=Lh();r.value="Edit board - Bingo Bongo";const i=Ra(),s=ie({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),o=ie(),a=ie(),l=ie(null),c=ie(),u=ie(!1),h=ie(!1),d=ie(!1),f=ie(),p=ie(null),m=ie(0),g=ie([]);let y=[];const _=new G0({apiKey:"zpyy03zybxt0oiznjw6e1mz2",userAgent:"_Odinh"}),T=ie(parseInt(i.params.boardUUID));window.addEventListener("keydown",R=>{switch(R.key){case"Escape":o.value&&o.value.closeModal&&a.value&&a.value.closeModal&&(o.value.closeModal(),a.value.closeModal(),f.value=null,p.value=null,h.value=!1,h.value=!1);break}});const{data:w,promise:I}=sc(rt(Ue,"Boards",i.params.boardUUID)),{data:C,promise:x}=js(kr(Ue,"Boards",i.params.boardUUID,"Tiles"));[e,n]=Gr(()=>Promise.all([I.value,x.value])),await e,n();const N=ie(((xt=w.value)==null?void 0:xt.boardWidth)||5),k=ie(C.value),j=()=>{d.value=!0,K()},K=()=>{o.value&&o.value.showModal&&d.value&&o.value.showModal(),a.value&&a.value.showModal&&h.value&&a.value.showModal()},z=()=>{o.value&&o.value.closeModal&&d.value&&o.value.closeModal(),a.value&&a.value.closeModal&&h.value&&!d.value&&a.value.closeModal()};g.value=(ut=w.value)!=null&&ut.orderOfList?w.value.orderOfList:k.value.map(R=>R.id);const V=pt(()=>k.value===void 0?[]:k.value.toSorted((R,B)=>g.value.indexOf(R.id)-g.value.indexOf(B.id)));xz(l,V,{inverted:!0,handle:".handle",ghostClass:"blue-background-class",animation:200,onUpdate:R=>{yN(V.value,R.oldIndex,R.newIndex),ql(()=>{g.value=V.value.map(B=>B.id)})}});const D=R=>{var B;R==="add"?N.value=Math.min(N.value+1,12):R==="remove"&&(N.value=Math.max(N.value-1,3)),(B=l.value)==null||B.style.setProperty("--width",N.value.toString())},P=async()=>{u.value=!1;try{const R=rt(Ue,"Boards",i.params.boardUUID),B=kr(R,"Tiles"),W=kc(Ue),Y=ie(new Set);k.value.forEach(O=>{var F;(F=O.metric)==null||F.forEach(L=>{Y.value.add(L)})}),W.update(R,{orderOfList:g.value,boardWidth:N.value,trackingMetrics:[...Y.value]});const we=await V_(B),me={};we.forEach(O=>{const F=O.id;me[F]=!0;const L=O.data(),X=k.value.find(ne=>ne.id===F);if(X){if(JSON.stringify(X)!==JSON.stringify(L)){const ne=rt(B,F);W.update(ne,X)}}else{const ne=rt(B,F);W.delete(ne)}}),k.value.forEach(O=>{if(!me[O.id]){const F=rt(B,O.id);W.set(F,O)}}),await W.commit();const{data:b,promise:S}=js(kr(Ue,"Boards",i.params.boardUUID,"Tiles"),{once:!0});await S.value,k.value=b.value}catch(R){console.error("Error synchronizing tiles:",R)}},A=async()=>{k.value=C.value,N.value=m.value,u.value=!1,g.value=y},$=()=>{const R=[...C.value];k.value=R,y=g.value,m.value=N.value,u.value=!0},U=async()=>{var W;const R=rt(Ue,"Boards",i.params.boardUUID,"Tiles",p.value.id),B=rt(Ue,"Boards",i.params.boardUUID);try{const Y=kc(Ue);(await Ii(R)).data()?Y.update(R,p.value):Y.set(R,p.value);const b=((W=(await Ii(B)).data())==null?void 0:W.orderOfList)||[];b.includes(p.value.id)||(b.push(p.value.id),Y.update(B,{orderOfList:b})),await Y.commit(),h.value=!1,a.value&&a.value.closeModal&&a.value.closeModal(),f.value=p.value;const S=kr(Ue,"Boards",i.params.boardUUID,"Tiles"),O=await V_(S);k.value=O.docs.map(X=>X.data());const F=new Set;k.value.forEach(X=>{var ne;(ne=X.metric)==null||ne.forEach(Z=>{F.add(Z)})});const L=kc(Ue);L.update(B,{boardWidth:N.value,trackingMetrics:Array.from(F)}),await L.commit()}catch(Y){console.error("Error saving tile:",Y)}},he=()=>{a.value&&a.value.closeModal&&(h.value=!1,p.value=null,f.value=null,a.value.closeModal())},be=()=>{const R={...f.value};p.value=R,h.value=!0,a.value.showModal()},Ne=()=>{const R=J_(),B=Dz();k.value.push({id:R,title:B,description:"a sample description",image:"https://oldschool.runescape.wiki/images/Frog_%28Ruins_of_Camdozaal%29.png?6ae5e",type:"drop",needAny:!1,points:0,count:0,repeatable:!1}),g.value.push(R)},He=()=>{f.value&&(k.value=k.value.filter(R=>R.id!==f.value.id),g.value=V.value.map(R=>R.id),o.value.closeModal(),a.value.closeModal(),P())},at=async()=>{var B;const R=Date.now();if(w.value&&(w.value.trackingMetrics=ie([...w.value.trackingMetrics,"overall","hitpoints"]),w.value.trackingMetrics.forEach(W=>{})),(B=w.value)!=null&&B.lastUpdate&&R-w.value.lastUpdate<36e5)return console.log("no need to update"),null;{const W=kc(Ue);w.value.lastUpdate=R,W.update(rt(Ue,"Boards",i.params.boardUUID),{lastUpdate:w.value.lastUpdate}),w.value.trackingMetrics.push("overall"),w.value.trackingMetrics.push("hitpoints"),await Promise.all(w.value.trackingMetrics.map(async Y=>{const we=rt(Ue,"Boards",i.params.boardUUID,"Metrics",Y);await _.competitions.getCompetitionDetails(T.value,Y).then(me=>{const b=yt(me,R),S="t-"+R,O=b[S];W.set(we,{[R]:O,metric:Y,timestamp:R},{merge:!0})}).catch(me=>{console.error("Error fetching competition details:",me)})})),await W.commit()}},yt=(R,B)=>{const W={},Y="t-"+B;return W[Y]={},R.participations.forEach(we=>{const me=we.player.username,b=we.progress.gained;W[Y][me]={name:me,gained:b,teamName:we.teamName}}),W};return(R,B)=>{var Y,we;const W=is("router-link");return M(),H(fe,null,[v("section",null,[v("a",{class:"btn",onClick:nt(at,["prevent"])},[ce(" Update all metrics"),$J]),Te(W,{icon:"",class:"btn",to:{name:"viewBoard",params:{boardUUID:ee(i).params.boardUUID}}},{default:bt(()=>[ce("visibility")]),_:1},8,["to"]),Te(W,{icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:ee(i).params.boardUUID}}},{default:bt(()=>[ce(" library_add_check ")]),_:1},8,["to"]),Te(W,{icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:ee(i).params.boardUUID}}},{default:bt(()=>[ce("group")]),_:1},8,["to"])]),v("section",HJ,[ee(w)?(M(),H("h1",zJ,le(ee(w).name),1)):_e("",!0),ce(" Board ID: "),v("code",null,le(ee(i).params.boardUUID),1),(Y=ee(w))!=null&&Y.start?(M(),H(fe,{key:1},[v("p",null," Starts: "+le(new Date(ee(w).start.seconds*1e3).toLocaleDateString(void 0,s.value)),1),v("code",null,"<t:"+le(ee(w).start.seconds)+":F>",1)],64)):_e("",!0),(we=ee(w))!=null&&we.end?(M(),H(fe,{key:2},[v("p",null," Ends: "+le(new Date(ee(w).end.seconds*1e3).toLocaleDateString(void 0,s.value)),1),v("code",null,"<t:"+le(ee(w).end.seconds)+":F>",1)],64)):_e("",!0)]),u.value?(M(),H("section",jJ,[v("button",{onClick:B[0]||(B[0]=me=>D("remove"))},"-"),Ht(v("input",{id:"widthInputElement",ref_key:"widthInputForm",ref:c,class:"widthInput","onUpdate:modelValue":B[1]||(B[1]=me=>N.value=me),type:"number",min:"3",max:"12",onBlur:B[2]||(B[2]=()=>{N.value=Math.min(N.value,12),N.value=Math.max(N.value,3)})},null,544),[[wr,N.value]]),v("button",{onClick:B[3]||(B[3]=me=>D("add"))},"+"),v("button",{submit:"",onClick:B[4]||(B[4]=me=>P())},"save"),v("button",{outline:"",onClick:B[5]||(B[5]=me=>A())},"cancel")])):(M(),H("section",WJ,[v("button",{class:"startEditing",onClick:B[6]||(B[6]=me=>$())},"reorder / edit board")])),v("section",{ref_key:"el",ref:l,class:"board",style:tr({"--width":N.value,position:"relative"})},[(M(!0),H(fe,null,vt(V.value,me=>(M(),H("div",{class:Js(["tile",{handle:u.value}]),key:me.id},[v("img",{class:"tile--image",src:me.image,onClick:()=>{h.value=!0,f.value=me,be()}},null,8,qJ)],2))),128)),k.value.length<100&&u.value?(M(),H("button",{key:0,class:"add_tile",icon:"",onClick:B[7]||(B[7]=me=>Ne()),style:tr({order:V.value.length+1})}," add_box ",4)):_e("",!0)],4),Te(Uz,{ref_key:"modalEle",ref:o},{header:bt(()=>{var me;return[ce(" Delete tile: "+le((me=f.value)==null?void 0:me.title),1)]}),body:bt(()=>{var me;return[ce(" are you sure you want to delete the tile "+le((me=f.value)==null?void 0:me.title),1)]}),controls:bt(()=>[v("button",{submit:"",onClick:He},"REMOVE"),v("button",{outline:"",onClick:B[8]||(B[8]=me=>z())},"Cancel")]),_:1},512),Te(UJ,{ref_key:"asideModalEle",ref:a,selectedTile:f.value,localTileData:p.value,onSave:U,onCancel:he,onDelete:j},null,8,["selectedTile","localTileData"])],64)}}}),KJ=ls(GJ,[["__scopeId","data-v-45c72334"]]),KM=t=>(sh("data-v-132cb02b"),t=t(),oh(),t),YJ={key:0},JJ={class:"left-column"},QJ={class:"img-container"},XJ=["src"],ZJ={key:0,icon:""},eQ=["innerHTML"],tQ={key:0},nQ=KM(()=>v("em",null,"This tile is repeatable",-1)),rQ=[nQ],iQ={class:"right-column"},sQ={class:"fs-1 title",style:{"margin-bottom":"var(--size-4)"}},oQ={key:0},aQ={key:0,class:"fs-4"},lQ={key:1,class:"fs-4"},cQ=KM(()=>v("div",null,null,-1)),uQ={key:0,class:"fs-4"},hQ={key:0,class:"metric-item"},dQ={class:"spread"},fQ=["value","max"],pQ={key:1,class:"metric-item"},mQ={class:"spread"},gQ=["value","max"],yQ={class:"totals"},_Q=Yt({__name:"ViewTileModal.vapor",props:{selectedTile:{},latestData:{},teams:{}},emits:["close"],setup(t,{expose:e}){const n=t,r=ie(),i=pt(()=>{var d,f;return((f=(d=n.selectedTile)==null?void 0:d.verified)==null?void 0:f.map(p=>p.teamName))||[]}),s=d=>{const f={};for(const m in d){const g=d[m],y=g.teamName,_=g.gained||0;f[y]?f[y]+=_:f[y]=_}return Object.keys(f).map(m=>({team:m,total:f[m]}))},o=d=>{const f=ie(n.latestData[d]);if(!f)return console.error(`Metric ${d} not found`),null;const p=f.value.data;if(p==null)return null;const m=s(p).toSorted((g,y)=>g.team<y.team?-1:g.team>y.team?1:0);return{...f.value,totals:m}},a=d=>{const f=ie(0),p=o(d);if(!p||!p.totals||p.totals.length===0)return f.value;const m=p.totals.sort((g,y)=>y.total-g.total);return f.value=m[0].total,f.value},l=(d,f)=>{const p=ie({});return n.teams.forEach(m=>{const g=ie(d==null?void 0:d.filter(y=>{y.id===f&&y.teamName}).length);p.value[m]=g.value??0}),p.value};function c(d){return d.toLowerCase().split(" ").map(function(f){return f.charAt(0).toUpperCase()+f.slice(1)}).join(" ")}return e({showModal:()=>{r.value&&r.value.showModal()},closeModal:()=>{r.value&&r.value.close()}}),(d,f)=>{var p,m,g;return M(),H("dialog",{class:"modal",ref_key:"dialog",ref:r},[n.selectedTile?(M(),H("div",YJ,[v("div",JJ,[v("div",QJ,[v("img",{src:n.selectedTile.image},null,8,XJ)]),v("button",{onClick:f[0]||(f[0]=nt(y=>d.$emit("close"),["prevent"]))},"close"),(M(!0),H(fe,null,vt(d.teams,y=>(M(),H("div",{key:y},[i.value&&i.value.includes(y)?(M(),H("span",ZJ," check ")):_e("",!0),ce(" "+le(y),1)]))),128)),v("div",{innerHTML:n.selectedTile.description},null,8,eQ),v("small",null," tile id: "+le((p=n.selectedTile)==null?void 0:p.id),1),v("div",null,"Points: "+le(n.selectedTile.points),1),n.selectedTile.repeatable?(M(),H("div",tQ,rQ)):_e("",!0)]),v("div",iQ,[v("h2",sQ,le(n.selectedTile.title),1),((m=n.selectedTile)==null?void 0:m.type)=="drop"?(M(),H("div",oQ,[n.selectedTile.needAny===!1?(M(),H("h2",aQ," Get the following items: ")):(M(),H("h2",lQ," Get a total of "+le((g=n.selectedTile)==null?void 0:g.count)+" items: ",1)),v("div",{class:"drop-table",style:tr({"--_width":d.teams.length})},[cQ,(M(!0),H(fe,null,vt(d.teams,y=>(M(),H("div",null,le(y),1))),256)),(M(!0),H(fe,null,vt(n.selectedTile.drops,y=>(M(),H(fe,null,[v("div",null,le(y.name),1),(M(!0),H(fe,null,vt(d.teams,_=>{var T;return M(),H("div",{class:Js({completed:l(n.selectedTile.collected,y.id)[_]>=y.count,notStarted:l(n.selectedTile.collected,y.id)[_]===0})},[v("span",null,le(l(n.selectedTile.collected,y.id)[_]),1),((T=n.selectedTile)==null?void 0:T.needAny)===!1?(M(),H(fe,{key:0},[ce(" / "+le(y.count),1)],64)):_e("",!0)],2)}),256))],64))),256))],4)])):_e("",!0),v("div",null,[["kc","exp"].includes(n.selectedTile.type)?_e("",!0):(M(),H("h3",uQ," Metric "))]),v("div",null,[(M(!0),H(fe,null,vt(n.selectedTile.metric,y=>{var _,T;return M(),H(fe,null,[v("h3",{class:"metric-list",onClick:f[1]||(f[1]=nt(w=>{const I=w.target;console.log(I.classList.toggle("open-list"))},["prevent"]))},[["kc","exp"].includes(n.selectedTile.type)?(M(),H(fe,{key:0},[ce(le(ee(Lc)(n.selectedTile.count)),1)],64)):_e("",!0),ce(" "+le(c(y.replaceAll("_"," ")))+" ",1),["kc","exp"].includes(n.selectedTile.type)?(M(),H(fe,{key:1},[ce(le(c(n.selectedTile.type)),1)],64)):_e("",!0)]),["kc","exp"].includes(n.selectedTile.type)?(M(),H("div",hQ,[(M(!0),H(fe,null,vt((_=o(y))==null?void 0:_.totals,w=>(M(),H("div",null,[ce(le(w.team)+" ",1),v("div",dQ,[v("progress",{min:"0",value:w.total,max:n.selectedTile.count},null,8,fQ),v("p",{class:Js(["totals",{completed:w.total>=n.selectedTile.count,notStarted:w.total==0}])},le(w.total>=n.selectedTile.count?ee(Lc)(n.selectedTile.count)+"+":ee(Lc)(w.total))+le(" "+c(n.selectedTile.type)),3)])]))),256))])):(M(),H("div",pQ,[(M(!0),H(fe,null,vt((T=o(y))==null?void 0:T.totals,w=>(M(),H("div",null,[ce(le(w.team)+" ",1),v("div",mQ,[v("progress",{min:"0",value:w.total!=0?w.total+a(y)*.05:0,max:a(y)+a(y)*.1},null,8,gQ),v("p",yQ,le(ee(Lc)(w.total)),1)])]))),256))]))],64)}),256))])])])):_e("",!0)],512)}}}),vQ=ls(_Q,[["__scopeId","data-v-132cb02b"]]),bQ={class:"fs-2"},EQ=["onClick"],TQ=["src"],wQ=Yt({__name:"viewBoard.vapor",async setup(t){var C;let e,n;const r=([e,n]=Gr(()=>lo()),e=await e,n(),e),i=Ra(),s=Lh(),{data:o,promise:a}=sc(rt(Ue,"Boards",i.params.boardUUID)),{data:l,promise:c}=js(kr(Ue,"Boards",i.params.boardUUID,"Metrics"));(C=o.value)!=null&&C.name&&(s.value=o.value.name+" - Bingo Bongo");const{data:u,promise:h}=js(kr(Ue,"Boards",i.params.boardUUID,"Tiles")),{data:d,promise:f}=js(kr(Ue,"Boards",i.params.boardUUID,"Groups"));[e,n]=Gr(()=>Promise.all([a.value,c.value,f.value,h.value])),await e,n();const p=d.value.map(x=>x.teamName),m=ie(u.value),g=pt(()=>{if(m.value===void 0)return[];if(!o.value||!o.value.orderOfList)return m.value.map(N=>N);const x=o.value.orderOfList;return m.value.toSorted((N,k)=>x.indexOf(N.id)-x.indexOf(k.id))});window.addEventListener("keydown",x=>{switch(x.key){case"Escape":_.value&&_.value.closeModal&&(y.value={},w());break}});const y=ie(null),_=ie(void 0),T=()=>{var x;(x=_.value)==null||x.showModal()},w=()=>{var x;y.value=null,(x=_.value)==null||x.closeModal()};function I(x){const N={};return x.forEach(k=>{N[k.metric]={metric:k.metric,data:k[k.timestamp]}}),N}return(x,N)=>{var j,K,z,V,D,P;const k=is("router-link");return ee(o)?(M(),H(fe,{key:0},[v("section",null,[((j=ee(r))==null?void 0:j.uid)==((K=ee(o))==null?void 0:K.ownerID)?(M(),dt(k,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:ee(i).params.boardUUID}}},{default:bt(()=>[ce("edit")]),_:1},8,["to"])):_e("",!0),((z=ee(r))==null?void 0:z.uid)==((V=ee(o))==null?void 0:V.ownerID)?(M(),dt(k,{key:1,icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:ee(i).params.boardUUID}}},{default:bt(()=>[ce(" library_add_check ")]),_:1},8,["to"])):_e("",!0),((D=ee(r))==null?void 0:D.uid)==((P=ee(o))==null?void 0:P.ownerID)?(M(),dt(k,{key:2,icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:ee(i).params.boardUUID}}},{default:bt(()=>[ce("group")]),_:1},8,["to"])):_e("",!0)]),v("h1",bQ,le(ee(o).name),1),v("section",{ref:"el",class:"board",style:tr({"--width":ee(o).boardWidth,position:"relative"})},[(M(!0),H(fe,null,vt(g.value,A=>(M(),H("div",{class:"tile",style:tr({"--_image":`url('${A.image}')`}),key:A.id,onClick:nt(()=>{y.value=A,T()},["prevent"])},[v("img",{class:"tile--image",src:A.image},null,8,TQ)],12,EQ))),128))],4),Te(vQ,{ref_key:"asideModalEle",ref:_,onClose:w,selectedTile:y.value,latestData:I(ee(l)),teams:ee(p)},null,8,["selectedTile","latestData","teams"])],64)):_e("",!0)}}}),SQ=ls(wQ,[["__scopeId","data-v-b1b937d9"]]),IQ=Dp('<h1 class="fs-4">Typography</h1><hr><h1 class="fs-3">Heading level 1</h1><h2 class="fs-2">Heading level 2</h2><h3 class="fs-1">Heading level 3</h3><h4>Heading level 4</h4><h5>Heading level 5</h5><h2>Paragraph</h2><p> Lorem ipsum dolor sit amet, <strong>consectetur</strong> adipiscing elit. In id risus quis purus mollis lobortis vel ac tellus. Nam pharetra lorem quis dui commodo dapibus. Curabitur aliquet sapien vitae ligula pretium sollicitudin. Sed sed magna eu risus placerat gravida non sit amet augue. Morbi volutpat lobortis imperdiet. Sed elit purus, commodo a mi in, condimentum sagittis urna. Etiam condimentum pharetra cursus. Aliquam erat volutpat. In vel diam nulla. Praesent faucibus augue quis dui vehicula, a consequat est fringilla. Sed nec nisi fermentum, maximus nunc ac, hendrerit lorem. Proin mollis metus in erat dictum egestas. Proin nec ipsum viverra, scelerisque nisi in, faucibus nulla. </p><p> Aliquam erat volutpat. Donec sagittis libero ac justo suscipit laoreet. Suspendisse ut sem vel augue vulputate sodales blandit sit amet metus. Quisque porta consectetur efficitur. Duis venenatis nisl in mollis convallis. Pellentesque quis accumsan orci. Nulla porta arcu quis laoreet sagittis. Aliquam erat volutpat. Suspendisse sagittis, turpis vel posuere suscipit, dolor nunc sodales est, quis cursus dui elit vel nisl. </p><p> Nunc accumsan molestie nisl non malesuada. In egestas tellus lectus, nec venenatis tellus pulvinar vel. Fusce consectetur sodales ante, sed vehicula mauris pulvinar non. Cras tempor ante nec nibh iaculis aliquet. In quis velit non dui dapibus tempus quis sed velit. Morbi a ornare sem. Maecenas ornare molestie ex, sed maximus lorem viverra at. In tincidunt vel purus et suscipit. Aenean aliquam neque et ipsum volutpat, eu laoreet justo vestibulum. Maecenas quam turpis, convallis id nibh efficitur, interdum volutpat elit. Suspendisse potenti. Nulla in vulputate massa. </p><p> Quisque laoreet tincidunt massa, non pulvinar eros euismod sit amet. Maecenas non lorem vitae lorem condimentum posuere. Maecenas ac lectus elit. Nullam feugiat scelerisque interdum. Nullam volutpat tincidunt viverra. Suspendisse egestas venenatis orci. Nunc vehicula ut dolor aliquet finibus. </p><p> Donec tempus vestibulum odio vel consectetur. Donec sed feugiat tortor. Mauris iaculis nunc in orci suscipit, vel egestas orci pulvinar. In dapibus tortor ornare, eleifend eros eu, suscipit neque. Morbi quis pellentesque turpis, sit amet imperdiet augue. Mauris porttitor congue imperdiet. Quisque aliquet id quam a placerat. Fusce maximus in nibh vel ultricies. </p><p> Normal, <abbr title="Abbreviations">abbr</abbr>, <del>del</del>, <dfn>dfn</dfn>, <em>em</em>, <ins>ins</ins>, <mark>mark</mark>, <s>strike through</s>, <small>small</small>, <strong>strong</strong>, <sub>sub</sub>, <sup>sup</sup>, <u>u</u></p><h2>Links</h2>',15),AQ=v("p",null,[ce(" These are links: "),v("a",{href:"?2017-06-2703%3A30%3A17",target:"_blank",onclick:"return false;"},"never visited link (just don't click or it will becomes visited)"),ce(", "),v("a",{href:"."},"visited link"),ce(". Mouse hover to see effects. ")],-1),CQ=Dp("<h2>Lists</h2><h3>Unordered list</h3><ul><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ul><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ul></li><li>List item</li><li>List item</li><li>List item</li></ul><h3>Ordered list</h3><ol><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ol><li>Nested List Item</li><li>Nested List Item</li><li>Nested List Item</li></ol></li><li>List item</li><li>List item</li><li>List item</li></ol><h3>Mixed</h3><ul><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ol><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ol></li><li>List item</li><li>List item</li><li>List item</li></ul><ol><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ul><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ol><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ol><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ul><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ul></li></ol></li></ol></li><li>Nested List Item</li><li>Nested List Item</li></ul></li><li>List item</li><li>List item</li><li>List item</li></ol><h3>Definition list</h3><dl><dt>Definition list</dt><dd> Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </dd><dt>Lorem ipsum dolor sit amet</dt><dd> Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </dd></dl><h3>Details &amp; Summary</h3>",11),RQ=v("details",null,[v("summary",null,"Question 1"),v("p",null,[v("strong",null,"Pellentesque habitant morbi tristique"),ce(" senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. "),v("em",null,"Aenean ultricies mi vitae est."),ce(" Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, "),v("code",null,"commodo vitae"),ce(", ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. "),v("a",{href:"#",target:"_blank",onclick:"return false;"},"Donec non enim"),ce(" in turpis pulvinar facilisis. Ut felis. ")]),v("details",null,[v("summary",null,"Related documents"),v("ul",null,[v("li",null,[v("a",{href:"#",onclick:"return false;"},"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.")]),v("li",null,[v("a",{href:"#",onclick:"return false;"},"Aliquam tincidunt mauris eu risus.")]),v("li",null,[v("a",{href:"#",onclick:"return false;"},"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.")]),v("li",null,[v("a",{href:"#",onclick:"return false;"},"Aliquam tincidunt mauris eu risus.")])])])],-1),kQ=Dp(`<details><summary>Question 2</summary><p> Duis consequat metus et eros rutrum, interdum facilisis urna interdum. Etiam facilisis diam in libero varius ultricies id id est. Sed lacinia pellentesque sem vel sagittis. </p></details><h2>Blockquote</h2><blockquote> Those people who think they know everything are a great annoyance to those of us who do.<cite>Isaac Asimov</cite></blockquote><h2>Code</h2><p> This is inline code <code>&lt;div&gt;div element&lt;/div&gt;</code>. This is sample output <samp>sample</samp> And below is block code. </p><pre>&lt;div&gt;
    div element
    &lt;p&gt;paragraph&lt;/p&gt;
&lt;/div&gt;</pre><p> The input keyboard <kbd>Ctrl</kbd>+<kbd>S</kbd>. This is variable: <var>y</var> = <var>m</var><var>x</var> + <var>b</var></p><h2>Table</h2><table><thead><tr><th>Table heading</th><th>Table heading</th></tr></thead><tfoot><tr><th>Table footer</th><th>Table footer</th></tr></tfoot><tbody><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr></tbody></table><h2>Form elements</h2>`,10),OQ=v("legend",null,"Input types",-1),NQ=v("p",null,[v("label",{for:"input-type-color"},"Input Color"),v("br"),v("input",{id:"input-type-color",type:"color"})],-1),MQ=v("p",null,[v("label",{for:"input-type-number"},"Input Number"),v("br"),v("input",{id:"input-type-number",type:"number"})],-1),PQ=v("label",{for:"input-type-range"},"Input Range",-1),xQ=v("br",null,null,-1),DQ=v("label",{for:"input-type-range"},"Progress",-1),LQ=v("br",null,null,-1),VQ=["value"],FQ=v("p",null,[v("label",{for:"input-type-text"},"Input Text"),v("br"),v("input",{id:"input-type-text",type:"text"})],-1),UQ=v("p",null,[v("label",{for:"input-type-url"},"Input Url"),v("br"),v("input",{id:"input-type-url",type:"url"})],-1),BQ=Dp('<p><label><input type="radio" name="input-radio" value="1"> Input radio option 1</label><br><label><input type="radio" name="input-radio" value="2"> Input radio option 2</label></p><p><label><input type="radio" name="input-radio-disabled" value="1" disabled> Input radio option 1</label><br><label><input type="radio" name="input-radio-disabled" value="2" disabled> Input radio option 2</label></p><p><label><input type="checkbox"> Input checkbox 1</label><br><label><input type="checkbox"> Input checkbox 2</label></p>',3),$Q=v("p",null,[v("label",null,[v("input",{type:"checkbox",toggle:""}),ce(" Input checkbox 1")]),v("br"),v("label",null,[v("input",{type:"checkbox",toggle:""}),ce(" Input checkbox 2")])],-1),HQ=v("p",null,[v("label",null,[v("input",{type:"checkbox",disabled:""}),ce(" Input checkbox 1")]),v("br"),v("label",null,[v("input",{type:"checkbox",disabled:""}),ce(" Input checkbox 2")])],-1),zQ=v("label",{for:"input-textarea"},"Textarea",-1),jQ=v("br",null,null,-1),WQ=v("label",{for:"input-select"},"Select box",-1),qQ=v("br",null,null,-1),GQ=v("label",{for:"input-select-multiple"},"Select multiple",-1),KQ=v("br",null,null,-1),YQ=v("p",null,[v("label",{for:"input-select-disabled"},"Select disabled"),v("br"),v("select",{id:"input-select-disabled",disabled:""},[v("option",null,"1"),v("option",null,"2"),v("option",null,"3")])],-1),JQ=v("p",null,[v("button",null,"Normal button"),v("button",{submit:"",onclick:"return false;"},"Submit button"),v("button",{reset:"",onclick:"return false;"},"Reset button"),v("button",{disabled:""},"Disabled button")],-1),QQ=v("p",null,[v("input",{type:"button",value:"Input normal button"}),v("input",{type:"button",submit:"",value:"Input submit button",onclick:"return false;"}),v("input",{type:"button",reset:"",value:"Input reset button",onclick:"return false;"}),v("input",{type:"button",disabled:"",value:"Input disabled button"})],-1),XQ=v("p",null,[v("a",{class:"button",href:"#",onclick:"return false;"},"Anchor button"),v("a",{class:"button",submit:"",href:"#",onclick:"return false;"},"Anchor disabled button"),v("a",{class:"button",reset:"",href:"#",onclick:"return false;"},"Anchor disabled button"),v("a",{class:"button",disabled:"",href:"#",onclick:"return false;"},"Anchor disabled button")],-1),ZQ=v("p",null,[ce("Thanks to "),v("a",{href:"http://rundiz.com"},"rundiz.com")],-1),eX=Yt({__name:"colorPallete.vapor",setup(t){const e=ie(),n=ie(),r=ie(),i=ie(10),s=ie(["option 1","option 2","option 3"]);return(o,a)=>(M(),H(fe,null,[IQ,AQ,CQ,RQ,kQ,v("form",null,[v("fieldset",null,[OQ,NQ,MQ,v("p",null,[PQ,xQ,Ht(v("input",{id:"input-type-range",type:"range","onUpdate:modelValue":a[0]||(a[0]=l=>i.value=l)},null,512),[[wr,i.value]])]),v("p",null,[DQ,LQ,v("progress",{id:"progress",max:"100",value:i.value},null,8,VQ)]),FQ,UQ]),BQ,$Q,HQ,v("p",null,[zQ,jQ,Te(qM,{modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value=l)},null,8,["modelValue"])]),v("p",null,[WQ,qQ,Te(ee(Wi),{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=l=>n.value=l),options:s.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])]),v("p",null,[GQ,KQ,Te(ee(Wi),{max:3,modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=l=>r.value=l),options:s.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])]),YQ,JQ,QQ,XQ]),ZQ],64))}}),YM=t=>(sh("data-v-8810900f"),t=t(),oh(),t),tX=YM(()=>v("div",null,[v("h1",null,"teams")],-1)),nX=YM(()=>v("span",{icon:""},"sync",-1)),rX=Yt({__name:"teamViewer.vapor",async setup(t){let e,n;const r=Ra(),i=([e,n]=Gr(()=>lo()),e=await e,n(),e),{data:s,promise:o}=sc(rt(Ue,"Boards",r.params.boardUUID)),{data:a,promise:l}=js(kr(Ue,"Boards",r.params.boardUUID,"Groups")),c=f=>"https://oldschool.runescape.wiki/images/"+(f.charAt(0).toUpperCase()+f.slice(1))+"_chat_badge.png";[e,n]=Gr(()=>Promise.all([l.value,o.value])),await e,n();const u=new G0({apiKey:"zpyy03zybxt0oiznjw6e1mz2",userAgent:"_Odinh"}),h=async()=>{const f=kc(Ue);try{const p=await u.competitions.getCompetitionDetails(parseInt(r.params.boardUUID)),m=d(p);a.value.forEach(g=>{Object.keys(m).findIndex(_=>_===g.teamName)!==-1?f.update(rt(Ue,"Boards",r.params.boardUUID,"Groups",g.id),{...m[g.teamName]}):f.delete(rt(Ue,"Boards",r.params.boardUUID,"Groups",g.id))}),Object.values(m).forEach(g=>{if(a.value.findIndex(_=>_.teamName===g.teamName)===-1){const _=rt(kr(Ue,"Boards",r.params.boardUUID,"Groups"));f.set(_,g)}}),await f.commit()}catch(p){console.error("Error synchronizing data:",p)}},d=f=>{var g;const p=ie(),m=ie({});return p.value=f.participations,(g=p.value)==null||g.map(y=>{m.value[y.teamName]={teamName:y.teamName,players:[],stats:null}}),p.value.map(y=>{delete y.player.ehb,delete y.player.exp,delete y.player.ehp,m.value[y.teamName].players=[...m.value[y.teamName].players,m.value[y.teamName].players[y.player.username]={...y.player}]}),m.value};return(f,p)=>{var g,y,_,T;const m=is("router-link");return M(),H(fe,null,[v("section",null,[((g=ee(i))==null?void 0:g.uid)==((y=ee(s))==null?void 0:y.ownerID)?(M(),dt(m,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:ee(r).params.boardUUID}}},{default:bt(()=>[ce("edit")]),_:1},8,["to"])):_e("",!0),((_=ee(i))==null?void 0:_.uid)==((T=ee(s))==null?void 0:T.ownerID)?(M(),dt(m,{key:1,icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:ee(r).params.boardUUID}}},{default:bt(()=>[ce(" library_add_check ")]),_:1},8,["to"])):_e("",!0),Te(m,{icon:"",class:"btn",to:{name:"viewBoard",params:{boardUUID:ee(r).params.boardUUID}}},{default:bt(()=>[ce("visibility")]),_:1},8,["to"])]),tX,v("button",{onClick:nt(h,["prevent"])},[ce("synch teams"),nX]),v("div",{class:"teams",style:tr({"--width":ee(a).length})},[(M(!0),H(fe,null,vt(ee(a),w=>(M(),H("div",{key:w.id},[v("h2",null,le(w.teamName),1),v("ul",null,[(M(!0),H(fe,null,vt(w.players,I=>(M(),H("li",{key:I.id,class:Js({hasHelmet:I.type!=="regular"}),style:tr({"--marker":"url('"+c(I.type)+"')   "})},le(I.displayName),7))),128))])]))),128))],4)],64)}}}),iX=ls(rX,[["__scopeId","data-v-8810900f"]]),gb=t=>(sh("data-v-33cefcfa"),t=t(),oh(),t),sX={key:0},oX={class:"left-column"},aX={class:"img-container"},lX=["src"],cX={class:"verifyTile"},uX={key:0,icon:""},hX=["onClick"],dX=["innerHTML"],fX={key:0},pX=gb(()=>v("em",null,"This tile is repeatable",-1)),mX=[pX],gX={class:"right-column"},yX={class:"fs-1 title",style:{"margin-bottom":"var(--size-4)"}},_X={key:0},vX={key:0,class:"fs-4"},bX={key:1,class:"fs-4"},EX=gb(()=>v("div",null,null,-1)),TX=["onClick"],wX={class:"fs-2"},SX={class:"controls"},IX={class:"mini__team-list"},AX={class:"mini__team-header"},CX={class:"mini__team-icon"},RX={class:"mini__team-total"},kX={class:"mini__team-player-entry"},OX=["onClick"],NX=gb(()=>v("h2",null,"Add a drop:",-1)),MX=Yt({__name:"verifyTileModal.vapor",props:{selectedTile:{},teams:{}},emits:["close"],setup(t,{expose:e,emit:n}){const r=t,i=Ra(),s=ie(),o=ie(),a=ie(),l=ie(null),c=ie(null),u=ie({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),h=()=>{var V;return(V=s.value)==null?void 0:V.showModal()},d=()=>{var V;return(V=s.value)==null?void 0:V.close()},f=V=>{var D;z.value=V,(D=o.value)==null||D.showModal()},p=()=>{var V;return(V=o.value)==null?void 0:V.close()},m=()=>{var V;return(V=a.value)==null?void 0:V.showModal()},g=()=>{var V;return(V=a.value)==null?void 0:V.close()},y=pt(()=>l.value?l.value.players.map(V=>V.displayName):[]),_=async()=>{if(!r.selectedTile||!l.value||!c.value||!z.value)return;const V={playerName:c.value,timestamp:new Date,teamName:l.value.teamName,id:z.value.id},D=r.selectedTile.collected?{...r.selectedTile,collected:[...r.selectedTile.collected,V]}:{...r.selectedTile,collected:[V]};await Jo(rt(Ue,"Boards",i.params.boardUUID,"Tiles",r.selectedTile.id),D),l.value=null,c.value=null},T=async V=>{var A;if(!r.selectedTile)return;const D=((A=r.selectedTile.collected)==null?void 0:A.filter($=>$!==V))||[],P={...r.selectedTile,collected:D};await Jo(rt(Ue,"Boards",i.params.boardUUID,"Tiles",r.selectedTile.id),P)},w=pt(()=>{const V={};return r.teams.forEach(D=>{var P,A;V[D.teamName]=((A=(P=r.selectedTile)==null?void 0:P.collected)==null?void 0:A.filter($=>$.teamName===D.teamName))||[]}),V}),I=pt(()=>{var V,D;return((D=(V=r.selectedTile)==null?void 0:V.verified)==null?void 0:D.map(P=>P.teamName))||[]}),C=async({teamName:V})=>{if(!r.selectedTile)return;const P=I.value.includes(V)?(r.selectedTile.verified||[]).filter(A=>A.teamName!==V):[...r.selectedTile.verified||[],{teamName:V,timestamp:new Date}];await Jo(rt(Ue,"Boards",i.params.boardUUID,"Tiles",r.selectedTile.id),{...r.selectedTile,verified:P})},x=V=>new Date(V*1e3).toLocaleDateString(void 0,u.value),N=(V,D)=>{var A,$;const P=(($=(A=w.value[V.teamName])==null?void 0:A.filter(U=>U.id===D.id))==null?void 0:$.length)||0;return{completed:P>=D.count,notStarted:P===0}},k=(V,D)=>{var A,$;return`${(($=(A=w.value[V.teamName])==null?void 0:A.filter(U=>U.id===D.id))==null?void 0:$.length)||0} / ${D.count}`},j=V=>{var D;return((D=w.value[V.teamName])==null?void 0:D.length)||0},K=V=>w.value[V.teamName]||[],z=ie(null);return e({showModal:h,closeModal:d}),(V,D)=>(M(),H(fe,null,[v("dialog",{class:"modal",ref_key:"dialog",ref:s},[r.selectedTile?(M(),H("div",sX,[v("div",oX,[v("div",aX,[v("img",{src:r.selectedTile.image},null,8,lX)]),v("div",cX,[(M(!0),H(fe,null,vt(V.teams,P=>(M(),H("div",{key:P.teamName},[I.value&&I.value.includes(P.teamName)?(M(),H("span",uX," check ")):_e("",!0),ce(" "+le(P.teamName)+" ",1),v("button",{onClick:A=>C({teamName:P.teamName})},"verify",8,hX)]))),128))]),v("button",{onClick:D[0]||(D[0]=nt(P=>V.$emit("close"),["prevent"]))},"close"),v("div",{innerHTML:r.selectedTile.description},null,8,dX),v("small",null," tile id: "+le(r.selectedTile.id),1),v("div",null,"Points: "+le(r.selectedTile.points),1),r.selectedTile.repeatable?(M(),H("div",fX,mX)):_e("",!0)]),v("div",gX,[v("h2",yX,le(r.selectedTile.title),1),r.selectedTile.type=="drop"?(M(),H("div",_X,[r.selectedTile.needAny===!1?(M(),H("h2",vX," Get the following items: ")):(M(),H("h2",bX," Get a total of "+le(r.selectedTile.count)+" items: ",1)),v("div",{class:"drop-table",style:tr({"--_width":V.teams.length})},[EX,(M(!0),H(fe,null,vt(V.teams,P=>(M(),H("div",null,le(P.teamName),1))),256)),(M(!0),H(fe,null,vt(r.selectedTile.drops,P=>(M(),H(fe,null,[v("div",null,[v("button",{icon:"",onClick:nt(A=>f(P),["prevent"])}," playlist_add",8,TX),ce(le(P.name),1)]),(M(!0),H(fe,null,vt(V.teams,A=>(M(),H("div",{class:Js(N(A,P))},[v("span",null,le(k(A,P)),1),r.selectedTile.needAny===!1?(M(),H(fe,{key:0},[ce("/ "+le(P.count),1)],64)):_e("",!0)],2))),256))],64))),256))],4)])):_e("",!0)])])):_e("",!0)],512),v("dialog",{ref_key:"mini",ref:o,class:"mini"},[z.value?(M(),H(fe,{key:0},[v("h2",wX,le(z.value.name)+":",1),v("div",SX,[v("button",{onClick:D[1]||(D[1]=nt(P=>m(),["prevent"]))},"Add drop"),v("button",{onClick:D[2]||(D[2]=P=>p())},"Close")]),(M(!0),H(fe,null,vt(V.teams,P=>{var A;return M(),H("div",IX,[v("div",AX,[v("div",CX,le(P.teamName),1),v("div",RX,[ce(le(j(P))+" ",1),(A=r.selectedTile)!=null&&A.needAny?_e("",!0):(M(),H(fe,{key:0},[ce("/ "+le(z.value.count),1)],64))])]),(M(!0),H(fe,null,vt(K(P),$=>(M(),H("div",kX,[ce(le($.playerName)+": "+le(x($.timestamp.seconds))+" ",1),v("div",{icon:"",class:"mini__team-player-remove",onClick:U=>T($)}," delete ",8,OX)]))),256))])}),256))],64)):_e("",!0)],512),v("dialog",{ref_key:"micro",ref:a,class:"micro"},[NX,Te(ee(Wi),{modelValue:l.value,"onUpdate:modelValue":D[3]||(D[3]=P=>l.value=P),options:V.teams,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,label:"teamName",placeholder:"Choose a team"},null,8,["modelValue","options"]),Te(ee(Wi),{modelValue:c.value,"onUpdate:modelValue":D[4]||(D[4]=P=>c.value=P),options:y.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a team"},null,8,["modelValue","options"]),v("button",{onClick:D[5]||(D[5]=P=>_())},"add"),v("button",{onClick:D[6]||(D[6]=P=>g())},"close")],512)],64))}}),PX=ls(MX,[["__scopeId","data-v-33cefcfa"]]),xX={class:"fs-2"},DX=["onClick"],LX=["src"],VX=Yt({__name:"moderateBoard.vapor",async setup(t){var _;let e,n;const r=([e,n]=Gr(()=>lo()),e=await e,n(),e),i=Ra(),s=Lh(),{data:o,promise:a}=sc(rt(Ue,"Boards",i.params.boardUUID));(_=o.value)!=null&&_.name&&(s.value=o.value.name+" - Bingo Bongo");const{data:l,promise:c}=js(kr(Ue,"Boards",i.params.boardUUID,"Tiles")),{data:u,promise:h}=js(kr(Ue,"Boards",i.params.boardUUID,"Groups"));[e,n]=Gr(()=>Promise.all([a.value,h.value,c.value])),await e,n();const d=ie(l.value),f=pt(()=>{if(d.value===void 0)return[];if(!o.value||!o.value.orderOfList)return d.value.map(w=>w);const T=ie(o.value.orderOfList);return d.value.toSorted((w,I)=>T.value.indexOf(w.id)-T.value.indexOf(I.id))}),p=ie(null);OA(()=>{var I;const T=(I=p.value)==null?void 0:I.id,w=d.value.find(C=>C.id===T);w&&(p.value=w)});const m=ie(void 0),g=()=>{var T;(T=m.value)==null||T.showModal()},y=()=>{var T;p.value=null,(T=m.value)==null||T.closeModal()};return(T,w)=>{var C,x,N,k,j,K;const I=is("router-link");return ee(o)?(M(),H(fe,{key:0},[v("section",null,[((C=ee(r))==null?void 0:C.uid)==((x=ee(o))==null?void 0:x.ownerID)?(M(),dt(I,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:ee(i).params.boardUUID}}},{default:bt(()=>[ce("edit")]),_:1},8,["to"])):_e("",!0),((N=ee(r))==null?void 0:N.uid)==((k=ee(o))==null?void 0:k.ownerID)?(M(),dt(I,{key:1,icon:"",class:"btn",to:{name:"viewBoard",params:{boardUUID:ee(i).params.boardUUID}}},{default:bt(()=>[ce("visibility")]),_:1},8,["to"])):_e("",!0),((j=ee(r))==null?void 0:j.uid)==((K=ee(o))==null?void 0:K.ownerID)?(M(),dt(I,{key:2,icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:ee(i).params.boardUUID}}},{default:bt(()=>[ce("group")]),_:1},8,["to"])):_e("",!0)]),v("h1",xX,le(ee(o).name),1),v("section",{ref:"el",class:"board",style:tr({"--width":ee(o).boardWidth,position:"relative"})},[(M(!0),H(fe,null,vt(f.value,z=>(M(),H("div",{class:"tile",style:tr({"--_image":`url('${z.image}')`}),key:z.id,onClick:nt(()=>{p.value=z,g()},["prevent"])},[v("img",{class:"tile--image",src:z.image},null,8,LX)],12,DX))),128))],4),Te(PX,{ref_key:"asideModalEle",ref:m,onClose:y,selectedTile:p.value,teams:ee(u)},null,8,["selectedTile","teams"])],64)):_e("",!0)}}}),FX=ls(VX,[["__scopeId","data-v-ecca50ab"]]),JM=tH({history:O$(),routes:[{path:"/new",name:"createNewBingo",component:ez},{path:"/login",name:"loginScreen",component:az},{path:"/view/:boardUUID",name:"viewBoard",component:SQ},{path:"/edit/:boardUUID",name:"editBoard",component:KJ},{path:"/verify/:boardUUID",name:"moderateBoard",component:FX},{path:"/teams/:boardUUID",name:"teamViewer",component:iX},{path:"/color/",name:"color",component:eX},{path:"/",name:"Home",component:SH}]});JM.beforeEach(async t=>{if(["editBoard","teamViewer","moderateBoard"].includes(t.name)&&!await BX(t.params.boardUUID))return{name:"loginScreen"};if(t.name=="createNewBingo"&&!await UX())return{name:"loginScreen"};if(t.name=="viewBoard"&&!await $X(t.params.boardUUID))return{name:"loginScreen"}});const UX=async()=>{const t=await lo();if(t){const n=(await Ii(rt(Ue,"Users",t.uid))).data();if(n&&n.banned)return!1}return!!(t!=null&&t.uid)},BX=async t=>{const e=await lo();if(e){const s=(await Ii(rt(Ue,"Users",e.uid))).data();if(s&&s.banned)return!1}const r=(await Ii(rt(Ue,"Boards",t))).data();return r&&r.ownerID===(e==null?void 0:e.uid)},$X=async t=>{const e=await lo();if(e){const s=(await Ii(rt(Ue,"Users",e.uid))).data();if(s&&s.banned)return!1}const r=(await Ii(rt(Ue,"Boards",t))).data();return r&&r.ownerID===(e==null?void 0:e.uid)||r&&r.published};function wI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function de(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wI(Object(n),!0).forEach(function(r){en(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function HX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zX(t,e,n){return e&&SI(t.prototype,e),n&&SI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function en(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yb(t,e){return WX(t)||GX(t,e)||QM(t,e)||YX()}function jh(t){return jX(t)||qX(t)||QM(t)||KX()}function jX(t){if(Array.isArray(t))return _v(t)}function WX(t){if(Array.isArray(t))return t}function qX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function QM(t,e){if(t){if(typeof t=="string")return _v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _v(t,e)}}function _v(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var II=function(){},_b={},XM={},ZM=null,eP={mark:II,measure:II};try{typeof window<"u"&&(_b=window),typeof document<"u"&&(XM=document),typeof MutationObserver<"u"&&(ZM=MutationObserver),typeof performance<"u"&&(eP=performance)}catch{}var JX=_b.navigator||{},AI=JX.userAgent,CI=AI===void 0?"":AI,io=_b,Ct=XM,RI=ZM,Ad=eP;io.document;var hs=!!Ct.documentElement&&!!Ct.head&&typeof Ct.addEventListener=="function"&&typeof Ct.createElement=="function",tP=~CI.indexOf("MSIE")||~CI.indexOf("Trident/"),Cd,Rd,kd,Od,Nd,ts="___FONT_AWESOME___",vv=16,nP="fa",rP="svg-inline--fa",ga="data-fa-i2svg",bv="data-fa-pseudo-element",QX="data-fa-pseudo-element-pending",vb="data-prefix",bb="data-icon",kI="fontawesome-i2svg",XX="async",ZX=["HTML","HEAD","STYLE","SCRIPT"],iP=function(){try{return!0}catch{return!1}}(),It="classic",Vt="sharp",Eb=[It,Vt];function Wh(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[It]}})}var Qu=Wh((Cd={},en(Cd,It,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),en(Cd,Vt,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Cd)),Xu=Wh((Rd={},en(Rd,It,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),en(Rd,Vt,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Rd)),Zu=Wh((kd={},en(kd,It,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),en(kd,Vt,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),kd)),eZ=Wh((Od={},en(Od,It,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),en(Od,Vt,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Od)),tZ=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,sP="fa-layers-text",nZ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,rZ=Wh((Nd={},en(Nd,It,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),en(Nd,Vt,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),Nd)),oP=[1,2,3,4,5,6,7,8,9,10],iZ=oP.concat([11,12,13,14,15,16,17,18,19,20]),sZ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Ho={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},eh=new Set;Object.keys(Xu[It]).map(eh.add.bind(eh));Object.keys(Xu[Vt]).map(eh.add.bind(eh));var oZ=[].concat(Eb,jh(eh),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Ho.GROUP,Ho.SWAP_OPACITY,Ho.PRIMARY,Ho.SECONDARY]).concat(oP.map(function(t){return"".concat(t,"x")})).concat(iZ.map(function(t){return"w-".concat(t)})),du=io.FontAwesomeConfig||{};function aZ(t){var e=Ct.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function lZ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Ct&&typeof Ct.querySelector=="function"){var cZ=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];cZ.forEach(function(t){var e=yb(t,2),n=e[0],r=e[1],i=lZ(aZ(n));i!=null&&(du[r]=i)})}var aP={styleDefault:"solid",familyDefault:"classic",cssPrefix:nP,replacementClass:rP,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};du.familyPrefix&&(du.cssPrefix=du.familyPrefix);var Wl=de(de({},aP),du);Wl.autoReplaceSvg||(Wl.observeMutations=!1);var Ee={};Object.keys(aP).forEach(function(t){Object.defineProperty(Ee,t,{enumerable:!0,set:function(n){Wl[t]=n,fu.forEach(function(r){return r(Ee)})},get:function(){return Wl[t]}})});Object.defineProperty(Ee,"familyPrefix",{enumerable:!0,set:function(e){Wl.cssPrefix=e,fu.forEach(function(n){return n(Ee)})},get:function(){return Wl.cssPrefix}});io.FontAwesomeConfig=Ee;var fu=[];function uZ(t){return fu.push(t),function(){fu.splice(fu.indexOf(t),1)}}var _s=vv,fi={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function hZ(t){if(!(!t||!hs)){var e=Ct.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Ct.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Ct.head.insertBefore(e,r),t}}var dZ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function th(){for(var t=12,e="";t-- >0;)e+=dZ[Math.random()*62|0];return e}function ac(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function Tb(t){return t.classList?ac(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function lP(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function fZ(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(lP(t[n]),'" ')},"").trim()}function Wm(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function wb(t){return t.size!==fi.size||t.x!==fi.x||t.y!==fi.y||t.rotate!==fi.rotate||t.flipX||t.flipY}function pZ(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function mZ(t){var e=t.transform,n=t.width,r=n===void 0?vv:n,i=t.height,s=i===void 0?vv:i,o=t.startCentered,a=o===void 0?!1:o,l="";return a&&tP?l+="translate(".concat(e.x/_s-r/2,"em, ").concat(e.y/_s-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/_s,"em), calc(-50% + ").concat(e.y/_s,"em)) "):l+="translate(".concat(e.x/_s,"em, ").concat(e.y/_s,"em) "),l+="scale(".concat(e.size/_s*(e.flipX?-1:1),", ").concat(e.size/_s*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var gZ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function cP(){var t=nP,e=rP,n=Ee.cssPrefix,r=Ee.replacementClass,i=gZ;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var OI=!1;function gy(){Ee.autoAddCss&&!OI&&(hZ(cP()),OI=!0)}var yZ={mixout:function(){return{dom:{css:cP,insertCss:gy}}},hooks:function(){return{beforeDOMElementCreation:function(){gy()},beforeI2svg:function(){gy()}}}},ns=io||{};ns[ts]||(ns[ts]={});ns[ts].styles||(ns[ts].styles={});ns[ts].hooks||(ns[ts].hooks={});ns[ts].shims||(ns[ts].shims=[]);var zr=ns[ts],uP=[],_Z=function t(){Ct.removeEventListener("DOMContentLoaded",t),vp=1,uP.map(function(e){return e()})},vp=!1;hs&&(vp=(Ct.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ct.readyState),vp||Ct.addEventListener("DOMContentLoaded",_Z));function vZ(t){hs&&(vp?setTimeout(t,0):uP.push(t))}function qh(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?lP(t):"<".concat(e," ").concat(fZ(r),">").concat(s.map(qh).join(""),"</").concat(e,">")}function NI(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var bZ=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},yy=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?bZ(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function EZ(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function Ev(t){var e=EZ(t);return e.length===1?e[0].toString(16):null}function TZ(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function MI(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function Tv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=MI(e);typeof zr.hooks.addPack=="function"&&!i?zr.hooks.addPack(t,MI(e)):zr.styles[t]=de(de({},zr.styles[t]||{}),s),t==="fas"&&Tv("fa",e)}var Md,Pd,xd,Ya=zr.styles,wZ=zr.shims,SZ=(Md={},en(Md,It,Object.values(Zu[It])),en(Md,Vt,Object.values(Zu[Vt])),Md),Sb=null,hP={},dP={},fP={},pP={},mP={},IZ=(Pd={},en(Pd,It,Object.keys(Qu[It])),en(Pd,Vt,Object.keys(Qu[Vt])),Pd);function AZ(t){return~oZ.indexOf(t)}function CZ(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!AZ(i)?i:null}var gP=function(){var e=function(s){return yy(Ya,function(o,a,l){return o[l]=yy(a,s,{}),o},{})};hP=e(function(i,s,o){if(s[3]&&(i[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){i[l.toString(16)]=o})}return i}),dP=e(function(i,s,o){if(i[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){i[l]=o})}return i}),mP=e(function(i,s,o){var a=s[2];return i[o]=o,a.forEach(function(l){i[l]=o}),i});var n="far"in Ya||Ee.autoFetchSvg,r=yy(wZ,function(i,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!n&&(a="fas"),typeof o=="string"&&(i.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:a,iconName:l}),i},{names:{},unicodes:{}});fP=r.names,pP=r.unicodes,Sb=qm(Ee.styleDefault,{family:Ee.familyDefault})};uZ(function(t){Sb=qm(t.styleDefault,{family:Ee.familyDefault})});gP();function Ib(t,e){return(hP[t]||{})[e]}function RZ(t,e){return(dP[t]||{})[e]}function zo(t,e){return(mP[t]||{})[e]}function yP(t){return fP[t]||{prefix:null,iconName:null}}function kZ(t){var e=pP[t],n=Ib("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function so(){return Sb}var Ab=function(){return{prefix:null,iconName:null,rest:[]}};function qm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?It:n,i=Qu[r][t],s=Xu[r][t]||Xu[r][i],o=t in zr.styles?t:null;return s||o||null}var PI=(xd={},en(xd,It,Object.keys(Zu[It])),en(xd,Vt,Object.keys(Zu[Vt])),xd);function Gm(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,s=(e={},en(e,It,"".concat(Ee.cssPrefix,"-").concat(It)),en(e,Vt,"".concat(Ee.cssPrefix,"-").concat(Vt)),e),o=null,a=It;(t.includes(s[It])||t.some(function(c){return PI[It].includes(c)}))&&(a=It),(t.includes(s[Vt])||t.some(function(c){return PI[Vt].includes(c)}))&&(a=Vt);var l=t.reduce(function(c,u){var h=CZ(Ee.cssPrefix,u);if(Ya[u]?(u=SZ[a].includes(u)?eZ[a][u]:u,o=u,c.prefix=u):IZ[a].indexOf(u)>-1?(o=u,c.prefix=qm(u,{family:a})):h?c.iconName=h:u!==Ee.replacementClass&&u!==s[It]&&u!==s[Vt]&&c.rest.push(u),!i&&c.prefix&&c.iconName){var d=o==="fa"?yP(c.iconName):{},f=zo(c.prefix,c.iconName);d.prefix&&(o=null),c.iconName=d.iconName||f||c.iconName,c.prefix=d.prefix||c.prefix,c.prefix==="far"&&!Ya.far&&Ya.fas&&!Ee.autoFetchSvg&&(c.prefix="fas")}return c},Ab());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===Vt&&(Ya.fass||Ee.autoFetchSvg)&&(l.prefix="fass",l.iconName=zo(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||o==="fa")&&(l.prefix=so()||"fas"),l}var OZ=function(){function t(){HX(this,t),this.definitions={}}return zX(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){n.definitions[a]=de(de({},n.definitions[a]||{}),o[a]),Tv(a,o[a]);var l=Zu[It][a];l&&Tv(l,o[a]),gP()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var o=i[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];n[a]||(n[a]={}),u.length>0&&u.forEach(function(h){typeof h=="string"&&(n[a][h]=c)}),n[a][l]=c}),n}}]),t}(),xI=[],Ja={},yl={},NZ=Object.keys(yl);function MZ(t,e){var n=e.mixoutsTo;return xI=t,Ja={},Object.keys(yl).forEach(function(r){NZ.indexOf(r)===-1&&delete yl[r]}),xI.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),_p(i[o])==="object"&&Object.keys(i[o]).forEach(function(a){n[o]||(n[o]={}),n[o][a]=i[o][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(o){Ja[o]||(Ja[o]=[]),Ja[o].push(s[o])})}r.provides&&r.provides(yl)}),n}function wv(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=Ja[t]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function ya(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Ja[t]||[];i.forEach(function(s){s.apply(null,n)})}function rs(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return yl[t]?yl[t].apply(null,e):void 0}function Sv(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||so();if(e)return e=zo(n,e)||e,NI(_P.definitions,n,e)||NI(zr.styles,n,e)}var _P=new OZ,PZ=function(){Ee.autoReplaceSvg=!1,Ee.observeMutations=!1,ya("noAuto")},xZ={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return hs?(ya("beforeI2svg",e),rs("pseudoElements2svg",e),rs("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;Ee.autoReplaceSvg===!1&&(Ee.autoReplaceSvg=!0),Ee.observeMutations=!0,vZ(function(){LZ({autoReplaceSvgRoot:n}),ya("watch",e)})}},DZ={icon:function(e){if(e===null)return null;if(_p(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:zo(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=qm(e[0]);return{prefix:r,iconName:zo(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(Ee.cssPrefix,"-"))>-1||e.match(tZ))){var i=Gm(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||so(),iconName:zo(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=so();return{prefix:s,iconName:zo(s,e)||e}}}},br={noAuto:PZ,config:Ee,dom:xZ,parse:DZ,library:_P,findIconDefinition:Sv,toHtml:qh},LZ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?Ct:n;(Object.keys(zr.styles).length>0||Ee.autoFetchSvg)&&hs&&Ee.autoReplaceSvg&&br.dom.i2svg({node:r})};function Km(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return qh(r)})}}),Object.defineProperty(t,"node",{get:function(){if(hs){var r=Ct.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function VZ(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,o=t.transform;if(wb(o)&&n.found&&!r.found){var a=n.width,l=n.height,c={x:a/l/2,y:.5};i.style=Wm(de(de({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function FZ(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,o=s===!0?"".concat(e,"-").concat(Ee.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:de(de({},i),{},{id:o}),children:r}]}]}function Cb(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,o=t.transform,a=t.symbol,l=t.title,c=t.maskId,u=t.titleId,h=t.extra,d=t.watchable,f=d===void 0?!1:d,p=r.found?r:n,m=p.width,g=p.height,y=i==="fak",_=[Ee.replacementClass,s?"".concat(Ee.cssPrefix,"-").concat(s):""].filter(function(k){return h.classes.indexOf(k)===-1}).filter(function(k){return k!==""||!!k}).concat(h.classes).join(" "),T={children:[],attributes:de(de({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:_,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},w=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(T.attributes[ga]=""),l&&(T.children.push({tag:"title",attributes:{id:T.attributes["aria-labelledby"]||"title-".concat(u||th())},children:[l]}),delete T.attributes.title);var I=de(de({},T),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:de(de({},w),h.styles)}),C=r.found&&n.found?rs("generateAbstractMask",I)||{children:[],attributes:{}}:rs("generateAbstractIcon",I)||{children:[],attributes:{}},x=C.children,N=C.attributes;return I.children=x,I.attributes=N,a?FZ(I):VZ(I)}function DI(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,o=t.extra,a=t.watchable,l=a===void 0?!1:a,c=de(de(de({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[ga]="");var u=de({},o.styles);wb(i)&&(u.transform=mZ({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=Wm(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function UZ(t){var e=t.content,n=t.title,r=t.extra,i=de(de(de({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=Wm(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var _y=zr.styles;function Iv(t){var e=t[0],n=t[1],r=t.slice(4),i=yb(r,1),s=i[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(Ee.cssPrefix,"-").concat(Ho.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ee.cssPrefix,"-").concat(Ho.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Ee.cssPrefix,"-").concat(Ho.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:o}}var BZ={found:!1,width:512,height:512};function $Z(t,e){!iP&&!Ee.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function Av(t,e){var n=e;return e==="fa"&&Ee.styleDefault!==null&&(e=so()),new Promise(function(r,i){if(rs("missingIconAbstract"),n==="fa"){var s=yP(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&_y[e]&&_y[e][t]){var o=_y[e][t];return r(Iv(o))}$Z(t,e),r(de(de({},BZ),{},{icon:Ee.showMissingIcons&&t?rs("missingIconAbstract")||{}:{}}))})}var LI=function(){},Cv=Ee.measurePerformance&&Ad&&Ad.mark&&Ad.measure?Ad:{mark:LI,measure:LI},Vc='FA "6.5.2"',HZ=function(e){return Cv.mark("".concat(Vc," ").concat(e," begins")),function(){return vP(e)}},vP=function(e){Cv.mark("".concat(Vc," ").concat(e," ends")),Cv.measure("".concat(Vc," ").concat(e),"".concat(Vc," ").concat(e," begins"),"".concat(Vc," ").concat(e," ends"))},Rb={begin:HZ,end:vP},rf=function(){};function VI(t){var e=t.getAttribute?t.getAttribute(ga):null;return typeof e=="string"}function zZ(t){var e=t.getAttribute?t.getAttribute(vb):null,n=t.getAttribute?t.getAttribute(bb):null;return e&&n}function jZ(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Ee.replacementClass)}function WZ(){if(Ee.autoReplaceSvg===!0)return sf.replace;var t=sf[Ee.autoReplaceSvg];return t||sf.replace}function qZ(t){return Ct.createElementNS("http://www.w3.org/2000/svg",t)}function GZ(t){return Ct.createElement(t)}function bP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?qZ:GZ:n;if(typeof t=="string")return Ct.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var s=t.children||[];return s.forEach(function(o){i.appendChild(bP(o,{ceFn:r}))}),i}function KZ(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var sf={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(bP(i),n)}),n.getAttribute(ga)===null&&Ee.keepOriginalSource){var r=Ct.createComment(KZ(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~Tb(n).indexOf(Ee.replacementClass))return sf.replace(e);var i=new RegExp("".concat(Ee.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,l){return l===Ee.replacementClass||l.match(i)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var o=r.map(function(a){return qh(a)}).join(`
`);n.setAttribute(ga,""),n.innerHTML=o}};function FI(t){t()}function EP(t,e){var n=typeof e=="function"?e:rf;if(t.length===0)n();else{var r=FI;Ee.mutateApproach===XX&&(r=io.requestAnimationFrame||FI),r(function(){var i=WZ(),s=Rb.begin("mutate");t.map(i),s(),n()})}}var kb=!1;function TP(){kb=!0}function Rv(){kb=!1}var bp=null;function UI(t){if(RI&&Ee.observeMutations){var e=t.treeCallback,n=e===void 0?rf:e,r=t.nodeCallback,i=r===void 0?rf:r,s=t.pseudoElementsCallback,o=s===void 0?rf:s,a=t.observeMutationsRoot,l=a===void 0?Ct:a;bp=new RI(function(c){if(!kb){var u=so();ac(c).forEach(function(h){if(h.type==="childList"&&h.addedNodes.length>0&&!VI(h.addedNodes[0])&&(Ee.searchPseudoElements&&o(h.target),n(h.target)),h.type==="attributes"&&h.target.parentNode&&Ee.searchPseudoElements&&o(h.target.parentNode),h.type==="attributes"&&VI(h.target)&&~sZ.indexOf(h.attributeName))if(h.attributeName==="class"&&zZ(h.target)){var d=Gm(Tb(h.target)),f=d.prefix,p=d.iconName;h.target.setAttribute(vb,f||u),p&&h.target.setAttribute(bb,p)}else jZ(h.target)&&i(h.target)})}}),hs&&bp.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function YZ(){bp&&bp.disconnect()}function JZ(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function QZ(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=Gm(Tb(t));return i.prefix||(i.prefix=so()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=RZ(i.prefix,t.innerText)||Ib(i.prefix,Ev(t.innerText))),!i.iconName&&Ee.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function XZ(t){var e=ac(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Ee.autoA11y&&(n?e["aria-labelledby"]="".concat(Ee.replacementClass,"-title-").concat(r||th()):(e["aria-hidden"]="true",e.focusable="false")),e}function ZZ(){return{iconName:null,title:null,titleId:null,prefix:null,transform:fi,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function BI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=QZ(t),r=n.iconName,i=n.prefix,s=n.rest,o=XZ(t),a=wv("parseNodeAttributes",{},t),l=e.styleParser?JZ(t):[];return de({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:fi,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var eee=zr.styles;function wP(t){var e=Ee.autoReplaceSvg==="nest"?BI(t,{styleParser:!1}):BI(t);return~e.extra.classes.indexOf(sP)?rs("generateLayersText",t,e):rs("generateSvgReplacementMutation",t,e)}var oo=new Set;Eb.map(function(t){oo.add("fa-".concat(t))});Object.keys(Qu[It]).map(oo.add.bind(oo));Object.keys(Qu[Vt]).map(oo.add.bind(oo));oo=jh(oo);function $I(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!hs)return Promise.resolve();var n=Ct.documentElement.classList,r=function(h){return n.add("".concat(kI,"-").concat(h))},i=function(h){return n.remove("".concat(kI,"-").concat(h))},s=Ee.autoFetchSvg?oo:Eb.map(function(u){return"fa-".concat(u)}).concat(Object.keys(eee));s.includes("fa")||s.push("fa");var o=[".".concat(sP,":not([").concat(ga,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(ga,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=ac(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();var l=Rb.begin("onTree"),c=a.reduce(function(u,h){try{var d=wP(h);d&&u.push(d)}catch(f){iP||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise(function(u,h){Promise.all(c).then(function(d){EP(d,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(d){l(),h(d)})})}function tee(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;wP(t).then(function(n){n&&EP([n],e)})}function nee(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:Sv(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Sv(i||{})),t(r,de(de({},n),{},{mask:i}))}}var ree=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?fi:r,s=n.symbol,o=s===void 0?!1:s,a=n.mask,l=a===void 0?null:a,c=n.maskId,u=c===void 0?null:c,h=n.title,d=h===void 0?null:h,f=n.titleId,p=f===void 0?null:f,m=n.classes,g=m===void 0?[]:m,y=n.attributes,_=y===void 0?{}:y,T=n.styles,w=T===void 0?{}:T;if(e){var I=e.prefix,C=e.iconName,x=e.icon;return Km(de({type:"icon"},e),function(){return ya("beforeDOMElementCreation",{iconDefinition:e,params:n}),Ee.autoA11y&&(d?_["aria-labelledby"]="".concat(Ee.replacementClass,"-title-").concat(p||th()):(_["aria-hidden"]="true",_.focusable="false")),Cb({icons:{main:Iv(x),mask:l?Iv(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:I,iconName:C,transform:de(de({},fi),i),symbol:o,title:d,maskId:u,titleId:p,extra:{attributes:_,styles:w,classes:g}})})}},iee={mixout:function(){return{icon:nee(ree)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=$I,n.nodeCallback=tee,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?Ct:r,s=n.callback,o=s===void 0?function(){}:s;return $I(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,o=r.titleId,a=r.prefix,l=r.transform,c=r.symbol,u=r.mask,h=r.maskId,d=r.extra;return new Promise(function(f,p){Promise.all([Av(i,a),u.iconName?Av(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=yb(m,2),y=g[0],_=g[1];f([n,Cb({icons:{main:y,mask:_},prefix:a,iconName:i,transform:l,symbol:c,maskId:h,title:s,titleId:o,extra:d,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.transform,a=n.styles,l=Wm(a);l.length>0&&(i.style=l);var c;return wb(o)&&(c=rs("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),r.push(c||s.icon),{children:r,attributes:i}}}},see={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return Km({type:"layer"},function(){ya("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Ee.cssPrefix,"-layers")].concat(jh(s)).join(" ")},children:o}]})}}}},oee={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,o=r.classes,a=o===void 0?[]:o,l=r.attributes,c=l===void 0?{}:l,u=r.styles,h=u===void 0?{}:u;return Km({type:"counter",content:n},function(){return ya("beforeDOMElementCreation",{content:n,params:r}),UZ({content:n.toString(),title:s,extra:{attributes:c,styles:h,classes:["".concat(Ee.cssPrefix,"-layers-counter")].concat(jh(a))}})})}}}},aee={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?fi:i,o=r.title,a=o===void 0?null:o,l=r.classes,c=l===void 0?[]:l,u=r.attributes,h=u===void 0?{}:u,d=r.styles,f=d===void 0?{}:d;return Km({type:"text",content:n},function(){return ya("beforeDOMElementCreation",{content:n,params:r}),DI({content:n,transform:de(de({},fi),s),title:a,extra:{attributes:h,styles:f,classes:["".concat(Ee.cssPrefix,"-layers-text")].concat(jh(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,o=r.extra,a=null,l=null;if(tP){var c=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();a=u.width/c,l=u.height/c}return Ee.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([n,DI({content:n.innerHTML,width:a,height:l,transform:s,title:i,extra:o,watchable:!0})])}}},lee=new RegExp('"',"ug"),HI=[1105920,1112319];function cee(t){var e=t.replace(lee,""),n=TZ(e,0),r=n>=HI[0]&&n<=HI[1],i=e.length===2?e[0]===e[1]:!1;return{value:Ev(i?e[0]:e),isSecondary:r||i}}function zI(t,e){var n="".concat(QX).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=ac(t.children),o=s.filter(function(x){return x.getAttribute(bv)===e})[0],a=io.getComputedStyle(t,e),l=a.getPropertyValue("font-family").match(nZ),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return t.removeChild(o),r();if(l&&u!=="none"&&u!==""){var h=a.getPropertyValue("content"),d=~["Sharp"].indexOf(l[2])?Vt:It,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?Xu[d][l[2].toLowerCase()]:rZ[d][c],p=cee(h),m=p.value,g=p.isSecondary,y=l[0].startsWith("FontAwesome"),_=Ib(f,m),T=_;if(y){var w=kZ(m);w.iconName&&w.prefix&&(_=w.iconName,f=w.prefix)}if(_&&!g&&(!o||o.getAttribute(vb)!==f||o.getAttribute(bb)!==T)){t.setAttribute(n,T),o&&t.removeChild(o);var I=ZZ(),C=I.extra;C.attributes[bv]=e,Av(_,f).then(function(x){var N=Cb(de(de({},I),{},{icons:{main:x,mask:Ab()},prefix:f,iconName:T,extra:C,watchable:!0})),k=Ct.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(k,t.firstChild):t.appendChild(k),k.outerHTML=N.map(function(j){return qh(j)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function uee(t){return Promise.all([zI(t,"::before"),zI(t,"::after")])}function hee(t){return t.parentNode!==document.head&&!~ZX.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(bv)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function jI(t){if(hs)return new Promise(function(e,n){var r=ac(t.querySelectorAll("*")).filter(hee).map(uee),i=Rb.begin("searchPseudoElements");TP(),Promise.all(r).then(function(){i(),Rv(),e()}).catch(function(){i(),Rv(),n()})})}var dee={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=jI,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?Ct:r;Ee.searchPseudoElements&&jI(i)}}},WI=!1,fee={mixout:function(){return{dom:{unwatch:function(){TP(),WI=!0}}}},hooks:function(){return{bootstrap:function(){UI(wv("mutationObserverCallbacks",{}))},noAuto:function(){YZ()},watch:function(n){var r=n.observeMutationsRoot;WI?Rv():UI(wv("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},qI=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return r.flipX=!0,r;if(o&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(o){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},pee={mixout:function(){return{parse:{transform:function(n){return qI(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=qI(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,o=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),c="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),h={transform:"".concat(l," ").concat(c," ").concat(u)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:h,path:d};return{tag:"g",attributes:de({},f.outer),children:[{tag:"g",attributes:de({},f.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:de(de({},r.icon.attributes),f.path)}]}]}}}},vy={x:0,y:0,width:"100%",height:"100%"};function GI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function mee(t){return t.tag==="g"?t.children:[t]}var gee={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?Gm(i.split(" ").map(function(o){return o.trim()})):Ab();return s.prefix||(s.prefix=so()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.mask,a=n.maskId,l=n.transform,c=s.width,u=s.icon,h=o.width,d=o.icon,f=pZ({transform:l,containerWidth:h,iconWidth:c}),p={tag:"rect",attributes:de(de({},vy),{},{fill:"white"})},m=u.children?{children:u.children.map(GI)}:{},g={tag:"g",attributes:de({},f.inner),children:[GI(de({tag:u.tag,attributes:de(de({},u.attributes),f.path)},m))]},y={tag:"g",attributes:de({},f.outer),children:[g]},_="mask-".concat(a||th()),T="clip-".concat(a||th()),w={tag:"mask",attributes:de(de({},vy),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},I={tag:"defs",children:[{tag:"clipPath",attributes:{id:T},children:mee(d)},w]};return r.push(I,{tag:"rect",attributes:de({fill:"currentColor","clip-path":"url(#".concat(T,")"),mask:"url(#".concat(_,")")},vy)}),{children:r,attributes:i}}}},yee={provides:function(e){var n=!1;io.matchMedia&&(n=io.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:de(de({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=de(de({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:de(de({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:de(de({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:de(de({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:de(de({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:de(de({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:de(de({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:de(de({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},_ee={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},vee=[yZ,iee,see,oee,aee,dee,fee,pee,gee,yee,_ee];MZ(vee,{mixoutsTo:br});br.noAuto;br.config;var Ye=br.library;br.dom;var kv=br.parse;br.findIconDefinition;br.toHtml;var bee=br.icon;br.layer;br.text;br.counter;var Eee={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},Tee={prefix:"fas",iconName:"users-rectangle",icon:[640,512,[],"e594","M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H544c53 0 96-43 96-96V96c0-53-43-96-96-96H96zM64 96c0-17.7 14.3-32 32-32H544c17.7 0 32 14.3 32 32V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V96zm159.8 80a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM96 309.3c0 14.7 11.9 26.7 26.7 26.7h56.1c8-34.1 32.8-61.7 65.2-73.6c-7.5-4.1-16.2-6.4-25.3-6.4H149.3C119.9 256 96 279.9 96 309.3zM461.2 336h56.1c14.7 0 26.7-11.9 26.7-26.7c0-29.5-23.9-53.3-53.3-53.3H421.3c-9.2 0-17.8 2.3-25.3 6.4c32.4 11.9 57.2 39.5 65.2 73.6zM372 289c-3.9-.7-7.9-1-12-1H280c-4.1 0-8.1 .3-12 1c-26 4.4-47.3 22.7-55.9 47c-2.7 7.5-4.1 15.6-4.1 24c0 13.3 10.7 24 24 24H408c13.3 0 24-10.7 24-24c0-8.4-1.4-16.5-4.1-24c-8.6-24.3-29.9-42.6-55.9-47zM512 176a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM320 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},wee={prefix:"fas",iconName:"spaghetti-monster-flying",icon:[640,512,["pastafarianism"],"f67b","M208 64a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 0c0 16.2-6 31.1-16 42.3l15.6 31.2c18.7-6 39.9-9.5 64.4-9.5s45.8 3.5 64.4 9.5L400 106.3C390 95.1 384 80.2 384 64c0-35.3 28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64c-1.7 0-3.4-.1-5.1-.2L427.8 158c21.1 13.6 37.7 30.2 51.4 46.4c7.1 8.3 13.5 16.6 19.3 24l1.4 1.8c6.3 8.1 11.6 14.8 16.7 20.4C527.3 262.3 532.7 264 536 264c2.5 0 4.3-.6 7.1-3.3c3.7-3.5 7.1-8.8 12.5-17.4l.6-.9c4.6-7.4 11-17.6 19.4-25.7c9.7-9.3 22.9-16.7 40.4-16.7c13.3 0 24 10.7 24 24s-10.7 24-24 24c-2.5 0-4.3 .6-7.1 3.3c-3.7 3.5-7.1 8.8-12.5 17.4l-.6 .9c-4.6 7.4-11 17.6-19.4 25.7c-9.7 9.3-22.9 16.7-40.4 16.7c-18.5 0-32.9-8.5-44.3-18.6c-3.1 4-6.6 8.3-10.5 12.7c1.4 4.3 2.8 8.5 4 12.5c.9 3 1.8 5.8 2.6 8.6c3 9.8 5.5 18.2 8.6 25.9c3.9 9.8 7.4 15.4 10.8 18.5c2.6 2.4 5.9 4.3 12.8 4.3c8.7 0 16.9-4.2 33.7-13.2c15-8 35.7-18.8 62.3-18.8c13.3 0 24 10.7 24 24s-10.7 24-24 24c-13.4 0-24.7 5.2-39.7 13.2c-1 .6-2.1 1.1-3.2 1.7C559.9 414 541.4 424 520 424c-18.4 0-33.6-6.1-45.5-17.2c-11.1-10.3-17.9-23.7-22.7-36c-3.6-9-6.7-19.1-9.5-28.5c-16.4 12.3-36.1 23.6-58.9 31.3c3.6 10.8 8.4 23.5 14.4 36.2c7.5 15.9 16.2 30.4 25.8 40.5C433 460.5 441.2 464 448 464c13.3 0 24 10.7 24 24s-10.7 24-24 24c-25.2 0-45-13.5-59.5-28.8c-14.5-15.4-25.7-34.9-34.2-53c-8-17-14.1-33.8-18.3-46.9c-5.2 .4-10.6 .6-16 .6s-10.8-.2-16-.6c-4.2 13-10.3 29.9-18.3 46.9c-8.5 18.1-19.8 37.6-34.2 53C237 498.5 217.2 512 192 512c-13.3 0-24-10.7-24-24s10.7-24 24-24c6.8 0 15-3.5 24.5-13.7c9.5-10.1 18.3-24.6 25.8-40.5c5.9-12.6 10.7-25.4 14.4-36.2c-22.8-7.7-42.5-19-58.9-31.3c-2.9 9.4-6 19.5-9.5 28.5c-4.8 12.2-11.6 25.6-22.7 36C153.6 417.9 138.4 424 120 424c-21.4 0-39.9-10-53.1-17.1l0 0c-1.1-.6-2.2-1.2-3.2-1.7c-15-8-26.3-13.2-39.7-13.2c-13.3 0-24-10.7-24-24s10.7-24 24-24c26.6 0 47.3 10.8 62.3 18.8c16.8 9 25 13.2 33.7 13.2c6.8 0 10.2-1.9 12.8-4.3c3.4-3.2 7-8.8 10.8-18.5c3-7.7 5.6-16.1 8.6-25.9c.8-2.7 1.7-5.6 2.6-8.6c1.2-4 2.6-8.2 4-12.5c-3.9-4.5-7.4-8.8-10.5-12.7C136.9 303.5 122.5 312 104 312c-17.5 0-30.7-7.4-40.4-16.7c-8.4-8.1-14.8-18.3-19.4-25.7l-.6-.9c-5.4-8.6-8.8-13.9-12.5-17.4c-2.8-2.7-4.6-3.3-7.1-3.3c-13.3 0-24-10.7-24-24s10.7-24 24-24c17.5 0 30.7 7.4 40.4 16.7c8.4 8.1 14.8 18.3 19.4 25.7l.6 .9c5.4 8.6 8.8 13.9 12.5 17.4c2.8 2.7 4.6 3.3 7.1 3.3c3.3 0 8.7-1.7 19.4-13.4c5.1-5.6 10.4-12.3 16.7-20.4l1.4-1.8c5.8-7.4 12.2-15.7 19.3-24c13.8-16.2 30.3-32.8 51.4-46.4l-15.1-30.2c-1.7 .1-3.4 .2-5.1 .2c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm208 0a16 16 0 1 0 -32 0 16 16 0 1 0 32 0z"]},See={prefix:"fas",iconName:"spoon",icon:[512,512,[129348,61873,"utensil-spoon"],"f2e5","M245.8 220.9c-14.5-17.6-21.8-39.2-21.8-60.8C224 80 320 0 416 0c53 0 96 43 96 96c0 96-80 192-160.2 192c-21.6 0-43.2-7.3-60.8-21.8L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L245.8 220.9z"]},Iee={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},Aee={prefix:"fas",iconName:"paw",icon:[512,512,[],"f1b0","M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z"]},Cee={prefix:"fas",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},Ree={prefix:"fas",iconName:"ghost",icon:[384,512,[128123],"f6e2","M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9C8 480 0 472 0 462.2V192C0 86 86 0 192 0S384 86 384 192V462.2c0 9.8-8 17.8-17.8 17.8c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-13.4-10.7-32.8-9-44.1 3.9L269.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6l-26.6-30.5c-12.7-14.6-35.4-14.6-48.2 0L141.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6L84.2 471c-11.3-12.9-30.7-14.6-44.1-3.9zM160 192a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},kee={prefix:"fas",iconName:"tree",icon:[448,512,[127794],"f1bb","M210.6 5.9L62 169.4c-3.9 4.2-6 9.8-6 15.5C56 197.7 66.3 208 79.1 208H104L30.6 281.4c-4.2 4.2-6.6 10-6.6 16C24 309.9 34.1 320 46.6 320H80L5.4 409.5C1.9 413.7 0 419 0 424.5c0 13 10.5 23.5 23.5 23.5H192v32c0 17.7 14.3 32 32 32s32-14.3 32-32V448H424.5c13 0 23.5-10.5 23.5-23.5c0-5.5-1.9-10.8-5.4-15L368 320h33.4c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16L344 208h24.9c12.7 0 23.1-10.3 23.1-23.1c0-5.7-2.1-11.3-6-15.5L237.4 5.9C234 2.1 229.1 0 224 0s-10 2.1-13.4 5.9z"]},Oee={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},Nee={prefix:"fas",iconName:"shapes",icon:[512,512,["triangle-circle-square"],"f61f","M315.4 15.5C309.7 5.9 299.2 0 288 0s-21.7 5.9-27.4 15.5l-96 160c-5.9 9.9-6.1 22.2-.4 32.2s16.3 16.2 27.8 16.2H384c11.5 0 22.2-6.2 27.8-16.2s5.5-22.3-.4-32.2l-96-160zM288 312V456c0 22.1 17.9 40 40 40H472c22.1 0 40-17.9 40-40V312c0-22.1-17.9-40-40-40H328c-22.1 0-40 17.9-40 40zM128 512a128 128 0 1 0 0-256 128 128 0 1 0 0 256z"]},Mee={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Pee={prefix:"fas",iconName:"user-group",icon:[640,512,[128101,"user-friends"],"f500","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM609.3 512H471.4c5.4-9.4 8.6-20.3 8.6-32v-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2h61.4C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"]},xee={prefix:"fas",iconName:"fire",icon:[448,512,[128293],"f06d","M159.3 5.4c7.8-7.3 19.9-7.2 27.7 .1c27.6 25.9 53.5 53.8 77.7 84c11-14.4 23.5-30.1 37-42.9c7.9-7.4 20.1-7.4 28 .1c34.6 33 63.9 76.6 84.5 118c20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512C98.4 512 0 404.1 0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3 0 47.7-7 68.8-21c42.1-29.4 53.4-88.2 28.1-134.4c-4.5-9-16-9.6-22.5-2l-25.2 29.3c-6.6 7.6-18.5 7.4-24.7-.5c-16.5-21-46-58.5-62.8-79.8c-6.3-8-18.3-8.1-24.7-.1c-33.8 42.5-50.8 69.3-50.8 99.4C112 375.4 162.6 416 225.7 416z"]},Dee={prefix:"fas",iconName:"eye-low-vision",icon:[640,512,["low-vision"],"f2a8","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223 149.5c48.6-44.3 123-50.8 179.3-11.7c60.8 42.4 78.9 123.2 44.2 186.9L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3L223 149.5zm-139.9 12c-11 14.4-20.5 28.7-28.4 42.2l339 265.7c18.7-5.5 36.2-13 52.6-21.8L83.1 161.5zm-50 86.3c-1.8 6.8-1.3 14 1.4 20.5c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c3.1 0 6.1-.1 9.2-.2L33.1 247.8z"]},Lee={prefix:"fas",iconName:"crow",icon:[640,512,[],"f520","M456 0c-48.6 0-88 39.4-88 88v29.2L12.5 390.6c-14 10.8-16.6 30.9-5.9 44.9s30.9 16.6 44.9 5.9L126.1 384H259.2l46.6 113.1c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3L311.1 384H352c1.1 0 2.1 0 3.2 0l46.6 113.2c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3l-42-102C484.9 354.1 544 280 544 192V128v-8l80.5-20.1c8.6-2.1 13.8-10.8 11.6-19.4C629 52 603.4 32 574 32H523.9C507.7 12.5 483.3 0 456 0zm0 64a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Vee={prefix:"fas",iconName:"frog",icon:[576,512,[],"f52e","M368 32c41.7 0 75.9 31.8 79.7 72.5l85.6 26.3c25.4 7.8 42.8 31.3 42.8 57.9c0 21.8-11.7 41.9-30.7 52.7L400.8 323.5 493.3 416H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H480c-8.5 0-16.6-3.4-22.6-9.4L346.9 360.2c11.7-36 3.2-77.1-25.4-105.7c-40.6-40.6-106.3-40.6-146.9-.1L101 324.4c-6.4 6.1-6.7 16.2-.6 22.6s16.2 6.6 22.6 .6l73.8-70.2 .1-.1 .1-.1c3.5-3.5 7.3-6.6 11.3-9.2c27.9-18.5 65.9-15.4 90.5 9.2c24.7 24.7 27.7 62.9 9 90.9c-2.6 3.8-5.6 7.5-9 10.9L261.8 416H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-35.3 0-64-28.7-64-64C0 249.6 127 112.9 289.3 97.5C296.2 60.2 328.8 32 368 32zm0 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},Fee={prefix:"fas",iconName:"feather-pointed",icon:[512,512,["feather-alt"],"f56b","M278.5 215.6L23 471c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l74.8-74.8c7.4 4.6 15.3 8.2 23.8 10.5C200.3 452.8 270 454.5 338 409.4c12.2-8.1 5.8-25.4-8.8-25.4l-16.1 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l97.7-29.3c3.4-1 6.4-3.1 8.4-6.1c4.4-6.4 8.6-12.9 12.6-19.6c6.2-10.3-1.5-23-13.5-23l-38.6 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l80.9-24.3c4.6-1.4 8.4-4.8 10.2-9.3C494.5 163 507.8 86.1 511.9 36.8c.8-9.9-3-19.6-10-26.6s-16.7-10.8-26.6-10C391.5 7 228.5 40.5 137.4 131.6C57.3 211.7 56.7 302.3 71.3 356.4c2.1 7.9 12 9.6 17.8 3.8L253.6 195.8c6.2-6.2 16.4-6.2 22.6 0c5.4 5.4 6.1 13.6 2.2 19.8z"]},Uee={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},Bee={prefix:"fas",iconName:"hat-cowboy",icon:[640,512,[],"f8c0","M320 64c14.4 0 22.3-7 30.8-14.4C360.4 41.1 370.7 32 392 32c49.3 0 84.4 152.2 97.9 221.9C447.8 272.1 390.9 288 320 288s-127.8-15.9-169.9-34.1C163.6 184.2 198.7 32 248 32c21.3 0 31.6 9.1 41.2 17.6C297.7 57 305.6 64 320 64zM111.1 270.7c47.2 24.5 117.5 49.3 209 49.3s161.8-24.8 208.9-49.3c24.8-12.9 49.8-28.3 70.1-47.7c7.9-7.9 20.2-9.2 29.6-3.3c9.5 5.9 13.5 17.9 9.9 28.5c-13.5 37.7-38.4 72.3-66.1 100.6C523.7 398.9 443.6 448 320 448s-203.6-49.1-252.5-99.2C39.8 320.4 14.9 285.8 1.4 248.1c-3.6-10.6 .4-22.6 9.9-28.5c9.5-5.9 21.7-4.5 29.6 3.3c20.4 19.4 45.3 34.8 70.1 47.7z"]},$ee={prefix:"fas",iconName:"cat",icon:[576,512,[128008],"f6be","M320 192h17.1c22.1 38.3 63.5 64 110.9 64c11 0 21.8-1.4 32-4v4 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V339.2L280 448h56c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-53 0-96-43-96-96V192.5c0-16.1-12-29.8-28-31.8l-7.9-1c-17.5-2.2-30-18.2-27.8-35.7s18.2-30 35.7-27.8l7.9 1c48 6 84.1 46.8 84.1 95.3v85.3c34.4-51.7 93.2-85.8 160-85.8zm160 26.5v0c-10 3.5-20.8 5.5-32 5.5c-28.4 0-54-12.4-71.6-32h0c-3.7-4.1-7-8.5-9.9-13.2C357.3 164 352 146.6 352 128v0V32 12 10.7C352 4.8 356.7 .1 362.6 0h.2c3.3 0 6.4 1.6 8.4 4.2l0 .1L384 21.3l27.2 36.3L416 64h64l4.8-6.4L512 21.3 524.8 4.3l0-.1c2-2.6 5.1-4.2 8.4-4.2h.2C539.3 .1 544 4.8 544 10.7V12 32v96c0 17.3-4.6 33.6-12.6 47.6c-11.3 19.8-29.6 35.2-51.4 42.9zM432 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},Hee={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},zee={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},jee={prefix:"fas",iconName:"hat-wizard",icon:[512,512,[],"f6e8","M64 416L168.6 180.7c15.3-34.4 40.3-63.5 72-83.7l146.9-94c3-1.9 6.5-2.9 10-2.9C407.7 0 416 8.3 416 18.6v1.6c0 2.6-.5 5.1-1.4 7.5L354.8 176.9c-1.9 4.7-2.8 9.7-2.8 14.7c0 5.5 1.2 11 3.4 16.1L448 416H240.9l11.8-35.4 40.4-13.5c6.5-2.2 10.9-8.3 10.9-15.2s-4.4-13-10.9-15.2l-40.4-13.5-13.5-40.4C237 276.4 230.9 272 224 272s-13 4.4-15.2 10.9l-13.5 40.4-40.4 13.5C148.4 339 144 345.1 144 352s4.4 13 10.9 15.2l40.4 13.5L207.1 416H64zM279.6 141.5c-1.1-3.3-4.1-5.5-7.6-5.5s-6.5 2.2-7.6 5.5l-6.7 20.2-20.2 6.7c-3.3 1.1-5.5 4.1-5.5 7.6s2.2 6.5 5.5 7.6l20.2 6.7 6.7 20.2c1.1 3.3 4.1 5.5 7.6 5.5s6.5-2.2 7.6-5.5l6.7-20.2 20.2-6.7c3.3-1.1 5.5-4.1 5.5-7.6s-2.2-6.5-5.5-7.6l-20.2-6.7-6.7-20.2zM32 448H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Wee={prefix:"fas",iconName:"table-cells-large",icon:[512,512,["th-large"],"f009","M448 96V224H288V96H448zm0 192V416H288V288H448zM224 224H64V96H224V224zM64 288H224V416H64V288zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},qee={prefix:"fas",iconName:"dove",icon:[512,512,[128330],"f4ba","M160.8 96.5c14 17 31 30.9 49.5 42.2c25.9 15.8 53.7 25.9 77.7 31.6V138.8C265.8 108.5 250 71.5 248.6 28c-.4-11.3-7.5-21.5-18.4-24.4c-7.6-2-15.8-.2-21 5.8c-13.3 15.4-32.7 44.6-48.4 87.2zM320 144v30.6l0 0v1.3l0 0 0 32.1c-60.8-5.1-185-43.8-219.3-157.2C97.4 40 87.9 32 76.6 32c-7.9 0-15.3 3.9-18.8 11C46.8 65.9 32 112.1 32 176c0 116.9 80.1 180.5 118.4 202.8L11.8 416.6C6.7 418 2.6 421.8 .9 426.8s-.8 10.6 2.3 14.8C21.7 466.2 77.3 512 160 512c3.6 0 7.2-1.2 10-3.5L245.6 448H320c88.4 0 160-71.6 160-160V128l29.9-44.9c1.3-2 2.1-4.4 2.1-6.8c0-6.8-5.5-12.3-12.3-12.3H400c-44.2 0-80 35.8-80 80zm80-16a16 16 0 1 1 0 32 16 16 0 1 1 0-32z"]},Gee={prefix:"fas",iconName:"list-ul",icon:[512,512,["list-dots"],"f0ca","M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"]},Kee={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Yee={prefix:"fas",iconName:"users-line",icon:[640,512,[],"e592","M211.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM32 256c0 17.7 14.3 32 32 32h85.6c10.1-39.4 38.6-71.5 75.8-86.6c-9.7-6-21.2-9.4-33.4-9.4H96c-35.3 0-64 28.7-64 64zm461.6 32H576c17.7 0 32-14.3 32-32c0-35.3-28.7-64-64-64H448c-11.7 0-22.7 3.1-32.1 8.6c38.1 14.8 67.4 47.3 77.7 87.4zM391.2 226.4c-6.9-1.6-14.2-2.4-21.6-2.4h-96c-8.5 0-16.7 1.1-24.5 3.1c-30.8 8.1-55.6 31.1-66.1 60.9c-3.5 10-5.5 20.8-5.5 32c0 17.7 14.3 32 32 32h224c17.7 0 32-14.3 32-32c0-11.2-1.9-22-5.5-32c-10.8-30.7-36.8-54.2-68.9-61.6zM563.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM321.6 192a80 80 0 1 0 0-160 80 80 0 1 0 0 160zM32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32H608c17.7 0 32-14.3 32-32s-14.3-32-32-32H32z"]},Jee={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2v82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9V380.8c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},Qee={prefix:"fas",iconName:"disease",icon:[512,512,[],"f7fa","M236.4 61.4L227 75.5c-21.3 32-59.4 48.5-97.3 42.1l-59.6-9.9C33.4 101.6 0 129.9 .1 167.1c0 15.9 6.4 31.2 17.6 42.5l29.2 29.2c11 11 17.2 25.9 17.2 41.5c0 15.8-6.4 30.9-17.7 42L33.3 335.1C22.2 345.9 16 360.7 16 376.2c0 36.8 34.1 64.2 70.1 56.2l62.3-13.8c7.7-1.7 15.7-2.6 23.6-2.6h10c27.2 0 53.7 9.3 75 26.3L287.8 467c10.5 8.4 23.6 13 37 13c32.7 0 59.3-26.5 59.3-59.3l0-25.2c0-34.9 21.4-66.2 53.9-78.8l36.9-14.3c22.4-8.7 37.2-30.3 37.2-54.3c0-28.1-20.1-52.3-47.8-57.3l-28-5.1c-36.5-6.7-65.4-34.5-73.6-70.7l-7.1-31.5C348.9 53.4 322.1 32 291.3 32c-22 0-42.6 11-54.9 29.4zM160 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 16a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zm0 80a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},Xee={prefix:"fas",iconName:"shield",icon:[512,512,[128737,"shield-blank"],"f132","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0z"]},Zee={prefix:"fas",iconName:"hippo",icon:[640,512,[129435],"f6ed","M407 47c9.4-9.4 24.6-9.4 33.9 0l17.2 17.2c1.9-.1 3.9-.2 5.8-.2h32c11.2 0 21.9 2.3 31.6 6.5L543 55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L564 101.9c7.6 12.2 12 26.7 12 42.1c0 10.2 7.4 18.8 16.7 23c27.9 12.5 47.3 40.5 47.3 73c0 26.2-12.6 49.4-32 64v32c0 8.8-7.2 16-16 16H560c-8.8 0-16-7.2-16-16V320H480v16c0 8.8-7.2 16-16 16H432c-8.8 0-16-7.2-16-16V318.4c-11.8-2.4-22.7-7.4-32-14.4c-1.5-1.1-2.9-2.3-4.3-3.5c-17-14.7-27.7-36.4-27.7-60.5c0-8.8-7.2-16-16-16s-16 7.2-16 16c0 44.7 26.2 83.2 64 101.2V352c0 17.7 14.3 32 32 32h32v64c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V372c-19.8 7.7-41.4 12-64 12s-44.2-4.3-64-12v76c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V329.1L45.9 369.7c-5.4 12.1-19.6 17.6-31.7 12.2S-3.3 362.4 2.1 350.3L24 300.9c5.3-11.9 8-24.7 8-37.7C32 155.7 117.2 68 223.8 64.1l.2-.1h7.2H256h32c41.7 0 83.4 12.1 117.2 25.7c1.7-1.8 3.5-3.6 5.3-5.2L407 81c-9.4-9.4-9.4-24.6 0-33.9zm73 185a24 24 0 1 0 -48 0 24 24 0 1 0 48 0zm88 24a24 24 0 1 0 0-48 24 24 0 1 0 0 48zM480 144a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},ete={prefix:"fas",iconName:"hand-fist",icon:[448,512,[9994,"fist-raised"],"f6de","M192 0c17.7 0 32 14.3 32 32V144H160V32c0-17.7 14.3-32 32-32zM64 64c0-17.7 14.3-32 32-32s32 14.3 32 32v80H64V64zm192 0c0-17.7 14.3-32 32-32s32 14.3 32 32v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V64zm96 64c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V128zm-96 88l0-.6c9.4 5.4 20.3 8.6 32 8.6c13.2 0 25.4-4 35.6-10.8c8.7 24.9 32.5 42.8 60.4 42.8c11.7 0 22.6-3.1 32-8.6V256c0 52.3-25.1 98.8-64 128v96c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V401.6c-17.3-7.9-33.2-18.8-46.9-32.5L69.5 357.5C45.5 333.5 32 300.9 32 267V240c0-35.3 28.7-64 64-64h88c22.1 0 40 17.9 40 40s-17.9 40-40 40H128c-8.8 0-16 7.2-16 16s7.2 16 16 16h56c39.8 0 72-32.2 72-72z"]},tte={prefix:"fas",iconName:"users-gear",icon:[640,512,["users-cog"],"f509","M144 160A80 80 0 1 0 144 0a80 80 0 1 0 0 160zm368 0A80 80 0 1 0 512 0a80 80 0 1 0 0 160zM0 298.7C0 310.4 9.6 320 21.3 320H234.7c.2 0 .4 0 .7 0c-26.6-23.5-43.3-57.8-43.3-96c0-7.6 .7-15 1.9-22.3c-13.6-6.3-28.7-9.7-44.6-9.7H106.7C47.8 192 0 239.8 0 298.7zM320 320c24 0 45.9-8.8 62.7-23.3c2.5-3.7 5.2-7.3 8-10.7c2.7-3.3 5.7-6.1 9-8.3C410 262.3 416 243.9 416 224c0-53-43-96-96-96s-96 43-96 96s43 96 96 96zm65.4 60.2c-10.3-5.9-18.1-16.2-20.8-28.2H261.3C187.7 352 128 411.7 128 485.3c0 14.7 11.9 26.7 26.7 26.7H455.2c-2.1-5.2-3.2-10.9-3.2-16.4v-3c-1.3-.7-2.7-1.5-4-2.3l-2.6 1.5c-16.8 9.7-40.5 8-54.7-9.7c-4.5-5.6-8.6-11.5-12.4-17.6l-.1-.2-.1-.2-2.4-4.1-.1-.2-.1-.2c-3.4-6.2-6.4-12.6-9-19.3c-8.2-21.2 2.2-42.6 19-52.3l2.7-1.5c0-.8 0-1.5 0-2.3s0-1.5 0-2.3l-2.7-1.5zM533.3 192H490.7c-15.9 0-31 3.5-44.6 9.7c1.3 7.2 1.9 14.7 1.9 22.3c0 17.4-3.5 33.9-9.7 49c2.5 .9 4.9 2 7.1 3.3l2.6 1.5c1.3-.8 2.6-1.6 4-2.3v-3c0-19.4 13.3-39.1 35.8-42.6c7.9-1.2 16-1.9 24.2-1.9s16.3 .6 24.2 1.9c22.5 3.5 35.8 23.2 35.8 42.6v3c1.3 .7 2.7 1.5 4 2.3l2.6-1.5c16.8-9.7 40.5-8 54.7 9.7c2.3 2.8 4.5 5.8 6.6 8.7c-2.1-57.1-49-102.7-106.6-102.7zm91.3 163.9c6.3-3.6 9.5-11.1 6.8-18c-2.1-5.5-4.6-10.8-7.4-15.9l-2.3-4c-3.1-5.1-6.5-9.9-10.2-14.5c-4.6-5.7-12.7-6.7-19-3l-2.9 1.7c-9.2 5.3-20.4 4-29.6-1.3s-16.1-14.5-16.1-25.1v-3.4c0-7.3-4.9-13.8-12.1-14.9c-6.5-1-13.1-1.5-19.9-1.5s-13.4 .5-19.9 1.5c-7.2 1.1-12.1 7.6-12.1 14.9v3.4c0 10.6-6.9 19.8-16.1 25.1s-20.4 6.6-29.6 1.3l-2.9-1.7c-6.3-3.6-14.4-2.6-19 3c-3.7 4.6-7.1 9.5-10.2 14.6l-2.3 3.9c-2.8 5.1-5.3 10.4-7.4 15.9c-2.6 6.8 .5 14.3 6.8 17.9l2.9 1.7c9.2 5.3 13.7 15.8 13.7 26.4s-4.5 21.1-13.7 26.4l-3 1.7c-6.3 3.6-9.5 11.1-6.8 17.9c2.1 5.5 4.6 10.7 7.4 15.8l2.4 4.1c3 5.1 6.4 9.9 10.1 14.5c4.6 5.7 12.7 6.7 19 3l2.9-1.7c9.2-5.3 20.4-4 29.6 1.3s16.1 14.5 16.1 25.1v3.4c0 7.3 4.9 13.8 12.1 14.9c6.5 1 13.1 1.5 19.9 1.5s13.4-.5 19.9-1.5c7.2-1.1 12.1-7.6 12.1-14.9v-3.4c0-10.6 6.9-19.8 16.1-25.1s20.4-6.6 29.6-1.3l2.9 1.7c6.3 3.6 14.4 2.6 19-3c3.7-4.6 7.1-9.4 10.1-14.5l2.4-4.2c2.8-5.1 5.3-10.3 7.4-15.8c2.6-6.8-.5-14.3-6.8-17.9l-3-1.7c-9.2-5.3-13.7-15.8-13.7-26.4s4.5-21.1 13.7-26.4l3-1.7zM472 384a40 40 0 1 1 80 0 40 40 0 1 1 -80 0z"]};function KI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KI(Object(n),!0).forEach(function(r){Yn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function Yn(t,e,n){return e=ste(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nte(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rte(t,e){if(t==null)return{};var n=nte(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ite(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ste(t){var e=ite(t,"string");return typeof e=="symbol"?e:String(e)}var ote=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},SP={exports:{}};(function(t){(function(e){var n=function(y,_,T){if(!c(_)||h(_)||d(_)||f(_)||l(_))return _;var w,I=0,C=0;if(u(_))for(w=[],C=_.length;I<C;I++)w.push(n(y,_[I],T));else{w={};for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(w[y(x,T)]=n(y,_[x],T))}return w},r=function(y,_){_=_||{};var T=_.separator||"_",w=_.split||/(?=[A-Z])/;return y.split(w).join(T)},i=function(y){return p(y)?y:(y=y.replace(/[\-_\s]+(.)?/g,function(_,T){return T?T.toUpperCase():""}),y.substr(0,1).toLowerCase()+y.substr(1))},s=function(y){var _=i(y);return _.substr(0,1).toUpperCase()+_.substr(1)},o=function(y,_){return r(y,_).toLowerCase()},a=Object.prototype.toString,l=function(y){return typeof y=="function"},c=function(y){return y===Object(y)},u=function(y){return a.call(y)=="[object Array]"},h=function(y){return a.call(y)=="[object Date]"},d=function(y){return a.call(y)=="[object RegExp]"},f=function(y){return a.call(y)=="[object Boolean]"},p=function(y){return y=y-0,y===y},m=function(y,_){var T=_&&"process"in _?_.process:_;return typeof T!="function"?y:function(w,I){return T(w,y,I)}},g={camelize:i,decamelize:o,pascalize:s,depascalize:o,camelizeKeys:function(y,_){return n(m(i,_),y)},decamelizeKeys:function(y,_){return n(m(o,_),y,_)},pascalizeKeys:function(y,_){return n(m(s,_),y)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=g:e.humps=g})(ote)})(SP);var ate=SP.exports,lte=["class","style"];function cte(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=ate.camelize(n.slice(0,r)),s=n.slice(r+1).trim();return e[i]=s,e},{})}function ute(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function IP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(l){return IP(l)}),i=Object.keys(t.attributes||{}).reduce(function(l,c){var u=t.attributes[c];switch(c){case"class":l.class=ute(u);break;case"style":l.style=cte(u);break;default:l.attrs[c]=u}return l},{attrs:{},class:{},style:{}});n.class;var s=n.style,o=s===void 0?{}:s,a=rte(n,lte);return qo(t.tag,Fi(Fi(Fi({},e),{},{class:i.class,style:Fi(Fi({},i.style),o)},i.attrs),a),r)}var AP=!1;try{AP=!0}catch{}function hte(){if(!AP&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function by(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Yn({},t,e):{}}function dte(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Yn(e,"fa-".concat(t.size),t.size!==null),Yn(e,"fa-rotate-".concat(t.rotation),t.rotation!==null),Yn(e,"fa-pull-".concat(t.pull),t.pull!==null),Yn(e,"fa-swap-opacity",t.swapOpacity),Yn(e,"fa-bounce",t.bounce),Yn(e,"fa-shake",t.shake),Yn(e,"fa-beat",t.beat),Yn(e,"fa-fade",t.fade),Yn(e,"fa-beat-fade",t.beatFade),Yn(e,"fa-flash",t.flash),Yn(e,"fa-spin-pulse",t.spinPulse),Yn(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function YI(t){if(t&&Ep(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(kv.icon)return kv.icon(t);if(t===null)return null;if(Ep(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var fte=Yt({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,i=pt(function(){return YI(e.icon)}),s=pt(function(){return by("classes",dte(e))}),o=pt(function(){return by("transform",typeof e.transform=="string"?kv.transform(e.transform):e.transform)}),a=pt(function(){return by("mask",YI(e.mask))}),l=pt(function(){return bee(i.value,Fi(Fi(Fi(Fi({},s.value),o.value),a.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});Gi(l,function(u){if(!u)return hte("Could not find one or more icon(s)",i.value,a.value)},{immediate:!0});var c=pt(function(){return l.value?IP(l.value.abstract[0],{},r):null});return function(){return c.value}}});Ye.add(Pee);Ye.add(zee);Ye.add(Oee);Ye.add(Hee);Ye.add(Dee);Ye.add(Gee);Ye.add(Mee);Ye.add(Eee);Ye.add(Tee);Ye.add(Cee);Ye.add(Wee);Ye.add(Nee);Ye.add(Yee);Ye.add(tte);Ye.add(Kee);Ye.add(Iee);Ye.add(Xee);Ye.add(Jee);Ye.add(wee);Ye.add(Aee);Ye.add(Zee);Ye.add(Lee);Ye.add(Vee);Ye.add(Fee);Ye.add(Qee);Ye.add($ee);Ye.add(qee);Ye.add(See);Ye.add(Ree);Ye.add(Uee);Ye.add(ete);Ye.add(jee);Ye.add(Bee);Ye.add(kee);Ye.add(xee);const Gh=s4(oH);Gh.use(u4());Gh.use(X7,{firebaseApp:WO,modules:[K7()]});Gh.use(JM);Gh.component("FontAwesomeIcon",fte);Gh.mount("#app");
