(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function kv(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const vt={},Wa=[],Sr=()=>{},IP=()=>!1,_p=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ov=t=>t.startsWith("onUpdate:"),Yt=Object.assign,Nv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},AP=Object.prototype.hasOwnProperty,tt=(t,e)=>AP.call(t,e),ve=Array.isArray,qa=t=>Ju(t)==="[object Map]",vp=t=>Ju(t)==="[object Set]",xb=t=>Ju(t)==="[object Date]",Oe=t=>typeof t=="function",Lt=t=>typeof t=="string",zs=t=>typeof t=="symbol",ft=t=>t!==null&&typeof t=="object",Mv=t=>(ft(t)||Oe(t))&&Oe(t.then)&&Oe(t.catch),QI=Object.prototype.toString,Ju=t=>QI.call(t),CP=t=>Ju(t).slice(8,-1),XI=t=>Ju(t)==="[object Object]",Pv=t=>Lt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Nc=kv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},RP=/-(\w)/g,gi=bp(t=>t.replace(RP,(e,n)=>n?n.toUpperCase():"")),kP=/\B([A-Z])/g,ha=bp(t=>t.replace(kP,"-$1").toLowerCase()),Ep=bp(t=>t.charAt(0).toUpperCase()+t.slice(1)),Km=bp(t=>t?`on${Ep(t)}`:""),js=(t,e)=>!Object.is(t,e),Od=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},ef=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},by=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ZI=t=>{const e=Lt(t)?Number(t):NaN;return isNaN(e)?t:e};let Db;const eA=()=>Db||(Db=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yi(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Lt(r)?PP(r):yi(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Lt(t)||ft(t))return t}const OP=/;(?![^(]*\))/g,NP=/:([^]+)/,MP=/\/\*[^]*?\*\//g;function PP(t){const e={};return t.replace(MP,"").split(OP).forEach(n=>{if(n){const r=n.split(NP);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Qu(t){let e="";if(Lt(t))e=t;else if(ve(t))for(let n=0;n<t.length;n++){const r=Qu(t[n]);r&&(e+=r+" ")}else if(ft(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const xP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",DP=kv(xP);function tA(t){return!!t||t===""}function LP(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Tp(t[r],e[r]);return n}function Tp(t,e){if(t===e)return!0;let n=xb(t),r=xb(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=zs(t),r=zs(e),n||r)return t===e;if(n=ve(t),r=ve(e),n||r)return n&&r?LP(t,e):!1;if(n=ft(t),r=ft(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Tp(t[o],e[o]))return!1}}return String(t)===String(e)}function nA(t,e){return t.findIndex(n=>Tp(n,e))}const Ie=t=>Lt(t)?t:t==null?"":ve(t)||ft(t)&&(t.toString===QI||!Oe(t.toString))?JSON.stringify(t,rA,2):String(t),rA=(t,e)=>e&&e.__v_isRef?rA(t,e.value):qa(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Ym(r,s)+" =>"]=i,n),{})}:vp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ym(n))}:zs(e)?Ym(e):ft(e)&&!ve(e)&&!XI(e)?String(e):e,Ym=(t,e="")=>{var n;return zs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sr;class iA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=sr,!e&&sr&&(this.index=(sr.scopes||(sr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=sr;try{return sr=this,e()}finally{sr=n}}}on(){sr=this}off(){sr=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function sA(t){return new iA(t)}function VP(t,e=sr){e&&e.active&&e.effects.push(t)}function xv(){return sr}function oA(t){sr&&sr.cleanups.push(t)}let Fo;class Dv{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,VP(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,da();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(FP(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),fa()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=xs,n=Fo;try{return xs=!0,Fo=this,this._runnings++,Lb(this),this.fn()}finally{Vb(this),this._runnings--,Fo=n,xs=e}}stop(){var e;this.active&&(Lb(this),Vb(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function FP(t){return t.value}function Lb(t){t._trackId++,t._depsLength=0}function Vb(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)aA(t.deps[e],t);t.deps.length=t._depsLength}}function aA(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let xs=!0,Ey=0;const lA=[];function da(){lA.push(xs),xs=!1}function fa(){const t=lA.pop();xs=t===void 0?!0:t}function Lv(){Ey++}function Vv(){for(Ey--;!Ey&&Ty.length;)Ty.shift()()}function cA(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&aA(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Ty=[];function uA(t,e,n){Lv();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Ty.push(r.scheduler)))}Vv()}const hA=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},tf=new WeakMap,Bo=Symbol(""),wy=Symbol("");function er(t,e,n){if(xs&&Fo){let r=tf.get(t);r||tf.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=hA(()=>r.delete(n))),cA(Fo,i)}}function ji(t,e,n,r,i,s){const o=tf.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ve(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!zs(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ve(t)?Pv(n)&&a.push(o.get("length")):(a.push(o.get(Bo)),qa(t)&&a.push(o.get(wy)));break;case"delete":ve(t)||(a.push(o.get(Bo)),qa(t)&&a.push(o.get(wy)));break;case"set":qa(t)&&a.push(o.get(Bo));break}Lv();for(const l of a)l&&uA(l,4);Vv()}function BP(t,e){var n;return(n=tf.get(t))==null?void 0:n.get(e)}const UP=kv("__proto__,__v_isRef,__isVue"),dA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(zs)),Fb=$P();function $P(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=nt(this);for(let s=0,o=this.length;s<o;s++)er(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(nt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){da(),Lv();const r=nt(this)[e].apply(this,n);return Vv(),fa(),r}}),t}function HP(t){const e=nt(this);return er(e,"has",t),e.hasOwnProperty(t)}class fA{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?tx:yA:s?gA:mA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ve(e);if(!i){if(o&&tt(Fb,n))return Reflect.get(Fb,n,r);if(n==="hasOwnProperty")return HP}const a=Reflect.get(e,n,r);return(zs(n)?dA.has(n):UP(n))||(i||er(e,"get",n),s)?a:an(a)?o&&Pv(n)?a:a.value:ft(a)?i?Uv(a):Xu(a):a}}class pA extends fA{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=dl(s);if(!nf(r)&&!dl(r)&&(s=nt(s),r=nt(r)),!ve(e)&&an(s)&&!an(r))return l?!1:(s.value=r,!0)}const o=ve(e)&&Pv(n)?Number(n)<e.length:tt(e,n),a=Reflect.set(e,n,r,i);return e===nt(i)&&(o?js(r,s)&&ji(e,"set",n,r):ji(e,"add",n,r)),a}deleteProperty(e,n){const r=tt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&ji(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!zs(n)||!dA.has(n))&&er(e,"has",n),r}ownKeys(e){return er(e,"iterate",ve(e)?"length":Bo),Reflect.ownKeys(e)}}class zP extends fA{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const jP=new pA,WP=new zP,qP=new pA(!0),Fv=t=>t,wp=t=>Reflect.getPrototypeOf(t);function zh(t,e,n=!1,r=!1){t=t.__v_raw;const i=nt(t),s=nt(e);n||(js(e,s)&&er(i,"get",e),er(i,"get",s));const{has:o}=wp(i),a=r?Fv:n?Hv:au;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function jh(t,e=!1){const n=this.__v_raw,r=nt(n),i=nt(t);return e||(js(t,i)&&er(r,"has",t),er(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Wh(t,e=!1){return t=t.__v_raw,!e&&er(nt(t),"iterate",Bo),Reflect.get(t,"size",t)}function Bb(t){t=nt(t);const e=nt(this);return wp(e).has.call(e,t)||(e.add(t),ji(e,"add",t,t)),this}function Ub(t,e){e=nt(e);const n=nt(this),{has:r,get:i}=wp(n);let s=r.call(n,t);s||(t=nt(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?js(e,o)&&ji(n,"set",t,e):ji(n,"add",t,e),this}function $b(t){const e=nt(this),{has:n,get:r}=wp(e);let i=n.call(e,t);i||(t=nt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&ji(e,"delete",t,void 0),s}function Hb(){const t=nt(this),e=t.size!==0,n=t.clear();return e&&ji(t,"clear",void 0,void 0),n}function qh(t,e){return function(r,i){const s=this,o=s.__v_raw,a=nt(o),l=e?Fv:t?Hv:au;return!t&&er(a,"iterate",Bo),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function Gh(t,e,n){return function(...r){const i=this.__v_raw,s=nt(i),o=qa(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?Fv:e?Hv:au;return!e&&er(s,"iterate",l?wy:Bo),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ls(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function GP(){const t={get(s){return zh(this,s)},get size(){return Wh(this)},has:jh,add:Bb,set:Ub,delete:$b,clear:Hb,forEach:qh(!1,!1)},e={get(s){return zh(this,s,!1,!0)},get size(){return Wh(this)},has:jh,add:Bb,set:Ub,delete:$b,clear:Hb,forEach:qh(!1,!0)},n={get(s){return zh(this,s,!0)},get size(){return Wh(this,!0)},has(s){return jh.call(this,s,!0)},add:ls("add"),set:ls("set"),delete:ls("delete"),clear:ls("clear"),forEach:qh(!0,!1)},r={get(s){return zh(this,s,!0,!0)},get size(){return Wh(this,!0)},has(s){return jh.call(this,s,!0)},add:ls("add"),set:ls("set"),delete:ls("delete"),clear:ls("clear"),forEach:qh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Gh(s,!1,!1),n[s]=Gh(s,!0,!1),e[s]=Gh(s,!1,!0),r[s]=Gh(s,!0,!0)}),[t,n,e,r]}const[KP,YP,JP,QP]=GP();function Bv(t,e){const n=e?t?QP:JP:t?YP:KP;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(tt(n,i)&&i in r?n:r,i,s)}const XP={get:Bv(!1,!1)},ZP={get:Bv(!1,!0)},ex={get:Bv(!0,!1)},mA=new WeakMap,gA=new WeakMap,yA=new WeakMap,tx=new WeakMap;function nx(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function rx(t){return t.__v_skip||!Object.isExtensible(t)?0:nx(CP(t))}function Xu(t){return dl(t)?t:$v(t,!1,jP,XP,mA)}function _A(t){return $v(t,!1,qP,ZP,gA)}function Uv(t){return $v(t,!0,WP,ex,yA)}function $v(t,e,n,r,i){if(!ft(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=rx(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Ga(t){return dl(t)?Ga(t.__v_raw):!!(t&&t.__v_isReactive)}function dl(t){return!!(t&&t.__v_isReadonly)}function nf(t){return!!(t&&t.__v_isShallow)}function vA(t){return Ga(t)||dl(t)}function nt(t){const e=t&&t.__v_raw;return e?nt(e):t}function Sp(t){return Object.isExtensible(t)&&ef(t,"__v_skip",!0),t}const au=t=>ft(t)?Xu(t):t,Hv=t=>ft(t)?Uv(t):t;class bA{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Dv(()=>e(this._value),()=>Mc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=nt(this);return(!e._cacheable||e.effect.dirty)&&js(e._value,e._value=e.effect.run())&&Mc(e,4),zv(e),e.effect._dirtyLevel>=2&&Mc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function ix(t,e,n=!1){let r,i;const s=Oe(t);return s?(r=t,i=Sr):(r=t.get,i=t.set),new bA(r,i,s||!i,n)}function zv(t){var e;xs&&Fo&&(t=nt(t),cA(Fo,(e=t.dep)!=null?e:t.dep=hA(()=>t.dep=void 0,t instanceof bA?t:void 0)))}function Mc(t,e=4,n){t=nt(t);const r=t.dep;r&&uA(r,e)}function an(t){return!!(t&&t.__v_isRef===!0)}function me(t){return TA(t,!1)}function EA(t){return TA(t,!0)}function TA(t,e){return an(t)?t:new sx(t,e)}class sx{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:nt(e),this._value=n?e:au(e)}get value(){return zv(this),this._value}set value(e){const n=this.__v_isShallow||nf(e)||dl(e);e=n?e:nt(e),js(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:au(e),Mc(this,4))}}function ue(t){return an(t)?t.value:t}function Pi(t){return Oe(t)?t():ue(t)}const ox={get:(t,e,n)=>ue(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return an(i)&&!an(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function wA(t){return Ga(t)?t:new Proxy(t,ox)}class ax{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>zv(this),()=>Mc(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function SA(t){return new ax(t)}class lx{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return BP(nt(this._object),this._key)}}class cx{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function ux(t,e,n){return an(t)?t:Oe(t)?new cx(t):ft(t)&&arguments.length>1?hx(t,e,n):me(t)}function hx(t,e,n){const r=t[e];return an(r)?r:new lx(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ds(t,e,n,r){try{return r?t(...r):t()}catch(i){Zu(i,e,n)}}function Cr(t,e,n,r){if(Oe(t)){const s=Ds(t,e,n,r);return s&&Mv(s)&&s.catch(o=>{Zu(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Cr(t[s],e,n,r));return i}function Zu(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Ds(l,null,10,[t,o,a]);return}}dx(t,n,i,r)}function dx(t,e,n,r=!0){console.error(t)}let lu=!1,Sy=!1;const Mn=[];let Zr=0;const Ka=[];let gs=null,bo=0;const IA=Promise.resolve();let jv=null;function Ul(t){const e=jv||IA;return t?e.then(this?t.bind(this):t):e}function fx(t){let e=Zr+1,n=Mn.length;for(;e<n;){const r=e+n>>>1,i=Mn[r],s=cu(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function Wv(t){(!Mn.length||!Mn.includes(t,lu&&t.allowRecurse?Zr+1:Zr))&&(t.id==null?Mn.push(t):Mn.splice(fx(t.id),0,t),AA())}function AA(){!lu&&!Sy&&(Sy=!0,jv=IA.then(RA))}function px(t){const e=Mn.indexOf(t);e>Zr&&Mn.splice(e,1)}function Iy(t){ve(t)?Ka.push(...t):(!gs||!gs.includes(t,t.allowRecurse?bo+1:bo))&&Ka.push(t),AA()}function zb(t,e,n=lu?Zr+1:0){for(;n<Mn.length;n++){const r=Mn[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Mn.splice(n,1),n--,r()}}}function CA(t){if(Ka.length){const e=[...new Set(Ka)].sort((n,r)=>cu(n)-cu(r));if(Ka.length=0,gs){gs.push(...e);return}for(gs=e,bo=0;bo<gs.length;bo++)gs[bo]();gs=null,bo=0}}const cu=t=>t.id==null?1/0:t.id,mx=(t,e)=>{const n=cu(t)-cu(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function RA(t){Sy=!1,lu=!0,Mn.sort(mx);try{for(Zr=0;Zr<Mn.length;Zr++){const e=Mn[Zr];e&&e.active!==!1&&Ds(e,null,14)}}finally{Zr=0,Mn.length=0,CA(),lu=!1,jv=null,(Mn.length||Ka.length)&&RA()}}function gx(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||vt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||vt;d&&(i=n.map(f=>Lt(f)?f.trim():f)),h&&(i=n.map(by))}let a,l=r[a=Km(e)]||r[a=Km(gi(e))];!l&&s&&(l=r[a=Km(ha(e))]),l&&Cr(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Cr(c,t,6,i)}}function kA(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Oe(t)){const l=c=>{const u=kA(c,e,!0);u&&(a=!0,Yt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(ft(t)&&r.set(t,null),null):(ve(s)?s.forEach(l=>o[l]=null):Yt(o,s),ft(t)&&r.set(t,o),o)}function Ip(t,e){return!t||!_p(e)?!1:(e=e.slice(2).replace(/Once$/,""),tt(t,e[0].toLowerCase()+e.slice(1))||tt(t,ha(e))||tt(t,e))}let Kt=null,Ap=null;function rf(t){const e=Kt;return Kt=t,Ap=t&&t.type.__scopeId||null,e}function qv(t){Ap=t}function Gv(){Ap=null}function hr(t,e=Kt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&sE(-1);const s=rf(e);let o;try{o=t(...i)}finally{rf(s),r._d&&sE(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Jm(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=t;let g,y;const _=rf(t);try{if(n.shapeFlag&4){const S=i||r,w=S;g=Dr(u.call(w,S,h,s,f,d,p)),y=l}else{const S=e;g=Dr(S.length>1?S(s,{attrs:l,slots:a,emit:c}):S(s,null)),y=e.props?l:_x(l)}}catch(S){Vc.length=0,Zu(S,t,1),g=Se(Xn)}let I=g;if(y&&m!==!1){const S=Object.keys(y),{shapeFlag:w}=I;S.length&&w&7&&(o&&S.some(Ov)&&(y=vx(y,o)),I=Ws(I,y))}return n.dirs&&(I=Ws(I),I.dirs=I.dirs?I.dirs.concat(n.dirs):n.dirs),n.transition&&(I.transition=n.transition),g=I,rf(_),g}function yx(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(hu(i)){if(i.type!==Xn||i.children==="v-if"){if(n)return;n=i}}else return}return n}const _x=t=>{let e;for(const n in t)(n==="class"||n==="style"||_p(n))&&((e||(e={}))[n]=t[n]);return e},vx=(t,e)=>{const n={};for(const r in t)(!Ov(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function bx(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?jb(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!Ip(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?jb(r,o,c):!0:!!o;return!1}function jb(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Ip(n,s))return!0}return!1}function Kv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const OA="components";function Cp(t,e){return Tx(OA,t,!0,e)||t}const Ex=Symbol.for("v-ndc");function Tx(t,e,n=!0,r=!1){const i=Kt||bn;if(i){const s=i.type;if(t===OA){const a=SD(s,!1);if(a&&(a===e||a===gi(e)||a===Ep(gi(e))))return s}const o=Wb(i[t]||s[t],e)||Wb(i.appContext[t],e);return!o&&r?s:o}}function Wb(t,e){return t&&(t[e]||t[gi(e)]||t[Ep(gi(e))])}const wx=t=>t.__isSuspense;let Ay=0;const Sx={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)Ix(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}Ax(t,e,n,r,i,o,a,l,c)}},hydrate:Cx,create:Yv,normalize:Rx},qb=Sx;function uu(t,e){const n=t.props&&t.props[e];Oe(n)&&n()}function Ix(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:u}}=l,h=u("div"),d=t.suspense=Yv(t,i,r,e,h,n,s,o,a,l);c(null,d.pendingBranch=t.ssContent,h,null,r,d,s,o),d.deps>0?(uu(t,"onPending"),uu(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),Ya(d,t.ssFallback)):d.resolve(!1,!0)}function Ax(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:y}=h;if(m)h.pendingBranch=d,ei(d,m)?(l(m,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():g&&(y||(l(p,f,n,r,i,null,s,o,a),Ya(h,f)))):(h.pendingId=Ay++,y?(h.isHydrating=!1,h.activeBranch=m):c(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),g?(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():(l(p,f,n,r,i,null,s,o,a),Ya(h,f))):p&&ei(d,p)?(l(p,d,n,r,i,h,s,o,a),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0&&h.resolve()));else if(p&&ei(d,p))l(p,d,n,r,i,h,s,o,a),Ya(h,d);else if(uu(e,"onPending"),h.pendingBranch=d,d.shapeFlag&512?h.pendingId=d.component.suspenseId:h.pendingId=Ay++,l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0)h.resolve();else{const{timeout:_,pendingId:I}=h;_>0?setTimeout(()=>{h.pendingId===I&&h.fallback(f)},_):_===0&&h.fallback(f)}}function Yv(t,e,n,r,i,s,o,a,l,c,u=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:m,remove:g}}=c;let y;const _=Ox(t);_&&e!=null&&e.pendingBranch&&(y=e.pendingId,e.deps++);const I=t.props?ZI(t.props.timeout):void 0,S=s,w={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Ay++,timeout:typeof I=="number"?I:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(A=!1,L=!1){const{vnode:N,activeBranch:O,pendingBranch:U,pendingId:K,effects:j,parentComponent:le,container:J}=w;let H=!1;w.isHydrating?w.isHydrating=!1:A||(H=O&&U.transition&&U.transition.mode==="out-in",H&&(O.transition.afterLeave=()=>{K===w.pendingId&&(d(U,J,s===S?p(O):s,0),Iy(j))}),O&&(m(O.el)!==w.hiddenContainer&&(s=p(O)),f(O,le,w,!0)),H||d(U,J,s,0)),Ya(w,U),w.pendingBranch=null,w.isInFallback=!1;let C=w.parent,$=!1;for(;C;){if(C.pendingBranch){C.effects.push(...j),$=!0;break}C=C.parent}!$&&!H&&Iy(j),w.effects=[],_&&e&&e.pendingBranch&&y===e.pendingId&&(e.deps--,e.deps===0&&!L&&e.resolve()),uu(N,"onResolve")},fallback(A){if(!w.pendingBranch)return;const{vnode:L,activeBranch:N,parentComponent:O,container:U,namespace:K}=w;uu(L,"onFallback");const j=p(N),le=()=>{w.isInFallback&&(h(null,A,U,j,O,null,K,a,l),Ya(w,A))},J=A.transition&&A.transition.mode==="out-in";J&&(N.transition.afterLeave=le),w.isInFallback=!0,f(N,O,null,!0),J||le()},move(A,L,N){w.activeBranch&&d(w.activeBranch,A,L,N),w.container=A},next(){return w.activeBranch&&p(w.activeBranch)},registerDep(A,L){const N=!!w.pendingBranch;N&&w.deps++;const O=A.vnode.el;A.asyncDep.catch(U=>{Zu(U,A,0)}).then(U=>{if(A.isUnmounted||w.isUnmounted||w.pendingId!==A.suspenseId)return;A.asyncResolved=!0;const{vnode:K}=A;Vy(A,U,!1),O&&(K.el=O);const j=!O&&A.subTree.el;L(A,K,m(O||A.subTree.el),O?null:p(A.subTree),w,o,l),j&&g(j),Kv(A,K.el),N&&--w.deps===0&&w.resolve()})},unmount(A,L){w.isUnmounted=!0,w.activeBranch&&f(w.activeBranch,n,A,L),w.pendingBranch&&f(w.pendingBranch,n,A,L)}};return w}function Cx(t,e,n,r,i,s,o,a,l){const c=e.suspense=Yv(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),u}function Rx(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Gb(r?n.default:n),t.ssFallback=r?Gb(n.fallback):Se(Xn)}function Gb(t){let e;if(Oe(t)){const n=fl&&t._c;n&&(t._d=!1,z()),t=t(),n&&(t._d=!0,e=Ir,KA())}return ve(t)&&(t=yx(t)),t=Dr(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function kx(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):Iy(t)}function Ya(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Kv(r,i))}function Ox(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}const Nx=Symbol.for("v-scx"),Mx=()=>Qn(Nx);function Px(t,e){return Jv(t,null,e)}const Kh={};function Wi(t,e,n){return Jv(t,e,n)}function Jv(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=vt){if(e&&s){const A=e;e=(...L)=>{A(...L),w()}}const l=bn,c=A=>r===!0?A:Io(A,r===!1?1:void 0);let u,h=!1,d=!1;if(an(t)?(u=()=>t.value,h=nf(t)):Ga(t)?(u=()=>c(t),h=!0):ve(t)?(d=!0,h=t.some(A=>Ga(A)||nf(A)),u=()=>t.map(A=>{if(an(A))return A.value;if(Ga(A))return c(A);if(Oe(A))return Ds(A,l,2)})):Oe(t)?e?u=()=>Ds(t,l,2):u=()=>(f&&f(),Cr(t,l,3,[p])):u=Sr,e&&r){const A=u;u=()=>Io(A())}let f,p=A=>{f=I.onStop=()=>{Ds(A,l,4),f=I.onStop=void 0}},m;if(Pp)if(p=Sr,e?n&&Cr(e,l,3,[u(),d?[]:void 0,p]):u(),i==="sync"){const A=Mx();m=A.__watcherHandles||(A.__watcherHandles=[])}else return Sr;let g=d?new Array(t.length).fill(Kh):Kh;const y=()=>{if(!(!I.active||!I.dirty))if(e){const A=I.run();(r||h||(d?A.some((L,N)=>js(L,g[N])):js(A,g)))&&(f&&f(),Cr(e,l,3,[A,g===Kh?void 0:d&&g[0]===Kh?[]:g,p]),g=A)}else I.run()};y.allowRecurse=!!e;let _;i==="sync"?_=y:i==="post"?_=()=>Yn(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),_=()=>Wv(y));const I=new Dv(u,Sr,_),S=xv(),w=()=>{I.stop(),S&&Nv(S.effects,I)};return e?n?y():g=I.run():i==="post"?Yn(I.run.bind(I),l&&l.suspense):I.run(),m&&m.push(w),w}function xx(t,e,n){const r=this.proxy,i=Lt(t)?t.includes(".")?NA(r,t):()=>r[t]:t.bind(r,r);let s;Oe(e)?s=e:(s=e.handler,n=e);const o=Jo(this),a=Jv(i,s.bind(r),n);return o(),a}function NA(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Io(t,e,n=0,r){if(!ft(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),an(t))Io(t.value,e,n,r);else if(ve(t))for(let i=0;i<t.length;i++)Io(t[i],e,n,r);else if(vp(t)||qa(t))t.forEach(i=>{Io(i,e,n,r)});else if(XI(t))for(const i in t)Io(t[i],e,n,r);return t}function qt(t,e){if(Kt===null)return t;const n=xp(Kt)||Kt.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=vt]=e[i];s&&(Oe(s)&&(s={mounted:s,updated:s}),s.deep&&Io(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function uo(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(da(),Cr(l,n,8,[t.el,a,t,e]),fa())}}const ys=Symbol("_leaveCb"),Yh=Symbol("_enterCb");function Dx(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return eh(()=>{t.isMounted=!0}),th(()=>{t.isUnmounting=!0}),t}const br=[Function,Array],MA={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:br,onEnter:br,onAfterEnter:br,onEnterCancelled:br,onBeforeLeave:br,onLeave:br,onAfterLeave:br,onLeaveCancelled:br,onBeforeAppear:br,onAppear:br,onAfterAppear:br,onAppearCancelled:br},Lx={name:"BaseTransition",props:MA,setup(t,{slots:e}){const n=ma(),r=Dx();return()=>{const i=e.default&&xA(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const d of i)if(d.type!==Xn){s=d;break}}const o=nt(t),{mode:a}=o;if(r.isLeaving)return Qm(s);const l=Kb(s);if(!l)return Qm(s);const c=Cy(l,o,r,n);Ry(l,c);const u=n.subTree,h=u&&Kb(u);if(h&&h.type!==Xn&&!ei(l,h)){const d=Cy(h,o,r,n);if(Ry(h,d),a==="out-in")return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Qm(s);a==="in-out"&&l.type!==Xn&&(d.delayLeave=(f,p,m)=>{const g=PA(r,h);g[String(h.key)]=h,f[ys]=()=>{p(),f[ys]=void 0,delete c.delayedLeave},c.delayedLeave=m})}return s}}},Vx=Lx;function PA(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Cy(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:y,onAppearCancelled:_}=e,I=String(t.key),S=PA(n,t),w=(N,O)=>{N&&Cr(N,r,9,O)},A=(N,O)=>{const U=O[1];w(N,O),ve(N)?N.every(K=>K.length<=1)&&U():N.length<=1&&U()},L={mode:s,persisted:o,beforeEnter(N){let O=a;if(!n.isMounted)if(i)O=m||a;else return;N[ys]&&N[ys](!0);const U=S[I];U&&ei(t,U)&&U.el[ys]&&U.el[ys](),w(O,[N])},enter(N){let O=l,U=c,K=u;if(!n.isMounted)if(i)O=g||l,U=y||c,K=_||u;else return;let j=!1;const le=N[Yh]=J=>{j||(j=!0,J?w(K,[N]):w(U,[N]),L.delayedLeave&&L.delayedLeave(),N[Yh]=void 0)};O?A(O,[N,le]):le()},leave(N,O){const U=String(t.key);if(N[Yh]&&N[Yh](!0),n.isUnmounting)return O();w(h,[N]);let K=!1;const j=N[ys]=le=>{K||(K=!0,O(),le?w(p,[N]):w(f,[N]),N[ys]=void 0,S[U]===t&&delete S[U])};S[U]=t,d?A(d,[N,j]):j()},clone(N){return Cy(N,e,n,r)}};return L}function Qm(t){if(Rp(t))return t=Ws(t),t.children=null,t}function Kb(t){return Rp(t)?t.children?t.children[0]:void 0:t}function Ry(t,e){t.shapeFlag&6&&t.component?Ry(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xA(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===ke?(o.patchFlag&128&&i++,r=r.concat(xA(o.children,e,a))):(e||o.type!==Xn)&&r.push(a!=null?Ws(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function hn(t,e){return Oe(t)?Yt({name:t.name},e,{setup:t}):t}const Pc=t=>!!t.type.__asyncLoader,Rp=t=>t.type.__isKeepAlive;function Fx(t,e){DA(t,"a",e)}function Bx(t,e){DA(t,"da",e)}function DA(t,e,n=bn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(kp(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Rp(i.parent.vnode)&&Ux(r,e,n,i),i=i.parent}}function Ux(t,e,n,r){const i=kp(e,t,r,!0);LA(()=>{Nv(r[e],i)},n)}function kp(t,e,n=bn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;da();const a=Jo(n),l=Cr(e,n,t,o);return a(),fa(),l});return r?i.unshift(s):i.push(s),s}}const ns=t=>(e,n=bn)=>(!Pp||t==="sp")&&kp(t,(...r)=>e(...r),n),$x=ns("bm"),eh=ns("m"),Hx=ns("bu"),zx=ns("u"),th=ns("bum"),LA=ns("um"),VA=ns("sp"),jx=ns("rtg"),Wx=ns("rtc");function qx(t,e=bn){kp("ec",t,e)}function Pn(t,e,n,r){let i;const s=n&&n[r];if(ve(t)||Lt(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(ft(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function Zt(t,e,n={},r,i){if(Kt.isCE||Kt.parent&&Pc(Kt.parent)&&Kt.parent.isCE)return e!=="default"&&(n.name=e),Se("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),z();const o=s&&FA(s(n)),a=Bt(ke,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function FA(t){return t.some(e=>hu(e)?!(e.type===Xn||e.type===ke&&!FA(e.children)):!0)?t:null}const ky=t=>t?QA(t)?xp(t)||t.proxy:ky(t.parent):null,xc=Yt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ky(t.parent),$root:t=>ky(t.root),$emit:t=>t.emit,$options:t=>Qv(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Wv(t.update)}),$nextTick:t=>t.n||(t.n=Ul.bind(t.proxy)),$watch:t=>xx.bind(t)}),Xm=(t,e)=>t!==vt&&!t.__isScriptSetup&&tt(t,e),Gx={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Xm(r,e))return o[e]=1,r[e];if(i!==vt&&tt(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&tt(c,e))return o[e]=3,s[e];if(n!==vt&&tt(n,e))return o[e]=4,n[e];Oy&&(o[e]=0)}}const u=xc[e];let h,d;if(u)return e==="$attrs"&&er(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==vt&&tt(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,tt(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Xm(i,e)?(i[e]=n,!0):r!==vt&&tt(r,e)?(r[e]=n,!0):tt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==vt&&tt(t,o)||Xm(e,o)||(a=s[0])&&tt(a,o)||tt(r,o)||tt(xc,o)||tt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:tt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Yb(t){return ve(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function pa(t){const e=ma();let n=t();return Ly(),Mv(n)&&(n=n.catch(r=>{throw Jo(e),r})),[n,()=>Jo(e)]}let Oy=!0;function Kx(t){const e=Qv(t),n=t.proxy,r=t.ctx;Oy=!1,e.beforeCreate&&Jb(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:_,destroyed:I,unmounted:S,render:w,renderTracked:A,renderTriggered:L,errorCaptured:N,serverPrefetch:O,expose:U,inheritAttrs:K,components:j,directives:le,filters:J}=e;if(c&&Yx(c,r,null),o)for(const $ in o){const V=o[$];Oe(V)&&(r[$]=V.bind(n))}if(i){const $=i.call(n,n);ft($)&&(t.data=Xu($))}if(Oy=!0,s)for(const $ in s){const V=s[$],oe=Oe(V)?V.bind(n,n):Oe(V.get)?V.get.bind(n,n):Sr,pe=!Oe(V)&&Oe(V.set)?V.set.bind(n):Sr,Re=kt({get:oe,set:pe});Object.defineProperty(r,$,{enumerable:!0,configurable:!0,get:()=>Re.value,set:$e=>Re.value=$e})}if(a)for(const $ in a)BA(a[$],r,n,$);if(l){const $=Oe(l)?l.call(n):l;Reflect.ownKeys($).forEach(V=>{Nd(V,$[V])})}u&&Jb(u,t,"c");function C($,V){ve(V)?V.forEach(oe=>$(oe.bind(n))):V&&$(V.bind(n))}if(C($x,h),C(eh,d),C(Hx,f),C(zx,p),C(Fx,m),C(Bx,g),C(qx,N),C(Wx,A),C(jx,L),C(th,_),C(LA,S),C(VA,O),ve(U))if(U.length){const $=t.exposed||(t.exposed={});U.forEach(V=>{Object.defineProperty($,V,{get:()=>n[V],set:oe=>n[V]=oe})})}else t.exposed||(t.exposed={});w&&t.render===Sr&&(t.render=w),K!=null&&(t.inheritAttrs=K),j&&(t.components=j),le&&(t.directives=le)}function Yx(t,e,n=Sr){ve(t)&&(t=Ny(t));for(const r in t){const i=t[r];let s;ft(i)?"default"in i?s=Qn(i.from||r,i.default,!0):s=Qn(i.from||r):s=Qn(i),an(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Jb(t,e,n){Cr(ve(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function BA(t,e,n,r){const i=r.includes(".")?NA(n,r):()=>n[r];if(Lt(t)){const s=e[t];Oe(s)&&Wi(i,s)}else if(Oe(t))Wi(i,t.bind(n));else if(ft(t))if(ve(t))t.forEach(s=>BA(s,e,n,r));else{const s=Oe(t.handler)?t.handler.bind(n):e[t.handler];Oe(s)&&Wi(i,s,t)}}function Qv(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>sf(l,c,o,!0)),sf(l,e,o)),ft(e)&&s.set(e,l),l}function sf(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&sf(t,s,n,!0),i&&i.forEach(o=>sf(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Jx[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Jx={data:Qb,props:Xb,emits:Xb,methods:pc,computed:pc,beforeCreate:Bn,created:Bn,beforeMount:Bn,mounted:Bn,beforeUpdate:Bn,updated:Bn,beforeDestroy:Bn,beforeUnmount:Bn,destroyed:Bn,unmounted:Bn,activated:Bn,deactivated:Bn,errorCaptured:Bn,serverPrefetch:Bn,components:pc,directives:pc,watch:Xx,provide:Qb,inject:Qx};function Qb(t,e){return e?t?function(){return Yt(Oe(t)?t.call(this,this):t,Oe(e)?e.call(this,this):e)}:e:t}function Qx(t,e){return pc(Ny(t),Ny(e))}function Ny(t){if(ve(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Bn(t,e){return t?[...new Set([].concat(t,e))]:e}function pc(t,e){return t?Yt(Object.create(null),t,e):e}function Xb(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:Yt(Object.create(null),Yb(t),Yb(e??{})):e}function Xx(t,e){if(!t)return e;if(!e)return t;const n=Yt(Object.create(null),t);for(const r in e)n[r]=Bn(t[r],e[r]);return n}function UA(){return{app:null,config:{isNativeTag:IP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zx=0;function eD(t,e){return function(r,i=null){Oe(r)||(r=Yt({},r)),i!=null&&!ft(i)&&(i=null);const s=UA(),o=new WeakSet;let a=!1;const l=s.app={_uid:Zx++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:AD,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Oe(c.install)?(o.add(c),c.install(l,...u)):Oe(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=Se(r,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,xp(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Dc;Dc=l;try{return c()}finally{Dc=u}}};return l}}let Dc=null;function Nd(t,e){if(bn){let n=bn.provides;const r=bn.parent&&bn.parent.provides;r===n&&(n=bn.provides=Object.create(r)),n[t]=e}}function Qn(t,e,n=!1){const r=bn||Kt;if(r||Dc){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Dc._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Oe(e)?e.call(r&&r.proxy):e}}function tD(t,e,n,r=!1){const i={},s={};ef(s,Np,1),t.propsDefaults=Object.create(null),$A(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:_A(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function nD(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=nt(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Ip(t.emitsOptions,d))continue;const f=e[d];if(l)if(tt(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const p=gi(d);i[p]=My(l,a,p,f,t,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{$A(t,e,i,s)&&(c=!0);let u;for(const h in a)(!e||!tt(e,h)&&((u=ha(h))===h||!tt(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=My(l,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!tt(e,h))&&(delete s[h],c=!0)}c&&ji(t,"set","$attrs")}function $A(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Nc(l))continue;const c=e[l];let u;i&&tt(i,u=gi(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:Ip(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=nt(n),c=a||vt;for(let u=0;u<s.length;u++){const h=s[u];n[h]=My(i,l,h,c[h],t,!tt(c,h))}}return o}function My(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=tt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Oe(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=Jo(i);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===ha(n))&&(r=!0))}return r}function HA(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Oe(t)){const u=h=>{l=!0;const[d,f]=HA(h,e,!0);Yt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return ft(t)&&r.set(t,Wa),Wa;if(ve(s))for(let u=0;u<s.length;u++){const h=gi(s[u]);Zb(h)&&(o[h]=vt)}else if(s)for(const u in s){const h=gi(u);if(Zb(h)){const d=s[u],f=o[h]=ve(d)||Oe(d)?{type:d}:Yt({},d);if(f){const p=nE(Boolean,f.type),m=nE(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||tt(f,"default"))&&a.push(h)}}}const c=[o,a];return ft(t)&&r.set(t,c),c}function Zb(t){return t[0]!=="$"&&!Nc(t)}function eE(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function tE(t,e){return eE(t)===eE(e)}function nE(t,e){return ve(e)?e.findIndex(n=>tE(n,t)):Oe(e)&&tE(e,t)?0:-1}const zA=t=>t[0]==="_"||t==="$stable",Xv=t=>ve(t)?t.map(Dr):[Dr(t)],rD=(t,e,n)=>{if(e._n)return e;const r=hr((...i)=>Xv(e(...i)),n);return r._c=!1,r},jA=(t,e,n)=>{const r=t._ctx;for(const i in t){if(zA(i))continue;const s=t[i];if(Oe(s))e[i]=rD(i,s,r);else if(s!=null){const o=Xv(s);e[i]=()=>o}}},WA=(t,e)=>{const n=Xv(e);t.slots.default=()=>n},iD=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=nt(e),ef(e,"_",n)):jA(e,t.slots={})}else t.slots={},e&&WA(t,e);ef(t.slots,Np,1)},sD=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=vt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Yt(i,e),!n&&a===1&&delete i._):(s=!e.$stable,jA(e,i)),o=e}else e&&(WA(t,e),o={default:1});if(s)for(const a in i)!zA(a)&&o[a]==null&&delete i[a]};function Py(t,e,n,r,i=!1){if(ve(t)){t.forEach((d,f)=>Py(d,e&&(ve(e)?e[f]:e),n,r,i));return}if(Pc(r)&&!i)return;const s=r.shapeFlag&4?xp(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===vt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Lt(c)?(u[c]=null,tt(h,c)&&(h[c]=null)):an(c)&&(c.value=null)),Oe(l))Ds(l,a,12,[o,u]);else{const d=Lt(l),f=an(l);if(d||f){const p=()=>{if(t.f){const m=d?tt(h,l)?h[l]:u[l]:l.value;i?ve(m)&&Nv(m,s):ve(m)?m.includes(s)||m.push(s):d?(u[l]=[s],tt(h,l)&&(h[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,tt(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Yn(p,n)):p()}}}const Yn=kx;function oD(t){return aD(t)}function aD(t,e){const n=eA();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Sr,insertStaticContent:p}=t,m=(v,T,k,D=null,x=null,Y=null,Z=void 0,Q=null,ee=!!T.dynamicChildren)=>{if(v===T)return;v&&!ei(v,T)&&(D=R(v),$e(v,x,Y,!0),v=null),T.patchFlag===-2&&(ee=!1,T.dynamicChildren=null);const{type:G,ref:ce,shapeFlag:Ee}=T;switch(G){case Op:g(v,T,k,D);break;case Xn:y(v,T,k,D);break;case Md:v==null&&_(T,k,D,Z);break;case ke:j(v,T,k,D,x,Y,Z,Q,ee);break;default:Ee&1?w(v,T,k,D,x,Y,Z,Q,ee):Ee&6?le(v,T,k,D,x,Y,Z,Q,ee):(Ee&64||Ee&128)&&G.process(v,T,k,D,x,Y,Z,Q,ee,q)}ce!=null&&x&&Py(ce,v&&v.ref,Y,T||v,!T)},g=(v,T,k,D)=>{if(v==null)r(T.el=a(T.children),k,D);else{const x=T.el=v.el;T.children!==v.children&&c(x,T.children)}},y=(v,T,k,D)=>{v==null?r(T.el=l(T.children||""),k,D):T.el=v.el},_=(v,T,k,D)=>{[v.el,v.anchor]=p(v.children,T,k,D,v.el,v.anchor)},I=({el:v,anchor:T},k,D)=>{let x;for(;v&&v!==T;)x=d(v),r(v,k,D),v=x;r(T,k,D)},S=({el:v,anchor:T})=>{let k;for(;v&&v!==T;)k=d(v),i(v),v=k;i(T)},w=(v,T,k,D,x,Y,Z,Q,ee)=>{T.type==="svg"?Z="svg":T.type==="math"&&(Z="mathml"),v==null?A(T,k,D,x,Y,Z,Q,ee):O(v,T,x,Y,Z,Q,ee)},A=(v,T,k,D,x,Y,Z,Q)=>{let ee,G;const{props:ce,shapeFlag:Ee,transition:ye,dirs:De}=v;if(ee=v.el=o(v.type,Y,ce&&ce.is,ce),Ee&8?u(ee,v.children):Ee&16&&N(v.children,ee,null,D,x,Zm(v,Y),Z,Q),De&&uo(v,null,D,"created"),L(ee,v,v.scopeId,Z,D),ce){for(const ut in ce)ut!=="value"&&!Nc(ut)&&s(ee,ut,null,ce[ut],Y,v.children,D,x,ct);"value"in ce&&s(ee,"value",null,ce.value,Y),(G=ce.onVnodeBeforeMount)&&Qr(G,D,v)}De&&uo(v,null,D,"beforeMount");const je=lD(x,ye);je&&ye.beforeEnter(ee),r(ee,T,k),((G=ce&&ce.onVnodeMounted)||je||De)&&Yn(()=>{G&&Qr(G,D,v),je&&ye.enter(ee),De&&uo(v,null,D,"mounted")},x)},L=(v,T,k,D,x)=>{if(k&&f(v,k),D)for(let Y=0;Y<D.length;Y++)f(v,D[Y]);if(x){let Y=x.subTree;if(T===Y){const Z=x.vnode;L(v,Z,Z.scopeId,Z.slotScopeIds,x.parent)}}},N=(v,T,k,D,x,Y,Z,Q,ee=0)=>{for(let G=ee;G<v.length;G++){const ce=v[G]=Q?_s(v[G]):Dr(v[G]);m(null,ce,T,k,D,x,Y,Z,Q)}},O=(v,T,k,D,x,Y,Z)=>{const Q=T.el=v.el;let{patchFlag:ee,dynamicChildren:G,dirs:ce}=T;ee|=v.patchFlag&16;const Ee=v.props||vt,ye=T.props||vt;let De;if(k&&ho(k,!1),(De=ye.onVnodeBeforeUpdate)&&Qr(De,k,T,v),ce&&uo(T,v,k,"beforeUpdate"),k&&ho(k,!0),G?U(v.dynamicChildren,G,Q,k,D,Zm(T,x),Y):Z||V(v,T,Q,null,k,D,Zm(T,x),Y,!1),ee>0){if(ee&16)K(Q,T,Ee,ye,k,D,x);else if(ee&2&&Ee.class!==ye.class&&s(Q,"class",null,ye.class,x),ee&4&&s(Q,"style",Ee.style,ye.style,x),ee&8){const je=T.dynamicProps;for(let ut=0;ut<je.length;ut++){const It=je[ut],Xt=Ee[It],Or=ye[It];(Or!==Xt||It==="value")&&s(Q,It,Xt,Or,x,v.children,k,D,ct)}}ee&1&&v.children!==T.children&&u(Q,T.children)}else!Z&&G==null&&K(Q,T,Ee,ye,k,D,x);((De=ye.onVnodeUpdated)||ce)&&Yn(()=>{De&&Qr(De,k,T,v),ce&&uo(T,v,k,"updated")},D)},U=(v,T,k,D,x,Y,Z)=>{for(let Q=0;Q<T.length;Q++){const ee=v[Q],G=T[Q],ce=ee.el&&(ee.type===ke||!ei(ee,G)||ee.shapeFlag&70)?h(ee.el):k;m(ee,G,ce,null,D,x,Y,Z,!0)}},K=(v,T,k,D,x,Y,Z)=>{if(k!==D){if(k!==vt)for(const Q in k)!Nc(Q)&&!(Q in D)&&s(v,Q,k[Q],null,Z,T.children,x,Y,ct);for(const Q in D){if(Nc(Q))continue;const ee=D[Q],G=k[Q];ee!==G&&Q!=="value"&&s(v,Q,G,ee,Z,T.children,x,Y,ct)}"value"in D&&s(v,"value",k.value,D.value,Z)}},j=(v,T,k,D,x,Y,Z,Q,ee)=>{const G=T.el=v?v.el:a(""),ce=T.anchor=v?v.anchor:a("");let{patchFlag:Ee,dynamicChildren:ye,slotScopeIds:De}=T;De&&(Q=Q?Q.concat(De):De),v==null?(r(G,k,D),r(ce,k,D),N(T.children||[],k,ce,x,Y,Z,Q,ee)):Ee>0&&Ee&64&&ye&&v.dynamicChildren?(U(v.dynamicChildren,ye,k,x,Y,Z,Q),(T.key!=null||x&&T===x.subTree)&&Zv(v,T,!0)):V(v,T,k,ce,x,Y,Z,Q,ee)},le=(v,T,k,D,x,Y,Z,Q,ee)=>{T.slotScopeIds=Q,v==null?T.shapeFlag&512?x.ctx.activate(T,k,D,Z,ee):J(T,k,D,x,Y,Z,ee):H(v,T,ee)},J=(v,T,k,D,x,Y,Z)=>{const Q=v.component=vD(v,D,x);if(Rp(v)&&(Q.ctx.renderer=q),bD(Q),Q.asyncDep){if(x&&x.registerDep(Q,C),!v.el){const ee=Q.subTree=Se(Xn);y(null,ee,T,k)}}else C(Q,v,T,k,x,Y,Z)},H=(v,T,k)=>{const D=T.component=v.component;if(bx(v,T,k))if(D.asyncDep&&!D.asyncResolved){$(D,T,k);return}else D.next=T,px(D.update),D.effect.dirty=!0,D.update();else T.el=v.el,D.vnode=T},C=(v,T,k,D,x,Y,Z)=>{const Q=()=>{if(v.isMounted){let{next:ce,bu:Ee,u:ye,parent:De,vnode:je}=v;{const wa=qA(v);if(wa){ce&&(ce.el=je.el,$(v,ce,Z)),wa.asyncDep.then(()=>{v.isUnmounted||Q()});return}}let ut=ce,It;ho(v,!1),ce?(ce.el=je.el,$(v,ce,Z)):ce=je,Ee&&Od(Ee),(It=ce.props&&ce.props.onVnodeBeforeUpdate)&&Qr(It,De,ce,je),ho(v,!0);const Xt=Jm(v),Or=v.subTree;v.subTree=Xt,m(Or,Xt,h(Or.el),R(Or),v,x,Y),ce.el=Xt.el,ut===null&&Kv(v,Xt.el),ye&&Yn(ye,x),(It=ce.props&&ce.props.onVnodeUpdated)&&Yn(()=>Qr(It,De,ce,je),x)}else{let ce;const{el:Ee,props:ye}=T,{bm:De,m:je,parent:ut}=v,It=Pc(T);if(ho(v,!1),De&&Od(De),!It&&(ce=ye&&ye.onVnodeBeforeMount)&&Qr(ce,ut,T),ho(v,!0),Ee&&Me){const Xt=()=>{v.subTree=Jm(v),Me(Ee,v.subTree,v,x,null)};It?T.type.__asyncLoader().then(()=>!v.isUnmounted&&Xt()):Xt()}else{const Xt=v.subTree=Jm(v);m(null,Xt,k,D,v,x,Y),T.el=Xt.el}if(je&&Yn(je,x),!It&&(ce=ye&&ye.onVnodeMounted)){const Xt=T;Yn(()=>Qr(ce,ut,Xt),x)}(T.shapeFlag&256||ut&&Pc(ut.vnode)&&ut.vnode.shapeFlag&256)&&v.a&&Yn(v.a,x),v.isMounted=!0,T=k=D=null}},ee=v.effect=new Dv(Q,Sr,()=>Wv(G),v.scope),G=v.update=()=>{ee.dirty&&ee.run()};G.id=v.uid,ho(v,!0),G()},$=(v,T,k)=>{T.component=v;const D=v.vnode.props;v.vnode=T,v.next=null,nD(v,T.props,D,k),sD(v,T.children,k),da(),zb(v),fa()},V=(v,T,k,D,x,Y,Z,Q,ee=!1)=>{const G=v&&v.children,ce=v?v.shapeFlag:0,Ee=T.children,{patchFlag:ye,shapeFlag:De}=T;if(ye>0){if(ye&128){pe(G,Ee,k,D,x,Y,Z,Q,ee);return}else if(ye&256){oe(G,Ee,k,D,x,Y,Z,Q,ee);return}}De&8?(ce&16&&ct(G,x,Y),Ee!==G&&u(k,Ee)):ce&16?De&16?pe(G,Ee,k,D,x,Y,Z,Q,ee):ct(G,x,Y,!0):(ce&8&&u(k,""),De&16&&N(Ee,k,D,x,Y,Z,Q,ee))},oe=(v,T,k,D,x,Y,Z,Q,ee)=>{v=v||Wa,T=T||Wa;const G=v.length,ce=T.length,Ee=Math.min(G,ce);let ye;for(ye=0;ye<Ee;ye++){const De=T[ye]=ee?_s(T[ye]):Dr(T[ye]);m(v[ye],De,k,null,x,Y,Z,Q,ee)}G>ce?ct(v,x,Y,!0,!1,Ee):N(T,k,D,x,Y,Z,Q,ee,Ee)},pe=(v,T,k,D,x,Y,Z,Q,ee)=>{let G=0;const ce=T.length;let Ee=v.length-1,ye=ce-1;for(;G<=Ee&&G<=ye;){const De=v[G],je=T[G]=ee?_s(T[G]):Dr(T[G]);if(ei(De,je))m(De,je,k,null,x,Y,Z,Q,ee);else break;G++}for(;G<=Ee&&G<=ye;){const De=v[Ee],je=T[ye]=ee?_s(T[ye]):Dr(T[ye]);if(ei(De,je))m(De,je,k,null,x,Y,Z,Q,ee);else break;Ee--,ye--}if(G>Ee){if(G<=ye){const De=ye+1,je=De<ce?T[De].el:D;for(;G<=ye;)m(null,T[G]=ee?_s(T[G]):Dr(T[G]),k,je,x,Y,Z,Q,ee),G++}}else if(G>ye)for(;G<=Ee;)$e(v[G],x,Y,!0),G++;else{const De=G,je=G,ut=new Map;for(G=je;G<=ye;G++){const nr=T[G]=ee?_s(T[G]):Dr(T[G]);nr.key!=null&&ut.set(nr.key,G)}let It,Xt=0;const Or=ye-je+1;let wa=!1,Nb=0;const tc=new Array(Or);for(G=0;G<Or;G++)tc[G]=0;for(G=De;G<=Ee;G++){const nr=v[G];if(Xt>=Or){$e(nr,x,Y,!0);continue}let Jr;if(nr.key!=null)Jr=ut.get(nr.key);else for(It=je;It<=ye;It++)if(tc[It-je]===0&&ei(nr,T[It])){Jr=It;break}Jr===void 0?$e(nr,x,Y,!0):(tc[Jr-je]=G+1,Jr>=Nb?Nb=Jr:wa=!0,m(nr,T[Jr],k,null,x,Y,Z,Q,ee),Xt++)}const Mb=wa?cD(tc):Wa;for(It=Mb.length-1,G=Or-1;G>=0;G--){const nr=je+G,Jr=T[nr],Pb=nr+1<ce?T[nr+1].el:D;tc[G]===0?m(null,Jr,k,Pb,x,Y,Z,Q,ee):wa&&(It<0||G!==Mb[It]?Re(Jr,k,Pb,2):It--)}}},Re=(v,T,k,D,x=null)=>{const{el:Y,type:Z,transition:Q,children:ee,shapeFlag:G}=v;if(G&6){Re(v.component.subTree,T,k,D);return}if(G&128){v.suspense.move(T,k,D);return}if(G&64){Z.move(v,T,k,q);return}if(Z===ke){r(Y,T,k);for(let Ee=0;Ee<ee.length;Ee++)Re(ee[Ee],T,k,D);r(v.anchor,T,k);return}if(Z===Md){I(v,T,k);return}if(D!==2&&G&1&&Q)if(D===0)Q.beforeEnter(Y),r(Y,T,k),Yn(()=>Q.enter(Y),x);else{const{leave:Ee,delayLeave:ye,afterLeave:De}=Q,je=()=>r(Y,T,k),ut=()=>{Ee(Y,()=>{je(),De&&De()})};ye?ye(Y,je,ut):ut()}else r(Y,T,k)},$e=(v,T,k,D=!1,x=!1)=>{const{type:Y,props:Z,ref:Q,children:ee,dynamicChildren:G,shapeFlag:ce,patchFlag:Ee,dirs:ye}=v;if(Q!=null&&Py(Q,null,k,v,!0),ce&256){T.ctx.deactivate(v);return}const De=ce&1&&ye,je=!Pc(v);let ut;if(je&&(ut=Z&&Z.onVnodeBeforeUnmount)&&Qr(ut,T,v),ce&6)Nt(v.component,k,D);else{if(ce&128){v.suspense.unmount(k,D);return}De&&uo(v,null,T,"beforeUnmount"),ce&64?v.type.remove(v,T,k,x,q,D):G&&(Y!==ke||Ee>0&&Ee&64)?ct(G,T,k,!1,!0):(Y===ke&&Ee&384||!x&&ce&16)&&ct(ee,T,k),D&&ot(v)}(je&&(ut=Z&&Z.onVnodeUnmounted)||De)&&Yn(()=>{ut&&Qr(ut,T,v),De&&uo(v,null,T,"unmounted")},k)},ot=v=>{const{type:T,el:k,anchor:D,transition:x}=v;if(T===ke){pt(k,D);return}if(T===Md){S(v);return}const Y=()=>{i(k),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(v.shapeFlag&1&&x&&!x.persisted){const{leave:Z,delayLeave:Q}=x,ee=()=>Z(k,Y);Q?Q(v.el,Y,ee):ee()}else Y()},pt=(v,T)=>{let k;for(;v!==T;)k=d(v),i(v),v=k;i(T)},Nt=(v,T,k)=>{const{bum:D,scope:x,update:Y,subTree:Z,um:Q}=v;D&&Od(D),x.stop(),Y&&(Y.active=!1,$e(Z,v,T,k)),Q&&Yn(Q,T),Yn(()=>{v.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},ct=(v,T,k,D=!1,x=!1,Y=0)=>{for(let Z=Y;Z<v.length;Z++)$e(v[Z],T,k,D,x)},R=v=>v.shapeFlag&6?R(v.component.subTree):v.shapeFlag&128?v.suspense.next():d(v.anchor||v.el);let M=!1;const P=(v,T,k)=>{v==null?T._vnode&&$e(T._vnode,null,null,!0):m(T._vnode||null,v,T,null,null,null,k),M||(M=!0,zb(),CA(),M=!1),T._vnode=v},q={p:m,um:$e,m:Re,r:ot,mt:J,mc:N,pc:V,pbc:U,n:R,o:t};let _e,Me;return e&&([_e,Me]=e(q)),{render:P,hydrate:_e,createApp:eD(P,_e)}}function Zm({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ho({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function lD(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Zv(t,e,n=!1){const r=t.children,i=e.children;if(ve(r)&&ve(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=_s(i[s]),a.el=o.el),n||Zv(o,a)),a.type===Op&&(a.el=o.el)}}function cD(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function qA(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:qA(e)}const uD=t=>t.__isTeleport,Lc=t=>t&&(t.disabled||t.disabled===""),rE=t=>typeof SVGElement<"u"&&t instanceof SVGElement,iE=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,xy=(t,e)=>{const n=t&&t.to;return Lt(n)?e?e(n):null:n},hD={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:m,createComment:g}}=c,y=Lc(e.props);let{shapeFlag:_,children:I,dynamicChildren:S}=e;if(t==null){const w=e.el=m(""),A=e.anchor=m("");f(w,n,r),f(A,n,r);const L=e.target=xy(e.props,p),N=e.targetAnchor=m("");L&&(f(N,L),o==="svg"||rE(L)?o="svg":(o==="mathml"||iE(L))&&(o="mathml"));const O=(U,K)=>{_&16&&u(I,U,K,i,s,o,a,l)};y?O(n,A):L&&O(L,N)}else{e.el=t.el;const w=e.anchor=t.anchor,A=e.target=t.target,L=e.targetAnchor=t.targetAnchor,N=Lc(t.props),O=N?n:A,U=N?w:L;if(o==="svg"||rE(A)?o="svg":(o==="mathml"||iE(A))&&(o="mathml"),S?(d(t.dynamicChildren,S,O,i,s,o,a),Zv(t,e,!0)):l||h(t,e,O,U,i,s,o,a,!1),y)N?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Jh(e,n,w,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const K=e.target=xy(e.props,p);K&&Jh(e,K,null,c,0)}else N&&Jh(e,A,L,c,1)}GA(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:d}=t;if(h&&s(u),o&&s(c),a&16){const f=o||!Lc(d);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,n,f,!!m.dynamicChildren)}}},move:Jh,hydrate:dD};function Jh(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,h=s===2;if(h&&r(o,e,n),(!h||Lc(u))&&l&16)for(let d=0;d<c.length;d++)i(c[d],e,n,2);h&&r(a,e,n)}function dD(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=xy(e.props,l);if(u){const h=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Lc(e.props))e.anchor=c(o(t),e,a(t),n,r,i,s),e.targetAnchor=h;else{e.anchor=o(t);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(h,e,u,n,r,i,s)}GA(e)}return e.anchor&&o(e.anchor)}const fD=hD;function GA(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const ke=Symbol.for("v-fgt"),Op=Symbol.for("v-txt"),Xn=Symbol.for("v-cmt"),Md=Symbol.for("v-stc"),Vc=[];let Ir=null;function z(t=!1){Vc.push(Ir=t?null:[])}function KA(){Vc.pop(),Ir=Vc[Vc.length-1]||null}let fl=1;function sE(t){fl+=t}function YA(t){return t.dynamicChildren=fl>0?Ir||Wa:null,KA(),fl>0&&Ir&&Ir.push(t),t}function te(t,e,n,r,i,s){return YA(E(t,e,n,r,i,s,!0))}function Bt(t,e,n,r,i){return YA(Se(t,e,n,r,i,!0))}function hu(t){return t?t.__v_isVNode===!0:!1}function ei(t,e){return t.type===e.type&&t.key===e.key}const Np="__vInternal",JA=({key:t})=>t??null,Pd=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Lt(t)||an(t)||Oe(t)?{i:Kt,r:t,k:e,f:!!n}:t:null);function E(t,e=null,n=null,r=0,i=null,s=t===ke?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&JA(e),ref:e&&Pd(e),scopeId:Ap,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Kt};return a?(e1(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Lt(n)?8:16),fl>0&&!o&&Ir&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ir.push(l),l}const Se=pD;function pD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Ex)&&(t=Xn),hu(t)){const a=Ws(t,e,!0);return n&&e1(a,n),fl>0&&!s&&Ir&&(a.shapeFlag&6?Ir[Ir.indexOf(t)]=a:Ir.push(a)),a.patchFlag|=-2,a}if(ID(t)&&(t=t.__vccOpts),e){e=mD(e);let{class:a,style:l}=e;a&&!Lt(a)&&(e.class=Qu(a)),ft(l)&&(vA(l)&&!ve(l)&&(l=Yt({},l)),e.style=yi(l))}const o=Lt(t)?1:wx(t)?128:uD(t)?64:ft(t)?4:Oe(t)?2:0;return E(t,e,n,r,i,o,s,!0)}function mD(t){return t?vA(t)||Np in t?Yt({},t):t:null}function Ws(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?gD(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&JA(a),ref:e&&e.ref?n&&i?ve(i)?i.concat(Pd(e)):[i,Pd(e)]:Pd(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ke?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ws(t.ssContent),ssFallback:t.ssFallback&&Ws(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Te(t=" ",e=0){return Se(Op,null,t,e)}function Mp(t,e){const n=Se(Md,null,t);return n.staticCount=e,n}function Pe(t="",e=!1){return e?(z(),Bt(Xn,null,t)):Se(Xn,null,t)}function Dr(t){return t==null||typeof t=="boolean"?Se(Xn):ve(t)?Se(ke,null,t.slice()):typeof t=="object"?_s(t):Se(Op,null,String(t))}function _s(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ws(t)}function e1(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),e1(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Np in e)?e._ctx=Kt:i===3&&Kt&&(Kt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Oe(e)?(e={default:e,_ctx:Kt},n=32):(e=String(e),r&64?(n=16,e=[Te(e)]):n=8);t.children=e,t.shapeFlag|=n}function gD(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Qu([e.class,r.class]));else if(i==="style")e.style=yi([e.style,r.style]);else if(_p(i)){const s=e[i],o=r[i];o&&s!==o&&!(ve(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Qr(t,e,n,r=null){Cr(t,e,7,[n,r])}const yD=UA();let _D=0;function vD(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||yD,s={uid:_D++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new iA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:HA(r,i),emitsOptions:kA(r,i),emit:null,emitted:null,propsDefaults:vt,inheritAttrs:r.inheritAttrs,ctx:vt,data:vt,props:vt,attrs:vt,slots:vt,refs:vt,setupState:vt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=gx.bind(null,s),t.ce&&t.ce(s),s}let bn=null;const ma=()=>bn||Kt;let of,Dy;{const t=eA(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};of=e("__VUE_INSTANCE_SETTERS__",n=>bn=n),Dy=e("__VUE_SSR_SETTERS__",n=>Pp=n)}const Jo=t=>{const e=bn;return of(t),t.scope.on(),()=>{t.scope.off(),of(e)}},Ly=()=>{bn&&bn.scope.off(),of(null)};function QA(t){return t.vnode.shapeFlag&4}let Pp=!1;function bD(t,e=!1){e&&Dy(e);const{props:n,children:r}=t.vnode,i=QA(t);tD(t,n,i,e),iD(t,r);const s=i?ED(t,e):void 0;return e&&Dy(!1),s}function ED(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Sp(new Proxy(t.ctx,Gx));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?wD(t):null,s=Jo(t);da();const o=Ds(r,t,0,[t.props,i]);if(fa(),s(),Mv(o)){if(o.then(Ly,Ly),e)return o.then(a=>{Vy(t,a,e)}).catch(a=>{Zu(a,t,0)});t.asyncDep=o}else Vy(t,o,e)}else XA(t,e)}function Vy(t,e,n){Oe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ft(e)&&(t.setupState=wA(e)),XA(t,n)}let oE;function XA(t,e,n){const r=t.type;if(!t.render){if(!e&&oE&&!r.render){const i=r.template||Qv(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Yt(Yt({isCustomElement:s,delimiters:a},o),l);r.render=oE(i,c)}}t.render=r.render||Sr}{const i=Jo(t);da();try{Kx(t)}finally{fa(),i()}}}function TD(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return er(t,"get","$attrs"),e[n]}}))}function wD(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return TD(t)},slots:t.slots,emit:t.emit,expose:e}}function xp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(wA(Sp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in xc)return xc[n](t)},has(e,n){return n in e||n in xc}}))}function SD(t,e=!0){return Oe(t)?t.displayName||t.name:t.name||e&&t.__name}function ID(t){return Oe(t)&&"__vccOpts"in t}const kt=(t,e)=>ix(t,e,Pp);function Uo(t,e,n){const r=arguments.length;return r===2?ft(e)&&!ve(e)?hu(e)?Se(t,null,[e]):Se(t,e):Se(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&hu(n)&&(n=[n]),Se(t,e,n))}const AD="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const CD="http://www.w3.org/2000/svg",RD="http://www.w3.org/1998/Math/MathML",vs=typeof document<"u"?document:null,aE=vs&&vs.createElement("template"),kD={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?vs.createElementNS(CD,t):e==="mathml"?vs.createElementNS(RD,t):vs.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>vs.createTextNode(t),createComment:t=>vs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>vs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{aE.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=aE.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},cs="transition",nc="animation",du=Symbol("_vtc"),af=(t,{slots:e})=>Uo(Vx,OD(t),e);af.displayName="Transition";const ZA={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};af.props=Yt({},MA,ZA);const fo=(t,e=[])=>{ve(t)?t.forEach(n=>n(...e)):t&&t(...e)},lE=t=>t?ve(t)?t.some(e=>e.length>1):t.length>1:!1;function OD(t){const e={};for(const j in t)j in ZA||(e[j]=t[j]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=ND(i),m=p&&p[0],g=p&&p[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:I,onLeave:S,onLeaveCancelled:w,onBeforeAppear:A=y,onAppear:L=_,onAppearCancelled:N=I}=e,O=(j,le,J)=>{po(j,le?u:a),po(j,le?c:o),J&&J()},U=(j,le)=>{j._isLeaving=!1,po(j,h),po(j,f),po(j,d),le&&le()},K=j=>(le,J)=>{const H=j?L:_,C=()=>O(le,j,J);fo(H,[le,C]),cE(()=>{po(le,j?l:s),us(le,j?u:a),lE(H)||uE(le,r,m,C)})};return Yt(e,{onBeforeEnter(j){fo(y,[j]),us(j,s),us(j,o)},onBeforeAppear(j){fo(A,[j]),us(j,l),us(j,c)},onEnter:K(!1),onAppear:K(!0),onLeave(j,le){j._isLeaving=!0;const J=()=>U(j,le);us(j,h),xD(),us(j,d),cE(()=>{j._isLeaving&&(po(j,h),us(j,f),lE(S)||uE(j,r,g,J))}),fo(S,[j,J])},onEnterCancelled(j){O(j,!1),fo(I,[j])},onAppearCancelled(j){O(j,!0),fo(N,[j])},onLeaveCancelled(j){U(j),fo(w,[j])}})}function ND(t){if(t==null)return null;if(ft(t))return[eg(t.enter),eg(t.leave)];{const e=eg(t);return[e,e]}}function eg(t){return ZI(t)}function us(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[du]||(t[du]=new Set)).add(e)}function po(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[du];n&&(n.delete(e),n.size||(t[du]=void 0))}function cE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let MD=0;function uE(t,e,n,r){const i=t._endId=++MD,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=PD(t,e);if(!o)return r();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,d),s()},d=f=>{f.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,d)}function PD(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${cs}Delay`),s=r(`${cs}Duration`),o=hE(i,s),a=r(`${nc}Delay`),l=r(`${nc}Duration`),c=hE(a,l);let u=null,h=0,d=0;e===cs?o>0&&(u=cs,h=o,d=s.length):e===nc?c>0&&(u=nc,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?cs:nc:null,d=u?u===cs?s.length:l.length:0);const f=u===cs&&/\b(transform|all)(,|$)/.test(r(`${cs}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function hE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>dE(n)+dE(t[r])))}function dE(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function xD(){return document.body.offsetHeight}function DD(t,e,n){const r=t[du];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const lf=Symbol("_vod"),eC=Symbol("_vsh"),rc={beforeMount(t,{value:e},{transition:n}){t[lf]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ic(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ic(t,!0),r.enter(t)):r.leave(t,()=>{ic(t,!1)}):ic(t,e))},beforeUnmount(t,{value:e}){ic(t,e)}};function ic(t,e){t.style.display=e?t[lf]:"none",t[eC]=!e}const LD=Symbol(""),VD=/(^|;)\s*display\s*:/;function FD(t,e,n){const r=t.style,i=Lt(n);let s=!1;if(n&&!i){if(e)if(Lt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&xd(r,a,"")}else for(const o in e)n[o]==null&&xd(r,o,"");for(const o in n)o==="display"&&(s=!0),xd(r,o,n[o])}else if(i){if(e!==n){const o=r[LD];o&&(n+=";"+o),r.cssText=n,s=VD.test(n)}}else e&&t.removeAttribute("style");lf in t&&(t[lf]=s?r.display:"",t[eC]&&(r.display="none"))}const fE=/\s*!important$/;function xd(t,e,n){if(ve(n))n.forEach(r=>xd(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=BD(t,e);fE.test(n)?t.setProperty(ha(r),n.replace(fE,""),"important"):t[r]=n}}const pE=["Webkit","Moz","ms"],tg={};function BD(t,e){const n=tg[e];if(n)return n;let r=gi(e);if(r!=="filter"&&r in t)return tg[e]=r;r=Ep(r);for(let i=0;i<pE.length;i++){const s=pE[i]+r;if(s in t)return tg[e]=s}return e}const mE="http://www.w3.org/1999/xlink";function UD(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(mE,e.slice(6,e.length)):t.setAttributeNS(mE,e,n);else{const s=DP(e);n==null||s&&!tA(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function $D(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=tA(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Eo(t,e,n,r){t.addEventListener(e,n,r)}function HD(t,e,n,r){t.removeEventListener(e,n,r)}const gE=Symbol("_vei");function zD(t,e,n,r,i=null){const s=t[gE]||(t[gE]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=jD(e);if(r){const c=s[e]=GD(r,i);Eo(t,a,c,l)}else o&&(HD(t,a,o,l),s[e]=void 0)}}const yE=/(?:Once|Passive|Capture)$/;function jD(t){let e;if(yE.test(t)){e={};let r;for(;r=t.match(yE);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):ha(t.slice(2)),e]}let ng=0;const WD=Promise.resolve(),qD=()=>ng||(WD.then(()=>ng=0),ng=Date.now());function GD(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Cr(KD(r,n.value),e,5,[r])};return n.value=t,n.attached=qD(),n}function KD(t,e){if(ve(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const _E=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,YD=(t,e,n,r,i,s,o,a,l)=>{const c=i==="svg";e==="class"?DD(t,r,c):e==="style"?FD(t,n,r):_p(e)?Ov(e)||zD(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):JD(t,e,r,c))?$D(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),UD(t,e,r,c))};function JD(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&_E(e)&&Oe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return _E(e)&&Lt(n)?!1:e in t}const cf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?n=>Od(e,n):e};function QD(t){t.target.composing=!0}function vE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ja=Symbol("_assign"),Pr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Ja]=cf(i);const s=r||i.props&&i.props.type==="number";Eo(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=by(a)),t[Ja](a)}),n&&Eo(t,"change",()=>{t.value=t.value.trim()}),e||(Eo(t,"compositionstart",QD),Eo(t,"compositionend",vE),Eo(t,"change",vE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[Ja]=cf(s),t.composing)return;const o=i||t.type==="number"?by(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},Fy={deep:!0,created(t,e,n){t[Ja]=cf(n),Eo(t,"change",()=>{const r=t._modelValue,i=XD(t),s=t.checked,o=t[Ja];if(ve(r)){const a=nA(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(vp(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(tC(t,s))})},mounted:bE,beforeUpdate(t,e,n){t[Ja]=cf(n),bE(t,e,n)}};function bE(t,{value:e,oldValue:n},r){t._modelValue=e,ve(e)?t.checked=nA(e,r.props.value)>-1:vp(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Tp(e,tC(t,!0)))}function XD(t){return"_value"in t?t._value:t.value}function tC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const ZD=["ctrl","shift","alt","meta"],e4={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ZD.some(n=>t[`${n}Key`]&&!e.includes(n))},We=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=e4[e[o]];if(a&&a(i,e))return}return t(i,...s)})},t4={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Mr=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=ha(i.key);if(e.some(o=>o===s||t4[o]===s))return t(i)})},n4=Yt({patchProp:YD},kD);let EE;function r4(){return EE||(EE=oD(n4))}const i4=(...t)=>{const e=r4().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=o4(r);if(!i)return;const s=e._component;!Oe(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,s4(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function s4(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function o4(t){return Lt(t)?document.querySelector(t):t}var a4=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const l4=Symbol();var TE;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(TE||(TE={}));function c4(){const t=sA(!0),e=t.run(()=>me({}));let n=[],r=[];const i=Sp({install(s){i._a=s,s.provide(l4,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!a4?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}var wE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re=function(t,e){if(!t)throw $l(e)},$l=function(t){return new Error("Firebase Database ("+nC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},u4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Dp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new h4;const d=s<<2|a>>4;if(r.push(d),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iC=function(t){const e=rC(t);return Dp.encodeByteArray(e,!0)},uf=function(t){return iC(t).replace(/\./g,"")},hf=function(t){try{return Dp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t){return sC(void 0,t)}function sC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!f4(n)||(t[n]=sC(t[n],e[n]));return t}function f4(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=()=>p4().__FIREBASE_DEFAULTS__,g4=()=>{if(typeof process>"u"||typeof wE>"u")return;const t=wE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hf(t[1]);return e&&JSON.parse(e)},Lp=()=>{try{return m4()||g4()||y4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_4=t=>{var e,n;return(n=(e=Lp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},v4=t=>{const e=_4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oC=()=>{var t;return(t=Lp())===null||t===void 0?void 0:t.config},b4=t=>{var e;return(e=Lp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[uf(JSON.stringify(n)),uf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function T4(){var t;const e=(t=Lp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S4(){const t=Wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lC(){return nC.NODE_ADMIN===!0}function I4(){return!T4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function n1(){try{return typeof indexedDB=="object"}catch{return!1}}function A4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="FirebaseError";class ki extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C4,Object.setPrototypeOf(this,ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hl.prototype.create)}}class Hl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?R4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ki(i,a,r)}}function R4(t,e){return t.replace(k4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const k4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){return JSON.parse(t)}function En(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=pu(hf(s[0])||""),n=pu(hf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},O4=function(t){const e=cC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},N4=function(t){const e=cC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function By(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function df(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function mu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(SE(s)&&SE(o)){if(!mu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function SE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const d=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function P4(t,e){const n=new x4(t,e);return n.subscribe.bind(n)}class x4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");D4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=rg),i.error===void 0&&(i.error=rg),i.complete===void 0&&(i.complete=rg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function rg(){}function L4(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,re(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){return t&&t._delegate?t._delegate:t}class Wr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U4(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B4(t){return t===yo?void 0:t}function U4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new F4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const H4={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},z4=qe.INFO,j4={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},W4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=j4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nh{constructor(e){this.name=e,this._logLevel=z4,this._logHandler=W4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const q4=(t,e)=>e.some(n=>t instanceof n);let IE,AE;function G4(){return IE||(IE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K4(){return AE||(AE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uC=new WeakMap,Uy=new WeakMap,hC=new WeakMap,ig=new WeakMap,r1=new WeakMap;function Y4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ls(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uC.set(n,t)}).catch(()=>{}),r1.set(e,t),e}function J4(t){if(Uy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Uy.set(t,e)}let $y={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Q4(t){$y=t($y)}function X4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sg(this),e,...n);return hC.set(r,e.sort?e.sort():[e]),Ls(r)}:K4().includes(t)?function(...e){return t.apply(sg(this),e),Ls(uC.get(this))}:function(...e){return Ls(t.apply(sg(this),e))}}function Z4(t){return typeof t=="function"?X4(t):(t instanceof IDBTransaction&&J4(t),q4(t,G4())?new Proxy(t,$y):t)}function Ls(t){if(t instanceof IDBRequest)return Y4(t);if(ig.has(t))return ig.get(t);const e=Z4(t);return e!==t&&(ig.set(t,e),r1.set(e,t)),e}const sg=t=>r1.get(t);function e3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ls(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ls(o.result),l.oldVersion,l.newVersion,Ls(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const t3=["get","getKey","getAll","getAllKeys","count"],n3=["put","add","delete","clear"],og=new Map;function CE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(og.get(e))return og.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=n3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||t3.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return og.set(e,s),s}Q4(t=>({...t,get:(e,n,r)=>CE(e,n)||t.get(e,n,r),has:(e,n)=>!!CE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hy="@firebase/app",RE="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new nh("@firebase/app"),s3="@firebase/app-compat",o3="@firebase/analytics-compat",a3="@firebase/analytics",l3="@firebase/app-check-compat",c3="@firebase/app-check",u3="@firebase/auth",h3="@firebase/auth-compat",d3="@firebase/database",f3="@firebase/database-compat",p3="@firebase/functions",m3="@firebase/functions-compat",g3="@firebase/installations",y3="@firebase/installations-compat",_3="@firebase/messaging",v3="@firebase/messaging-compat",b3="@firebase/performance",E3="@firebase/performance-compat",T3="@firebase/remote-config",w3="@firebase/remote-config-compat",S3="@firebase/storage",I3="@firebase/storage-compat",A3="@firebase/firestore",C3="@firebase/firestore-compat",R3="firebase",k3="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="[DEFAULT]",O3={[Hy]:"fire-core",[s3]:"fire-core-compat",[a3]:"fire-analytics",[o3]:"fire-analytics-compat",[c3]:"fire-app-check",[l3]:"fire-app-check-compat",[u3]:"fire-auth",[h3]:"fire-auth-compat",[d3]:"fire-rtdb",[f3]:"fire-rtdb-compat",[p3]:"fire-fn",[m3]:"fire-fn-compat",[g3]:"fire-iid",[y3]:"fire-iid-compat",[_3]:"fire-fcm",[v3]:"fire-fcm-compat",[b3]:"fire-perf",[E3]:"fire-perf-compat",[T3]:"fire-rc",[w3]:"fire-rc-compat",[S3]:"fire-gcs",[I3]:"fire-gcs-compat",[A3]:"fire-fst",[C3]:"fire-fst-compat","fire-js":"fire-js",[R3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Map,N3=new Map,jy=new Map;function kE(t,e){try{t.container.addComponent(e)}catch(n){Qo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _i(t){const e=t.name;if(jy.has(e))return Qo.debug(`There were multiple attempts to register component ${e}.`),!1;jy.set(e,t);for(const n of ff.values())kE(n,t);for(const n of N3.values())kE(n,t);return!0}function dC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new Hl("app","Firebase",M3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=k3;function fC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vs.create("bad-app-name",{appName:String(i)});if(n||(n=oC()),!n)throw Vs.create("no-options");const s=ff.get(i);if(s){if(mu(n,s.options)&&mu(r,s.config))return s;throw Vs.create("duplicate-app",{appName:i})}const o=new $4(i);for(const l of jy.values())o.addComponent(l);const a=new P3(n,r,o);return ff.set(i,a),a}function pC(t=zy){const e=ff.get(t);if(!e&&t===zy&&oC())return fC();if(!e)throw Vs.create("no-app",{appName:t});return e}function dr(t,e,n){var r;let i=(r=O3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qo.warn(a.join(" "));return}_i(new Wr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3="firebase-heartbeat-database",D3=1,gu="firebase-heartbeat-store";let ag=null;function mC(){return ag||(ag=e3(x3,D3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vs.create("idb-open",{originalErrorMessage:t.message})})),ag}async function L3(t){try{const n=(await mC()).transaction(gu),r=await n.objectStore(gu).get(gC(t));return await n.done,r}catch(e){if(e instanceof ki)Qo.warn(e.message);else{const n=Vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qo.warn(n.message)}}}async function OE(t,e){try{const r=(await mC()).transaction(gu,"readwrite");await r.objectStore(gu).put(e,gC(t)),await r.done}catch(n){if(n instanceof ki)Qo.warn(n.message);else{const r=Vs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qo.warn(r.message)}}}function gC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=1024,F3=30*24*60*60*1e3;class B3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=NE();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=F3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=NE(),{heartbeatsToSend:r,unsentEntries:i}=U3(this._heartbeatsCache.heartbeats),s=uf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function NE(){return new Date().toISOString().substring(0,10)}function U3(t,e=V3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ME(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ME(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return n1()?A4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ME(t){return uf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t){_i(new Wr("platform-logger",e=>new r3(e),"PRIVATE")),_i(new Wr("heartbeat",e=>new B3(e),"PRIVATE")),dr(Hy,RE,t),dr(Hy,RE,"esm2017"),dr("fire-js","")}H3("");function i1(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z3=yC,_C=new Hl("auth","Firebase",yC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=new nh("@firebase/auth");function j3(t,...e){pf.logLevel<=qe.WARN&&pf.warn(`Auth (${to}): ${t}`,...e)}function Dd(t,...e){pf.logLevel<=qe.ERROR&&pf.error(`Auth (${to}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,...e){throw o1(t,...e)}function Hr(t,...e){return o1(t,...e)}function s1(t,e,n){const r=Object.assign(Object.assign({},z3()),{[e]:n});return new Hl("auth","Firebase",r).create(e,{appName:t.name})}function $o(t){return s1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&vi(t,"argument-error"),s1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function o1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _C.create(t,...e)}function Fe(t,e,...n){if(!t)throw o1(e,...n)}function Fi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dd(e),new Error(e)}function Yi(t,e){t||Fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function q3(){return PE()==="http:"||PE()==="https:"}function PE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q3()||w4()||"connection"in navigator)?navigator.onLine:!0}function K3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yi(n>e,"Short delay should be less than long delay!"),this.isMobile=t1()||aC()}get(){return G3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(t,e){Yi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=new rh(3e4,6e4);function l1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jl(t,e,n,r,i={}){return bC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=zl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),vC.fetch()(EC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function bC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Y3),e);try{const i=new X3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Qh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Qh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Qh(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw s1(t,u,c);vi(t,u)}}catch(i){if(i instanceof ki)throw i;vi(t,"network-request-failed",{message:String(i)})}}async function Q3(t,e,n,r,i={}){const s=await jl(t,e,n,r,i);return"mfaPendingCredential"in s&&vi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function EC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?a1(t.config,i):`${t.config.apiScheme}://${i}`}class X3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hr(this.auth,"network-request-failed")),J3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e){return jl(t,"POST","/v1/accounts:delete",e)}async function TC(t,e){return jl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eL(t,e=!1){const n=ln(t),r=await n.getIdToken(e),i=c1(r);Fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Fc(lg(i.auth_time)),issuedAtTime:Fc(lg(i.iat)),expirationTime:Fc(lg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function lg(t){return Number(t)*1e3}function c1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dd("JWT malformed, contained fewer than 3 sections"),null;try{const i=hf(n);return i?JSON.parse(i):(Dd("Failed to decode base64 JWT payload"),null)}catch(i){return Dd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xE(t){const e=c1(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ki&&tL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fc(this.lastLoginAt),this.creationTime=Fc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await yu(t,TC(n,{idToken:r}));Fe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?wC(s.providerUserInfo):[],a=iL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function rL(t){const e=ln(t);await mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wC(t){return t.map(e=>{var{providerId:n}=e,r=i1(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e){const n=await bC(t,{},async()=>{const r=zl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=EC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oL(t,e){return jl(t,"POST","/v2/accounts:revokeToken",l1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=xE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await sL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Qa;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qa,this.toJSON())}_performRefresh(){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=i1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await yu(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eL(this,e)}reload(){return rL(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await mf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject($o(this.auth));const e=await this.getIdToken();return await yu(this,Z3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:I,emailVerified:S,isAnonymous:w,providerData:A,stsTokenManager:L}=n;Fe(I&&L,e,"internal-error");const N=Qa.fromJSON(this.name,L);Fe(typeof I=="string",e,"internal-error"),hs(h,e.name),hs(d,e.name),Fe(typeof S=="boolean",e,"internal-error"),Fe(typeof w=="boolean",e,"internal-error"),hs(f,e.name),hs(p,e.name),hs(m,e.name),hs(g,e.name),hs(y,e.name),hs(_,e.name);const O=new Bi({uid:I,auth:e,email:d,emailVerified:S,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:N,createdAt:y,lastLoginAt:_});return A&&Array.isArray(A)&&(O.providerData=A.map(U=>Object.assign({},U))),g&&(O._redirectEventId=g),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new Qa;i.updateFromServerResponse(n);const s=new Bi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?wC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Qa;a.updateFromIdToken(r);const l=new Bi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=new Map;function Ui(t){Yi(t instanceof Function,"Expected a class definition");let e=DE.get(t);return e?(Yi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,DE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}SC.type="NONE";const LE=SC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t,e,n){return`firebase:${t}:${e}:${n}`}class Xa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ld(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ld("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xa(Ui(LE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ui(LE);const o=Ld(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Bi._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Xa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Xa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kC(e))return"Blackberry";if(OC(e))return"Webos";if(u1(e))return"Safari";if((e.includes("chrome/")||AC(e))&&!e.includes("edge/"))return"Chrome";if(RC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IC(t=Wt()){return/firefox\//i.test(t)}function u1(t=Wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AC(t=Wt()){return/crios\//i.test(t)}function CC(t=Wt()){return/iemobile/i.test(t)}function RC(t=Wt()){return/android/i.test(t)}function kC(t=Wt()){return/blackberry/i.test(t)}function OC(t=Wt()){return/webos/i.test(t)}function Fp(t=Wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aL(t=Wt()){var e;return Fp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lL(){return S4()&&document.documentMode===10}function NC(t=Wt()){return Fp(t)||RC(t)||OC(t)||kC(t)||/windows phone/i.test(t)||CC(t)}function cL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e=[]){let n;switch(t){case"Browser":n=VE(Wt());break;case"Worker":n=`${VE(Wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${to}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL(t,e={}){return jl(t,"GET","/v2/passwordPolicy",l1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=6;class fL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FE(this),this.idTokenSubscription=new FE(this),this.beforeStateQueue=new uL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_C,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ui(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Xa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await TC(this,{idToken:e}),r=await Bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Vi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=K3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vi(this.app))return Promise.reject($o(this));const n=e?ln(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject($o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vi(this.app)?Promise.reject($o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hL(this),n=new fL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ui(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await Xa.create(this,[Ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&j3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function h1(t){return ln(t)}class FE{constructor(e){this.auth=e,this.observer=null,this.addObserver=P4(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mL(t){d1=t}function gL(t){return d1.loadJS(t)}function yL(){return d1.gapiScript}function _L(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t,e){const n=dC(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(mu(s,e??{}))return i;vi(i,"already-initialized")}return n.initialize({options:e})}function bL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fi("not implemented")}_getIdTokenResponse(e){return Fi("not implemented")}_linkToIdToken(e,n){return Fi("not implemented")}_getReauthenticationResolver(e){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(t,e){return Q3(t,"POST","/v1/accounts:signInWithIdp",l1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="http://localhost";class Xo extends PC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=i1(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Xo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Za(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Za(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Za(e,n)}buildRequest(){const e={requestUri:EL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends f1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends ih{constructor(){super("facebook.com")}static credential(e){return Xo._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xo._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Di.credential(n,r)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends ih{constructor(){super("github.com")}static credential(e){return Xo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends ih{constructor(){super("twitter.com")}static credential(e,n){return Xo._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return As.credential(n,r)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Bi._fromIdTokenResponse(e,r,i),o=BE(r);return new ml({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=BE(r);return new ml({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function BE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf extends ki{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gf(e,n,r,i)}}function xC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gf._fromErrorAndOperation(t,s,e,r):s})}async function TL(t,e,n=!1){const r=await yu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ml._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(t,e,n=!1){const{auth:r}=t;if(Vi(r.app))return Promise.reject($o(r));const i="reauthenticate";try{const s=await yu(t,xC(r,i,e,t),n);Fe(s.idToken,r,"internal-error");const o=c1(s.idToken);Fe(o,r,"internal-error");const{sub:a}=o;return Fe(t.uid===a,r,"user-mismatch"),ml._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&vi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(t,e,n=!1){if(Vi(t.app))return Promise.reject($o(t));const r="signIn",i=await xC(t,r,e),s=await ml._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function IL(t,e,n,r){return ln(t).onIdTokenChanged(e,n,r)}function AL(t){return ln(t).signOut()}const yf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yf,"1"),this.storage.removeItem(yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(){const t=Wt();return u1(t)||Fp(t)}const RL=1e3,kL=10;class LC extends DC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=CL()&&cL(),this.fallbackToPolling=NC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);lL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LC.type="LOCAL";const OL=LC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends DC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VC.type="SESSION";const FC=VC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Bp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await NL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=p1("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function PL(t){hi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function xL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LL(){return BC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="firebaseLocalStorageDb",VL=1,_f="firebaseLocalStorage",$C="fbase_key";class sh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Up(t,e){return t.transaction([_f],e?"readwrite":"readonly").objectStore(_f)}function FL(){const t=indexedDB.deleteDatabase(UC);return new sh(t).toPromise()}function Gy(){const t=indexedDB.open(UC,VL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_f,{keyPath:$C})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_f)?e(r):(r.close(),await FL(),e(await Gy()))})})}async function UE(t,e,n){const r=Up(t,!0).put({[$C]:e,value:n});return new sh(r).toPromise()}async function BL(t,e){const n=Up(t,!1).get(e),r=await new sh(n).toPromise();return r===void 0?null:r.value}function $E(t,e){const n=Up(t,!0).delete(e);return new sh(n).toPromise()}const UL=800,$L=3;class HC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$L)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bp._getInstance(LL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xL(),!this.activeServiceWorker)return;this.sender=new ML(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gy();return await UE(e,yf,"1"),await $E(e,yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>UE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$E(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Up(i,!1).getAll();return new sh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HC.type="LOCAL";const HL=HC;new rh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t,e){return e?Ui(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1 extends PC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Za(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Za(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Za(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zL(t){return SL(t.auth,new m1(t),t.bypassAuthState)}function jL(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),wL(n,new m1(t),t.bypassAuthState)}async function WL(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),TL(n,new m1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zL;case"linkViaPopup":case"linkViaRedirect":return WL;case"reauthViaPopup":case"reauthViaRedirect":return jL;default:vi(this.auth,"internal-error")}}resolve(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new rh(2e3,1e4);async function GL(t,e,n){if(Vi(t.app))return Promise.reject(Hr(t,"operation-not-supported-in-this-environment"));const r=h1(t);W3(t,e,f1);const i=zC(r,n);return new Ao(r,"signInViaPopup",e,i).executeNotNull()}class Ao extends jC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ao.currentPopupAction&&Ao.currentPopupAction.cancel(),Ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Yi(this.filter.length===1,"Popup operations only handle one event");const e=p1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qL.get())};e()}}Ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL="pendingRedirect",Vd=new Map;class YL extends jC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vd.get(this.auth._key());if(!e){try{const r=await JL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vd.set(this.auth._key(),e)}return this.bypassAuthState||Vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JL(t,e){const n=ZL(e),r=XL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function QL(t,e){Vd.set(t._key(),e)}function XL(t){return Ui(t._redirectPersistence)}function ZL(t){return Ld(KL,t.config.apiKey,t.name)}async function e6(t,e,n=!1){if(Vi(t.app))return Promise.reject($o(t));const r=h1(t),i=zC(r,e),o=await new YL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=10*60*1e3;class n6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!r6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=t6&&this.cachedEventUids.clear(),this.cachedEventUids.has(HE(e))}saveEventToCache(e){this.cachedEventUids.add(HE(e)),this.lastProcessedEventTime=Date.now()}}function HE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function r6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i6(t,e={}){return jl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o6=/^https?/;async function a6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i6(t);for(const n of e)try{if(l6(n))return}catch{}vi(t,"unauthorized-domain")}function l6(t){const e=Wy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!o6.test(n))return!1;if(s6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new rh(3e4,6e4);function zE(){const t=hi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function u6(t){return new Promise((e,n)=>{var r,i,s;function o(){zE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zE(),n(Hr(t,"network-request-failed"))},timeout:c6.get()})}if(!((i=(r=hi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=hi().gapi)===null||s===void 0)&&s.load)o();else{const a=_L("iframefcb");return hi()[a]=()=>{gapi.load?o():n(Hr(t,"network-request-failed"))},gL(`${yL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Fd=null,e})}let Fd=null;function h6(t){return Fd=Fd||u6(t),Fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=new rh(5e3,15e3),f6="__/auth/iframe",p6="emulator/auth/iframe",m6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function y6(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?a1(e,p6):`https://${t.config.authDomain}/${f6}`,r={apiKey:e.apiKey,appName:t.name,v:to},i=g6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${zl(r).slice(1)}`}async function _6(t){const e=await h6(t),n=hi().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:y6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Hr(t,"network-request-failed"),a=hi().setTimeout(()=>{s(o)},d6.get());function l(){hi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},b6=500,E6=600,T6="_blank",w6="http://localhost";class jE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S6(t,e,n,r=b6,i=E6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},v6),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Wt().toLowerCase();n&&(a=AC(c)?T6:n),IC(c)&&(e=e||w6,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(aL(c)&&a!=="_self")return I6(e||"",a),new jE(null);const h=window.open(e||"",a,u);Fe(h,t,"popup-blocked");try{h.focus()}catch{}return new jE(h)}function I6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6="__/auth/handler",C6="emulator/auth/handler",R6=encodeURIComponent("fac");async function WE(t,e,n,r,i,s){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:to,eventId:i};if(e instanceof f1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",By(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof ih){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${R6}=${encodeURIComponent(l)}`:"";return`${k6(t)}?${zl(a).slice(1)}${c}`}function k6({config:t}){return t.emulator?a1(t,C6):`https://${t.authDomain}/${A6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="webStorageSupport";class O6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FC,this._completeRedirectFn=e6,this._overrideRedirectResult=QL}async _openPopup(e,n,r,i){var s;Yi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await WE(e,n,r,Wy(),i);return S6(e,o,p1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await WE(e,n,r,Wy(),i);return PL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Yi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _6(e),r=new n6(e);return n.register("authEvent",i=>(Fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cg,{type:cg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[cg];o!==void 0&&n(!!o),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=a6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NC()||u1()||Fp()}}const N6=O6;var qE="@firebase/auth",GE="1.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x6(t){_i(new Wr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MC(t)},c=new pL(r,i,s,l);return bL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_i(new Wr("auth-internal",e=>{const n=h1(e.getProvider("auth").getImmediate());return(r=>new M6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(qE,GE,P6(t)),dr(qE,GE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=5*60;b4("authIdTokenMaxAge");function L6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Hr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",L6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x6("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=new Map,F6={activated:!1,tokenObservers:[]};function qr(t){return V6.get(t)||Object.assign({},F6)}const KE={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new fu,this.pending.promise.catch(n=>{}),await U6(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new fu,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function U6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},vf=new Hl("appCheck","AppCheck",$6);function qC(t){if(!qr(t).activated)throw vf.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="firebase-app-check-database",z6=1,Ky="firebase-app-check-store";let Xh=null;function j6(){return Xh||(Xh=new Promise((t,e)=>{try{const n=indexedDB.open(H6,z6);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(vf.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ky,{keyPath:"compositeKey"})}}}catch(n){e(vf.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Xh)}function W6(t,e){return q6(G6(t),e)}async function q6(t,e){const r=(await j6()).transaction(Ky,"readwrite"),s=r.objectStore(Ky).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(vf.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function G6(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new nh("@firebase/app-check");function YE(t,e){return n1()?W6(t,e).catch(n=>{Yy.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6={error:"UNKNOWN_ERROR"};function Y6(t){return Dp.encodeString(JSON.stringify(t),!1)}async function Jy(t,e=!1){const n=t.app;qC(n);const r=qr(n);let i=r.token,s;if(i&&!mc(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(mc(l)?i=l:await YE(n,void 0))}if(!e&&i&&mc(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await qr(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Yy.warn(l.message):Yy.error(l),s=l}let a;return i?s?mc(i)?a={token:i.token,internalError:s}:a=QE(s):(a={token:i.token},r.token=i,await YE(n,i)):a=QE(s),o&&Z6(n,a),a}async function J6(t){const e=t.app;qC(e);const{provider:n}=qr(e);{const{token:r}=await n.getToken();return{token:r}}}function Q6(t,e,n,r){const{app:i}=t,s=qr(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&mc(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),JE(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>JE(t))}function GC(t,e){const n=qr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function JE(t){const{app:e}=t,n=qr(e);let r=n.tokenRefresher;r||(r=X6(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function X6(t){const{app:e}=t;return new B6(async()=>{const n=qr(e);let r;if(n.token?r=await Jy(t,!0):r=await Jy(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=qr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},KE.RETRIAL_MIN_WAIT,KE.RETRIAL_MAX_WAIT)}function Z6(t,e){const n=qr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function mc(t){return t.expireTimeMillis-Date.now()>0}function QE(t){return{token:Y6(K6),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=qr(this.app);for(const n of e)GC(this.app,n.next);return Promise.resolve()}}function tV(t,e){return new eV(t,e)}function nV(t){return{getToken:e=>Jy(t,e),getLimitedUseToken:()=>J6(t),addTokenListener:e=>Q6(t,"INTERNAL",e),removeTokenListener:e=>GC(t.app,e)}}const rV="@firebase/app-check",iV="0.8.3",sV="app-check",XE="app-check-internal";function oV(){_i(new Wr(sV,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return tV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(XE).initialize()})),_i(new Wr(XE,t=>{const e=t.getProvider("app-check").getImmediate();return nV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),dr(rV,iV)}oV();var aV="firebase",lV="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(aV,lV,"app");const KC=Symbol("firebaseApp");function $p(t){return ma()&&Qn(KC,null)||pC(t)}const ri=()=>{},cV=typeof window<"u";function g1(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function uV(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,a)=>o&&o[a],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function ga(t){return!!t&&typeof t=="object"}const hV=Object.prototype;function dV(t){return ga(t)&&Object.getPrototypeOf(t)===hV}function y1(t){return ga(t)&&t.type==="document"}function fV(t){return ga(t)&&t.type==="collection"}function pV(t){return y1(t)||fV(t)}function mV(t){return ga(t)&&t.type==="query"}function gV(t){return ga(t)&&"ref"in t}function yV(t){return ga(t)&&typeof t.bucket=="string"}function _V(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const vV=Symbol.for("v-scx");function bV(){return!!Qn(vV,0)}const Zh=new WeakMap;function EV(t,e){if(!Zh.has(t)){const n=sA(!0);Zh.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),Zh.delete(t)}}return Zh.get(t)}const YC=new WeakMap;function TV(t){return YC.get($p(t))}const ed=new WeakMap;function JC(t){const e=$p(t);if(!ed.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{ed.set(e,s),n(s.value)}];ed.set(e,i)}return ed.get(e)}function oh(t){const e=JC(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function wV(t,e){IL(e,n=>{const r=JC();t.value=n,Array.isArray(r)&&r[1](t)})}var ZE={};const eT="@firebase/database",tT="1.0.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QC="";function SV(t){QC=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),En(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:pu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return rs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new IV(e)}}catch{}return new AV},Co=XC("localStorage"),Qy=XC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new nh("@firebase/database"),CV=function(){let t=1;return function(){return t++}}(),ZC=function(t){const e=V4(t),n=new M4;n.update(e);const r=n.digest();return Dp.encodeByteArray(r)},ah=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ah.apply(null,r):typeof r=="object"?e+=En(r):e+=r,e+=" "}return e};let Ho=null,nT=!0;const RV=function(t,e){re(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(el.logLevel=qe.VERBOSE,Ho=el.log.bind(el),e&&Qy.set("logging_enabled",!0)):typeof t=="function"?Ho=t:(Ho=null,Qy.remove("logging_enabled"))},kn=function(...t){if(nT===!0&&(nT=!1,Ho===null&&Qy.get("logging_enabled")===!0&&RV(!0)),Ho){const e=ah.apply(null,t);Ho(e)}},lh=function(t){return function(...e){kn(t,...e)}},Xy=function(...t){const e="FIREBASE INTERNAL ERROR: "+ah(...t);el.error(e)},Zo=function(...t){const e=`FIREBASE FATAL ERROR: ${ah(...t)}`;throw el.error(e),new Error(e)},fr=function(...t){const e="FIREBASE WARNING: "+ah(...t);el.warn(e)},kV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&fr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},eR=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},OV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},gl="[MIN_NAME]",ea="[MAX_NAME]",Wl=function(t,e){if(t===e)return 0;if(t===gl||e===ea)return-1;if(e===gl||t===ea)return 1;{const n=rT(t),r=rT(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},NV=function(t,e){return t===e?0:t<e?-1:1},sc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+En(e))},_1=function(t){if(typeof t!="object"||t===null)return En(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=En(e[r]),n+=":",n+=_1(t[e[r]]);return n+="}",n},tR=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function kr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const nR=function(t){re(!eR(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},MV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},PV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},xV=new RegExp("^-?(0*)\\d{1,10}$"),DV=-2147483648,LV=2147483647,rT=function(t){if(xV.test(t)){const e=Number(t);if(e>=DV&&e<=LV)return e}return null},ch=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw fr("Exception was thrown by user callback.",n),e},Math.floor(0))}},VV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){fr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(kn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fr(e)}}class Zy{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Zy.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="5",rR="v",iR="s",sR="r",oR="f",aR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lR="ls",cR="p",e_="ac",uR="websocket",hR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Co.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Co.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function $V(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dR(t,e,n){re(typeof e=="string","typeof type must == string"),re(typeof n=="object","typeof params must == object");let r;if(e===uR)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===hR)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);$V(t)&&(n.ns=t.namespace);const i=[];return kr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.counters_={}}incrementCounter(e,n=1){rs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return d4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug={},hg={};function b1(t){const e=t.toString();return ug[e]||(ug[e]=new HV),ug[e]}function zV(t,e){const n=t.toString();return hg[n]||(hg[n]=e()),hg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ch(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="start",WV="close",qV="pLPCommand",GV="pRTLPCB",fR="id",pR="pw",mR="ser",KV="cb",YV="seg",JV="ts",QV="d",XV="dframe",gR=1870,yR=30,ZV=gR-yR,e5=25e3,t5=3e4;class Va{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=lh(e),this.stats_=b1(n),this.urlFn=l=>(this.appCheckToken&&(l[e_]=this.appCheckToken),dR(n,hR,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new jV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(t5)),OV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new E1((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===iT)this.id=a,this.password=l;else if(o===WV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[iT]="t",r[mR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[KV]=this.scriptTagHolder.uniqueCallbackIdentifier),r[rR]=v1,this.transportSessionId&&(r[iR]=this.transportSessionId),this.lastSessionId&&(r[lR]=this.lastSessionId),this.applicationId&&(r[cR]=this.applicationId),this.appCheckToken&&(r[e_]=this.appCheckToken),typeof location<"u"&&location.hostname&&aR.test(location.hostname)&&(r[sR]=oR);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Va.forceAllow_=!0}static forceDisallow(){Va.forceDisallow_=!0}static isAvailable(){return Va.forceAllow_?!0:!Va.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!MV()&&!PV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=En(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=iC(n),i=tR(r,ZV);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[XV]="t",r[fR]=e,r[pR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=En(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class E1{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=CV(),window[qV+this.uniqueCallbackIdentifier]=e,window[GV+this.uniqueCallbackIdentifier]=n,this.myIFrame=E1.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){kn("frame writing exception"),a.stack&&kn(a.stack),kn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[fR]=this.myID,e[pR]=this.myPW,e[mR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+yR+r.length<=gR;){const o=this.pendingSegs.shift();r=r+"&"+YV+i+"="+o.seg+"&"+JV+i+"="+o.ts+"&"+QV+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(e5)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{kn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=16384,r5=45e3;let bf=null;typeof MozWebSocket<"u"?bf=MozWebSocket:typeof WebSocket<"u"&&(bf=WebSocket);class Vr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=lh(this.connId),this.stats_=b1(n),this.connURL=Vr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[rR]=v1,typeof location<"u"&&location.hostname&&aR.test(location.hostname)&&(o[sR]=oR),n&&(o[iR]=n),r&&(o[lR]=r),i&&(o[e_]=i),s&&(o[cR]=s),dR(e,uR,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Co.set("previous_websocket_failure",!0);try{let r;lC(),this.mySock=new bf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Vr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&bf!==null&&!Vr.forceDisallow_}static previouslyFailed(){return Co.isInMemoryStorage||Co.get("previous_websocket_failure")===!0}markConnectionHealthy(){Co.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=pu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(re(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=En(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=tR(n,n5);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(r5))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Vr.responsesRequiredToBeHealthy=2;Vr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Va,Vr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Vr&&Vr.isAvailable();let r=n&&!Vr.previouslyFailed();if(e.webSocketOnly&&(n||fr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Vr];else{const i=this.transports_=[];for(const s of _u.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);_u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}_u.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=6e4,s5=5e3,o5=10*1024,a5=100*1024,dg="t",sT="d",l5="s",oT="r",c5="e",aT="o",lT="a",cT="n",uT="p",u5="h";class h5{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=lh("c:"+this.id+":"),this.transportManager_=new _u(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Bc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>a5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>o5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(dg in e){const n=e[dg];n===lT?this.upgradeIfSecondaryHealthy_():n===oT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===aT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=sc("t",e),r=sc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:uT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:lT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:cT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=sc("t",e),r=sc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=sc(dg,e);if(sT in e){const r=e[sT];if(n===u5){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===cT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===l5?this.onConnectionShutdown_(r):n===oT?this.onReset_(r):n===c5?Xy("Server Error: "+r):n===aT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),v1!==r&&fr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Bc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(i5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(s5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:uT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Co.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vR=class{constructor(e){this.allowedEvents_=e,this.listeners_={},re(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){re(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends vR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!t1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ef}getInitialEvent(e){return re(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=32,dT=768;class St{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function dt(){return new St("")}function Xe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function qs(t){return t.pieces_.length-t.pieceNum_}function bt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new St(t.pieces_,e)}function bR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function d5(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ER(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function TR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new St(e,0)}function rn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof St)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new St(n,0)}function Ye(t){return t.pieceNum_>=t.pieces_.length}function Ar(t,e){const n=Xe(t),r=Xe(e);if(n===null)return e;if(n===r)return Ar(bt(t),bt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wR(t,e){if(qs(t)!==qs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Br(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(qs(t)>qs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class f5{constructor(e,n){this.errorPrefix_=n,this.parts_=ER(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Vp(this.parts_[r]);SR(this)}}function p5(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Vp(e),SR(t)}function m5(t){const e=t.parts_.pop();t.byteLength_-=Vp(e),t.parts_.length>0&&(t.byteLength_-=1)}function SR(t){if(t.byteLength_>dT)throw new Error(t.errorPrefix_+"has a key path longer than "+dT+" bytes ("+t.byteLength_+").");if(t.parts_.length>hT)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hT+") or object contains a cycle "+_o(t))}function _o(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1 extends vR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new T1}getInitialEvent(e){return re(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=1e3,g5=60*5*1e3,fT=30*1e3,y5=1.3,_5=3e4,v5="server_kill",pT=3;class qi extends _R{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=qi.nextPersistentConnectionId_++,this.log_=lh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=oc,this.maxReconnectDelay_=g5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!lC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");T1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ef.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(En(s)),re(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new fu,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),re(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;qi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&rs(e,"w")){const r=pl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();fr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||N4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=O4(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+En(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Xy("Unrecognized action received from server: "+En(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){re(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=oc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>_5&&(this.reconnectDelay_=oc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*y5)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+qi.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){re(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?kn("getToken() completed but was canceled"):(kn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new h5(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{fr(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(v5)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&fr(h),l())}}}interrupt(e){kn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){kn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],By(this.interruptReasons_)&&(this.reconnectDelay_=oc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>_1(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new St(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){kn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pT&&(this.reconnectDelay_=fT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){kn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+QC.replace(/\./g,"-")]=1,t1()?e["framework.cordova"]=1:aC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ef.getInstance().currentlyOnline();return By(this.interruptReasons_)&&e}}qi.nextPersistentConnectionId_=0;qi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ze(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ze(gl,e),i=new Ze(gl,n);return this.compare(r,i)!==0}minPost(){return Ze.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td;class IR extends Hp{static get __EMPTY_NODE(){return td}static set __EMPTY_NODE(e){td=e}compare(e,n){return Wl(e.name,n.name)}isDefinedOn(e){throw $l("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ze.MIN}maxPost(){return new Ze(ea,td)}makePost(e,n){return re(typeof e=="string","KeyIndex indexValue must always be a string."),new Ze(e,td)}toString(){return".key"}}const tl=new IR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},or=class gc{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??gc.RED,this.left=i??ii.EMPTY_NODE,this.right=s??ii.EMPTY_NODE}copy(e,n,r,i,s){return new gc(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ii.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ii.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};or.RED=!0;or.BLACK=!1;class b5{copy(e,n,r,i,s){return this}insert(e,n,r){return new or(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ii=class Bd{constructor(e,n=Bd.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Bd(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,or.BLACK,null,null))}remove(e){return new Bd(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,or.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new nd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new nd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new nd(this.root_,null,this.comparator_,!0,e)}};ii.EMPTY_NODE=new b5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t,e){return Wl(t.name,e.name)}function w1(t,e){return Wl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t_;function T5(t){t_=t}const AR=function(t){return typeof t=="number"?"number:"+nR(t):"string:"+t},CR=function(t){if(t.isLeafNode()){const e=t.val();re(typeof e=="string"||typeof e=="number"||typeof e=="object"&&rs(e,".sv"),"Priority must be a string or number.")}else re(t===t_||t.isEmpty(),"priority of unexpected type.");re(t===t_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mT;class en{constructor(e,n=en.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,re(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),CR(this.priorityNode_)}static set __childrenNodeConstructor(e){mT=e}static get __childrenNodeConstructor(){return mT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new en(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ye(e)?this:Xe(e)===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:en.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Xe(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(re(r!==".priority"||qs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,en.__childrenNodeConstructor.EMPTY_NODE.updateChild(bt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+AR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=nR(this.value_):e+=this.value_,this.lazyHash_=ZC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===en.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof en.__childrenNodeConstructor?-1:(re(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=en.VALUE_TYPE_ORDER.indexOf(n),s=en.VALUE_TYPE_ORDER.indexOf(r);return re(i>=0,"Unknown leaf type: "+n),re(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}en.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RR,kR;function w5(t){RR=t}function S5(t){kR=t}class I5 extends Hp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Wl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ze.MIN}maxPost(){return new Ze(ea,new en("[PRIORITY-POST]",kR))}makePost(e,n){const r=RR(e);return new Ze(n,new en("[PRIORITY-POST]",r))}toString(){return".priority"}}const xn=new I5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=Math.log(2);class C5{constructor(e){const n=s=>parseInt(Math.log(s)/A5,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Tf=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new or(d,h.node,or.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),m=i(f+1,c);return h=t[f],d=n?n(h):h,new or(d,h.node,or.BLACK,p,m)}},s=function(l){let c=null,u=null,h=t.length;const d=function(p,m){const g=h-p,y=h;h-=p;const _=i(g+1,y),I=t[g],S=n?n(I):I;f(new or(S,I.node,m,null,_))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));m?d(g,or.BLACK):(d(g,or.BLACK),d(g,or.RED))}return u},o=new C5(t.length),a=s(o);return new ii(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fg;const Sa={};class $i{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return re(Sa&&xn,"ChildrenNode.ts has not been loaded"),fg=fg||new $i({".priority":Sa},{".priority":xn}),fg}get(e){const n=pl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ii?n:null}hasIndex(e){return rs(this.indexSet_,e.toString())}addIndex(e,n){re(e!==tl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ze.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Tf(r,e.getCompare()):a=Sa;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new $i(u,c)}addToIndexes(e,n){const r=df(this.indexes_,(i,s)=>{const o=pl(this.indexSet_,s);if(re(o,"Missing index implementation for "+s),i===Sa)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ze.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Tf(a,o.getCompare())}else return Sa;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Ze(e.name,a))),l.insert(e,e.node)}});return new $i(r,this.indexSet_)}removeFromIndexes(e,n){const r=df(this.indexes_,i=>{if(i===Sa)return i;{const s=n.get(e.name);return s?i.remove(new Ze(e.name,s)):i}});return new $i(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac;class st{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&CR(this.priorityNode_),this.children_.isEmpty()&&re(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ac||(ac=new st(new ii(w1),null,$i.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ac}updatePriority(e){return this.children_.isEmpty()?this:new st(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ac:n}}getChild(e){const n=Xe(e);return n===null?this:this.getImmediateChild(n).getChild(bt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(re(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ze(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ac:this.priorityNode_;return new st(i,o,s)}}updateChild(e,n){const r=Xe(e);if(r===null)return n;{re(Xe(e)!==".priority"||qs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(bt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(xn,(o,a)=>{n[o]=a.val(e),r++,s&&st.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+AR(this.getPriority().val())+":"),this.forEachChild(xn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":ZC(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ze(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ze(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ze(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ze.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ze.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===uh?-1:0}withIndex(e){if(e===tl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new st(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===tl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(xn),i=n.getIterator(xn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===tl?null:this.indexMap_.get(e.toString())}}st.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class R5 extends st{constructor(){super(new ii(w1),st.EMPTY_NODE,$i.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return st.EMPTY_NODE}isEmpty(){return!1}}const uh=new R5;Object.defineProperties(Ze,{MIN:{value:new Ze(gl,st.EMPTY_NODE)},MAX:{value:new Ze(ea,uh)}});IR.__EMPTY_NODE=st.EMPTY_NODE;en.__childrenNodeConstructor=st;T5(uh);S5(uh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=!0;function On(t,e=null){if(t===null)return st.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),re(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new en(n,On(e))}if(!(t instanceof Array)&&k5){const n=[];let r=!1;if(kr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=On(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ze(o,l)))}}),n.length===0)return st.EMPTY_NODE;const s=Tf(n,E5,o=>o.name,w1);if(r){const o=Tf(n,xn.getCompare());return new st(s,On(e),new $i({".priority":o},{".priority":xn}))}else return new st(s,On(e),$i.Default)}else{let n=st.EMPTY_NODE;return kr(t,(r,i)=>{if(rs(t,r)&&r.substring(0,1)!=="."){const s=On(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(On(e))}}w5(On);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5 extends Hp{constructor(e){super(),this.indexPath_=e,re(!Ye(e)&&Xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Wl(e.name,n.name):s}makePost(e,n){const r=On(e),i=st.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ze(n,i)}maxPost(){const e=st.EMPTY_NODE.updateChild(this.indexPath_,uh);return new Ze(ea,e)}toString(){return ER(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5 extends Hp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Wl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ze.MIN}maxPost(){return Ze.MAX}makePost(e,n){const r=On(e);return new Ze(n,r)}toString(){return".value"}}const M5=new N5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P5(t){return{type:"value",snapshotNode:t}}function x5(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function D5(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function gT(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function L5(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return re(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return re(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gl}hasEnd(){return this.endSet_}getIndexEndValue(){return re(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return re(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ea}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return re(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xn}copy(){const e=new S1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===xn?n="$priority":t.index_===M5?n="$value":t.index_===tl?n="$key":(re(t.index_ instanceof O5,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=En(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=En(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+En(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=En(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+En(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function _T(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==xn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends _R{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=lh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(re(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=wf.getListenId_(e,r),a={};this.listens_[o]=a;const l=yT(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,r),pl(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",i(d,null)}})}unlisten(e,n){const r=wf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=yT(e._queryParams),r=e._path.toString(),i=new fu;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+zl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=pu(a.responseText)}catch{fr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&fr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(){this.rootNode_=st.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(){return{value:null,children:new Map}}function OR(t,e,n){if(Ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Xe(e);t.children.has(r)||t.children.set(r,Sf());const i=t.children.get(r);e=bt(e),OR(i,e,n)}}function n_(t,e,n){t.value!==null?n(e,t.value):F5(t,(r,i)=>{const s=new St(e.toString()+"/"+r);n_(i,s,n)})}function F5(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&kr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=10*1e3,U5=30*1e3,$5=5*60*1e3;class H5{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new B5(e);const r=vT+(U5-vT)*Math.random();Bc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;kr(e,(i,s)=>{s>0&&rs(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Bc(this.reportStats_.bind(this),Math.floor(Math.random()*2*$5))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(si||(si={}));function NR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function MR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function PR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=si.ACK_USER_WRITE,this.source=NR()}operationForChild(e){if(Ye(this.path)){if(this.affectedTree.value!=null)return re(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new St(e));return new If(dt(),n,this.revert)}}else return re(Xe(this.path)===e,"operationForChild called for unrelated child."),new If(bt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=si.OVERWRITE}operationForChild(e){return Ye(this.path)?new ta(this.source,dt(),this.snap.getImmediateChild(e)):new ta(this.source,bt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=si.MERGE}operationForChild(e){if(Ye(this.path)){const n=this.children.subtree(new St(e));return n.isEmpty()?null:n.value?new ta(this.source,dt(),n.value):new vu(this.source,dt(),n)}else return re(Xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vu(this.source,bt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ye(e))return this.isFullyInitialized()&&!this.filtered_;const n=Xe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function z5(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(L5(o.childName,o.snapshotNode))}),lc(t,i,"child_removed",e,r,n),lc(t,i,"child_added",e,r,n),lc(t,i,"child_moved",s,r,n),lc(t,i,"child_changed",e,r,n),lc(t,i,"value",e,r,n),i}function lc(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>W5(t,a,l)),o.forEach(a=>{const l=j5(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function j5(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function W5(t,e,n){if(e.childName==null||n.childName==null)throw $l("Should only compare child_ events.");const r=new Ze(e.childName,e.snapshotNode),i=new Ze(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t,e){return{eventCache:t,serverCache:e}}function Uc(t,e,n,r){return xR(new I1(e,n,r),t.serverCache)}function DR(t,e,n,r){return xR(t.eventCache,new I1(e,n,r))}function r_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function na(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pg;const q5=()=>(pg||(pg=new ii(NV)),pg);class _t{constructor(e,n=q5()){this.value=e,this.children=n}static fromObject(e){let n=new _t(null);return kr(e,(r,i)=>{n=n.set(new St(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:dt(),value:this.value};if(Ye(e))return null;{const r=Xe(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(bt(e),n);return s!=null?{path:rn(new St(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ye(e))return this;{const n=Xe(e),r=this.children.get(n);return r!==null?r.subtree(bt(e)):new _t(null)}}set(e,n){if(Ye(e))return new _t(n,this.children);{const r=Xe(e),s=(this.children.get(r)||new _t(null)).set(bt(e),n),o=this.children.insert(r,s);return new _t(this.value,o)}}remove(e){if(Ye(e))return this.children.isEmpty()?new _t(null):new _t(null,this.children);{const n=Xe(e),r=this.children.get(n);if(r){const i=r.remove(bt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new _t(null):new _t(this.value,s)}else return this}}get(e){if(Ye(e))return this.value;{const n=Xe(e),r=this.children.get(n);return r?r.get(bt(e)):null}}setTree(e,n){if(Ye(e))return n;{const r=Xe(e),s=(this.children.get(r)||new _t(null)).setTree(bt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new _t(this.value,o)}}fold(e){return this.fold_(dt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(rn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,dt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ye(e))return null;{const s=Xe(e),o=this.children.get(s);return o?o.findOnPath_(bt(e),rn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,dt(),n)}foreachOnPath_(e,n,r){if(Ye(e))return this;{this.value&&r(n,this.value);const i=Xe(e),s=this.children.get(i);return s?s.foreachOnPath_(bt(e),rn(n,i),r):new _t(null)}}foreach(e){this.foreach_(dt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(rn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.writeTree_=e}static empty(){return new zr(new _t(null))}}function $c(t,e,n){if(Ye(e))return new zr(new _t(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Ar(i,e);return s=s.updateChild(o,n),new zr(t.writeTree_.set(i,s))}else{const i=new _t(n),s=t.writeTree_.setTree(e,i);return new zr(s)}}}function bT(t,e,n){let r=t;return kr(n,(i,s)=>{r=$c(r,rn(e,i),s)}),r}function ET(t,e){if(Ye(e))return zr.empty();{const n=t.writeTree_.setTree(e,new _t(null));return new zr(n)}}function i_(t,e){return ya(t,e)!=null}function ya(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ar(n.path,e)):null}function TT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(xn,(r,i)=>{e.push(new Ze(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ze(r,i.value))}),e}function Fs(t,e){if(Ye(e))return t;{const n=ya(t,e);return n!=null?new zr(new _t(n)):new zr(t.writeTree_.subtree(e))}}function s_(t){return t.writeTree_.isEmpty()}function yl(t,e){return LR(dt(),t.writeTree_,e)}function LR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(re(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=LR(rn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(rn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){return HR(e,t)}function G5(t,e,n,r,i){re(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=$c(t.visibleWrites,e,n)),t.lastWriteId=r}function K5(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Y5(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);re(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&J5(a,r.path)?i=!1:Br(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return Q5(t),!0;if(r.snap)t.visibleWrites=ET(t.visibleWrites,r.path);else{const a=r.children;kr(a,l=>{t.visibleWrites=ET(t.visibleWrites,rn(r.path,l))})}return!0}else return!1}function J5(t,e){if(t.snap)return Br(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Br(rn(t.path,n),e))return!0;return!1}function Q5(t){t.visibleWrites=FR(t.allWrites,X5,dt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function X5(t){return t.visible}function FR(t,e,n){let r=zr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Br(n,o)?(a=Ar(n,o),r=$c(r,a,s.snap)):Br(o,n)&&(a=Ar(o,n),r=$c(r,dt(),s.snap.getChild(a)));else if(s.children){if(Br(n,o))a=Ar(n,o),r=bT(r,a,s.children);else if(Br(o,n))if(a=Ar(o,n),Ye(a))r=bT(r,dt(),s.children);else{const l=pl(s.children,Xe(a));if(l){const c=l.getChild(bt(a));r=$c(r,dt(),c)}}}else throw $l("WriteRecord should have .snap or .children")}}return r}function BR(t,e,n,r,i){if(!r&&!i){const s=ya(t.visibleWrites,e);if(s!=null)return s;{const o=Fs(t.visibleWrites,e);if(s_(o))return n;if(n==null&&!i_(o,dt()))return null;{const a=n||st.EMPTY_NODE;return yl(o,a)}}}else{const s=Fs(t.visibleWrites,e);if(!i&&s_(s))return n;if(!i&&n==null&&!i_(s,dt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Br(c.path,e)||Br(e,c.path))},a=FR(t.allWrites,o,e),l=n||st.EMPTY_NODE;return yl(a,l)}}}function Z5(t,e,n){let r=st.EMPTY_NODE;const i=ya(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(xn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Fs(t.visibleWrites,e);return n.forEachChild(xn,(o,a)=>{const l=yl(Fs(s,new St(o)),a);r=r.updateImmediateChild(o,l)}),TT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Fs(t.visibleWrites,e);return TT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function e9(t,e,n,r,i){re(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=rn(e,n);if(i_(t.visibleWrites,s))return null;{const o=Fs(t.visibleWrites,s);return s_(o)?i.getChild(n):yl(o,i.getChild(n))}}function t9(t,e,n,r){const i=rn(e,n),s=ya(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Fs(t.visibleWrites,i);return yl(o,r.getNode().getImmediateChild(n))}else return null}function n9(t,e){return ya(t.visibleWrites,e)}function r9(t,e,n,r,i,s,o){let a;const l=Fs(t.visibleWrites,e),c=ya(l,dt());if(c!=null)a=c;else if(n!=null)a=yl(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&u.length<i;)h(f,r)!==0&&u.push(f),f=d.getNext();return u}else return[]}function i9(){return{visibleWrites:zr.empty(),allWrites:[],lastWriteId:-1}}function o_(t,e,n,r){return BR(t.writeTree,t.treePath,e,n,r)}function UR(t,e){return Z5(t.writeTree,t.treePath,e)}function wT(t,e,n,r){return e9(t.writeTree,t.treePath,e,n,r)}function Af(t,e){return n9(t.writeTree,rn(t.treePath,e))}function s9(t,e,n,r,i,s){return r9(t.writeTree,t.treePath,e,n,r,i,s)}function A1(t,e,n){return t9(t.writeTree,t.treePath,e,n)}function $R(t,e){return HR(rn(t.treePath,e),t.writeTree)}function HR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;re(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),re(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,gT(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,D5(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,x5(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,gT(r,e.snapshotNode,i.oldSnap));else throw $l("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const zR=new a9;class C1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new I1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return A1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:na(this.viewCache_),s=s9(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function l9(t,e){re(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),re(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function c9(t,e,n,r,i){const s=new o9;let o,a;if(n.type===si.OVERWRITE){const c=n;c.source.fromUser?o=a_(t,e,c.path,c.snap,r,i,s):(re(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ye(c.path),o=Cf(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===si.MERGE){const c=n;c.source.fromUser?o=h9(t,e,c.path,c.children,r,i,s):(re(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=l_(t,e,c.path,c.children,r,i,a,s))}else if(n.type===si.ACK_USER_WRITE){const c=n;c.revert?o=p9(t,e,c.path,r,i,s):o=d9(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===si.LISTEN_COMPLETE)o=f9(t,e,n.path,r,s);else throw $l("Unknown operation type: "+n.type);const l=s.getChanges();return u9(e,o,l),{viewCache:o,changes:l}}function u9(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=r_(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(P5(r_(e)))}}function jR(t,e,n,r,i,s){const o=e.eventCache;if(Af(r,n)!=null)return e;{let a,l;if(Ye(n))if(re(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=na(e),u=c instanceof st?c:st.EMPTY_NODE,h=UR(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=o_(r,na(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Xe(n);if(c===".priority"){re(qs(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=wT(r,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=bt(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=wT(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=A1(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,i,s):a=o.getNode()}}return Uc(e,a,o.isFullyInitialized()||Ye(n),t.filter.filtersNodes())}}function Cf(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Ye(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Xe(n);if(!l.isCompleteForPath(n)&&qs(n)>1)return e;const p=bt(n),g=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),f,g,p,zR,null)}const h=DR(e,c,l.isFullyInitialized()||Ye(n),u.filtersNodes()),d=new C1(i,h,s);return jR(t,h,n,i,d,a)}function a_(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new C1(i,e,s);if(Ye(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Uc(e,c,!0,t.filter.filtersNodes());else{const h=Xe(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Uc(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=bt(n),f=a.getNode().getImmediateChild(h);let p;if(Ye(d))p=r;else{const m=u.getCompleteChild(h);m!=null?bR(d)===".priority"&&m.getChild(TR(d)).isEmpty()?p=m:p=m.updateChild(d,r):p=st.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=Uc(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function ST(t,e){return t.eventCache.isCompleteForChild(e)}function h9(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=rn(n,l);ST(e,Xe(u))&&(a=a_(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=rn(n,l);ST(e,Xe(u))||(a=a_(t,a,u,c,i,s,o))}),a}function IT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function l_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Ye(n)?c=r:c=new _t(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=IT(t,f,d);l=Cf(t,l,new St(h),p,i,s,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),m=IT(t,p,d);l=Cf(t,l,new St(h),m,i,s,o,a)}}),l}function d9(t,e,n,r,i,s,o){if(Af(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ye(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Cf(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Ye(n)){let c=new _t(null);return l.getNode().forEachChild(tl,(u,h)=>{c=c.set(new St(u),h)}),l_(t,e,n,c,i,s,a,o)}else return e}else{let c=new _t(null);return r.foreach((u,h)=>{const d=rn(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),l_(t,e,n,c,i,s,a,o)}}function f9(t,e,n,r,i){const s=e.serverCache,o=DR(e,s.getNode(),s.isFullyInitialized()||Ye(n),s.isFiltered());return jR(t,o,n,r,zR,i)}function p9(t,e,n,r,i,s){let o;if(Af(r,n)!=null)return e;{const a=new C1(r,e,i),l=e.eventCache.getNode();let c;if(Ye(n)||Xe(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=o_(r,na(e));else{const h=e.serverCache.getNode();re(h instanceof st,"serverChildren would be complete if leaf node"),u=UR(r,h)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Xe(n);let h=A1(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,bt(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,st.EMPTY_NODE,bt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=o_(r,na(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Af(r,dt())!=null,Uc(e,c,o,t.filter.filtersNodes())}}function m9(t,e){const n=na(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ye(e)&&!n.getImmediateChild(Xe(e)).isEmpty())?n.getChild(e):null}function AT(t,e,n,r){e.type===si.MERGE&&e.source.queryId!==null&&(re(na(t.viewCache_),"We should always have a full cache before handling merges"),re(r_(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=c9(t.processor_,i,e,n,r);return l9(t.processor_,s.viewCache),re(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,g9(t,s.changes,s.viewCache.eventCache.getNode(),null)}function g9(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return z5(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CT;function y9(t){re(!CT,"__referenceConstructor has already been defined"),CT=t}function R1(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return re(s!=null,"SyncTree gave us an op for an invalid query."),AT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(AT(o,e,n,r));return s}}function k1(t,e){let n=null;for(const r of t.views.values())n=n||m9(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RT;function _9(t){re(!RT,"__referenceConstructor has already been defined"),RT=t}class kT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _t(null),this.pendingWriteTree_=i9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function v9(t,e,n,r,i){return G5(t.pendingWriteTree_,e,n,r,i),i?jp(t,new ta(NR(),e,n)):[]}function Fa(t,e,n=!1){const r=K5(t.pendingWriteTree_,e);if(Y5(t.pendingWriteTree_,e)){let s=new _t(null);return r.snap!=null?s=s.set(dt(),!0):kr(r.children,o=>{s=s.set(new St(o),!0)}),jp(t,new If(r.path,s,n))}else return[]}function zp(t,e,n){return jp(t,new ta(MR(),e,n))}function b9(t,e,n){const r=_t.fromObject(n);return jp(t,new vu(MR(),e,r))}function E9(t,e,n,r){const i=KR(t,r);if(i!=null){const s=YR(i),o=s.path,a=s.queryId,l=Ar(o,e),c=new ta(PR(a),l,n);return JR(t,o,c)}else return[]}function T9(t,e,n,r){const i=KR(t,r);if(i){const s=YR(i),o=s.path,a=s.queryId,l=Ar(o,e),c=_t.fromObject(n),u=new vu(PR(a),l,c);return JR(t,o,u)}else return[]}function WR(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Ar(o,e),c=k1(a,l);if(c)return c});return BR(i,e,s,n,!0)}function jp(t,e){return qR(e,t.syncPointTree_,null,VR(t.pendingWriteTree_,dt()))}function qR(t,e,n,r){if(Ye(t.path))return GR(t,e,n,r);{const i=e.get(dt());n==null&&i!=null&&(n=k1(i,dt()));let s=[];const o=Xe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=$R(r,o);s=s.concat(qR(a,l,c,u))}return i&&(s=s.concat(R1(i,t,r,n))),s}}function GR(t,e,n,r){const i=e.get(dt());n==null&&i!=null&&(n=k1(i,dt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=$R(r,o),u=t.operationForChild(o);u&&(s=s.concat(GR(u,a,l,c)))}),i&&(s=s.concat(R1(i,t,r,n))),s}function KR(t,e){return t.tagToQueryMap.get(e)}function YR(t){const e=t.indexOf("$");return re(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new St(t.substr(0,e))}}function JR(t,e,n){const r=t.syncPointTree_.get(e);re(r,"Missing sync point for query tag that we're tracking");const i=VR(t.pendingWriteTree_,e);return R1(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new O1(n)}node(){return this.node_}}class N1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=rn(this.path_,e);return new N1(this.syncTree_,n)}node(){return WR(this.syncTree_,this.path_)}}const w9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},OT=function(t,e,n){if(!t||typeof t!="object")return t;if(re(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return S9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return I9(t[".sv"],e);re(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},S9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:re(!1,"Unexpected server value: "+t)}},I9=function(t,e,n){t.hasOwnProperty("increment")||re(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&re(!1,"Unexpected increment value: "+r);const i=e.node();if(re(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},A9=function(t,e,n,r){return M1(e,new N1(n,t),r)},C9=function(t,e,n){return M1(t,new O1(e),n)};function M1(t,e,n){const r=t.getPriority().val(),i=OT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=OT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new en(a,On(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new en(i))),o.forEachChild(xn,(a,l)=>{const c=M1(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function x1(t,e){let n=e instanceof St?e:new St(e),r=t,i=Xe(n);for(;i!==null;){const s=pl(r.node.children,i)||{children:{},childCount:0};r=new P1(i,r,s),n=bt(n),i=Xe(n)}return r}function ql(t){return t.node.value}function QR(t,e){t.node.value=e,c_(t)}function XR(t){return t.node.childCount>0}function R9(t){return ql(t)===void 0&&!XR(t)}function Wp(t,e){kr(t.node.children,(n,r)=>{e(new P1(n,t,r))})}function ZR(t,e,n,r){n&&!r&&e(t),Wp(t,i=>{ZR(i,e,!0,r)}),n&&r&&e(t)}function k9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function hh(t){return new St(t.parent===null?t.name:hh(t.parent)+"/"+t.name)}function c_(t){t.parent!==null&&O9(t.parent,t.name,t)}function O9(t,e,n){const r=R9(n),i=rs(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,c_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,c_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=/[\[\].#$\/\u0000-\u001F\u007F]/,M9=/[\[\].#$\u0000-\u001F\u007F]/,mg=10*1024*1024,ek=function(t){return typeof t=="string"&&t.length!==0&&!N9.test(t)},P9=function(t){return typeof t=="string"&&t.length!==0&&!M9.test(t)},x9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),P9(t)},tk=function(t,e,n){const r=n instanceof St?new f5(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+_o(r));if(typeof e=="function")throw new Error(t+"contains a function "+_o(r)+" with contents = "+e.toString());if(eR(e))throw new Error(t+"contains "+e.toString()+" "+_o(r));if(typeof e=="string"&&e.length>mg/3&&Vp(e)>mg)throw new Error(t+"contains a string greater than "+mg+" utf8 bytes "+_o(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(kr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!ek(o)))throw new Error(t+" contains an invalid key ("+o+") "+_o(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);p5(r,o),tk(t,a,r),m5(r)}),i&&s)throw new Error(t+' contains ".value" child '+_o(r)+" in addition to actual children.")}},D9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ek(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!x9(n))throw new Error(L4(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function V9(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!wR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function _a(t,e,n){V9(t,n),F9(t,r=>Br(r,e)||Br(e,r))}function F9(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(B9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function B9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ho&&kn("event: "+n.toString()),ch(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="repo_interrupt",$9=25;class H9{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new L9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Sf(),this.transactionQueueTree_=new P1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function z9(t,e,n){if(t.stats_=b1(t.repoInfo_),t.forceRestClient_||VV())t.server_=new wf(t.repoInfo_,(r,i,s,o)=>{NT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>MT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{En(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new qi(t.repoInfo_,e,(r,i,s,o)=>{NT(t,r,i,s,o)},r=>{MT(t,r)},r=>{W9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=zV(t.repoInfo_,()=>new H5(t.stats_,t.server_)),t.infoData_=new V5,t.infoSyncTree_=new kT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=zp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),D1(t,"connected",!1),t.serverSyncTree_=new kT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);_a(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function j9(t){const n=t.infoData_.getNode(new St(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function nk(t){return w9({timestamp:j9(t)})}function NT(t,e,n,r,i){t.dataUpdateCount++;const s=new St(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=df(n,c=>On(c));o=T9(t.serverSyncTree_,s,l,i)}else{const l=On(n);o=E9(t.serverSyncTree_,s,l,i)}else if(r){const l=df(n,c=>On(c));o=b9(t.serverSyncTree_,s,l)}else{const l=On(n);o=zp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=V1(t,s)),_a(t.eventQueue_,a,o)}function MT(t,e){D1(t,"connected",e),e===!1&&G9(t)}function W9(t,e){kr(e,(n,r)=>{D1(t,n,r)})}function D1(t,e,n){const r=new St("/.info/"+e),i=On(n);t.infoData_.updateSnapshot(r,i);const s=zp(t.infoSyncTree_,r,i);_a(t.eventQueue_,r,s)}function q9(t){return t.nextWriteId_++}function G9(t){rk(t,"onDisconnectEvents");const e=nk(t),n=Sf();n_(t.onDisconnect_,dt(),(i,s)=>{const o=A9(i,s,t.serverSyncTree_,e);OR(n,i,o)});let r=[];n_(n,dt(),(i,s)=>{r=r.concat(zp(t.serverSyncTree_,i,s));const o=Q9(t,i);V1(t,o)}),t.onDisconnect_=Sf(),_a(t.eventQueue_,dt(),r)}function K9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(U9)}function rk(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),kn(n,...e)}function ik(t,e,n){return WR(t.serverSyncTree_,e,n)||st.EMPTY_NODE}function L1(t,e=t.transactionQueueTree_){if(e||qp(t,e),ql(e)){const n=ok(t,e);re(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Y9(t,hh(e),n)}else XR(e)&&Wp(e,n=>{L1(t,n)})}function Y9(t,e,n){const r=n.map(c=>c.currentWriteId),i=ik(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];re(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Ar(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{rk(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Fa(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();qp(t,x1(t.transactionQueueTree_,e)),L1(t,t.transactionQueueTree_),_a(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)ch(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{fr("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}V1(t,e)}},o)}function V1(t,e){const n=sk(t,e),r=hh(n),i=ok(t,n);return J9(t,i,r),r}function J9(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Ar(n,l.path);let u=!1,h;if(re(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(Fa(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=$9)u=!0,h="maxretry",i=i.concat(Fa(t.serverSyncTree_,l.currentWriteId,!0));else{const d=ik(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){tk("transaction failed: Data returned ",f,l.path);let p=On(f);typeof f=="object"&&f!=null&&rs(f,".priority")||(p=p.updatePriority(d.getPriority()));const g=l.currentWriteId,y=nk(t),_=C9(p,d,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=_,l.currentWriteId=q9(t),o.splice(o.indexOf(g),1),i=i.concat(v9(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(Fa(t.serverSyncTree_,g,!0))}else u=!0,h="nodata",i=i.concat(Fa(t.serverSyncTree_,l.currentWriteId,!0))}_a(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}qp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ch(r[a]);L1(t,t.transactionQueueTree_)}function sk(t,e){let n,r=t.transactionQueueTree_;for(n=Xe(e);n!==null&&ql(r)===void 0;)r=x1(r,n),e=bt(e),n=Xe(e);return r}function ok(t,e){const n=[];return ak(t,e,n),n.sort((r,i)=>r.order-i.order),n}function ak(t,e,n){const r=ql(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Wp(e,i=>{ak(t,i,n)})}function qp(t,e){const n=ql(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,QR(e,n.length>0?n:void 0)}Wp(e,r=>{qp(t,r)})}function Q9(t,e){const n=hh(sk(t,e)),r=x1(t.transactionQueueTree_,e);return k9(r,i=>{gg(t,i)}),gg(t,r),ZR(r,i=>{gg(t,i)}),n}function gg(t,e){const n=ql(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(re(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(re(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Fa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?QR(e,void 0):n.length=s+1,_a(t.eventQueue_,hh(e),i);for(let o=0;o<r.length;o++)ch(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Z9(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fr(`Invalid query segment '${n}' in query '${t}'`)}return e}const PT=function(t,e){const n=eF(t),r=n.namespace;n.domain==="firebase.com"&&Zo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Zo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||kV();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new UV(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new St(n.pathString)}},eF=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=X9(t.substring(u,h)));const d=Z9(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ye(this._path)?null:bR(this._path)}get ref(){return new Gl(this._repo,this._path)}get _queryIdentifier(){const e=_T(this._queryParams),n=_1(e);return n==="{}"?"default":n}get _queryObject(){return _T(this._queryParams)}isEqual(e){if(e=ln(e),!(e instanceof F1))return!1;const n=this._repo===e._repo,r=wR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+d5(this._path)}}class Gl extends F1{constructor(e,n){super(e,n,new S1,!1)}get parent(){const e=TR(this._path);return e===null?null:new Gl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}y9(Gl);_9(Gl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF="FIREBASE_DATABASE_EMULATOR_HOST",u_={};let nF=!1;function rF(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Zo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=PT(s,i),a=o.repoInfo,l,c;typeof process<"u"&&ZE&&(c=ZE[tF]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=PT(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new Zy(Zy.OWNER):new BV(t.name,t.options,e);D9("Invalid Firebase Database URL",o),Ye(o.path)||Zo("Database URL must point to the root of a Firebase Database (not including a child path).");const h=sF(a,t,u,new FV(t.name,n));return new oF(h,t)}function iF(t,e){const n=u_[e];(!n||n[t.key]!==t)&&Zo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),K9(t),delete n[t.key]}function sF(t,e,n,r){let i=u_[e.name];i||(i={},u_[e.name]=i);let s=i[t.toURLString()];return s&&Zo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new H9(t,nF,n,r),i[t.toURLString()]=s,s}class oF{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(z9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gl(this._repo,dt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(iF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Zo("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(t){SV(to),_i(new Wr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return rF(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),dr(eT,tT,t),dr(eT,tT,"esm2017")}qi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};qi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};aF();var lF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ie,B1=B1||{},xe=lF||self;function Gp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function dh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function cF(t){return Object.prototype.hasOwnProperty.call(t,yg)&&t[yg]||(t[yg]=++uF)}var yg="closure_uid_"+(1e9*Math.random()>>>0),uF=0;function hF(t,e,n){return t.call.apply(t.bind,arguments)}function dF(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Dn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Dn=hF:Dn=dF,Dn.apply(null,arguments)}function rd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function dn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function no(){this.s=this.s,this.o=this.o}var fF=0;no.prototype.s=!1;no.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),fF!=0)&&cF(this)};no.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lk=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function U1(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function xT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Gp(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ln(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ln.prototype.h=function(){this.defaultPrevented=!0};var pF=function(){if(!xe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};xe.addEventListener("test",n,e),xe.removeEventListener("test",n,e)}catch{}return t}();function bu(t){return/^[\s\xa0]*$/.test(t)}function Kp(){var t=xe.navigator;return t&&(t=t.userAgent)?t:""}function ti(t){return Kp().indexOf(t)!=-1}function $1(t){return $1[" "](t),t}$1[" "]=function(){};function mF(t,e){var n=aB;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var gF=ti("Opera"),_l=ti("Trident")||ti("MSIE"),ck=ti("Edge"),h_=ck||_l,uk=ti("Gecko")&&!(Kp().toLowerCase().indexOf("webkit")!=-1&&!ti("Edge"))&&!(ti("Trident")||ti("MSIE"))&&!ti("Edge"),yF=Kp().toLowerCase().indexOf("webkit")!=-1&&!ti("Edge");function hk(){var t=xe.document;return t?t.documentMode:void 0}var d_;e:{var _g="",vg=function(){var t=Kp();if(uk)return/rv:([^\);]+)(\)|;)/.exec(t);if(ck)return/Edge\/([\d\.]+)/.exec(t);if(_l)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(yF)return/WebKit\/(\S+)/.exec(t);if(gF)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(vg&&(_g=vg?vg[1]:""),_l){var bg=hk();if(bg!=null&&bg>parseFloat(_g)){d_=String(bg);break e}}d_=_g}var f_;if(xe.document&&_l){var DT=hk();f_=DT||parseInt(d_,10)||void 0}else f_=void 0;var _F=f_;function Eu(t,e){if(Ln.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(uk){e:{try{$1(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:vF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Eu.$.h.call(this)}}dn(Eu,Ln);var vF={2:"touch",3:"pen",4:"mouse"};Eu.prototype.h=function(){Eu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var fh="closure_listenable_"+(1e6*Math.random()|0),bF=0;function EF(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++bF,this.fa=this.ia=!1}function Yp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function H1(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function TF(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function dk(t){const e={};for(const n in t)e[n]=t[n];return e}const LT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fk(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<LT.length;s++)n=LT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Jp(t){this.src=t,this.g={},this.h=0}Jp.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=m_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new EF(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function p_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=lk(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Yp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function m_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var z1="closure_lm_"+(1e6*Math.random()|0),Eg={};function pk(t,e,n,r,i){if(r&&r.once)return gk(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)pk(t,e[s],n,r,i);return null}return n=q1(n),t&&t[fh]?t.O(e,n,dh(r)?!!r.capture:!!r,i):mk(t,e,n,!1,r,i)}function mk(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=dh(i)?!!i.capture:!!i,a=W1(t);if(a||(t[z1]=a=new Jp(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=wF(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)pF||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_k(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function wF(){function t(n){return e.call(t.src,t.listener,n)}const e=SF;return t}function gk(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)gk(t,e[s],n,r,i);return null}return n=q1(n),t&&t[fh]?t.P(e,n,dh(r)?!!r.capture:!!r,i):mk(t,e,n,!0,r,i)}function yk(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)yk(t,e[s],n,r,i);else r=dh(r)?!!r.capture:!!r,n=q1(n),t&&t[fh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=m_(s,n,r,i),-1<n&&(Yp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=W1(t))&&(e=t.g[e.toString()],t=-1,e&&(t=m_(e,n,r,i)),(n=-1<t?e[t]:null)&&j1(n))}function j1(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[fh])p_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_k(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=W1(e))?(p_(n,t),n.h==0&&(n.src=null,e[z1]=null)):Yp(t)}}}function _k(t){return t in Eg?Eg[t]:Eg[t]="on"+t}function SF(t,e){if(t.fa)t=!0;else{e=new Eu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&j1(t),t=n.call(r,e)}return t}function W1(t){return t=t[z1],t instanceof Jp?t:null}var Tg="__closure_events_fn_"+(1e9*Math.random()>>>0);function q1(t){return typeof t=="function"?t:(t[Tg]||(t[Tg]=function(e){return t.handleEvent(e)}),t[Tg])}function cn(){no.call(this),this.i=new Jp(this),this.S=this,this.J=null}dn(cn,no);cn.prototype[fh]=!0;cn.prototype.removeEventListener=function(t,e,n,r){yk(this,t,e,n,r)};function wn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ln(e,t);else if(e instanceof Ln)e.target=e.target||t;else{var i=e;e=new Ln(r,t),fk(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=id(o,r,!0,e)&&i}if(o=e.g=t,i=id(o,r,!0,e)&&i,i=id(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=id(o,r,!1,e)&&i}cn.prototype.N=function(){if(cn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Yp(n[r]);delete t.g[e],t.h--}}this.J=null};cn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};cn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function id(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&p_(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var G1=xe.JSON.stringify;class IF{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function AF(){var t=K1;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class CF{constructor(){this.h=this.g=null}add(e,n){const r=vk.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var vk=new IF(()=>new RF,t=>t.reset());class RF{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function kF(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function OF(t){xe.setTimeout(()=>{throw t},0)}let Tu,wu=!1,K1=new CF,bk=()=>{const t=xe.Promise.resolve(void 0);Tu=()=>{t.then(NF)}};var NF=()=>{for(var t;t=AF();){try{t.h.call(t.g)}catch(n){OF(n)}var e=vk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}wu=!1};function Qp(t,e){cn.call(this),this.h=t||1,this.g=e||xe,this.j=Dn(this.qb,this),this.l=Date.now()}dn(Qp,cn);ie=Qp.prototype;ie.ga=!1;ie.T=null;ie.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wn(this,"tick"),this.ga&&(Y1(this),this.start()))}};ie.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Y1(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ie.N=function(){Qp.$.N.call(this),Y1(this),delete this.g};function J1(t,e,n){if(typeof t=="function")n&&(t=Dn(t,n));else if(t&&typeof t.handleEvent=="function")t=Dn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:xe.setTimeout(t,e||0)}function Ek(t){t.g=J1(()=>{t.g=null,t.i&&(t.i=!1,Ek(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class MF extends no{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ek(this)}N(){super.N(),this.g&&(xe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Su(t){no.call(this),this.h=t,this.g={}}dn(Su,no);var VT=[];function Tk(t,e,n,r){Array.isArray(n)||(n&&(VT[0]=n.toString()),n=VT);for(var i=0;i<n.length;i++){var s=pk(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function wk(t){H1(t.g,function(e,n){this.g.hasOwnProperty(n)&&j1(e)},t),t.g={}}Su.prototype.N=function(){Su.$.N.call(this),wk(this)};Su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Xp(){this.g=!0}Xp.prototype.Ea=function(){this.g=!1};function PF(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function xF(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ba(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+LF(t,n)+(r?" "+r:"")})}function DF(t,e){t.info(function(){return"TIMEOUT: "+e})}Xp.prototype.info=function(){};function LF(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return G1(n)}catch{return e}}var va={},FT=null;function Zp(){return FT=FT||new cn}va.Ta="serverreachability";function Sk(t){Ln.call(this,va.Ta,t)}dn(Sk,Ln);function Iu(t){const e=Zp();wn(e,new Sk(e))}va.STAT_EVENT="statevent";function Ik(t,e){Ln.call(this,va.STAT_EVENT,t),this.stat=e}dn(Ik,Ln);function $n(t){const e=Zp();wn(e,new Ik(e,t))}va.Ua="timingevent";function Ak(t,e){Ln.call(this,va.Ua,t),this.size=e}dn(Ak,Ln);function ph(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return xe.setTimeout(function(){t()},e)}var em={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ck={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Q1(){}Q1.prototype.h=null;function BT(t){return t.h||(t.h=t.i())}function Rk(){}var mh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function X1(){Ln.call(this,"d")}dn(X1,Ln);function Z1(){Ln.call(this,"c")}dn(Z1,Ln);var g_;function tm(){}dn(tm,Q1);tm.prototype.g=function(){return new XMLHttpRequest};tm.prototype.i=function(){return{}};g_=new tm;function gh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Su(this),this.P=VF,t=h_?125:void 0,this.V=new Qp(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new kk}function kk(){this.i=null,this.g="",this.h=!1}var VF=45e3,Ok={},y_={};ie=gh.prototype;ie.setTimeout=function(t){this.P=t};function __(t,e,n){t.L=1,t.A=rm(Ji(e)),t.u=n,t.S=!0,Nk(t,null)}function Nk(t,e){t.G=Date.now(),yh(t),t.B=Ji(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Bk(n.i,"t",r),t.o=0,n=t.l.J,t.h=new kk,t.g=o2(t.l,n?e:null,!t.u),0<t.O&&(t.M=new MF(Dn(t.Pa,t,t.g),t.O)),Tk(t.U,t.g,"readystatechange",t.nb),e=t.I?dk(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Iu(),PF(t.j,t.v,t.B,t.m,t.W,t.u)}ie.nb=function(t){t=t.target;const e=this.M;e&&oi(t)==3?e.l():this.Pa(t)};ie.Pa=function(t){try{if(t==this.g)e:{const u=oi(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||h_||this.g&&(this.h.h||this.g.ja()||zT(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Iu(3):Iu(2)),nm(this);var n=this.g.da();this.ca=n;t:if(Mk(this)){var r=zT(this.g);t="";var i=r.length,s=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ro(this),Hc(this);var o="";break t}this.h.i=new xe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,xF(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bu(a)){var c=a;break t}}c=null}if(n=c)Ba(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,v_(this,n);else{this.i=!1,this.s=3,$n(12),Ro(this),Hc(this);break e}}this.S?(Pk(this,u,o),h_&&this.i&&u==3&&(Tk(this.U,this.V,"tick",this.mb),this.V.start())):(Ba(this.j,this.m,o,null),v_(this,o)),u==4&&Ro(this),this.i&&!this.J&&(u==4?n2(this.l,this):(this.i=!1,yh(this)))}else iB(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,$n(12)):(this.s=0,$n(13)),Ro(this),Hc(this)}}}catch{}finally{}};function Mk(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Pk(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=FF(t,n),i==y_){e==4&&(t.s=4,$n(14),r=!1),Ba(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Ok){t.s=4,$n(15),Ba(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ba(t.j,t.m,i,null),v_(t,i);Mk(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,$n(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),s0(e),e.M=!0,$n(11))):(Ba(t.j,t.m,n,"[Invalid Chunked Response]"),Ro(t),Hc(t))}ie.mb=function(){if(this.g){var t=oi(this.g),e=this.g.ja();this.o<e.length&&(nm(this),Pk(this,t,e),this.i&&t!=4&&yh(this))}};function FF(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?y_:(n=Number(e.substring(n,r)),isNaN(n)?Ok:(r+=1,r+n>e.length?y_:(e=e.slice(r,r+n),t.o=r+n,e)))}ie.cancel=function(){this.J=!0,Ro(this)};function yh(t){t.Y=Date.now()+t.P,xk(t,t.P)}function xk(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ph(Dn(t.lb,t),e)}function nm(t){t.C&&(xe.clearTimeout(t.C),t.C=null)}ie.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(DF(this.j,this.B),this.L!=2&&(Iu(),$n(17)),Ro(this),this.s=2,Hc(this)):xk(this,this.Y-t)};function Hc(t){t.l.H==0||t.J||n2(t.l,t)}function Ro(t){nm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Y1(t.V),wk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function v_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||b_(n.i,t))){if(!t.K&&b_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Of(n),am(n);else break e;i0(n),$n(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=ph(Dn(n.ib,n),6e3));if(1>=Hk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ko(n,11)}else if((t.K||n.g==t)&&Of(n),!bu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(e0(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,Tt(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=s2(r,r.J?r.pa:null,r.Y),o.K){zk(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(nm(a),yh(a)),r.g=o}else e2(r);0<n.j.length&&lm(n)}else c[0]!="stop"&&c[0]!="close"||ko(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ko(n,7):r0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Iu(4)}catch{}}function BF(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Gp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function UF(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Gp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Dk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Gp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=UF(t),r=BF(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Lk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $F(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function zo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof zo){this.h=t.h,Rf(this,t.j),this.s=t.s,this.g=t.g,kf(this,t.m),this.l=t.l;var e=t.i,n=new Au;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),UT(this,n),this.o=t.o}else t&&(e=String(t).match(Lk))?(this.h=!1,Rf(this,e[1]||"",!0),this.s=yc(e[2]||""),this.g=yc(e[3]||"",!0),kf(this,e[4]),this.l=yc(e[5]||"",!0),UT(this,e[6]||"",!0),this.o=yc(e[7]||"")):(this.h=!1,this.i=new Au(null,this.h))}zo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(_c(e,$T,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(_c(e,$T,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(_c(n,n.charAt(0)=="/"?jF:zF,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",_c(n,qF)),t.join("")};function Ji(t){return new zo(t)}function Rf(t,e,n){t.j=n?yc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function kf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function UT(t,e,n){e instanceof Au?(t.i=e,GF(t.i,t.h)):(n||(e=_c(e,WF)),t.i=new Au(e,t.h))}function Tt(t,e,n){t.i.set(e,n)}function rm(t){return Tt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function yc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function _c(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,HF),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function HF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var $T=/[#\/\?@]/g,zF=/[#\?:]/g,jF=/[#\?]/g,WF=/[#\?@]/g,qF=/#/g;function Au(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ro(t){t.g||(t.g=new Map,t.h=0,t.i&&$F(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ie=Au.prototype;ie.add=function(t,e){ro(this),this.i=null,t=Kl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Vk(t,e){ro(t),e=Kl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Fk(t,e){return ro(t),e=Kl(t,e),t.g.has(e)}ie.forEach=function(t,e){ro(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ie.ta=function(){ro(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ie.Z=function(t){ro(this);let e=[];if(typeof t=="string")Fk(this,t)&&(e=e.concat(this.g.get(Kl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ie.set=function(t,e){return ro(this),this.i=null,t=Kl(this,t),Fk(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ie.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Bk(t,e,n){Vk(t,e),0<n.length&&(t.i=null,t.g.set(Kl(t,e),U1(n)),t.h+=n.length)}ie.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Kl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function GF(t,e){e&&!t.j&&(ro(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Vk(this,r),Bk(this,i,n))},t)),t.j=e}var KF=class{constructor(t,e){this.g=t,this.map=e}};function Uk(t){this.l=t||YF,xe.PerformanceNavigationTiming?(t=xe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(xe.g&&xe.g.Ka&&xe.g.Ka()&&xe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var YF=10;function $k(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Hk(t){return t.h?1:t.g?t.g.size:0}function b_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function e0(t,e){t.g?t.g.add(e):t.h=e}function zk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Uk.prototype.cancel=function(){if(this.i=jk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function jk(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return U1(t.i)}var JF=class{stringify(t){return xe.JSON.stringify(t,void 0)}parse(t){return xe.JSON.parse(t,void 0)}};function QF(){this.g=new JF}function XF(t,e,n){const r=n||"";try{Dk(t,function(i,s){let o=i;dh(i)&&(o=G1(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ZF(t,e){const n=new Xp;if(xe.Image){const r=new Image;r.onload=rd(sd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=rd(sd,n,r,"TestLoadImage: error",!1,e),r.onabort=rd(sd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=rd(sd,n,r,"TestLoadImage: timeout",!1,e),xe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function sd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function im(t){this.l=t.ec||null,this.j=t.ob||!1}dn(im,Q1);im.prototype.g=function(){return new sm(this.l,this.j)};im.prototype.i=function(t){return function(){return t}}({});function sm(t,e){cn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=t0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dn(sm,cn);var t0=0;ie=sm.prototype;ie.open=function(t,e){if(this.readyState!=t0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Cu(this)};ie.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||xe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ie.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_h(this)),this.readyState=t0};ie.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Cu(this)),this.g&&(this.readyState=3,Cu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof xe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Wk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Wk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ie.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?_h(this):Cu(this),this.readyState==3&&Wk(this)}};ie.Za=function(t){this.g&&(this.response=this.responseText=t,_h(this))};ie.Ya=function(t){this.g&&(this.response=t,_h(this))};ie.ka=function(){this.g&&_h(this)};function _h(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Cu(t)}ie.setRequestHeader=function(t,e){this.v.append(t,e)};ie.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ie.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Cu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(sm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var eB=xe.JSON.parse;function Dt(t){cn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=qk,this.L=this.M=!1}dn(Dt,cn);var qk="",tB=/^https?$/i,nB=["POST","PUT"];ie=Dt.prototype;ie.Oa=function(t){this.M=t};ie.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():g_.g(),this.C=this.u?BT(this.u):BT(g_),this.g.onreadystatechange=Dn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){HT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=xe.FormData&&t instanceof xe.FormData,!(0<=lk(nB,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Yk(this),0<this.B&&((this.L=rB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dn(this.ua,this)):this.A=J1(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){HT(this,s)}};function rB(t){return _l&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ie.ua=function(){typeof B1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wn(this,"timeout"),this.abort(8))};function HT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Gk(t),om(t)}function Gk(t){t.F||(t.F=!0,wn(t,"complete"),wn(t,"error"))}ie.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,wn(this,"complete"),wn(this,"abort"),om(this))};ie.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),om(this,!0)),Dt.$.N.call(this)};ie.La=function(){this.s||(this.G||this.v||this.l?Kk(this):this.kb())};ie.kb=function(){Kk(this)};function Kk(t){if(t.h&&typeof B1<"u"&&(!t.C[1]||oi(t)!=4||t.da()!=2)){if(t.v&&oi(t)==4)J1(t.La,0,t);else if(wn(t,"readystatechange"),oi(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Lk)[1]||null;!i&&xe.self&&xe.self.location&&(i=xe.self.location.protocol.slice(0,-1)),r=!tB.test(i?i.toLowerCase():"")}n=r}if(n)wn(t,"complete"),wn(t,"success");else{t.m=6;try{var s=2<oi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Gk(t)}}finally{om(t)}}}}function om(t,e){if(t.g){Yk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||wn(t,"ready");try{n.onreadystatechange=r}catch{}}}function Yk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(xe.clearTimeout(t.A),t.A=null)}ie.isActive=function(){return!!this.g};function oi(t){return t.g?t.g.readyState:0}ie.da=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}};ie.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ie.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),eB(e)}};function zT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case qk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function iB(t){const e={};t=(t.g&&2<=oi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(bu(t[r]))continue;var n=kF(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}TF(e,function(r){return r.join(", ")})}ie.Ia=function(){return this.m};ie.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Jk(t){let e="";return H1(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function n0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Jk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Tt(t,e,n))}function cc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qk(t){this.Ga=0,this.j=[],this.l=new Xp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cc("baseRetryDelayMs",5e3,t),this.hb=cc("retryDelaySeedMs",1e4,t),this.eb=cc("forwardChannelMaxRetries",2,t),this.xa=cc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Uk(t&&t.concurrentRequestLimit),this.Ja=new QF,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ie=Qk.prototype;ie.ra=8;ie.H=1;function r0(t){if(Xk(t),t.H==3){var e=t.W++,n=Ji(t.I);if(Tt(n,"SID",t.K),Tt(n,"RID",e),Tt(n,"TYPE","terminate"),vh(t,n),e=new gh(t,t.l,e),e.L=2,e.A=rm(Ji(n)),n=!1,xe.navigator&&xe.navigator.sendBeacon)try{n=xe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&xe.Image&&(new Image().src=e.A,n=!0),n||(e.g=o2(e.l,null),e.g.ha(e.A)),e.G=Date.now(),yh(e)}i2(t)}function am(t){t.g&&(s0(t),t.g.cancel(),t.g=null)}function Xk(t){am(t),t.u&&(xe.clearTimeout(t.u),t.u=null),Of(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&xe.clearTimeout(t.m),t.m=null)}function lm(t){if(!$k(t.i)&&!t.m){t.m=!0;var e=t.Na;Tu||bk(),wu||(Tu(),wu=!0),K1.add(e,t),t.C=0}}function sB(t,e){return Hk(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ph(Dn(t.Na,t,e),r2(t,t.C)),t.C++,!0)}ie.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new gh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=dk(s),fk(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Zk(this,i,e),n=Ji(this.I),Tt(n,"RID",t),Tt(n,"CVER",22),this.F&&Tt(n,"X-HTTP-Session-Id",this.F),vh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Jk(s)))+"&"+e:this.o&&n0(n,this.o,s)),e0(this.i,i),this.bb&&Tt(n,"TYPE","init"),this.P?(Tt(n,"$req",e),Tt(n,"SID","null"),i.aa=!0,__(i,n,null)):__(i,n,e),this.H=2}}else this.H==3&&(t?jT(this,t):this.j.length==0||$k(this.i)||jT(this))};function jT(t,e){var n;e?n=e.m:n=t.W++;const r=Ji(t.I);Tt(r,"SID",t.K),Tt(r,"RID",n),Tt(r,"AID",t.V),vh(t,r),t.o&&t.s&&n0(r,t.o,t.s),n=new gh(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Zk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),e0(t.i,n),__(n,r,e)}function vh(t,e){t.na&&H1(t.na,function(n,r){Tt(e,r,n)}),t.h&&Dk({},function(n,r){Tt(e,r,n)})}function Zk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Dn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{XF(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function e2(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Tu||bk(),wu||(Tu(),wu=!0),K1.add(e,t),t.A=0}}function i0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ph(Dn(t.Ma,t),r2(t,t.A)),t.A++,!0)}ie.Ma=function(){if(this.u=null,t2(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ph(Dn(this.jb,this),t)}};ie.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$n(10),am(this),t2(this))};function s0(t){t.B!=null&&(xe.clearTimeout(t.B),t.B=null)}function t2(t){t.g=new gh(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ji(t.wa);Tt(e,"RID","rpc"),Tt(e,"SID",t.K),Tt(e,"AID",t.V),Tt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Tt(e,"TO",t.qa),Tt(e,"TYPE","xmlhttp"),vh(t,e),t.o&&t.s&&n0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=rm(Ji(e)),n.u=null,n.S=!0,Nk(n,t)}ie.ib=function(){this.v!=null&&(this.v=null,am(this),i0(this),$n(19))};function Of(t){t.v!=null&&(xe.clearTimeout(t.v),t.v=null)}function n2(t,e){var n=null;if(t.g==e){Of(t),s0(t),t.g=null;var r=2}else if(b_(t.i,e))n=e.F,zk(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Zp(),wn(r,new Ak(r,n)),lm(t)}else e2(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&sB(t,e)||r==2&&i0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ko(t,5);break;case 4:ko(t,10);break;case 3:ko(t,6);break;default:ko(t,2)}}}function r2(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ko(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Dn(t.pb,t);n||(n=new zo("//www.google.com/images/cleardot.gif"),xe.location&&xe.location.protocol=="http"||Rf(n,"https"),rm(n)),ZF(n.toString(),r)}else $n(2);t.H=0,t.h&&t.h.za(e),i2(t),Xk(t)}ie.pb=function(t){t?(this.l.info("Successfully pinged google.com"),$n(2)):(this.l.info("Failed to ping google.com"),$n(1))};function i2(t){if(t.H=0,t.ma=[],t.h){const e=jk(t.i);(e.length!=0||t.j.length!=0)&&(xT(t.ma,e),xT(t.ma,t.j),t.i.i.length=0,U1(t.j),t.j.length=0),t.h.ya()}}function s2(t,e,n){var r=n instanceof zo?Ji(n):new zo(n);if(r.g!="")e&&(r.g=e+"."+r.g),kf(r,r.m);else{var i=xe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new zo(null);r&&Rf(s,r),e&&(s.g=e),i&&kf(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Tt(r,n,e),Tt(r,"VER",t.ra),vh(t,r),r}function o2(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Dt(new im({ob:n})):new Dt(t.va),e.Oa(t.J),e}ie.isActive=function(){return!!this.h&&this.h.isActive(this)};function a2(){}ie=a2.prototype;ie.Ba=function(){};ie.Aa=function(){};ie.za=function(){};ie.ya=function(){};ie.isActive=function(){return!0};ie.Va=function(){};function Nf(){if(_l&&!(10<=Number(_F)))throw Error("Environmental error: no available transport.")}Nf.prototype.g=function(t,e){return new gr(t,e)};function gr(t,e){cn.call(this),this.g=new Qk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!bu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Yl(this)}dn(gr,cn);gr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;$n(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=s2(t,null,t.Y),lm(t)};gr.prototype.close=function(){r0(this.g)};gr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=G1(t),t=n);e.j.push(new KF(e.fb++,t)),e.H==3&&lm(e)};gr.prototype.N=function(){this.g.h=null,delete this.j,r0(this.g),delete this.g,gr.$.N.call(this)};function l2(t){X1.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}dn(l2,X1);function c2(){Z1.call(this),this.status=1}dn(c2,Z1);function Yl(t){this.g=t}dn(Yl,a2);Yl.prototype.Ba=function(){wn(this.g,"a")};Yl.prototype.Aa=function(t){wn(this.g,new l2(t))};Yl.prototype.za=function(t){wn(this.g,new c2)};Yl.prototype.ya=function(){wn(this.g,"b")};function oB(){this.blockSize=-1}function Gr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}dn(Gr,oB);Gr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function wg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Gr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)wg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){wg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){wg(this,r),i=0;break}}this.h=i,this.i+=e};Gr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function lt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var aB={};function o0(t){return-128<=t&&128>t?mF(t,function(e){return new lt([e|0],0>e?-1:0)}):new lt([t|0],0>t?-1:0)}function ai(t){if(isNaN(t)||!isFinite(t))return nl;if(0>t)return yn(ai(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=E_;return new lt(e,0)}function u2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return yn(u2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ai(Math.pow(e,8)),r=nl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ai(Math.pow(e,s)),r=r.R(s).add(ai(o))):(r=r.R(n),r=r.add(ai(o)))}return r}var E_=4294967296,nl=o0(0),T_=o0(1),WT=o0(16777216);ie=lt.prototype;ie.ea=function(){if(wr(this))return-yn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:E_+r)*e,e*=E_}return t};ie.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Hi(this))return"0";if(wr(this))return"-"+yn(this).toString(t);for(var e=ai(Math.pow(t,6)),n=this,r="";;){var i=Pf(n,e).g;n=Mf(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Hi(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ie.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Hi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function wr(t){return t.h==-1}ie.X=function(t){return t=Mf(this,t),wr(t)?-1:Hi(t)?0:1};function yn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new lt(n,~t.h).add(T_)}ie.abs=function(){return wr(this)?yn(this):this};ie.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new lt(n,n[n.length-1]&-2147483648?-1:0)};function Mf(t,e){return t.add(yn(e))}ie.R=function(t){if(Hi(this)||Hi(t))return nl;if(wr(this))return wr(t)?yn(this).R(yn(t)):yn(yn(this).R(t));if(wr(t))return yn(this.R(yn(t)));if(0>this.X(WT)&&0>t.X(WT))return ai(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,od(n,2*r+2*i),n[2*r+2*i+1]+=s*l,od(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,od(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,od(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new lt(n,0)};function od(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function uc(t,e){this.g=t,this.h=e}function Pf(t,e){if(Hi(e))throw Error("division by zero");if(Hi(t))return new uc(nl,nl);if(wr(t))return e=Pf(yn(t),e),new uc(yn(e.g),yn(e.h));if(wr(e))return e=Pf(t,yn(e)),new uc(yn(e.g),e.h);if(30<t.g.length){if(wr(t)||wr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=T_,r=e;0>=r.X(t);)n=qT(n),r=qT(r);var i=Ia(n,1),s=Ia(r,1);for(r=Ia(r,2),n=Ia(n,2);!Hi(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ia(r,1),n=Ia(n,1)}return e=Mf(t,i.R(e)),new uc(i,e)}for(i=nl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ai(n),o=s.R(e);wr(o)||0<o.X(t);)n-=r,s=ai(n),o=s.R(e);Hi(s)&&(s=T_),i=i.add(s),t=Mf(t,o)}return new uc(i,t)}ie.gb=function(t){return Pf(this,t).h};ie.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new lt(n,this.h&t.h)};ie.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new lt(n,this.h|t.h)};ie.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new lt(n,this.h^t.h)};function qT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new lt(n,t.h)}function Ia(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new lt(i,t.h)}Nf.prototype.createWebChannel=Nf.prototype.g;gr.prototype.send=gr.prototype.u;gr.prototype.open=gr.prototype.m;gr.prototype.close=gr.prototype.close;em.NO_ERROR=0;em.TIMEOUT=8;em.HTTP_ERROR=6;Ck.COMPLETE="complete";Rk.EventType=mh;mh.OPEN="a";mh.CLOSE="b";mh.ERROR="c";mh.MESSAGE="d";cn.prototype.listen=cn.prototype.O;Dt.prototype.listenOnce=Dt.prototype.P;Dt.prototype.getLastError=Dt.prototype.Sa;Dt.prototype.getLastErrorCode=Dt.prototype.Ia;Dt.prototype.getStatus=Dt.prototype.da;Dt.prototype.getResponseJson=Dt.prototype.Wa;Dt.prototype.getResponseText=Dt.prototype.ja;Dt.prototype.send=Dt.prototype.ha;Dt.prototype.setWithCredentials=Dt.prototype.Oa;Gr.prototype.digest=Gr.prototype.l;Gr.prototype.reset=Gr.prototype.reset;Gr.prototype.update=Gr.prototype.j;lt.prototype.add=lt.prototype.add;lt.prototype.multiply=lt.prototype.R;lt.prototype.modulo=lt.prototype.gb;lt.prototype.compare=lt.prototype.X;lt.prototype.toNumber=lt.prototype.ea;lt.prototype.toString=lt.prototype.toString;lt.prototype.getBits=lt.prototype.D;lt.fromNumber=ai;lt.fromString=u2;var lB=function(){return new Nf},cB=function(){return Zp()},Sg=em,uB=Ck,hB=va,GT={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ad=Rk,dB=Dt,fB=Gr,rl=lt;const KT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rn.UNAUTHENTICATED=new Rn(null),Rn.GOOGLE_CREDENTIALS=new Rn("google-credentials-uid"),Rn.FIRST_PARTY=new Rn("first-party-uid"),Rn.MOCK_USER=new Rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new nh("@firebase/firestore");function hc(){return ra.logLevel}function ne(t,...e){if(ra.logLevel<=qe.DEBUG){const n=e.map(a0);ra.debug(`Firestore (${Jl}): ${t}`,...n)}}function bi(t,...e){if(ra.logLevel<=qe.ERROR){const n=e.map(a0);ra.error(`Firestore (${Jl}): ${t}`,...n)}}function vl(t,...e){if(ra.logLevel<=qe.WARN){const n=e.map(a0);ra.warn(`Firestore (${Jl}): ${t}`,...n)}}function a0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t="Unexpected state"){const e=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: `+t;throw bi(e),new Error(e)}function yt(t,e){t||Ne()}function Ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends ki{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Rn.UNAUTHENTICATED))}shutdown(){}}class mB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gB{constructor(e){this.t=e,this.currentUser=Rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new di;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new di,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new di)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string"),new h2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string"),new Rn(e)}}class yB{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Rn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _B{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yB(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(yt(typeof n.token=="string"),this.R=n.token,new vB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=EB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function it(t,e){return t<e?-1:t>e?1:0}function bl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new fe(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new jt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new jt(0,0))}static max(){return new Ve(new jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ne(),r===void 0?r=e.length-n:r>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ru.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ru?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ct extends Ru{construct(e,n,r){return new Ct(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ct(n)}static emptyPath(){return new Ct([])}}const TB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends Ru{construct(e,n,r){return new Tn(e,n,r)}static isValidIdentifier(e){return TB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new fe(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new fe(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new fe(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new fe(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(n)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(Ct.fromString(e))}static fromName(e){return new be(Ct.fromString(e).popFirst(5))}static empty(){return new be(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new Ct(e.slice()))}}function wB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new Gs(i,be.empty(),e)}function SB(t){return new Gs(t.readTime,t.key,-1)}class Gs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gs(Ve.min(),be.empty(),-1)}static max(){return new Gs(Ve.max(),be.empty(),-1)}}function IB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:it(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==AB)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new di,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=c0(r.target.error);this.V.reject(new zc(e,i))}}static open(e,n,r,i){try{return new l0(n,e.transaction(i,r))}catch(s){throw new zc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new kB(n)}}class Oo{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Oo.S(Wt())===12.2&&bi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ne("SimpleDb","Removing database:",e),To(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!n1())return!1;if(Oo.C())return!0;const e=Wt(),n=Oo.S(e),r=0<n&&n<10,i=Oo.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(ne("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new zc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new fe(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new fe(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new zc(e,o))},i.onupgradeneeded=s=>{ne("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{ne("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=l0.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),F.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ne("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class RB{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return To(this.k.delete())}}class zc extends fe{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Eh(t){return t.name==="IndexedDbTransactionError"}class kB{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ne("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),To(r)}add(e){return ne("SimpleDb","ADD",this.store.name,e,e),To(this.store.add(e))}get(e){return To(this.store.get(e)).next(n=>(n===void 0&&(n=null),ne("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ne("SimpleDb","DELETE",this.store.name,e),To(this.store.delete(e))}count(){return ne("SimpleDb","COUNT",this.store.name),To(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new F((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new F((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new F((r,i)=>{n.onerror=s=>{const o=c0(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new F((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new RB(a),c=n(a.primaryKey,a.value,l);if(c instanceof F){const u=c.catch(h=>(l.done(),F.reject(h)));r.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>F.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function To(t){return new F((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=c0(r.target.error);n(i)}})}let YT=!1;function c0(t){const e=Oo.S(Wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YT||(YT=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}u0._e=-1;function cm(t){return t==null}function xf(t){return t===0&&1/t==-1/0}function OB(t){return typeof t=="number"&&Number.isInteger(t)&&!xf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ba(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function f2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new Ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ld(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ld(this.root,e,this.comparator,!1)}getReverseIterator(){return new ld(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ld(this.root,e,this.comparator,!0)}}class ld{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??gn.RED,this.left=i??gn.EMPTY,this.right=s??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new gn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return gn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new QT(this.data.getIterator())}getIteratorFrom(e){return new QT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Sn(this.comparator);return n.data=e,n}}class QT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new cr([])}unionWith(e){let n=new Sn(Tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new p2("Invalid base64 string: "+s):s}}(e);return new Vn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const NB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(t){if(yt(!!t),typeof t=="string"){let e=0;const n=NB.exec(t);if(yt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ut(t.seconds),nanos:Ut(t.nanos)}}function Ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ia(t){return typeof t=="string"?Vn.fromBase64String(t):Vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function d0(t){const e=t.mapValue.fields.__previous_value__;return h0(e)?d0(e):e}function ku(t){const e=Ks(t.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ou{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ou("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?h0(t)?4:PB(t)?9007199254740991:10:Ne()}function Ei(t,e){if(t===e)return!0;const n=sa(t);if(n!==sa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ku(t).isEqual(ku(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ks(i.timestampValue),a=Ks(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ia(i.bytesValue).isEqual(ia(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ut(i.geoPointValue.latitude)===Ut(s.geoPointValue.latitude)&&Ut(i.geoPointValue.longitude)===Ut(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ut(i.integerValue)===Ut(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ut(i.doubleValue),a=Ut(s.doubleValue);return o===a?xf(o)===xf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return bl(t.arrayValue.values||[],e.arrayValue.values||[],Ei);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(JT(o)!==JT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ei(o[l],a[l])))return!1;return!0}(t,e);default:return Ne()}}function Nu(t,e){return(t.values||[]).find(n=>Ei(n,e))!==void 0}function El(t,e){if(t===e)return 0;const n=sa(t),r=sa(e);if(n!==r)return it(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return it(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ut(s.integerValue||s.doubleValue),l=Ut(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return XT(t.timestampValue,e.timestampValue);case 4:return XT(ku(t),ku(e));case 5:return it(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ia(s),l=ia(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=it(a[c],l[c]);if(u!==0)return u}return it(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=it(Ut(s.latitude),Ut(o.latitude));return a!==0?a:it(Ut(s.longitude),Ut(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=El(a[c],l[c]);if(u)return u}return it(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===cd.mapValue&&o===cd.mapValue)return 0;if(s===cd.mapValue)return 1;if(o===cd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=it(l[h],u[h]);if(d!==0)return d;const f=El(a[l[h]],c[u[h]]);if(f!==0)return f}return it(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ne()}}function XT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return it(t,e);const n=Ks(t),r=Ks(e),i=it(n.seconds,r.seconds);return i!==0?i:it(n.nanos,r.nanos)}function Tl(t){return w_(t)}function w_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ia(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=w_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${w_(n.fields[o])}`;return i+"}"}(t.mapValue):Ne()}function S_(t){return!!t&&"integerValue"in t}function f0(t){return!!t&&"arrayValue"in t}function ZT(t){return!!t&&"nullValue"in t}function ew(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ud(t){return!!t&&"mapValue"in t}function jc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ba(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ud(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jc(n)}setAll(e){let n=Tn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=jc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ud(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ei(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ud(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ba(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Jn(jc(this.value))}}function m2(t){const e=[];return ba(t.fields,(n,r)=>{const i=new Tn([n]);if(Ud(r)){const s=m2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Nn(e,0,Ve.min(),Ve.min(),Ve.min(),Jn.empty(),0)}static newFoundDocument(e,n,r,i){return new Nn(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new Nn(e,2,n,Ve.min(),Ve.min(),Jn.empty(),0)}static newUnknownDocument(e,n){return new Nn(e,3,n,Ve.min(),Ve.min(),Jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.position=e,this.inclusive=n}}function tw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=be.comparator(be.fromName(o.referenceValue),n.key):r=El(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ei(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n="asc"){this.field=e,this.dir=n}}function xB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{}class Gt extends g2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LB(e,n,r):n==="array-contains"?new BB(e,r):n==="in"?new UB(e,r):n==="not-in"?new $B(e,r):n==="array-contains-any"?new HB(e,r):new Gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VB(e,r):new FB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(El(n,this.value)):n!==null&&sa(this.value)===sa(n)&&this.matchesComparison(El(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends g2{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ti(e,n)}matches(e){return y2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function y2(t){return t.op==="and"}function _2(t){return DB(t)&&y2(t)}function DB(t){for(const e of t.filters)if(e instanceof Ti)return!1;return!0}function I_(t){if(t instanceof Gt)return t.field.canonicalString()+t.op.toString()+Tl(t.value);if(_2(t))return t.filters.map(e=>I_(e)).join(",");{const e=t.filters.map(n=>I_(n)).join(",");return`${t.op}(${e})`}}function v2(t,e){return t instanceof Gt?function(r,i){return i instanceof Gt&&r.op===i.op&&r.field.isEqual(i.field)&&Ei(r.value,i.value)}(t,e):t instanceof Ti?function(r,i){return i instanceof Ti&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&v2(o,i.filters[a]),!0):!1}(t,e):void Ne()}function b2(t){return t instanceof Gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Tl(n.value)}`}(t):t instanceof Ti?function(n){return n.op.toString()+" {"+n.getFilters().map(b2).join(" ,")+"}"}(t):"Filter"}class LB extends Gt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class VB extends Gt{constructor(e,n){super(e,"in",n),this.keys=E2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FB extends Gt{constructor(e,n){super(e,"not-in",n),this.keys=E2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function E2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class BB extends Gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return f0(n)&&Nu(n.arrayValue,this.value)}}class UB extends Gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nu(this.value.arrayValue,n)}}class $B extends Gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Nu(this.value.arrayValue,n)}}class HB extends Gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!f0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function rw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new zB(t,e,n,r,i,s,o)}function p0(t){const e=Ue(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>I_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),cm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Tl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Tl(r)).join(",")),e.ce=n}return e.ce}function m0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nw(t.startAt,e.startAt)&&nw(t.endAt,e.endAt)}function A_(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function jB(t,e,n,r,i,s,o,a){return new um(t,e,n,r,i,s,o,a)}function hm(t){return new um(t)}function iw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WB(t){return t.collectionGroup!==null}function Wc(t){const e=Ue(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Sn(Tn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Lf(s,r))}),n.has(Tn.keyField().canonicalString())||e.le.push(new Lf(Tn.keyField(),r))}return e.le}function fi(t){const e=Ue(t);return e.he||(e.he=qB(e,Wc(t))),e.he}function qB(t,e){if(t.limitType==="F")return rw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Lf(i.field,s)});const n=t.endAt?new Df(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Df(t.startAt.position,t.startAt.inclusive):null;return rw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function C_(t,e,n){return new um(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dm(t,e){return m0(fi(t),fi(e))&&t.limitType===e.limitType}function T2(t){return`${p0(fi(t))}|lt:${t.limitType}`}function Oa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>b2(i)).join(", ")}]`),cm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Tl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Tl(i)).join(",")),`Target(${r})`}(fi(t))}; limitType=${t.limitType})`}function fm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Wc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=tw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Wc(r),i)||r.endAt&&!function(o,a,l){const c=tw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Wc(r),i))}(t,e)}function GB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w2(t){return(e,n)=>{let r=!1;for(const i of Wc(t)){const s=KB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function KB(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?El(l,c):Ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return f2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=new Ot(be.comparator);function Qi(){return YB}const S2=new Ot(be.comparator);function vc(...t){let e=S2;for(const n of t)e=e.insert(n.key,n);return e}function I2(t){let e=S2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function No(){return qc()}function A2(){return qc()}function qc(){return new Ql(t=>t.toString(),(t,e)=>t.isEqual(e))}const JB=new Ot(be.comparator),QB=new Sn(be.comparator);function Ge(...t){let e=QB;for(const n of t)e=e.add(n);return e}const XB=new Sn(it);function ZB(){return XB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xf(e)?"-0":e}}function R2(t){return{integerValue:""+t}}function e7(t,e){return OB(e)?R2(e):C2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this._=void 0}}function t7(t,e,n){return t instanceof Vf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&h0(s)&&(s=d0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof wl?O2(t,e):t instanceof Mu?N2(t,e):function(i,s){const o=k2(i,s),a=sw(o)+sw(i.Ie);return S_(o)&&S_(i.Ie)?R2(a):C2(i.serializer,a)}(t,e)}function n7(t,e,n){return t instanceof wl?O2(t,e):t instanceof Mu?N2(t,e):n}function k2(t,e){return t instanceof Ff?function(r){return S_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Vf extends pm{}class wl extends pm{constructor(e){super(),this.elements=e}}function O2(t,e){const n=M2(e);for(const r of t.elements)n.some(i=>Ei(i,r))||n.push(r);return{arrayValue:{values:n}}}class Mu extends pm{constructor(e){super(),this.elements=e}}function N2(t,e){let n=M2(e);for(const r of t.elements)n=n.filter(i=>!Ei(i,r));return{arrayValue:{values:n}}}class Ff extends pm{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function sw(t){return Ut(t.integerValue||t.doubleValue)}function M2(t){return f0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,n){this.field=e,this.transform=n}}function i7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof wl&&i instanceof wl||r instanceof Mu&&i instanceof Mu?bl(r.elements,i.elements,Ei):r instanceof Ff&&i instanceof Ff?Ei(r.Ie,i.Ie):r instanceof Vf&&i instanceof Vf}(t.transform,e.transform)}class s7{constructor(e,n){this.version=e,this.transformResults=n}}class pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $d(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mm{}function P2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new g0(t.key,pr.none()):new Th(t.key,t.data,pr.none());{const n=t.data,r=Jn.empty();let i=new Sn(Tn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new io(t.key,r,new cr(i.toArray()),pr.none())}}function o7(t,e,n){t instanceof Th?function(i,s,o){const a=i.value.clone(),l=aw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof io?function(i,s,o){if(!$d(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=aw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(x2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Gc(t,e,n,r){return t instanceof Th?function(s,o,a,l){if(!$d(s.precondition,o))return a;const c=s.value.clone(),u=lw(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof io?function(s,o,a,l){if(!$d(s.precondition,o))return a;const c=lw(s.fieldTransforms,l,o),u=o.data;return u.setAll(x2(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return $d(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function a7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=k2(r.transform,i||null);s!=null&&(n===null&&(n=Jn.empty()),n.set(r.field,s))}return n||null}function ow(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bl(r,i,(s,o)=>i7(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Th extends mm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class io extends mm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function x2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aw(t,e,n){const r=new Map;yt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,n7(o,a,n[i]))}return r}function lw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,t7(s,o,e))}return r}class g0 extends mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l7 extends mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&o7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=A2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=P2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,(n,r)=>ow(n,r))&&bl(this.baseMutations,e.baseMutations,(n,r)=>ow(n,r))}}class y0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){yt(e.mutations.length===r.length);let i=function(){return JB}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new y0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Qe;function d7(t){switch(t){default:return Ne();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function D2(t){if(t===void 0)return bi("GRPC error has no .code"),B.UNKNOWN;switch(t){case Vt.OK:return B.OK;case Vt.CANCELLED:return B.CANCELLED;case Vt.UNKNOWN:return B.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return B.INTERNAL;case Vt.UNAVAILABLE:return B.UNAVAILABLE;case Vt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Vt.NOT_FOUND:return B.NOT_FOUND;case Vt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Vt.ABORTED:return B.ABORTED;case Vt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Vt.DATA_LOSS:return B.DATA_LOSS;default:return Ne()}}(Qe=Vt||(Vt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7=new rl([4294967295,4294967295],0);function cw(t){const e=f7().encode(t),n=new fB;return n.update(e),new Uint8Array(n.digest())}function uw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rl([n,r],0),new rl([i,s],0)]}class _0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bc(`Invalid padding: ${n}`);if(r<0)throw new bc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=rl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(rl.fromNumber(r)));return i.compare(p7)===1&&(i=new rl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=cw(e),[r,i]=uw(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new _0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=cw(e),[r,i]=uw(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,wh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gm(Ve.min(),i,new Ot(it),Qi(),Ge())}}class wh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wh(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class L2{constructor(e,n){this.targetId=e,this.fe=n}}class V2{constructor(e,n,r=Vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hw{constructor(){this.ge=0,this.pe=fw(),this.ye=Vn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ge(),n=Ge(),r=Ge();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ne()}}),new wh(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=fw()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,yt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class m7{constructor(e){this.Be=e,this.ke=new Map,this.qe=Qi(),this.Qe=dw(),this.Ke=new Ot(it)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(A_(s))if(r===0){const o=new be(s.path);this.We(n,o,Nn.newNoDocument(o,Ve.min()))}else yt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ia(r).toUint8Array()}catch(l){if(l instanceof p2)return vl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new _0(o,i,s)}catch(l){return vl(l instanceof bc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&A_(a.target)){const l=new be(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Nn.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ge();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new gm(e,n,this.Ke,this.qe,r);return this.qe=Qi(),this.Qe=dw(),this.Ke=new Ot(it),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new hw,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Sn(it),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new hw),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function dw(){return new Ot(be.comparator)}function fw(){return new Ot(be.comparator)}const g7={asc:"ASCENDING",desc:"DESCENDING"},y7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_7={and:"AND",or:"OR"};class v7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function R_(t,e){return t.useProto3Json||cm(e)?e:{value:e}}function Bf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b7(t,e){return Bf(t,e.toTimestamp())}function pi(t){return yt(!!t),Ve.fromTimestamp(function(n){const r=Ks(n);return new jt(r.seconds,r.nanos)}(t))}function v0(t,e){return k_(t,e).canonicalString()}function k_(t,e){const n=function(i){return new Ct(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function B2(t){const e=Ct.fromString(t);return yt(j2(e)),e}function O_(t,e){return v0(t.databaseId,e.path)}function Ig(t,e){const n=B2(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be($2(n))}function U2(t,e){return v0(t.databaseId,e)}function E7(t){const e=B2(t);return e.length===4?Ct.emptyPath():$2(e)}function N_(t){return new Ct(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $2(t){return yt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pw(t,e,n){return{name:O_(t,e),fields:n.value.mapValue.fields}}function T7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(yt(u===void 0||typeof u=="string"),Vn.fromBase64String(u||"")):(yt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Vn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?B.UNKNOWN:D2(c.code);return new fe(u,c.message||"")}(o);n=new V2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ig(t,r.document.name),s=pi(r.document.updateTime),o=r.document.createTime?pi(r.document.createTime):Ve.min(),a=new Jn({mapValue:{fields:r.document.fields}}),l=Nn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Hd(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ig(t,r.document),s=r.readTime?pi(r.readTime):Ve.min(),o=Nn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Hd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ig(t,r.document),s=r.removedTargetIds||[];n=new Hd([],s,i,null)}else{if(!("filter"in e))return Ne();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new h7(i,s),a=r.targetId;n=new L2(a,o)}}return n}function w7(t,e){let n;if(e instanceof Th)n={update:pw(t,e.key,e.value)};else if(e instanceof g0)n={delete:O_(t,e.key)};else if(e instanceof io)n={update:pw(t,e.key,e.data),updateMask:M7(e.fieldMask)};else{if(!(e instanceof l7))return Ne();n={verify:O_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Vf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ff)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:b7(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ne()}(t,e.precondition)),n}function S7(t,e){return t&&t.length>0?(yt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?pi(i.updateTime):pi(s);return o.isEqual(Ve.min())&&(o=pi(s)),new s7(o,i.transformResults||[])}(n,e))):[]}function I7(t,e){return{documents:[U2(t,e.path)]}}function A7(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=U2(t,i);const s=function(c){if(c.length!==0)return z2(Ti.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Na(d.field),direction:k7(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=R_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function C7(t){let e=E7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){yt(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=H2(h);return d instanceof Ti&&_2(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new Lf(Ma(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,cm(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Df(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Df(f,d)}(n.endAt)),jB(e,i,o,s,a,"F",l,c)}function R7(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function H2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ma(n.unaryFilter.field);return Gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ma(n.unaryFilter.field);return Gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ma(n.unaryFilter.field);return Gt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ma(n.unaryFilter.field);return Gt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(t):t.fieldFilter!==void 0?function(n){return Gt.create(Ma(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ti.create(n.compositeFilter.filters.map(r=>H2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(t):Ne()}function k7(t){return g7[t]}function O7(t){return y7[t]}function N7(t){return _7[t]}function Na(t){return{fieldPath:t.canonicalString()}}function Ma(t){return Tn.fromServerFormat(t.fieldPath)}function z2(t){return t instanceof Gt?function(n){if(n.op==="=="){if(ew(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NAN"}};if(ZT(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ew(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NOT_NAN"}};if(ZT(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Na(n.field),op:O7(n.op),value:n.value}}}(t):t instanceof Ti?function(n){const r=n.getFilters().map(i=>z2(i));return r.length===1?r[0]:{compositeFilter:{op:N7(n.op),filters:r}}}(t):Ne()}function M7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function j2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r,i,s=Ve.min(),o=Ve.min(),a=Vn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e){this.ct=e}}function x7(t){const e=C7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?C_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(){this._n=new L7}addToCollectionParentIndex(e,n){return this._n.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Gs.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class L7{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Sn(Ct.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Sn(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Sl(0)}static Ln(){return new Sl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(){this.changes=new Ql(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Gc(r.mutation,i,cr.empty(),jt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ge()){const i=No();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=vc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=No();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Qi();const o=qc(),a=function(){return qc()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof io)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Gc(u.mutation,c,u.mutation.getFieldMask(),jt.now())):o.set(c.key,cr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new F7(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=qc();let i=new Ot((o,a)=>o-a),s=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||cr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Ge()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=A2();u.forEach(d=>{if(!s.has(d)){const f=P2(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WB(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(No());let a=-1,l=s;return o.next(c=>F.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?F.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ge())).next(u=>({batchId:a,changes:I2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let i=vc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=vc();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(h,d){return new um(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Nn.newInvalidDocument(u)))});let a=vc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Gc(u.mutation,c,cr.empty(),jt.now()),fm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return F.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pi(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:x7(i.bundledQuery),readTime:pi(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(){this.overlays=new Ot(be.comparator),this.hr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=No();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=No(),s=n.length+1,o=new be(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ot((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=No(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=No(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return F.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new u7(n,r));let s=this.hr.get(n);s===void 0&&(s=Ge(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.Pr=new Sn(tn.Ir),this.Tr=new Sn(tn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new tn(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new tn(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new be(new Ct([])),r=new tn(n,e),i=new tn(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new be(new Ct([])),r=new tn(n,e),i=new tn(n,e+1);let s=Ge();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new tn(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return be.comparator(e.key,n.key)||it(e.pr,n.pr)}static Er(e,n){return it(e.pr,n.pr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Sn(tn.Ir)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new c7(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new tn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tn(n,0),i=new tn(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Sn(it);return n.forEach(i=>{const s=new tn(i,0),o=new tn(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),F.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;be.isDocumentKey(s)||(s=s.child(""));const o=new tn(new be(s),0);let a=new Sn(it);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),F.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){yt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return F.forEach(n.mutations,i=>{const s=new tn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new tn(n,0),i=this.wr.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.vr=e,this.docs=function(){return new Ot(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(n))}getEntries(e,n){let r=Qi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nn.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Qi();const o=n.path,a=new be(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||IB(SB(u),r)<=0||(i.has(u.key)||fm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ne()}Fr(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new j7(this)}getSize(e){return F.resolve(this.size)}}class j7 extends V7{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e){this.persistence=e,this.Mr=new Ql(n=>p0(n),m0),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Or=0,this.Nr=new b0,this.targetCount=0,this.Lr=Sl.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),F.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Sl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.qn(n),F.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e,n){this.Br={},this.overlays={},this.kr=new u0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new W7(this),this.indexManager=new D7,this.remoteDocumentCache=function(i){return new z7(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new P7(n),this.$r=new U7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new H7(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const i=new G7(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return F.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class G7 extends CB{constructor(e){super(),this.currentSequenceNumber=e}}class E0{constructor(e){this.persistence=e,this.zr=new b0,this.jr=null}static Hr(e){return new E0(e)}get Jr(){if(this.jr)return this.jr;throw Ne()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),F.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Jr,r=>{const i=be.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Ve.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return F.or([()=>F.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ge(),i=Ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new T0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return I4()?8:Oo.v(Wt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new K7;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(hc()<=qe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",Oa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),F.resolve()):(hc()<=qe.DEBUG&&ne("QueryEngine","Query:",Oa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(hc()<=qe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",Oa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fi(n))):F.resolve())}ji(e,n){if(iw(n))return F.resolve(null);let r=fi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=C_(n,null,"F"),r=fi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ge(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,C_(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return iw(n)||i.isEqual(Ve.min())?F.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?F.resolve(null):(hc()<=qe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oa(n)),this.es(e,o,n,wB(i,-1)).next(a=>a))})}Zi(e,n){let r=new Sn(w2(e));return n.forEach((i,s)=>{fm(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return hc()<=qe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",Oa(n)),this.zi.getDocumentsMatchingQuery(e,n,Gs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ot(it),this.rs=new Ql(s=>p0(s),m0),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B7(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Q7(t,e,n,r){return new J7(t,e,n,r)}async function W2(t,e){const n=Ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ge();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function X7(t,e){const n=Ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=F.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(m=>{const g=c.docVersions.get(p);yt(g!==null),m.version.compareTo(g)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ge();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function q2(t){const e=Ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Z7(t,e){const n=Ue(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Vn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let l=Qi(),c=Ge();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(e8(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(Ve.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function e8(t,e,n){let r=Ge(),i=Ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Qi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ne("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function t8(t,e){const n=Ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function n8(t,e){const n=Ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new ks(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function M_(t,e,n){const r=Ue(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Eh(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function mw(t,e,n){const r=Ue(t);let i=Ve.min(),s=Ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Ue(l),d=h.rs.get(u);return d!==void 0?F.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,fi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Ve.min(),n?s:Ge())).next(a=>(r8(r,GB(e),a),{documents:a,hs:s})))}function r8(t,e,n){let r=t.ss.get(e)||Ve.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class gw{constructor(){this.activeTargetIds=ZB()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i8{constructor(){this.no=new gw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new gw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud=null;function Ag(){return ud===null?ud=function(){return 268435456+Math.round(2147483648*Math.random())}():ud++,"0x"+ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class l8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=Ag(),l=this.bo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,i).then(u=>(ne("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw vl("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=o8[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=Ag();return new Promise((o,a)=>{const l=new dB;l.setWithCredentials(!0),l.listenOnce(uB.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Sg.NO_ERROR:const u=l.getResponseJson();ne(In,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Sg.TIMEOUT:ne(In,`RPC '${e}' ${s} timed out`),a(new fe(B.DEADLINE_EXCEEDED,"Request time out"));break;case Sg.HTTP_ERROR:const h=l.getStatus();if(ne(In,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(y)>=0?y:B.UNKNOWN}(f.status);a(new fe(p,f.message))}else a(new fe(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new fe(B.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ne(In,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ne(In,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=Ag(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lB(),a=cB(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ne(In,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new a8({lo:g=>{f?ne(In,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(d||(ne(In,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),ne(In,`RPC '${e}' stream ${i} sending:`,g),h.send(g))},ho:()=>h.close()}),m=(g,y,_)=>{g.listen(y,I=>{try{_(I)}catch(S){setTimeout(()=>{throw S},0)}})};return m(h,ad.EventType.OPEN,()=>{f||ne(In,`RPC '${e}' stream ${i} transport opened.`)}),m(h,ad.EventType.CLOSE,()=>{f||(f=!0,ne(In,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(h,ad.EventType.ERROR,g=>{f||(f=!0,vl(In,`RPC '${e}' stream ${i} transport errored:`,g),p.Vo(new fe(B.UNAVAILABLE,"The operation could not be completed")))}),m(h,ad.EventType.MESSAGE,g=>{var y;if(!f){const _=g.data[0];yt(!!_);const I=_,S=I.error||((y=I[0])===null||y===void 0?void 0:y.error);if(S){ne(In,`RPC '${e}' stream ${i} received error:`,S);const w=S.status;let A=function(O){const U=Vt[O];if(U!==void 0)return D2(U)}(w),L=S.message;A===void 0&&(A=B.INTERNAL,L="Unknown error status: "+w+" with message "+S.message),f=!0,p.Vo(new fe(A,L)),h.close()}else ne(In,`RPC '${e}' stream ${i} received:`,_),p.mo(_)}}),m(a,hB.STAT_EVENT,g=>{g.stat===GT.PROXY?ne(In,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===GT.NOPROXY&&ne(In,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function Cg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t){return new v7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ne("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new G2(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(bi(n.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new fe(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c8 extends K2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=T7(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ve.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?pi(o.readTime):Ve.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=N_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=A_(l)?{documents:I7(s,l)}:{query:A7(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=F2(s,o.resumeToken);const c=R_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ve.min())>0){a.readTime=Bf(s,o.snapshotVersion.toTimestamp());const c=R_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=R7(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=N_(this.serializer),n.removeTarget=e,this.t_(n)}}class u8 extends K2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(yt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=S7(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.T_(r,n)}return yt(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=N_(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>w7(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new fe(B.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,k_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(B.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,k_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(B.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class d8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(bi(n),this.g_=!1):ne("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{Ea(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ue(l);c.v_.add(4),await Sh(c),c.x_.set("Unknown"),c.v_.delete(4),await _m(c)}(this))})}),this.x_=new d8(r,i)}}async function _m(t){if(Ea(t))for(const e of t.F_)await e(!0)}async function Sh(t){for(const e of t.F_)await e(!1)}function Y2(t,e){const n=Ue(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),A0(n)?I0(n):Xl(n).Jo()&&S0(n,e))}function w0(t,e){const n=Ue(t),r=Xl(n);n.C_.delete(e),r.Jo()&&J2(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Ea(n)&&n.x_.set("Unknown"))}function S0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xl(t).c_(e)}function J2(t,e){t.O_.Oe(e),Xl(t).l_(e)}function I0(t){t.O_=new m7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Xl(t).start(),t.x_.p_()}function A0(t){return Ea(t)&&!Xl(t).Ho()&&t.C_.size>0}function Ea(t){return Ue(t).v_.size===0}function Q2(t){t.O_=void 0}async function p8(t){t.C_.forEach((e,n)=>{S0(t,e)})}async function m8(t,e){Q2(t),A0(t)?(t.x_.S_(e),I0(t)):t.x_.set("Unknown")}async function g8(t,e,n){if(t.x_.set("Online"),e instanceof V2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uf(t,r)}else if(e instanceof Hd?t.O_.$e(e):e instanceof L2?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ve.min()))try{const r=await q2(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(Vn.EMPTY_BYTE_STRING,u.snapshotVersion)),J2(s,l);const h=new ks(u.target,l,c,u.sequenceNumber);S0(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await Uf(t,r)}}async function Uf(t,e,n){if(!Eh(e))throw e;t.v_.add(1),await Sh(t),t.x_.set("Offline"),n||(n=()=>q2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await _m(t)})}function X2(t,e){return e().catch(n=>Uf(t,n,e))}async function vm(t){const e=Ue(t),n=Ys(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;y8(e);)try{const i=await t8(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,_8(e,i)}catch(i){await Uf(e,i)}Z2(e)&&eO(e)}function y8(t){return Ea(t)&&t.D_.length<10}function _8(t,e){t.D_.push(e);const n=Ys(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Z2(t){return Ea(t)&&!Ys(t).Ho()&&t.D_.length>0}function eO(t){Ys(t).start()}async function v8(t){Ys(t).d_()}async function b8(t){const e=Ys(t);for(const n of t.D_)e.I_(n.mutations)}async function E8(t,e,n){const r=t.D_.shift(),i=y0.from(r,e,n);await X2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vm(t)}async function T8(t,e){e&&Ys(t).P_&&await async function(r,i){if(function(o){return d7(o)&&o!==B.ABORTED}(i.code)){const s=r.D_.shift();Ys(r).Zo(),await X2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vm(r)}}(t,e),Z2(t)&&eO(t)}async function _w(t,e){const n=Ue(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Ea(n);n.v_.add(3),await Sh(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await _m(n)}async function w8(t,e){const n=Ue(t);e?(n.v_.delete(2),await _m(n)):e||(n.v_.add(2),await Sh(n),n.x_.set("Unknown"))}function Xl(t){return t.N_||(t.N_=function(n,r,i){const s=Ue(n);return s.R_(),new c8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:p8.bind(null,t),To:m8.bind(null,t),u_:g8.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),A0(t)?I0(t):t.x_.set("Unknown")):(await t.N_.stop(),Q2(t))})),t.N_}function Ys(t){return t.L_||(t.L_=function(n,r,i){const s=Ue(n);return s.R_(),new u8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:v8.bind(null,t),To:T8.bind(null,t),E_:b8.bind(null,t),T_:E8.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await vm(t)):(await t.L_.stop(),t.D_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new C0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R0(t,e){if(bi("AsyncQueue",`${e}: ${t}`),Eh(t))return new fe(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=vc(),this.sortedSet=new Ot(this.comparator)}static emptySet(e){return new il(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof il)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new il;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.B_=new Ot(be.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Ne():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Il{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Il(e,n,il.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class I8{constructor(){this.queries=new Ql(e=>T2(e),dm),this.onlineState="Unknown",this.W_=new Set}}async function k0(t,e){const n=Ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new S8,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=R0(o,`Initialization of query '${Oa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&N0(n)}async function O0(t,e){const n=Ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function A8(t,e){const n=Ue(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&N0(n)}function C8(t,e,n){const r=Ue(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function N0(t){t.W_.forEach(e=>{e.next()})}var P_,bw;(bw=P_||(P_={})).j_="default",bw.Cache="cache";class M0{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Il(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Il.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==P_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.key=e}}class nO{constructor(e){this.key=e}}class R8{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Ge(),this.mutatedKeys=Ge(),this.ha=w2(e),this.Pa=new il(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new vw,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=fm(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),g=!0):this.da(d,f)||(r.track({type:2,doc:f}),g=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),g=!0):d&&!f&&(r.track({type:1,doc:d}),g=!0,(l||c)&&(a=!0)),g&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(f,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return m(f)-m(p)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new Il(this.query,e.Pa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new vw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Ge(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new nO(r))}),this.la.forEach(r=>{e.has(r)||n.push(new tO(r))}),n}fa(e){this.ua=e.hs,this.la=Ge();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Il.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class k8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class O8{constructor(e){this.key=e,this.pa=!1}}class N8{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Ql(a=>T2(a),dm),this.Sa=new Map,this.ba=new Set,this.Da=new Ot(be.comparator),this.Ca=new Map,this.va=new b0,this.Fa={},this.Ma=new Map,this.xa=Sl.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function M8(t,e,n=!0){const r=lO(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await rO(r,e,n,!0),i}async function P8(t,e){const n=lO(t);await rO(n,e,!0,!1)}async function rO(t,e,n,r){const i=await n8(t.localStore,fi(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await x8(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Y2(t.remoteStore,i),a}async function x8(t,e,n,r,i){t.Na=(h,d,f)=>async function(m,g,y,_){let I=g.view.Ta(y);I.Xi&&(I=await mw(m.localStore,g.query,!1).then(({documents:L})=>g.view.Ta(L,I)));const S=_&&_.targetChanges.get(g.targetId),w=_&&_.targetMismatches.get(g.targetId)!=null,A=g.view.applyChanges(I,m.isPrimaryClient,S,w);return Tw(m,g.targetId,A.Va),A.snapshot}(t,h,d,f);const s=await mw(t.localStore,e,!0),o=new R8(e,s.hs),a=o.Ta(s.documents),l=wh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Tw(t,n,c.Va);const u=new k8(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function D8(t,e,n){const r=Ue(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!dm(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await M_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&w0(r.remoteStore,i.targetId),x_(r,i.targetId)}).catch(bh)):(x_(r,i.targetId),await M_(r.localStore,i.targetId,!0))}async function L8(t,e){const n=Ue(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),w0(n.remoteStore,r.targetId))}async function V8(t,e,n){const r=j8(t);try{const i=await function(o,a){const l=Ue(o),c=jt.now(),u=a.reduce((f,p)=>f.add(p.key),Ge());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Qi(),m=Ge();return l.os.getEntries(f,u).next(g=>{p=g,p.forEach((y,_)=>{_.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(g=>{h=g;const y=[];for(const _ of a){const I=a7(_,h.get(_.key).overlayedDocument);I!=null&&y.push(new io(_.key,I,m2(I.value.mapValue),pr.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:I2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new Ot(it)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ih(r,i.changes),await vm(r.remoteStore)}catch(i){const s=R0(i,"Failed to persist write");n.reject(s)}}async function iO(t,e){const n=Ue(t);try{const r=await Z7(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?yt(o.pa):i.removedDocuments.size>0&&(yt(o.pa),o.pa=!1))}),await Ih(n,r,e)}catch(r){await bh(r)}}function Ew(t,e,n){const r=Ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ue(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&N0(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function F8(t,e,n){const r=Ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Ot(be.comparator);o=o.insert(s,Nn.newNoDocument(s,Ve.min()));const a=Ge().add(s),l=new gm(Ve.min(),new Map,new Ot(it),o,a);await iO(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),P0(r)}else await M_(r.localStore,e,!1).then(()=>x_(r,e,n)).catch(bh)}async function B8(t,e){const n=Ue(t),r=e.batch.batchId;try{const i=await X7(n.localStore,e);oO(n,r,null),sO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ih(n,i)}catch(i){await bh(i)}}async function U8(t,e,n){const r=Ue(t);try{const i=await function(o,a){const l=Ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(yt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);oO(r,e,n),sO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ih(r,i)}catch(i){await bh(i)}}function sO(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function oO(t,e,n){const r=Ue(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function x_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||aO(t,r)})}function aO(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(w0(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),P0(t))}function Tw(t,e,n){for(const r of n)r instanceof tO?(t.va.addReference(r.key,e),$8(t,r)):r instanceof nO?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||aO(t,r.key)):Ne()}function $8(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.ba.add(r),P0(t))}function P0(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new be(Ct.fromString(e)),r=t.xa.next();t.Ca.set(r,new O8(n)),t.Da=t.Da.insert(n,r),Y2(t.remoteStore,new ks(fi(hm(n.path)),r,"TargetPurposeLimboResolution",u0._e))}}async function Ih(t,e,n){const r=Ue(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=T0.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,c){const u=Ue(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>F.forEach(c,d=>F.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>F.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Eh(h))throw h;ne("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(d,m)}}}(r.localStore,s))}async function H8(t,e){const n=Ue(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await W2(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new fe(B.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ih(n,r.us)}}function z8(t,e){const n=Ue(t),r=n.Ca.get(e);if(r&&r.pa)return Ge().add(r.key);{let i=Ge();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function lO(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F8.bind(null,e),e.ya.u_=A8.bind(null,e.eventManager),e.ya.La=C8.bind(null,e.eventManager),e}function j8(t){const e=Ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U8.bind(null,e),e}class ww{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ym(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Q7(this.persistence,new Y7,e.initialUser,this.serializer)}createPersistence(e){return new q7(E0.Hr,this.serializer)}createSharedClientState(e){return new i8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class W8{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ew(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=H8.bind(null,this.syncEngine),await w8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I8}()}createDatastore(e){const n=ym(e.databaseInfo.databaseId),r=function(s){return new l8(s)}(e.databaseInfo);return function(s,o,a,l){return new h8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new f8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ew(this.syncEngine,n,0),function(){return yw.D()?new yw:new s8}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new N8(i,s,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=Ue(r);ne("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Sh(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Rn.UNAUTHENTICATED,this.clientId=d2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ne("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ne("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new fe(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=R0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rg(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await W2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await K8(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_w(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>_w(e.remoteStore,i)),t._onlineComponents=e}function G8(t){return t.name==="FirebaseError"?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function K8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!G8(n))throw n;vl("Error using user provided cache. Falling back to memory cache: "+n),await Rg(t,new ww)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await Rg(t,new ww);return t._offlineComponents}async function cO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await Sw(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await Sw(t,new W8))),t._onlineComponents}function Y8(t){return cO(t).then(e=>e.syncEngine)}async function $f(t){const e=await cO(t),n=e.eventManager;return n.onListen=M8.bind(null,e.syncEngine),n.onUnlisten=D8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L8.bind(null,e.syncEngine),n}function J8(t,e,n={}){const r=new di;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new x0({next:d=>{o.enqueueAndForget(()=>O0(s,h));const f=d.docs.has(a);!f&&d.fromCache?c.reject(new fe(B.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?c.reject(new fe(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new M0(hm(a.path),u,{includeMetadataChanges:!0,ta:!0});return k0(s,h)}(await $f(t),t.asyncQueue,e,n,r)),r.promise}function Q8(t,e,n={}){const r=new di;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new x0({next:d=>{o.enqueueAndForget(()=>O0(s,h)),d.fromCache&&l.source==="server"?c.reject(new fe(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new M0(a,u,{includeMetadataChanges:!0,ta:!0});return k0(s,h)}(await $f(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t,e,n){if(!n)throw new fe(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X8(t,e,n,r){if(e===!0&&r===!0)throw new fe(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Aw(t){if(!be.isDocumentKey(t))throw new fe(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cw(t){if(be.isDocumentKey(t))throw new fe(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function D0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne()}function mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=D0(t);throw new fe(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new fe(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new fe(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pB;switch(r.type){case"firstParty":return new _B(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Iw.get(n);r&&(ne("ComponentProvider","Removing Datastore"),Iw.delete(n),r.terminate())}(this),Promise.resolve()}}function Z8(t,e,n,r={}){var i;const s=(t=mr(t,bm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Rn.MOCK_USER;else{a=E4(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new fe(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Rn(c)}t._authCredentials=new mB(new h2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ah(this.firestore,e,this._query)}}class zn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class Bs extends Ah{constructor(e,n,r){super(e,n,hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new be(e))}withConverter(e){return new Bs(this.firestore,e,this._path)}}function zi(t,e,...n){if(t=ln(t),hO("collection","path",e),t instanceof bm){const r=Ct.fromString(e,...n);return Cw(r),new Bs(t,null,r)}{if(!(t instanceof zn||t instanceof Bs))throw new fe(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ct.fromString(e,...n));return Cw(r),new Bs(t.firestore,null,r)}}function gt(t,e,...n){if(t=ln(t),arguments.length===1&&(e=d2.newId()),hO("doc","path",e),t instanceof bm){const r=Ct.fromString(e,...n);return Aw(r),new zn(t,null,new be(r))}{if(!(t instanceof zn||t instanceof Bs))throw new fe(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ct.fromString(e,...n));return Aw(r),new zn(t.firestore,t instanceof Bs?t.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new G2(this,"async_queue_retry"),this.cu=()=>{const n=Cg();n&&ne("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Cg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=Cg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new di;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Eh(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw bi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=C0.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&Ne()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function kw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Js extends bm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new eU}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dO(this),this._firestoreClient.terminate()}}function tU(t,e){const n=typeof t=="object"?t:pC(),r=typeof t=="string"?t:e||"(default)",i=dC(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=v4("firestore");s&&Z8(i,...s)}return i}function Ch(t){return t._firestoreClient||dO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function dO(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new MB(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,uO(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new q8(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Al(Vn.fromBase64String(e))}catch(n){throw new fe(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Al(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=/^__.*__$/;class rU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new io(e,this.data,this.fieldMask,n,this.fieldTransforms):new Th(e,this.data,n,this.fieldTransforms)}}class fO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new io(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class wm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new wm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Hf(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(pO(this.Vu)&&nU.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class iU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ym(e)}Cu(e,n,r,i=!1){return new wm({Vu:e,methodName:n,Du:r,path:Tn.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function L0(t){const e=t._freezeSettings(),n=ym(t._databaseId);return new iU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mO(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);F0("Data must be an object, but it was:",o,r);const a=_O(r,o);let l,c;if(s.merge)l=new cr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=D_(e,h,n);if(!o.contains(d))throw new fe(B.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);bO(u,d)||u.push(d)}l=new cr(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new rU(new Jn(a),l,c)}class Sm extends Em{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sm}}function sU(t,e,n){return new wm({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class V0 extends Em{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=sU(this,e,!0),r=this.vu.map(s=>kh(s,n)),i=new wl(r);return new r7(e.path,i)}isEqual(e){return e instanceof V0&&mu(this.vu,e.vu)}}function gO(t,e,n,r){const i=t.Cu(1,e,n);F0("Data must be an object, but it was:",i,r);const s=[],o=Jn.empty();ba(r,(l,c)=>{const u=B0(e,l,n);c=ln(c);const h=i.yu(u);if(c instanceof Sm)s.push(u);else{const d=kh(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new cr(s);return new fO(o,a,i.fieldTransforms)}function yO(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[D_(e,r,n)],l=[i];if(s.length%2!=0)throw new fe(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(D_(e,s[d])),l.push(s[d+1]);const c=[],u=Jn.empty();for(let d=a.length-1;d>=0;--d)if(!bO(c,a[d])){const f=a[d];let p=l[d];p=ln(p);const m=o.yu(f);if(p instanceof Sm)c.push(f);else{const g=kh(p,m);g!=null&&(c.push(f),u.set(f,g))}}const h=new cr(c);return new fO(u,h,o.fieldTransforms)}function kh(t,e){if(vO(t=ln(t)))return F0("Unsupported field value:",e,t),_O(t,e);if(t instanceof Em)return function(r,i){if(!pO(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=kh(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return e7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=jt.fromDate(r);return{timestampValue:Bf(i.serializer,s)}}if(r instanceof jt){const s=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bf(i.serializer,s)}}if(r instanceof Tm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Al)return{bytesValue:F2(i.serializer,r._byteString)};if(r instanceof zn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:v0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${D0(r)}`)}(t,e)}function _O(t,e){const n={};return f2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(t,(r,i)=>{const s=kh(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function vO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof Tm||t instanceof Al||t instanceof zn||t instanceof Em)}function F0(t,e,n){if(!vO(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=D0(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function D_(t,e,n){if((e=ln(e))instanceof Rh)return e._internalPath;if(typeof e=="string")return B0(t,e);throw Hf("Field path arguments must be of type string or ",t,!1,void 0,n)}const oU=new RegExp("[~\\*/\\[\\]]");function B0(t,e,n){if(e.search(oU)>=0)throw Hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rh(...e.split("."))._internalPath}catch{throw Hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new fe(B.INVALID_ARGUMENT,a+t+l)}function bO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(TO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aU extends EO{data(){return super.data()}}function TO(t,e){return typeof e=="string"?B0(t,e):e instanceof Rh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lU{convertValue(e,n="none"){switch(sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ba(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Tm(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=d0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){const n=Ks(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ct.fromString(e);yt(j2(r));const i=new Ou(r.get(1),r.get(3)),s=new be(r.popFirst(5));return i.isEqual(n)||bi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class IO extends EO{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(TO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zd extends IO{data(e={}){return super.data(e)}}class AO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ec(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zd(this._firestore,this._userDataWriter,r.key,r,new Ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new zd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ec(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new zd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ec(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:cU(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){t=mr(t,zn);const e=mr(t.firestore,Js);return J8(Ch(e),t._key).then(n=>CO(e,t,n))}class U0 extends lU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Al(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,n)}}function L_(t){t=mr(t,Ah);const e=mr(t.firestore,Js),n=Ch(e),r=new U0(e);return wO(t._query),Q8(n,t._query).then(i=>new AO(e,r,t,i))}function Ow(t,e,n){t=mr(t,zn);const r=mr(t.firestore,Js),i=SO(t.converter,e,n);return H0(r,[mO(L0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,pr.none())])}function zf(t,e,n,...r){t=mr(t,zn);const i=mr(t.firestore,Js),s=L0(i);let o;return o=typeof(e=ln(e))=="string"||e instanceof Rh?yO(s,"updateDoc",t._key,e,n,r):gO(s,"updateDoc",t._key,e),H0(i,[o.toMutation(t._key,pr.exists(!0))])}function $0(t,...e){var n,r,i;t=ln(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||kw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(kw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof zn)c=mr(t.firestore,Js),u=hm(t._key.path),l={next:h=>{e[o]&&e[o](CO(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=mr(t,Ah);c=mr(h.firestore,Js),u=h._query;const d=new U0(c);l={next:f=>{e[o]&&e[o](new AO(c,d,h,f))},error:e[o+1],complete:e[o+2]},wO(t._query)}return function(d,f,p,m){const g=new x0(m),y=new M0(f,g,p);return d.asyncQueue.enqueueAndForget(async()=>k0(await $f(d),y)),()=>{g.Qa(),d.asyncQueue.enqueueAndForget(async()=>O0(await $f(d),y))}}(Ch(c),u,a,l)}function H0(t,e){return function(r,i){const s=new di;return r.asyncQueue.enqueueAndForget(async()=>V8(await Y8(r),i,s)),s.promise}(Ch(t),e)}function CO(t,e,n){const r=n.docs.get(e._key),i=new U0(t);return new IO(t,i,e._key,r,new Ec(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=L0(e)}set(e,n,r){this._verifyNotCommitted();const i=kg(e,this._firestore),s=SO(i.converter,n,r),o=mO(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,pr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=kg(e,this._firestore);let o;return o=typeof(n=ln(n))=="string"||n instanceof Rh?yO(this._dataReader,"WriteBatch.update",s._key,n,r,i):gO(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=kg(e,this._firestore);return this._mutations=this._mutations.concat(new g0(n._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kg(t,e){if((t=ln(t)).firestore!==e)throw new fe(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function hU(...t){return new V0("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){return Ch(t=mr(t,Js)),new uU(t,e=>H0(t,e))}(function(e,n=!0){(function(i){Jl=i})(to),_i(new Wr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Js(new gB(r.getProvider("auth-internal")),new bB(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new fe(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ou(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),dr(KT,"4.6.0",e),dr(KT,"4.6.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="firebasestorage.googleapis.com",dU="storageBucket",fU=2*60*1e3,pU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends ki{constructor(e,n,r=0){super(Og(e),`Firebase Storage: ${n} (${Og(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Oi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Og(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Si;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Si||(Si={}));function Og(t){return"storage/"+t}function mU(){const t="An unknown error occurred, please check the error payload for server response.";return new Oi(Si.UNKNOWN,t)}function gU(){return new Oi(Si.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yU(){return new Oi(Si.CANCELED,"User canceled the upload/download.")}function _U(t){return new Oi(Si.INVALID_URL,"Invalid URL '"+t+"'.")}function vU(t){return new Oi(Si.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Nw(t){return new Oi(Si.INVALID_ARGUMENT,t)}function kO(){return new Oi(Si.APP_DELETED,"The Firebase app was deleted.")}function bU(t){return new Oi(Si.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ur.makeFromUrl(e,n)}catch{return new Ur(e,"")}if(r.path==="")return r;throw vU(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===RO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),I=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<I.length;S++){const w=I[S],A=w.regex.exec(e);if(A){const L=A[w.indices.bucket];let N=A[w.indices.path];N||(N=""),r=new Ur(L,N),w.postModify(r);break}}if(r==null)throw _U(e);return r}}class EU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function h(g){i=setTimeout(()=>{i=null,t(f,l())},g)}function d(){s&&clearTimeout(s)}function f(g,...y){if(c){d();return}if(g){d(),u.call(null,g,...y);return}if(l()||o){d(),u.call(null,g,...y);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let p=!1;function m(g){p||(p=!0,d(),!c&&(i!==null?(g||(a=2),clearTimeout(i),h(0)):g||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function wU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(t){return t!==void 0}function Mw(t,e,n,r){if(r<e)throw Nw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Nw(`Invalid value for '${t}'. Expected ${n} or less.`)}function IU(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(jf||(jf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e,n,r,i,s,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new hd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===jf.NO_ERROR,l=s.getStatus();if(!a||AU(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===jf.ABORT;r(!1,new hd(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new hd(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());SU(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=mU();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?kO():yU();o(l)}else{const l=gU();o(l)}};this.canceled_?n(!1,new hd(!1,null,!0)):this.backoffId_=TU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&wU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function RU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function kU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function MU(t,e,n,r,i,s,o=!0){const a=IU(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return OU(c,e),RU(c,n),kU(c,s),NU(c,r),new CU(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function xU(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this._service=e,n instanceof Ur?this._location=n:this._location=Ur.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Wf(e,n)}get root(){const e=new Ur(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xU(this._location.path)}get storage(){return this._service}get parent(){const e=PU(this._location.path);if(e===null)return null;const n=new Ur(this._location.bucket,e);return new Wf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw bU(e)}}function Pw(t,e){const n=e==null?void 0:e[dU];return n==null?null:Ur.makeFromBucketSpec(n,t)}class DU{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=RO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fU,this._maxUploadRetryTime=pU,this._requests=new Set,i!=null?this._bucket=Ur.makeFromBucketSpec(i,this._host):this._bucket=Pw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ur.makeFromBucketSpec(this._url,e):this._bucket=Pw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Mw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Mw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wf(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new EU(kO());{const o=MU(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const xw="@firebase/storage",Dw="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU="storage";function VU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new DU(n,r,i,e,to)}function FU(){_i(new Wr(LU,VU,"PUBLIC").setMultipleInstances(!0)),dr(xw,Dw,""),dr(xw,Dw,"esm2017")}FU();const Ng=new WeakMap;function OO(t,e){return Ng.has(e)||Ng.set(e,t||{f:{},r:{},s:{},u:{}}),Ng.get(e)}function BU(t,e,n,r){if(!t)return n;const[i,s]=NO(t);if(!i)return n;const o=OO(void 0,r)[i]||{},a=e||s;return a&&a in o?o[a]:n}function UU(t,e,n,r){if(!t)return;const[i,s]=NO(t);if(!i)return;const o=OO(void 0,r)[i],a=e||s;if(a)return n.then(l=>{o[a]=l}).catch(ri),a}function NO(t){return pV(t)||mV(t)?["f",t.path]:gV(t)?["r",t.toString()]:yV(t)?["s",t.toString()]:[]}const Mg=new WeakMap;function $U(t,e,n){const r=$p();Mg.has(r)||Mg.set(r,new Map);const i=Mg.get(r),s=UU(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):ri}const HU={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function V_(t,e,n,r){if(!dV(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((a,l)=>{const c=n[l];return a[c.path]=c.data(),a},{});function o(a,l,c,u){l=l||{};const[h,d]=u;Object.getOwnPropertyNames(a).forEach(f=>{const p=Object.getOwnPropertyDescriptor(a,f);p&&!p.enumerable&&Object.defineProperty(h,f,p)});for(const f in a){const p=a[f];if(p==null||p instanceof Date||p instanceof jt||p instanceof Tm)h[f]=p;else if(y1(p)){const m=c+f;h[f]=m in n?l[f]:p.path,d[m]=p.converter?p:p.withConverter(r.converter)}else if(Array.isArray(p)){h[f]=Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];g&&g.path in s&&(h[f][m]=s[g.path])}o(p,l[f]||h[f],c+f+".",[h[f],d])}else ga(p)?(h[f]={},o(p,l[f],c+f+".",[h[f],d])):h[f]=p}}return o(t,e,"",i),i}const z0={reset:!1,wait:!0,maxRefDepth:2,converter:HU,snapshotOptions:{serverTimestamps:"estimate"}};function qf(t){for(const e in t)t[e].unsub()}function F_(t,e,n,r,i,s,o,a,l){const[c,u]=V_(r.data(t.snapshotOptions),g1(e,n),i,t);s.set(e,n,c),B_(t,e,n,i,u,s,o,a,l)}function zU({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},a){const l=Object.create(null);let c=ri;return a.once?wi(t).then(u=>{u.exists()?F_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())}).catch(s):c=$0(t,u=>{u.exists()?F_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())},s),()=>{c(),qf(l)}}function B_(t,e,n,r,i,s,o,a,l){const c=Object.keys(i);if(Object.keys(r).filter(m=>c.indexOf(m)<0).forEach(m=>{r[m].unsub(),delete r[m]}),!c.length||++o>t.maxRefDepth)return a(n);let h=0;const d=c.length,f=Object.create(null);function p(m){m in f&&++h>=d&&a(n)}c.forEach(m=>{const g=r[m],y=i[m],_=`${n}.${m}`;if(f[_]=!0,g)if(g.path!==y.path)g.unsub();else return;r[m]={data:()=>g1(e,_),unsub:zU({ref:y,target:e,path:_,depth:o,ops:s,resolve:p.bind(null,_),reject:l},t),path:y.path}})}function jU(t,e,n,r,i,s){const o=Object.assign({},z0,s),{snapshotListenOptions:a,snapshotOptions:l,wait:c,once:u}=o,h="value";let d=me(c?[]:t.value);c||n.set(t,h,[]);const f=r;let p,m=ri;const g=[],y={added:({newIndex:I,doc:S})=>{g.splice(I,0,Object.create(null));const w=g[I],[A,L]=V_(S.data(l),void 0,w,o);n.add(Pi(d),I,A),B_(o,d,`${h}.${I}`,w,L,n,0,r.bind(null,S),i)},modified:({oldIndex:I,newIndex:S,doc:w})=>{const A=Pi(d),L=g[I],N=A[I],[O,U]=V_(w.data(l),N,L,o);g.splice(S,0,L),n.remove(A,I),n.add(A,S,O),B_(o,d,`${h}.${S}`,L,U,n,0,r,i)},removed:({oldIndex:I})=>{const S=Pi(d);n.remove(S,I),qf(g.splice(I,1)[0])}};function _(I){const S=I.docChanges(a);if(!p&&S.length){p=!0;let w=0;const A=S.length,L=Object.create(null);for(let N=0;N<A;N++)L[S[N].doc.id]=!0;r=N=>{N&&N.id in L&&++w>=A&&(c&&(n.set(t,h,Pi(d)),d=t),f(Pi(d)),r=ri)}}S.forEach(w=>{y[w.type](w)}),S.length||(c&&(n.set(t,h,Pi(d)),d=t),r(Pi(d)))}return u?L_(e).then(_).catch(i):m=$0(e,_,i),I=>{if(m(),I){const S=typeof I=="function"?I():[];n.set(t,h,S)}g.forEach(qf)}}function WU(t,e,n,r,i,s){const o=Object.assign({},z0,s),a="value",l=Object.create(null);r=_V(r,()=>g1(t,a));let c=ri;function u(h){h.exists()?F_(o,t,a,h,l,n,0,r,i):(n.set(t,a,null),r(null))}return o.once?wi(e).then(u).catch(i):c=$0(e,u,i),h=>{if(c(),h){const d=typeof h=="function"?h():null;n.set(t,a,d)}qf(l)}}const Lw=Symbol();function MO(t,e){let n=ri;const r=Object.assign({},z0,e),i=Pi(t),s=r.target||me();bV()&&(r.once=!0);const o=BU(i,r.ssrKey,Lw,$p()),a=o!==Lw;a&&(s.value=o);let l=!a;const c=me(!1),u=me(),h=EA(),d=xv();let f=ri;function p(){let y=Pi(t);const _=new Promise((I,S)=>{if(n(r.reset),!y)return n=ri,I(null);c.value=l,l=!0,y.converter||(y=y.withConverter(r.converter)),n=(y1(y)?WU:jU)(s,y,qU,I,S,r)}).catch(I=>(h.value===_&&(u.value=I),Promise.reject(I))).finally(()=>{h.value===_&&(c.value=!1)});h.value=_}let m=ri;(an(t)||typeof t=="function")&&(m=Wi(t,p)),p(),i&&(f=$U(h.value,i,r.ssrKey)),ma()&&VA(()=>h.value),d&&oA(g);function g(y=r.reset){m(),f(),n(y)}return Object.defineProperties(s,{error:{get:()=>u},data:{get:()=>s},pending:{get:()=>c},promise:{get:()=>h},stop:{get:()=>g}})}const qU={set:(t,e,n)=>uV(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function Pu(t,e){return MO(t,{target:me([]),...e})}function Im(t,e){return MO(t,e)}function GU(t){return KU({initialUser:t,dependencies:{popupRedirectResolver:N6,persistence:[HL,OL,FC]}})}const PO=Symbol("VueFireAuth");function KU({dependencies:t,initialUser:e}){return(n,r)=>{const[i,s]=YU(n,r,e,t);wV(i,s)}}function YU(t,e,n,r,i=vL(t,r)){const s=EV(t,e).run(()=>me(n));return YC.set(t,s),e.provide(PO,i),[s,i]}function JU(t){return cV?Qn(PO):null}function QU(t,{firebaseApp:e,modules:n=[]}){t.provide(KC,e);for(const r of n)r(e,t)}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Pa=typeof document<"u";function XU(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const at=Object.assign;function Pg(t,e){const n={};for(const r in e){const i=e[r];n[r]=Kr(i)?i.map(t):t(i)}return n}const Kc=()=>{},Kr=Array.isArray,xO=/#/g,ZU=/&/g,e$=/\//g,t$=/=/g,n$=/\?/g,DO=/\+/g,r$=/%5B/g,i$=/%5D/g,LO=/%5E/g,s$=/%60/g,VO=/%7B/g,o$=/%7C/g,FO=/%7D/g,a$=/%20/g;function j0(t){return encodeURI(""+t).replace(o$,"|").replace(r$,"[").replace(i$,"]")}function l$(t){return j0(t).replace(VO,"{").replace(FO,"}").replace(LO,"^")}function U_(t){return j0(t).replace(DO,"%2B").replace(a$,"+").replace(xO,"%23").replace(ZU,"%26").replace(s$,"`").replace(VO,"{").replace(FO,"}").replace(LO,"^")}function c$(t){return U_(t).replace(t$,"%3D")}function u$(t){return j0(t).replace(xO,"%23").replace(n$,"%3F")}function h$(t){return t==null?"":u$(t).replace(e$,"%2F")}function xu(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const d$=/\/$/,f$=t=>t.replace(d$,"");function xg(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=y$(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:xu(o)}}function p$(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Vw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function m$(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Cl(e.matched[r],n.matched[i])&&BO(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Cl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function BO(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!g$(t[n],e[n]))return!1;return!0}function g$(t,e){return Kr(t)?Fw(t,e):Kr(e)?Fw(e,t):t===e}function Fw(t,e){return Kr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function y$(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}var Du;(function(t){t.pop="pop",t.push="push"})(Du||(Du={}));var Yc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Yc||(Yc={}));function _$(t){if(!t)if(Pa){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),f$(t)}const v$=/^[^#]+#/;function b$(t,e){return t.replace(v$,"#")+e}function E$(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Am=()=>({left:window.scrollX,top:window.scrollY});function T$(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=E$(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Bw(t,e){return(history.state?history.state.position-e:-1)+t}const $_=new Map;function w$(t,e){$_.set(t,e)}function S$(t){const e=$_.get(t);return $_.delete(t),e}let I$=()=>location.protocol+"//"+location.host;function UO(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Vw(l,"")}return Vw(n,t)+r+i}function A$(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=UO(t,location),p=n.value,m=e.value;let g=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}g=m?d.position-m.position:0}else r(f);i.forEach(y=>{y(n.value,p,{delta:g,type:Du.pop,direction:g?g>0?Yc.forward:Yc.back:Yc.unknown})})};function l(){o=n.value}function c(d){i.push(d);const f=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(at({},d.state,{scroll:Am()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Uw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Am():null}}function C$(t){const{history:e,location:n}=window,r={value:UO(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:I$()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=at({},e.state,Uw(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=at({},i.value,e.state,{forward:l,scroll:Am()});s(u.current,u,!0);const h=at({},Uw(r.value,l,null),{position:u.position+1},c);s(l,h,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function R$(t){t=_$(t);const e=C$(t),n=A$(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=at({location:"",base:t,go:r,createHref:b$.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function k$(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),R$(t)}function O$(t){return typeof t=="string"||t&&typeof t=="object"}function $O(t){return typeof t=="string"||typeof t=="symbol"}const ds={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},HO=Symbol("");var $w;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})($w||($w={}));function Rl(t,e){return at(new Error,{type:t,[HO]:!0},e)}function Ni(t,e){return t instanceof Error&&HO in t&&(e==null||!!(t.type&e))}const Hw="[^/]+?",N$={sensitive:!1,strict:!1,start:!0,end:!0},M$=/[.+*?^${}()[\]/\\]/g;function P$(t,e){const n=at({},N$,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(M$,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:g,regexp:y}=d;s.push({name:p,repeatable:m,optional:g});const _=y||Hw;if(_!==Hw){f+=10;try{new RegExp(`(${_})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+S.message)}}let I=m?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;h||(I=g&&c.length<2?`(?:/${I})`:"/"+I),g&&(I+="?"),i+=I,f+=20,g&&(f+=-8),m&&(f+=-20),_===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=s[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:g}=f,y=p in c?c[p]:"";if(Kr(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=Kr(y)?y.join("/"):y;if(!_)if(g)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=_}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function x$(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function D$(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=x$(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(zw(r))return 1;if(zw(i))return-1}return i.length-r.length}function zw(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const L$={type:0,value:""},V$=/[a-zA-Z0-9_]/;function F$(t){if(!t)return[[]];if(t==="/")return[[L$]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:V$.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}function B$(t,e,n){const r=P$(F$(t.path),n),i=at(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function U$(t,e){const n=[],r=new Map;e=qw({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,h,d){const f=!d,p=$$(u);p.aliasOf=d&&d.record;const m=qw(e,u),g=[p];if("alias"in u){const I=typeof u.alias=="string"?[u.alias]:u.alias;for(const S of I)g.push(at({},p,{components:d?d.record.components:p.components,path:S,aliasOf:d?d.record:p}))}let y,_;for(const I of g){const{path:S}=I;if(h&&S[0]!=="/"){const w=h.record.path,A=w[w.length-1]==="/"?"":"/";I.path=h.record.path+(S&&A+S)}if(y=B$(I,h,m),d?d.alias.push(y):(_=_||y,_!==y&&_.alias.push(y),f&&u.name&&!Ww(y)&&o(u.name)),p.children){const w=p.children;for(let A=0;A<w.length;A++)s(w[A],y,d&&d.children[A])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return _?()=>{o(_)}:Kc}function o(u){if($O(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&D$(u,n[h])>=0&&(u.record.path!==n[h].record.path||!zO(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Ww(u)&&r.set(u.record.name,u)}function c(u,h){let d,f={},p,m;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Rl(1,{location:u});m=d.record.name,f=at(jw(h.params,d.keys.filter(_=>!_.optional).concat(d.parent?d.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),u.params&&jw(u.params,d.keys.map(_=>_.name))),p=d.stringify(f)}else if(u.path!=null)p=u.path,d=n.find(_=>_.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=h.name?r.get(h.name):n.find(_=>_.re.test(h.path)),!d)throw Rl(1,{location:u,currentLocation:h});m=d.record.name,f=at({},h.params,u.params),p=d.stringify(f)}const g=[];let y=d;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:p,params:f,matched:g,meta:z$(g)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function jw(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function $$(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:H$(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function H$(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Ww(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function z$(t){return t.reduce((e,n)=>at(e,n.meta),{})}function qw(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function zO(t,e){return e.children.some(n=>n===t||zO(t,n))}function j$(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(DO," "),o=s.indexOf("="),a=xu(o<0?s:s.slice(0,o)),l=o<0?null:xu(s.slice(o+1));if(a in e){let c=e[a];Kr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Gw(t){let e="";for(let n in t){const r=t[n];if(n=c$(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Kr(r)?r.map(s=>s&&U_(s)):[r&&U_(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function W$(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Kr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const q$=Symbol(""),Kw=Symbol(""),Cm=Symbol(""),W0=Symbol(""),H_=Symbol("");function dc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function bs(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Rl(4,{from:n,to:e})):d instanceof Error?l(d):O$(d)?l(Rl(2,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=s(()=>t.call(r&&r.instances[i],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function Dg(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(G$(l)){const u=(l.__vccOpts||l)[e];u&&s.push(bs(u,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=XU(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&bs(f,n,r,o,a,i)()}))}}return s}function G$(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Yw(t){const e=Qn(Cm),n=Qn(W0),r=kt(()=>e.resolve(ue(t.to))),i=kt(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Cl.bind(null,u));if(d>-1)return d;const f=Jw(l[c-2]);return c>1&&Jw(u)===f&&h[h.length-1].path!==f?h.findIndex(Cl.bind(null,l[c-2])):d}),s=kt(()=>i.value>-1&&Q$(n.params,r.value.params)),o=kt(()=>i.value>-1&&i.value===n.matched.length-1&&BO(n.params,r.value.params));function a(l={}){return J$(l)?e[ue(t.replace)?"replace":"push"](ue(t.to)).catch(Kc):Promise.resolve()}return{route:r,href:kt(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const K$=hn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Yw,setup(t,{slots:e}){const n=Xu(Yw(t)),{options:r}=Qn(Cm),i=kt(()=>({[Qw(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qw(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Uo("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Y$=K$;function J$(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Q$(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Kr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Jw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qw=(t,e,n)=>t??e??n,X$=hn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Qn(H_),i=kt(()=>t.route||r.value),s=Qn(Kw,0),o=kt(()=>{let c=ue(s);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=kt(()=>i.value.matched[o.value]);Nd(Kw,kt(()=>o.value+1)),Nd(q$,a),Nd(H_,i);const l=me();return Wi(()=>[l.value,a.value,t.name],([c,u,h],[d,f,p])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Cl(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Xw(n.default,{Component:d,route:c});const f=h.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,g=Uo(d,at({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Xw(n.default,{Component:g,route:c})||g}}});function Xw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Z$=X$;function eH(t){const e=U$(t.routes,t),n=t.parseQuery||j$,r=t.stringifyQuery||Gw,i=t.history,s=dc(),o=dc(),a=dc(),l=EA(ds);let c=ds;Pa&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Pg.bind(null,R=>""+R),h=Pg.bind(null,h$),d=Pg.bind(null,xu);function f(R,M){let P,q;return $O(R)?(P=e.getRecordMatcher(R),q=M):q=R,e.addRoute(q,P)}function p(R){const M=e.getRecordMatcher(R);M&&e.removeRoute(M)}function m(){return e.getRoutes().map(R=>R.record)}function g(R){return!!e.getRecordMatcher(R)}function y(R,M){if(M=at({},M||l.value),typeof R=="string"){const T=xg(n,R,M.path),k=e.resolve({path:T.path},M),D=i.createHref(T.fullPath);return at(T,k,{params:d(k.params),hash:xu(T.hash),redirectedFrom:void 0,href:D})}let P;if(R.path!=null)P=at({},R,{path:xg(n,R.path,M.path).path});else{const T=at({},R.params);for(const k in T)T[k]==null&&delete T[k];P=at({},R,{params:h(T)}),M.params=h(M.params)}const q=e.resolve(P,M),_e=R.hash||"";q.params=u(d(q.params));const Me=p$(r,at({},R,{hash:l$(_e),path:q.path})),v=i.createHref(Me);return at({fullPath:Me,hash:_e,query:r===Gw?W$(R.query):R.query||{}},q,{redirectedFrom:void 0,href:v})}function _(R){return typeof R=="string"?xg(n,R,l.value.path):at({},R)}function I(R,M){if(c!==R)return Rl(8,{from:M,to:R})}function S(R){return L(R)}function w(R){return S(at(_(R),{replace:!0}))}function A(R){const M=R.matched[R.matched.length-1];if(M&&M.redirect){const{redirect:P}=M;let q=typeof P=="function"?P(R):P;return typeof q=="string"&&(q=q.includes("?")||q.includes("#")?q=_(q):{path:q},q.params={}),at({query:R.query,hash:R.hash,params:q.path!=null?{}:R.params},q)}}function L(R,M){const P=c=y(R),q=l.value,_e=R.state,Me=R.force,v=R.replace===!0,T=A(P);if(T)return L(at(_(T),{state:typeof T=="object"?at({},_e,T.state):_e,force:Me,replace:v}),M||P);const k=P;k.redirectedFrom=M;let D;return!Me&&m$(r,q,P)&&(D=Rl(16,{to:k,from:q}),Re(q,q,!0,!1)),(D?Promise.resolve(D):U(k,q)).catch(x=>Ni(x)?Ni(x,2)?x:pe(x):V(x,k,q)).then(x=>{if(x){if(Ni(x,2))return L(at({replace:v},_(x.to),{state:typeof x.to=="object"?at({},_e,x.to.state):_e,force:Me}),M||k)}else x=j(k,q,!0,v,_e);return K(k,q,x),x})}function N(R,M){const P=I(R,M);return P?Promise.reject(P):Promise.resolve()}function O(R){const M=pt.values().next().value;return M&&typeof M.runWithContext=="function"?M.runWithContext(R):R()}function U(R,M){let P;const[q,_e,Me]=tH(R,M);P=Dg(q.reverse(),"beforeRouteLeave",R,M);for(const T of q)T.leaveGuards.forEach(k=>{P.push(bs(k,R,M))});const v=N.bind(null,R,M);return P.push(v),ct(P).then(()=>{P=[];for(const T of s.list())P.push(bs(T,R,M));return P.push(v),ct(P)}).then(()=>{P=Dg(_e,"beforeRouteUpdate",R,M);for(const T of _e)T.updateGuards.forEach(k=>{P.push(bs(k,R,M))});return P.push(v),ct(P)}).then(()=>{P=[];for(const T of Me)if(T.beforeEnter)if(Kr(T.beforeEnter))for(const k of T.beforeEnter)P.push(bs(k,R,M));else P.push(bs(T.beforeEnter,R,M));return P.push(v),ct(P)}).then(()=>(R.matched.forEach(T=>T.enterCallbacks={}),P=Dg(Me,"beforeRouteEnter",R,M,O),P.push(v),ct(P))).then(()=>{P=[];for(const T of o.list())P.push(bs(T,R,M));return P.push(v),ct(P)}).catch(T=>Ni(T,8)?T:Promise.reject(T))}function K(R,M,P){a.list().forEach(q=>O(()=>q(R,M,P)))}function j(R,M,P,q,_e){const Me=I(R,M);if(Me)return Me;const v=M===ds,T=Pa?history.state:{};P&&(q||v?i.replace(R.fullPath,at({scroll:v&&T&&T.scroll},_e)):i.push(R.fullPath,_e)),l.value=R,Re(R,M,P,v),pe()}let le;function J(){le||(le=i.listen((R,M,P)=>{if(!Nt.listening)return;const q=y(R),_e=A(q);if(_e){L(at(_e,{replace:!0}),q).catch(Kc);return}c=q;const Me=l.value;Pa&&w$(Bw(Me.fullPath,P.delta),Am()),U(q,Me).catch(v=>Ni(v,12)?v:Ni(v,2)?(L(v.to,q).then(T=>{Ni(T,20)&&!P.delta&&P.type===Du.pop&&i.go(-1,!1)}).catch(Kc),Promise.reject()):(P.delta&&i.go(-P.delta,!1),V(v,q,Me))).then(v=>{v=v||j(q,Me,!1),v&&(P.delta&&!Ni(v,8)?i.go(-P.delta,!1):P.type===Du.pop&&Ni(v,20)&&i.go(-1,!1)),K(q,Me,v)}).catch(Kc)}))}let H=dc(),C=dc(),$;function V(R,M,P){pe(R);const q=C.list();return q.length?q.forEach(_e=>_e(R,M,P)):console.error(R),Promise.reject(R)}function oe(){return $&&l.value!==ds?Promise.resolve():new Promise((R,M)=>{H.add([R,M])})}function pe(R){return $||($=!R,J(),H.list().forEach(([M,P])=>R?P(R):M()),H.reset()),R}function Re(R,M,P,q){const{scrollBehavior:_e}=t;if(!Pa||!_e)return Promise.resolve();const Me=!P&&S$(Bw(R.fullPath,0))||(q||!P)&&history.state&&history.state.scroll||null;return Ul().then(()=>_e(R,M,Me)).then(v=>v&&T$(v)).catch(v=>V(v,R,M))}const $e=R=>i.go(R);let ot;const pt=new Set,Nt={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:g,getRoutes:m,resolve:y,options:t,push:S,replace:w,go:$e,back:()=>$e(-1),forward:()=>$e(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:C.add,isReady:oe,install(R){const M=this;R.component("RouterLink",Y$),R.component("RouterView",Z$),R.config.globalProperties.$router=M,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>ue(l)}),Pa&&!ot&&l.value===ds&&(ot=!0,S(i.location).catch(_e=>{}));const P={};for(const _e in ds)Object.defineProperty(P,_e,{get:()=>l.value[_e],enumerable:!0});R.provide(Cm,M),R.provide(W0,_A(P)),R.provide(H_,l);const q=R.unmount;pt.add(R),R.unmount=function(){pt.delete(R),pt.size<1&&(c=ds,le&&le(),le=null,l.value=ds,ot=!1,$=!1),q()}}};function ct(R){return R.reduce((M,P)=>M.then(()=>O(P)),Promise.resolve())}return Nt}function tH(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Cl(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Cl(c,l))||i.push(l))}return[n,r,i]}function Oh(){return Qn(Cm)}function Nh(){return Qn(W0)}const nH=["src"],rH=hn({__name:"menuBar.vapor",async setup(t){let e,n;const r=Nh(),i=([e,n]=pa(()=>oh()),e=await e,n(),e);return(s,o)=>{const a=Cp("router-link");return z(),te("header",null,[E("nav",null,[Se(a,{to:{name:"Home"},class:"btn",icon:"",current:ue(r).name=="Home"},{default:hr(()=>[Te(" home ")]),_:1},8,["current"]),Se(a,{to:{name:"loginScreen"},current:ue(r).name=="loginScreen",class:"btn"},{default:hr(()=>[Te(" account ")]),_:1},8,["current"]),Se(a,{to:{name:"loginScreen"},current:ue(r).name=="loginScreen",class:"imgbtn"},{default:hr(()=>{var l,c;return[(l=ue(i))!=null&&l.photoURL?(z(),te("img",{key:0,class:"bobble",src:(c=ue(i))==null?void 0:c.photoURL},null,8,nH)):Pe("",!0)]}),_:1},8,["current"])])])}}}),Ta=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},iH=Ta(rH,[["__scopeId","data-v-cc934bf8"]]),sH=hn({__name:"App",setup(t){const e=Nh();return(n,r)=>{const i=Cp("RouterView");return z(),te(ke,null,[(z(),Bt(qb,null,{default:hr(()=>[Se(iH)]),_:1})),(z(),Bt(qb,null,{default:hr(()=>[(z(),Bt(i,{key:ue(e).fullPath}))]),_:1}))],64)}}}),jO=fC({apiKey:"AIzaSyAnOiG77O1ukT9C2x8u1VbMLw7For9C_3w",authDomain:"auth.odinn.nl",databaseURL:"https://bingo-50cec-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bingo-50cec",storageBucket:"bingo-50cec.appspot.com",messagingSenderId:"866066986693",appId:"1:866066986693:web:de513df8434d232b0562ac",measurementId:"G-8F3EECYHQ0"}),Ke=tU(jO);function WO(t){return xv()?(oA(t),!0):!1}function Lu(t){return typeof t=="function"?t():ue(t)}const qO=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const oH=t=>t!=null,aH=()=>{};function GO(t){return t||ma()}function lH(...t){if(t.length!==1)return ux(...t);const e=t[0];return typeof e=="function"?Uv(SA(()=>({get:e,set:aH}))):me(e)}function cH(t,e){GO(e)&&th(t,e)}function uH(t,e=!0,n){GO()?eh(t,n):e?t():Ul(t)}function KO(t){var e;const n=Lu(t);return(e=n==null?void 0:n.$el)!=null?e:n}const hH=qO?window:void 0,YO=qO?window.document:void 0;function dH(){const t=me(!1),e=ma();return e&&eh(()=>{t.value=!0},e),t}function fH(t){const e=dH();return kt(()=>(e.value,!!t()))}function pH(t,e,n={}){const{window:r=hH,...i}=n;let s;const o=fH(()=>r&&"MutationObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},l=kt(()=>{const d=Lu(t),f=(Array.isArray(d)?d:[d]).map(KO).filter(oH);return new Set(f)}),c=Wi(()=>l.value,d=>{a(),o.value&&r&&d.size&&(s=new MutationObserver(e),d.forEach(f=>s.observe(f,i)))},{immediate:!0,flush:"post"}),u=()=>s==null?void 0:s.takeRecords(),h=()=>{a(),c()};return WO(h),{isSupported:o,stop:h,takeRecords:u}}function Rm(t=null,e={}){var n,r,i;const{document:s=YO,restoreOnUnmount:o=h=>h}=e,a=(n=s==null?void 0:s.title)!=null?n:"",l=lH((r=t??(s==null?void 0:s.title))!=null?r:null),c=t&&typeof t=="function";function u(h){if(!("titleTemplate"in e))return h;const d=e.titleTemplate||"%s";return typeof d=="function"?d(h):Lu(d).replace(/%s/g,h)}return Wi(l,(h,d)=>{h!==d&&s&&(s.title=u(typeof h=="string"?h:""))},{immediate:!0}),e.observe&&!e.titleTemplate&&s&&!c&&pH((i=s.head)==null?void 0:i.querySelector("title"),()=>{s&&s.title!==l.value&&(l.value=u(s.title))},{childList:!0}),cH(()=>{if(o){const h=o(a,l.value||"");h!=null&&s&&(s.title=h)}}),l}const mH=E("h1",{class:"font-size-H"},[Te("Bingo "),E("em",null,"Bongo")],-1),gH=E("h2",{class:"font-size-L"},"Simplifying OSRS Clan Bingos",-1),yH={class:"col-2"},_H={class:"ghost-board"},vH=E("h2",null,"No more spreadsheets",-1),bH=E("p",null," You know how annoying it is to keep track of scores during clan bingos, right? Yeah, it's a pain. ",-1),EH=E("p",null," No more dealing with spreadsheets or scribbling down scores - Bingo Bongo has got my back on that front. It's like having a reliable sidekick for our clan events, making everything run smoothly and keeping the stress levels down. ",-1),TH=E("div",null,null,-1),wH=hn({__name:"home.vapor",setup(t){const e=Rm();e.value="Bingo Bongo - an osrs bingo app";const n=Oh(),r=new Set,i=s=>{for(;r.size<3;)r.add(Math.floor(Math.random()*9)+1);return r.has(s)?"var(--secondary)":"var(--primary)"};return(s,o)=>(z(),te(ke,null,[mH,gH,E("div",yH,[E("div",_H,[(z(),te(ke,null,Pn(9,a=>E("div",{class:"tile",key:a+"tile",style:yi({"--rotate":Math.random()*6-3+"deg",backgroundColor:i(a)})},null,4)),64))]),E("div",null,[vH,bH,EH,E("a",{class:"btn",big:"",submit:"",onClick:o[0]||(o[0]=a=>ue(n).push({name:"createNewBingo"}))},"Start a new event!")])]),TH],64))}});var JO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function QO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XO={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(JO,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(J){var H=["th","st","nd","rd"],C=J%100;return"["+J+(H[(C-20)%10]||H[C]||H[0])+"]"}},I=function(J,H,C){var $=String(J);return!$||$.length>=H?J:""+Array(H+1-$.length).join(C)+J},S={s:I,z:function(J){var H=-J.utcOffset(),C=Math.abs(H),$=Math.floor(C/60),V=C%60;return(H<=0?"+":"-")+I($,2,"0")+":"+I(V,2,"0")},m:function J(H,C){if(H.date()<C.date())return-J(C,H);var $=12*(C.year()-H.year())+(C.month()-H.month()),V=H.clone().add($,h),oe=C-V<0,pe=H.clone().add($+(oe?-1:1),h);return+(-($+(C-V)/(oe?V-pe:pe-V))||0)},a:function(J){return J<0?Math.ceil(J)||0:Math.floor(J)},p:function(J){return{M:h,y:f,w:u,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[J]||String(J||"").toLowerCase().replace(/s$/,"")},u:function(J){return J===void 0}},w="en",A={};A[w]=_;var L="$isDayjsObject",N=function(J){return J instanceof j||!(!J||!J[L])},O=function J(H,C,$){var V;if(!H)return w;if(typeof H=="string"){var oe=H.toLowerCase();A[oe]&&(V=oe),C&&(A[oe]=C,V=oe);var pe=H.split("-");if(!V&&pe.length>1)return J(pe[0])}else{var Re=H.name;A[Re]=H,V=Re}return!$&&V&&(w=V),V||!$&&w},U=function(J,H){if(N(J))return J.clone();var C=typeof H=="object"?H:{};return C.date=J,C.args=arguments,new j(C)},K=S;K.l=O,K.i=N,K.w=function(J,H){return U(J,{locale:H.$L,utc:H.$u,x:H.$x,$offset:H.$offset})};var j=function(){function J(C){this.$L=O(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[L]=!0}var H=J.prototype;return H.parse=function(C){this.$d=function($){var V=$.date,oe=$.utc;if(V===null)return new Date(NaN);if(K.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var pe=V.match(g);if(pe){var Re=pe[2]-1||0,$e=(pe[7]||"0").substring(0,3);return oe?new Date(Date.UTC(pe[1],Re,pe[3]||1,pe[4]||0,pe[5]||0,pe[6]||0,$e)):new Date(pe[1],Re,pe[3]||1,pe[4]||0,pe[5]||0,pe[6]||0,$e)}}return new Date(V)}(C),this.init()},H.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},H.$utils=function(){return K},H.isValid=function(){return this.$d.toString()!==m},H.isSame=function(C,$){var V=U(C);return this.startOf($)<=V&&V<=this.endOf($)},H.isAfter=function(C,$){return U(C)<this.startOf($)},H.isBefore=function(C,$){return this.endOf($)<U(C)},H.$g=function(C,$,V){return K.u(C)?this[$]:this.set(V,C)},H.unix=function(){return Math.floor(this.valueOf()/1e3)},H.valueOf=function(){return this.$d.getTime()},H.startOf=function(C,$){var V=this,oe=!!K.u($)||$,pe=K.p(C),Re=function(P,q){var _e=K.w(V.$u?Date.UTC(V.$y,q,P):new Date(V.$y,q,P),V);return oe?_e:_e.endOf(c)},$e=function(P,q){return K.w(V.toDate()[P].apply(V.toDate("s"),(oe?[0,0,0,0]:[23,59,59,999]).slice(q)),V)},ot=this.$W,pt=this.$M,Nt=this.$D,ct="set"+(this.$u?"UTC":"");switch(pe){case f:return oe?Re(1,0):Re(31,11);case h:return oe?Re(1,pt):Re(0,pt+1);case u:var R=this.$locale().weekStart||0,M=(ot<R?ot+7:ot)-R;return Re(oe?Nt-M:Nt+(6-M),pt);case c:case p:return $e(ct+"Hours",0);case l:return $e(ct+"Minutes",1);case a:return $e(ct+"Seconds",2);case o:return $e(ct+"Milliseconds",3);default:return this.clone()}},H.endOf=function(C){return this.startOf(C,!1)},H.$set=function(C,$){var V,oe=K.p(C),pe="set"+(this.$u?"UTC":""),Re=(V={},V[c]=pe+"Date",V[p]=pe+"Date",V[h]=pe+"Month",V[f]=pe+"FullYear",V[l]=pe+"Hours",V[a]=pe+"Minutes",V[o]=pe+"Seconds",V[s]=pe+"Milliseconds",V)[oe],$e=oe===c?this.$D+($-this.$W):$;if(oe===h||oe===f){var ot=this.clone().set(p,1);ot.$d[Re]($e),ot.init(),this.$d=ot.set(p,Math.min(this.$D,ot.daysInMonth())).$d}else Re&&this.$d[Re]($e);return this.init(),this},H.set=function(C,$){return this.clone().$set(C,$)},H.get=function(C){return this[K.p(C)]()},H.add=function(C,$){var V,oe=this;C=Number(C);var pe=K.p($),Re=function(pt){var Nt=U(oe);return K.w(Nt.date(Nt.date()+Math.round(pt*C)),oe)};if(pe===h)return this.set(h,this.$M+C);if(pe===f)return this.set(f,this.$y+C);if(pe===c)return Re(1);if(pe===u)return Re(7);var $e=(V={},V[a]=r,V[l]=i,V[o]=n,V)[pe]||1,ot=this.$d.getTime()+C*$e;return K.w(ot,this)},H.subtract=function(C,$){return this.add(-1*C,$)},H.format=function(C){var $=this,V=this.$locale();if(!this.isValid())return V.invalidDate||m;var oe=C||"YYYY-MM-DDTHH:mm:ssZ",pe=K.z(this),Re=this.$H,$e=this.$m,ot=this.$M,pt=V.weekdays,Nt=V.months,ct=V.meridiem,R=function(q,_e,Me,v){return q&&(q[_e]||q($,oe))||Me[_e].slice(0,v)},M=function(q){return K.s(Re%12||12,q,"0")},P=ct||function(q,_e,Me){var v=q<12?"AM":"PM";return Me?v.toLowerCase():v};return oe.replace(y,function(q,_e){return _e||function(Me){switch(Me){case"YY":return String($.$y).slice(-2);case"YYYY":return K.s($.$y,4,"0");case"M":return ot+1;case"MM":return K.s(ot+1,2,"0");case"MMM":return R(V.monthsShort,ot,Nt,3);case"MMMM":return R(Nt,ot);case"D":return $.$D;case"DD":return K.s($.$D,2,"0");case"d":return String($.$W);case"dd":return R(V.weekdaysMin,$.$W,pt,2);case"ddd":return R(V.weekdaysShort,$.$W,pt,3);case"dddd":return pt[$.$W];case"H":return String(Re);case"HH":return K.s(Re,2,"0");case"h":return M(1);case"hh":return M(2);case"a":return P(Re,$e,!0);case"A":return P(Re,$e,!1);case"m":return String($e);case"mm":return K.s($e,2,"0");case"s":return String($.$s);case"ss":return K.s($.$s,2,"0");case"SSS":return K.s($.$ms,3,"0");case"Z":return pe}return null}(q)||pe.replace(":","")})},H.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},H.diff=function(C,$,V){var oe,pe=this,Re=K.p($),$e=U(C),ot=($e.utcOffset()-this.utcOffset())*r,pt=this-$e,Nt=function(){return K.m(pe,$e)};switch(Re){case f:oe=Nt()/12;break;case h:oe=Nt();break;case d:oe=Nt()/3;break;case u:oe=(pt-ot)/6048e5;break;case c:oe=(pt-ot)/864e5;break;case l:oe=pt/i;break;case a:oe=pt/r;break;case o:oe=pt/n;break;default:oe=pt}return V?oe:K.a(oe)},H.daysInMonth=function(){return this.endOf(h).$D},H.$locale=function(){return A[this.$L]},H.locale=function(C,$){if(!C)return this.$L;var V=this.clone(),oe=O(C,$,!0);return oe&&(V.$L=oe),V},H.clone=function(){return K.w(this.$d,this)},H.toDate=function(){return new Date(this.valueOf())},H.toJSON=function(){return this.isValid()?this.toISOString():null},H.toISOString=function(){return this.$d.toISOString()},H.toString=function(){return this.$d.toUTCString()},J}(),le=j.prototype;return U.prototype=le,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",p]].forEach(function(J){le[J[1]]=function(H){return this.$g(H,J[0],J[1])}}),U.extend=function(J,H){return J.$i||(J(H,j,U),J.$i=!0),U},U.locale=O,U.isDayjs=N,U.unix=function(J){return U(1e3*J)},U.en=A[w],U.Ls=A,U.p={},U})})(XO);var SH=XO.exports;const ZO=QO(SH);var eN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(JO,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(m){return(m=+m)+(m>68?1900:2e3)},c=function(m){return function(g){this[m]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),_=60*y[1]+(+y[2]||0);return _===0?0:y[0]==="+"?-_:_}(m)}],h=function(m){var g=a[m];return g&&(g.indexOf?g:g.s.concat(g.f))},d=function(m,g){var y,_=a.meridiem;if(_){for(var I=1;I<=24;I+=1)if(m.indexOf(_(I,0,g))>-1){y=I>12;break}}else y=m===(g?"pm":"PM");return y},f={A:[o,function(m){this.afternoon=d(m,!1)}],a:[o,function(m){this.afternoon=d(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[i,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[i,c("day")],Do:[o,function(m){var g=a.ordinal,y=m.match(/\d+/);if(this.day=y[0],g)for(var _=1;_<=31;_+=1)g(_).replace(/\[|\]/g,"")===m&&(this.day=_)}],M:[s,c("month")],MM:[i,c("month")],MMM:[o,function(m){var g=h("months"),y=(h("monthsShort")||g.map(function(_){return _.slice(0,3)})).indexOf(m)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(m){var g=h("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(m){this.year=l(m)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function p(m){var g,y;g=m,y=a&&a.formats;for(var _=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(O,U,K){var j=K&&K.toUpperCase();return U||y[K]||n[K]||y[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(le,J,H){return J||H.slice(1)})})).match(r),I=_.length,S=0;S<I;S+=1){var w=_[S],A=f[w],L=A&&A[0],N=A&&A[1];_[S]=N?{regex:L,parser:N}:w.replace(/^\[|\]$/g,"")}return function(O){for(var U={},K=0,j=0;K<I;K+=1){var le=_[K];if(typeof le=="string")j+=le.length;else{var J=le.regex,H=le.parser,C=O.slice(j),$=J.exec(C)[0];H.call(U,$),O=O.replace($,"")}}return function(V){var oe=V.afternoon;if(oe!==void 0){var pe=V.hours;oe?pe<12&&(V.hours+=12):pe===12&&(V.hours=0),delete V.afternoon}}(U),U}}return function(m,g,y){y.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var _=g.prototype,I=_.parse;_.parse=function(S){var w=S.date,A=S.utc,L=S.args;this.$u=A;var N=L[1];if(typeof N=="string"){var O=L[2]===!0,U=L[3]===!0,K=O||U,j=L[2];U&&(j=L[2]),a=this.$locale(),!O&&j&&(a=y.Ls[j]),this.$d=function(C,$,V){try{if(["x","X"].indexOf($)>-1)return new Date(($==="X"?1e3:1)*C);var oe=p($)(C),pe=oe.year,Re=oe.month,$e=oe.day,ot=oe.hours,pt=oe.minutes,Nt=oe.seconds,ct=oe.milliseconds,R=oe.zone,M=new Date,P=$e||(pe||Re?1:M.getDate()),q=pe||M.getFullYear(),_e=0;pe&&!Re||(_e=Re>0?Re-1:M.getMonth());var Me=ot||0,v=pt||0,T=Nt||0,k=ct||0;return R?new Date(Date.UTC(q,_e,P,Me,v,T,k+60*R.offset*1e3)):V?new Date(Date.UTC(q,_e,P,Me,v,T,k)):new Date(q,_e,P,Me,v,T,k)}catch{return new Date("")}}(w,N,A),this.init(),j&&j!==!0&&(this.$L=this.locale(j).$L),K&&w!=this.format(N)&&(this.$d=new Date("")),a={}}else if(N instanceof Array)for(var le=N.length,J=1;J<=le;J+=1){L[1]=N[J-1];var H=y.apply(this,L);if(H.isValid()){this.$d=H.$d,this.$L=H.$L,this.init();break}J===le&&(this.$d=new Date(""))}else I.call(this,S)}}})})(eN);var IH=eN.exports;const AH=QO(IH);var CH={},Zw={defaultUserAgent:`WiseOldMan JS Client v${CH.npm_package_version}`,baseAPIUrl:"https://api.wiseoldman.net/v2"};function RH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fs(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}ZO.extend(AH);function z_(t,e){return Array.isArray(t)?t.map(n=>z_(n,e)):t!==null&&typeof t=="object"?Object.fromEntries(Object.keys(t).map(n=>[n,z_(t[n],e)])):e(t)}function kH(t){return!t||typeof t!="string"?!1:t.endsWith("Z")&&ZO(t.slice(0,-1),"YYYY-MM-DDTHH:mm:ss.SSS",!0).isValid()}function OH(t){return z_(t,e=>kH(e)?new Date(e):e)}function eS(t,e,n){if(n){if(t===400)throw new NH(e,n.message,n.data);if(t===403)throw new MH(e,n.message);if(t===404)throw new PH(e,n.message);if(t===429)throw new xH(e,n.message);if(t===500)throw new DH(e,n.message)}}class NH extends Error{constructor(e,n,r){super(n),this.name="BadRequestError",this.resource=e,this.statusCode=400,this.data=r}}class MH extends Error{constructor(e,n){super(n),this.name="ForbiddenError",this.resource=e,this.statusCode=403}}class PH extends Error{constructor(e,n){super(n),this.name="NotFoundError",this.resource=e,this.statusCode=404}}class xH extends Error{constructor(e,n){super(n),this.name="RateLimitError",this.resource=e,this.statusCode=429}}class DH extends Error{constructor(e,n){super(n),this.name="InternalServerError",this.resource=e,this.statusCode=500}}class so{constructor(e,n){this.baseUrl=n,this.headers=Object.assign({Accept:"application/json","Content-Type":"application/json"},e)}buildParams(e){var n=RH(e,[]);const r=new URLSearchParams;Object.keys(n).filter(s=>n[s]!==void 0).forEach(s=>r.set(s,n[s]));const i=r.toString();return i?`?${i}`:""}fetch({method:e,path:n,body:r,params:i}){return fs(this,void 0,void 0,function*(){const s={method:e,body:void 0,headers:this.headers};let o="";return r&&(s.body=JSON.stringify(r)),i&&(o=this.buildParams(i)),yield fetch(this.baseUrl+n+o,s)})}request({method:e,path:n,body:r,params:i}){return fs(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.json();if(s.ok)return OH(o);eS(s.status,n,o)})}requestText({method:e,path:n,body:r,params:i}){return fs(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.text();if(s.ok)return o;eS(s.status,n,JSON.parse(o))})}postRequest(e,n){return fs(this,void 0,void 0,function*(){return yield this.request({method:"POST",path:e,body:n||{}})})}putRequest(e,n){return fs(this,void 0,void 0,function*(){return yield this.request({method:"PUT",path:e,body:n||{}})})}deleteRequest(e,n){return fs(this,void 0,void 0,function*(){return yield this.request({method:"DELETE",path:e,body:n||{}})})}getRequest(e,n){return fs(this,void 0,void 0,function*(){return yield this.request({method:"GET",path:e,params:n})})}getText(e,n){return fs(this,void 0,void 0,function*(){return yield this.requestText({method:"GET",path:e,params:n})})}}class LH extends so{getDeltaLeaderboard(e){return this.getRequest("/deltas/leaderboard",e)}}class VH extends so{searchGroups(e,n){return this.getRequest("/groups",Object.assign({name:e},n))}getGroupDetails(e){return this.getRequest(`/groups/${e}`)}createGroup(e){return this.postRequest("/groups",e)}editGroup(e,n,r){return this.putRequest(`/groups/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteGroup(e,n){return this.deleteRequest(`/groups/${e}`,{verificationCode:n})}addMembers(e,n,r){return this.postRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}removeMembers(e,n,r){return this.deleteRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}changeRole(e,n,r){return this.putRequest(`/groups/${e}/role`,Object.assign(Object.assign({},n),{verificationCode:r}))}updateAll(e,n){return this.postRequest(`/groups/${e}/update-all`,{verificationCode:n})}getGroupCompetitions(e,n){return this.getRequest(`/groups/${e}/competitions`,Object.assign({},n))}getGroupGains(e,n,r){return this.getRequest(`/groups/${e}/gained`,Object.assign(Object.assign({},r),n))}getGroupAchievements(e,n){return this.getRequest(`/groups/${e}/achievements`,Object.assign({},n))}getGroupRecords(e,n,r){return this.getRequest(`/groups/${e}/records`,Object.assign(Object.assign({},r),n))}getGroupHiscores(e,n,r){return this.getRequest(`/groups/${e}/hiscores`,Object.assign(Object.assign({},r),{metric:n}))}getGroupNameChanges(e,n){return this.getRequest(`/groups/${e}/name-changes`,Object.assign({},n))}getGroupStatistics(e){return this.getRequest(`/groups/${e}/statistics`)}getGroupActivity(e,n){return this.getRequest(`/groups/${e}/activity`,Object.assign({},n))}getMembersCSV(e){return this.getText(`/groups/${e}/csv`)}}class FH extends so{searchPlayers(e,n){return this.getRequest("/players/search",Object.assign({username:e},n))}updatePlayer(e){return this.postRequest(`/players/${e}`)}assertPlayerType(e){return this.postRequest(`/players/${e}/assert-type`)}getPlayerDetails(e){return this.getRequest(`/players/${e}`)}getPlayerDetailsById(e){return this.getRequest(`/players/id/${e}`)}getPlayerAchievements(e){return this.getRequest(`/players/${e}/achievements`)}getPlayerAchievementProgress(e){return this.getRequest(`/players/${e}/achievements/progress`)}getPlayerCompetitions(e,n,r){return this.getRequest(`/players/${e}/competitions`,Object.assign(Object.assign({},n),r))}getPlayerCompetitionStandings(e,n){return this.getRequest(`/players/${e}/competitions/standings`,n)}getPlayerGroups(e,n){return this.getRequest(`/players/${e}/groups`,n)}getPlayerGains(e,n){return this.getRequest(`/players/${e}/gained`,n)}getPlayerGainsAsArray(e,n){return this.getRequest(`/players/${e}/gained`,Object.assign(Object.assign({},n),{formatting:"array"}))}getPlayerRecords(e,n){return this.getRequest(`/players/${e}/records`,n)}getPlayerSnapshots(e,n,r){return this.getRequest(`/players/${e}/snapshots`,Object.assign(Object.assign({},n),r))}getPlayerSnapshotTimeline(e,n,r){return this.getRequest(`/players/${e}/snapshots/timeline`,Object.assign(Object.assign({},r),{metric:n}))}getPlayerNames(e){return this.getRequest(`/players/${e}/names`)}getPlayerArchives(e){return this.getRequest(`/players/${e}/archives`)}}class BH extends so{getRecordLeaderboard(e){return this.getRequest("/records/leaderboard",e)}}const mt={OVERALL:"overall",ATTACK:"attack",DEFENCE:"defence",STRENGTH:"strength",HITPOINTS:"hitpoints",RANGED:"ranged",PRAYER:"prayer",MAGIC:"magic",COOKING:"cooking",WOODCUTTING:"woodcutting",FLETCHING:"fletching",FISHING:"fishing",FIREMAKING:"firemaking",CRAFTING:"crafting",SMITHING:"smithing",MINING:"mining",HERBLORE:"herblore",AGILITY:"agility",THIEVING:"thieving",SLAYER:"slayer",FARMING:"farming",RUNECRAFTING:"runecrafting",HUNTER:"hunter",CONSTRUCTION:"construction"},fn={LEAGUE_POINTS:"league_points",BOUNTY_HUNTER_HUNTER:"bounty_hunter_hunter",BOUNTY_HUNTER_ROGUE:"bounty_hunter_rogue",CLUE_SCROLLS_ALL:"clue_scrolls_all",CLUE_SCROLLS_BEGINNER:"clue_scrolls_beginner",CLUE_SCROLLS_EASY:"clue_scrolls_easy",CLUE_SCROLLS_MEDIUM:"clue_scrolls_medium",CLUE_SCROLLS_HARD:"clue_scrolls_hard",CLUE_SCROLLS_ELITE:"clue_scrolls_elite",CLUE_SCROLLS_MASTER:"clue_scrolls_master",LAST_MAN_STANDING:"last_man_standing",PVP_ARENA:"pvp_arena",SOUL_WARS_ZEAL:"soul_wars_zeal",GUARDIANS_OF_THE_RIFT:"guardians_of_the_rift",COLOSSEUM_GLORY:"colosseum_glory"},he={ABYSSAL_SIRE:"abyssal_sire",ALCHEMICAL_HYDRA:"alchemical_hydra",ARTIO:"artio",BARROWS_CHESTS:"barrows_chests",BRYOPHYTA:"bryophyta",CALLISTO:"callisto",CALVARION:"calvarion",CERBERUS:"cerberus",CHAMBERS_OF_XERIC:"chambers_of_xeric",CHAMBERS_OF_XERIC_CM:"chambers_of_xeric_challenge_mode",CHAOS_ELEMENTAL:"chaos_elemental",CHAOS_FANATIC:"chaos_fanatic",COMMANDER_ZILYANA:"commander_zilyana",CORPOREAL_BEAST:"corporeal_beast",CRAZY_ARCHAEOLOGIST:"crazy_archaeologist",DAGANNOTH_PRIME:"dagannoth_prime",DAGANNOTH_REX:"dagannoth_rex",DAGANNOTH_SUPREME:"dagannoth_supreme",DERANGED_ARCHAEOLOGIST:"deranged_archaeologist",DUKE_SUCELLUS:"duke_sucellus",GENERAL_GRAARDOR:"general_graardor",GIANT_MOLE:"giant_mole",GROTESQUE_GUARDIANS:"grotesque_guardians",HESPORI:"hespori",KALPHITE_QUEEN:"kalphite_queen",KING_BLACK_DRAGON:"king_black_dragon",KRAKEN:"kraken",KREEARRA:"kreearra",KRIL_TSUTSAROTH:"kril_tsutsaroth",LUNAR_CHESTS:"lunar_chests",MIMIC:"mimic",NEX:"nex",NIGHTMARE:"nightmare",PHOSANIS_NIGHTMARE:"phosanis_nightmare",OBOR:"obor",PHANTOM_MUSPAH:"phantom_muspah",SARACHNIS:"sarachnis",SCORPIA:"scorpia",SCURRIUS:"scurrius",SKOTIZO:"skotizo",SOL_HEREDIT:"sol_heredit",SPINDEL:"spindel",TEMPOROSS:"tempoross",THE_GAUNTLET:"the_gauntlet",THE_CORRUPTED_GAUNTLET:"the_corrupted_gauntlet",THE_LEVIATHAN:"the_leviathan",THE_WHISPERER:"the_whisperer",THEATRE_OF_BLOOD:"theatre_of_blood",THEATRE_OF_BLOOD_HARD_MODE:"theatre_of_blood_hard_mode",THERMONUCLEAR_SMOKE_DEVIL:"thermonuclear_smoke_devil",TOMBS_OF_AMASCUT:"tombs_of_amascut",TOMBS_OF_AMASCUT_EXPERT:"tombs_of_amascut_expert",TZKAL_ZUK:"tzkal_zuk",TZTOK_JAD:"tztok_jad",VARDORVIS:"vardorvis",VENENATIS:"venenatis",VETION:"vetion",VORKATH:"vorkath",WINTERTODT:"wintertodt",ZALCANO:"zalcano",ZULRAH:"zulrah"},Gf={EHP:"ehp",EHB:"ehb"},j_=Object.assign(Object.assign(Object.assign(Object.assign({},mt),fn),he),Gf),b={ACHIEVER:"achiever",ADAMANT:"adamant",ADEPT:"adept",ADMINISTRATOR:"administrator",ADMIRAL:"admiral",ADVENTURER:"adventurer",AIR:"air",ANCHOR:"anchor",APOTHECARY:"apothecary",ARCHER:"archer",ARMADYLEAN:"armadylean",ARTILLERY:"artillery",ARTISAN:"artisan",ASGARNIAN:"asgarnian",ASSASSIN:"assassin",ASSISTANT:"assistant",ASTRAL:"astral",ATHLETE:"athlete",ATTACKER:"attacker",BANDIT:"bandit",BANDOSIAN:"bandosian",BARBARIAN:"barbarian",BATTLEMAGE:"battlemage",BEAST:"beast",BERSERKER:"berserker",BLISTERWOOD:"blisterwood",BLOOD:"blood",BLUE:"blue",BOB:"bob",BODY:"body",BRASSICAN:"brassican",BRAWLER:"brawler",BRIGADIER:"brigadier",BRIGAND:"brigand",BRONZE:"bronze",BRUISER:"bruiser",BULWARK:"bulwark",BURGLAR:"burglar",BURNT:"burnt",CADET:"cadet",CAPTAIN:"captain",CARRY:"carry",CHAMPION:"champion",CHAOS:"chaos",CLERIC:"cleric",COLLECTOR:"collector",COLONEL:"colonel",COMMANDER:"commander",COMPETITOR:"competitor",COMPLETIONIST:"completionist",CONSTRUCTOR:"constructor",COOK:"cook",COORDINATOR:"coordinator",CORPORAL:"corporal",COSMIC:"cosmic",COUNCILLOR:"councillor",CRAFTER:"crafter",CREW:"crew",CRUSADER:"crusader",CUTPURSE:"cutpurse",DEATH:"death",DEFENDER:"defender",DEFILER:"defiler",DEPUTY_OWNER:"deputy_owner",DESTROYER:"destroyer",DIAMOND:"diamond",DISEASED:"diseased",DOCTOR:"doctor",DOGSBODY:"dogsbody",DRAGON:"dragon",DRAGONSTONE:"dragonstone",DRUID:"druid",DUELLIST:"duellist",EARTH:"earth",ELITE:"elite",EMERALD:"emerald",ENFORCER:"enforcer",EPIC:"epic",EXECUTIVE:"executive",EXPERT:"expert",EXPLORER:"explorer",FARMER:"farmer",FEEDER:"feeder",FIGHTER:"fighter",FIRE:"fire",FIREMAKER:"firemaker",FIRESTARTER:"firestarter",FISHER:"fisher",FLETCHER:"fletcher",FORAGER:"forager",FREMENNIK:"fremennik",GAMER:"gamer",GATHERER:"gatherer",GENERAL:"general",GNOME_CHILD:"gnome_child",GNOME_ELDER:"gnome_elder",GOBLIN:"goblin",GOLD:"gold",GOON:"goon",GREEN:"green",GREY:"grey",GUARDIAN:"guardian",GUTHIXIAN:"guthixian",HARPOON:"harpoon",HEALER:"healer",HELLCAT:"hellcat",HELPER:"helper",HERBOLOGIST:"herbologist",HERO:"hero",HOLY:"holy",HOARDER:"hoarder",HUNTER:"hunter",IGNITOR:"ignitor",ILLUSIONIST:"illusionist",IMP:"imp",INFANTRY:"infantry",INQUISITOR:"inquisitor",IRON:"iron",JADE:"jade",JUSTICIAR:"justiciar",KANDARIN:"kandarin",KARAMJAN:"karamjan",KHARIDIAN:"kharidian",KITTEN:"kitten",KNIGHT:"knight",LABOURER:"labourer",LAW:"law",LEADER:"leader",LEARNER:"learner",LEGACY:"legacy",LEGEND:"legend",LEGIONNAIRE:"legionnaire",LIEUTENANT:"lieutenant",LOOTER:"looter",LUMBERJACK:"lumberjack",MAGIC:"magic",MAGICIAN:"magician",MAJOR:"major",MAPLE:"maple",MARSHAL:"marshal",MASTER:"master",MAXED:"maxed",MEDIATOR:"mediator",MEDIC:"medic",MENTOR:"mentor",MEMBER:"member",MERCHANT:"merchant",MIND:"mind",MINER:"miner",MINION:"minion",MISTHALINIAN:"misthalinian",MITHRIL:"mithril",MODERATOR:"moderator",MONARCH:"monarch",MORYTANIAN:"morytanian",MYSTIC:"mystic",MYTH:"myth",NATURAL:"natural",NATURE:"nature",NECROMANCER:"necromancer",NINJA:"ninja",NOBLE:"noble",NOVICE:"novice",NURSE:"nurse",OAK:"oak",OFFICER:"officer",ONYX:"onyx",OPAL:"opal",ORACLE:"oracle",ORANGE:"orange",OWNER:"owner",PAGE:"page",PALADIN:"paladin",PAWN:"pawn",PILGRIM:"pilgrim",PINE:"pine",PINK:"pink",PREFECT:"prefect",PRIEST:"priest",PRIVATE:"private",PRODIGY:"prodigy",PROSELYTE:"proselyte",PROSPECTOR:"prospector",PROTECTOR:"protector",PURE:"pure",PURPLE:"purple",PYROMANCER:"pyromancer",QUESTER:"quester",RACER:"racer",RAIDER:"raider",RANGER:"ranger",RECORD_CHASER:"record_chaser",RECRUIT:"recruit",RECRUITER:"recruiter",RED_TOPAZ:"red_topaz",RED:"red",ROGUE:"rogue",RUBY:"ruby",RUNE:"rune",RUNECRAFTER:"runecrafter",SAGE:"sage",SAPPHIRE:"sapphire",SARADOMINIST:"saradominist",SAVIOUR:"saviour",SCAVENGER:"scavenger",SCHOLAR:"scholar",SCOURGE:"scourge",SCOUT:"scout",SCRIBE:"scribe",SEER:"seer",SENATOR:"senator",SENTRY:"sentry",SERENIST:"serenist",SERGEANT:"sergeant",SHAMAN:"shaman",SHERIFF:"sheriff",SHORT_GREEN_GUY:"short_green_guy",SKILLER:"skiller",SKULLED:"skulled",SLAYER:"slayer",SMITER:"smiter",SMITH:"smith",SMUGGLER:"smuggler",SNIPER:"sniper",SOUL:"soul",SPECIALIST:"specialist",SPEED_RUNNER:"speed_runner",SPELLCASTER:"spellcaster",SQUIRE:"squire",STAFF:"staff",STEEL:"steel",STRIDER:"strider",STRIKER:"striker",SUMMONER:"summoner",SUPERIOR:"superior",SUPERVISOR:"supervisor",TEACHER:"teacher",TEMPLAR:"templar",THERAPIST:"therapist",THIEF:"thief",TIRANNIAN:"tirannian",TRIALIST:"trialist",TRICKSTER:"trickster",TZKAL:"tzkal",TZTOK:"tztok",UNHOLY:"unholy",VAGRANT:"vagrant",VANGUARD:"vanguard",WALKER:"walker",WANDERER:"wanderer",WARDEN:"warden",WARLOCK:"warlock",WARRIOR:"warrior",WATER:"water",WILD:"wild",WILLOW:"willow",WILY:"wily",WINTUMBER:"wintumber",WITCH:"witch",WIZARD:"wizard",WORKER:"worker",WRATH:"wrath",XERICIAN:"xerician",YELLOW:"yellow",YEW:"yew",ZAMORAKIAN:"zamorakian",ZAROSIAN:"zarosian",ZEALOT:"zealot",ZENYTE:"zenyte"};var sl;(function(t){t.UPCOMING="upcoming",t.ONGOING="ongoing",t.FINISHED="finished"})(sl||(sl={}));var tS;(function(t){t.TEAM="team",t.TEAMS="teams",t.PARTICIPANTS="participants"})(tS||(tS={}));sl.UPCOMING+"",sl.ONGOING+"",sl.FINISHED+"";Object.values(sl);function Mh(t,e){const n={};return Object.keys(t).forEach(r=>{const i=r;n[i]=e(t[i],i,t)}),n}const UH=[b.ADMINISTRATOR,b.OWNER,b.LEADER,b.DEPUTY_OWNER,b.MODERATOR];Mh({[b.ACHIEVER]:{name:"Achiever"},[b.ADAMANT]:{name:"Adamant"},[b.ADEPT]:{name:"Adept"},[b.ADMINISTRATOR]:{name:"Administrator"},[b.ADMIRAL]:{name:"Admiral"},[b.ADVENTURER]:{name:"Adventurer"},[b.AIR]:{name:"Air"},[b.ANCHOR]:{name:"Anchor"},[b.APOTHECARY]:{name:"Apothecary"},[b.ARCHER]:{name:"Archer"},[b.ARMADYLEAN]:{name:"Armadylean"},[b.ARTILLERY]:{name:"Artillery"},[b.ARTISAN]:{name:"Artisan"},[b.ASGARNIAN]:{name:"Asgarnian"},[b.ASSASSIN]:{name:"Assassin"},[b.ASSISTANT]:{name:"Assistant"},[b.ASTRAL]:{name:"Astral"},[b.ATHLETE]:{name:"Athlete"},[b.ATTACKER]:{name:"Attacker"},[b.BANDIT]:{name:"Bandit"},[b.BANDOSIAN]:{name:"Bandosian"},[b.BARBARIAN]:{name:"Barbarian"},[b.BATTLEMAGE]:{name:"Battlemage"},[b.BEAST]:{name:"Beast"},[b.BERSERKER]:{name:"Berserker"},[b.BLISTERWOOD]:{name:"Blisterwood"},[b.BLOOD]:{name:"Blood"},[b.BLUE]:{name:"Blue"},[b.BOB]:{name:"Bob"},[b.BODY]:{name:"Body"},[b.BRASSICAN]:{name:"Brassican"},[b.BRAWLER]:{name:"Brawler"},[b.BRIGADIER]:{name:"Brigadier"},[b.BRIGAND]:{name:"Brigand"},[b.BRONZE]:{name:"Bronze"},[b.BRUISER]:{name:"Bruiser"},[b.BULWARK]:{name:"Bulwark"},[b.BURGLAR]:{name:"Burglar"},[b.BURNT]:{name:"Burnt"},[b.CADET]:{name:"Cadet"},[b.CAPTAIN]:{name:"Captain"},[b.CARRY]:{name:"Carry"},[b.CHAMPION]:{name:"Champion"},[b.CHAOS]:{name:"Chaos"},[b.CLERIC]:{name:"Cleric"},[b.COLLECTOR]:{name:"Collector"},[b.COLONEL]:{name:"Colonel"},[b.COMMANDER]:{name:"Commander"},[b.COMPETITOR]:{name:"Competitor"},[b.COMPLETIONIST]:{name:"Completionist"},[b.CONSTRUCTOR]:{name:"Constructor"},[b.COOK]:{name:"Cook"},[b.COORDINATOR]:{name:"Coordinator"},[b.CORPORAL]:{name:"Corporal"},[b.COSMIC]:{name:"Cosmic"},[b.COUNCILLOR]:{name:"Councillor"},[b.CRAFTER]:{name:"Crafter"},[b.CREW]:{name:"Crew"},[b.CRUSADER]:{name:"Crusader"},[b.CUTPURSE]:{name:"Cutpurse"},[b.DEATH]:{name:"Death"},[b.DEFENDER]:{name:"Defender"},[b.DEFILER]:{name:"Defiler"},[b.DEPUTY_OWNER]:{name:"Deputy Owner"},[b.DESTROYER]:{name:"Destroyer"},[b.DIAMOND]:{name:"Diamond"},[b.DISEASED]:{name:"Diseased"},[b.DOCTOR]:{name:"Doctor"},[b.DOGSBODY]:{name:"Dogsbody"},[b.DRAGON]:{name:"Dragon"},[b.DRAGONSTONE]:{name:"Dragonstone"},[b.DRUID]:{name:"Druid"},[b.DUELLIST]:{name:"Duellist"},[b.EARTH]:{name:"Earth"},[b.ELITE]:{name:"Elite"},[b.EMERALD]:{name:"Emerald"},[b.ENFORCER]:{name:"Enforcer"},[b.EPIC]:{name:"Epic"},[b.EXECUTIVE]:{name:"Executive"},[b.EXPERT]:{name:"Expert"},[b.EXPLORER]:{name:"Explorer"},[b.FARMER]:{name:"Farmer"},[b.FEEDER]:{name:"Feeder"},[b.FIGHTER]:{name:"Fighter"},[b.FIRE]:{name:"Fire"},[b.FIREMAKER]:{name:"Firemaker"},[b.FIRESTARTER]:{name:"Firestarter"},[b.FISHER]:{name:"Fisher"},[b.FLETCHER]:{name:"Fletcher"},[b.FORAGER]:{name:"Forager"},[b.FREMENNIK]:{name:"Fremennik"},[b.GAMER]:{name:"Gamer"},[b.GATHERER]:{name:"Gatherer"},[b.GENERAL]:{name:"General"},[b.GNOME_CHILD]:{name:"Gnome Child"},[b.GNOME_ELDER]:{name:"Gnome Elder"},[b.GOBLIN]:{name:"Goblin"},[b.GOLD]:{name:"Gold"},[b.GOON]:{name:"Goon"},[b.GREEN]:{name:"Green"},[b.GREY]:{name:"Grey"},[b.GUARDIAN]:{name:"Guardian"},[b.GUTHIXIAN]:{name:"Guthixian"},[b.HARPOON]:{name:"Harpoon"},[b.HEALER]:{name:"Healer"},[b.HELLCAT]:{name:"Hellcat"},[b.HELPER]:{name:"Helper"},[b.HERBOLOGIST]:{name:"Herbologist"},[b.HERO]:{name:"Hero"},[b.HOLY]:{name:"Holy"},[b.HOARDER]:{name:"Hoarder"},[b.HUNTER]:{name:"Hunter"},[b.IGNITOR]:{name:"Ignitor"},[b.ILLUSIONIST]:{name:"Illusionist"},[b.IMP]:{name:"Imp"},[b.INFANTRY]:{name:"Infantry"},[b.INQUISITOR]:{name:"Inquisitor"},[b.IRON]:{name:"Iron"},[b.JADE]:{name:"Jade"},[b.JUSTICIAR]:{name:"Justiciar"},[b.KANDARIN]:{name:"Kandarin"},[b.KARAMJAN]:{name:"Karamjan"},[b.KHARIDIAN]:{name:"Kharidian"},[b.KITTEN]:{name:"Kitten"},[b.KNIGHT]:{name:"Knight"},[b.LABOURER]:{name:"Labourer"},[b.LAW]:{name:"Law"},[b.LEADER]:{name:"Leader"},[b.LEARNER]:{name:"Learner"},[b.LEGACY]:{name:"Legacy"},[b.LEGEND]:{name:"Legend"},[b.LEGIONNAIRE]:{name:"Legionnaire"},[b.LIEUTENANT]:{name:"Lieutenant"},[b.LOOTER]:{name:"Looter"},[b.LUMBERJACK]:{name:"Lumberjack"},[b.MAGIC]:{name:"Magic"},[b.MAGICIAN]:{name:"Magician"},[b.MAJOR]:{name:"Major"},[b.MAPLE]:{name:"Maple"},[b.MARSHAL]:{name:"Marshal"},[b.MASTER]:{name:"Master"},[b.MAXED]:{name:"Maxed"},[b.MEDIATOR]:{name:"Mediator"},[b.MEDIC]:{name:"Medic"},[b.MENTOR]:{name:"Mentor"},[b.MEMBER]:{name:"Member"},[b.MERCHANT]:{name:"Merchant"},[b.MIND]:{name:"Mind"},[b.MINER]:{name:"Miner"},[b.MINION]:{name:"Minion"},[b.MISTHALINIAN]:{name:"Misthalinian"},[b.MITHRIL]:{name:"Mithril"},[b.MODERATOR]:{name:"Moderator"},[b.MONARCH]:{name:"Monarch"},[b.MORYTANIAN]:{name:"Morytanian"},[b.MYSTIC]:{name:"Mystic"},[b.MYTH]:{name:"Myth"},[b.NATURAL]:{name:"Natural"},[b.NATURE]:{name:"Nature"},[b.NECROMANCER]:{name:"Necromancer"},[b.NINJA]:{name:"Ninja"},[b.NOBLE]:{name:"Noble"},[b.NOVICE]:{name:"Novice"},[b.NURSE]:{name:"Nurse"},[b.OAK]:{name:"Oak"},[b.OFFICER]:{name:"Officer"},[b.ONYX]:{name:"Onyx"},[b.OPAL]:{name:"Opal"},[b.ORACLE]:{name:"Oracle"},[b.ORANGE]:{name:"Orange"},[b.OWNER]:{name:"Owner"},[b.PAGE]:{name:"Page"},[b.PALADIN]:{name:"Paladin"},[b.PAWN]:{name:"Pawn"},[b.PILGRIM]:{name:"Pilgrim"},[b.PINE]:{name:"Pine"},[b.PINK]:{name:"Pink"},[b.PREFECT]:{name:"Prefect"},[b.PRIEST]:{name:"Priest"},[b.PRIVATE]:{name:"Private"},[b.PRODIGY]:{name:"Prodigy"},[b.PROSELYTE]:{name:"Proselyte"},[b.PROSPECTOR]:{name:"Prospector"},[b.PROTECTOR]:{name:"Protector"},[b.PURE]:{name:"Pure"},[b.PURPLE]:{name:"Purple"},[b.PYROMANCER]:{name:"Pyromancer"},[b.QUESTER]:{name:"Quester"},[b.RACER]:{name:"Racer"},[b.RAIDER]:{name:"Raider"},[b.RANGER]:{name:"Ranger"},[b.RECORD_CHASER]:{name:"Record-Chaser"},[b.RECRUIT]:{name:"Recruit"},[b.RECRUITER]:{name:"Recruiter"},[b.RED_TOPAZ]:{name:"Red Topaz"},[b.RED]:{name:"Red"},[b.ROGUE]:{name:"Rogue"},[b.RUBY]:{name:"Ruby"},[b.RUNE]:{name:"Rune"},[b.RUNECRAFTER]:{name:"Runecrafter"},[b.SAGE]:{name:"Sage"},[b.SAPPHIRE]:{name:"Sapphire"},[b.SARADOMINIST]:{name:"Saradominist"},[b.SAVIOUR]:{name:"Saviour"},[b.SCAVENGER]:{name:"Scavenger"},[b.SCHOLAR]:{name:"Scholar"},[b.SCOURGE]:{name:"Scourge"},[b.SCOUT]:{name:"Scout"},[b.SCRIBE]:{name:"Scribe"},[b.SEER]:{name:"Seer"},[b.SENATOR]:{name:"Senator"},[b.SENTRY]:{name:"Sentry"},[b.SERENIST]:{name:"Serenist"},[b.SERGEANT]:{name:"Sergeant"},[b.SHAMAN]:{name:"Shaman"},[b.SHERIFF]:{name:"Sheriff"},[b.SHORT_GREEN_GUY]:{name:"Short Green Guy"},[b.SKILLER]:{name:"Skiller"},[b.SKULLED]:{name:"Skulled"},[b.SLAYER]:{name:"Slayer"},[b.SMITER]:{name:"Smiter"},[b.SMITH]:{name:"Smith"},[b.SMUGGLER]:{name:"Smuggler"},[b.SNIPER]:{name:"Sniper"},[b.SOUL]:{name:"Soul"},[b.SPECIALIST]:{name:"Specialist"},[b.SPEED_RUNNER]:{name:"Speed-Runner"},[b.SPELLCASTER]:{name:"Spellcaster"},[b.SQUIRE]:{name:"Squire"},[b.STAFF]:{name:"Staff"},[b.STEEL]:{name:"Steel"},[b.STRIDER]:{name:"Strider"},[b.STRIKER]:{name:"Striker"},[b.SUMMONER]:{name:"Summoner"},[b.SUPERIOR]:{name:"Superior"},[b.SUPERVISOR]:{name:"Supervisor"},[b.TEACHER]:{name:"Teacher"},[b.TEMPLAR]:{name:"Templar"},[b.THERAPIST]:{name:"Therapist"},[b.THIEF]:{name:"Thief"},[b.TIRANNIAN]:{name:"Tirannian"},[b.TRIALIST]:{name:"Trialist"},[b.TRICKSTER]:{name:"Trickster"},[b.TZKAL]:{name:"TzKal"},[b.TZTOK]:{name:"TzTok"},[b.UNHOLY]:{name:"Unholy"},[b.VAGRANT]:{name:"Vagrant"},[b.VANGUARD]:{name:"Vanguard"},[b.WALKER]:{name:"Walker"},[b.WANDERER]:{name:"Wanderer"},[b.WARDEN]:{name:"Warden"},[b.WARLOCK]:{name:"Warlock"},[b.WARRIOR]:{name:"Warrior"},[b.WATER]:{name:"Water"},[b.WILD]:{name:"Wild"},[b.WILLOW]:{name:"Willow"},[b.WILY]:{name:"Wily"},[b.WINTUMBER]:{name:"Wintumber"},[b.WITCH]:{name:"Witch"},[b.WIZARD]:{name:"Wizard"},[b.WORKER]:{name:"Worker"},[b.WRATH]:{name:"Wrath"},[b.XERICIAN]:{name:"Xerician"},[b.YELLOW]:{name:"Yellow"},[b.YEW]:{name:"Yew"},[b.ZAMORAKIAN]:{name:"Zamorakian"},[b.ZAROSIAN]:{name:"Zarosian"},[b.ZEALOT]:{name:"Zealot"},[b.ZENYTE]:{name:"Zenyte"}},(t,e)=>Object.assign(Object.assign({},t),{isPriveleged:UH.includes(e)}));var kl;(function(t){t.SKILL="skill",t.BOSS="boss",t.ACTIVITY="activity",t.COMPUTED="computed"})(kl||(kl={}));var Ol;(function(t){t.EXPERIENCE="experience",t.KILLS="kills",t.SCORE="score",t.VALUE="value"})(Ol||(Ol={}));const $H=Mh({[mt.OVERALL]:{name:"Overall"},[mt.ATTACK]:{name:"Attack",isCombat:!0},[mt.DEFENCE]:{name:"Defence",isCombat:!0},[mt.STRENGTH]:{name:"Strength",isCombat:!0},[mt.HITPOINTS]:{name:"Hitpoints",isCombat:!0},[mt.RANGED]:{name:"Ranged",isCombat:!0},[mt.PRAYER]:{name:"Prayer",isCombat:!0},[mt.MAGIC]:{name:"Magic",isCombat:!0},[mt.COOKING]:{name:"Cooking"},[mt.WOODCUTTING]:{name:"Woodcutting"},[mt.FLETCHING]:{name:"Fletching",isMembers:!0},[mt.FISHING]:{name:"Fishing"},[mt.FIREMAKING]:{name:"Firemaking"},[mt.CRAFTING]:{name:"Crafting"},[mt.SMITHING]:{name:"Smithing"},[mt.MINING]:{name:"Mining"},[mt.HERBLORE]:{name:"Herblore",isMembers:!0},[mt.AGILITY]:{name:"Agility",isMembers:!0},[mt.THIEVING]:{name:"Thieving",isMembers:!0},[mt.SLAYER]:{name:"Slayer",isMembers:!0},[mt.FARMING]:{name:"Farming",isMembers:!0},[mt.RUNECRAFTING]:{name:"Runecrafting"},[mt.HUNTER]:{name:"Hunter",isMembers:!0},[mt.CONSTRUCTION]:{name:"Construction",isMembers:!0}},t=>Object.assign(Object.assign({},t),{type:kl.SKILL,measure:Ol.EXPERIENCE,isCombat:"isCombat"in t?t.isCombat:!1,isMembers:"isMembers"in t?t.isMembers:!1})),HH=Mh({[he.ABYSSAL_SIRE]:{name:"Abyssal Sire"},[he.ALCHEMICAL_HYDRA]:{name:"Alchemical Hydra"},[he.ARTIO]:{name:"Artio"},[he.BARROWS_CHESTS]:{name:"Barrows Chests"},[he.BRYOPHYTA]:{name:"Bryophyta",isMembers:!1},[he.CALLISTO]:{name:"Callisto"},[he.CALVARION]:{name:"Calvar'ion"},[he.CERBERUS]:{name:"Cerberus"},[he.CHAMBERS_OF_XERIC]:{name:"Chambers Of Xeric"},[he.CHAMBERS_OF_XERIC_CM]:{name:"Chambers Of Xeric (CM)"},[he.CHAOS_ELEMENTAL]:{name:"Chaos Elemental"},[he.CHAOS_FANATIC]:{name:"Chaos Fanatic"},[he.COMMANDER_ZILYANA]:{name:"Commander Zilyana"},[he.CORPOREAL_BEAST]:{name:"Corporeal Beast"},[he.CRAZY_ARCHAEOLOGIST]:{name:"Crazy Archaeologist"},[he.DAGANNOTH_PRIME]:{name:"Dagannoth Prime"},[he.DAGANNOTH_REX]:{name:"Dagannoth Rex"},[he.DAGANNOTH_SUPREME]:{name:"Dagannoth Supreme"},[he.DERANGED_ARCHAEOLOGIST]:{name:"Deranged Archaeologist"},[he.DUKE_SUCELLUS]:{name:"Duke Sucellus"},[he.GENERAL_GRAARDOR]:{name:"General Graardor"},[he.GIANT_MOLE]:{name:"Giant Mole"},[he.GROTESQUE_GUARDIANS]:{name:"Grotesque Guardians"},[he.HESPORI]:{name:"Hespori"},[he.KALPHITE_QUEEN]:{name:"Kalphite Queen"},[he.KING_BLACK_DRAGON]:{name:"King Black Dragon"},[he.KRAKEN]:{name:"Kraken"},[he.KREEARRA]:{name:"Kree'Arra"},[he.KRIL_TSUTSAROTH]:{name:"K'ril Tsutsaroth"},[he.LUNAR_CHESTS]:{name:"Lunar Chests"},[he.MIMIC]:{name:"Mimic",minimumValue:1},[he.NEX]:{name:"Nex"},[he.NIGHTMARE]:{name:"Nightmare"},[he.PHOSANIS_NIGHTMARE]:{name:"Phosani's Nightmare"},[he.OBOR]:{name:"Obor",isMembers:!1},[he.PHANTOM_MUSPAH]:{name:"Phantom Muspah"},[he.SARACHNIS]:{name:"Sarachnis"},[he.SCORPIA]:{name:"Scorpia"},[he.SCURRIUS]:{name:"Scurrius"},[he.SKOTIZO]:{name:"Skotizo"},[he.SOL_HEREDIT]:{name:"Sol Heredit"},[he.SPINDEL]:{name:"Spindel"},[he.TEMPOROSS]:{name:"Tempoross"},[he.THE_GAUNTLET]:{name:"The Gauntlet"},[he.THE_CORRUPTED_GAUNTLET]:{name:"The Corrupted Gauntlet"},[he.THE_LEVIATHAN]:{name:"The Leviathan"},[he.THE_WHISPERER]:{name:"The Whisperer"},[he.THEATRE_OF_BLOOD]:{name:"Theatre Of Blood"},[he.THEATRE_OF_BLOOD_HARD_MODE]:{name:"Theatre Of Blood (HM)"},[he.THERMONUCLEAR_SMOKE_DEVIL]:{name:"Thermonuclear Smoke Devil"},[he.TOMBS_OF_AMASCUT]:{name:"Tombs of Amascut"},[he.TOMBS_OF_AMASCUT_EXPERT]:{name:"Tombs of Amascut (Expert Mode)"},[he.TZKAL_ZUK]:{name:"TzKal-Zuk",minimumValue:1},[he.TZTOK_JAD]:{name:"TzTok-Jad"},[he.VARDORVIS]:{name:"Vardorvis"},[he.VENENATIS]:{name:"Venenatis"},[he.VETION]:{name:"Vet'ion"},[he.VORKATH]:{name:"Vorkath"},[he.WINTERTODT]:{name:"Wintertodt"},[he.ZALCANO]:{name:"Zalcano"},[he.ZULRAH]:{name:"Zulrah"}},t=>Object.assign(Object.assign({},t),{type:kl.BOSS,measure:Ol.KILLS,isMembers:"isMembers"in t?t.isMembers:!0,minimumValue:"minimumValue"in t?t.minimumValue:5})),zH=Mh({[fn.LEAGUE_POINTS]:{name:"League Points",minimumValue:100},[fn.BOUNTY_HUNTER_HUNTER]:{name:"Bounty Hunter (Hunter)",minimumValue:2},[fn.BOUNTY_HUNTER_ROGUE]:{name:"Bounty Hunter (Rogue)",minimumValue:2},[fn.CLUE_SCROLLS_ALL]:{name:"Clue Scrolls (All)"},[fn.CLUE_SCROLLS_BEGINNER]:{name:"Clue Scrolls (Beginner)"},[fn.CLUE_SCROLLS_EASY]:{name:"Clue Scrolls (Easy)"},[fn.CLUE_SCROLLS_MEDIUM]:{name:"Clue Scrolls (Medium)"},[fn.CLUE_SCROLLS_HARD]:{name:"Clue Scrolls (Hard)"},[fn.CLUE_SCROLLS_ELITE]:{name:"Clue Scrolls (Elite)"},[fn.CLUE_SCROLLS_MASTER]:{name:"Clue Scrolls (Master)"},[fn.LAST_MAN_STANDING]:{name:"Last Man Standing",minimumValue:500},[fn.PVP_ARENA]:{name:"PvP Arena",minimumValue:2525},[fn.SOUL_WARS_ZEAL]:{name:"Soul Wars Zeal",minimumValue:200},[fn.GUARDIANS_OF_THE_RIFT]:{name:"Guardians of the Rift",minimumValue:2},[fn.COLOSSEUM_GLORY]:{name:"Colosseum Glory",minimumValue:300}},t=>Object.assign(Object.assign({},t),{type:kl.ACTIVITY,measure:Ol.SCORE,minimumValue:"minimumValue"in t?t.minimumValue:1})),jH=Mh({[Gf.EHP]:{name:"EHP"},[Gf.EHB]:{name:"EHB"}},t=>Object.assign(Object.assign({},t),{type:kl.COMPUTED,measure:Ol.VALUE})),q0=Object.assign(Object.assign(Object.assign(Object.assign({},$H),HH),zH),jH),WH=Object.values(j_),Ph=Object.values(mt),G0=Object.values(he),tN=Object.values(fn);Object.values(Gf);Ph.filter(t=>t!==mt.OVERALL);G0.filter(t=>!q0[t].isMembers);Ph.filter(t=>q0[t].isMembers);Ph.filter(t=>q0[t].isCombat);[...Ph,...G0,...tN];var nS;(function(t){t.MAIN="main",t.IRONMAN="ironman",t.ULTIMATE="ultimate",t.LVL3="lvl3",t.F2P="f2p",t.F2P_LVL3="f2p_lvl3",t.F2P_IRONMAN="f2p_ironman",t.F2P_LVL3_IRONMAN="f2p_lvl3_ironman"})(nS||(nS={}));var rS;(function(t){t[t.TEMPLE_OSRS=0]="TEMPLE_OSRS",t[t.CRYSTAL_MATH_LABS=1]="CRYSTAL_MATH_LABS"})(rS||(rS={}));class qH extends so{getEfficiencyLeaderboards(e,n){return this.getRequest("/efficiency/leaderboard",Object.assign(Object.assign({},e),n))}getEHPRates(e){return this.getRequest("/efficiency/rates",{metric:j_.EHP,type:e})}getEHBRates(e){return this.getRequest("/efficiency/rates",{metric:j_.EHB,type:e})}}class GH extends so{searchNameChanges(e,n){return this.getRequest("/names",Object.assign(Object.assign({},e),n))}submitNameChange(e,n){return this.postRequest("/names",{oldName:e,newName:n})}}class KH extends so{searchCompetitions(e,n){return this.getRequest("/competitions",Object.assign(Object.assign({},e),n))}getCompetitionDetails(e,n){return this.getRequest(`/competitions/${e}`,{metric:n})}getCompetitionDetailsCSV(e,n){return this.getText(`/competitions/${e}/csv`,Object.assign({metric:n.previewMetric},n))}getCompetitionTopHistory(e,n){return this.getRequest(`/competitions/${e}/top-history`,{metric:n})}createCompetition(e){return this.postRequest("/competitions",e)}editCompetition(e,n,r){return this.putRequest(`/competitions/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteCompetition(e,n){return this.deleteRequest(`/competitions/${e}`,{verificationCode:n})}addParticipants(e,n,r){return this.postRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}removeParticipants(e,n,r){return this.deleteRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}addTeams(e,n,r){return this.postRequest(`/competitions/${e}/teams`,{verificationCode:r,teams:n})}removeTeams(e,n,r){return this.deleteRequest(`/competitions/${e}/teams`,{verificationCode:r,teamNames:n})}updateAll(e,n){return this.postRequest(`/competitions/${e}/update-all`,{verificationCode:n})}}class K0 extends so{constructor(e){const n=(e==null?void 0:e.baseAPIUrl)||Zw.baseAPIUrl,r={"x-user-agent":(e==null?void 0:e.userAgent)||Zw.defaultUserAgent};e!=null&&e.apiKey&&(r["x-api-key"]=e.apiKey),super(r,n),this.deltas=new LH(r,n),this.groups=new VH(r,n),this.players=new FH(r,n),this.records=new BH(r,n),this.efficiency=new qH(r,n),this.nameChanges=new GH(r,n),this.competitions=new KH(r,n)}}const YH={key:0},JH=E("h1",null,"Create new Bingo",-1),QH={key:0},XH={key:2},ZH=hn({__name:"newBoard.vapor",async setup(t){let e,n;const r=([e,n]=pa(()=>oh()),e=await e,n(),e),i=me(!1),s=me(40963),o=me(),a=new K0,l=me({}),c=me({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),u=me({}),h=async()=>{!s.value||s.value<=0||isNaN(s.value)||await a.competitions.getCompetitionDetails(s.value).then(async p=>{if(p!=null&&p.message)throw new Error("Error creating bingo: "+p.message);if((p==null?void 0:p.metric)!="overall")throw new Error("Error creating bingo: Metric should be set to `Overall`");if((p==null?void 0:p.type)!="team")throw new Error("Error creating bingo: Type should be set to `Team`");if(!(p!=null&&p.participations))throw new Error("Error creating bingo: No participants found");if(new Date>p.endsAt)throw new Error("Error creating bingo: Competition has already ended");const m=gt(Ke,"Boards",s.value.toString());if((await wi(m)).exists())throw new Error("Error creating bingo: Board already exists");u.value={name:p.title,start:p.startsAt,end:p.endsAt,published:!1},l.value=d(p),i.value=!0}).catch(p=>{o.value=p.message})},d=p=>{var y;const m=me(),g=me({});return m.value=p.participations,(y=m.value)==null||y.map(_=>{g.value[_.teamName]={teamName:_.teamName,players:[],stats:null}}),m.value.map(_=>{delete _.player.ehb,delete _.player.exp,delete _.player.ehp,g.value[_.teamName].players=[...g.value[_.teamName].players,g.value[_.teamName].players[_.player.username]={..._.player}]}),g.value},f=async()=>{const p=gt(Ke,"Boards",s.value.toString());r&&await Ow(p,{ownerID:r.uid}).then(()=>{const m=gt(Ke,"Users",r.uid);for(let g in l.value){const y=gt(zi(Ke,"Boards",p.id,"Groups")),_=l.value[g];Ow(gt(Ke,y.path),{teamName:_.teamName,teamId:y.id,players:l.value[g].players,stats:null})}zf(p,{name:u.value.name,start:u.value.start,end:u.value.end}),zf(m,{boards:hU(p.id)})}),i.value=!1};return(p,m)=>{var g,y;return ue(r)?(z(),te("div",YH,[JH,o.value?(z(),te("p",QH,Ie(o.value),1)):Pe("",!0),qt(E("input",{type:"number","onUpdate:modelValue":m[0]||(m[0]=_=>s.value=_),placeholder:"12345 WOM Team competition code",min:"0",onFocusin:m[1]||(m[1]=()=>{o.value=""})},null,544),[[Pr,s.value]]),E("button",{onClick:m[2]||(m[2]=_=>h())},"Create new Bingo"),i.value?(z(),te("button",{key:1,onClick:m[3]||(m[3]=_=>f())},"finish setup")):Pe("",!0),l.value!==null&&i.value?(z(),te("div",XH,[E("h1",null,Ie(u.value.name),1),u.value.start?(z(),te(ke,{key:0},[E("p",null," Starts: "+Ie(u.value.start.toLocaleDateString(void 0,c.value)),1),E("code",null,"<t:"+Ie(((g=u.value.start)==null?void 0:g.valueOf())/1e3)+":F>",1)],64)):Pe("",!0),u.value.end?(z(),te(ke,{key:1},[E("p",null," Ends: "+Ie(u.value.end.toLocaleDateString(void 0,c.value)),1),E("code",null,"<t:"+Ie(((y=u.value.end)==null?void 0:y.valueOf())/1e3)+":F>",1)],64)):Pe("",!0),(z(!0),te(ke,null,Pn(l.value,_=>(z(),te("div",{key:_.teamName},[Te(Ie(_)+" ",1),E("h2",null,Ie(_.teamName),1),(z(!0),te(ke,null,Pn(_.players,I=>(z(),te("div",{key:I.username},[E("div",null,Ie(I.username),1)]))),128))]))),128))])):Pe("",!0)])):Pe("",!0)}}}),ez=hn({__name:"userBoardListItems.vapor",props:{boardID:{}},async setup(t){let e,n;const r=t,{data:i,promise:s}=Im(gt(Ke,"Boards",r.boardID));[e,n]=pa(()=>Promise.all([s.value])),await e,n();const o=()=>{var a;if((a=i.value)!=null&&a.published){i.value.published=!i.value.published,zf(gt(Ke,"Boards",r.boardID),{published:i.value.published});return}zf(gt(Ke,"Boards",r.boardID),{published:!0})};return(a,l)=>{var u,h,d,f;const c=Cp("router-link");return z(),te(ke,null,[ue(i)?(z(),te("label",{key:(u=ue(i))==null?void 0:u.id},[Te(Ie((h=ue(i))==null?void 0:h.name)+" ",1),Se(c,{to:{name:"editBoard",params:{boardUUID:(d=ue(i))==null?void 0:d.id}},class:"btn",icon:""},{default:hr(()=>[Te(" edit ")]),_:1},8,["to"])])):Pe("",!0),Se(c,{to:{name:"viewBoard",params:{boardUUID:(f=ue(i))==null?void 0:f.id}},class:"btn",icon:""},{default:hr(()=>[Te(" visibility ")]),_:1},8,["to"]),qt(E("input",{type:"checkbox",onClick:o,toggle:"","onUpdate:modelValue":l[0]||(l[0]=p=>ue(i).published=p)},null,512),[[Fy,ue(i).published]])],64)}}}),tz={key:0},nz=E("h1",null,"Log in",-1),rz=E("p",null,"you need to be signed in to edit, create and moderate a board",-1),iz=E("h1",null,"User details",-1),sz=E("h2",null,"Boards",-1),oz=hn({__name:"loginView.vapor",async setup(t){let e,n;const r=Oh(),i=new Di,s=JU(),o=TV(),a=me();if(o.value){const{data:d,promise:f}=Im(gt(Ke,"Users",o.value.uid));[e,n]=pa(()=>f.value.then(()=>{var p;a.value=(p=d.value)==null?void 0:p.boards})),await e,n()}const l=Rm(),c=()=>o.value?"User details":"log in";l.value=c()+" - Bingo Bongo";const u=()=>{GL(s,i).then(()=>{r.push({name:"Home"})}).catch(d=>{const f=d.message;console.error(f)})},h=()=>{AL(s).then(()=>r.push({name:"Home"}))};return(d,f)=>ue(o)?(z(),te(ke,{key:1},[E("div",null,[iz,E("button",{class:"btn",onClick:We(h,["prevent"])},"Log out")]),E("div",null,[sz,E("ul",null,[(z(!0),te(ke,null,Pn(a.value,p=>(z(),te("li",null,[(z(),Bt(ez,{boardID:p,key:p},null,8,["boardID"]))]))),256))])])],64)):(z(),te("div",tz,[nz,rz,ue(o)?Pe("",!0):(z(),te("button",{key:0,class:"btn",onClick:We(u,["prevent"])},"Log in with Google"))]))}});/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function iS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ii(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iS(Object(n),!0).forEach(function(r){az(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jd(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jd=function(e){return typeof e}:jd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(t)}function az(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xi(){return Xi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xi.apply(this,arguments)}function lz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cz(t,e){if(t==null)return{};var n=lz(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var uz="1.15.2";function Gi(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var is=Gi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xh=Gi(/Edge/i),sS=Gi(/firefox/i),Jc=Gi(/safari/i)&&!Gi(/chrome/i)&&!Gi(/android/i),nN=Gi(/iP(ad|od|hone)/i),rN=Gi(/chrome/i)&&Gi(/android/i),iN={capture:!1,passive:!1};function rt(t,e,n){t.addEventListener(e,n,!is&&iN)}function et(t,e,n){t.removeEventListener(e,n,!is&&iN)}function Kf(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function hz(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function xr(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Kf(t,e):Kf(t,e))||r&&t===n)return t;if(t===n)break}while(t=hz(t))}return null}var oS=/\s+/g;function rr(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(oS," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(oS," ")}}function Ae(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function ol(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Ae(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function sN(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function mi(){var t=document.scrollingElement;return t||document.documentElement}function $t(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,u,h;if(t!==window&&t.parentNode&&t!==mi()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!is))do if(i&&i.getBoundingClientRect&&(Ae(i,"transform")!=="none"||n&&Ae(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(Ae(i,"border-top-width")),a-=d.left+parseInt(Ae(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var f=ol(i||t),p=f&&f.a,m=f&&f.d;f&&(o/=m,a/=p,h/=p,u/=m,l=o+u,c=a+h)}return{top:o,left:a,bottom:l,right:c,width:h,height:u}}}function aS(t,e,n){for(var r=Os(t,!0),i=$t(t)[e];r;){var s=$t(r)[n],o=void 0;if(n==="top"||n==="left"?o=i>=s:o=i<=s,!o)return r;if(r===mi())break;r=Os(r,!1)}return!1}function Nl(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Ce.ghost&&(r||o[s]!==Ce.dragged)&&xr(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function Y0(t,e){for(var n=t.lastElementChild;n&&(n===Ce.ghost||Ae(n,"display")==="none"||e&&!Kf(n,e));)n=n.previousElementSibling;return n||null}function Er(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ce.clone&&(!e||Kf(t,e))&&n++;return n}function lS(t){var e=0,n=0,r=mi();if(t)do{var i=ol(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function dz(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Os(t,e){if(!t||!t.getBoundingClientRect)return mi();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Ae(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return mi();if(r||e)return n;r=!0}}while(n=n.parentNode);return mi()}function fz(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Lg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Qc;function oN(t,e){return function(){if(!Qc){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Qc=setTimeout(function(){Qc=void 0},e)}}}function pz(){clearTimeout(Qc),Qc=void 0}function aN(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function lN(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function cN(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var s,o,a,l;if(!(!xr(i,e.draggable,t,!1)||i.animated||i===n)){var c=$t(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var ar="Sortable"+new Date().getTime();function mz(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Ae(i,"display")==="none"||i===Ce.ghost)){t.push({target:i,rect:$t(i)});var s=Ii({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=ol(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(dz(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=$t(c),d=c.prevFromRect,f=c.prevToRect,p=a.rect,m=ol(c,!0);m&&(h.top-=m.f,h.left-=m.e),c.toRect=h,c.thisAnimationDuration&&Lg(d,h)&&!Lg(u,h)&&(p.top-h.top)/(p.left-h.left)===(u.top-h.top)/(u.left-h.left)&&(l=yz(p,d,f,i.options)),Lg(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=i.options.animation),i.animate(c,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){Ae(r,"transition",""),Ae(r,"transform","");var a=ol(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-s.left)/(l||1),h=(i.top-s.top)/(c||1);r.animatingX=!!u,r.animatingY=!!h,Ae(r,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=gz(r),Ae(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Ae(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Ae(r,"transition",""),Ae(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function gz(t){return t.offsetWidth}function yz(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Aa=[],Vg={initializeByDefault:!0},Dh={mount:function(e){for(var n in Vg)Vg.hasOwnProperty(n)&&!(n in e)&&(e[n]=Vg[n]);Aa.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Aa.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Aa.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Ii({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Ii({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Aa.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Xi(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Aa.forEach(function(i){typeof i.eventProperties=="function"&&Xi(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Aa.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function _z(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[ar],!!e){var m,g=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!is&&!xh?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||n,m.from=a||n,m.item=i||n,m.clone=s,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=d,m.pullMode=f?f.lastPutMode:void 0;var _=Ii(Ii({},p),Dh.getEventProperties(r,e));for(var I in _)m[I]=_[I];n&&n.dispatchEvent(m),g[y]&&g[y].call(e,m)}}var vz=["evt"],Gn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=cz(r,vz);Dh.pluginEvent.bind(Ce)(e,n,Ii({dragEl:X,parentEl:Mt,ghostEl:Le,rootEl:At,nextEl:vo,lastDownEl:Wd,cloneEl:Rt,cloneHidden:Cs,dragStarted:wc,putSortable:pn,activeSortable:Ce.active,originalEvent:i,oldIndex:Ua,oldDraggableIndex:Xc,newIndex:ir,newDraggableIndex:Es,hideGhostForTarget:fN,unhideGhostForTarget:pN,cloneNowHidden:function(){Cs=!0},cloneNowShown:function(){Cs=!1},dispatchSortableEvent:function(a){Un({sortable:n,name:a,originalEvent:i})}},s))};function Un(t){_z(Ii({putSortable:pn,cloneEl:Rt,targetEl:X,rootEl:At,oldIndex:Ua,oldDraggableIndex:Xc,newIndex:ir,newDraggableIndex:Es},t))}var X,Mt,Le,At,vo,Wd,Rt,Cs,Ua,ir,Xc,Es,dd,pn,xa=!1,Yf=!1,Jf=[],mo,Nr,Fg,Bg,cS,uS,wc,Ca,Zc,eu=!1,fd=!1,qd,An,Ug=[],W_=!1,Qf=[],km=typeof document<"u",pd=nN,hS=xh||is?"cssFloat":"float",bz=km&&!rN&&!nN&&"draggable"in document.createElement("div"),uN=function(){if(km){if(is)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),hN=function(e,n){var r=Ae(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Nl(e,0,n),o=Nl(e,1,n),a=s&&Ae(s),l=o&&Ae(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+$t(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+$t(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[hS]==="none"||o&&r[hS]==="none"&&c+u>i)?"vertical":"horizontal"},Ez=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},Tz=function(e,n){var r;return Jf.some(function(i){var s=i[ar].options.emptyInsertThreshold;if(!(!s||Y0(i))){var o=$t(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},dN=function(e){function n(s,o){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,u),o)(a,l,c,u);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},i=e.group;(!i||jd(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},fN=function(){!uN&&Le&&Ae(Le,"display","none")},pN=function(){!uN&&Le&&Ae(Le,"display","")};km&&!rN&&document.addEventListener("click",function(t){if(Yf)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Yf=!1,!1},!0);var go=function(e){if(X){e=e.touches?e.touches[0]:e;var n=Tz(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[ar]._onDragOver(r)}}},wz=function(e){X&&X.parentNode[ar]._isOutsideThisEl(e.target)};function Ce(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Xi({},e),t[ar]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return hN(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ce.supportPointer!==!1&&"PointerEvent"in window&&!Jc,emptyInsertThreshold:5};Dh.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);dN(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:bz,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?rt(t,"pointerdown",this._onTapStart):(rt(t,"mousedown",this._onTapStart),rt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(rt(t,"dragover",this),rt(t,"dragenter",this)),Jf.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xi(this,mz())}Ce.prototype={constructor:Ce,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ca=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,X):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(Nz(r),!X&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Jc&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=xr(l,i.draggable,r,!1),!(l&&l.animated)&&Wd!==l)){if(Ua=Er(l),Xc=Er(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Un({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Gn("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=xr(c,h.trim(),r,!1),h)return Un({sortable:n,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),Gn("filter",n,{evt:e}),!0}),u)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!xr(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!X&&r.parentNode===s){var c=$t(r);if(At=s,X=r,Mt=X.parentNode,vo=X.nextSibling,Wd=r,dd=o.group,Ce.dragged=X,mo={target:X,clientX:(n||e).clientX,clientY:(n||e).clientY},cS=mo.clientX-c.left,uS=mo.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,X.style["will-change"]="all",l=function(){if(Gn("delayEnded",i,{evt:e}),Ce.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!sS&&i.nativeDraggable&&(X.draggable=!0),i._triggerDragStart(e,n),Un({sortable:i,name:"choose",originalEvent:e}),rr(X,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){sN(X,u.trim(),$g)}),rt(a,"dragover",go),rt(a,"mousemove",go),rt(a,"touchmove",go),rt(a,"mouseup",i._onDrop),rt(a,"touchend",i._onDrop),rt(a,"touchcancel",i._onDrop),sS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),Gn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(xh||is))){if(Ce.eventCanceled){this._onDrop();return}rt(a,"mouseup",i._disableDelayedDrag),rt(a,"touchend",i._disableDelayedDrag),rt(a,"touchcancel",i._disableDelayedDrag),rt(a,"mousemove",i._delayedDragTouchMoveHandler),rt(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&rt(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&$g(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;et(e,"mouseup",this._disableDelayedDrag),et(e,"touchend",this._disableDelayedDrag),et(e,"touchcancel",this._disableDelayedDrag),et(e,"mousemove",this._delayedDragTouchMoveHandler),et(e,"touchmove",this._delayedDragTouchMoveHandler),et(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?rt(document,"pointermove",this._onTouchMove):n?rt(document,"touchmove",this._onTouchMove):rt(document,"mousemove",this._onTouchMove):(rt(X,"dragend",this),rt(At,"dragstart",this._onDragStart));try{document.selection?Gd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(xa=!1,At&&X){Gn("dragStarted",this,{evt:n}),this.nativeDraggable&&rt(document,"dragover",wz);var r=this.options;!e&&rr(X,r.dragClass,!1),rr(X,r.ghostClass,!0),Ce.active=this,e&&this._appendGhost(),Un({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Nr){this._lastX=Nr.clientX,this._lastY=Nr.clientY,fN();for(var e=document.elementFromPoint(Nr.clientX,Nr.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Nr.clientX,Nr.clientY),e!==n);)n=e;if(X.parentNode[ar]._isOutsideThisEl(e),n)do{if(n[ar]){var r=void 0;if(r=n[ar]._onDragOver({clientX:Nr.clientX,clientY:Nr.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);pN()}},_onTouchMove:function(e){if(mo){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Le&&ol(Le,!0),a=Le&&o&&o.a,l=Le&&o&&o.d,c=pd&&An&&lS(An),u=(s.clientX-mo.clientX+i.x)/(a||1)+(c?c[0]-Ug[0]:0)/(a||1),h=(s.clientY-mo.clientY+i.y)/(l||1)+(c?c[1]-Ug[1]:0)/(l||1);if(!Ce.active&&!xa){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Le){o?(o.e+=u-(Fg||0),o.f+=h-(Bg||0)):o={a:1,b:0,c:0,d:1,e:u,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Ae(Le,"webkitTransform",d),Ae(Le,"mozTransform",d),Ae(Le,"msTransform",d),Ae(Le,"transform",d),Fg=u,Bg=h,Nr=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Le){var e=this.options.fallbackOnBody?document.body:At,n=$t(X,!0,pd,!0,e),r=this.options;if(pd){for(An=e;Ae(An,"position")==="static"&&Ae(An,"transform")==="none"&&An!==document;)An=An.parentNode;An!==document.body&&An!==document.documentElement?(An===document&&(An=mi()),n.top+=An.scrollTop,n.left+=An.scrollLeft):An=mi(),Ug=lS(An)}Le=X.cloneNode(!0),rr(Le,r.ghostClass,!1),rr(Le,r.fallbackClass,!0),rr(Le,r.dragClass,!0),Ae(Le,"transition",""),Ae(Le,"transform",""),Ae(Le,"box-sizing","border-box"),Ae(Le,"margin",0),Ae(Le,"top",n.top),Ae(Le,"left",n.left),Ae(Le,"width",n.width),Ae(Le,"height",n.height),Ae(Le,"opacity","0.8"),Ae(Le,"position",pd?"absolute":"fixed"),Ae(Le,"zIndex","100000"),Ae(Le,"pointerEvents","none"),Ce.ghost=Le,e.appendChild(Le),Ae(Le,"transform-origin",cS/parseInt(Le.style.width)*100+"% "+uS/parseInt(Le.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Gn("dragStart",this,{evt:e}),Ce.eventCanceled){this._onDrop();return}Gn("setupClone",this),Ce.eventCanceled||(Rt=lN(X),Rt.removeAttribute("id"),Rt.draggable=!1,Rt.style["will-change"]="",this._hideClone(),rr(Rt,this.options.chosenClass,!1),Ce.clone=Rt),r.cloneId=Gd(function(){Gn("clone",r),!Ce.eventCanceled&&(r.options.removeCloneOnHide||At.insertBefore(Rt,X),r._hideClone(),Un({sortable:r,name:"clone"}))}),!n&&rr(X,s.dragClass,!0),n?(Yf=!0,r._loopId=setInterval(r._emulateDragOver,50)):(et(document,"mouseup",r._onDrop),et(document,"touchend",r._onDrop),et(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,X)),rt(document,"drop",r),Ae(X,"transform","translateZ(0)")),xa=!0,r._dragStartId=Gd(r._dragStarted.bind(r,n,e)),rt(document,"selectstart",r),wc=!0,Jc&&Ae(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Ce.active,u=dd===l,h=a.sort,d=pn||c,f,p=this,m=!1;if(W_)return;function g(V,oe){Gn(V,p,Ii({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:d,target:r,completed:_,onMove:function(Re,$e){return md(At,n,X,i,Re,$t(Re),e,$e)},changed:I},oe))}function y(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _(V){return g("dragOverCompleted",{insertion:V}),V&&(u?c._hideClone():c._showClone(p),p!==d&&(rr(X,pn?pn.options.ghostClass:c.options.ghostClass,!1),rr(X,a.ghostClass,!0)),pn!==p&&p!==Ce.active?pn=p:p===Ce.active&&pn&&(pn=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===X&&!X.animated||r===n&&!r.animated)&&(Ca=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(X.parentNode[ar]._isOutsideThisEl(e.target),!V&&go(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function I(){ir=Er(X),Es=Er(X,a.draggable),Un({sortable:p,name:"change",toEl:n,newIndex:ir,newDraggableIndex:Es,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=xr(r,a.draggable,n,!0),g("dragOver"),Ce.eventCanceled)return m;if(X.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return _(!1);if(Yf=!1,c&&!a.disabled&&(u?h||(o=Mt!==At):pn===this||(this.lastPutMode=dd.checkPull(this,c,X,e))&&l.checkPut(this,c,X,e))){if(f=this._getDirection(e,r)==="vertical",i=$t(X),g("dragOverValid"),Ce.eventCanceled)return m;if(o)return Mt=At,y(),this._hideClone(),g("revert"),Ce.eventCanceled||(vo?At.insertBefore(X,vo):At.appendChild(X)),_(!0);var S=Y0(n,a.draggable);if(!S||Cz(e,f,this)&&!S.animated){if(S===X)return _(!1);if(S&&n===e.target&&(r=S),r&&(s=$t(r)),md(At,n,X,i,r,s,e,!!r)!==!1)return y(),S&&S.nextSibling?n.insertBefore(X,S.nextSibling):n.appendChild(X),Mt=n,I(),_(!0)}else if(S&&Az(e,f,this)){var w=Nl(n,0,a,!0);if(w===X)return _(!1);if(r=w,s=$t(r),md(At,n,X,i,r,s,e,!1)!==!1)return y(),n.insertBefore(X,w),Mt=n,I(),_(!0)}else if(r.parentNode===n){s=$t(r);var A=0,L,N=X.parentNode!==n,O=!Ez(X.animated&&X.toRect||i,r.animated&&r.toRect||s,f),U=f?"top":"left",K=aS(r,"top","top")||aS(X,"top","top"),j=K?K.scrollTop:void 0;Ca!==r&&(L=s[U],eu=!1,fd=!O&&a.invertSwap||N),A=Rz(e,r,s,f,O?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,fd,Ca===r);var le;if(A!==0){var J=Er(X);do J-=A,le=Mt.children[J];while(le&&(Ae(le,"display")==="none"||le===Le))}if(A===0||le===r)return _(!1);Ca=r,Zc=A;var H=r.nextElementSibling,C=!1;C=A===1;var $=md(At,n,X,i,r,s,e,C);if($!==!1)return($===1||$===-1)&&(C=$===1),W_=!0,setTimeout(Iz,30),y(),C&&!H?n.appendChild(X):r.parentNode.insertBefore(X,C?H:r),K&&aN(K,0,j-K.scrollTop),Mt=X.parentNode,L!==void 0&&!fd&&(qd=Math.abs(L-$t(r)[U])),I(),_(!0)}if(n.contains(X))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){et(document,"mousemove",this._onTouchMove),et(document,"touchmove",this._onTouchMove),et(document,"pointermove",this._onTouchMove),et(document,"dragover",go),et(document,"mousemove",go),et(document,"touchmove",go)},_offUpEvents:function(){var e=this.el.ownerDocument;et(e,"mouseup",this._onDrop),et(e,"touchend",this._onDrop),et(e,"pointerup",this._onDrop),et(e,"touchcancel",this._onDrop),et(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(ir=Er(X),Es=Er(X,r.draggable),Gn("drop",this,{evt:e}),Mt=X&&X.parentNode,ir=Er(X),Es=Er(X,r.draggable),Ce.eventCanceled){this._nulling();return}xa=!1,fd=!1,eu=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),q_(this.cloneId),q_(this._dragStartId),this.nativeDraggable&&(et(document,"drop",this),et(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Jc&&Ae(document.body,"user-select",""),Ae(X,"transform",""),e&&(wc&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Le&&Le.parentNode&&Le.parentNode.removeChild(Le),(At===Mt||pn&&pn.lastPutMode!=="clone")&&Rt&&Rt.parentNode&&Rt.parentNode.removeChild(Rt),X&&(this.nativeDraggable&&et(X,"dragend",this),$g(X),X.style["will-change"]="",wc&&!xa&&rr(X,pn?pn.options.ghostClass:this.options.ghostClass,!1),rr(X,this.options.chosenClass,!1),Un({sortable:this,name:"unchoose",toEl:Mt,newIndex:null,newDraggableIndex:null,originalEvent:e}),At!==Mt?(ir>=0&&(Un({rootEl:Mt,name:"add",toEl:Mt,fromEl:At,originalEvent:e}),Un({sortable:this,name:"remove",toEl:Mt,originalEvent:e}),Un({rootEl:Mt,name:"sort",toEl:Mt,fromEl:At,originalEvent:e}),Un({sortable:this,name:"sort",toEl:Mt,originalEvent:e})),pn&&pn.save()):ir!==Ua&&ir>=0&&(Un({sortable:this,name:"update",toEl:Mt,originalEvent:e}),Un({sortable:this,name:"sort",toEl:Mt,originalEvent:e})),Ce.active&&((ir==null||ir===-1)&&(ir=Ua,Es=Xc),Un({sortable:this,name:"end",toEl:Mt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Gn("nulling",this),At=X=Mt=Le=vo=Rt=Wd=Cs=mo=Nr=wc=ir=Es=Ua=Xc=Ca=Zc=pn=dd=Ce.dragged=Ce.ghost=Ce.clone=Ce.active=null,Qf.forEach(function(e){e.checked=!0}),Qf.length=Fg=Bg=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":X&&(this._onDragOver(e),Sz(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],xr(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Oz(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];xr(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return xr(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Dh.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&dN(r)},destroy:function(){Gn("destroy",this);var e=this.el;e[ar]=null,et(e,"mousedown",this._onTapStart),et(e,"touchstart",this._onTapStart),et(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(et(e,"dragover",this),et(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Jf.splice(Jf.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Cs){if(Gn("hideClone",this),Ce.eventCanceled)return;Ae(Rt,"display","none"),this.options.removeCloneOnHide&&Rt.parentNode&&Rt.parentNode.removeChild(Rt),Cs=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Cs){if(Gn("showClone",this),Ce.eventCanceled)return;X.parentNode==At&&!this.options.group.revertClone?At.insertBefore(Rt,X):vo?At.insertBefore(Rt,vo):At.appendChild(Rt),this.options.group.revertClone&&this.animate(X,Rt),Ae(Rt,"display",""),Cs=!1}}};function Sz(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function md(t,e,n,r,i,s,o,a){var l,c=t[ar],u=c.options.onMove,h;return window.CustomEvent&&!is&&!xh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||$t(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),u&&(h=u.call(c,l,o)),h}function $g(t){t.draggable=!1}function Iz(){W_=!1}function Az(t,e,n){var r=$t(Nl(n.el,0,n.options,!0)),i=cN(n.el,n.options,Le),s=10;return e?t.clientX<i.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-s||t.clientY<r.bottom&&t.clientX<r.left}function Cz(t,e,n){var r=$t(Y0(n.el,n.options.draggable)),i=cN(n.el,n.options,Le),s=10;return e?t.clientX>i.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+s||t.clientX>r.right&&t.clientY>r.top}function Rz(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,h=r?n.bottom:n.right,d=!1;if(!o){if(a&&qd<c*i){if(!eu&&(Zc===1?l>u+c*s/2:l<h-c*s/2)&&(eu=!0),eu)d=!0;else if(Zc===1?l<u+qd:l>h-qd)return-Zc}else if(l>u+c*(1-i)/2&&l<h-c*(1-i)/2)return kz(e)}return d=d||o,d&&(l<u+c*s/2||l>h-c*s/2)?l>u+c/2?1:-1:0}function kz(t){return Er(X)<Er(t)?1:-1}function Oz(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function Nz(t){Qf.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Qf.push(r)}}function Gd(t){return setTimeout(t,0)}function q_(t){return clearTimeout(t)}km&&rt(document,"touchmove",function(t){(Ce.active||xa)&&t.cancelable&&t.preventDefault()});Ce.utils={on:rt,off:et,css:Ae,find:sN,is:function(e,n){return!!xr(e,n,e,!1)},extend:fz,throttle:oN,closest:xr,toggleClass:rr,clone:lN,index:Er,nextTick:Gd,cancelNextTick:q_,detectDirection:hN,getChild:Nl};Ce.get=function(t){return t[ar]};Ce.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ce.utils=Ii(Ii({},Ce.utils),r.utils)),Dh.mount(r)})};Ce.create=function(t,e){return new Ce(t,e)};Ce.version=uz;var Ft=[],Sc,G_,K_=!1,Hg,zg,Xf,Ic;function Mz(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?rt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?rt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?rt(document,"touchmove",this._handleFallbackAutoScroll):rt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?et(document,"dragover",this._handleAutoScroll):(et(document,"pointermove",this._handleFallbackAutoScroll),et(document,"touchmove",this._handleFallbackAutoScroll),et(document,"mousemove",this._handleFallbackAutoScroll)),dS(),Kd(),pz()},nulling:function(){Xf=G_=Sc=K_=Ic=Hg=zg=null,Ft.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(Xf=n,r||this.options.forceAutoScrollFallback||xh||is||Jc){jg(n,this.options,a,r);var l=Os(a,!0);K_&&(!Ic||s!==Hg||o!==zg)&&(Ic&&dS(),Ic=setInterval(function(){var c=Os(document.elementFromPoint(s,o),!0);c!==l&&(l=c,Kd()),jg(n,i.options,c,r)},10),Hg=s,zg=o)}else{if(!this.options.bubbleScroll||Os(a,!0)===mi()){Kd();return}jg(n,this.options,Os(a,!1),!1)}}},Xi(t,{pluginName:"scroll",initializeByDefault:!0})}function Kd(){Ft.forEach(function(t){clearInterval(t.pid)}),Ft=[]}function dS(){clearInterval(Ic)}var jg=oN(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=mi(),c=!1,u;G_!==n&&(G_=n,Kd(),Sc=e.scroll,u=e.scrollFn,Sc===!0&&(Sc=Os(n,!0)));var h=0,d=Sc;do{var f=d,p=$t(f),m=p.top,g=p.bottom,y=p.left,_=p.right,I=p.width,S=p.height,w=void 0,A=void 0,L=f.scrollWidth,N=f.scrollHeight,O=Ae(f),U=f.scrollLeft,K=f.scrollTop;f===l?(w=I<L&&(O.overflowX==="auto"||O.overflowX==="scroll"||O.overflowX==="visible"),A=S<N&&(O.overflowY==="auto"||O.overflowY==="scroll"||O.overflowY==="visible")):(w=I<L&&(O.overflowX==="auto"||O.overflowX==="scroll"),A=S<N&&(O.overflowY==="auto"||O.overflowY==="scroll"));var j=w&&(Math.abs(_-i)<=o&&U+I<L)-(Math.abs(y-i)<=o&&!!U),le=A&&(Math.abs(g-s)<=o&&K+S<N)-(Math.abs(m-s)<=o&&!!K);if(!Ft[h])for(var J=0;J<=h;J++)Ft[J]||(Ft[J]={});(Ft[h].vx!=j||Ft[h].vy!=le||Ft[h].el!==f)&&(Ft[h].el=f,Ft[h].vx=j,Ft[h].vy=le,clearInterval(Ft[h].pid),(j!=0||le!=0)&&(c=!0,Ft[h].pid=setInterval((function(){r&&this.layer===0&&Ce.active._onTouchMove(Xf);var H=Ft[this.layer].vy?Ft[this.layer].vy*a:0,C=Ft[this.layer].vx?Ft[this.layer].vx*a:0;typeof u=="function"&&u.call(Ce.dragged.parentNode[ar],C,H,t,Xf,Ft[this.layer].el)!=="continue"||aN(Ft[this.layer].el,C,H)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=Os(d,!1)));K_=c}},30),mN=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function J0(){}J0.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Nl(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:mN};Xi(J0,{pluginName:"revertOnSpill"});function Q0(){}Q0.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:mN};Xi(Q0,{pluginName:"removeOnSpill"});Ce.mount(new Mz);Ce.mount(Q0,J0);function Pz(t,e,n={}){let r;const{document:i=YO,...s}=n,o={onUpdate:u=>{gN(e,u.oldIndex,u.newIndex)}},a=()=>{const u=typeof t=="string"?i==null?void 0:i.querySelector(t):KO(t);!u||r!==void 0||(r=new Ce(u,{...o,...s}))},l=()=>{r==null||r.destroy(),r=void 0},c=(u,h)=>{if(h!==void 0)r==null||r.option(u,h);else return r==null?void 0:r.option(u)};return uH(a),WO(l),{stop:l,start:a,option:c}}function gN(t,e,n){const r=an(t),i=r?[...Lu(t)]:Lu(t);if(n>=0&&n<i.length){const s=i.splice(e,1)[0];Ul(()=>{i.splice(n,0,s),r&&(t.value=i)})}}function xz(){let t=["Bal","Bar","Dal","Dar","Den","Dok","Jar","Jik","Lar","Rak","Ral","Ril","Sig","Tal","Thor","Ton"],e=["dar","dor","dur","kal","kar","kir","kur","lah","lak","lim","lor","rak","tin","ton","tor","vald"],n=["Rockcrusher","Spinewielder","Skullbearer","Drpare"];return t[Math.floor(Math.random()*t.length)]+e[Math.floor(Math.random()*e.length)]+" "+n[Math.floor(Math.random()*n.length)]}function Y_(t=4){let e=t,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}const Dz={class:"header"},Lz={class:"body"},Vz={class:"controls"},Fz=hn({__name:"Modal.vapor",setup(t,{expose:e}){const n=me();return e({showModal:()=>{n.value&&n.value.showModal()},closeModal:()=>{n.value&&n.value.close()}}),(s,o)=>(z(),te("dialog",{ref_key:"dialog",ref:n,class:"danger"},[E("div",Dz,[Zt(s.$slots,"header")]),E("div",Lz,[Zt(s.$slots,"body")]),E("div",Vz,[Zt(s.$slots,"controls")])],512))}});function mn(t){this.content=t}mn.prototype={constructor:mn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new mn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new mn(n)},addToStart:function(t,e){return new mn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new mn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new mn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=mn.from(t),t.size?new mn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=mn.from(t),t.size?new mn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=mn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};mn.from=function(t){if(t instanceof mn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new mn(e)};function yN(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=yN(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function _N(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=_N(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class W{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new W(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new W(r,i)}cutByIndex(e,n){return e==n?W.empty:e==0&&n==this.content.length?this:new W(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new W(i,s)}addToStart(e){return new W([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new W(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return yN(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return _N(this,e,n,r)}findIndex(e,n=-1){if(e==0)return gd(0,e);if(e==this.size)return gd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?gd(r+1,o):gd(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return W.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new W(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return W.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new W(n||e,r)}static from(e){if(!e)return W.empty;if(e instanceof W)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new W([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}W.empty=new W([],0);const Wg={index:0,offset:0};function gd(t,e){return Wg.index=t,Wg.offset=e,Wg}function Zf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Zf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Zf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ht=class J_{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Zf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return J_.none;if(e instanceof J_)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ht.none=[];class ep extends Error{}class se{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=bN(this.content,e+this.openStart,n);return r&&new se(r,this.openStart,this.openEnd)}removeBetween(e,n){return new se(vN(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return se.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new se(W.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new se(e,r,i)}}se.empty=new se(W.empty,0,0);function vN(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(vN(s.content,e-i-1,n-i-1)))}function bN(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=bN(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function Bz(t,e,n){if(n.openStart>t.depth)throw new ep("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ep("Inconsistent open depths");return EN(t,e,n,0)}function EN(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=EN(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Wo(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Uz(n,t);return Wo(s,wN(t,o,a,e,r))}else return Wo(s,tp(t,e,r))}function TN(t,e){if(!e.type.compatibleContent(t.type))throw new ep("Cannot join "+e.type.name+" onto "+t.type.name)}function Q_(t,e,n){let r=t.node(n);return TN(r,e.node(n)),r}function jo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function tu(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(jo(t.nodeAfter,r),s++));for(let a=s;a<o;a++)jo(i.child(a),r);e&&e.depth==n&&e.textOffset&&jo(e.nodeBefore,r)}function Wo(t,e){return t.type.checkContent(e),t.copy(e)}function wN(t,e,n,r,i){let s=t.depth>i&&Q_(t,e,i+1),o=r.depth>i&&Q_(n,r,i+1),a=[];return tu(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(TN(s,o),jo(Wo(s,wN(t,e,n,r,i+1)),a)):(s&&jo(Wo(s,tp(t,e,i+1)),a),tu(e,n,i,a),o&&jo(Wo(o,tp(n,r,i+1)),a)),tu(r,null,i,a),new W(a)}function tp(t,e,n){let r=[];if(tu(null,t,n,r),t.depth>n){let i=Q_(t,e,n+1);jo(Wo(i,tp(t,e,n+1)),r)}return tu(e,null,n,r),new W(r)}function Uz(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(W.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Vu{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ht.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new np(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Vu(n,r,s)}static resolveCached(e,n){for(let i=0;i<qg.length;i++){let s=qg[i];if(s.pos==n&&s.doc==e)return s}let r=qg[Gg]=Vu.resolve(e,n);return Gg=(Gg+1)%$z,r}}let qg=[],Gg=0,$z=12;class np{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Hz=Object.create(null);let qo=class X_{constructor(e,n,r,i=ht.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||W.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Zf(this.attrs,n||e.defaultAttrs||Hz)&&ht.sameSet(this.marks,r||ht.none)}copy(e=null){return e==this.content?this:new X_(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new X_(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return se.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new se(c,i.depth-o,s.depth-o)}replace(e,n,r){return Bz(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Vu.resolveCached(this,e)}resolveNoCache(e){return Vu.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),SN(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=W.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=ht.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!ht.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=W.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};qo.prototype.text=void 0;class rp extends qo{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):SN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new rp(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new rp(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function SN(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class oa{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new zz(e,n);if(r.next==null)return oa.empty;let i=IN(r);r.next&&r.err("Unexpected trailing text");let s=Jz(Yz(i));return Qz(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return W.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let d=s(h,a.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}oa.empty=new oa(!0);class zz{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function IN(t){let e=[];do e.push(jz(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function jz(t){let e=[];do e.push(Wz(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Wz(t){let e=Kz(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=qz(t,e);else break;return e}function fS(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function qz(t,e){let n=fS(t),r=n;return t.eat(",")&&(t.next!="}"?r=fS(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Gz(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Kz(t){if(t.eat("(")){let e=IN(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Gz(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Yz(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function AN(t,e){return e-t}function pS(t,e){let n=[];return r(e),n.sort(AN);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Jz(t){let e=Object.create(null);return n(pS(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);pS(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new oa(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(AN);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function Qz(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function CN(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function RN(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function kN(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new Xz(t[n]);return e}let mS=class ON{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=kN(r.attrs),this.defaultAttrs=CN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==oa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:RN(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new qo(this,this.computeAttrs(e),W.from(n),ht.setFrom(r))}createChecked(e=null,n,r){return n=W.from(n),this.checkContent(n),new qo(this,this.computeAttrs(e),n,ht.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=W.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(W.empty,!0);return s?new qo(this,e,n.append(s),ht.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ht.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new ON(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class Xz{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Om{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=kN(i.attrs),this.excluded=null;let s=CN(this.attrs);this.instance=s?new ht(this,s):null}create(e=null){return!e&&this.instance?this.instance:new ht(this,RN(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Om(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class Zz{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=mn.from(e.nodes),n.marks=mn.from(e.marks||{}),this.nodes=mS.compile(this.spec.nodes,this),this.marks=Om.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=oa.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?gS(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:gS(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof mS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new rp(r,r.defaultAttrs,e,ht.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return qo.fromJSON(this,e)}markFromJSON(e){return ht.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function gS(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function ej(t){return t.tag!=null}function tj(t){return t.style!=null}class Ml{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{ej(r)?this.tags.push(r):tj(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new _S(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new _S(this,n,!0);return r.addAll(e,n.from,n.to),se.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(ij(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=vS(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=vS(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ml(e,Ml.schemaRules(e)))}}const NN={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},nj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},MN={ol:!0,ul:!0},ip=1,sp=2,nu=4;function yS(t,e,n){return e!=null?(e?ip:0)|(e==="full"?sp:0):t&&t.whitespace=="pre"?ip|sp:n&~nu}class yd{constructor(e,n,r,i,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=ht.none,this.stashMarks=[],this.match=o||(a&nu?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(W.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ip)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=W.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(W.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):oj(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!NN.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class _S{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=yS(null,n.preserveWhitespace,0)|(r?nu:0);i?s=new yd(i.type,i.attrs,ht.none,ht.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new yd(null,null,ht.none,ht.none,!0,null,o):s=new yd(e.schema.topNodeType,null,ht.none,ht.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(sj(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&sp||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&ip)r.options&sp?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;MN.hasOwnProperty(r)&&this.parser.normalizeLists&&rj(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:nj.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(NN.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=ht.none,r=ht.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=yS(e,i,s.options);s.options&nu&&s.content.length==0&&(o|=nu),this.nodes.push(new yd(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=aj(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function rj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&MN.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function ij(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function sj(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function vS(t){let e={};for(let n in t)e[n]=t[n];return e}function oj(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function aj(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class li{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Kg(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=li.renderSpec(Kg(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&li.renderSpec(Kg(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let h=u.indexOf(" ");h>0?a.setAttributeNS(u.slice(0,h),u.slice(h+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let h=n[u];if(h===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:f}=li.renderSpec(e,h,r);if(a.appendChild(d),f){if(o)throw new RangeError("Multiple content holes");o=f}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new li(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=bS(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return bS(e.marks)}}function bS(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Kg(t){return t.document||window.document}const PN=65535,xN=Math.pow(2,16);function lj(t,e){return t+e*xN}function ES(t){return t&PN}function cj(t){return(t-(t&PN))/xN}const DN=1,LN=2,Yd=4,VN=8;class Z_{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&VN)>0}get deletedBefore(){return(this.delInfo&(DN|Yd))>0}get deletedAfter(){return(this.delInfo&(LN|Yd))>0}get deletedAcross(){return(this.delInfo&Yd)>0}}class lr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&lr.empty)return lr.empty}recover(e){let n=0,r=ES(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+cj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(e<=h){let d=c?e==l?-1:e==h?1:n:n,f=l+i+(d<0?0:u);if(r)return f;let p=e==(n<0?l:h)?null:lj(a/3,e-l),m=e==l?LN:e==h?DN:Yd;return(n<0?e!=l:e!=h)&&(m|=VN),new Z_(f,m,p)}i+=u-c}return r?e+i:new Z_(e+i,0,null)}touches(e,n){let r=0,i=ES(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new lr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?lr.empty:new lr(e<0?[0,-e,0]:[0,0,e])}}lr.empty=new lr([]);class al{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new al(this.maps,this.mirror,e,n)}copy(){return new al(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new al;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Z_(e,i,null)}}const Yg=Object.create(null);class Fn{getMap(){return lr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Yg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Yg)throw new RangeError("Duplicate use of step JSON ID "+e);return Yg[e]=n,n.prototype.jsonID=e,n}}class zt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new zt(e,null)}static fail(e){return new zt(null,e)}static fromReplace(e,n,r,i){try{return zt.ok(e.replace(n,r,i))}catch(s){if(s instanceof ep)return zt.fail(s.message);throw s}}}function X0(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(X0(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return W.fromArray(r)}class Ns extends Fn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new se(X0(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return zt.fromReplace(e,this.from,this.to,s)}invert(){return new ci(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ns(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ns&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ns(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ns(n.from,n.to,e.markFromJSON(n.mark))}}Fn.jsonID("addMark",Ns);class ci extends Fn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new se(X0(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return zt.fromReplace(e,this.from,this.to,r)}invert(){return new Ns(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ci(n.pos,r.pos,this.mark)}merge(e){return e instanceof ci&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ci(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ci(n.from,n.to,e.markFromJSON(n.mark))}}Fn.jsonID("removeMark",ci);class Ms extends Fn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return zt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return zt.fromReplace(e,this.pos,this.pos+1,new se(W.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Ms(this.pos,n.marks[i]);return new Ms(this.pos,this.mark)}}return new Pl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ms(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ms(n.pos,e.markFromJSON(n.mark))}}Fn.jsonID("addNodeMark",Ms);class Pl extends Fn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return zt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return zt.fromReplace(e,this.pos,this.pos+1,new se(W.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ms(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Pl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Pl(n.pos,e.markFromJSON(n.mark))}}Fn.jsonID("removeNodeMark",Pl);class nn extends Fn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&ev(e,this.from,this.to)?zt.fail("Structure replace would overwrite content"):zt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new lr([this.from,this.to-this.from,this.slice.size])}invert(e){return new nn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new nn(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof nn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?se.empty:new se(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new nn(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?se.empty:new se(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new nn(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new nn(n.from,n.to,se.fromJSON(e,n.slice),!!n.structure)}}Fn.jsonID("replace",nn);class sn extends Fn{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(ev(e,this.from,this.gapFrom)||ev(e,this.gapTo,this.to)))return zt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return zt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?zt.fromReplace(e,this.from,this.to,r):zt.fail("Content does not fit in gap")}getMap(){return new lr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new sn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new sn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new sn(n.from,n.to,n.gapFrom,n.gapTo,se.fromJSON(e,n.slice),n.insert,!!n.structure)}}Fn.jsonID("replaceAround",sn);function ev(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function uj(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[m])?o.to=f:i.push(o=new ci(d,f,h[m])));a&&a.to==d?a.to=f:s.push(a=new Ns(d,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function hj(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Om){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let h=l[u],d;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&h.eq(i[f].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new ci(o.from,o.to,o.style)))}function dj(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new nn(o,c,se.empty));else{r=u;for(let h=0;h<l.marks.length;h++)n.allowsMarkType(l.marks[h].type)||t.step(new ci(o,c,l.marks[h]));if(l.isText&&!n.spec.code){let h,d=/\r?\n|\r/g,f;for(;h=d.exec(l.text);)f||(f=new se(W.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new nn(o+h.index,o+h.index+h[0].length,f))}}o=c}if(!r.validEnd){let a=r.fillBefore(W.empty,!0);t.replace(o,o,new se(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function fj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Zl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!fj(i,s,o))break}return null}function pj(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=W.empty,h=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=W.from(r.node(p).copy(u)),h++):l--;let d=W.empty,f=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=W.from(i.node(p).copy(d)),f++):c++;t.step(new sn(l,c,o,a,new se(u.append(d),h,f),u.size-h,!0))}function Z0(t,e,n=null,r=t){let i=mj(t,e),s=i&&gj(r,e);return s?i.map(TS).concat({type:e,attrs:n}).concat(s.map(TS)):null}function TS(t){return{type:t,attrs:null}}function mj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function gj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function yj(t,e,n){let r=W.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=W.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new sn(i,s,i,s,new se(r,0,0),n.length,!0))}function _j(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&vj(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return t.step(new sn(c,u,c+1,u-1,new se(W.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function vj(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function bj(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new sn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new se(W.from(o),0,0),1,!0))}function ll(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let h=i.node(c),d=i.index(c);if(h.type.spec.isolating)return!1;let f=h.content.cutByIndex(d,h.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||h;if(!h.canReplace(d+1,h.childCount)||!m.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Ej(t,e,n=1,r){let i=t.doc.resolve(e),s=W.empty,o=W.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=W.from(i.node(a).copy(s));let u=r&&r[c];o=W.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new nn(e,e,new se(s.append(o),n,n),!0))}function oo(t,e){let n=t.resolve(e),r=n.index();return FN(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function FN(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Nm(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&FN(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Tj(t,e,n){let r=new nn(e-n,e+n,se.empty,!0);t.step(r)}function wj(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function BN(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Mm(t,e,n=e,r=se.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return UN(i,s,r)?new nn(e,n,r):new Sj(i,s,r).fit()}function UN(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Sj{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=W.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=W.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new se(s,o,a);return e>-1?new sn(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new nn(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Jg(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(n==1&&(o?c.matchType(o.type)||(h=c.fillBefore(W.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:h};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Jg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new se(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Jg(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new se(Ac(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new se(Ac(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:h,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));h=h.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=h.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(h=g,u.push($N(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Cc(this.placed,n,W.from(u)),this.frontier[n].match=h,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<f;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?se.empty:new se(Ac(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new se(Ac(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Qg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Qg(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Qg(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Cc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Cc(this.placed,this.depth,W.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(W.empty,!0);n.childCount&&(this.placed=Cc(this.placed,this.frontier.length,n))}}function Ac(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ac(t.firstChild.content,e-1,n)))}function Cc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Cc(t.lastChild.content,e-1,n)))}function Jg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function $N(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,$N(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(W.empty,!0)))),t.copy(r)}function Qg(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Ij(n,s.content,o)?a:null}function Ij(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Aj(t){return t.spec.defining||t.spec.definingForContent}function Cj(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(UN(i,s,r))return t.step(new nn(e,n,r));let o=zN(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let d=i.depth,f=i.pos-1;d>0;d--,f--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:i.before(d)==f&&o.splice(1,0,-d)}let l=o.indexOf(a),c=[],u=r.openStart;for(let d=r.content,f=0;;f++){let p=d.firstChild;if(c.push(p),f==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let f=c[d],p=Aj(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=d;else if(p||!f.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let f=(d+u+1)%(r.openStart+1),p=c[f];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let _=i.node(g-1),I=i.index(g-1);if(_.canReplaceWith(I,I,p.type,p.marks))return t.replace(i.before(g),y?s.after(g):n,new se(HN(r.content,0,r.openStart,f),f,r.openEnd))}}let h=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>h));d--){let f=o[d];f<0||(e=i.before(f),n=s.after(f))}}function HN(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(HN(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(W.empty,!0))}return t}function Rj(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=wj(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new se(W.from(r),0,0))}function kj(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=zN(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function zN(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class cl extends Fn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return zt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return zt.fromReplace(e,this.pos,this.pos+1,new se(W.from(i),0,n.isLeaf?0:1))}getMap(){return lr.empty}invert(e){return new cl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new cl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new cl(n.pos,n.attr,n.value)}}Fn.jsonID("attr",cl);class Fu extends Fn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return zt.ok(r)}getMap(){return lr.empty}invert(e){return new Fu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Fu(n.attr,n.value)}}Fn.jsonID("docAttr",Fu);let xl=class extends Error{};xl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};xl.prototype=Object.create(Error.prototype);xl.prototype.constructor=xl;xl.prototype.name="TransformError";class Oj{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new al}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new xl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=se.empty){let i=Mm(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new se(W.from(r),0,0))}delete(e,n){return this.replace(e,n,se.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Cj(this,e,n,r),this}replaceRangeWith(e,n,r){return Rj(this,e,n,r),this}deleteRange(e,n){return kj(this,e,n),this}lift(e,n){return pj(this,e,n),this}join(e,n=1){return Tj(this,e,n),this}wrap(e,n){return yj(this,e,n),this}setBlockType(e,n=e,r,i=null){return _j(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return bj(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new cl(e,n,r)),this}setDocAttribute(e,n){return this.step(new Fu(e,n)),this}addNodeMark(e,n){return this.step(new Ms(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ht)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Pl(e,n)),this}split(e,n=1,r){return Ej(this,e,n,r),this}addMark(e,n,r){return uj(this,e,n,r),this}removeMark(e,n,r){return hj(this,e,n,r),this}clearIncompatible(e,n,r){return dj(this,e,n,r),this}}const Xg=Object.create(null);class ze{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Nj(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=se.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?se.empty:n),a==0&&IS(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),IS(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Be(e):Da(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Da(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Da(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new jr(e.node(0))}static atStart(e){return Da(e,e,0,0,1)||new jr(e)}static atEnd(e){return Da(e,e,e.content.size,e.childCount,-1)||new jr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Xg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Xg)throw new RangeError("Duplicate use of selection JSON ID "+e);return Xg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}ze.prototype.visible=!0;class Nj{constructor(e,n){this.$from=e,this.$to=n}}let wS=!1;function SS(t){!wS&&!t.parent.inlineContent&&(wS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends ze{constructor(e,n=e){SS(e),SS(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ze.near(r);let i=e.resolve(n.map(this.anchor));return new Be(i.parent.inlineContent?i:r,r)}replace(e,n=se.empty){if(super.replace(e,n),n==se.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Pm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=ze.findFrom(n,r,!0)||ze.findFrom(n,-r,!0);if(s)n=s.$head;else return ze.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(ze.findFrom(e,-r,!0)||ze.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Be(e,n)}}ze.jsonID("text",Be);class Pm{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Pm(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class we extends ze{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?ze.near(s):new we(s)}content(){return new se(W.from(this.node),0,0)}eq(e){return e instanceof we&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new eb(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new we(e.resolve(n.anchor))}static create(e,n){return new we(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}we.prototype.visible=!1;ze.jsonID("node",we);class eb{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Pm(r,r):new eb(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&we.isSelectable(r)?new we(n):ze.near(n)}}class jr extends ze{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=se.empty){if(n==se.empty){e.delete(0,e.doc.content.size);let r=ze.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new jr(e)}map(e){return new jr(e)}eq(e){return e instanceof jr}getBookmark(){return Mj}}ze.jsonID("all",jr);const Mj={map(){return this},resolve(t){return new jr(t)}};function Da(t,e,n,r,i,s=!1){if(e.inlineContent)return Be.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&we.isSelectable(a))return we.create(t,n-(i<0?a.nodeSize:0))}else{let l=Da(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function IS(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof nn||i instanceof sn))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(ze.near(t.doc.resolve(o),n))}const AS=1,_d=2,CS=4;class Pj extends Oj{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|AS)&~_d,this.storedMarks=null,this}get selectionSet(){return(this.updated&AS)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=_d,this}ensureMarks(e){return ht.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&_d)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~_d,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ht.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(ze.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=CS,this}get scrolledIntoView(){return(this.updated&CS)>0}}function RS(t,e){return!e||!t?t:t.bind(e)}class Rc{constructor(e,n,r){this.name=e,this.init=RS(n.init,r),this.apply=RS(n.apply,r)}}const xj=[new Rc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Rc("selection",{init(t,e){return t.selection||ze.atStart(e.doc)},apply(t){return t.selection}}),new Rc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Rc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Zg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=xj.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Rc(r.key,r.spec.state,r))})}}class $a{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new $a(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Pj(this)}static create(e){let n=new Zg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new $a(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Zg(this.schema,e.plugins),r=n.fields,i=new $a(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Zg(e.schema,e.plugins),s=new $a(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=qo.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=ze.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function jN(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=jN(i,e,{})),n[r]=i}return n}class yr{constructor(e){this.spec=e,this.props={},e.props&&jN(e.props,this,this.props),this.key=e.key?e.key.key:WN("plugin")}getState(e){return e[this.key]}}const ey=Object.create(null);function WN(t){return t in ey?t+"$"+ ++ey[t]:(ey[t]=0,t+"$")}class ss{constructor(e="key"){this.key=WN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const _n=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Bu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let tv=null;const xi=function(t,e,n){let r=tv||(tv=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Dj=function(){tv=null},aa=function(t,e,n,r){return n&&(kS(t,e,n,r,-1)||kS(t,e,n,r,1))},Lj=/^(img|br|input|textarea|hr)$/i;function kS(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ni(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Lh(t)||Lj.test(t.nodeName)||t.contentEditable=="false")return!1;e=_n(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?ni(t):0}else return!1}}function ni(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Vj(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ni(t)}else if(t.parentNode&&!Lh(t))e=_n(t),t=t.parentNode;else return null}}function Fj(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Lh(t))e=_n(t)+1,t=t.parentNode;else return null}}function Bj(t,e,n){for(let r=e==0,i=e==ni(t);r||i;){if(t==n)return!0;let s=_n(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==ni(t)}}function Lh(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const xm=function(t){return t.focusNode&&aa(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function wo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Uj(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $j(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const Ai=typeof navigator<"u"?navigator:null,OS=typeof document<"u"?document:null,ao=Ai&&Ai.userAgent||"",nv=/Edge\/(\d+)/.exec(ao),qN=/MSIE \d/.exec(ao),rv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ao),Zn=!!(qN||rv||nv),Us=qN?document.documentMode:rv?+rv[1]:nv?+nv[1]:0,Yr=!Zn&&/gecko\/(\d+)/i.test(ao);Yr&&+(/Firefox\/(\d+)/.exec(ao)||[0,0])[1];const iv=!Zn&&/Chrome\/(\d+)/.exec(ao),Hn=!!iv,Hj=iv?+iv[1]:0,jn=!Zn&&!!Ai&&/Apple Computer/.test(Ai.vendor),Dl=jn&&(/Mobile\/\w+/.test(ao)||!!Ai&&Ai.maxTouchPoints>2),Tr=Dl||(Ai?/Mac/.test(Ai.platform):!1),zj=Ai?/Win/.test(Ai.platform):!1,Lr=/Android \d/.test(ao),Vh=!!OS&&"webkitFontSmoothing"in OS.documentElement.style,jj=Vh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Wj(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Mi(t,e){return typeof t=="number"?t:t[e]}function qj(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function NS(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Bu(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?Wj(s):qj(a),u=0,h=0;if(e.top<c.top+Mi(r,"top")?h=-(c.top-e.top+Mi(i,"top")):e.bottom>c.bottom-Mi(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Mi(i,"top")-c.top:e.bottom-c.bottom+Mi(i,"bottom")),e.left<c.left+Mi(r,"left")?u=-(c.left-e.left+Mi(i,"left")):e.right>c.right-Mi(r,"right")&&(u=e.right-c.right+Mi(i,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let d=a.scrollLeft,f=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let p=a.scrollLeft-d,m=a.scrollTop-f;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function Gj(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:GN(t.dom)}}function GN(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Bu(r));return e}function Kj({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;KN(n,r==0?0:r-e)}function KN(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ra=null;function Yj(t){if(t.setActive)return t.setActive();if(Ra)return t.focus(Ra);let e=GN(t);t.focus(Ra==null?{get preventScroll(){return Ra={preventScroll:!0},!0}}:void 0),Ra||(Ra=!1,KN(e,0))}function YN(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=xi(u).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?Jj(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:YN(n,i)}function Jj(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=ms(r,1);if(s.top!=s.bottom&&tb(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function tb(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Qj(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Xj(t,e,n){let{node:r,offset:i}=YN(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function Zj(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function JN(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(tb(e,c))return JN(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function eW(t,e){let n=t.dom.ownerDocument,r,i=0,s=$j(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!tb(e,c)||(o=JN(t.dom,e,c),!o))return null}if(jn)for(let c=o;r&&c;c=Bu(c))c.draggable&&(r=void 0);if(o=Qj(o,e),r){if(Yr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;Vh&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=Zj(t,r,i,e))}a==null&&(a=Xj(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function MS(t){return t.top<t.bottom||t.left<t.right}function ms(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(MS(r))return r}return Array.prototype.find.call(n,MS)||t.getBoundingClientRect()}const tW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function QN(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Vh||Yr;if(r.nodeType==3)if(o&&(tW.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=ms(xi(r,i,i),n);if(Yr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=ms(xi(r,i-1,i-1),-1);if(c.top==l.top){let u=ms(xi(r,i,i+1),-1);if(u.top!=l.top)return fc(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,fc(ms(xi(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ni(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return ty(l.getBoundingClientRect(),!1)}if(s==null&&i<ni(r)){let l=r.childNodes[i];if(l.nodeType==1)return ty(l.getBoundingClientRect(),!0)}return ty(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ni(r))){let l=r.childNodes[i-1],c=l.nodeType==3?xi(l,ni(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return fc(ms(c,1),!1)}if(s==null&&i<ni(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?xi(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return fc(ms(c,-1),!0)}return fc(ms(r.nodeType==3?xi(r):r,-n),n>=0)}function fc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ty(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function XN(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function nW(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return XN(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=QN(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=xi(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const rW=/[\u0590-\u08ac]/;function iW(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return!rW.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:XN(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),g})}let PS=null,xS=null,DS=!1;function sW(t,e,n){return PS==e&&xS==n?DS:(PS=e,xS=n,DS=n=="up"||n=="down"?nW(t,e,n):iW(t,e,n))}const Rr=0,LS=1,Mo=2,Ci=3;class Fh{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Rr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>_n(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof eM){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof ZN&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?_n(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?_n(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let h=a;h>0;h--){let d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=_n(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=_n(h.dom);break}n+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let d=0,f=0;d<this.children.length;d++){let p=this.children[d],m=f+p.size;if(s>f&&o<m)return p.setSelection(e-f-p.border,n-f-p.border,r,i);f=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((Yr||jn)&&e==n){let{node:d,offset:f}=a;if(d.nodeType==3){if(u=!!(f&&d.nodeValue[f-1]==`
`),u&&f==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:_n(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=d.childNodes[f-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(Yr&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&jn)&&aa(a.node,a.offset,c.anchorNode,c.anchorOffset)&&aa(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let f=a;a=l,l=f}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Mo:LS,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ci:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Mo:Ci}r=o}this.dirty=Mo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Mo:LS;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class ZN extends Fh{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Rr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class oW extends Fh{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class la extends Fh{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=li.renderSpec(document,n.type.spec.toDOM(n,r))),new la(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Ci||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ci&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Rr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Rr}}slice(e,n,r){let i=la.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=av(s,n,o,r)),e>0&&(s=av(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class $s extends Fh{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,h=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=li.renderSpec(document,n.type.spec.toDOM(n)));!h&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=rM(u,r,n),c?l=new aW(e,n,r,i,u,h||null,d,c,s,o+1):n.isText?new Dm(e,n,r,i,u,d,s):new $s(e,n,r,i,u,h||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>W.empty)}return e}matchesNode(e,n,r){return this.dirty==Rr&&e.eq(this.node)&&ov(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new cW(this,o&&o.node,e);dW(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?ht.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,h,d)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,h,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,f,e)||l.updateNextNode(c,u,h,e,d,i)||l.addNode(c,u,h,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Mo)&&(o&&this.protectLocalComposition(e,o),tM(this.contentDOM,this.children,e),Dl&&fW(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=pW(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new oW(this,s,n,i);e.input.compositionNodes.push(o),this.children=av(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Ci||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Rr}updateOuterDeco(e){if(ov(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=nM(this.dom,this.nodeDOM,sv(this.outerDeco,this.node,n),sv(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function VS(t,e,n,r,i){rM(r,e,t);let s=new $s(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Dm extends $s{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ci||this.dirty!=Rr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Rr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Rr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Dm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ci)}get domAtom(){return!1}isText(e){return this.node.text==e}}class eM extends Fh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Rr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class aW extends $s{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==Ci)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function tM(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=FS(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof la){let l=r?r.previousSibling:t.lastChild;tM(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=FS(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const ru=function(t){t&&(this.nodeName=t)};ru.prototype=Object.create(null);const Po=[new ru];function sv(t,e,n){if(t.length==0)return Po;let r=n?Po[0]:new ru,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new ru(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new ru(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function nM(t,e,n,r){if(n==Po&&r==Po)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Po[0]),i=l}lW(i,a||Po[0],o)}return i}function lW(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function rM(t,e,n){return nM(t,t,Po,sv(e,n,t.nodeType!=1))}function ov(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function FS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class cW{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=uW(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Rr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=la.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Ci&&o.dom==o.contentDOM&&(o.dirty=Mo),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof $s){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,h,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ci&&ov(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(l,e,n,r,i,o)))return this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Mo,h.updateChildren(i,o+1),h.dirty=Rr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=$s.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=$s.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new ZN(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof la;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Dm)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((jn||Hn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new eM(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function uW(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof la)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function hW(t,e){return t.type.side-e.type.side}function dW(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(u?(h||(h=[u])).push(g):u=g)}if(u)if(h){h.sort(hW);for(let g=0;g<h.length;g++)n(h[g],c,!!l)}else n(u,c,!!l);let d,f;if(l)f=-1,d=l,l=null;else if(c<t.childCount)f=c,d=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=d.cut(g-s),d=d.cut(0,g-s),p=g,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();r(d,m,e.forChild(s,d),f),s=p}}function fW(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function pW(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function av(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function nb(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(xm(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&we.isSelectable(u)&&i.parent&&!(u.isInline&&Bj(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new we(o==h?a:r.resolve(h))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=rb(t,l,a,u)}return c}function iM(t){return t.editable?t.hasFocus():oM(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ki(t,e=!1){let n=t.state.selection;if(sM(t,n),!!iM(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Hn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&aa(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)gW(t);else{let{anchor:r,head:i}=n,s,o;BS&&!(n instanceof Be)&&(n.$from.parent.inlineContent||(s=US(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=US(t,n.to))),t.docView.setSelection(r,i,t.root,e),BS&&(s&&$S(s),o&&$S(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&mW(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const BS=jn||Hn&&Hj<63;function US(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(jn&&i&&i.contentEditable=="false")return ny(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ny(i);if(s)return ny(s)}}function ny(t){return t.contentEditable="true",jn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function $S(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function mW(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!iM(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function gW(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,_n(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Zn&&Us<=11&&(r.disabled=!0,r.disabled=!1)}function sM(t,e){if(e instanceof we){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(HS(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else HS(t)}function HS(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function rb(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Be.between(e,n,r)}function zS(t){return t.editable&&!t.hasFocus()?!1:oM(t)}function oM(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function yW(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return aa(e.node,e.offset,n.anchorNode,n.anchorOffset)}function lv(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ze.findFrom(s,e)}function Ts(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function jS(t,e,n){let r=t.state.selection;if(r instanceof Be)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Ts(t,new Be(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=lv(t.state,e);return i&&i instanceof we?Ts(t,i):!1}else if(!(Tr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?we.isSelectable(s)?Ts(t,new we(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Vh?Ts(t,new Be(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof we&&r.node.isInline)return Ts(t,new Be(e>0?r.$to:r.$from));{let i=lv(t.state,e);return i?Ts(t,i):!1}}}function op(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function iu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ka(t,e){return e<0?_W(t):vW(t)}function _W(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Yr&&n.nodeType==1&&r<op(n)&&iu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(iu(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(aM(n))break;{let a=n.previousSibling;for(;a&&iu(a,-1);)i=n.parentNode,s=_n(a),a=a.previousSibling;if(a)n=a,r=op(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?cv(t,n,r):i&&cv(t,i,s)}function vW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=op(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(iu(a,1))s=n,o=++r;else break}else{if(aM(n))break;{let a=n.nextSibling;for(;a&&iu(a,1);)s=a.parentNode,o=_n(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=op(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&cv(t,s,o)}function aM(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function bW(t,e){for(;t&&e==t.childNodes.length&&!Lh(t);)e=_n(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function EW(t,e){for(;t&&!e&&!Lh(t);)e=_n(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function cv(t,e,n){if(e.nodeType!=3){let s,o;(o=bW(e,n))?(e=o,n=0):(s=EW(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(xm(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Ki(t)},50)}function WS(t,e){let n=t.state.doc.resolve(e);if(!(Hn||zj)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function qS(t,e,n){let r=t.state.selection;if(r instanceof Be&&!r.empty||n.indexOf("s")>-1||Tr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=lv(t.state,e);if(o&&o instanceof we)return Ts(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof jr?ze.near(o,e):ze.findFrom(o,e);return a?Ts(t,a):!1}return!1}function GS(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function KS(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function TW(t){if(!jn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;KS(t,r,"true"),setTimeout(()=>KS(t,r,"false"),20)}return!1}function wW(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function SW(t,e){let n=e.keyCode,r=wW(e);if(n==8||Tr&&n==72&&r=="c")return GS(t,-1)||ka(t,-1);if(n==46&&!e.shiftKey||Tr&&n==68&&r=="c")return GS(t,1)||ka(t,1);if(n==13||n==27)return!0;if(n==37||Tr&&n==66&&r=="c"){let i=n==37?WS(t,t.state.selection.from)=="ltr"?-1:1:-1;return jS(t,i,r)||ka(t,i)}else if(n==39||Tr&&n==70&&r=="c"){let i=n==39?WS(t,t.state.selection.from)=="ltr"?1:-1:1;return jS(t,i,r)||ka(t,i)}else{if(n==38||Tr&&n==80&&r=="c")return qS(t,-1,r)||ka(t,-1);if(n==40||Tr&&n==78&&r=="c")return TW(t)||qS(t,1,r)||ka(t,1);if(r==(Tr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function lM(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||li.fromSchema(t.state.schema),a=pM(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=fM[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d}}function cM(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new se(W.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):se.empty;let h=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(h)a=h;else{let d=i.marks(),{schema:f}=t.state,p=li.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(f.text(m,d)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=CW(n),Vh&&RW(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ml.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!IW.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=kW(YS(a,+u[1],+u[2]),u[4]);else if(a=se.maxOpen(AW(a.content,i),!0),a.openStart||a.openEnd){let h=0,d=0;for(let f=a.content.firstChild;h<a.openStart&&!f.type.spec.isolating;h++,f=f.firstChild);for(let f=a.content.lastChild;d<a.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);a=YS(a,h,d)}return t.someProp("transformPasted",h=>{a=h(a,t)}),a}const IW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function AW(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&hM(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=dM(o[o.length-1],s.length));let u=uM(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return W.from(o)}return t}function uM(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,W.from(t));return t}function hM(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=hM(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(W.from(uM(n,t,i+1))))}}function dM(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,dM(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(W.empty,!0);return t.copy(n.append(r))}function uv(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=uv(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(W.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function YS(t,e,n){return e<t.openStart&&(t=new se(uv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new se(uv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const fM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let JS=null;function pM(){return JS||(JS=document.implementation.createHTMLDocument("title"))}function CW(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=pM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&fM[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function RW(t){let e=t.querySelectorAll(Hn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function kW(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=W.from(l.create(r[a+1],i)),s++,o++}return new se(i,s,o)}const Wn={},qn={},OW={touchstart:!0,touchmove:!0};class NW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function MW(t){for(let e in Wn){let n=Wn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{xW(t,r)&&!ib(t,r)&&(t.editable||!(r.type in qn))&&n(t,r)},OW[e]?{passive:!0}:void 0)}jn&&t.dom.addEventListener("input",()=>null),hv(t)}function Ps(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function PW(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function hv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>ib(t,r))})}function ib(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function xW(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function DW(t,e){!ib(t,e)&&Wn[e.type]&&(t.editable||!(e.type in qn))&&Wn[e.type](t,e)}qn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!gM(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Lr&&Hn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Dl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,wo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||SW(t,n)?n.preventDefault():Ps(t,"key")};qn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};qn.keypress=(t,e)=>{let n=e;if(gM(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Tr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Be)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Lm(t){return{left:t.clientX,top:t.clientY}}function LW(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function sb(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function ul(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function VW(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&we.isSelectable(r)?(ul(t,new we(n),"pointer"),!0):!1}function FW(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof we&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(we.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(ul(t,we.create(t.state.doc,i),"pointer"),!0):!1}function BW(t,e,n,r,i){return sb(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?FW(t,n):VW(t,n))}function UW(t,e,n,r){return sb(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function $W(t,e,n,r){return sb(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||HW(t,n,r)}function HW(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ul(t,Be.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)ul(t,Be.create(r,a+1,a+1+o.content.size),"pointer");else if(we.isSelectable(o))ul(t,we.create(r,a),"pointer");else continue;return!0}}function ob(t){return ap(t)}const mM=Tr?"metaKey":"ctrlKey";Wn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=ob(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&LW(n,t.input.lastClick)&&!n[mM]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(Lm(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new zW(t,o,n,!!r)):(s=="doubleClick"?UW:$W)(t,o.pos,o.inside,n)?n.preventDefault():Ps(t,"pointer"))};class zW{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[mM],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof we&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Yr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ps(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ki(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Lm(e))),this.updateAllowDefault(e),this.allowDefault||!n?Ps(this.view,"pointer"):BW(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||jn&&this.mightDrag&&!this.mightDrag.node.isAtom||Hn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ul(this.view,ze.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Ps(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ps(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Wn.touchstart=t=>{t.input.lastTouch=Date.now(),ob(t),Ps(t,"pointer")};Wn.touchmove=t=>{t.input.lastTouch=Date.now(),Ps(t,"pointer")};Wn.contextmenu=t=>ob(t);function gM(t,e){return t.composing?!0:jn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const jW=Lr?5e3:-1;qn.compositionstart=qn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),ap(t,!0),t.markCursor=null;else if(ap(t),Yr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}yM(t,jW)};qn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,yM(t,20))};function yM(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>ap(t),e))}function _M(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=qW());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function WW(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Vj(e.focusNode,e.focusOffset),r=Fj(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n}function qW(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function ap(t,e=!1){if(!(Lr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),_M(t),e||t.docView&&t.docView.dirty){let n=nb(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function GW(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Uu=Zn&&Us<15||Dl&&jj<604;Wn.copy=qn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Uu?null:n.clipboardData,o=r.content(),{dom:a,text:l}=lM(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):GW(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function KW(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function YW(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?$u(t,r.value,null,i,e):$u(t,r.textContent,r.innerHTML,i,e)},50)}function $u(t,e,n,r,i){let s=cM(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||se.empty)))return!0;if(!s)return!1;let o=KW(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function vM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}qn.paste=(t,e)=>{let n=e;if(t.composing&&!Lr)return;let r=Uu?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&$u(t,vM(r),r.getData("text/html"),i,n)?n.preventDefault():YW(t,n)};class bM{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const EM=Tr?"altKey":"ctrlKey";Wn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Lm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof we?i.to-1:i.to))){if(r&&r.mightDrag)o=we.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(o=we.create(t.state.doc,u.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c}=lM(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(Uu?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Uu||n.dataTransfer.setData("text/plain",c),t.dragging=new bM(a,!n[EM],o)};Wn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};qn.dragover=qn.dragenter=(t,e)=>e.preventDefault();qn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Lm(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=cM(t,vM(n.dataTransfer),Uu?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[EM]);if(t.someProp("handleDrop",p=>p(t,n,o||se.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?BN(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let f=c.doc.resolve(u);if(h&&we.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new we(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,_)=>p=_),c.setSelection(rb(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Wn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ki(t)},20))};Wn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Wn.beforeinput=(t,e)=>{if(Hn&&Lr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,wo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in qn)Wn[t]=qn[t];function Hu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class lp{constructor(e,n){this.toDOM=e,this.spec=n||Go,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new ur(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof lp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Hu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Hs{constructor(e,n){this.attrs=e,this.spec=n||Go}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new ur(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Hs&&Hu(this.attrs,e.attrs)&&Hu(this.spec,e.spec)}static is(e){return e.type instanceof Hs}destroy(){}}class ab{constructor(e,n){this.attrs=e,this.spec=n||Go}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new ur(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof ab&&Hu(this.attrs,e.attrs)&&Hu(this.spec,e.spec)}destroy(){}}class ur{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new ur(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new ur(e,e,new lp(n,r))}static inline(e,n,r,i){return new ur(e,n,new Hs(r,i))}static node(e,n,r,i){return new ur(e,n,new ab(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Hs}get widget(){return this.type instanceof lp}}const La=[],Go={};class Ht{constructor(e,n){this.local=e.length?e:La,this.children=n.length?n:La}static create(e,n){return n.length?cp(n,e,0,Go):Cn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Cn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Go)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?JW(this.children,o||[],e,n,r,i,s):o?new Ht(o.sort(Ko),La):Cn}add(e,n){return n.length?this==Cn?Ht.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=wM(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,cp(u,a,c+1,Go)),s+=3}});let o=TM(s?SM(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ht(o.length?this.local.concat(o).sort(Ko):this.local,i||this.children)}remove(e){return e.length==0||this==Cn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Cn?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ht(i,r):Cn}forChild(e,n){if(this==Cn)return this;if(n.isLeaf)return Ht.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Hs){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Ht(i.sort(Ko),La);return r?new Rs([a,r]):a}return r||Cn}eq(e){if(this==e)return!0;if(!(e instanceof Ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return lb(this.localsInner(e))}localsInner(e){if(this==Cn)return La;if(e.inlineContent||!this.local.some(Hs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Hs||n.push(this.local[r]);return n}}Ht.empty=new Ht([],[]);Ht.removeOverlap=lb;const Cn=Ht.empty;class Rs{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Go));return Rs.from(r)}forChild(e,n){if(n.isLeaf)return Ht.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Cn&&(s instanceof Rs?r=r.concat(s.members):r.push(s))}return Rs.from(r)}eq(e){if(!(e instanceof Rs)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?lb(r?n:n.sort(Ko)):La}static from(e){switch(e.length){case 0:return Cn;case 1:return e[0];default:return new Rs(e.every(n=>n instanceof Ht)?e:e.reduce((n,r)=>n.concat(r instanceof Ht?r:r.members),[]))}}}function JW(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let h=0;n.maps[c].forEach((d,f,p,m)=>{let g=m-p-(f-d);for(let y=0;y<a.length;y+=3){let _=a[y+1];if(_<0||d>_+u-h)continue;let I=a[y]+u-h;f>=I?a[y+1]=d<=I?-2:-1:d>=u&&g&&(a[y]+=g,a[y+1]+=g)}h+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),h=u-i;if(h<0||h>=r.content.size){l=!0;continue}let d=n.map(t[c+1]+s,-1),f=d-i,{index:p,offset:m}=r.content.findIndex(h),g=r.maybeChild(p);if(g&&m==h&&m+g.nodeSize==f){let y=a[c+2].mapInner(n,g,u+1,t[c]+s+1,o);y!=Cn?(a[c]=h,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=QW(a,t,e,n,i,s,o),u=cp(c,r,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,d=0;h<u.children.length;h+=3){let f=u.children[h];for(;d<a.length&&a[d]<f;)d+=3;a.splice(d,0,u.children[h],u.children[h+1],u.children[h+2])}}return new Ht(e.sort(Ko),a)}function TM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new ur(i.from+e,i.to+e,i.type))}return n}function QW(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(r,i,c);h?n.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function wM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function SM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function cp(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=wM(t,a,l+n);if(c){s=!0;let u=cp(c,a,n+l+1,r);u!=Cn&&i.push(l,l+a.nodeSize,u)}});let o=TM(s?SM(t):t,-n).sort(Ko);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Ht(o,i):Cn}function Ko(t,e){return t.from-e.from||t.to-e.to}function lb(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),QS(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),QS(e,i,r.copy(s.from,r.to)));break}}}return e}function QS(t,e,n){for(;e<t.length&&Ko(n,t[e])>0;)e++;t.splice(e,0,n)}function ry(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Cn&&e.push(r)}),t.cursorWrapper&&e.push(Ht.create(t.state.doc,[t.cursorWrapper.deco])),Rs.from(e)}const XW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ZW=Zn&&Us<=11;class eq{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class tq{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new eq,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Zn&&Us<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),ZW&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,XW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(zS(this.view)){if(this.suppressingSelectionUpdates)return Ki(this.view);if(Zn&&Us<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&aa(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Bu(s))n.add(s);for(let s=e.anchorNode;s;s=Bu(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&zS(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let h=this.registerMutation(n[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Yr&&l.length>1){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let h=u[0],d=u[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&xm(r)&&(c=nb(e))&&c.eq(ze.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ki(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),nq(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Ki(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Zn&&Us<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:d}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?_n(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?_n(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let XS=new WeakMap,ZS=!1;function nq(t){if(!XS.has(t)&&(XS.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Yr,ZS)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ZS=!0}}function eI(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return aa(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function rq(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return eI(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?eI(t,n):null}function iq(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],xm(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Hn&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],_=y.pmViewDesc;if(y.nodeName=="BR"&&!_){s=g;break}if(!_||_.size)break}let h=t.state.doc,d=t.someProp("domParser")||Ml.fromSchema(t.state.schema),f=h.resolve(o),p=null,m=d.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:sq,context:f});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function sq(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(jn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||jn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const oq=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function aq(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let O=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,U=nb(t,O);if(U&&!t.state.selection.eq(U)){if(Hn&&Lr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,wo(13,"Enter"))))return;let K=t.state.tr.setSelection(U);O=="pointer"?K.setMeta("pointer",!0):O=="key"&&K.scrollIntoView(),s&&K.setMeta("composition",s),t.dispatch(K)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=iq(t,e,n),u=t.state.doc,h=u.slice(c.from,c.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=uq(h.content,c.doc.content,c.from,d,f);if((Dl&&t.input.lastIOSEnter>Date.now()-225||Lr)&&i.some(O=>O.nodeType==1&&!oq.test(O.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",O=>O(t,wo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Be&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let O=tI(t,t.state.doc,c.sel);if(O&&!O.eq(t.state.selection)){let U=t.state.tr.setSelection(O);s&&U.setMeta("composition",s),t.dispatch(U)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Be&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Zn&&Us<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),_=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,I;if((Dl&&t.input.lastIOSEnter>Date.now()-225&&(!_||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!_&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(I=ze.findFrom(c.doc.resolve(m.pos+1),1,!0))&&I.head==g.pos)&&t.someProp("handleKeyDown",O=>O(t,wo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&cq(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",O=>O(t,wo(8,"Backspace")))){Lr&&Hn&&t.domObserver.suppressSelectionUpdates();return}Hn&&Lr&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),Lr&&!_&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(O){return O(t,wo(13,"Enter"))})},20));let S=p.start,w=p.endA,A,L,N;if(_){if(m.pos==g.pos)Zn&&Us<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ki(t),20)),A=t.state.tr.delete(S,w),L=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(N=lq(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))A=t.state.tr,N.type=="add"?A.addMark(S,w,N.mark):A.removeMark(S,w,N.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let O=m.parent.textBetween(m.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",U=>U(t,S,w,O)))return;A=t.state.tr.insertText(O,S,w)}}if(A||(A=t.state.tr.replace(S,w,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let O=tI(t,A.doc,c.sel);O&&!(Hn&&Lr&&t.composing&&O.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(O.head==S||O.head==A.mapping.map(w)-1)||Zn&&O.empty&&O.head==S)&&A.setSelection(O)}L&&A.ensureMarks(L),s&&A.setMeta("composition",s),t.dispatch(A.scrollIntoView())}function tI(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:rb(t,e.resolve(n.anchor),e.resolve(n.head))}function lq(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(W.from(c).eq(t))return{mark:a,type:o}}function cq(t,e,n,r,i){if(n-e<=i.pos-r.pos||iy(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(iy(s,!0,!0));return!o.parent.isTextblock||o.pos>n||iy(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function iy(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function uq(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&nI(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&nI(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function nI(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class hq{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new NW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(aI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=sI(this),iI(this),this.nodeViews=oI(this),this.docView=VS(this.state.doc,rI(this),ry(this),this.dom,this),this.domObserver=new tq(this,(r,i,s,o)=>aq(this,r,i,s,o)),this.domObserver.start(),MW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&hv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(aI),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(_M(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=oI(this);fq(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&hv(this),this.editable=sI(this),iI(this);let l=ry(this),c=rI(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Gj(this);if(o){this.domObserver.stop();let f=h&&(Zn||Hn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&dq(i.selection,e.selection);if(h){let p=Hn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=WW(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=VS(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&yW(this))?Ki(this,f):(sM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&Kj(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof we){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&NS(this,n.getBoundingClientRect(),e)}else NS(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new bM(e.slice,e.move,i<0?void 0:we.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Zn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Yj(this.dom),Ki(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return eW(this,e)}coordsAtPos(e,n=1){return QN(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return sW(this,n||this.state,e)}pasteHTML(e,n){return $u(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return $u(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(PW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],ry(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Dj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return DW(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return jn&&this.root.nodeType===11&&Uj(this.dom.ownerDocument)==this.dom&&rq(this,e)||e}domSelection(){return this.root.getSelection()}}function rI(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[ur.node(0,t.state.doc.content.size,e)]}function iI(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:ur.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function sI(t){return!t.someProp("editable",e=>e(t.state)===!1)}function dq(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function oI(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function fq(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function aI(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Qs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},up={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},pq=typeof navigator<"u"&&/Mac/.test(navigator.platform),mq=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var vn=0;vn<10;vn++)Qs[48+vn]=Qs[96+vn]=String(vn);for(var vn=1;vn<=24;vn++)Qs[vn+111]="F"+vn;for(var vn=65;vn<=90;vn++)Qs[vn]=String.fromCharCode(vn+32),up[vn]=String.fromCharCode(vn);for(var sy in Qs)up.hasOwnProperty(sy)||(up[sy]=Qs[sy]);function gq(t){var e=pq&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||mq&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?up:Qs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const yq=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function _q(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))yq?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function vq(t){let e=Object.create(null);for(let n in t)e[_q(n)]=t[n];return e}function oy(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function bq(t){return new yr({props:{handleKeyDown:IM(t)}})}function IM(t){let e=vq(t);return function(n,r){let i=gq(r),s,o=e[oy(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[oy(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Qs[r.keyCode])&&s!=i){let a=e[oy(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const Eq=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function AM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Tq=(t,e,n)=>{let r=AM(t,n);if(!r)return!1;let i=cb(r);if(!i){let o=r.blockRange(),a=o&&Zl(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&OM(t,i,e))return!0;if(r.parent.content.size==0&&(Ll(s,"end")||we.isSelectable(s))){let o=Mm(t.doc,r.before(),r.after(),se.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ll(s,"end")?ze.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):we.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},wq=(t,e,n)=>{let r=AM(t,n);if(!r)return!1;let i=cb(r);return i?CM(t,i,e):!1},Sq=(t,e,n)=>{let r=RM(t,n);if(!r)return!1;let i=ub(r);return i?CM(t,i,e):!1};function CM(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Mm(t.doc,s,l,se.empty);if(!c||c.from!=s||c instanceof nn&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Be.create(u.doc,s)),n(u.scrollIntoView())}return!0}function Ll(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Iq=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=cb(r)}let o=s&&s.nodeBefore;return!o||!we.isSelectable(o)?!1:(e&&e(t.tr.setSelection(we.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function cb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function RM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Aq=(t,e,n)=>{let r=RM(t,n);if(!r)return!1;let i=ub(r);if(!i)return!1;let s=i.nodeAfter;if(OM(t,i,e))return!0;if(r.parent.content.size==0&&(Ll(s,"start")||we.isSelectable(s))){let o=Mm(t.doc,r.before(),r.after(),se.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ll(s,"start")?ze.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):we.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Cq=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=ub(r)}let o=s&&s.nodeAfter;return!o||!we.isSelectable(o)?!1:(e&&e(t.tr.setSelection(we.create(t.doc,s.pos)).scrollIntoView()),!0)};function ub(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Rq=(t,e)=>{let n=t.selection,r=n instanceof we,i;if(r){if(n.node.isTextblock||!oo(t.doc,n.from))return!1;i=n.from}else if(i=Nm(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(we.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},kq=(t,e)=>{let n=t.selection,r;if(n instanceof we){if(n.node.isTextblock||!oo(t.doc,n.to))return!1;r=n.to}else if(r=Nm(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Oq=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Zl(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Nq=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function kM(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Mq=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=kM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(ze.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Pq=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof jr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=kM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Be.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},xq=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(ll(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Zl(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},Dq=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(we.create(t.doc,i))),!0)};function Lq(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||oo(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function OM(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Lq(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,d=W.empty;for(let m=s.length-1;m>=0;m--)d=W.from(s[m].create(null,d));d=W.from(r.copy(d));let f=t.tr.step(new sn(e.pos-1,h,e.pos,h,new se(d,1,0),s.length,!0)),p=h+2*s.length;oo(f.doc,p)&&f.join(p),n(f.scrollIntoView())}return!0}let l=ze.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Zl(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&Ll(i,"start",!0)&&Ll(r,"end")){let h=r,d=[];for(;d.push(h),!h.isTextblock;)h=h.lastChild;let f=i,p=1;for(;!f.isTextblock;f=f.firstChild)p++;if(h.canReplace(h.childCount,h.childCount,f.content)){if(n){let m=W.empty;for(let y=d.length-1;y>=0;y--)m=W.from(d[y].copy(m));let g=t.tr.step(new sn(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new se(m,d.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function NM(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Be.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Vq=NM(-1),Fq=NM(1);function Bq(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&Z0(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function lI(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Uq(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);l=new np(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new np(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=Z0(l,t,e,o);return c?(r&&r($q(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function $q(t,e,n,r,i){let s=W.empty;for(let u=n.length-1;u>=0;u--)s=W.from(n[u].type.create(n[u].attrs,s));t.step(new sn(e.start-(r?2:0),e.end,e.start,e.end,new se(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,h=e.endIndex,d=!0;u<h;u++,d=!1)!d&&ll(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function Hq(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?zq(e,n,t,s):jq(e,n,s):!0:!1}}function zq(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new sn(s-1,o,s,o,new se(W.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new np(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Zl(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return oo(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function jq(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?W.empty:W.from(i))))return!1;let h=s.pos,d=h+o.nodeSize;return r.step(new sn(h-(a?1:0),d+(l?1:0),h+1,d-1,new se((a?W.empty:W.from(i.copy(W.empty))).append(l?W.empty:W.from(i.copy(W.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Wq(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=W.from(c?t.create():null),h=new se(W.from(t.create(null,W.from(a.type.create(null,u)))),c?3:1,0),d=s.start,f=s.end;n(e.tr.step(new sn(d-(c?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}function Vm(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class Fm{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const h=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),h={...Object.fromEntries(Object.entries(r).map(([d,f])=>[d,(...m)=>{const g=this.buildProps(c,n),y=f(...m)(g);return a.push(y),h}])),run:u};return h}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Vm({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class qq{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function de(t,e,n){return t.config[e]===void 0&&t.parent?de(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?de(t.parent,e,n):null}):t.config[e]}function Bm(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function MM(t){const e=[],{nodeExtensions:n,markExtensions:r}=Bm(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=de(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([d,f])=>{e.push({type:h,name:d,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=de(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const d={...s,...h};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function un(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Jt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function dv(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Jt(n,r),{})}function PM(t){return typeof t=="function"}function He(t,e=void 0,...n){return PM(t)?e?t.bind(e)(...n):t(...n):t}function Gq(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Kq(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function cI(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):Kq(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function uI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Gq(n)?!1:n!=null))}function Yq(t,e){var n;const r=MM(t),{nodeExtensions:i,markExtensions:s}=Bm(t),o=(n=i.find(c=>de(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((y,_)=>{const I=de(_,"extendNodeSchema",h);return{...y,...I?I(c):{}}},{}),f=uI({...d,content:He(de(c,"content",h)),marks:He(de(c,"marks",h)),group:He(de(c,"group",h)),inline:He(de(c,"inline",h)),atom:He(de(c,"atom",h)),selectable:He(de(c,"selectable",h)),draggable:He(de(c,"draggable",h)),code:He(de(c,"code",h)),defining:He(de(c,"defining",h)),isolating:He(de(c,"isolating",h)),attrs:Object.fromEntries(u.map(y=>{var _;return[y.name,{default:(_=y==null?void 0:y.attribute)===null||_===void 0?void 0:_.default}]}))}),p=He(de(c,"parseHTML",h));p&&(f.parseDOM=p.map(y=>cI(y,u)));const m=de(c,"renderHTML",h);m&&(f.toDOM=y=>m({node:y,HTMLAttributes:dv(y,u)}));const g=de(c,"renderText",h);return g&&(f.toText=g),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,y)=>{const _=de(y,"extendMarkSchema",h);return{...g,..._?_(c):{}}},{}),f=uI({...d,inclusive:He(de(c,"inclusive",h)),excludes:He(de(c,"excludes",h)),group:He(de(c,"group",h)),spanning:He(de(c,"spanning",h)),code:He(de(c,"code",h)),attrs:Object.fromEntries(u.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=He(de(c,"parseHTML",h));p&&(f.parseDOM=p.map(g=>cI(g,u)));const m=de(c,"renderHTML",h);return m&&(f.toDOM=g=>m({mark:g,HTMLAttributes:dv(g,u)})),[c.name,f]}));return new Zz({topNode:o,nodes:a,marks:l})}function ay(t,e){return e.nodes[t]||e.marks[t]||null}function hI(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const Jq=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function hb(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Um{constructor(e){this.find=e.find,this.handler=e.handler}}const Qq=(t,e)=>{if(hb(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function vd(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const h=Jq(c)+s;return o.forEach(d=>{if(u)return;const f=Qq(h,d.find);if(!f)return;const p=l.state.tr,m=Vm({state:l.state,transaction:p}),g={from:r-(f[0].length-s.length),to:i},{commands:y,chain:_,can:I}=new Fm({editor:n,state:m});d.handler({state:m,range:g,match:f,commands:y,chain:_,can:I})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function Xq(t){const{editor:e,rules:n}=t,r=new yr({state:{init(){return null},apply(i,s){const o=i.getMeta(r);if(o)return o;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:c,text:u}=a,h=c+u.length;vd({editor:e,from:c,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return vd({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&vd({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?vd({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Zq(t){return typeof t=="number"}class eG{constructor(e){this.find=e.find,this.handler=e.handler}}const tG=(t,e,n)=>{if(hb(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function nG(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Fm({editor:e,state:n}),h=[];return n.doc.nodesBetween(r,i,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(r,p),g=Math.min(i,p+f.content.size),y=f.textBetween(m-p,g-p,void 0,"");tG(y,s.find,o).forEach(I=>{if(I.index===void 0)return;const S=m+I.index+1,w=S+I[0].length,A={from:n.tr.mapping.map(S),to:n.tr.mapping.map(w)},L=s.handler({state:n,range:A,match:I,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});h.push(L)})}),h.every(f=>f!==null)}const rG=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function iG(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:u,from:h,to:d,rule:f,pasteEvt:p})=>{const m=u.tr,g=Vm({state:u,transaction:m});if(!(!nG({editor:e,state:g,from:Math.max(h-1,0),to:d.b-1,rule:f,pasteEvent:p,dropEvent:a})||!m.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m};return n.map(u=>new yr({view(h){const d=f=>{var p;r=!((p=h.dom.parentElement)===null||p===void 0)&&p.contains(f.target)?h.dom.parentElement:null};return window.addEventListener("dragstart",d),{destroy(){window.removeEventListener("dragstart",d)}}},props:{handleDOMEvents:{drop:(h,d)=>(s=r===h.dom.parentElement,a=d,!1),paste:(h,d)=>{var f;const p=(f=d.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=d,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(h,d,f)=>{const p=h[0],m=p.getMeta("uiEvent")==="paste"&&!i,g=p.getMeta("uiEvent")==="drop"&&!s,y=p.getMeta("applyPasteRules"),_=!!y;if(!m&&!g&&!_)return;if(_){const{from:w,text:A}=y,L=w+A.length,N=rG(A);return l({rule:u,state:f,from:w,to:{b:L},pasteEvt:N})}const I=d.doc.content.findDiffStart(f.doc.content),S=d.doc.content.findDiffEnd(f.doc.content);if(!(!Zq(I)||!S||I===S.b))return l({rule:u,state:f,from:I,to:S,pasteEvt:o})}}))}function sG(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Ha{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Ha.resolve(e),this.schema=Yq(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:ay(r.name,this.schema)};r.type==="mark"&&(!((i=He(de(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=de(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=de(r,"onCreate",s);a&&this.editor.on("create",a);const l=de(r,"onUpdate",s);l&&this.editor.on("update",l);const c=de(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=de(r,"onTransaction",s);u&&this.editor.on("transaction",u);const h=de(r,"onFocus",s);h&&this.editor.on("focus",h);const d=de(r,"onBlur",s);d&&this.editor.on("blur",d);const f=de(r,"onDestroy",s);f&&this.editor.on("destroy",f)})}static resolve(e){const n=Ha.sort(Ha.flatten(e)),r=sG(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=de(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=de(r,"priority")||100,o=de(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ay(n.name,this.schema)},i=de(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Ha.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:ay(o.name,this.schema)},l=[],c=de(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>Ri.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,y])=>[g,()=>y({editor:e})]));u={...u,...m}}const h=bq(u);l.push(h);const d=de(o,"addInputRules",a);hI(o,e.options.enableInputRules)&&d&&r.push(...d());const f=de(o,"addPasteRules",a);hI(o,e.options.enablePasteRules)&&f&&i.push(...f());const p=de(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[Xq({editor:e,rules:r}),...iG({editor:e,rules:i}),...s]}get attributes(){return MM(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Bm(this.extensions);return Object.fromEntries(n.filter(r=>!!de(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:un(r.name,this.schema)},o=de(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,h)=>{const d=dv(l,i);return o()({editor:e,node:l,getPos:u,decorations:h,HTMLAttributes:d,extension:r})};return[r.name,a]}))}}function oG(t){return Object.prototype.toString.call(t).slice(8,-1)}function ly(t){return oG(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function $m(t,e){const n={...t};return ly(t)&&ly(e)&&Object.keys(e).forEach(r=>{ly(e[r])?r in t?n[r]=$m(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class tr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=He(de(this,"addOptions",{name:this.name}))),this.storage=He(de(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new tr(e)}configure(e={}){const n=this.extend();return n.options=$m(this.options,e),n.storage=He(de(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new tr({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=He(de(n,"addOptions",{name:n.name})),n.storage=He(de(n,"addStorage",{name:n.name,options:n.options})),n}}function xM(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,u,h,d)=>{var f;const p=o==null?void 0:o[c.type.name];if(p)return c.isBlock&&!l&&(a+=s,l=!0),h&&(a+=p({node:c,pos:u,parent:h,index:d,range:e})),!1;c.isText?(a+=(f=c==null?void 0:c.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function DM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const aG=tr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new yr({key:new ss("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=DM(n);return xM(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),lG=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),cG=(t=!1)=>({commands:e})=>e.setContent("",t),uG=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,h=c.resolve(u.map(l)),d=c.resolve(u.map(l+a.nodeSize)),f=h.blockRange(d);if(!f)return;const p=Zl(f);if(a.type.isTextblock){const{defaultType:m}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(f.start,m)}(p||p===0)&&e.lift(f,p)})}),!0},hG=t=>e=>t(e),dG=()=>({state:t,dispatch:e})=>Pq(t,e),fG=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Be(r.doc.resolve(o-1))),!0},pG=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},mG=t=>({tr:e,state:n,dispatch:r})=>{const i=un(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},gG=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},yG=()=>({state:t,dispatch:e})=>Eq(t,e),_G=()=>({commands:t})=>t.keyboardShortcut("Enter"),vG=()=>({state:t,dispatch:e})=>Mq(t,e);function hp(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:hb(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function fv(t,e,n={}){return t.find(r=>r.type===e&&hp(r.attrs,n))}function bG(t,e,n={}){return!!fv(t,e,n)}function db(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=fv([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(fv([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&bG([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function lo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const EG=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=lo(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const h=db(l,s,e);if(h&&h.from<=c&&h.to>=u){const d=Be.create(o,h.from,h.to);n.setSelection(d)}}return!0},TG=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function LM(t){return t instanceof Be}function xo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function VM(t,e=null){if(!e)return null;const n=ze.atStart(t),r=ze.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Be.create(t,xo(0,i,s),xo(t.content.size,i,s)):Be.create(t,xo(e,i,s),xo(e,i,s))}function fb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const wG=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{fb()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!LM(n.state.selection))return o(),!0;const a=VM(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},SG=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),IG=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),FM=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&FM(r)}return t};function dI(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return FM(n)}function dp(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?W.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),dp("",e,n)}if(typeof t=="string"){const r=Ml.fromSchema(e);return n.slice?r.parseSlice(dI(t),n.parseOptions).content:r.parse(dI(t),n.parseOptions)}return dp("",e,n)}function AG(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof nn||i instanceof sn))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(ze.near(t.doc.resolve(o),n))}const CG=t=>t.toString().startsWith("<"),RG=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const o=dp(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,u=!0;if((CG(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}let d;c?(Array.isArray(e)?d=e.map(f=>f.text||"").join(""):typeof e=="object"&&e&&e.text?d=e.text:d=e,r.insertText(d,a,l)):(d=o,r.replaceWith(a,l,d)),n.updateSelection&&AG(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:d}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:d})}return!0},kG=()=>({state:t,dispatch:e})=>Rq(t,e),OG=()=>({state:t,dispatch:e})=>kq(t,e),NG=()=>({state:t,dispatch:e})=>Tq(t,e),MG=()=>({state:t,dispatch:e})=>Aq(t,e),PG=()=>({tr:t,state:e,dispatch:n})=>{try{const r=Nm(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},xG=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Nm(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},DG=()=>({state:t,dispatch:e})=>wq(t,e),LG=()=>({state:t,dispatch:e})=>Sq(t,e);function pb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function VG(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))fb()||pb()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const FG=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=VG(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function zu(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?un(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(h,d)=>{if(h.isText)return;const f=Math.max(r,d),p=Math.min(i,d+h.nodeSize);a.push({node:h,from:f,to:p})});const l=i-r,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>hp(h.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((h,d)=>h+d.to-d.from,0)>=l}const BG=(t,e={})=>({state:n,dispatch:r})=>{const i=un(t,n.schema);return zu(n,i,e)?Oq(n,r):!1},UG=()=>({state:t,dispatch:e})=>xq(t,e),$G=t=>({state:e,dispatch:n})=>{const r=un(t,e.schema);return Hq(r)(e,n)},HG=()=>({state:t,dispatch:e})=>Nq(t,e);function Hm(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function fI(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const zG=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Hm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=un(t,r.schema)),a==="mark"&&(o=lo(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,fI(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&n.addMark(u,u+c.nodeSize,o.create(fI(h.attrs,e)))})})}),!0):!1},jG=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),WG=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),qG=()=>({state:t,dispatch:e})=>Iq(t,e),GG=()=>({state:t,dispatch:e})=>Cq(t,e),KG=()=>({state:t,dispatch:e})=>Dq(t,e),YG=()=>({state:t,dispatch:e})=>Fq(t,e),JG=()=>({state:t,dispatch:e})=>Vq(t,e);function BM(t,e,n={}){return dp(t,e,{slice:!1,parseOptions:n})}const QG=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=BM(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function zm(t,e){const n=lo(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function XG(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function ZG(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function mb(t){return e=>ZG(e.$from,t)}function eK(t,e){const n=li.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function tK(t,e){const n={from:0,to:t.content.size};return xM(t,n,e)}function nK(t,e){const n=un(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function rK(t,e){const n=Hm(typeof e=="string"?e:e.name,t.schema);return n==="node"?nK(t,e):n==="mark"?zm(t,e):{}}function UM(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=db(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function Jd(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function pv(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?lo(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>hp(h.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:d})=>{const f=h.pos,p=d.pos;t.doc.nodesBetween(f,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,g),_=Math.min(p,g+m.nodeSize),I=_-y;o+=I,a.push(...m.marks.map(S=>({mark:S,from:y,to:_})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>hp(h.mark.attrs,n,{strict:!1})).reduce((h,d)=>h+d.to-d.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,d)=>h+d.to-d.from,0);return(l>0?l+c:l)>=o}function iK(t,e,n={}){if(!e)return zu(t,null,n)||pv(t,null,n);const r=Hm(e,t.schema);return r==="node"?zu(t,e,n):r==="mark"?pv(t,e,n):!1}function pI(t,e){const{nodeExtensions:n}=Bm(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=He(de(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function sK(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function oK(t,e,n){var r;const{selection:i}=e;let s=null;if(LM(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,h,d)=>{if(c)return!1;if(u.isInline){const f=!d||d.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=f&&p}return!c}),c})}const aK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=lo(t,r.schema);if(i)if(o){const c=zm(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;r.doc.nodesBetween(u,h,(d,f)=>{const p=Math.max(f,u),m=Math.min(f+d.nodeSize,h);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&n.addMark(p,m,l.create({...y.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return oK(r,n,l)},lK=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),cK=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=un(t,n.schema);return s.isTextblock?i().command(({commands:o})=>lI(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>lI(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},uK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=xo(t,0,r.content.size),s=we.create(r,i);e.setSelection(s)}return!0},hK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Be.atStart(r).from,a=Be.atEnd(r).to,l=xo(i,o,a),c=xo(s,o,a),u=Be.create(r,l,c);e.setSelection(u)}return!0},dK=t=>({state:e,dispatch:n})=>{const r=un(t,e.schema);return Wq(r)(e,n)};function mI(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const fK=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Jd(c,a.node().type.name,a.node().attrs);if(s instanceof we&&s.node.isBlock)return!a.parentOffset||!ll(o,a.pos)?!1:(r&&(t&&mI(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const h=l.parentOffset===l.parent.content.size;s instanceof Be&&e.deleteSelection();const d=a.depth===0?void 0:XG(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=h&&d?[{type:d,attrs:u}]:void 0,p=ll(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&ll(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,f=d?[{type:d,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,f),d&&!h&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&mI(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},pK=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=un(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const h=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=W.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let L=a.depth-y;L>=a.depth-3;L-=1)g=W.from(a.node(L).copy(g));const _=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,I=Jd(h,a.node().type.name,a.node().attrs),S=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(I))||void 0;g=g.append(W.from(o.createAndFill(null,S)||void 0));const w=a.before(a.depth-(y-1));e.replace(w,a.after(-_),new se(g,4-y,0));let A=-1;e.doc.nodesBetween(w,e.doc.content.size,(L,N)=>{if(A>-1)return!1;L.isTextblock&&L.content.size===0&&(A=N+1)}),A>-1&&e.setSelection(Be.near(e.doc.resolve(A))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,f=Jd(h,u.type.name,u.attrs),p=Jd(h,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:o,attrs:f},{type:d,attrs:p}]:[{type:o,attrs:f}];if(!ll(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=n,{splittableMarks:_}=i.extensionManager,I=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!I||!r)return!0;const S=I.filter(w=>_.includes(w.type.name));e.ensureMarks(S)}return!0},cy=(t,e)=>{const n=mb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&oo(t.doc,n.pos)&&t.join(n.pos),!0},uy=(t,e)=>{const n=mb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&oo(t.doc,r)&&t.join(r),!0},mK=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:h,splittableMarks:d}=i.extensionManager,f=un(t,o.schema),p=un(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:_}=m,I=y.blockRange(_),S=g||m.$to.parentOffset&&m.$from.marks();if(!I)return!1;const w=mb(A=>pI(A.type.name,h))(m);if(I.depth>=1&&w&&I.depth-w.depth<=1){if(w.node.type===f)return c.liftListItem(p);if(pI(w.node.type.name,h)&&f.validContent(w.node.content)&&a)return l().command(()=>(s.setNodeMarkup(w.pos,f),!0)).command(()=>cy(s,f)).command(()=>uy(s,f)).run()}return!n||!S||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>cy(s,f)).command(()=>uy(s,f)).run():l().command(()=>{const A=u().wrapInList(f,r),L=S.filter(N=>d.includes(N.type.name));return s.ensureMarks(L),A?!0:c.clearNodes()}).wrapInList(f,r).command(()=>cy(s,f)).command(()=>uy(s,f)).run()},gK=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=lo(t,r.schema);return pv(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},yK=(t,e,n={})=>({state:r,commands:i})=>{const s=un(t,r.schema),o=un(e,r.schema);return zu(r,s,n)?i.setNode(o):i.setNode(s,n)},_K=(t,e={})=>({state:n,commands:r})=>{const i=un(t,n.schema);return zu(n,i,e)?r.lift(i):r.wrapIn(i,e)},vK=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},bK=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},EK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=lo(t,r.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&o){let{from:d,to:f}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=db(c,l,p);m&&(d=m.from,f=m.to),n.removeMark(d,f,l)}else h.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},TK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Hm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=un(t,r.schema)),a==="mark"&&(o=lo(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(h,d)=>{s&&s===h.type&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(f=>{if(o===f.type){const p=Math.max(d,c),m=Math.min(d+h.nodeSize,u);n.addMark(p,m,o.create({...f.attrs,...e}))}})})}),!0):!1},wK=(t,e={})=>({state:n,dispatch:r})=>{const i=un(t,n.schema);return Bq(i,e)(n,r)},SK=(t,e={})=>({state:n,dispatch:r})=>{const i=un(t,n.schema);return Uq(i,e)(n,r)};var IK=Object.freeze({__proto__:null,blur:lG,clearContent:cG,clearNodes:uG,command:hG,createParagraphNear:dG,cut:fG,deleteCurrentNode:pG,deleteNode:mG,deleteRange:gG,deleteSelection:yG,enter:_G,exitCode:vG,extendMarkRange:EG,first:TG,focus:wG,forEach:SG,insertContent:IG,insertContentAt:RG,joinUp:kG,joinDown:OG,joinBackward:NG,joinForward:MG,joinItemBackward:PG,joinItemForward:xG,joinTextblockBackward:DG,joinTextblockForward:LG,keyboardShortcut:FG,lift:BG,liftEmptyBlock:UG,liftListItem:$G,newlineInCode:HG,resetAttributes:zG,scrollIntoView:jG,selectAll:WG,selectNodeBackward:qG,selectNodeForward:GG,selectParentNode:KG,selectTextblockEnd:YG,selectTextblockStart:JG,setContent:QG,setMark:aK,setMeta:lK,setNode:cK,setNodeSelection:uK,setTextSelection:hK,sinkListItem:dK,splitBlock:fK,splitListItem:pK,toggleList:mK,toggleMark:gK,toggleNode:yK,toggleWrap:_K,undoInputRule:vK,unsetAllMarks:bK,unsetMark:EK,updateAttributes:TK,wrapIn:wK,wrapInList:SK});const AK=tr.create({name:"commands",addCommands(){return{...IK}}}),CK=tr.create({name:"editable",addProseMirrorPlugins(){return[new yr({key:new ss("editable"),props:{editable:()=>this.editor.options.editable}})]}}),RK=tr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new yr({key:new ss("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),kK=tr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:d,parent:f}=h,p=h.parent.isTextblock&&d>0?a.doc.resolve(d-1):h,m=p.parent.type.spec.isolating,g=h.pos-h.parentOffset,y=m&&p.parent.childCount===1?g===h.pos:ze.atStart(c).from===d;return!u||!y||!f.type.isTextblock||f.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return fb()||pb()?s:i},addProseMirrorPlugins(){return[new yr({key:new ss("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=ze.atStart(e.doc).from,l=ze.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const h=n.tr,d=Vm({state:n,transaction:h}),{commands:f}=new Fm({editor:this.editor,state:d});if(f.clearNodes(),!!h.steps.length)return h}})]}}),OK=tr.create({name:"tabindex",addProseMirrorPlugins(){return[new yr({key:new ss("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class So{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new So(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new So(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new So(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+1,o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new So(o,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new So(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];return!this.children||this.children.length===0||this.children.forEach(s=>{if(s.node.type.name===e){if(Object.keys(n).length>0){const o=s.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(o[c]!==n[c])return}}if(i.push(s),r)return}i=i.concat(s.querySelectorAll(e))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const NK=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function MK(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let PK=class extends qq{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=MK(NK,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=PM(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[CK,aG.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),AK,RK,kK,OK]:[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Ha(i,this)}createCommandManager(){this.commandManager=new Fm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=BM(this.options.content,this.schema,this.options.parseOptions),n=VM(e,this.options.autofocus);this.view=new hq(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:$a.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return rK(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return iK(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return eK(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return tK(this.state.doc,{blockSeparator:n,textSerializers:{...DM(this.schema),...r}})}get isEmpty(){return sK(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new So(n,this)}get $doc(){return this.$pos(0)}};function Vl(t){return new Um({find:t.find,handler:({state:e,range:n,match:r})=>{const i=He(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(UM(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(m=>m===t.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const d=n.from+l+o.length;s.addMark(n.from+l,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function xK(t){return new Um({find:t.find,handler:({state:e,range:n,match:r})=>{const i=He(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const h=r[0][r[0].length-1];s.insertText(h,o+r[0].length-1),s.replaceWith(u,a,l)}else r[0]&&s.insert(o-1,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}})}function mv(t){return new Um({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=He(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function ju(t){return new Um({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=He(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&Z0(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:d}=e,{splittableMarks:f}=t.editor.extensionManager,p=d||h.$to.parentOffset&&h.$from.marks();if(p){const m=p.filter(g=>f.includes(g.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&oo(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class Ri{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=He(de(this,"addOptions",{name:this.name}))),this.storage=He(de(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ri(e)}configure(e={}){const n=this.extend();return n.options=$m(this.options,e),n.storage=He(de(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Ri({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=He(de(n,"addOptions",{name:n.name})),n.storage=He(de(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}let _r=class gv{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=He(de(this,"addOptions",{name:this.name}))),this.storage=He(de(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new gv(e)}configure(e={}){const n=this.extend();return n.options=$m(this.options,e),n.storage=He(de(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new gv({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=He(de(n,"addOptions",{name:n.name})),n.storage=He(de(n,"addStorage",{name:n.name,options:n.options})),n}};function Fl(t){return new eG({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=He(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),h=n.from+l.indexOf(a),d=h+a.length;if(UM(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>h).length)return null;d<n.to&&o.delete(d,n.to),h>n.from&&o.delete(n.from+u,h),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const DK=/^\s*>\s$/,LK=_r.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ju({find:DK,type:this.type})]}}),VK=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,FK=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,BK=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,UK=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,$K=Ri.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Vl({find:VK,type:this.type}),Vl({find:BK,type:this.type})]},addPasteRules(){return[Fl({find:FK,type:this.type}),Fl({find:UK,type:this.type})]}}),HK=_r.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Jt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),gI=Ri.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=zm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),yI=/^\s*([-+*])\s$/,zK=_r.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(HK.name,this.editor.getAttributes(gI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ju({find:yI,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ju({find:yI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(gI.name),editor:this.editor})),[t]}}),jK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,WK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,qK=Ri.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Vl({find:jK,type:this.type})]},addPasteRules(){return[Fl({find:WK,type:this.type})]}}),GK=/^```([a-z]+)?[\s\n]$/,KK=/^~~~([a-z]+)?[\s\n]$/,YK=_r.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Jt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[mv({find:GK,type:this.type,getAttributes:t=>({language:t[1]})}),mv({find:KK,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new yr({key:new ss("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o}=t.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(Be.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),JK=_r.create({name:"doc",topNode:!0,content:"block+"});function QK(t={}){return new yr({view(e){return new XK(e,t)}})}class XK{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),h=a?u.bottom:u.top;a&&l&&(h=(h+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:h-this.width/2,bottom:h+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=BN(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const ZK=tr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[QK(this.options)]}});class Pt extends ze{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Pt.valid(r)?new Pt(r):ze.near(r)}content(){return se.empty}eq(e){return e instanceof Pt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Pt(e.resolve(n.pos))}getBookmark(){return new gb(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!eY(e)||!tY(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Pt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Pt.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!we.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Pt.valid(a))return a}return null}}}Pt.prototype.visible=!1;Pt.findFrom=Pt.findGapCursorFrom;ze.jsonID("gapcursor",Pt);class gb{constructor(e){this.pos=e}map(e){return new gb(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Pt.valid(n)?new Pt(n):ze.near(n)}}function eY(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function tY(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function nY(){return new yr({props:{decorations:oY,createSelectionBetween(t,e,n){return e.pos==n.pos&&Pt.valid(n)?new Pt(n):null},handleClick:iY,handleKeyDown:rY,handleDOMEvents:{beforeinput:sY}}})}const rY=IM({ArrowLeft:bd("horiz",-1),ArrowRight:bd("horiz",1),ArrowUp:bd("vert",-1),ArrowDown:bd("vert",1)});function bd(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Be){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Pt.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Pt(c))),!0):!1}}function iY(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Pt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&we.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Pt(r))),!0)}function sY(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Pt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=W.empty;for(let o=r.length-1;o>=0;o--)i=W.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new se(i,0,0));return s.setSelection(Be.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function oY(t){if(!(t.selection instanceof Pt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ht.create(t.doc,[ur.widget(t.selection.head,e,{key:"gapcursor"})])}const aY=tr.create({name:"gapCursor",addProseMirrorPlugins(){return[nY()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=He(de(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),lY=_r.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Jt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(d=>a.includes(d.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),cY=_r.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Jt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>mv({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var fp=200,on=function(){};on.prototype.append=function(e){return e.length?(e=on.from(e),!this.length&&e||e.length<fp&&this.leafAppend(e)||this.length<fp&&e.leafPrepend(this)||this.appendInner(e)):this};on.prototype.prepend=function(e){return e.length?on.from(e).append(this):this};on.prototype.appendInner=function(e){return new uY(this,e)};on.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?on.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};on.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};on.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};on.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};on.from=function(e){return e instanceof on?e:e&&e.length?new $M(e):on.empty};var $M=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=fp)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=fp)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(on);on.empty=new $M([]);var uY=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(on);const hY=500;class Fr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((h,d)=>{if(!h.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new Xr(h.map));let f=h.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Xr(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new Fr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),d=new Xr(e.mapping.maps[u],h,n),f;(f=l&&l.merge(d))&&(d=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(d),n&&(o++,n=void 0),i||(l=d)}let c=o-r.depth;return c>fY&&(a=dY(a,c),o-=c),new Fr(a.append(s),o)}remapping(e,n){let r=new al;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Fr(this.items.append(e.map(n=>new Xr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(d.step){let m=e.steps[f].invert(e.docs[f]),g=d.selection&&d.selection.map(s.slice(l+1,f));g&&a++,r.push(new Xr(p,m,g))}else r.push(new Xr(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new Xr(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),h=new Fr(u,a);return h.emptyItemCount()>hY&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let h=new Xr(c.invert(),l,u),d,f=i.length-1;(d=i.length&&i[f].merge(h))?i[f]=d:i.push(h)}}else o.map&&r--},this.items.length,0),new Fr(on.from(i.reverse()),s)}}Fr.empty=new Fr(on.empty,0);function dY(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Xr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Xr(n.getMap().invert(),n,this.selection)}}}class ws{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const fY=20;function pY(t,e,n,r){let i=n.getMeta(Yo),s;if(i)return i.historyState;n.getMeta(yY)&&(t=new ws(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Yo))return o.getMeta(Yo).redo?new ws(t.done.addTransform(n,void 0,r,Qd(e)),t.undone,_I(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new ws(t.done,t.undone.addTransform(n,void 0,r,Qd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!mY(n,t.prevRanges)),c=o?hy(t.prevRanges,n.mapping):_I(n.mapping.maps[n.steps.length-1]);return new ws(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Qd(e)),Fr.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new ws(t.done.rebased(n,s),t.undone.rebased(n,s),hy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ws(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),hy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function mY(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function _I(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function hy(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function gY(t,e,n){let r=Qd(e),i=Yo.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new ws(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Yo,{redo:n,historyState:l})}let dy=!1,vI=null;function Qd(t){let e=t.plugins;if(vI!=e){dy=!1,vI=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){dy=!0;break}}return dy}const Yo=new ss("history"),yY=new ss("closeHistory");function _Y(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new yr({key:Yo,state:{init(){return new ws(Fr.empty,Fr.empty,null,0,-1)},apply(e,n,r){return pY(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?zM:r=="historyRedo"?jM:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function HM(t,e){return(n,r)=>{let i=Yo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=gY(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const zM=HM(!1,!0),jM=HM(!0,!0),vY=tr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>zM(t,e),redo:()=>({state:t,dispatch:e})=>jM(t,e)}},addProseMirrorPlugins(){return[_Y(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),bY=_r.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Jt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){const{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(Be.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(we.create(i.doc,a.pos)):i.setSelection(Be.create(i.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(i.insert(l,c),i.setSelection(Be.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[xK({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),EY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,TY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,wY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,SY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,IY=Ri.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Vl({find:EY,type:this.type}),Vl({find:wY,type:this.type})]},addPasteRules(){return[Fl({find:TY,type:this.type}),Fl({find:SY,type:this.type})]}}),AY=_r.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Jt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),CY=_r.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Jt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),bI=Ri.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=zm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),EI=/^(\d+)\.\s$/,RY=_r.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Jt(this.options.HTMLAttributes,n),0]:["ol",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(CY.name,this.editor.getAttributes(bI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ju({find:EI,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ju({find:EI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(bI.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),kY=_r.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),OY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,NY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,MY=Ri.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Jt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){const t={};return pb()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[Vl({find:OY,type:this.type})]},addPasteRules(){return[Fl({find:NY,type:this.type})]}}),PY=_r.create({name:"text",group:"inline"}),xY=tr.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,h,d,f,p,m,g,y;const _=[];return this.options.blockquote!==!1&&_.push(LK.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&_.push($K.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&_.push(zK.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&_.push(qK.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&_.push(YK.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&_.push(JK.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&_.push(ZK.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&_.push(aY.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&_.push(lY.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&_.push(cY.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&_.push(vY.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&_.push(bY.configure((h=this.options)===null||h===void 0?void 0:h.horizontalRule)),this.options.italic!==!1&&_.push(IY.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&_.push(AY.configure((f=this.options)===null||f===void 0?void 0:f.listItem)),this.options.orderedList!==!1&&_.push(RY.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&_.push(kY.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&_.push(MY.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&_.push(PY.configure((y=this.options)===null||y===void 0?void 0:y.text)),_}}),DY=tr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,considerAnyAsEmpty:!1,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new yr({key:new ss("placeholder"),props:{decorations:({doc:t,selection:e})=>{var n;const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=e,s=[];if(!r)return null;const{firstChild:o}=t.content,a=o&&o.type.isLeaf,l=o&&o.isAtom,c=this.options.considerAnyAsEmpty?!0:o&&o.type.name===((n=t.type.contentMatch.defaultType)===null||n===void 0?void 0:n.name),u=t.content.childCount<=1&&o&&c&&o.nodeSize<=2&&(!a||!l);return t.descendants((h,d)=>{const f=i>=d&&i<=d+h.nodeSize,p=!h.isLeaf&&!h.childCount;if((f||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];u&&m.push(this.options.emptyEditorClass);const g=ur.node(d,d+h.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:h,pos:d,hasAnchor:f}):this.options.placeholder});s.push(g)}return this.options.includeChildren}),Ht.create(t,s)}}})]}});function TI(t){return SA((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class LY extends PK{constructor(e={}){return super(e),this.vueRenderers=Xu(new Map),this.contentComponent=null,this.reactiveState=TI(this.view.state),this.reactiveExtensionStorage=TI(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),Sp(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const VY=hn({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=me(),n=ma();return Px(()=>{const r=t.editor;r&&r.options.element&&e.value&&Ul(()=>{if(!e.value||!r.options.element.firstChild)return;const i=ue(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),th(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=Uo(fD,{to:e.teleportElement,key:e.id},Uo(e.component,{ref:e.id,...e.props}));t.push(n)}),Uo("div",{ref:e=>{this.rootEl=e}},...t)}}),FY={class:"editor"},BY={class:"controlls"},UY=hn({__name:"tiptapEditor.vapor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=me();return Wi(()=>n.modelValue,s=>{var a,l;((a=i.value)==null?void 0:a.getHTML())!==s&&((l=i.value)==null||l.commands.setContent(s,!1))}),eh(()=>{i.value=new LY({extensions:[xY,DY.configure({placeholder:"Write something "})],content:n.modelValue,onUpdate:()=>{var s;r("update:modelValue",(s=i.value)==null?void 0:s.getHTML())}})}),th(()=>{var s;(s=i.value)==null||s.destroy()}),(s,o)=>(z(),te("div",FY,[E("div",BY,[i.value?(z(),te(ke,{key:0},[E("button",{icon:"",big:"",onClick:o[0]||(o[0]=a=>i.value.chain().focus().toggleBold().run())}," format_bold "),E("button",{icon:"",big:"",onClick:o[1]||(o[1]=a=>i.value.chain().focus().toggleItalic().run())}," format_italic "),E("button",{icon:"",big:"",onClick:o[2]||(o[2]=a=>i.value.chain().focus().toggleBulletList().run())}," format_list_bulleted "),E("button",{icon:"",big:"",onClick:o[3]||(o[3]=a=>i.value.chain().focus().toggleOrderedList().run())}," format_list_numbered ")],64)):Pe("",!0)]),Se(ue(VY),{editor:i.value,class:"editor-content",placeholder:"bla"},null,8,["editor"])]))}}),WM=Ta(UY,[["__scopeId","data-v-9ecefcbc"]]);function fy(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function $Y(t){return(...e)=>!t(...e)}function HY(t,e){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(e.trim())!==-1}function qM(t,e,n,r){return e?t.filter(i=>HY(r(i,n),e)).sort((i,s)=>r(i,n).length-r(s,n).length):t}function zY(t){return t.filter(e=>!e.$isLabel)}function py(t,e){return n=>n.reduce((r,i)=>i[t]&&i[t].length?(r.push({$groupLabel:i[e],$isLabel:!0}),r.concat(i[t])):r,[])}function jY(t,e,n,r,i){return s=>s.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const a=qM(o[n],t,e,i);return a.length?{[r]:o[r],[n]:a}:[]})}const wI=(...t)=>e=>t.reduce((n,r)=>r(n),e);var WY={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,e){return fy(t)?"":e?t[e]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",e=t.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,e,this.label):qM(n,e,this.label,this.customLabel):n=this.groupValues?py(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter($Y(this.isSelected)):n,this.taggable&&e.length&&!this.isExistingOption(e)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:t}):n.unshift({isTag:!0,label:t})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,e,n){return wI(jY(e,n,this.groupValues,this.groupLabel,this.customLabel),py(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return wI(py(this.groupValues,this.groupLabel),zY)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const e=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(e)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(fy(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const e=this.customLabel(t,this.label);return fy(e)?"":e},select(t,e){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(e)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(e==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){e!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const e=this.options.find(n=>n[this.groupLabel]===t.$groupLabel);if(e){if(this.wholeGroupSelected(e)){this.$emit("remove",e[this.groupValues],this.id);const n=this.trackBy?e[this.groupValues].map(i=>i[this.trackBy]):e[this.groupValues],r=this.internalValue.filter(i=>n.indexOf(this.trackBy?i[this.trackBy]:i)===-1);this.$emit("update:modelValue",r)}else{let n=e[this.groupValues].filter(r=>!(this.isOptionDisabled(r)||this.isSelected(r)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,e=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const r=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",r)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&e&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const t=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},qY={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,e){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight(t,e){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":e.$isLabel}];const n=this.options.find(r=>r[this.groupLabel]===e.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},Do={name:"vue-multiselect",mixins:[WY,qY],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const GY={ref:"tags",class:"multiselect__tags"},KY={class:"multiselect__tags-wrap"},YY={class:"multiselect__spinner"},JY={key:0},QY={class:"multiselect__option"},XY={class:"multiselect__option"},ZY=Te("No elements found. Consider changing the search query."),eJ={class:"multiselect__option"},tJ=Te("List is empty.");function nJ(t,e,n,r,i,s){return z(),Bt("div",{tabindex:t.searchable?-1:n.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":s.isAbove,"multiselect--has-options-group":s.hasOptionGroup},"multiselect"],onFocus:e[14]||(e[14]=o=>t.activate()),onBlur:e[15]||(e[15]=o=>t.searchable?!1:t.deactivate()),onKeydown:[e[16]||(e[16]=Mr(We(o=>t.pointerForward(),["self","prevent"]),["down"])),e[17]||(e[17]=Mr(We(o=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:e[18]||(e[18]=Mr(We(o=>t.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:e[19]||(e[19]=Mr(o=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[Zt(t.$slots,"caret",{toggle:t.toggle},()=>[Se("div",{onMousedown:e[1]||(e[1]=We(o=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),Zt(t.$slots,"clear",{search:t.search}),Se("div",GY,[Zt(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:s.visibleValues,isOpen:t.isOpen},()=>[qt(Se("div",KY,[(z(!0),Bt(ke,null,Pn(s.visibleValues,(o,a)=>Zt(t.$slots,"tag",{option:o,search:t.search,remove:t.removeElement},()=>[(z(),Bt("span",{class:"multiselect__tag",key:a},[Se("span",{textContent:Ie(t.getOptionLabel(o))},null,8,["textContent"]),Se("i",{tabindex:"1",onKeypress:Mr(We(l=>t.removeElement(o),["prevent"]),["enter"]),onMousedown:We(l=>t.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[rc,s.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>n.limit?Zt(t.$slots,"limit",{key:0},()=>[Se("strong",{class:"multiselect__strong",textContent:Ie(n.limitText(t.internalValue.length-n.limit))},null,8,["textContent"])]):Pe("v-if",!0)]),Se(af,{name:"multiselect__loading"},{default:hr(()=>[Zt(t.$slots,"loading",{},()=>[qt(Se("div",YY,null,512),[[rc,n.loading]])])]),_:3}),t.searchable?(z(),Bt("input",{key:0,ref:"search",name:n.name,id:t.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:t.placeholder,style:s.inputStyle,value:t.search,disabled:n.disabled,tabindex:n.tabindex,onInput:e[2]||(e[2]=o=>t.updateSearch(o.target.value)),onFocus:e[3]||(e[3]=We(o=>t.activate(),["prevent"])),onBlur:e[4]||(e[4]=We(o=>t.deactivate(),["prevent"])),onKeyup:e[5]||(e[5]=Mr(o=>t.deactivate(),["esc"])),onKeydown:[e[6]||(e[6]=Mr(We(o=>t.pointerForward(),["prevent"]),["down"])),e[7]||(e[7]=Mr(We(o=>t.pointerBackward(),["prevent"]),["up"])),e[9]||(e[9]=Mr(We(o=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:e[8]||(e[8]=Mr(We(o=>t.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):Pe("v-if",!0),s.isSingleLabelVisible?(z(),Bt("span",{key:1,class:"multiselect__single",onMousedown:e[10]||(e[10]=We((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[Zt(t.$slots,"singleLabel",{option:s.singleValue},()=>[Te(Ie(t.currentOptionLabel),1)])],32)):Pe("v-if",!0),s.isPlaceholderVisible?(z(),Bt("span",{key:2,class:"multiselect__placeholder",onMousedown:e[11]||(e[11]=We((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[Zt(t.$slots,"placeholder",{},()=>[Te(Ie(t.placeholder),1)])],32)):Pe("v-if",!0)],512),Se(af,{name:"multiselect"},{default:hr(()=>[qt(Se("div",{class:"multiselect__content-wrapper",onFocus:e[12]||(e[12]=(...o)=>t.activate&&t.activate(...o)),tabindex:"-1",onMousedown:e[13]||(e[13]=We(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[Se("ul",{class:"multiselect__content",style:s.contentStyle,role:"listbox",id:"listbox-"+t.id},[Zt(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(z(),Bt("li",JY,[Se("span",QY,[Zt(t.$slots,"maxElements",{},()=>[Te("Maximum of "+Ie(t.max)+" options selected. First remove a selected option to select another.",1)])])])):Pe("v-if",!0),!t.max||t.internalValue.length<t.max?(z(!0),Bt(ke,{key:1},Pn(t.filteredOptions,(o,a)=>(z(),Bt("li",{class:"multiselect__element",key:a,id:t.id+"-"+a,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?Pe("v-if",!0):(z(),Bt("span",{key:0,class:[t.optionHighlight(a,o),"multiselect__option"],onClick:We(l=>t.select(o),["stop"]),onMouseenter:We(l=>t.pointerSet(a),["self"]),"data-select":o&&o.isTag?t.tagPlaceholder:s.selectLabelText,"data-selected":s.selectedLabelText,"data-deselect":s.deselectLabelText},[Zt(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Se("span",null,Ie(t.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(z(),Bt("span",{key:1,"data-select":t.groupSelect&&s.selectGroupLabelText,"data-deselect":t.groupSelect&&s.deselectGroupLabelText,class:[t.groupHighlight(a,o),"multiselect__option"],onMouseenter:We(l=>t.groupSelect&&t.pointerSet(a),["self"]),onMousedown:We(l=>t.selectGroup(o),["prevent"])},[Zt(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Se("span",null,Ie(t.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):Pe("v-if",!0)],8,["id","role"]))),128)):Pe("v-if",!0),qt(Se("li",null,[Se("span",XY,[Zt(t.$slots,"noResult",{search:t.search},()=>[ZY])])],512),[[rc,n.showNoResults&&t.filteredOptions.length===0&&t.search&&!n.loading]]),qt(Se("li",null,[Se("span",eJ,[Zt(t.$slots,"noOptions",{},()=>[tJ])])],512),[[rc,n.showNoOptions&&(t.options.length===0||s.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!n.loading]]),Zt(t.$slots,"afterList")],12,["id"])],36),[[rc,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}Do.render=nJ;const kc=t=>{const e=me(t),n=["k","m"];for(let r=n.length-1;r>=0;r--){const i=1e3**(r+1);if(e.value>=i){let o=(e.value/i).toFixed(2).replace(/\.?0+$/,"");return o.length>4&&(o=o.slice(0,4)),o+n[r]}}return e.value.toString()},co=t=>(qv("data-v-ebcdcf12"),t=t(),Gv(),t),rJ={key:0},iJ={class:"left-column"},sJ={class:"img-container"},oJ=["src"],aJ=co(()=>E("h3",{class:"fs-4"},"Points",-1)),lJ=co(()=>E("p",null,"the points the competitors will get when they complete the tile",-1)),cJ={class:"right-column"},uJ={icon:"",class:"pen fs-4"},hJ=co(()=>E("h3",{class:"fs-4"},"Tile type",-1)),dJ={key:0},fJ={class:"fs-4"},pJ={class:"drop-list-input"},mJ={key:1},gJ=co(()=>E("h3",{class:"fs-4"},"Drops",-1)),yJ=co(()=>E("p",null,[Te(" Add drops to the list of valid drops and configure the required amount."),E("br"),E("em",null,"if none are set it defaults to target count")],-1)),_J={key:0,class:"drop-list-input"},vJ={key:0},bJ={class:"drop-list"},EJ={class:"drop-row"},TJ={class:"drop-list-input"},wJ={style:{"margin-left":"0","margin-right":"auto","font-weight":"bold"}},SJ={key:0},IJ={key:1},AJ=["onClick"],CJ={class:"drop-list-input"},RJ={key:0,class:"drop-list-input"},kJ={class:"drop-list-input"},OJ={class:"drop-list-input"},NJ=co(()=>E("h3",{class:"fs-4"},"Metric",-1)),MJ=co(()=>E("p",null,"Search and select the metric you want to associate with this tile.",-1)),PJ={key:2},xJ=co(()=>E("p",null,[E("em",null,"these are example values in edit mode, in view mode it will be with actual data")],-1)),DJ={class:"spread"},LJ=["value","max"],VJ=hn({__name:"EditTileModal.vapor",props:{localTileData:{}},emits:["save","cancel","delete"],setup(t,{expose:e,emit:n}){const r=t,i=me(!1),s=me(),o=me({name:"",count:0,min:0,max:0}),a=kt(()=>{var S;return((S=r.localTileData)==null?void 0:S.type)=="drop"?"Total Count":"Required "+r.localTileData.type}),l=kt(()=>{var S;return((S=r.localTileData)==null?void 0:S.type)=="drop"?"Drop Count":"Required "+r.localTileData.type}),c=()=>{r.localTileData&&![void 0,""].includes(o.value.name)&&(r.localTileData.drops?r.localTileData.drops.push({id:Y_(),...o.value}):r.localTileData.drops=[{id:Y_(),...o.value}],o.value.count=0,o.value.min=0,o.value.max=0)},u=S=>{r.localTileData&&r.localTileData.drops&&r.localTileData.drops.indexOf(S)>-1&&r.localTileData.drops.splice(r.localTileData.drops.indexOf(S),1)},h=me(["ehb","ehp","league_points","overall"]),d=me(tN.filter(S=>!h.value.includes(S))),f=me(Ph.filter(S=>!["overall"].includes(S))),p=me(WH.filter(S=>!h.value.includes(S))),m=me([...G0,...d.value]);e({showModal:()=>{s.value&&s.value.showModal()},closeModal:()=>{s.value&&(o.value.name="",s.value.close())}});const _=S=>{document.querySelector(S).focus()},I=S=>{[void 0,""].includes(S.target.innerHTML)&&(S.target.innerHTML="Please enter a title..."),r.localTileData.title=S.target.innerHTML};return(S,w)=>{var L,N,O,U,K,j,le,J,H;const A=Cp("font-awesome-icon");return z(),te("dialog",{class:"modal",ref_key:"dialog",ref:s},[r.localTileData?(z(),te("div",rJ,[E("div",iJ,[E("div",sJ,[E("img",{src:r.localTileData.image},null,8,oJ),qt(E("input",{required:"",type:"url","onUpdate:modelValue":w[0]||(w[0]=C=>r.localTileData.image=C)},null,512),[[Pr,r.localTileData.image]])]),Se(WM,{class:"editable",modelValue:r.localTileData.description,"onUpdate:modelValue":w[1]||(w[1]=C=>r.localTileData.description=C)},null,8,["modelValue"]),E("div",null,[aJ,lJ,E("label",null,[Te("points value: "),qt(E("input",{type:"number",min:"0","onUpdate:modelValue":w[2]||(w[2]=C=>r.localTileData.points=C)},null,512),[[Pr,r.localTileData.points]])]),E("label",null,[Te("Repeatable "),qt(E("input",{toggle:"",type:"checkbox","onUpdate:modelValue":w[3]||(w[3]=C=>r.localTileData.repeatable=C)},null,512),[[Fy,r.localTileData.repeatable]]),Te(" "+Ie(r.localTileData.repeatable),1)])])]),E("div",cJ,[E("h2",{onClick:w[7]||(w[7]=C=>_("#title")),class:"fs-1 title"},[E("span",{ref:"props.localTileData.title",contenteditable:"",class:"editable",spellcheck:"false",onFocus:w[4]||(w[4]=C=>i.value=!0),onKeydown:w[5]||(w[5]=Mr(We(C=>{i.value=!1,I(C)},["prevent"]),["enter"])),onBlur:w[6]||(w[6]=We(C=>{i.value=!1,I(C)},["prevent"])),name:"title",id:"title"},Ie(r.localTileData.title),545),E("span",uJ,[Se(A,{icon:["fas","pen"]})])]),E("button",{submit:"",onClick:w[8]||(w[8]=C=>S.$emit("save"))},"Save changes"),E("button",{cancel:"",onClick:w[9]||(w[9]=C=>S.$emit("cancel"))},"Cancel"),E("button",{icon:"",onClick:w[10]||(w[10]=C=>S.$emit("delete"))},"delete"),E("small",null,[Te(" tile id: "),E("code",null,Ie((L=r.localTileData)==null?void 0:L.id),1)]),E("div",null,[hJ,Se(ue(Do),{modelValue:r.localTileData.type,"onUpdate:modelValue":w[11]||(w[11]=C=>r.localTileData.type=C),options:["drop","exp","kc"],"close-on-select":!0,"clear-on-select":!1,"allow-empty":!1},null,8,["modelValue"])]),["kc","exp"].includes((N=r.localTileData)==null?void 0:N.type)?(z(),te("div",dJ,[E("h3",fJ,Ie(l.value),1),E("p",null," The required "+Ie(r.localTileData.type)+" per metric the competitors need to complete the tile ",1),E("div",null,[E("label",pJ,[Te(Ie(a.value)+": ",1),qt(E("input",{type:"number",min:"0","onUpdate:modelValue":w[12]||(w[12]=C=>r.localTileData.count=C)},null,512),[[Pr,r.localTileData.count]])])])])):Pe("",!0),((O=r.localTileData)==null?void 0:O.type)=="drop"?(z(),te("div",mJ,[gJ,yJ,E("div",null,[E("label",null,[Te(" Individual amount "),qt(E("input",{type:"checkbox",toggle:"",choice:"","onUpdate:modelValue":w[13]||(w[13]=C=>r.localTileData.needAny=C)},null,512),[[Fy,r.localTileData.needAny]]),Te(" Total amount ")])]),E("div",null,[(U=r.localTileData)!=null&&U.needAny?(z(),te("label",_J,[Te(" Required amount: "),qt(E("input",{type:"number",min:"0","onUpdate:modelValue":w[14]||(w[14]=C=>r.localTileData.count=C)},null,512),[[Pr,r.localTileData.count]])])):Pe("",!0)]),(K=r.localTileData)!=null&&K.drops&&((j=r.localTileData)==null?void 0:j.drops.length)>0?(z(),te("hr",vJ)):Pe("",!0),E("ul",bJ,[(z(!0),te(ke,null,Pn(r.localTileData.drops,C=>(z(),te("li",null,[E("div",EJ,[E("div",TJ,[E("p",wJ,Ie(C.name),1),(C.min||C.max)&&r.localTileData.needAny?(z(),te("small",SJ,[C.min?(z(),te(ke,{key:0},[Te("min: "+Ie(C.min),1)],64)):Pe("",!0),C.min&&C.max?(z(),te(ke,{key:1},[Te(" / ")],64)):Pe("",!0),C.max?(z(),te(ke,{key:2},[Te("max: "+Ie(C.max),1)],64)):Pe("",!0)])):Pe("",!0),r.localTileData.needAny?Pe("",!0):(z(),te("div",IJ,Ie(C.count)+"x",1)),E("button",{icon:"",outline:"",onClick:$=>u(C)}," delete ",8,AJ)])])]))),256)),E("li",null,[E("div",CJ,[Te(" Drop: "),qt(E("input",{type:"text","onUpdate:modelValue":w[15]||(w[15]=C=>o.value.name=C),placeholder:"Bandos tassets"},null,512),[[Pr,o.value.name]])]),r.localTileData.needAny?r.localTileData.needAny?(z(),te(ke,{key:1},[E("div",kJ,[Te(" Minimum needed: "),qt(E("input",{type:"number",placeholder:"unset","onUpdate:modelValue":w[17]||(w[17]=C=>o.value.min=C)},null,512),[[Pr,o.value.min]])]),E("div",OJ,[Te(" Maximum allowed: "),qt(E("input",{type:"number",placeholder:"unset","onUpdate:modelValue":w[18]||(w[18]=C=>o.value.max=C)},null,512),[[Pr,o.value.max]])])],64)):Pe("",!0):(z(),te("div",RJ,[Te(" Required ammount: "),qt(E("input",{type:"number","onUpdate:modelValue":w[16]||(w[16]=C=>o.value.count=C)},null,512),[[Pr,o.value.count]])])),E("button",{onClick:c},"Add Drop")])])])):Pe("",!0),E("div",null,[NJ,MJ,((le=r.localTileData)==null?void 0:le.type)=="drop"?(z(),Bt(ue(Do),{key:0,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":w[19]||(w[19]=C=>r.localTileData.metric=C),options:p.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):Pe("",!0),((J=r.localTileData)==null?void 0:J.type)=="kc"?(z(),Bt(ue(Do),{key:1,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":w[20]||(w[20]=C=>r.localTileData.metric=C),options:m.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):Pe("",!0),((H=r.localTileData)==null?void 0:H.type)=="exp"?(z(),Bt(ue(Do),{key:2,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":w[21]||(w[21]=C=>r.localTileData.metric=C),options:f.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):Pe("",!0)]),["kc","exp"].includes(r.localTileData.type)&&r.localTileData.metric?(z(),te("div",PJ,[(z(!0),te(ke,null,Pn(r.localTileData.metric,C=>(z(),te(ke,null,[E("h3",null,Ie(C.replace("_"," ")),1),xJ,E("div",DJ,[E("progress",{min:"0",value:Math.random()*r.localTileData.count,max:r.localTileData.count},null,8,LJ),E("p",null,Ie(ue(kc)(Math.floor(Math.random()*r.localTileData.count))),1)])],64))),256))])):Pe("",!0)])])):Pe("",!0)],512)}}}),FJ=Ta(VJ,[["__scopeId","data-v-ebcdcf12"]]),BJ={id:"board-info"},UJ={key:0,class:"fs-2"},$J={key:0,id:"controlls-are-editing"},HJ={key:1,id:"controlls-are-viewing"},zJ=["src","onClick"],jJ=hn({__name:"editBoard.vapor",async setup(t){var Nt,ct;let e,n;const r=Rm();r.value="Edit board - Bingo Bongo";const i=Nh(),s=Oh(),o=me(),a=me(),l=me(null),c=me(),u=me(!1),h=me(!1),d=me(!1),f=me(),p=me(null),m=me(0),g=me([]);let y=[];const _=new K0,I=me(parseInt(i.params.boardUUID));window.addEventListener("keydown",R=>{switch(R.key){case"Escape":o.value&&o.value.closeModal&&a.value&&a.value.closeModal&&(o.value.closeModal(),a.value.closeModal(),f.value=null,p.value=null,h.value=!1,h.value=!1);break}});const{data:S,promise:w}=Im(gt(Ke,"Boards",i.params.boardUUID)),{data:A,promise:L}=Pu(zi(Ke,"Boards",i.params.boardUUID,"Tiles"));[e,n]=pa(()=>Promise.all([w.value,L.value])),await e,n();const N=me(((Nt=S.value)==null?void 0:Nt.boardWidth)||5),O=me(A.value),U=()=>{d.value=!0,K()},K=()=>{o.value&&o.value.showModal&&d.value&&o.value.showModal(),a.value&&a.value.showModal&&h.value&&a.value.showModal()},j=()=>{o.value&&o.value.closeModal&&d.value&&o.value.closeModal(),a.value&&a.value.closeModal&&h.value&&!d.value&&a.value.closeModal()};g.value=(ct=S.value)!=null&&ct.orderOfList?S.value.orderOfList:O.value.map(R=>R.id);const le=kt(()=>O.value===void 0?[]:O.value.toSorted((R,M)=>g.value.indexOf(R.id)-g.value.indexOf(M.id)));Pz(l,le,{inverted:!0,handle:".handle",ghostClass:"blue-background-class",animation:200,onUpdate:R=>{gN(le.value,R.oldIndex,R.newIndex),Ul(()=>{g.value=le.value.map(M=>M.id)})}});const J=R=>{var M;R==="add"?N.value=Math.min(N.value+1,12):R==="remove"&&(N.value=Math.max(N.value-1,3)),(M=l.value)==null||M.style.setProperty("--width",N.value.toString())},H=async()=>{u.value=!1;try{const R=gt(Ke,"Boards",i.params.boardUUID),M=zi(R,"Tiles"),P=Tc(Ke),q=me(new Set);O.value.forEach(k=>{var D;(D=k.metric)==null||D.forEach(x=>{q.value.add(x)})}),P.update(R,{orderOfList:g.value,boardWidth:N.value,trackingMetrics:[...q.value]});const _e=await L_(M),Me={};_e.forEach(k=>{const D=k.id;Me[D]=!0;const x=k.data(),Y=O.value.find(Z=>Z.id===D);if(Y){if(JSON.stringify(Y)!==JSON.stringify(x)){const Z=gt(M,D);P.update(Z,Y)}}else{const Z=gt(M,D);P.delete(Z)}}),O.value.forEach(k=>{if(!Me[k.id]){const D=gt(M,k.id);P.set(D,k)}}),await P.commit();const{data:v,promise:T}=Pu(zi(Ke,"Boards",i.params.boardUUID,"Tiles"),{once:!0});await T.value,O.value=v.value}catch(R){console.error("Error synchronizing tiles:",R)}},C=async()=>{O.value=A.value,N.value=m.value,u.value=!1,g.value=y},$=()=>{const R=[...A.value];O.value=R,y=g.value,m.value=N.value,u.value=!0},V=async()=>{var P;const R=gt(Ke,"Boards",i.params.boardUUID,"Tiles",p.value.id),M=gt(Ke,"Boards",i.params.boardUUID);try{const q=Tc(Ke);(await wi(R)).data()?q.update(R,p.value):q.set(R,p.value);const v=((P=(await wi(M)).data())==null?void 0:P.orderOfList)||[];v.includes(p.value.id)||(v.push(p.value.id),q.update(M,{orderOfList:v})),await q.commit(),h.value=!1,a.value&&a.value.closeModal&&a.value.closeModal(),f.value=p.value;const T=zi(Ke,"Boards",i.params.boardUUID,"Tiles"),k=await L_(T);O.value=k.docs.map(Y=>Y.data());const D=new Set;O.value.forEach(Y=>{var Z;(Z=Y.metric)==null||Z.forEach(Q=>{D.add(Q)})});const x=Tc(Ke);x.update(M,{boardWidth:N.value,trackingMetrics:Array.from(D)}),await x.commit()}catch(q){console.error("Error saving tile:",q)}},oe=()=>{a.value&&a.value.closeModal&&(h.value=!1,p.value=null,f.value=null,a.value.closeModal())},pe=()=>{const R={...f.value};p.value=R,h.value=!0,a.value.showModal()},Re=()=>{const R=Y_(),M=xz();O.value.push({id:R,title:M,description:"a sample description",image:"https://oldschool.runescape.wiki/images/Frog_%28Ruins_of_Camdozaal%29.png?6ae5e",type:"drop",needAny:!1,points:0,count:0,repeatable:!1}),g.value.push(R)},$e=()=>{f.value&&(O.value=O.value.filter(R=>R.id!==f.value.id),g.value=le.value.map(R=>R.id),o.value.closeModal(),a.value.closeModal(),H())},ot=async()=>{var M;const R=Date.now();if(S.value&&S.value.trackingMetrics.forEach(P=>{}),(M=S.value)!=null&&M.lastUpdate&&R-S.value.lastUpdate<36e5)return console.log("no need to update"),null;{const P=Tc(Ke);S.value.lastUpdate=R,P.update(gt(Ke,"Boards",i.params.boardUUID),{lastUpdate:S.value.lastUpdate}),await Promise.all(S.value.trackingMetrics.map(async q=>{const _e=gt(Ke,"Boards",i.params.boardUUID,"Metrics",q);await _.competitions.getCompetitionDetails(I.value,q).then(Me=>{const v=pt(Me,R),T="t-"+R,k=v[T];P.set(_e,{[R]:k,metric:q,timestamp:R},{merge:!0})}).catch(Me=>{console.error("Error fetching competition details:",Me)})})),await P.commit()}},pt=(R,M)=>{const P={},q="t-"+M;return P[q]={},R.participations.forEach(_e=>{const Me=_e.player.username,v=_e.progress.gained;P[q][Me]={name:Me,gained:v,teamName:_e.teamName}}),P};return(R,M)=>(z(),te(ke,null,[E("section",null,[E("a",{icon:"",class:"btn",onClick:We(ot,["prevent"])},"download"),E("a",{icon:"",class:"btn",onClick:M[0]||(M[0]=We(P=>ue(s).push({name:"editBoard",params:{boardUUID:ue(i).params.boardUUID}}),["prevent"]))},"edit"),E("a",{icon:"",class:"btn",onClick:M[1]||(M[1]=We(P=>ue(s).push({name:"viewBoard",params:{boardUUID:ue(i).params.boardUUID}}),["prevent"]))},"visibility"),E("a",{icon:"",class:"btn",onClick:M[2]||(M[2]=We(P=>ue(s).push({name:"teamViewer",params:{boardUUID:ue(i).params.boardUUID}}),["prevent"]))},"group")]),E("section",BJ,[ue(S)?(z(),te("h1",UJ,Ie(ue(S).name),1)):Pe("",!0),Te(" Board ID: "),E("code",null,Ie(ue(i).params.boardUUID),1)]),u.value?(z(),te("section",$J,[E("button",{onClick:M[3]||(M[3]=P=>J("remove"))},"-"),qt(E("input",{id:"widthInputElement",ref_key:"widthInputForm",ref:c,class:"widthInput","onUpdate:modelValue":M[4]||(M[4]=P=>N.value=P),type:"number",min:"3",max:"12",onBlur:M[5]||(M[5]=()=>{N.value=Math.min(N.value,12),N.value=Math.max(N.value,3)})},null,544),[[Pr,N.value]]),E("button",{onClick:M[6]||(M[6]=P=>J("add"))},"+"),E("button",{submit:"",onClick:M[7]||(M[7]=P=>H())},"save"),E("button",{outline:"",onClick:M[8]||(M[8]=P=>C())},"cancel")])):(z(),te("section",HJ,[E("button",{class:"startEditing",onClick:M[9]||(M[9]=P=>$())},"reorder / edit board")])),E("section",{ref_key:"el",ref:l,class:"board",style:yi({"--width":N.value,position:"relative"})},[(z(!0),te(ke,null,Pn(le.value,P=>(z(),te("div",{class:Qu(["tile",{handle:u.value}]),key:P.id},[E("img",{class:"tile--image",src:P.image,onClick:()=>{h.value=!0,f.value=P,pe()}},null,8,zJ)],2))),128)),O.value.length<100&&u.value?(z(),te("button",{key:0,class:"add_tile",icon:"",onClick:M[10]||(M[10]=P=>Re()),style:yi({order:le.value.length+1})}," add_box ",4)):Pe("",!0)],4),Se(Fz,{ref_key:"modalEle",ref:o},{header:hr(()=>{var P;return[Te(" Delete tile: "+Ie((P=f.value)==null?void 0:P.title),1)]}),body:hr(()=>{var P;return[Te(" are you sure you want to delete the tile "+Ie((P=f.value)==null?void 0:P.title),1)]}),controls:hr(()=>[E("button",{submit:"",onClick:$e},"REMOVE"),E("button",{outline:"",onClick:M[11]||(M[11]=P=>j())},"Cancel")]),_:1},512),Se(FJ,{ref_key:"asideModalEle",ref:a,selectedTile:f.value,localTileData:p.value,onSave:V,onCancel:oe,onDelete:U},null,8,["selectedTile","localTileData"])],64))}}),WJ=Ta(jJ,[["__scopeId","data-v-110ba4ab"]]),yb=t=>(qv("data-v-1a588a28"),t=t(),Gv(),t),qJ={key:0},GJ={class:"left-column"},KJ={class:"img-container"},YJ=["src"],JJ=["innerHTML"],QJ={key:0},XJ=yb(()=>E("em",null,"This tile is repeatable",-1)),ZJ=[XJ],eQ={class:"right-column"},tQ={class:"fs-1 title"},nQ=yb(()=>E("h2",null,"Get",-1)),rQ={key:0},iQ=yb(()=>E("h3",{class:"fs-4"},"Drops",-1)),sQ={class:"drop-list"},oQ={style:{"padding-block":"var(--size-5)"}},aQ={class:"drop-row"},lQ={key:0},cQ={key:0},uQ={key:1},hQ={key:2},dQ={key:0,class:"fs-4"},fQ={class:"spread"},pQ=["value","max"],mQ={class:"totals"},gQ={class:"spread"},yQ=["value","max"],_Q={class:"totals"},vQ=hn({__name:"ViewTileModal.vapor",props:{selectedTile:{},latestData:{}},emits:["close"],setup(t,{expose:e}){const n=t,r=me(),i=u=>{const h={};for(const f in u){const p=u[f],m=p.teamName,g=p.gained||0;h[m]?h[m]+=g:h[m]=g}return Object.keys(h).map(f=>({team:f,total:h[f]}))},s=u=>{const h=me(n.latestData[u]);if(!h)return console.error(`Metric ${u} not found`),null;const d=h.value.data;if(d==null)return null;const f=i(d).toSorted((p,m)=>p.team<m.team?-1:p.team>m.team?1:0);return{...h.value,totals:f}},o=u=>{const h=me(0),d=s(u);if(!d||!d.totals||d.totals.length===0)return h.value;const f=d.totals.sort((p,m)=>m.total-p.total);return h.value=f[0].total,h.value},a=u=>(console.log(u),u);return e({showModal:()=>{r.value&&r.value.showModal()},closeModal:()=>{r.value&&r.value.close()}}),(u,h)=>{var d,f;return z(),te("dialog",{class:"modal",ref_key:"dialog",ref:r},[n.selectedTile?(z(),te("div",qJ,[E("div",GJ,[E("div",KJ,[E("img",{src:n.selectedTile.image},null,8,YJ)]),E("div",{innerHTML:n.selectedTile.description},null,8,JJ),E("div",null,[E("p",null,"Points: "+Ie(n.selectedTile.points),1),n.selectedTile.repeatable?(z(),te("p",QJ,ZJ)):Pe("",!0)])]),E("div",eQ,[E("h2",tQ,Ie(n.selectedTile.title),1),E("small",null,[Te(" tile id: "),E("code",null,Ie((d=n.selectedTile)==null?void 0:d.id),1)]),E("button",{onClick:h[0]||(h[0]=We(p=>u.$emit("close"),["prevent"]))},"close"),nQ,((f=n.selectedTile)==null?void 0:f.type)=="drop"?(z(),te("div",rQ,[iQ,E("ul",sQ,[(z(!0),te(ke,null,Pn(n.selectedTile.drops,p=>(z(),te("li",oQ,[E("div",aQ,[E("div",null,[Te(Ie(p.name)+" ",1),(p.min||p.max)&&n.selectedTile.needAny?(z(),te("small",lQ,[p.min?(z(),te("span",cQ,"min : "+Ie(p.min),1)):Pe("",!0),p.min&&p.max?(z(),te("span",uQ,"/")):Pe("",!0),p.max?(z(),te("span",hQ,"max : "+Ie(p.max),1)):Pe("",!0)])):Pe("",!0)]),E("div",null,Ie(a(n.selectedTile.collected)),1)])]))),256))])])):Pe("",!0),E("div",null,[["kc","exp"].includes(n.selectedTile.type)?Pe("",!0):(z(),te("h3",dQ," Metric "))]),E("div",null,[(z(!0),te(ke,null,Pn(n.selectedTile.metric,p=>{var m,g;return z(),te(ke,null,[E("h3",null,[Te(Ie(p.replace("_"," "))+" ",1),["kc","exp"].includes(n.selectedTile.type)?(z(),te(ke,{key:0},[Te(" x"+Ie(ue(kc)(n.selectedTile.count)),1)],64)):Pe("",!0)]),["kc","exp"].includes(n.selectedTile.type)?(z(!0),te(ke,{key:0},Pn((m=s(p))==null?void 0:m.totals,y=>(z(),te("div",null,[Te(Ie(y.team)+" ",1),E("div",fQ,[E("progress",{min:"0",value:y.total,max:n.selectedTile.count},null,8,pQ),E("p",mQ,Ie(y.total>=n.selectedTile.count?ue(kc)(n.selectedTile.count)+"+":ue(kc)(y.total))+Ie(" "+n.selectedTile.type),1)])]))),256)):(z(!0),te(ke,{key:1},Pn((g=s(p))==null?void 0:g.totals,y=>(z(),te("div",null,[Te(Ie(y.team)+" ",1),E("div",gQ,[E("progress",{min:"0",value:y.total!=0?y.total+o(p)*.05:0,max:o(p)+o(p)*.1},null,8,yQ),E("p",_Q,Ie(ue(kc)(y.total)),1)])]))),256))],64)}),256))])])])):Pe("",!0)],512)}}}),bQ=Ta(vQ,[["__scopeId","data-v-1a588a28"]]),EQ={class:"fs-2"},TQ=["onClick"],wQ=["src"],SQ=hn({__name:"viewBoard.vapor",async setup(t){var I;let e,n;const r=Nh(),i=Oh(),s=Rm(),{data:o,promise:a}=Im(gt(Ke,"Boards",r.params.boardUUID)),{data:l,promise:c}=Pu(zi(Ke,"Boards",r.params.boardUUID,"Metrics"));(I=o.value)!=null&&I.name&&(s.value=o.value.name+" - Bingo Bongo");const{data:u,promise:h}=Pu(zi(Ke,"Boards",r.params.boardUUID,"Tiles"));[e,n]=pa(()=>Promise.all([a.value,c.value,h.value])),await e,n();const d=me(u.value),f=kt(()=>{if(d.value===void 0)return[];if(!o.value||!o.value.orderOfList)return d.value.map(w=>w);const S=o.value.orderOfList;return d.value.toSorted((w,A)=>S.indexOf(w.id)-S.indexOf(A.id))});window.addEventListener("keydown",S=>{switch(S.key){case"Escape":m.value&&m.value.closeModal&&(p.value={},y());break}});const p=me(null),m=me(void 0),g=()=>{var S;(S=m.value)==null||S.showModal()},y=()=>{var S;p.value=null,(S=m.value)==null||S.closeModal()};function _(S){const w={};return S.forEach(A=>{w[A.metric]={metric:A.metric,data:A[A.timestamp]}}),w}return(S,w)=>ue(o)?(z(),te(ke,{key:0},[E("section",null,[E("a",{icon:"",class:"btn",onClick:w[0]||(w[0]=We(A=>ue(i).push({name:"editBoard",params:{boardUUID:ue(r).params.boardUUID}}),["prevent"]))},"edit"),E("a",{icon:"",class:"btn",onClick:w[1]||(w[1]=We(A=>ue(i).push({name:"viewBoard",params:{boardUUID:ue(r).params.boardUUID}}),["prevent"]))},"visibility"),E("a",{icon:"",class:"btn",onClick:w[2]||(w[2]=We(A=>ue(i).push({name:"teamViewer",params:{boardUUID:ue(r).params.boardUUID}}),["prevent"]))},"group")]),E("h1",EQ,Ie(ue(o).name),1),E("section",{ref:"el",class:"board",style:yi({"--width":ue(o).boardWidth,position:"relative"})},[(z(!0),te(ke,null,Pn(f.value,A=>(z(),te("div",{class:"tile",style:yi({"--_image":`url('${A.image}')`}),key:A.id,onClick:We(()=>{p.value=A,g()},["prevent"])},[E("img",{class:"tile--image",src:A.image},null,8,wQ)],12,TQ))),128))],4),Se(bQ,{ref_key:"asideModalEle",ref:m,onClose:y,selectedTile:p.value,latestData:_(ue(l))},null,8,["selectedTile","latestData"])],64)):Pe("",!0)}}),IQ=Ta(SQ,[["__scopeId","data-v-35036447"]]),AQ=Mp('<h1 class="fs-4">Typography</h1><hr><h1 class="fs-3">Heading level 1</h1><h2 class="fs-2">Heading level 2</h2><h3 class="fs-1">Heading level 3</h3><h4>Heading level 4</h4><h5>Heading level 5</h5><h2>Paragraph</h2><p> Lorem ipsum dolor sit amet, <strong>consectetur</strong> adipiscing elit. In id risus quis purus mollis lobortis vel ac tellus. Nam pharetra lorem quis dui commodo dapibus. Curabitur aliquet sapien vitae ligula pretium sollicitudin. Sed sed magna eu risus placerat gravida non sit amet augue. Morbi volutpat lobortis imperdiet. Sed elit purus, commodo a mi in, condimentum sagittis urna. Etiam condimentum pharetra cursus. Aliquam erat volutpat. In vel diam nulla. Praesent faucibus augue quis dui vehicula, a consequat est fringilla. Sed nec nisi fermentum, maximus nunc ac, hendrerit lorem. Proin mollis metus in erat dictum egestas. Proin nec ipsum viverra, scelerisque nisi in, faucibus nulla. </p><p> Aliquam erat volutpat. Donec sagittis libero ac justo suscipit laoreet. Suspendisse ut sem vel augue vulputate sodales blandit sit amet metus. Quisque porta consectetur efficitur. Duis venenatis nisl in mollis convallis. Pellentesque quis accumsan orci. Nulla porta arcu quis laoreet sagittis. Aliquam erat volutpat. Suspendisse sagittis, turpis vel posuere suscipit, dolor nunc sodales est, quis cursus dui elit vel nisl. </p><p> Nunc accumsan molestie nisl non malesuada. In egestas tellus lectus, nec venenatis tellus pulvinar vel. Fusce consectetur sodales ante, sed vehicula mauris pulvinar non. Cras tempor ante nec nibh iaculis aliquet. In quis velit non dui dapibus tempus quis sed velit. Morbi a ornare sem. Maecenas ornare molestie ex, sed maximus lorem viverra at. In tincidunt vel purus et suscipit. Aenean aliquam neque et ipsum volutpat, eu laoreet justo vestibulum. Maecenas quam turpis, convallis id nibh efficitur, interdum volutpat elit. Suspendisse potenti. Nulla in vulputate massa. </p><p> Quisque laoreet tincidunt massa, non pulvinar eros euismod sit amet. Maecenas non lorem vitae lorem condimentum posuere. Maecenas ac lectus elit. Nullam feugiat scelerisque interdum. Nullam volutpat tincidunt viverra. Suspendisse egestas venenatis orci. Nunc vehicula ut dolor aliquet finibus. </p><p> Donec tempus vestibulum odio vel consectetur. Donec sed feugiat tortor. Mauris iaculis nunc in orci suscipit, vel egestas orci pulvinar. In dapibus tortor ornare, eleifend eros eu, suscipit neque. Morbi quis pellentesque turpis, sit amet imperdiet augue. Mauris porttitor congue imperdiet. Quisque aliquet id quam a placerat. Fusce maximus in nibh vel ultricies. </p><p> Normal, <abbr title="Abbreviations">abbr</abbr>, <del>del</del>, <dfn>dfn</dfn>, <em>em</em>, <ins>ins</ins>, <mark>mark</mark>, <s>strike through</s>, <small>small</small>, <strong>strong</strong>, <sub>sub</sub>, <sup>sup</sup>, <u>u</u></p><h2>Links</h2>',15),CQ=E("p",null,[Te(" These are links: "),E("a",{href:"?2017-06-2703%3A30%3A17",target:"_blank",onclick:"return false;"},"never visited link (just don't click or it will becomes visited)"),Te(", "),E("a",{href:"."},"visited link"),Te(". Mouse hover to see effects. ")],-1),RQ=Mp("<h2>Lists</h2><h3>Unordered list</h3><ul><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ul><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ul></li><li>List item</li><li>List item</li><li>List item</li></ul><h3>Ordered list</h3><ol><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ol><li>Nested List Item</li><li>Nested List Item</li><li>Nested List Item</li></ol></li><li>List item</li><li>List item</li><li>List item</li></ol><h3>Mixed</h3><ul><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ol><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ol></li><li>List item</li><li>List item</li><li>List item</li></ul><ol><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ul><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ol><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ol><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ul><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ul></li></ol></li></ol></li><li>Nested List Item</li><li>Nested List Item</li></ul></li><li>List item</li><li>List item</li><li>List item</li></ol><h3>Definition list</h3><dl><dt>Definition list</dt><dd> Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </dd><dt>Lorem ipsum dolor sit amet</dt><dd> Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </dd></dl><h3>Details &amp; Summary</h3>",11),kQ=E("details",null,[E("summary",null,"Question 1"),E("p",null,[E("strong",null,"Pellentesque habitant morbi tristique"),Te(" senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. "),E("em",null,"Aenean ultricies mi vitae est."),Te(" Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, "),E("code",null,"commodo vitae"),Te(", ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. "),E("a",{href:"#",target:"_blank",onclick:"return false;"},"Donec non enim"),Te(" in turpis pulvinar facilisis. Ut felis. ")]),E("details",null,[E("summary",null,"Related documents"),E("ul",null,[E("li",null,[E("a",{href:"#",onclick:"return false;"},"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.")]),E("li",null,[E("a",{href:"#",onclick:"return false;"},"Aliquam tincidunt mauris eu risus.")]),E("li",null,[E("a",{href:"#",onclick:"return false;"},"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.")]),E("li",null,[E("a",{href:"#",onclick:"return false;"},"Aliquam tincidunt mauris eu risus.")])])])],-1),OQ=Mp(`<details><summary>Question 2</summary><p> Duis consequat metus et eros rutrum, interdum facilisis urna interdum. Etiam facilisis diam in libero varius ultricies id id est. Sed lacinia pellentesque sem vel sagittis. </p></details><h2>Blockquote</h2><blockquote> Those people who think they know everything are a great annoyance to those of us who do.<cite>Isaac Asimov</cite></blockquote><h2>Code</h2><p> This is inline code <code>&lt;div&gt;div element&lt;/div&gt;</code>. This is sample output <samp>sample</samp> And below is block code. </p><pre>&lt;div&gt;
    div element
    &lt;p&gt;paragraph&lt;/p&gt;
&lt;/div&gt;</pre><p> The input keyboard <kbd>Ctrl</kbd>+<kbd>S</kbd>. This is variable: <var>y</var> = <var>m</var><var>x</var> + <var>b</var></p><h2>Table</h2><table><thead><tr><th>Table heading</th><th>Table heading</th></tr></thead><tfoot><tr><th>Table footer</th><th>Table footer</th></tr></tfoot><tbody><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr></tbody></table><h2>Form elements</h2>`,10),NQ=E("legend",null,"Input types",-1),MQ=E("p",null,[E("label",{for:"input-type-color"},"Input Color"),E("br"),E("input",{id:"input-type-color",type:"color"})],-1),PQ=E("p",null,[E("label",{for:"input-type-number"},"Input Number"),E("br"),E("input",{id:"input-type-number",type:"number"})],-1),xQ=E("label",{for:"input-type-range"},"Input Range",-1),DQ=E("br",null,null,-1),LQ=E("label",{for:"input-type-range"},"Progress",-1),VQ=E("br",null,null,-1),FQ=["value"],BQ=E("p",null,[E("label",{for:"input-type-text"},"Input Text"),E("br"),E("input",{id:"input-type-text",type:"text"})],-1),UQ=E("p",null,[E("label",{for:"input-type-url"},"Input Url"),E("br"),E("input",{id:"input-type-url",type:"url"})],-1),$Q=Mp('<p><label><input type="radio" name="input-radio" value="1"> Input radio option 1</label><br><label><input type="radio" name="input-radio" value="2"> Input radio option 2</label></p><p><label><input type="radio" name="input-radio-disabled" value="1" disabled> Input radio option 1</label><br><label><input type="radio" name="input-radio-disabled" value="2" disabled> Input radio option 2</label></p><p><label><input type="checkbox"> Input checkbox 1</label><br><label><input type="checkbox"> Input checkbox 2</label></p>',3),HQ=E("p",null,[E("label",null,[E("input",{type:"checkbox",toggle:""}),Te(" Input checkbox 1")]),E("br"),E("label",null,[E("input",{type:"checkbox",toggle:""}),Te(" Input checkbox 2")])],-1),zQ=E("p",null,[E("label",null,[E("input",{type:"checkbox",disabled:""}),Te(" Input checkbox 1")]),E("br"),E("label",null,[E("input",{type:"checkbox",disabled:""}),Te(" Input checkbox 2")])],-1),jQ=E("label",{for:"input-textarea"},"Textarea",-1),WQ=E("br",null,null,-1),qQ=E("label",{for:"input-select"},"Select box",-1),GQ=E("br",null,null,-1),KQ=E("label",{for:"input-select-multiple"},"Select multiple",-1),YQ=E("br",null,null,-1),JQ=E("p",null,[E("label",{for:"input-select-disabled"},"Select disabled"),E("br"),E("select",{id:"input-select-disabled",disabled:""},[E("option",null,"1"),E("option",null,"2"),E("option",null,"3")])],-1),QQ=E("p",null,[E("button",null,"Normal button"),E("button",{submit:"",onclick:"return false;"},"Submit button"),E("button",{reset:"",onclick:"return false;"},"Reset button"),E("button",{disabled:""},"Disabled button")],-1),XQ=E("p",null,[E("input",{type:"button",value:"Input normal button"}),E("input",{type:"button",submit:"",value:"Input submit button",onclick:"return false;"}),E("input",{type:"button",reset:"",value:"Input reset button",onclick:"return false;"}),E("input",{type:"button",disabled:"",value:"Input disabled button"})],-1),ZQ=E("p",null,[E("a",{class:"button",href:"#",onclick:"return false;"},"Anchor button"),E("a",{class:"button",submit:"",href:"#",onclick:"return false;"},"Anchor disabled button"),E("a",{class:"button",reset:"",href:"#",onclick:"return false;"},"Anchor disabled button"),E("a",{class:"button",disabled:"",href:"#",onclick:"return false;"},"Anchor disabled button")],-1),eX=E("p",null,[Te("Thanks to "),E("a",{href:"http://rundiz.com"},"rundiz.com")],-1),tX=hn({__name:"colorPallete.vapor",setup(t){const e=me(),n=me(),r=me(),i=me(10),s=me(["option 1","option 2","option 3"]);return(o,a)=>(z(),te(ke,null,[AQ,CQ,RQ,kQ,OQ,E("form",null,[E("fieldset",null,[NQ,MQ,PQ,E("p",null,[xQ,DQ,qt(E("input",{id:"input-type-range",type:"range","onUpdate:modelValue":a[0]||(a[0]=l=>i.value=l)},null,512),[[Pr,i.value]])]),E("p",null,[LQ,VQ,E("progress",{id:"progress",max:"100",value:i.value},null,8,FQ)]),BQ,UQ]),$Q,HQ,zQ,E("p",null,[jQ,WQ,Se(WM,{modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value=l)},null,8,["modelValue"])]),E("p",null,[qQ,GQ,Se(ue(Do),{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=l=>n.value=l),options:s.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])]),E("p",null,[KQ,YQ,Se(ue(Do),{max:3,modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=l=>r.value=l),options:s.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])]),JQ,QQ,XQ,ZQ]),eX],64))}}),GM=t=>(qv("data-v-79fcdef2"),t=t(),Gv(),t),nX=GM(()=>E("div",null,[E("h1",null,"teams")],-1)),rX=GM(()=>E("span",{icon:""},"sync",-1)),iX=hn({__name:"teamViewer.vapor",async setup(t){let e,n;const r=Nh(),i=Oh(),{data:s,promise:o}=Pu(zi(Ke,"Boards",r.params.boardUUID,"Groups")),a=h=>"https://oldschool.runescape.wiki/images/"+(h.charAt(0).toUpperCase()+h.slice(1))+"_chat_badge.png";[e,n]=pa(()=>Promise.all([o.value])),await e,n();const l=new K0,c=async()=>{const h=Tc(Ke);try{const d=await l.competitions.getCompetitionDetails(parseInt(r.params.boardUUID)),f=u(d);s.value.forEach(p=>{Object.keys(f).findIndex(g=>g===p.teamName)!==-1?h.update(gt(Ke,"Boards",r.params.boardUUID,"Groups",p.id),{...f[p.teamName]}):h.delete(gt(Ke,"Boards",r.params.boardUUID,"Groups",p.id))}),Object.values(f).forEach(p=>{if(s.value.findIndex(g=>g.teamName===p.teamName)===-1){const g=gt(zi(Ke,"Boards",r.params.boardUUID,"Groups"));h.set(g,p)}}),await h.commit()}catch(d){console.error("Error synchronizing data:",d)}},u=h=>{var p;const d=me(),f=me({});return d.value=h.participations,(p=d.value)==null||p.map(m=>{f.value[m.teamName]={teamName:m.teamName,players:[],stats:null}}),d.value.map(m=>{delete m.player.ehb,delete m.player.exp,delete m.player.ehp,f.value[m.teamName].players=[...f.value[m.teamName].players,f.value[m.teamName].players[m.player.username]={...m.player}]}),f.value};return(h,d)=>(z(),te(ke,null,[E("section",null,[E("a",{icon:"",class:"btn",onClick:d[0]||(d[0]=We(f=>ue(i).push({name:"editBoard",params:{boardUUID:ue(r).params.boardUUID}}),["prevent"]))},"edit"),E("a",{icon:"",class:"btn",onClick:d[1]||(d[1]=We(f=>ue(i).push({name:"viewBoard",params:{boardUUID:ue(r).params.boardUUID}}),["prevent"]))},"visibility"),E("a",{icon:"",class:"btn",onClick:d[2]||(d[2]=We(f=>ue(i).push({name:"teamViewer",params:{boardUUID:ue(r).params.boardUUID}}),["prevent"]))},"group")]),nX,E("button",{onClick:We(c,["prevent"])},[Te("synch teams"),rX]),E("div",{class:"teams",style:yi({"--width":ue(s).length})},[(z(!0),te(ke,null,Pn(ue(s),f=>(z(),te("div",{key:f.id},[E("h2",null,Ie(f.teamName),1),E("ul",null,[(z(!0),te(ke,null,Pn(f.players,p=>(z(),te("li",{key:p.id,class:Qu({hasHelmet:p.type!=="regular"}),style:yi({"--marker":"url('"+a(p.type)+"')   "})},Ie(p.displayName),7))),128))])]))),128))],4)],64))}}),sX=Ta(iX,[["__scopeId","data-v-79fcdef2"]]),KM=eH({history:k$(),routes:[{path:"/new",name:"createNewBingo",component:ZH},{path:"/login",name:"loginScreen",component:oz},{path:"/view/:boardUUID",name:"viewBoard",component:IQ},{path:"/edit/:boardUUID",name:"editBoard",component:WJ},{path:"/teams/:boardUUID",name:"teamViewer",component:sX},{path:"/color/",name:"color",component:tX},{path:"/",name:"Home",component:wH}]});KM.beforeEach(async t=>{if(["editBoard","teamViewer"].includes(t.name)&&!await aX(t.params.boardUUID))return{name:"loginScreen"};if(t.name=="createNewBingo"&&!await oX())return{name:"loginScreen"};if(t.name=="viewBoard"&&!await lX(t.params.boardUUID))return{name:"loginScreen"}});const oX=async()=>{const t=await oh();if(t){const n=(await wi(gt(Ke,"Users",t.uid))).data();if(n&&n.banned)return!1}return!!(t!=null&&t.uid)},aX=async t=>{const e=await oh();if(e){const s=(await wi(gt(Ke,"Users",e.uid))).data();if(s&&s.banned)return!1}const r=(await wi(gt(Ke,"Boards",t))).data();return r&&r.ownerID===(e==null?void 0:e.uid)},lX=async t=>{const e=await oh();if(e){const s=(await wi(gt(Ke,"Users",e.uid))).data();if(s&&s.banned)return!1}const r=(await wi(gt(Ke,"Boards",t))).data();return r&&r.ownerID===(e==null?void 0:e.uid)||r&&r.published};function SI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SI(Object(n),!0).forEach(function(r){Qt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}function cX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function II(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uX(t,e,n){return e&&II(t.prototype,e),n&&II(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _b(t,e){return dX(t)||pX(t,e)||YM(t,e)||gX()}function Bh(t){return hX(t)||fX(t)||YM(t)||mX()}function hX(t){if(Array.isArray(t))return yv(t)}function dX(t){if(Array.isArray(t))return t}function fX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function YM(t,e){if(t){if(typeof t=="string")return yv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yv(t,e)}}function yv(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var AI=function(){},vb={},JM={},QM=null,XM={mark:AI,measure:AI};try{typeof window<"u"&&(vb=window),typeof document<"u"&&(JM=document),typeof MutationObserver<"u"&&(QM=MutationObserver),typeof performance<"u"&&(XM=performance)}catch{}var yX=vb.navigator||{},CI=yX.userAgent,RI=CI===void 0?"":CI,Xs=vb,wt=JM,kI=QM,Ed=XM;Xs.document;var as=!!wt.documentElement&&!!wt.head&&typeof wt.addEventListener=="function"&&typeof wt.createElement=="function",ZM=~RI.indexOf("MSIE")||~RI.indexOf("Trident/"),Td,wd,Sd,Id,Ad,Zi="___FONT_AWESOME___",_v=16,eP="fa",tP="svg-inline--fa",ca="data-fa-i2svg",vv="data-fa-pseudo-element",_X="data-fa-pseudo-element-pending",bb="data-prefix",Eb="data-icon",OI="fontawesome-i2svg",vX="async",bX=["HTML","HEAD","STYLE","SCRIPT"],nP=function(){try{return!0}catch{return!1}}(),Et="classic",xt="sharp",Tb=[Et,xt];function Uh(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[Et]}})}var Wu=Uh((Td={},Qt(Td,Et,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),Qt(Td,xt,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Td)),qu=Uh((wd={},Qt(wd,Et,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Qt(wd,xt,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),wd)),Gu=Uh((Sd={},Qt(Sd,Et,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Qt(Sd,xt,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Sd)),EX=Uh((Id={},Qt(Id,Et,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Qt(Id,xt,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Id)),TX=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,rP="fa-layers-text",wX=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,SX=Uh((Ad={},Qt(Ad,Et,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Qt(Ad,xt,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),Ad)),iP=[1,2,3,4,5,6,7,8,9,10],IX=iP.concat([11,12,13,14,15,16,17,18,19,20]),AX=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Lo={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Ku=new Set;Object.keys(qu[Et]).map(Ku.add.bind(Ku));Object.keys(qu[xt]).map(Ku.add.bind(Ku));var CX=[].concat(Tb,Bh(Ku),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Lo.GROUP,Lo.SWAP_OPACITY,Lo.PRIMARY,Lo.SECONDARY]).concat(iP.map(function(t){return"".concat(t,"x")})).concat(IX.map(function(t){return"w-".concat(t)})),su=Xs.FontAwesomeConfig||{};function RX(t){var e=wt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function kX(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(wt&&typeof wt.querySelector=="function"){var OX=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];OX.forEach(function(t){var e=_b(t,2),n=e[0],r=e[1],i=kX(RX(n));i!=null&&(su[r]=i)})}var sP={styleDefault:"solid",familyDefault:"classic",cssPrefix:eP,replacementClass:tP,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};su.familyPrefix&&(su.cssPrefix=su.familyPrefix);var Bl=ae(ae({},sP),su);Bl.autoReplaceSvg||(Bl.observeMutations=!1);var ge={};Object.keys(sP).forEach(function(t){Object.defineProperty(ge,t,{enumerable:!0,set:function(n){Bl[t]=n,ou.forEach(function(r){return r(ge)})},get:function(){return Bl[t]}})});Object.defineProperty(ge,"familyPrefix",{enumerable:!0,set:function(e){Bl.cssPrefix=e,ou.forEach(function(n){return n(ge)})},get:function(){return Bl.cssPrefix}});Xs.FontAwesomeConfig=ge;var ou=[];function NX(t){return ou.push(t),function(){ou.splice(ou.indexOf(t),1)}}var ps=_v,ui={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function MX(t){if(!(!t||!as)){var e=wt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=wt.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return wt.head.insertBefore(e,r),t}}var PX="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Yu(){for(var t=12,e="";t-- >0;)e+=PX[Math.random()*62|0];return e}function ec(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function wb(t){return t.classList?ec(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function oP(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function xX(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(oP(t[n]),'" ')},"").trim()}function jm(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function Sb(t){return t.size!==ui.size||t.x!==ui.x||t.y!==ui.y||t.rotate!==ui.rotate||t.flipX||t.flipY}function DX(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function LX(t){var e=t.transform,n=t.width,r=n===void 0?_v:n,i=t.height,s=i===void 0?_v:i,o=t.startCentered,a=o===void 0?!1:o,l="";return a&&ZM?l+="translate(".concat(e.x/ps-r/2,"em, ").concat(e.y/ps-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/ps,"em), calc(-50% + ").concat(e.y/ps,"em)) "):l+="translate(".concat(e.x/ps,"em, ").concat(e.y/ps,"em) "),l+="scale(".concat(e.size/ps*(e.flipX?-1:1),", ").concat(e.size/ps*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var VX=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function aP(){var t=eP,e=tP,n=ge.cssPrefix,r=ge.replacementClass,i=VX;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var NI=!1;function my(){ge.autoAddCss&&!NI&&(MX(aP()),NI=!0)}var FX={mixout:function(){return{dom:{css:aP,insertCss:my}}},hooks:function(){return{beforeDOMElementCreation:function(){my()},beforeI2svg:function(){my()}}}},es=Xs||{};es[Zi]||(es[Zi]={});es[Zi].styles||(es[Zi].styles={});es[Zi].hooks||(es[Zi].hooks={});es[Zi].shims||(es[Zi].shims=[]);var $r=es[Zi],lP=[],BX=function t(){wt.removeEventListener("DOMContentLoaded",t),mp=1,lP.map(function(e){return e()})},mp=!1;as&&(mp=(wt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(wt.readyState),mp||wt.addEventListener("DOMContentLoaded",BX));function UX(t){as&&(mp?setTimeout(t,0):lP.push(t))}function $h(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?oP(t):"<".concat(e," ").concat(xX(r),">").concat(s.map($h).join(""),"</").concat(e,">")}function MI(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var $X=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},gy=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?$X(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function HX(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function bv(t){var e=HX(t);return e.length===1?e[0].toString(16):null}function zX(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function PI(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function Ev(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=PI(e);typeof $r.hooks.addPack=="function"&&!i?$r.hooks.addPack(t,PI(e)):$r.styles[t]=ae(ae({},$r.styles[t]||{}),s),t==="fas"&&Ev("fa",e)}var Cd,Rd,kd,za=$r.styles,jX=$r.shims,WX=(Cd={},Qt(Cd,Et,Object.values(Gu[Et])),Qt(Cd,xt,Object.values(Gu[xt])),Cd),Ib=null,cP={},uP={},hP={},dP={},fP={},qX=(Rd={},Qt(Rd,Et,Object.keys(Wu[Et])),Qt(Rd,xt,Object.keys(Wu[xt])),Rd);function GX(t){return~CX.indexOf(t)}function KX(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!GX(i)?i:null}var pP=function(){var e=function(s){return gy(za,function(o,a,l){return o[l]=gy(a,s,{}),o},{})};cP=e(function(i,s,o){if(s[3]&&(i[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){i[l.toString(16)]=o})}return i}),uP=e(function(i,s,o){if(i[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){i[l]=o})}return i}),fP=e(function(i,s,o){var a=s[2];return i[o]=o,a.forEach(function(l){i[l]=o}),i});var n="far"in za||ge.autoFetchSvg,r=gy(jX,function(i,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!n&&(a="fas"),typeof o=="string"&&(i.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:a,iconName:l}),i},{names:{},unicodes:{}});hP=r.names,dP=r.unicodes,Ib=Wm(ge.styleDefault,{family:ge.familyDefault})};NX(function(t){Ib=Wm(t.styleDefault,{family:ge.familyDefault})});pP();function Ab(t,e){return(cP[t]||{})[e]}function YX(t,e){return(uP[t]||{})[e]}function Vo(t,e){return(fP[t]||{})[e]}function mP(t){return hP[t]||{prefix:null,iconName:null}}function JX(t){var e=dP[t],n=Ab("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Zs(){return Ib}var Cb=function(){return{prefix:null,iconName:null,rest:[]}};function Wm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?Et:n,i=Wu[r][t],s=qu[r][t]||qu[r][i],o=t in $r.styles?t:null;return s||o||null}var xI=(kd={},Qt(kd,Et,Object.keys(Gu[Et])),Qt(kd,xt,Object.keys(Gu[xt])),kd);function qm(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,s=(e={},Qt(e,Et,"".concat(ge.cssPrefix,"-").concat(Et)),Qt(e,xt,"".concat(ge.cssPrefix,"-").concat(xt)),e),o=null,a=Et;(t.includes(s[Et])||t.some(function(c){return xI[Et].includes(c)}))&&(a=Et),(t.includes(s[xt])||t.some(function(c){return xI[xt].includes(c)}))&&(a=xt);var l=t.reduce(function(c,u){var h=KX(ge.cssPrefix,u);if(za[u]?(u=WX[a].includes(u)?EX[a][u]:u,o=u,c.prefix=u):qX[a].indexOf(u)>-1?(o=u,c.prefix=Wm(u,{family:a})):h?c.iconName=h:u!==ge.replacementClass&&u!==s[Et]&&u!==s[xt]&&c.rest.push(u),!i&&c.prefix&&c.iconName){var d=o==="fa"?mP(c.iconName):{},f=Vo(c.prefix,c.iconName);d.prefix&&(o=null),c.iconName=d.iconName||f||c.iconName,c.prefix=d.prefix||c.prefix,c.prefix==="far"&&!za.far&&za.fas&&!ge.autoFetchSvg&&(c.prefix="fas")}return c},Cb());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===xt&&(za.fass||ge.autoFetchSvg)&&(l.prefix="fass",l.iconName=Vo(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||o==="fa")&&(l.prefix=Zs()||"fas"),l}var QX=function(){function t(){cX(this,t),this.definitions={}}return uX(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){n.definitions[a]=ae(ae({},n.definitions[a]||{}),o[a]),Ev(a,o[a]);var l=Gu[Et][a];l&&Ev(l,o[a]),pP()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var o=i[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];n[a]||(n[a]={}),u.length>0&&u.forEach(function(h){typeof h=="string"&&(n[a][h]=c)}),n[a][l]=c}),n}}]),t}(),DI=[],ja={},hl={},XX=Object.keys(hl);function ZX(t,e){var n=e.mixoutsTo;return DI=t,ja={},Object.keys(hl).forEach(function(r){XX.indexOf(r)===-1&&delete hl[r]}),DI.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),pp(i[o])==="object"&&Object.keys(i[o]).forEach(function(a){n[o]||(n[o]={}),n[o][a]=i[o][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(o){ja[o]||(ja[o]=[]),ja[o].push(s[o])})}r.provides&&r.provides(hl)}),n}function Tv(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=ja[t]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function ua(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=ja[t]||[];i.forEach(function(s){s.apply(null,n)})}function ts(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return hl[t]?hl[t].apply(null,e):void 0}function wv(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Zs();if(e)return e=Vo(n,e)||e,MI(gP.definitions,n,e)||MI($r.styles,n,e)}var gP=new QX,eZ=function(){ge.autoReplaceSvg=!1,ge.observeMutations=!1,ua("noAuto")},tZ={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return as?(ua("beforeI2svg",e),ts("pseudoElements2svg",e),ts("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;ge.autoReplaceSvg===!1&&(ge.autoReplaceSvg=!0),ge.observeMutations=!0,UX(function(){rZ({autoReplaceSvgRoot:n}),ua("watch",e)})}},nZ={icon:function(e){if(e===null)return null;if(pp(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Vo(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=Wm(e[0]);return{prefix:r,iconName:Vo(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(ge.cssPrefix,"-"))>-1||e.match(TX))){var i=qm(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||Zs(),iconName:Vo(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=Zs();return{prefix:s,iconName:Vo(s,e)||e}}}},vr={noAuto:eZ,config:ge,dom:tZ,parse:nZ,library:gP,findIconDefinition:wv,toHtml:$h},rZ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?wt:n;(Object.keys($r.styles).length>0||ge.autoFetchSvg)&&as&&ge.autoReplaceSvg&&vr.dom.i2svg({node:r})};function Gm(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return $h(r)})}}),Object.defineProperty(t,"node",{get:function(){if(as){var r=wt.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function iZ(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,o=t.transform;if(Sb(o)&&n.found&&!r.found){var a=n.width,l=n.height,c={x:a/l/2,y:.5};i.style=jm(ae(ae({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function sZ(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,o=s===!0?"".concat(e,"-").concat(ge.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ae(ae({},i),{},{id:o}),children:r}]}]}function Rb(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,o=t.transform,a=t.symbol,l=t.title,c=t.maskId,u=t.titleId,h=t.extra,d=t.watchable,f=d===void 0?!1:d,p=r.found?r:n,m=p.width,g=p.height,y=i==="fak",_=[ge.replacementClass,s?"".concat(ge.cssPrefix,"-").concat(s):""].filter(function(O){return h.classes.indexOf(O)===-1}).filter(function(O){return O!==""||!!O}).concat(h.classes).join(" "),I={children:[],attributes:ae(ae({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:_,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},S=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(I.attributes[ca]=""),l&&(I.children.push({tag:"title",attributes:{id:I.attributes["aria-labelledby"]||"title-".concat(u||Yu())},children:[l]}),delete I.attributes.title);var w=ae(ae({},I),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:ae(ae({},S),h.styles)}),A=r.found&&n.found?ts("generateAbstractMask",w)||{children:[],attributes:{}}:ts("generateAbstractIcon",w)||{children:[],attributes:{}},L=A.children,N=A.attributes;return w.children=L,w.attributes=N,a?sZ(w):iZ(w)}function LI(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,o=t.extra,a=t.watchable,l=a===void 0?!1:a,c=ae(ae(ae({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[ca]="");var u=ae({},o.styles);Sb(i)&&(u.transform=LX({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=jm(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function oZ(t){var e=t.content,n=t.title,r=t.extra,i=ae(ae(ae({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=jm(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var yy=$r.styles;function Sv(t){var e=t[0],n=t[1],r=t.slice(4),i=_b(r,1),s=i[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(ge.cssPrefix,"-").concat(Lo.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ge.cssPrefix,"-").concat(Lo.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(ge.cssPrefix,"-").concat(Lo.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:o}}var aZ={found:!1,width:512,height:512};function lZ(t,e){!nP&&!ge.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function Iv(t,e){var n=e;return e==="fa"&&ge.styleDefault!==null&&(e=Zs()),new Promise(function(r,i){if(ts("missingIconAbstract"),n==="fa"){var s=mP(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&yy[e]&&yy[e][t]){var o=yy[e][t];return r(Sv(o))}lZ(t,e),r(ae(ae({},aZ),{},{icon:ge.showMissingIcons&&t?ts("missingIconAbstract")||{}:{}}))})}var VI=function(){},Av=ge.measurePerformance&&Ed&&Ed.mark&&Ed.measure?Ed:{mark:VI,measure:VI},Oc='FA "6.5.2"',cZ=function(e){return Av.mark("".concat(Oc," ").concat(e," begins")),function(){return yP(e)}},yP=function(e){Av.mark("".concat(Oc," ").concat(e," ends")),Av.measure("".concat(Oc," ").concat(e),"".concat(Oc," ").concat(e," begins"),"".concat(Oc," ").concat(e," ends"))},kb={begin:cZ,end:yP},Xd=function(){};function FI(t){var e=t.getAttribute?t.getAttribute(ca):null;return typeof e=="string"}function uZ(t){var e=t.getAttribute?t.getAttribute(bb):null,n=t.getAttribute?t.getAttribute(Eb):null;return e&&n}function hZ(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(ge.replacementClass)}function dZ(){if(ge.autoReplaceSvg===!0)return Zd.replace;var t=Zd[ge.autoReplaceSvg];return t||Zd.replace}function fZ(t){return wt.createElementNS("http://www.w3.org/2000/svg",t)}function pZ(t){return wt.createElement(t)}function _P(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?fZ:pZ:n;if(typeof t=="string")return wt.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var s=t.children||[];return s.forEach(function(o){i.appendChild(_P(o,{ceFn:r}))}),i}function mZ(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var Zd={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(_P(i),n)}),n.getAttribute(ca)===null&&ge.keepOriginalSource){var r=wt.createComment(mZ(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~wb(n).indexOf(ge.replacementClass))return Zd.replace(e);var i=new RegExp("".concat(ge.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,l){return l===ge.replacementClass||l.match(i)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var o=r.map(function(a){return $h(a)}).join(`
`);n.setAttribute(ca,""),n.innerHTML=o}};function BI(t){t()}function vP(t,e){var n=typeof e=="function"?e:Xd;if(t.length===0)n();else{var r=BI;ge.mutateApproach===vX&&(r=Xs.requestAnimationFrame||BI),r(function(){var i=dZ(),s=kb.begin("mutate");t.map(i),s(),n()})}}var Ob=!1;function bP(){Ob=!0}function Cv(){Ob=!1}var gp=null;function UI(t){if(kI&&ge.observeMutations){var e=t.treeCallback,n=e===void 0?Xd:e,r=t.nodeCallback,i=r===void 0?Xd:r,s=t.pseudoElementsCallback,o=s===void 0?Xd:s,a=t.observeMutationsRoot,l=a===void 0?wt:a;gp=new kI(function(c){if(!Ob){var u=Zs();ec(c).forEach(function(h){if(h.type==="childList"&&h.addedNodes.length>0&&!FI(h.addedNodes[0])&&(ge.searchPseudoElements&&o(h.target),n(h.target)),h.type==="attributes"&&h.target.parentNode&&ge.searchPseudoElements&&o(h.target.parentNode),h.type==="attributes"&&FI(h.target)&&~AX.indexOf(h.attributeName))if(h.attributeName==="class"&&uZ(h.target)){var d=qm(wb(h.target)),f=d.prefix,p=d.iconName;h.target.setAttribute(bb,f||u),p&&h.target.setAttribute(Eb,p)}else hZ(h.target)&&i(h.target)})}}),as&&gp.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function gZ(){gp&&gp.disconnect()}function yZ(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function _Z(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=qm(wb(t));return i.prefix||(i.prefix=Zs()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=YX(i.prefix,t.innerText)||Ab(i.prefix,bv(t.innerText))),!i.iconName&&ge.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function vZ(t){var e=ec(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return ge.autoA11y&&(n?e["aria-labelledby"]="".concat(ge.replacementClass,"-title-").concat(r||Yu()):(e["aria-hidden"]="true",e.focusable="false")),e}function bZ(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ui,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function $I(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=_Z(t),r=n.iconName,i=n.prefix,s=n.rest,o=vZ(t),a=Tv("parseNodeAttributes",{},t),l=e.styleParser?yZ(t):[];return ae({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:ui,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var EZ=$r.styles;function EP(t){var e=ge.autoReplaceSvg==="nest"?$I(t,{styleParser:!1}):$I(t);return~e.extra.classes.indexOf(rP)?ts("generateLayersText",t,e):ts("generateSvgReplacementMutation",t,e)}var eo=new Set;Tb.map(function(t){eo.add("fa-".concat(t))});Object.keys(Wu[Et]).map(eo.add.bind(eo));Object.keys(Wu[xt]).map(eo.add.bind(eo));eo=Bh(eo);function HI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!as)return Promise.resolve();var n=wt.documentElement.classList,r=function(h){return n.add("".concat(OI,"-").concat(h))},i=function(h){return n.remove("".concat(OI,"-").concat(h))},s=ge.autoFetchSvg?eo:Tb.map(function(u){return"fa-".concat(u)}).concat(Object.keys(EZ));s.includes("fa")||s.push("fa");var o=[".".concat(rP,":not([").concat(ca,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(ca,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=ec(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();var l=kb.begin("onTree"),c=a.reduce(function(u,h){try{var d=EP(h);d&&u.push(d)}catch(f){nP||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise(function(u,h){Promise.all(c).then(function(d){vP(d,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(d){l(),h(d)})})}function TZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;EP(t).then(function(n){n&&vP([n],e)})}function wZ(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:wv(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:wv(i||{})),t(r,ae(ae({},n),{},{mask:i}))}}var SZ=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?ui:r,s=n.symbol,o=s===void 0?!1:s,a=n.mask,l=a===void 0?null:a,c=n.maskId,u=c===void 0?null:c,h=n.title,d=h===void 0?null:h,f=n.titleId,p=f===void 0?null:f,m=n.classes,g=m===void 0?[]:m,y=n.attributes,_=y===void 0?{}:y,I=n.styles,S=I===void 0?{}:I;if(e){var w=e.prefix,A=e.iconName,L=e.icon;return Gm(ae({type:"icon"},e),function(){return ua("beforeDOMElementCreation",{iconDefinition:e,params:n}),ge.autoA11y&&(d?_["aria-labelledby"]="".concat(ge.replacementClass,"-title-").concat(p||Yu()):(_["aria-hidden"]="true",_.focusable="false")),Rb({icons:{main:Sv(L),mask:l?Sv(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:A,transform:ae(ae({},ui),i),symbol:o,title:d,maskId:u,titleId:p,extra:{attributes:_,styles:S,classes:g}})})}},IZ={mixout:function(){return{icon:wZ(SZ)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=HI,n.nodeCallback=TZ,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?wt:r,s=n.callback,o=s===void 0?function(){}:s;return HI(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,o=r.titleId,a=r.prefix,l=r.transform,c=r.symbol,u=r.mask,h=r.maskId,d=r.extra;return new Promise(function(f,p){Promise.all([Iv(i,a),u.iconName?Iv(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=_b(m,2),y=g[0],_=g[1];f([n,Rb({icons:{main:y,mask:_},prefix:a,iconName:i,transform:l,symbol:c,maskId:h,title:s,titleId:o,extra:d,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.transform,a=n.styles,l=jm(a);l.length>0&&(i.style=l);var c;return Sb(o)&&(c=ts("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),r.push(c||s.icon),{children:r,attributes:i}}}},AZ={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return Gm({type:"layer"},function(){ua("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(ge.cssPrefix,"-layers")].concat(Bh(s)).join(" ")},children:o}]})}}}},CZ={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,o=r.classes,a=o===void 0?[]:o,l=r.attributes,c=l===void 0?{}:l,u=r.styles,h=u===void 0?{}:u;return Gm({type:"counter",content:n},function(){return ua("beforeDOMElementCreation",{content:n,params:r}),oZ({content:n.toString(),title:s,extra:{attributes:c,styles:h,classes:["".concat(ge.cssPrefix,"-layers-counter")].concat(Bh(a))}})})}}}},RZ={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?ui:i,o=r.title,a=o===void 0?null:o,l=r.classes,c=l===void 0?[]:l,u=r.attributes,h=u===void 0?{}:u,d=r.styles,f=d===void 0?{}:d;return Gm({type:"text",content:n},function(){return ua("beforeDOMElementCreation",{content:n,params:r}),LI({content:n,transform:ae(ae({},ui),s),title:a,extra:{attributes:h,styles:f,classes:["".concat(ge.cssPrefix,"-layers-text")].concat(Bh(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,o=r.extra,a=null,l=null;if(ZM){var c=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();a=u.width/c,l=u.height/c}return ge.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([n,LI({content:n.innerHTML,width:a,height:l,transform:s,title:i,extra:o,watchable:!0})])}}},kZ=new RegExp('"',"ug"),zI=[1105920,1112319];function OZ(t){var e=t.replace(kZ,""),n=zX(e,0),r=n>=zI[0]&&n<=zI[1],i=e.length===2?e[0]===e[1]:!1;return{value:bv(i?e[0]:e),isSecondary:r||i}}function jI(t,e){var n="".concat(_X).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=ec(t.children),o=s.filter(function(L){return L.getAttribute(vv)===e})[0],a=Xs.getComputedStyle(t,e),l=a.getPropertyValue("font-family").match(wX),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return t.removeChild(o),r();if(l&&u!=="none"&&u!==""){var h=a.getPropertyValue("content"),d=~["Sharp"].indexOf(l[2])?xt:Et,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?qu[d][l[2].toLowerCase()]:SX[d][c],p=OZ(h),m=p.value,g=p.isSecondary,y=l[0].startsWith("FontAwesome"),_=Ab(f,m),I=_;if(y){var S=JX(m);S.iconName&&S.prefix&&(_=S.iconName,f=S.prefix)}if(_&&!g&&(!o||o.getAttribute(bb)!==f||o.getAttribute(Eb)!==I)){t.setAttribute(n,I),o&&t.removeChild(o);var w=bZ(),A=w.extra;A.attributes[vv]=e,Iv(_,f).then(function(L){var N=Rb(ae(ae({},w),{},{icons:{main:L,mask:Cb()},prefix:f,iconName:I,extra:A,watchable:!0})),O=wt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(O,t.firstChild):t.appendChild(O),O.outerHTML=N.map(function(U){return $h(U)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function NZ(t){return Promise.all([jI(t,"::before"),jI(t,"::after")])}function MZ(t){return t.parentNode!==document.head&&!~bX.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(vv)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function WI(t){if(as)return new Promise(function(e,n){var r=ec(t.querySelectorAll("*")).filter(MZ).map(NZ),i=kb.begin("searchPseudoElements");bP(),Promise.all(r).then(function(){i(),Cv(),e()}).catch(function(){i(),Cv(),n()})})}var PZ={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=WI,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?wt:r;ge.searchPseudoElements&&WI(i)}}},qI=!1,xZ={mixout:function(){return{dom:{unwatch:function(){bP(),qI=!0}}}},hooks:function(){return{bootstrap:function(){UI(Tv("mutationObserverCallbacks",{}))},noAuto:function(){gZ()},watch:function(n){var r=n.observeMutationsRoot;qI?Cv():UI(Tv("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},GI=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return r.flipX=!0,r;if(o&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(o){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},DZ={mixout:function(){return{parse:{transform:function(n){return GI(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=GI(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,o=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),c="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),h={transform:"".concat(l," ").concat(c," ").concat(u)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:h,path:d};return{tag:"g",attributes:ae({},f.outer),children:[{tag:"g",attributes:ae({},f.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ae(ae({},r.icon.attributes),f.path)}]}]}}}},_y={x:0,y:0,width:"100%",height:"100%"};function KI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function LZ(t){return t.tag==="g"?t.children:[t]}var VZ={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?qm(i.split(" ").map(function(o){return o.trim()})):Cb();return s.prefix||(s.prefix=Zs()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.mask,a=n.maskId,l=n.transform,c=s.width,u=s.icon,h=o.width,d=o.icon,f=DX({transform:l,containerWidth:h,iconWidth:c}),p={tag:"rect",attributes:ae(ae({},_y),{},{fill:"white"})},m=u.children?{children:u.children.map(KI)}:{},g={tag:"g",attributes:ae({},f.inner),children:[KI(ae({tag:u.tag,attributes:ae(ae({},u.attributes),f.path)},m))]},y={tag:"g",attributes:ae({},f.outer),children:[g]},_="mask-".concat(a||Yu()),I="clip-".concat(a||Yu()),S={tag:"mask",attributes:ae(ae({},_y),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:I},children:LZ(d)},S]};return r.push(w,{tag:"rect",attributes:ae({fill:"currentColor","clip-path":"url(#".concat(I,")"),mask:"url(#".concat(_,")")},_y)}),{children:r,attributes:i}}}},FZ={provides:function(e){var n=!1;Xs.matchMedia&&(n=Xs.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:ae(ae({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=ae(ae({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:ae(ae({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:ae(ae({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ae(ae({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:ae(ae({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ae(ae({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},BZ={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},UZ=[FX,IZ,AZ,CZ,RZ,PZ,xZ,DZ,VZ,FZ,BZ];ZX(UZ,{mixoutsTo:vr});vr.noAuto;vr.config;var Je=vr.library;vr.dom;var Rv=vr.parse;vr.findIconDefinition;vr.toHtml;var $Z=vr.icon;vr.layer;vr.text;vr.counter;var HZ={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},zZ={prefix:"fas",iconName:"users-rectangle",icon:[640,512,[],"e594","M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H544c53 0 96-43 96-96V96c0-53-43-96-96-96H96zM64 96c0-17.7 14.3-32 32-32H544c17.7 0 32 14.3 32 32V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V96zm159.8 80a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM96 309.3c0 14.7 11.9 26.7 26.7 26.7h56.1c8-34.1 32.8-61.7 65.2-73.6c-7.5-4.1-16.2-6.4-25.3-6.4H149.3C119.9 256 96 279.9 96 309.3zM461.2 336h56.1c14.7 0 26.7-11.9 26.7-26.7c0-29.5-23.9-53.3-53.3-53.3H421.3c-9.2 0-17.8 2.3-25.3 6.4c32.4 11.9 57.2 39.5 65.2 73.6zM372 289c-3.9-.7-7.9-1-12-1H280c-4.1 0-8.1 .3-12 1c-26 4.4-47.3 22.7-55.9 47c-2.7 7.5-4.1 15.6-4.1 24c0 13.3 10.7 24 24 24H408c13.3 0 24-10.7 24-24c0-8.4-1.4-16.5-4.1-24c-8.6-24.3-29.9-42.6-55.9-47zM512 176a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM320 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},jZ={prefix:"fas",iconName:"spaghetti-monster-flying",icon:[640,512,["pastafarianism"],"f67b","M208 64a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 0c0 16.2-6 31.1-16 42.3l15.6 31.2c18.7-6 39.9-9.5 64.4-9.5s45.8 3.5 64.4 9.5L400 106.3C390 95.1 384 80.2 384 64c0-35.3 28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64c-1.7 0-3.4-.1-5.1-.2L427.8 158c21.1 13.6 37.7 30.2 51.4 46.4c7.1 8.3 13.5 16.6 19.3 24l1.4 1.8c6.3 8.1 11.6 14.8 16.7 20.4C527.3 262.3 532.7 264 536 264c2.5 0 4.3-.6 7.1-3.3c3.7-3.5 7.1-8.8 12.5-17.4l.6-.9c4.6-7.4 11-17.6 19.4-25.7c9.7-9.3 22.9-16.7 40.4-16.7c13.3 0 24 10.7 24 24s-10.7 24-24 24c-2.5 0-4.3 .6-7.1 3.3c-3.7 3.5-7.1 8.8-12.5 17.4l-.6 .9c-4.6 7.4-11 17.6-19.4 25.7c-9.7 9.3-22.9 16.7-40.4 16.7c-18.5 0-32.9-8.5-44.3-18.6c-3.1 4-6.6 8.3-10.5 12.7c1.4 4.3 2.8 8.5 4 12.5c.9 3 1.8 5.8 2.6 8.6c3 9.8 5.5 18.2 8.6 25.9c3.9 9.8 7.4 15.4 10.8 18.5c2.6 2.4 5.9 4.3 12.8 4.3c8.7 0 16.9-4.2 33.7-13.2c15-8 35.7-18.8 62.3-18.8c13.3 0 24 10.7 24 24s-10.7 24-24 24c-13.4 0-24.7 5.2-39.7 13.2c-1 .6-2.1 1.1-3.2 1.7C559.9 414 541.4 424 520 424c-18.4 0-33.6-6.1-45.5-17.2c-11.1-10.3-17.9-23.7-22.7-36c-3.6-9-6.7-19.1-9.5-28.5c-16.4 12.3-36.1 23.6-58.9 31.3c3.6 10.8 8.4 23.5 14.4 36.2c7.5 15.9 16.2 30.4 25.8 40.5C433 460.5 441.2 464 448 464c13.3 0 24 10.7 24 24s-10.7 24-24 24c-25.2 0-45-13.5-59.5-28.8c-14.5-15.4-25.7-34.9-34.2-53c-8-17-14.1-33.8-18.3-46.9c-5.2 .4-10.6 .6-16 .6s-10.8-.2-16-.6c-4.2 13-10.3 29.9-18.3 46.9c-8.5 18.1-19.8 37.6-34.2 53C237 498.5 217.2 512 192 512c-13.3 0-24-10.7-24-24s10.7-24 24-24c6.8 0 15-3.5 24.5-13.7c9.5-10.1 18.3-24.6 25.8-40.5c5.9-12.6 10.7-25.4 14.4-36.2c-22.8-7.7-42.5-19-58.9-31.3c-2.9 9.4-6 19.5-9.5 28.5c-4.8 12.2-11.6 25.6-22.7 36C153.6 417.9 138.4 424 120 424c-21.4 0-39.9-10-53.1-17.1l0 0c-1.1-.6-2.2-1.2-3.2-1.7c-15-8-26.3-13.2-39.7-13.2c-13.3 0-24-10.7-24-24s10.7-24 24-24c26.6 0 47.3 10.8 62.3 18.8c16.8 9 25 13.2 33.7 13.2c6.8 0 10.2-1.9 12.8-4.3c3.4-3.2 7-8.8 10.8-18.5c3-7.7 5.6-16.1 8.6-25.9c.8-2.7 1.7-5.6 2.6-8.6c1.2-4 2.6-8.2 4-12.5c-3.9-4.5-7.4-8.8-10.5-12.7C136.9 303.5 122.5 312 104 312c-17.5 0-30.7-7.4-40.4-16.7c-8.4-8.1-14.8-18.3-19.4-25.7l-.6-.9c-5.4-8.6-8.8-13.9-12.5-17.4c-2.8-2.7-4.6-3.3-7.1-3.3c-13.3 0-24-10.7-24-24s10.7-24 24-24c17.5 0 30.7 7.4 40.4 16.7c8.4 8.1 14.8 18.3 19.4 25.7l.6 .9c5.4 8.6 8.8 13.9 12.5 17.4c2.8 2.7 4.6 3.3 7.1 3.3c3.3 0 8.7-1.7 19.4-13.4c5.1-5.6 10.4-12.3 16.7-20.4l1.4-1.8c5.8-7.4 12.2-15.7 19.3-24c13.8-16.2 30.3-32.8 51.4-46.4l-15.1-30.2c-1.7 .1-3.4 .2-5.1 .2c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm208 0a16 16 0 1 0 -32 0 16 16 0 1 0 32 0z"]},WZ={prefix:"fas",iconName:"spoon",icon:[512,512,[129348,61873,"utensil-spoon"],"f2e5","M245.8 220.9c-14.5-17.6-21.8-39.2-21.8-60.8C224 80 320 0 416 0c53 0 96 43 96 96c0 96-80 192-160.2 192c-21.6 0-43.2-7.3-60.8-21.8L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L245.8 220.9z"]},qZ={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},GZ={prefix:"fas",iconName:"paw",icon:[512,512,[],"f1b0","M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z"]},KZ={prefix:"fas",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},YZ={prefix:"fas",iconName:"ghost",icon:[384,512,[128123],"f6e2","M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9C8 480 0 472 0 462.2V192C0 86 86 0 192 0S384 86 384 192V462.2c0 9.8-8 17.8-17.8 17.8c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-13.4-10.7-32.8-9-44.1 3.9L269.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6l-26.6-30.5c-12.7-14.6-35.4-14.6-48.2 0L141.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6L84.2 471c-11.3-12.9-30.7-14.6-44.1-3.9zM160 192a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},JZ={prefix:"fas",iconName:"tree",icon:[448,512,[127794],"f1bb","M210.6 5.9L62 169.4c-3.9 4.2-6 9.8-6 15.5C56 197.7 66.3 208 79.1 208H104L30.6 281.4c-4.2 4.2-6.6 10-6.6 16C24 309.9 34.1 320 46.6 320H80L5.4 409.5C1.9 413.7 0 419 0 424.5c0 13 10.5 23.5 23.5 23.5H192v32c0 17.7 14.3 32 32 32s32-14.3 32-32V448H424.5c13 0 23.5-10.5 23.5-23.5c0-5.5-1.9-10.8-5.4-15L368 320h33.4c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16L344 208h24.9c12.7 0 23.1-10.3 23.1-23.1c0-5.7-2.1-11.3-6-15.5L237.4 5.9C234 2.1 229.1 0 224 0s-10 2.1-13.4 5.9z"]},QZ={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},XZ={prefix:"fas",iconName:"shapes",icon:[512,512,["triangle-circle-square"],"f61f","M315.4 15.5C309.7 5.9 299.2 0 288 0s-21.7 5.9-27.4 15.5l-96 160c-5.9 9.9-6.1 22.2-.4 32.2s16.3 16.2 27.8 16.2H384c11.5 0 22.2-6.2 27.8-16.2s5.5-22.3-.4-32.2l-96-160zM288 312V456c0 22.1 17.9 40 40 40H472c22.1 0 40-17.9 40-40V312c0-22.1-17.9-40-40-40H328c-22.1 0-40 17.9-40 40zM128 512a128 128 0 1 0 0-256 128 128 0 1 0 0 256z"]},ZZ={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},eee={prefix:"fas",iconName:"user-group",icon:[640,512,[128101,"user-friends"],"f500","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM609.3 512H471.4c5.4-9.4 8.6-20.3 8.6-32v-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2h61.4C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"]},tee={prefix:"fas",iconName:"fire",icon:[448,512,[128293],"f06d","M159.3 5.4c7.8-7.3 19.9-7.2 27.7 .1c27.6 25.9 53.5 53.8 77.7 84c11-14.4 23.5-30.1 37-42.9c7.9-7.4 20.1-7.4 28 .1c34.6 33 63.9 76.6 84.5 118c20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512C98.4 512 0 404.1 0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3 0 47.7-7 68.8-21c42.1-29.4 53.4-88.2 28.1-134.4c-4.5-9-16-9.6-22.5-2l-25.2 29.3c-6.6 7.6-18.5 7.4-24.7-.5c-16.5-21-46-58.5-62.8-79.8c-6.3-8-18.3-8.1-24.7-.1c-33.8 42.5-50.8 69.3-50.8 99.4C112 375.4 162.6 416 225.7 416z"]},nee={prefix:"fas",iconName:"eye-low-vision",icon:[640,512,["low-vision"],"f2a8","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223 149.5c48.6-44.3 123-50.8 179.3-11.7c60.8 42.4 78.9 123.2 44.2 186.9L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3L223 149.5zm-139.9 12c-11 14.4-20.5 28.7-28.4 42.2l339 265.7c18.7-5.5 36.2-13 52.6-21.8L83.1 161.5zm-50 86.3c-1.8 6.8-1.3 14 1.4 20.5c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c3.1 0 6.1-.1 9.2-.2L33.1 247.8z"]},ree={prefix:"fas",iconName:"crow",icon:[640,512,[],"f520","M456 0c-48.6 0-88 39.4-88 88v29.2L12.5 390.6c-14 10.8-16.6 30.9-5.9 44.9s30.9 16.6 44.9 5.9L126.1 384H259.2l46.6 113.1c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3L311.1 384H352c1.1 0 2.1 0 3.2 0l46.6 113.2c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3l-42-102C484.9 354.1 544 280 544 192V128v-8l80.5-20.1c8.6-2.1 13.8-10.8 11.6-19.4C629 52 603.4 32 574 32H523.9C507.7 12.5 483.3 0 456 0zm0 64a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},iee={prefix:"fas",iconName:"frog",icon:[576,512,[],"f52e","M368 32c41.7 0 75.9 31.8 79.7 72.5l85.6 26.3c25.4 7.8 42.8 31.3 42.8 57.9c0 21.8-11.7 41.9-30.7 52.7L400.8 323.5 493.3 416H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H480c-8.5 0-16.6-3.4-22.6-9.4L346.9 360.2c11.7-36 3.2-77.1-25.4-105.7c-40.6-40.6-106.3-40.6-146.9-.1L101 324.4c-6.4 6.1-6.7 16.2-.6 22.6s16.2 6.6 22.6 .6l73.8-70.2 .1-.1 .1-.1c3.5-3.5 7.3-6.6 11.3-9.2c27.9-18.5 65.9-15.4 90.5 9.2c24.7 24.7 27.7 62.9 9 90.9c-2.6 3.8-5.6 7.5-9 10.9L261.8 416H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-35.3 0-64-28.7-64-64C0 249.6 127 112.9 289.3 97.5C296.2 60.2 328.8 32 368 32zm0 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},see={prefix:"fas",iconName:"feather-pointed",icon:[512,512,["feather-alt"],"f56b","M278.5 215.6L23 471c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l74.8-74.8c7.4 4.6 15.3 8.2 23.8 10.5C200.3 452.8 270 454.5 338 409.4c12.2-8.1 5.8-25.4-8.8-25.4l-16.1 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l97.7-29.3c3.4-1 6.4-3.1 8.4-6.1c4.4-6.4 8.6-12.9 12.6-19.6c6.2-10.3-1.5-23-13.5-23l-38.6 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l80.9-24.3c4.6-1.4 8.4-4.8 10.2-9.3C494.5 163 507.8 86.1 511.9 36.8c.8-9.9-3-19.6-10-26.6s-16.7-10.8-26.6-10C391.5 7 228.5 40.5 137.4 131.6C57.3 211.7 56.7 302.3 71.3 356.4c2.1 7.9 12 9.6 17.8 3.8L253.6 195.8c6.2-6.2 16.4-6.2 22.6 0c5.4 5.4 6.1 13.6 2.2 19.8z"]},oee={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},aee={prefix:"fas",iconName:"hat-cowboy",icon:[640,512,[],"f8c0","M320 64c14.4 0 22.3-7 30.8-14.4C360.4 41.1 370.7 32 392 32c49.3 0 84.4 152.2 97.9 221.9C447.8 272.1 390.9 288 320 288s-127.8-15.9-169.9-34.1C163.6 184.2 198.7 32 248 32c21.3 0 31.6 9.1 41.2 17.6C297.7 57 305.6 64 320 64zM111.1 270.7c47.2 24.5 117.5 49.3 209 49.3s161.8-24.8 208.9-49.3c24.8-12.9 49.8-28.3 70.1-47.7c7.9-7.9 20.2-9.2 29.6-3.3c9.5 5.9 13.5 17.9 9.9 28.5c-13.5 37.7-38.4 72.3-66.1 100.6C523.7 398.9 443.6 448 320 448s-203.6-49.1-252.5-99.2C39.8 320.4 14.9 285.8 1.4 248.1c-3.6-10.6 .4-22.6 9.9-28.5c9.5-5.9 21.7-4.5 29.6 3.3c20.4 19.4 45.3 34.8 70.1 47.7z"]},lee={prefix:"fas",iconName:"cat",icon:[576,512,[128008],"f6be","M320 192h17.1c22.1 38.3 63.5 64 110.9 64c11 0 21.8-1.4 32-4v4 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V339.2L280 448h56c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-53 0-96-43-96-96V192.5c0-16.1-12-29.8-28-31.8l-7.9-1c-17.5-2.2-30-18.2-27.8-35.7s18.2-30 35.7-27.8l7.9 1c48 6 84.1 46.8 84.1 95.3v85.3c34.4-51.7 93.2-85.8 160-85.8zm160 26.5v0c-10 3.5-20.8 5.5-32 5.5c-28.4 0-54-12.4-71.6-32h0c-3.7-4.1-7-8.5-9.9-13.2C357.3 164 352 146.6 352 128v0V32 12 10.7C352 4.8 356.7 .1 362.6 0h.2c3.3 0 6.4 1.6 8.4 4.2l0 .1L384 21.3l27.2 36.3L416 64h64l4.8-6.4L512 21.3 524.8 4.3l0-.1c2-2.6 5.1-4.2 8.4-4.2h.2C539.3 .1 544 4.8 544 10.7V12 32v96c0 17.3-4.6 33.6-12.6 47.6c-11.3 19.8-29.6 35.2-51.4 42.9zM432 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},cee={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},uee={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},hee={prefix:"fas",iconName:"hat-wizard",icon:[512,512,[],"f6e8","M64 416L168.6 180.7c15.3-34.4 40.3-63.5 72-83.7l146.9-94c3-1.9 6.5-2.9 10-2.9C407.7 0 416 8.3 416 18.6v1.6c0 2.6-.5 5.1-1.4 7.5L354.8 176.9c-1.9 4.7-2.8 9.7-2.8 14.7c0 5.5 1.2 11 3.4 16.1L448 416H240.9l11.8-35.4 40.4-13.5c6.5-2.2 10.9-8.3 10.9-15.2s-4.4-13-10.9-15.2l-40.4-13.5-13.5-40.4C237 276.4 230.9 272 224 272s-13 4.4-15.2 10.9l-13.5 40.4-40.4 13.5C148.4 339 144 345.1 144 352s4.4 13 10.9 15.2l40.4 13.5L207.1 416H64zM279.6 141.5c-1.1-3.3-4.1-5.5-7.6-5.5s-6.5 2.2-7.6 5.5l-6.7 20.2-20.2 6.7c-3.3 1.1-5.5 4.1-5.5 7.6s2.2 6.5 5.5 7.6l20.2 6.7 6.7 20.2c1.1 3.3 4.1 5.5 7.6 5.5s6.5-2.2 7.6-5.5l6.7-20.2 20.2-6.7c3.3-1.1 5.5-4.1 5.5-7.6s-2.2-6.5-5.5-7.6l-20.2-6.7-6.7-20.2zM32 448H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},dee={prefix:"fas",iconName:"table-cells-large",icon:[512,512,["th-large"],"f009","M448 96V224H288V96H448zm0 192V416H288V288H448zM224 224H64V96H224V224zM64 288H224V416H64V288zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},fee={prefix:"fas",iconName:"dove",icon:[512,512,[128330],"f4ba","M160.8 96.5c14 17 31 30.9 49.5 42.2c25.9 15.8 53.7 25.9 77.7 31.6V138.8C265.8 108.5 250 71.5 248.6 28c-.4-11.3-7.5-21.5-18.4-24.4c-7.6-2-15.8-.2-21 5.8c-13.3 15.4-32.7 44.6-48.4 87.2zM320 144v30.6l0 0v1.3l0 0 0 32.1c-60.8-5.1-185-43.8-219.3-157.2C97.4 40 87.9 32 76.6 32c-7.9 0-15.3 3.9-18.8 11C46.8 65.9 32 112.1 32 176c0 116.9 80.1 180.5 118.4 202.8L11.8 416.6C6.7 418 2.6 421.8 .9 426.8s-.8 10.6 2.3 14.8C21.7 466.2 77.3 512 160 512c3.6 0 7.2-1.2 10-3.5L245.6 448H320c88.4 0 160-71.6 160-160V128l29.9-44.9c1.3-2 2.1-4.4 2.1-6.8c0-6.8-5.5-12.3-12.3-12.3H400c-44.2 0-80 35.8-80 80zm80-16a16 16 0 1 1 0 32 16 16 0 1 1 0-32z"]},pee={prefix:"fas",iconName:"list-ul",icon:[512,512,["list-dots"],"f0ca","M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"]},mee={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},gee={prefix:"fas",iconName:"users-line",icon:[640,512,[],"e592","M211.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM32 256c0 17.7 14.3 32 32 32h85.6c10.1-39.4 38.6-71.5 75.8-86.6c-9.7-6-21.2-9.4-33.4-9.4H96c-35.3 0-64 28.7-64 64zm461.6 32H576c17.7 0 32-14.3 32-32c0-35.3-28.7-64-64-64H448c-11.7 0-22.7 3.1-32.1 8.6c38.1 14.8 67.4 47.3 77.7 87.4zM391.2 226.4c-6.9-1.6-14.2-2.4-21.6-2.4h-96c-8.5 0-16.7 1.1-24.5 3.1c-30.8 8.1-55.6 31.1-66.1 60.9c-3.5 10-5.5 20.8-5.5 32c0 17.7 14.3 32 32 32h224c17.7 0 32-14.3 32-32c0-11.2-1.9-22-5.5-32c-10.8-30.7-36.8-54.2-68.9-61.6zM563.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM321.6 192a80 80 0 1 0 0-160 80 80 0 1 0 0 160zM32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32H608c17.7 0 32-14.3 32-32s-14.3-32-32-32H32z"]},yee={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2v82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9V380.8c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},_ee={prefix:"fas",iconName:"disease",icon:[512,512,[],"f7fa","M236.4 61.4L227 75.5c-21.3 32-59.4 48.5-97.3 42.1l-59.6-9.9C33.4 101.6 0 129.9 .1 167.1c0 15.9 6.4 31.2 17.6 42.5l29.2 29.2c11 11 17.2 25.9 17.2 41.5c0 15.8-6.4 30.9-17.7 42L33.3 335.1C22.2 345.9 16 360.7 16 376.2c0 36.8 34.1 64.2 70.1 56.2l62.3-13.8c7.7-1.7 15.7-2.6 23.6-2.6h10c27.2 0 53.7 9.3 75 26.3L287.8 467c10.5 8.4 23.6 13 37 13c32.7 0 59.3-26.5 59.3-59.3l0-25.2c0-34.9 21.4-66.2 53.9-78.8l36.9-14.3c22.4-8.7 37.2-30.3 37.2-54.3c0-28.1-20.1-52.3-47.8-57.3l-28-5.1c-36.5-6.7-65.4-34.5-73.6-70.7l-7.1-31.5C348.9 53.4 322.1 32 291.3 32c-22 0-42.6 11-54.9 29.4zM160 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 16a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zm0 80a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},vee={prefix:"fas",iconName:"shield",icon:[512,512,[128737,"shield-blank"],"f132","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0z"]},bee={prefix:"fas",iconName:"hippo",icon:[640,512,[129435],"f6ed","M407 47c9.4-9.4 24.6-9.4 33.9 0l17.2 17.2c1.9-.1 3.9-.2 5.8-.2h32c11.2 0 21.9 2.3 31.6 6.5L543 55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L564 101.9c7.6 12.2 12 26.7 12 42.1c0 10.2 7.4 18.8 16.7 23c27.9 12.5 47.3 40.5 47.3 73c0 26.2-12.6 49.4-32 64v32c0 8.8-7.2 16-16 16H560c-8.8 0-16-7.2-16-16V320H480v16c0 8.8-7.2 16-16 16H432c-8.8 0-16-7.2-16-16V318.4c-11.8-2.4-22.7-7.4-32-14.4c-1.5-1.1-2.9-2.3-4.3-3.5c-17-14.7-27.7-36.4-27.7-60.5c0-8.8-7.2-16-16-16s-16 7.2-16 16c0 44.7 26.2 83.2 64 101.2V352c0 17.7 14.3 32 32 32h32v64c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V372c-19.8 7.7-41.4 12-64 12s-44.2-4.3-64-12v76c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V329.1L45.9 369.7c-5.4 12.1-19.6 17.6-31.7 12.2S-3.3 362.4 2.1 350.3L24 300.9c5.3-11.9 8-24.7 8-37.7C32 155.7 117.2 68 223.8 64.1l.2-.1h7.2H256h32c41.7 0 83.4 12.1 117.2 25.7c1.7-1.8 3.5-3.6 5.3-5.2L407 81c-9.4-9.4-9.4-24.6 0-33.9zm73 185a24 24 0 1 0 -48 0 24 24 0 1 0 48 0zm88 24a24 24 0 1 0 0-48 24 24 0 1 0 0 48zM480 144a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},Eee={prefix:"fas",iconName:"hand-fist",icon:[448,512,[9994,"fist-raised"],"f6de","M192 0c17.7 0 32 14.3 32 32V144H160V32c0-17.7 14.3-32 32-32zM64 64c0-17.7 14.3-32 32-32s32 14.3 32 32v80H64V64zm192 0c0-17.7 14.3-32 32-32s32 14.3 32 32v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V64zm96 64c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V128zm-96 88l0-.6c9.4 5.4 20.3 8.6 32 8.6c13.2 0 25.4-4 35.6-10.8c8.7 24.9 32.5 42.8 60.4 42.8c11.7 0 22.6-3.1 32-8.6V256c0 52.3-25.1 98.8-64 128v96c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V401.6c-17.3-7.9-33.2-18.8-46.9-32.5L69.5 357.5C45.5 333.5 32 300.9 32 267V240c0-35.3 28.7-64 64-64h88c22.1 0 40 17.9 40 40s-17.9 40-40 40H128c-8.8 0-16 7.2-16 16s7.2 16 16 16h56c39.8 0 72-32.2 72-72z"]},Tee={prefix:"fas",iconName:"users-gear",icon:[640,512,["users-cog"],"f509","M144 160A80 80 0 1 0 144 0a80 80 0 1 0 0 160zm368 0A80 80 0 1 0 512 0a80 80 0 1 0 0 160zM0 298.7C0 310.4 9.6 320 21.3 320H234.7c.2 0 .4 0 .7 0c-26.6-23.5-43.3-57.8-43.3-96c0-7.6 .7-15 1.9-22.3c-13.6-6.3-28.7-9.7-44.6-9.7H106.7C47.8 192 0 239.8 0 298.7zM320 320c24 0 45.9-8.8 62.7-23.3c2.5-3.7 5.2-7.3 8-10.7c2.7-3.3 5.7-6.1 9-8.3C410 262.3 416 243.9 416 224c0-53-43-96-96-96s-96 43-96 96s43 96 96 96zm65.4 60.2c-10.3-5.9-18.1-16.2-20.8-28.2H261.3C187.7 352 128 411.7 128 485.3c0 14.7 11.9 26.7 26.7 26.7H455.2c-2.1-5.2-3.2-10.9-3.2-16.4v-3c-1.3-.7-2.7-1.5-4-2.3l-2.6 1.5c-16.8 9.7-40.5 8-54.7-9.7c-4.5-5.6-8.6-11.5-12.4-17.6l-.1-.2-.1-.2-2.4-4.1-.1-.2-.1-.2c-3.4-6.2-6.4-12.6-9-19.3c-8.2-21.2 2.2-42.6 19-52.3l2.7-1.5c0-.8 0-1.5 0-2.3s0-1.5 0-2.3l-2.7-1.5zM533.3 192H490.7c-15.9 0-31 3.5-44.6 9.7c1.3 7.2 1.9 14.7 1.9 22.3c0 17.4-3.5 33.9-9.7 49c2.5 .9 4.9 2 7.1 3.3l2.6 1.5c1.3-.8 2.6-1.6 4-2.3v-3c0-19.4 13.3-39.1 35.8-42.6c7.9-1.2 16-1.9 24.2-1.9s16.3 .6 24.2 1.9c22.5 3.5 35.8 23.2 35.8 42.6v3c1.3 .7 2.7 1.5 4 2.3l2.6-1.5c16.8-9.7 40.5-8 54.7 9.7c2.3 2.8 4.5 5.8 6.6 8.7c-2.1-57.1-49-102.7-106.6-102.7zm91.3 163.9c6.3-3.6 9.5-11.1 6.8-18c-2.1-5.5-4.6-10.8-7.4-15.9l-2.3-4c-3.1-5.1-6.5-9.9-10.2-14.5c-4.6-5.7-12.7-6.7-19-3l-2.9 1.7c-9.2 5.3-20.4 4-29.6-1.3s-16.1-14.5-16.1-25.1v-3.4c0-7.3-4.9-13.8-12.1-14.9c-6.5-1-13.1-1.5-19.9-1.5s-13.4 .5-19.9 1.5c-7.2 1.1-12.1 7.6-12.1 14.9v3.4c0 10.6-6.9 19.8-16.1 25.1s-20.4 6.6-29.6 1.3l-2.9-1.7c-6.3-3.6-14.4-2.6-19 3c-3.7 4.6-7.1 9.5-10.2 14.6l-2.3 3.9c-2.8 5.1-5.3 10.4-7.4 15.9c-2.6 6.8 .5 14.3 6.8 17.9l2.9 1.7c9.2 5.3 13.7 15.8 13.7 26.4s-4.5 21.1-13.7 26.4l-3 1.7c-6.3 3.6-9.5 11.1-6.8 17.9c2.1 5.5 4.6 10.7 7.4 15.8l2.4 4.1c3 5.1 6.4 9.9 10.1 14.5c4.6 5.7 12.7 6.7 19 3l2.9-1.7c9.2-5.3 20.4-4 29.6 1.3s16.1 14.5 16.1 25.1v3.4c0 7.3 4.9 13.8 12.1 14.9c6.5 1 13.1 1.5 19.9 1.5s13.4-.5 19.9-1.5c7.2-1.1 12.1-7.6 12.1-14.9v-3.4c0-10.6 6.9-19.8 16.1-25.1s20.4-6.6 29.6-1.3l2.9 1.7c6.3 3.6 14.4 2.6 19-3c3.7-4.6 7.1-9.4 10.1-14.5l2.4-4.2c2.8-5.1 5.3-10.3 7.4-15.8c2.6-6.8-.5-14.3-6.8-17.9l-3-1.7c-9.2-5.3-13.7-15.8-13.7-26.4s4.5-21.1 13.7-26.4l3-1.7zM472 384a40 40 0 1 1 80 0 40 40 0 1 1 -80 0z"]};function YI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Li(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YI(Object(n),!0).forEach(function(r){Kn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function Kn(t,e,n){return e=Aee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wee(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function See(t,e){if(t==null)return{};var n=wee(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Iee(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aee(t){var e=Iee(t,"string");return typeof e=="symbol"?e:String(e)}var Cee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TP={exports:{}};(function(t){(function(e){var n=function(y,_,I){if(!c(_)||h(_)||d(_)||f(_)||l(_))return _;var S,w=0,A=0;if(u(_))for(S=[],A=_.length;w<A;w++)S.push(n(y,_[w],I));else{S={};for(var L in _)Object.prototype.hasOwnProperty.call(_,L)&&(S[y(L,I)]=n(y,_[L],I))}return S},r=function(y,_){_=_||{};var I=_.separator||"_",S=_.split||/(?=[A-Z])/;return y.split(S).join(I)},i=function(y){return p(y)?y:(y=y.replace(/[\-_\s]+(.)?/g,function(_,I){return I?I.toUpperCase():""}),y.substr(0,1).toLowerCase()+y.substr(1))},s=function(y){var _=i(y);return _.substr(0,1).toUpperCase()+_.substr(1)},o=function(y,_){return r(y,_).toLowerCase()},a=Object.prototype.toString,l=function(y){return typeof y=="function"},c=function(y){return y===Object(y)},u=function(y){return a.call(y)=="[object Array]"},h=function(y){return a.call(y)=="[object Date]"},d=function(y){return a.call(y)=="[object RegExp]"},f=function(y){return a.call(y)=="[object Boolean]"},p=function(y){return y=y-0,y===y},m=function(y,_){var I=_&&"process"in _?_.process:_;return typeof I!="function"?y:function(S,w){return I(S,y,w)}},g={camelize:i,decamelize:o,pascalize:s,depascalize:o,camelizeKeys:function(y,_){return n(m(i,_),y)},decamelizeKeys:function(y,_){return n(m(o,_),y,_)},pascalizeKeys:function(y,_){return n(m(s,_),y)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=g:e.humps=g})(Cee)})(TP);var Ree=TP.exports,kee=["class","style"];function Oee(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=Ree.camelize(n.slice(0,r)),s=n.slice(r+1).trim();return e[i]=s,e},{})}function Nee(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function wP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(l){return wP(l)}),i=Object.keys(t.attributes||{}).reduce(function(l,c){var u=t.attributes[c];switch(c){case"class":l.class=Nee(u);break;case"style":l.style=Oee(u);break;default:l.attrs[c]=u}return l},{attrs:{},class:{},style:{}});n.class;var s=n.style,o=s===void 0?{}:s,a=See(n,kee);return Uo(t.tag,Li(Li(Li({},e),{},{class:i.class,style:Li(Li({},i.style),o)},i.attrs),a),r)}var SP=!1;try{SP=!0}catch{}function Mee(){if(!SP&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function vy(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Kn({},t,e):{}}function Pee(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Kn(e,"fa-".concat(t.size),t.size!==null),Kn(e,"fa-rotate-".concat(t.rotation),t.rotation!==null),Kn(e,"fa-pull-".concat(t.pull),t.pull!==null),Kn(e,"fa-swap-opacity",t.swapOpacity),Kn(e,"fa-bounce",t.bounce),Kn(e,"fa-shake",t.shake),Kn(e,"fa-beat",t.beat),Kn(e,"fa-fade",t.fade),Kn(e,"fa-beat-fade",t.beatFade),Kn(e,"fa-flash",t.flash),Kn(e,"fa-spin-pulse",t.spinPulse),Kn(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function JI(t){if(t&&yp(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(Rv.icon)return Rv.icon(t);if(t===null)return null;if(yp(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var xee=hn({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,i=kt(function(){return JI(e.icon)}),s=kt(function(){return vy("classes",Pee(e))}),o=kt(function(){return vy("transform",typeof e.transform=="string"?Rv.transform(e.transform):e.transform)}),a=kt(function(){return vy("mask",JI(e.mask))}),l=kt(function(){return $Z(i.value,Li(Li(Li(Li({},s.value),o.value),a.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});Wi(l,function(u){if(!u)return Mee("Could not find one or more icon(s)",i.value,a.value)},{immediate:!0});var c=kt(function(){return l.value?wP(l.value.abstract[0],{},r):null});return function(){return c.value}}});Je.add(eee);Je.add(uee);Je.add(QZ);Je.add(cee);Je.add(nee);Je.add(pee);Je.add(ZZ);Je.add(HZ);Je.add(zZ);Je.add(KZ);Je.add(dee);Je.add(XZ);Je.add(gee);Je.add(Tee);Je.add(mee);Je.add(qZ);Je.add(vee);Je.add(yee);Je.add(jZ);Je.add(GZ);Je.add(bee);Je.add(ree);Je.add(iee);Je.add(see);Je.add(_ee);Je.add(lee);Je.add(fee);Je.add(WZ);Je.add(YZ);Je.add(oee);Je.add(Eee);Je.add(hee);Je.add(aee);Je.add(JZ);Je.add(tee);const Hh=i4(sH);Hh.use(c4());Hh.use(QU,{firebaseApp:jO,modules:[GU()]});Hh.use(KM);Hh.component("FontAwesomeIcon",xee);Hh.mount("#app");
