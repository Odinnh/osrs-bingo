(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function bv(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const yt={},Ba=[],br=()=>{},dP=()=>!1,lp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ev=t=>t.startsWith("onUpdate:"),Wt=Object.assign,Tv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},fP=Object.prototype.hasOwnProperty,Qe=(t,e)=>fP.call(t,e),_e=Array.isArray,Ua=t=>ju(t)==="[object Map]",cp=t=>ju(t)==="[object Set]",Eb=t=>ju(t)==="[object Date]",Ie=t=>typeof t=="function",xt=t=>typeof t=="string",Vs=t=>typeof t=="symbol",ht=t=>t!==null&&typeof t=="object",wv=t=>(ht(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),FI=Object.prototype.toString,ju=t=>FI.call(t),pP=t=>ju(t).slice(8,-1),BI=t=>ju(t)==="[object Object]",Sv=t=>xt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ic=bv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),up=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},mP=/-(\w)/g,fi=up(t=>t.replace(mP,(e,n)=>n?n.toUpperCase():"")),gP=/\B([A-Z])/g,oa=up(t=>t.replace(gP,"-$1").toLowerCase()),hp=up(t=>t.charAt(0).toUpperCase()+t.slice(1)),Um=up(t=>t?`on${hp(t)}`:""),Fs=(t,e)=>!Object.is(t,e),vd=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Wd=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},fy=t=>{const e=parseFloat(t);return isNaN(e)?t:e},UI=t=>{const e=xt(t)?Number(t):NaN;return isNaN(e)?t:e};let Tb;const $I=()=>Tb||(Tb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bs(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=xt(r)?bP(r):Bs(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(xt(t)||ht(t))return t}const yP=/;(?![^(]*\))/g,_P=/:([^]+)/,vP=/\/\*[^]*?\*\//g;function bP(t){const e={};return t.replace(vP,"").split(yP).forEach(n=>{if(n){const r=n.split(_P);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function dp(t){let e="";if(xt(t))e=t;else if(_e(t))for(let n=0;n<t.length;n++){const r=dp(t[n]);r&&(e+=r+" ")}else if(ht(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const EP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",TP=bv(EP);function HI(t){return!!t||t===""}function wP(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=fp(t[r],e[r]);return n}function fp(t,e){if(t===e)return!0;let n=Eb(t),r=Eb(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Vs(t),r=Vs(e),n||r)return t===e;if(n=_e(t),r=_e(e),n||r)return n&&r?wP(t,e):!1;if(n=ht(t),r=ht(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!fp(t[o],e[o]))return!1}}return String(t)===String(e)}function zI(t,e){return t.findIndex(n=>fp(n,e))}const He=t=>xt(t)?t:t==null?"":_e(t)||ht(t)&&(t.toString===FI||!Ie(t.toString))?JSON.stringify(t,jI,2):String(t),jI=(t,e)=>e&&e.__v_isRef?jI(t,e.value):Ua(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[$m(r,s)+" =>"]=i,n),{})}:cp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>$m(n))}:Vs(e)?$m(e):ht(e)&&!_e(e)&&!BI(e)?String(e):e,$m=(t,e="")=>{var n;return Vs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rr;class WI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=rr,!e&&rr&&(this.index=(rr.scopes||(rr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=rr;try{return rr=this,e()}finally{rr=n}}}on(){rr=this}off(){rr=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function GI(t){return new WI(t)}function SP(t,e=rr){e&&e.active&&e.effects.push(t)}function Iv(){return rr}function qI(t){rr&&rr.cleanups.push(t)}let Po;class Av{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,SP(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,aa();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(IP(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),la()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Cs,n=Po;try{return Cs=!0,Po=this,this._runnings++,wb(this),this.fn()}finally{Sb(this),this._runnings--,Po=n,Cs=e}}stop(){var e;this.active&&(wb(this),Sb(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function IP(t){return t.value}function wb(t){t._trackId++,t._depsLength=0}function Sb(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)KI(t.deps[e],t);t.deps.length=t._depsLength}}function KI(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Cs=!0,py=0;const YI=[];function aa(){YI.push(Cs),Cs=!1}function la(){const t=YI.pop();Cs=t===void 0?!0:t}function Cv(){py++}function Rv(){for(py--;!py&&my.length;)my.shift()()}function JI(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&KI(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const my=[];function QI(t,e,n){Cv();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&my.push(r.scheduler)))}Rv()}const XI=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Gd=new WeakMap,xo=Symbol(""),gy=Symbol("");function Xn(t,e,n){if(Cs&&Po){let r=Gd.get(t);r||Gd.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=XI(()=>r.delete(n))),JI(Po,i)}}function Fi(t,e,n,r,i,s){const o=Gd.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&_e(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!Vs(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":_e(t)?Sv(n)&&a.push(o.get("length")):(a.push(o.get(xo)),Ua(t)&&a.push(o.get(gy)));break;case"delete":_e(t)||(a.push(o.get(xo)),Ua(t)&&a.push(o.get(gy)));break;case"set":Ua(t)&&a.push(o.get(xo));break}Cv();for(const l of a)l&&QI(l,4);Rv()}function AP(t,e){var n;return(n=Gd.get(t))==null?void 0:n.get(e)}const CP=bv("__proto__,__v_isRef,__isVue"),ZI=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Vs)),Ib=RP();function RP(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Xe(this);for(let s=0,o=this.length;s<o;s++)Xn(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Xe)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){aa(),Cv();const r=Xe(this)[e].apply(this,n);return Rv(),la(),r}}),t}function kP(t){const e=Xe(this);return Xn(e,"has",t),e.hasOwnProperty(t)}class eA{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?HP:iA:s?rA:nA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=_e(e);if(!i){if(o&&Qe(Ib,n))return Reflect.get(Ib,n,r);if(n==="hasOwnProperty")return kP}const a=Reflect.get(e,n,r);return(Vs(n)?ZI.has(n):CP(n))||(i||Xn(e,"get",n),s)?a:sn(a)?o&&Sv(n)?a:a.value:ht(a)?i?Nv(a):Wu(a):a}}class tA extends eA{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=sl(s);if(!qd(r)&&!sl(r)&&(s=Xe(s),r=Xe(r)),!_e(e)&&sn(s)&&!sn(r))return l?!1:(s.value=r,!0)}const o=_e(e)&&Sv(n)?Number(n)<e.length:Qe(e,n),a=Reflect.set(e,n,r,i);return e===Xe(i)&&(o?Fs(r,s)&&Fi(e,"set",n,r):Fi(e,"add",n,r)),a}deleteProperty(e,n){const r=Qe(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Fi(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Vs(n)||!ZI.has(n))&&Xn(e,"has",n),r}ownKeys(e){return Xn(e,"iterate",_e(e)?"length":xo),Reflect.ownKeys(e)}}class OP extends eA{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const NP=new tA,MP=new OP,PP=new tA(!0),kv=t=>t,pp=t=>Reflect.getPrototypeOf(t);function Ph(t,e,n=!1,r=!1){t=t.__v_raw;const i=Xe(t),s=Xe(e);n||(Fs(e,s)&&Xn(i,"get",e),Xn(i,"get",s));const{has:o}=pp(i),a=r?kv:n?Pv:tu;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function xh(t,e=!1){const n=this.__v_raw,r=Xe(n),i=Xe(t);return e||(Fs(t,i)&&Xn(r,"has",t),Xn(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Dh(t,e=!1){return t=t.__v_raw,!e&&Xn(Xe(t),"iterate",xo),Reflect.get(t,"size",t)}function Ab(t){t=Xe(t);const e=Xe(this);return pp(e).has.call(e,t)||(e.add(t),Fi(e,"add",t,t)),this}function Cb(t,e){e=Xe(e);const n=Xe(this),{has:r,get:i}=pp(n);let s=r.call(n,t);s||(t=Xe(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Fs(e,o)&&Fi(n,"set",t,e):Fi(n,"add",t,e),this}function Rb(t){const e=Xe(this),{has:n,get:r}=pp(e);let i=n.call(e,t);i||(t=Xe(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Fi(e,"delete",t,void 0),s}function kb(){const t=Xe(this),e=t.size!==0,n=t.clear();return e&&Fi(t,"clear",void 0,void 0),n}function Lh(t,e){return function(r,i){const s=this,o=s.__v_raw,a=Xe(o),l=e?kv:t?Pv:tu;return!t&&Xn(a,"iterate",xo),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function Vh(t,e,n){return function(...r){const i=this.__v_raw,s=Xe(i),o=Ua(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?kv:e?Pv:tu;return!e&&Xn(s,"iterate",l?gy:xo),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function es(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function xP(){const t={get(s){return Ph(this,s)},get size(){return Dh(this)},has:xh,add:Ab,set:Cb,delete:Rb,clear:kb,forEach:Lh(!1,!1)},e={get(s){return Ph(this,s,!1,!0)},get size(){return Dh(this)},has:xh,add:Ab,set:Cb,delete:Rb,clear:kb,forEach:Lh(!1,!0)},n={get(s){return Ph(this,s,!0)},get size(){return Dh(this,!0)},has(s){return xh.call(this,s,!0)},add:es("add"),set:es("set"),delete:es("delete"),clear:es("clear"),forEach:Lh(!0,!1)},r={get(s){return Ph(this,s,!0,!0)},get size(){return Dh(this,!0)},has(s){return xh.call(this,s,!0)},add:es("add"),set:es("set"),delete:es("delete"),clear:es("clear"),forEach:Lh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Vh(s,!1,!1),n[s]=Vh(s,!0,!1),e[s]=Vh(s,!1,!0),r[s]=Vh(s,!0,!0)}),[t,n,e,r]}const[DP,LP,VP,FP]=xP();function Ov(t,e){const n=e?t?FP:VP:t?LP:DP;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Qe(n,i)&&i in r?n:r,i,s)}const BP={get:Ov(!1,!1)},UP={get:Ov(!1,!0)},$P={get:Ov(!0,!1)},nA=new WeakMap,rA=new WeakMap,iA=new WeakMap,HP=new WeakMap;function zP(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jP(t){return t.__v_skip||!Object.isExtensible(t)?0:zP(pP(t))}function Wu(t){return sl(t)?t:Mv(t,!1,NP,BP,nA)}function sA(t){return Mv(t,!1,PP,UP,rA)}function Nv(t){return Mv(t,!0,MP,$P,iA)}function Mv(t,e,n,r,i){if(!ht(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=jP(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function $a(t){return sl(t)?$a(t.__v_raw):!!(t&&t.__v_isReactive)}function sl(t){return!!(t&&t.__v_isReadonly)}function qd(t){return!!(t&&t.__v_isShallow)}function oA(t){return $a(t)||sl(t)}function Xe(t){const e=t&&t.__v_raw;return e?Xe(e):t}function mp(t){return Object.isExtensible(t)&&Wd(t,"__v_skip",!0),t}const tu=t=>ht(t)?Wu(t):t,Pv=t=>ht(t)?Nv(t):t;class aA{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Av(()=>e(this._value),()=>Ac(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Xe(this);return(!e._cacheable||e.effect.dirty)&&Fs(e._value,e._value=e.effect.run())&&Ac(e,4),xv(e),e.effect._dirtyLevel>=2&&Ac(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function WP(t,e,n=!1){let r,i;const s=Ie(t);return s?(r=t,i=br):(r=t.get,i=t.set),new aA(r,i,s||!i,n)}function xv(t){var e;Cs&&Po&&(t=Xe(t),JI(Po,(e=t.dep)!=null?e:t.dep=XI(()=>t.dep=void 0,t instanceof aA?t:void 0)))}function Ac(t,e=4,n){t=Xe(t);const r=t.dep;r&&QI(r,e)}function sn(t){return!!(t&&t.__v_isRef===!0)}function xe(t){return cA(t,!1)}function lA(t){return cA(t,!0)}function cA(t,e){return sn(t)?t:new GP(t,e)}class GP{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Xe(e),this._value=n?e:tu(e)}get value(){return xv(this),this._value}set value(e){const n=this.__v_isShallow||qd(e)||sl(e);e=n?e:Xe(e),Fs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:tu(e),Ac(this,4))}}function Ue(t){return sn(t)?t.value:t}function ki(t){return Ie(t)?t():Ue(t)}const qP={get:(t,e,n)=>Ue(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return sn(i)&&!sn(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function uA(t){return $a(t)?t:new Proxy(t,qP)}class KP{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>xv(this),()=>Ac(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function hA(t){return new KP(t)}class YP{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return AP(Xe(this._object),this._key)}}class JP{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function QP(t,e,n){return sn(t)?t:Ie(t)?new JP(t):ht(t)&&arguments.length>1?XP(t,e,n):xe(t)}function XP(t,e,n){const r=t[e];return sn(r)?r:new YP(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Rs(t,e,n,r){try{return r?t(...r):t()}catch(i){Gu(i,e,n)}}function Sr(t,e,n,r){if(Ie(t)){const s=Rs(t,e,n,r);return s&&wv(s)&&s.catch(o=>{Gu(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Sr(t[s],e,n,r));return i}function Gu(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Rs(l,null,10,[t,o,a]);return}}ZP(t,n,i,r)}function ZP(t,e,n,r=!0){console.error(t)}let nu=!1,yy=!1;const Nn=[];let Yr=0;const Ha=[];let cs=null,go=0;const dA=Promise.resolve();let Dv=null;function Dl(t){const e=Dv||dA;return t?e.then(this?t.bind(this):t):e}function ex(t){let e=Yr+1,n=Nn.length;for(;e<n;){const r=e+n>>>1,i=Nn[r],s=ru(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function Lv(t){(!Nn.length||!Nn.includes(t,nu&&t.allowRecurse?Yr+1:Yr))&&(t.id==null?Nn.push(t):Nn.splice(ex(t.id),0,t),fA())}function fA(){!nu&&!yy&&(yy=!0,Dv=dA.then(mA))}function tx(t){const e=Nn.indexOf(t);e>Yr&&Nn.splice(e,1)}function _y(t){_e(t)?Ha.push(...t):(!cs||!cs.includes(t,t.allowRecurse?go+1:go))&&Ha.push(t),fA()}function Ob(t,e,n=nu?Yr+1:0){for(;n<Nn.length;n++){const r=Nn[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Nn.splice(n,1),n--,r()}}}function pA(t){if(Ha.length){const e=[...new Set(Ha)].sort((n,r)=>ru(n)-ru(r));if(Ha.length=0,cs){cs.push(...e);return}for(cs=e,go=0;go<cs.length;go++)cs[go]();cs=null,go=0}}const ru=t=>t.id==null?1/0:t.id,nx=(t,e)=>{const n=ru(t)-ru(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function mA(t){yy=!1,nu=!0,Nn.sort(nx);try{for(Yr=0;Yr<Nn.length;Yr++){const e=Nn[Yr];e&&e.active!==!1&&Rs(e,null,14)}}finally{Yr=0,Nn.length=0,pA(),nu=!1,Dv=null,(Nn.length||Ha.length)&&mA()}}function rx(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||yt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||yt;d&&(i=n.map(f=>xt(f)?f.trim():f)),h&&(i=n.map(fy))}let a,l=r[a=Um(e)]||r[a=Um(fi(e))];!l&&s&&(l=r[a=Um(oa(e))]),l&&Sr(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Sr(c,t,6,i)}}function gA(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Ie(t)){const l=c=>{const u=gA(c,e,!0);u&&(a=!0,Wt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(ht(t)&&r.set(t,null),null):(_e(s)?s.forEach(l=>o[l]=null):Wt(o,s),ht(t)&&r.set(t,o),o)}function gp(t,e){return!t||!lp(e)?!1:(e=e.slice(2).replace(/Once$/,""),Qe(t,e[0].toLowerCase()+e.slice(1))||Qe(t,oa(e))||Qe(t,e))}let jt=null,yp=null;function Kd(t){const e=jt;return jt=t,yp=t&&t.type.__scopeId||null,e}function _p(t){yp=t}function vp(){yp=null}function ks(t,e=jt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Gb(-1);const s=Kd(e);let o;try{o=t(...i)}finally{Kd(s),r._d&&Gb(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Hm(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=t;let g,y;const _=Kd(t);try{if(n.shapeFlag&4){const w=i||r,S=w;g=Nr(u.call(S,w,h,s,f,d,p)),y=l}else{const w=e;g=Nr(w.length>1?w(s,{attrs:l,slots:a,emit:c}):w(s,null)),y=e.props?l:sx(l)}}catch(w){Nc.length=0,Gu(w,t,1),g=De(Jn)}let E=g;if(y&&m!==!1){const w=Object.keys(y),{shapeFlag:S}=E;w.length&&S&7&&(o&&w.some(Ev)&&(y=ox(y,o)),E=Us(E,y))}return n.dirs&&(E=Us(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),g=E,Kd(_),g}function ix(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(su(i)){if(i.type!==Jn||i.children==="v-if"){if(n)return;n=i}}else return}return n}const sx=t=>{let e;for(const n in t)(n==="class"||n==="style"||lp(n))&&((e||(e={}))[n]=t[n]);return e},ox=(t,e)=>{const n={};for(const r in t)(!Ev(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function ax(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Nb(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!gp(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Nb(r,o,c):!0:!!o;return!1}function Nb(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!gp(n,s))return!0}return!1}function Vv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const yA="components";function lx(t,e){return ux(yA,t,!0,e)||t}const cx=Symbol.for("v-ndc");function ux(t,e,n=!0,r=!1){const i=jt||yn;if(i){const s=i.type;if(t===yA){const a=fD(s,!1);if(a&&(a===e||a===fi(e)||a===hp(fi(e))))return s}const o=Mb(i[t]||s[t],e)||Mb(i.appContext[t],e);return!o&&r?s:o}}function Mb(t,e){return t&&(t[e]||t[fi(e)]||t[hp(fi(e))])}const hx=t=>t.__isSuspense;let vy=0;const dx={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)fx(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}px(t,e,n,r,i,o,a,l,c)}},hydrate:mx,create:Fv,normalize:gx},Pb=dx;function iu(t,e){const n=t.props&&t.props[e];Ie(n)&&n()}function fx(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:u}}=l,h=u("div"),d=t.suspense=Fv(t,i,r,e,h,n,s,o,a,l);c(null,d.pendingBranch=t.ssContent,h,null,r,d,s,o),d.deps>0?(iu(t,"onPending"),iu(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),za(d,t.ssFallback)):d.resolve(!1,!0)}function px(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:y}=h;if(m)h.pendingBranch=d,Jr(d,m)?(l(m,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():g&&(y||(l(p,f,n,r,i,null,s,o,a),za(h,f)))):(h.pendingId=vy++,y?(h.isHydrating=!1,h.activeBranch=m):c(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),g?(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():(l(p,f,n,r,i,null,s,o,a),za(h,f))):p&&Jr(d,p)?(l(p,d,n,r,i,h,s,o,a),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0&&h.resolve()));else if(p&&Jr(d,p))l(p,d,n,r,i,h,s,o,a),za(h,d);else if(iu(e,"onPending"),h.pendingBranch=d,d.shapeFlag&512?h.pendingId=d.component.suspenseId:h.pendingId=vy++,l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0)h.resolve();else{const{timeout:_,pendingId:E}=h;_>0?setTimeout(()=>{h.pendingId===E&&h.fallback(f)},_):_===0&&h.fallback(f)}}function Fv(t,e,n,r,i,s,o,a,l,c,u=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:m,remove:g}}=c;let y;const _=_x(t);_&&e!=null&&e.pendingBranch&&(y=e.pendingId,e.deps++);const E=t.props?UI(t.props.timeout):void 0,w=s,S={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:vy++,timeout:typeof E=="number"?E:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(I=!1,x=!1){const{vnode:O,activeBranch:k,pendingBranch:B,pendingId:W,effects:z,parentComponent:me,container:K}=S;let $=!1;S.isHydrating?S.isHydrating=!1:I||($=k&&B.transition&&B.transition.mode==="out-in",$&&(k.transition.afterLeave=()=>{W===S.pendingId&&(d(B,K,s===w?p(k):s,0),_y(z))}),k&&(m(k.el)!==S.hiddenContainer&&(s=p(k)),f(k,me,S,!0)),$||d(B,K,s,0)),za(S,B),S.pendingBranch=null,S.isInFallback=!1;let N=S.parent,F=!1;for(;N;){if(N.pendingBranch){N.effects.push(...z),F=!0;break}N=N.parent}!F&&!$&&_y(z),S.effects=[],_&&e&&e.pendingBranch&&y===e.pendingId&&(e.deps--,e.deps===0&&!x&&e.resolve()),iu(O,"onResolve")},fallback(I){if(!S.pendingBranch)return;const{vnode:x,activeBranch:O,parentComponent:k,container:B,namespace:W}=S;iu(x,"onFallback");const z=p(O),me=()=>{S.isInFallback&&(h(null,I,B,z,k,null,W,a,l),za(S,I))},K=I.transition&&I.transition.mode==="out-in";K&&(O.transition.afterLeave=me),S.isInFallback=!0,f(O,k,null,!0),K||me()},move(I,x,O){S.activeBranch&&d(S.activeBranch,I,x,O),S.container=I},next(){return S.activeBranch&&p(S.activeBranch)},registerDep(I,x){const O=!!S.pendingBranch;O&&S.deps++;const k=I.vnode.el;I.asyncDep.catch(B=>{Gu(B,I,0)}).then(B=>{if(I.isUnmounted||S.isUnmounted||S.pendingId!==I.suspenseId)return;I.asyncResolved=!0;const{vnode:W}=I;Oy(I,B,!1),k&&(W.el=k);const z=!k&&I.subTree.el;x(I,W,m(k||I.subTree.el),k?null:p(I.subTree),S,o,l),z&&g(z),Vv(I,W.el),O&&--S.deps===0&&S.resolve()})},unmount(I,x){S.isUnmounted=!0,S.activeBranch&&f(S.activeBranch,n,I,x),S.pendingBranch&&f(S.pendingBranch,n,I,x)}};return S}function mx(t,e,n,r,i,s,o,a,l){const c=e.suspense=Fv(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),u}function gx(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=xb(r?n.default:n),t.ssFallback=r?xb(n.fallback):De(Jn)}function xb(t){let e;if(Ie(t)){const n=al&&t._c;n&&(t._d=!1,ie()),t=t(),n&&(t._d=!0,e=Er,DA())}return _e(t)&&(t=ix(t)),t=Nr(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function yx(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):_y(t)}function za(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Vv(r,i))}function _x(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}const vx=Symbol.for("v-scx"),bx=()=>Yn(vx);function Ex(t,e){return Bv(t,null,e)}const Fh={};function Bi(t,e,n){return Bv(t,e,n)}function Bv(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=yt){if(e&&s){const I=e;e=(...x)=>{I(...x),S()}}const l=yn,c=I=>r===!0?I:Eo(I,r===!1?1:void 0);let u,h=!1,d=!1;if(sn(t)?(u=()=>t.value,h=qd(t)):$a(t)?(u=()=>c(t),h=!0):_e(t)?(d=!0,h=t.some(I=>$a(I)||qd(I)),u=()=>t.map(I=>{if(sn(I))return I.value;if($a(I))return c(I);if(Ie(I))return Rs(I,l,2)})):Ie(t)?e?u=()=>Rs(t,l,2):u=()=>(f&&f(),Sr(t,l,3,[p])):u=br,e&&r){const I=u;u=()=>Eo(I())}let f,p=I=>{f=E.onStop=()=>{Rs(I,l,4),f=E.onStop=void 0}},m;if(Sp)if(p=br,e?n&&Sr(e,l,3,[u(),d?[]:void 0,p]):u(),i==="sync"){const I=bx();m=I.__watcherHandles||(I.__watcherHandles=[])}else return br;let g=d?new Array(t.length).fill(Fh):Fh;const y=()=>{if(!(!E.active||!E.dirty))if(e){const I=E.run();(r||h||(d?I.some((x,O)=>Fs(x,g[O])):Fs(I,g)))&&(f&&f(),Sr(e,l,3,[I,g===Fh?void 0:d&&g[0]===Fh?[]:g,p]),g=I)}else E.run()};y.allowRecurse=!!e;let _;i==="sync"?_=y:i==="post"?_=()=>qn(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),_=()=>Lv(y));const E=new Av(u,br,_),w=Iv(),S=()=>{E.stop(),w&&Tv(w.effects,E)};return e?n?y():g=E.run():i==="post"?qn(E.run.bind(E),l&&l.suspense):E.run(),m&&m.push(S),S}function Tx(t,e,n){const r=this.proxy,i=xt(t)?t.includes(".")?_A(r,t):()=>r[t]:t.bind(r,r);let s;Ie(e)?s=e:(s=e.handler,n=e);const o=Wo(this),a=Bv(i,s.bind(r),n);return o(),a}function _A(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Eo(t,e,n=0,r){if(!ht(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),sn(t))Eo(t.value,e,n,r);else if(_e(t))for(let i=0;i<t.length;i++)Eo(t[i],e,n,r);else if(cp(t)||Ua(t))t.forEach(i=>{Eo(i,e,n,r)});else if(BI(t))for(const i in t)Eo(t[i],e,n,r);return t}function In(t,e){if(jt===null)return t;const n=Ip(jt)||jt.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=yt]=e[i];s&&(Ie(s)&&(s={mounted:s,updated:s}),s.deep&&Eo(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function oo(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(aa(),Sr(l,n,8,[t.el,a,t,e]),la())}}const us=Symbol("_leaveCb"),Bh=Symbol("_enterCb");function wx(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qu(()=>{t.isMounted=!0}),Ku(()=>{t.isUnmounting=!0}),t}const gr=[Function,Array],vA={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:gr,onEnter:gr,onAfterEnter:gr,onEnterCancelled:gr,onBeforeLeave:gr,onLeave:gr,onAfterLeave:gr,onLeaveCancelled:gr,onBeforeAppear:gr,onAppear:gr,onAfterAppear:gr,onAppearCancelled:gr},Sx={name:"BaseTransition",props:vA,setup(t,{slots:e}){const n=ca(),r=wx();return()=>{const i=e.default&&EA(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const d of i)if(d.type!==Jn){s=d;break}}const o=Xe(t),{mode:a}=o;if(r.isLeaving)return zm(s);const l=Db(s);if(!l)return zm(s);const c=by(l,o,r,n);Ey(l,c);const u=n.subTree,h=u&&Db(u);if(h&&h.type!==Jn&&!Jr(l,h)){const d=by(h,o,r,n);if(Ey(h,d),a==="out-in")return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},zm(s);a==="in-out"&&l.type!==Jn&&(d.delayLeave=(f,p,m)=>{const g=bA(r,h);g[String(h.key)]=h,f[us]=()=>{p(),f[us]=void 0,delete c.delayedLeave},c.delayedLeave=m})}return s}}},Ix=Sx;function bA(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function by(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:y,onAppearCancelled:_}=e,E=String(t.key),w=bA(n,t),S=(O,k)=>{O&&Sr(O,r,9,k)},I=(O,k)=>{const B=k[1];S(O,k),_e(O)?O.every(W=>W.length<=1)&&B():O.length<=1&&B()},x={mode:s,persisted:o,beforeEnter(O){let k=a;if(!n.isMounted)if(i)k=m||a;else return;O[us]&&O[us](!0);const B=w[E];B&&Jr(t,B)&&B.el[us]&&B.el[us](),S(k,[O])},enter(O){let k=l,B=c,W=u;if(!n.isMounted)if(i)k=g||l,B=y||c,W=_||u;else return;let z=!1;const me=O[Bh]=K=>{z||(z=!0,K?S(W,[O]):S(B,[O]),x.delayedLeave&&x.delayedLeave(),O[Bh]=void 0)};k?I(k,[O,me]):me()},leave(O,k){const B=String(t.key);if(O[Bh]&&O[Bh](!0),n.isUnmounting)return k();S(h,[O]);let W=!1;const z=O[us]=me=>{W||(W=!0,k(),me?S(p,[O]):S(f,[O]),O[us]=void 0,w[B]===t&&delete w[B])};w[B]=t,d?I(d,[O,z]):z()},clone(O){return by(O,e,n,r)}};return x}function zm(t){if(bp(t))return t=Us(t),t.children=null,t}function Db(t){return bp(t)?t.children?t.children[0]:void 0:t}function Ey(t,e){t.shapeFlag&6&&t.component?Ey(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function EA(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===tt?(o.patchFlag&128&&i++,r=r.concat(EA(o.children,e,a))):(e||o.type!==Jn)&&r.push(a!=null?Us(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Zn(t,e){return Ie(t)?Wt({name:t.name},e,{setup:t}):t}const Cc=t=>!!t.type.__asyncLoader,bp=t=>t.type.__isKeepAlive;function Ax(t,e){TA(t,"a",e)}function Cx(t,e){TA(t,"da",e)}function TA(t,e,n=yn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Ep(e,r,n),n){let i=n.parent;for(;i&&i.parent;)bp(i.parent.vnode)&&Rx(r,e,n,i),i=i.parent}}function Rx(t,e,n,r){const i=Ep(e,t,r,!0);wA(()=>{Tv(r[e],i)},n)}function Ep(t,e,n=yn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;aa();const a=Wo(n),l=Sr(e,n,t,o);return a(),la(),l});return r?i.unshift(s):i.push(s),s}}const Ji=t=>(e,n=yn)=>(!Sp||t==="sp")&&Ep(t,(...r)=>e(...r),n),kx=Ji("bm"),qu=Ji("m"),Ox=Ji("bu"),Nx=Ji("u"),Ku=Ji("bum"),wA=Ji("um"),SA=Ji("sp"),Mx=Ji("rtg"),Px=Ji("rtc");function xx(t,e=yn){Ep("ec",t,e)}function pi(t,e,n,r){let i;const s=n&&n[r];if(_e(t)||xt(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(ht(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function Yt(t,e,n={},r,i){if(jt.isCE||jt.parent&&Cc(jt.parent)&&jt.parent.isCE)return e!=="default"&&(n.name=e),De("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),ie();const o=s&&IA(s(n)),a=Jt(tt,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function IA(t){return t.some(e=>su(e)?!(e.type===Jn||e.type===tt&&!IA(e.children)):!0)?t:null}const Ty=t=>t?FA(t)?Ip(t)||t.proxy:Ty(t.parent):null,Rc=Wt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ty(t.parent),$root:t=>Ty(t.root),$emit:t=>t.emit,$options:t=>Uv(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Lv(t.update)}),$nextTick:t=>t.n||(t.n=Dl.bind(t.proxy)),$watch:t=>Tx.bind(t)}),jm=(t,e)=>t!==yt&&!t.__isScriptSetup&&Qe(t,e),Dx={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(jm(r,e))return o[e]=1,r[e];if(i!==yt&&Qe(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Qe(c,e))return o[e]=3,s[e];if(n!==yt&&Qe(n,e))return o[e]=4,n[e];wy&&(o[e]=0)}}const u=Rc[e];let h,d;if(u)return e==="$attrs"&&Xn(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==yt&&Qe(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Qe(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return jm(i,e)?(i[e]=n,!0):r!==yt&&Qe(r,e)?(r[e]=n,!0):Qe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==yt&&Qe(t,o)||jm(e,o)||(a=s[0])&&Qe(a,o)||Qe(r,o)||Qe(Rc,o)||Qe(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Qe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Lb(t){return _e(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function ol(t){const e=ca();let n=t();return ky(),wv(n)&&(n=n.catch(r=>{throw Wo(e),r})),[n,()=>Wo(e)]}let wy=!0;function Lx(t){const e=Uv(t),n=t.proxy,r=t.ctx;wy=!1,e.beforeCreate&&Vb(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:_,destroyed:E,unmounted:w,render:S,renderTracked:I,renderTriggered:x,errorCaptured:O,serverPrefetch:k,expose:B,inheritAttrs:W,components:z,directives:me,filters:K}=e;if(c&&Vx(c,r,null),o)for(const F in o){const P=o[F];Ie(P)&&(r[F]=P.bind(n))}if(i){const F=i.call(n,n);ht(F)&&(t.data=Wu(F))}if(wy=!0,s)for(const F in s){const P=s[F],ae=Ie(P)?P.bind(n,n):Ie(P.get)?P.get.bind(n,n):br,j=!Ie(P)&&Ie(P.set)?P.set.bind(n):br,Z=Pt({get:ae,set:j});Object.defineProperty(r,F,{enumerable:!0,configurable:!0,get:()=>Z.value,set:ce=>Z.value=ce})}if(a)for(const F in a)AA(a[F],r,n,F);if(l){const F=Ie(l)?l.call(n):l;Reflect.ownKeys(F).forEach(P=>{bd(P,F[P])})}u&&Vb(u,t,"c");function N(F,P){_e(P)?P.forEach(ae=>F(ae.bind(n))):P&&F(P.bind(n))}if(N(kx,h),N(qu,d),N(Ox,f),N(Nx,p),N(Ax,m),N(Cx,g),N(xx,O),N(Px,I),N(Mx,x),N(Ku,_),N(wA,w),N(SA,k),_e(B))if(B.length){const F=t.exposed||(t.exposed={});B.forEach(P=>{Object.defineProperty(F,P,{get:()=>n[P],set:ae=>n[P]=ae})})}else t.exposed||(t.exposed={});S&&t.render===br&&(t.render=S),W!=null&&(t.inheritAttrs=W),z&&(t.components=z),me&&(t.directives=me)}function Vx(t,e,n=br){_e(t)&&(t=Sy(t));for(const r in t){const i=t[r];let s;ht(i)?"default"in i?s=Yn(i.from||r,i.default,!0):s=Yn(i.from||r):s=Yn(i),sn(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Vb(t,e,n){Sr(_e(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function AA(t,e,n,r){const i=r.includes(".")?_A(n,r):()=>n[r];if(xt(t)){const s=e[t];Ie(s)&&Bi(i,s)}else if(Ie(t))Bi(i,t.bind(n));else if(ht(t))if(_e(t))t.forEach(s=>AA(s,e,n,r));else{const s=Ie(t.handler)?t.handler.bind(n):e[t.handler];Ie(s)&&Bi(i,s,t)}}function Uv(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Yd(l,c,o,!0)),Yd(l,e,o)),ht(e)&&s.set(e,l),l}function Yd(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Yd(t,s,n,!0),i&&i.forEach(o=>Yd(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Fx[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Fx={data:Fb,props:Bb,emits:Bb,methods:uc,computed:uc,beforeCreate:Vn,created:Vn,beforeMount:Vn,mounted:Vn,beforeUpdate:Vn,updated:Vn,beforeDestroy:Vn,beforeUnmount:Vn,destroyed:Vn,unmounted:Vn,activated:Vn,deactivated:Vn,errorCaptured:Vn,serverPrefetch:Vn,components:uc,directives:uc,watch:Ux,provide:Fb,inject:Bx};function Fb(t,e){return e?t?function(){return Wt(Ie(t)?t.call(this,this):t,Ie(e)?e.call(this,this):e)}:e:t}function Bx(t,e){return uc(Sy(t),Sy(e))}function Sy(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Vn(t,e){return t?[...new Set([].concat(t,e))]:e}function uc(t,e){return t?Wt(Object.create(null),t,e):e}function Bb(t,e){return t?_e(t)&&_e(e)?[...new Set([...t,...e])]:Wt(Object.create(null),Lb(t),Lb(e??{})):e}function Ux(t,e){if(!t)return e;if(!e)return t;const n=Wt(Object.create(null),t);for(const r in e)n[r]=Vn(t[r],e[r]);return n}function CA(){return{app:null,config:{isNativeTag:dP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $x=0;function Hx(t,e){return function(r,i=null){Ie(r)||(r=Wt({},r)),i!=null&&!ht(i)&&(i=null);const s=CA(),o=new WeakSet;let a=!1;const l=s.app={_uid:$x++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:mD,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Ie(c.install)?(o.add(c),c.install(l,...u)):Ie(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=De(r,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Ip(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=kc;kc=l;try{return c()}finally{kc=u}}};return l}}let kc=null;function bd(t,e){if(yn){let n=yn.provides;const r=yn.parent&&yn.parent.provides;r===n&&(n=yn.provides=Object.create(r)),n[t]=e}}function Yn(t,e,n=!1){const r=yn||jt;if(r||kc){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:kc._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ie(e)?e.call(r&&r.proxy):e}}function zx(t,e,n,r=!1){const i={},s={};Wd(s,wp,1),t.propsDefaults=Object.create(null),RA(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:sA(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function jx(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Xe(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(gp(t.emitsOptions,d))continue;const f=e[d];if(l)if(Qe(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const p=fi(d);i[p]=Iy(l,a,p,f,t,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{RA(t,e,i,s)&&(c=!0);let u;for(const h in a)(!e||!Qe(e,h)&&((u=oa(h))===h||!Qe(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=Iy(l,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!Qe(e,h))&&(delete s[h],c=!0)}c&&Fi(t,"set","$attrs")}function RA(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ic(l))continue;const c=e[l];let u;i&&Qe(i,u=fi(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:gp(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Xe(n),c=a||yt;for(let u=0;u<s.length;u++){const h=s[u];n[h]=Iy(i,l,h,c[h],t,!Qe(c,h))}}return o}function Iy(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Qe(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ie(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=Wo(i);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===oa(n))&&(r=!0))}return r}function kA(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Ie(t)){const u=h=>{l=!0;const[d,f]=kA(h,e,!0);Wt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return ht(t)&&r.set(t,Ba),Ba;if(_e(s))for(let u=0;u<s.length;u++){const h=fi(s[u]);Ub(h)&&(o[h]=yt)}else if(s)for(const u in s){const h=fi(u);if(Ub(h)){const d=s[u],f=o[h]=_e(d)||Ie(d)?{type:d}:Wt({},d);if(f){const p=zb(Boolean,f.type),m=zb(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||Qe(f,"default"))&&a.push(h)}}}const c=[o,a];return ht(t)&&r.set(t,c),c}function Ub(t){return t[0]!=="$"&&!Ic(t)}function $b(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Hb(t,e){return $b(t)===$b(e)}function zb(t,e){return _e(e)?e.findIndex(n=>Hb(n,t)):Ie(e)&&Hb(e,t)?0:-1}const OA=t=>t[0]==="_"||t==="$stable",$v=t=>_e(t)?t.map(Nr):[Nr(t)],Wx=(t,e,n)=>{if(e._n)return e;const r=ks((...i)=>$v(e(...i)),n);return r._c=!1,r},NA=(t,e,n)=>{const r=t._ctx;for(const i in t){if(OA(i))continue;const s=t[i];if(Ie(s))e[i]=Wx(i,s,r);else if(s!=null){const o=$v(s);e[i]=()=>o}}},MA=(t,e)=>{const n=$v(e);t.slots.default=()=>n},Gx=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Xe(e),Wd(e,"_",n)):NA(e,t.slots={})}else t.slots={},e&&MA(t,e);Wd(t.slots,wp,1)},qx=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=yt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Wt(i,e),!n&&a===1&&delete i._):(s=!e.$stable,NA(e,i)),o=e}else e&&(MA(t,e),o={default:1});if(s)for(const a in i)!OA(a)&&o[a]==null&&delete i[a]};function Ay(t,e,n,r,i=!1){if(_e(t)){t.forEach((d,f)=>Ay(d,e&&(_e(e)?e[f]:e),n,r,i));return}if(Cc(r)&&!i)return;const s=r.shapeFlag&4?Ip(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===yt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(xt(c)?(u[c]=null,Qe(h,c)&&(h[c]=null)):sn(c)&&(c.value=null)),Ie(l))Rs(l,a,12,[o,u]);else{const d=xt(l),f=sn(l);if(d||f){const p=()=>{if(t.f){const m=d?Qe(h,l)?h[l]:u[l]:l.value;i?_e(m)&&Tv(m,s):_e(m)?m.includes(s)||m.push(s):d?(u[l]=[s],Qe(h,l)&&(h[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,Qe(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,qn(p,n)):p()}}}const qn=yx;function Kx(t){return Yx(t)}function Yx(t,e){const n=$I();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=br,insertStaticContent:p}=t,m=(b,T,C,D=null,M=null,Q=null,se=void 0,Y=null,ee=!!T.dynamicChildren)=>{if(b===T)return;b&&!Jr(b,T)&&(D=R(b),ce(b,M,Q,!0),b=null),T.patchFlag===-2&&(ee=!1,T.dynamicChildren=null);const{type:H,ref:ue,shapeFlag:be}=T;switch(H){case Tp:g(b,T,C,D);break;case Jn:y(b,T,C,D);break;case Ed:b==null&&_(T,C,D,se);break;case tt:z(b,T,C,D,M,Q,se,Y,ee);break;default:be&1?S(b,T,C,D,M,Q,se,Y,ee):be&6?me(b,T,C,D,M,Q,se,Y,ee):(be&64||be&128)&&H.process(b,T,C,D,M,Q,se,Y,ee,G)}ue!=null&&M&&Ay(ue,b&&b.ref,Q,T||b,!T)},g=(b,T,C,D)=>{if(b==null)r(T.el=a(T.children),C,D);else{const M=T.el=b.el;T.children!==b.children&&c(M,T.children)}},y=(b,T,C,D)=>{b==null?r(T.el=l(T.children||""),C,D):T.el=b.el},_=(b,T,C,D)=>{[b.el,b.anchor]=p(b.children,T,C,D,b.el,b.anchor)},E=({el:b,anchor:T},C,D)=>{let M;for(;b&&b!==T;)M=d(b),r(b,C,D),b=M;r(T,C,D)},w=({el:b,anchor:T})=>{let C;for(;b&&b!==T;)C=d(b),i(b),b=C;i(T)},S=(b,T,C,D,M,Q,se,Y,ee)=>{T.type==="svg"?se="svg":T.type==="math"&&(se="mathml"),b==null?I(T,C,D,M,Q,se,Y,ee):k(b,T,M,Q,se,Y,ee)},I=(b,T,C,D,M,Q,se,Y)=>{let ee,H;const{props:ue,shapeFlag:be,transition:ge,dirs:Re}=b;if(ee=b.el=o(b.type,Q,ue&&ue.is,ue),be&8?u(ee,b.children):be&16&&O(b.children,ee,null,D,M,Wm(b,Q),se,Y),Re&&oo(b,null,D,"created"),x(ee,b,b.scopeId,se,D),ue){for(const at in ue)at!=="value"&&!Ic(at)&&s(ee,at,null,ue[at],Q,b.children,D,M,dt);"value"in ue&&s(ee,"value",null,ue.value,Q),(H=ue.onVnodeBeforeMount)&&Gr(H,D,b)}Re&&oo(b,null,D,"beforeMount");const Fe=Jx(M,ge);Fe&&ge.beforeEnter(ee),r(ee,T,C),((H=ue&&ue.onVnodeMounted)||Fe||Re)&&qn(()=>{H&&Gr(H,D,b),Fe&&ge.enter(ee),Re&&oo(b,null,D,"mounted")},M)},x=(b,T,C,D,M)=>{if(C&&f(b,C),D)for(let Q=0;Q<D.length;Q++)f(b,D[Q]);if(M){let Q=M.subTree;if(T===Q){const se=M.vnode;x(b,se,se.scopeId,se.slotScopeIds,M.parent)}}},O=(b,T,C,D,M,Q,se,Y,ee=0)=>{for(let H=ee;H<b.length;H++){const ue=b[H]=Y?hs(b[H]):Nr(b[H]);m(null,ue,T,C,D,M,Q,se,Y)}},k=(b,T,C,D,M,Q,se)=>{const Y=T.el=b.el;let{patchFlag:ee,dynamicChildren:H,dirs:ue}=T;ee|=b.patchFlag&16;const be=b.props||yt,ge=T.props||yt;let Re;if(C&&ao(C,!1),(Re=ge.onVnodeBeforeUpdate)&&Gr(Re,C,T,b),ue&&oo(T,b,C,"beforeUpdate"),C&&ao(C,!0),H?B(b.dynamicChildren,H,Y,C,D,Wm(T,M),Q):se||P(b,T,Y,null,C,D,Wm(T,M),Q,!1),ee>0){if(ee&16)W(Y,T,be,ge,C,D,M);else if(ee&2&&be.class!==ge.class&&s(Y,"class",null,ge.class,M),ee&4&&s(Y,"style",be.style,ge.style,M),ee&8){const Fe=T.dynamicProps;for(let at=0;at<Fe.length;at++){const wt=Fe[at],Kt=be[wt],Rr=ge[wt];(Rr!==Kt||wt==="value")&&s(Y,wt,Kt,Rr,M,b.children,C,D,dt)}}ee&1&&b.children!==T.children&&u(Y,T.children)}else!se&&H==null&&W(Y,T,be,ge,C,D,M);((Re=ge.onVnodeUpdated)||ue)&&qn(()=>{Re&&Gr(Re,C,T,b),ue&&oo(T,b,C,"updated")},D)},B=(b,T,C,D,M,Q,se)=>{for(let Y=0;Y<T.length;Y++){const ee=b[Y],H=T[Y],ue=ee.el&&(ee.type===tt||!Jr(ee,H)||ee.shapeFlag&70)?h(ee.el):C;m(ee,H,ue,null,D,M,Q,se,!0)}},W=(b,T,C,D,M,Q,se)=>{if(C!==D){if(C!==yt)for(const Y in C)!Ic(Y)&&!(Y in D)&&s(b,Y,C[Y],null,se,T.children,M,Q,dt);for(const Y in D){if(Ic(Y))continue;const ee=D[Y],H=C[Y];ee!==H&&Y!=="value"&&s(b,Y,H,ee,se,T.children,M,Q,dt)}"value"in D&&s(b,"value",C.value,D.value,se)}},z=(b,T,C,D,M,Q,se,Y,ee)=>{const H=T.el=b?b.el:a(""),ue=T.anchor=b?b.anchor:a("");let{patchFlag:be,dynamicChildren:ge,slotScopeIds:Re}=T;Re&&(Y=Y?Y.concat(Re):Re),b==null?(r(H,C,D),r(ue,C,D),O(T.children||[],C,ue,M,Q,se,Y,ee)):be>0&&be&64&&ge&&b.dynamicChildren?(B(b.dynamicChildren,ge,C,M,Q,se,Y),(T.key!=null||M&&T===M.subTree)&&Hv(b,T,!0)):P(b,T,C,ue,M,Q,se,Y,ee)},me=(b,T,C,D,M,Q,se,Y,ee)=>{T.slotScopeIds=Y,b==null?T.shapeFlag&512?M.ctx.activate(T,C,D,se,ee):K(T,C,D,M,Q,se,ee):$(b,T,ee)},K=(b,T,C,D,M,Q,se)=>{const Y=b.component=lD(b,D,M);if(bp(b)&&(Y.ctx.renderer=G),cD(Y),Y.asyncDep){if(M&&M.registerDep(Y,N),!b.el){const ee=Y.subTree=De(Jn);y(null,ee,T,C)}}else N(Y,b,T,C,M,Q,se)},$=(b,T,C)=>{const D=T.component=b.component;if(ax(b,T,C))if(D.asyncDep&&!D.asyncResolved){F(D,T,C);return}else D.next=T,tx(D.update),D.effect.dirty=!0,D.update();else T.el=b.el,D.vnode=T},N=(b,T,C,D,M,Q,se)=>{const Y=()=>{if(b.isMounted){let{next:ue,bu:be,u:ge,parent:Re,vnode:Fe}=b;{const ga=PA(b);if(ga){ue&&(ue.el=Fe.el,F(b,ue,se)),ga.asyncDep.then(()=>{b.isUnmounted||Y()});return}}let at=ue,wt;ao(b,!1),ue?(ue.el=Fe.el,F(b,ue,se)):ue=Fe,be&&vd(be),(wt=ue.props&&ue.props.onVnodeBeforeUpdate)&&Gr(wt,Re,ue,Fe),ao(b,!0);const Kt=Hm(b),Rr=b.subTree;b.subTree=Kt,m(Rr,Kt,h(Rr.el),R(Rr),b,M,Q),ue.el=Kt.el,at===null&&Vv(b,Kt.el),ge&&qn(ge,M),(wt=ue.props&&ue.props.onVnodeUpdated)&&qn(()=>Gr(wt,Re,ue,Fe),M)}else{let ue;const{el:be,props:ge}=T,{bm:Re,m:Fe,parent:at}=b,wt=Cc(T);if(ao(b,!1),Re&&vd(Re),!wt&&(ue=ge&&ge.onVnodeBeforeMount)&&Gr(ue,at,T),ao(b,!0),be&&We){const Kt=()=>{b.subTree=Hm(b),We(be,b.subTree,b,M,null)};wt?T.type.__asyncLoader().then(()=>!b.isUnmounted&&Kt()):Kt()}else{const Kt=b.subTree=Hm(b);m(null,Kt,C,D,b,M,Q),T.el=Kt.el}if(Fe&&qn(Fe,M),!wt&&(ue=ge&&ge.onVnodeMounted)){const Kt=T;qn(()=>Gr(ue,at,Kt),M)}(T.shapeFlag&256||at&&Cc(at.vnode)&&at.vnode.shapeFlag&256)&&b.a&&qn(b.a,M),b.isMounted=!0,T=C=D=null}},ee=b.effect=new Av(Y,br,()=>Lv(H),b.scope),H=b.update=()=>{ee.dirty&&ee.run()};H.id=b.uid,ao(b,!0),H()},F=(b,T,C)=>{T.component=b;const D=b.vnode.props;b.vnode=T,b.next=null,jx(b,T.props,D,C),qx(b,T.children,C),aa(),Ob(b),la()},P=(b,T,C,D,M,Q,se,Y,ee=!1)=>{const H=b&&b.children,ue=b?b.shapeFlag:0,be=T.children,{patchFlag:ge,shapeFlag:Re}=T;if(ge>0){if(ge&128){j(H,be,C,D,M,Q,se,Y,ee);return}else if(ge&256){ae(H,be,C,D,M,Q,se,Y,ee);return}}Re&8?(ue&16&&dt(H,M,Q),be!==H&&u(C,be)):ue&16?Re&16?j(H,be,C,D,M,Q,se,Y,ee):dt(H,M,Q,!0):(ue&8&&u(C,""),Re&16&&O(be,C,D,M,Q,se,Y,ee))},ae=(b,T,C,D,M,Q,se,Y,ee)=>{b=b||Ba,T=T||Ba;const H=b.length,ue=T.length,be=Math.min(H,ue);let ge;for(ge=0;ge<be;ge++){const Re=T[ge]=ee?hs(T[ge]):Nr(T[ge]);m(b[ge],Re,C,null,M,Q,se,Y,ee)}H>ue?dt(b,M,Q,!0,!1,be):O(T,C,D,M,Q,se,Y,ee,be)},j=(b,T,C,D,M,Q,se,Y,ee)=>{let H=0;const ue=T.length;let be=b.length-1,ge=ue-1;for(;H<=be&&H<=ge;){const Re=b[H],Fe=T[H]=ee?hs(T[H]):Nr(T[H]);if(Jr(Re,Fe))m(Re,Fe,C,null,M,Q,se,Y,ee);else break;H++}for(;H<=be&&H<=ge;){const Re=b[be],Fe=T[ge]=ee?hs(T[ge]):Nr(T[ge]);if(Jr(Re,Fe))m(Re,Fe,C,null,M,Q,se,Y,ee);else break;be--,ge--}if(H>be){if(H<=ge){const Re=ge+1,Fe=Re<ue?T[Re].el:D;for(;H<=ge;)m(null,T[H]=ee?hs(T[H]):Nr(T[H]),C,Fe,M,Q,se,Y,ee),H++}}else if(H>ge)for(;H<=be;)ce(b[H],M,Q,!0),H++;else{const Re=H,Fe=H,at=new Map;for(H=Fe;H<=ge;H++){const er=T[H]=ee?hs(T[H]):Nr(T[H]);er.key!=null&&at.set(er.key,H)}let wt,Kt=0;const Rr=ge-Fe+1;let ga=!1,_b=0;const Ql=new Array(Rr);for(H=0;H<Rr;H++)Ql[H]=0;for(H=Re;H<=be;H++){const er=b[H];if(Kt>=Rr){ce(er,M,Q,!0);continue}let Wr;if(er.key!=null)Wr=at.get(er.key);else for(wt=Fe;wt<=ge;wt++)if(Ql[wt-Fe]===0&&Jr(er,T[wt])){Wr=wt;break}Wr===void 0?ce(er,M,Q,!0):(Ql[Wr-Fe]=H+1,Wr>=_b?_b=Wr:ga=!0,m(er,T[Wr],C,null,M,Q,se,Y,ee),Kt++)}const vb=ga?Qx(Ql):Ba;for(wt=vb.length-1,H=Rr-1;H>=0;H--){const er=Fe+H,Wr=T[er],bb=er+1<ue?T[er+1].el:D;Ql[H]===0?m(null,Wr,C,bb,M,Q,se,Y,ee):ga&&(wt<0||H!==vb[wt]?Z(Wr,C,bb,2):wt--)}}},Z=(b,T,C,D,M=null)=>{const{el:Q,type:se,transition:Y,children:ee,shapeFlag:H}=b;if(H&6){Z(b.component.subTree,T,C,D);return}if(H&128){b.suspense.move(T,C,D);return}if(H&64){se.move(b,T,C,G);return}if(se===tt){r(Q,T,C);for(let be=0;be<ee.length;be++)Z(ee[be],T,C,D);r(b.anchor,T,C);return}if(se===Ed){E(b,T,C);return}if(D!==2&&H&1&&Y)if(D===0)Y.beforeEnter(Q),r(Q,T,C),qn(()=>Y.enter(Q),M);else{const{leave:be,delayLeave:ge,afterLeave:Re}=Y,Fe=()=>r(Q,T,C),at=()=>{be(Q,()=>{Fe(),Re&&Re()})};ge?ge(Q,Fe,at):at()}else r(Q,T,C)},ce=(b,T,C,D=!1,M=!1)=>{const{type:Q,props:se,ref:Y,children:ee,dynamicChildren:H,shapeFlag:ue,patchFlag:be,dirs:ge}=b;if(Y!=null&&Ay(Y,null,C,b,!0),ue&256){T.ctx.deactivate(b);return}const Re=ue&1&&ge,Fe=!Cc(b);let at;if(Fe&&(at=se&&se.onVnodeBeforeUnmount)&&Gr(at,T,b),ue&6)Mt(b.component,C,D);else{if(ue&128){b.suspense.unmount(C,D);return}Re&&oo(b,null,T,"beforeUnmount"),ue&64?b.type.remove(b,T,C,M,G,D):H&&(Q!==tt||be>0&&be&64)?dt(H,T,C,!1,!0):(Q===tt&&be&384||!M&&ue&16)&&dt(ee,T,C),D&&rt(b)}(Fe&&(at=se&&se.onVnodeUnmounted)||Re)&&qn(()=>{at&&Gr(at,T,b),Re&&oo(b,null,T,"unmounted")},C)},rt=b=>{const{type:T,el:C,anchor:D,transition:M}=b;if(T===tt){ot(C,D);return}if(T===Ed){w(b);return}const Q=()=>{i(C),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(b.shapeFlag&1&&M&&!M.persisted){const{leave:se,delayLeave:Y}=M,ee=()=>se(C,Q);Y?Y(b.el,Q,ee):ee()}else Q()},ot=(b,T)=>{let C;for(;b!==T;)C=d(b),i(b),b=C;i(T)},Mt=(b,T,C)=>{const{bum:D,scope:M,update:Q,subTree:se,um:Y}=b;D&&vd(D),M.stop(),Q&&(Q.active=!1,ce(se,b,T,C)),Y&&qn(Y,T),qn(()=>{b.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&b.asyncDep&&!b.asyncResolved&&b.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},dt=(b,T,C,D=!1,M=!1,Q=0)=>{for(let se=Q;se<b.length;se++)ce(b[se],T,C,D,M)},R=b=>b.shapeFlag&6?R(b.component.subTree):b.shapeFlag&128?b.suspense.next():d(b.anchor||b.el);let J=!1;const q=(b,T,C)=>{b==null?T._vnode&&ce(T._vnode,null,null,!0):m(T._vnode||null,b,T,null,null,null,C),J||(J=!0,Ob(),pA(),J=!1),T._vnode=b},G={p:m,um:ce,m:Z,r:rt,mt:K,mc:O,pc:P,pbc:B,n:R,o:t};let Te,We;return e&&([Te,We]=e(G)),{render:q,hydrate:Te,createApp:Hx(q,Te)}}function Wm({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ao({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Jx(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Hv(t,e,n=!1){const r=t.children,i=e.children;if(_e(r)&&_e(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=hs(i[s]),a.el=o.el),n||Hv(o,a)),a.type===Tp&&(a.el=o.el)}}function Qx(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function PA(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:PA(e)}const Xx=t=>t.__isTeleport,Oc=t=>t&&(t.disabled||t.disabled===""),jb=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Wb=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Cy=(t,e)=>{const n=t&&t.to;return xt(n)?e?e(n):null:n},Zx={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:m,createComment:g}}=c,y=Oc(e.props);let{shapeFlag:_,children:E,dynamicChildren:w}=e;if(t==null){const S=e.el=m(""),I=e.anchor=m("");f(S,n,r),f(I,n,r);const x=e.target=Cy(e.props,p),O=e.targetAnchor=m("");x&&(f(O,x),o==="svg"||jb(x)?o="svg":(o==="mathml"||Wb(x))&&(o="mathml"));const k=(B,W)=>{_&16&&u(E,B,W,i,s,o,a,l)};y?k(n,I):x&&k(x,O)}else{e.el=t.el;const S=e.anchor=t.anchor,I=e.target=t.target,x=e.targetAnchor=t.targetAnchor,O=Oc(t.props),k=O?n:I,B=O?S:x;if(o==="svg"||jb(I)?o="svg":(o==="mathml"||Wb(I))&&(o="mathml"),w?(d(t.dynamicChildren,w,k,i,s,o,a),Hv(t,e,!0)):l||h(t,e,k,B,i,s,o,a,!1),y)O?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Uh(e,n,S,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const W=e.target=Cy(e.props,p);W&&Uh(e,W,null,c,0)}else O&&Uh(e,I,x,c,1)}xA(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:d}=t;if(h&&s(u),o&&s(c),a&16){const f=o||!Oc(d);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,n,f,!!m.dynamicChildren)}}},move:Uh,hydrate:eD};function Uh(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,h=s===2;if(h&&r(o,e,n),(!h||Oc(u))&&l&16)for(let d=0;d<c.length;d++)i(c[d],e,n,2);h&&r(a,e,n)}function eD(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=Cy(e.props,l);if(u){const h=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Oc(e.props))e.anchor=c(o(t),e,a(t),n,r,i,s),e.targetAnchor=h;else{e.anchor=o(t);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(h,e,u,n,r,i,s)}xA(e)}return e.anchor&&o(e.anchor)}const tD=Zx;function xA(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const tt=Symbol.for("v-fgt"),Tp=Symbol.for("v-txt"),Jn=Symbol.for("v-cmt"),Ed=Symbol.for("v-stc"),Nc=[];let Er=null;function ie(t=!1){Nc.push(Er=t?null:[])}function DA(){Nc.pop(),Er=Nc[Nc.length-1]||null}let al=1;function Gb(t){al+=t}function LA(t){return t.dynamicChildren=al>0?Er||Ba:null,DA(),al>0&&Er&&Er.push(t),t}function ye(t,e,n,r,i,s){return LA(A(t,e,n,r,i,s,!0))}function Jt(t,e,n,r,i){return LA(De(t,e,n,r,i,!0))}function su(t){return t?t.__v_isVNode===!0:!1}function Jr(t,e){return t.type===e.type&&t.key===e.key}const wp="__vInternal",VA=({key:t})=>t??null,Td=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?xt(t)||sn(t)||Ie(t)?{i:jt,r:t,k:e,f:!!n}:t:null);function A(t,e=null,n=null,r=0,i=null,s=t===tt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&VA(e),ref:e&&Td(e),scopeId:yp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:jt};return a?(zv(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=xt(n)?8:16),al>0&&!o&&Er&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Er.push(l),l}const De=nD;function nD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===cx)&&(t=Jn),su(t)){const a=Us(t,e,!0);return n&&zv(a,n),al>0&&!s&&Er&&(a.shapeFlag&6?Er[Er.indexOf(t)]=a:Er.push(a)),a.patchFlag|=-2,a}if(pD(t)&&(t=t.__vccOpts),e){e=rD(e);let{class:a,style:l}=e;a&&!xt(a)&&(e.class=dp(a)),ht(l)&&(oA(l)&&!_e(l)&&(l=Wt({},l)),e.style=Bs(l))}const o=xt(t)?1:hx(t)?128:Xx(t)?64:ht(t)?4:Ie(t)?2:0;return A(t,e,n,r,i,o,s,!0)}function rD(t){return t?oA(t)||wp in t?Wt({},t):t:null}function Us(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?sD(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&VA(a),ref:e&&e.ref?n&&i?_e(i)?i.concat(Td(e)):[i,Td(e)]:Td(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==tt?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Us(t.ssContent),ssFallback:t.ssFallback&&Us(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function pt(t=" ",e=0){return De(Tp,null,t,e)}function iD(t,e){const n=De(Ed,null,t);return n.staticCount=e,n}function qe(t="",e=!1){return e?(ie(),Jt(Jn,null,t)):De(Jn,null,t)}function Nr(t){return t==null||typeof t=="boolean"?De(Jn):_e(t)?De(tt,null,t.slice()):typeof t=="object"?hs(t):De(Tp,null,String(t))}function hs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Us(t)}function zv(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(_e(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),zv(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(wp in e)?e._ctx=jt:i===3&&jt&&(jt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:jt},n=32):(e=String(e),r&64?(n=16,e=[pt(e)]):n=8);t.children=e,t.shapeFlag|=n}function sD(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=dp([e.class,r.class]));else if(i==="style")e.style=Bs([e.style,r.style]);else if(lp(i)){const s=e[i],o=r[i];o&&s!==o&&!(_e(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Gr(t,e,n,r=null){Sr(t,e,7,[n,r])}const oD=CA();let aD=0;function lD(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||oD,s={uid:aD++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new WI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kA(r,i),emitsOptions:gA(r,i),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:r.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=rx.bind(null,s),t.ce&&t.ce(s),s}let yn=null;const ca=()=>yn||jt;let Jd,Ry;{const t=$I(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Jd=e("__VUE_INSTANCE_SETTERS__",n=>yn=n),Ry=e("__VUE_SSR_SETTERS__",n=>Sp=n)}const Wo=t=>{const e=yn;return Jd(t),t.scope.on(),()=>{t.scope.off(),Jd(e)}},ky=()=>{yn&&yn.scope.off(),Jd(null)};function FA(t){return t.vnode.shapeFlag&4}let Sp=!1;function cD(t,e=!1){e&&Ry(e);const{props:n,children:r}=t.vnode,i=FA(t);zx(t,n,i,e),Gx(t,r);const s=i?uD(t,e):void 0;return e&&Ry(!1),s}function uD(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=mp(new Proxy(t.ctx,Dx));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?dD(t):null,s=Wo(t);aa();const o=Rs(r,t,0,[t.props,i]);if(la(),s(),wv(o)){if(o.then(ky,ky),e)return o.then(a=>{Oy(t,a,e)}).catch(a=>{Gu(a,t,0)});t.asyncDep=o}else Oy(t,o,e)}else BA(t,e)}function Oy(t,e,n){Ie(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ht(e)&&(t.setupState=uA(e)),BA(t,n)}let qb;function BA(t,e,n){const r=t.type;if(!t.render){if(!e&&qb&&!r.render){const i=r.template||Uv(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Wt(Wt({isCustomElement:s,delimiters:a},o),l);r.render=qb(i,c)}}t.render=r.render||br}{const i=Wo(t);aa();try{Lx(t)}finally{la(),i()}}}function hD(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Xn(t,"get","$attrs"),e[n]}}))}function dD(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return hD(t)},slots:t.slots,emit:t.emit,expose:e}}function Ip(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(uA(mp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Rc)return Rc[n](t)},has(e,n){return n in e||n in Rc}}))}function fD(t,e=!0){return Ie(t)?t.displayName||t.name:t.name||e&&t.__name}function pD(t){return Ie(t)&&"__vccOpts"in t}const Pt=(t,e)=>WP(t,e,Sp);function Do(t,e,n){const r=arguments.length;return r===2?ht(e)&&!_e(e)?su(e)?De(t,null,[e]):De(t,e):De(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&su(n)&&(n=[n]),De(t,e,n))}const mD="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const gD="http://www.w3.org/2000/svg",yD="http://www.w3.org/1998/Math/MathML",ds=typeof document<"u"?document:null,Kb=ds&&ds.createElement("template"),_D={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?ds.createElementNS(gD,t):e==="mathml"?ds.createElementNS(yD,t):ds.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ds.createTextNode(t),createComment:t=>ds.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ds.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Kb.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=Kb.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ts="transition",Xl="animation",ou=Symbol("_vtc"),Qd=(t,{slots:e})=>Do(Ix,vD(t),e);Qd.displayName="Transition";const UA={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Qd.props=Wt({},vA,UA);const lo=(t,e=[])=>{_e(t)?t.forEach(n=>n(...e)):t&&t(...e)},Yb=t=>t?_e(t)?t.some(e=>e.length>1):t.length>1:!1;function vD(t){const e={};for(const z in t)z in UA||(e[z]=t[z]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=bD(i),m=p&&p[0],g=p&&p[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:E,onLeave:w,onLeaveCancelled:S,onBeforeAppear:I=y,onAppear:x=_,onAppearCancelled:O=E}=e,k=(z,me,K)=>{co(z,me?u:a),co(z,me?c:o),K&&K()},B=(z,me)=>{z._isLeaving=!1,co(z,h),co(z,f),co(z,d),me&&me()},W=z=>(me,K)=>{const $=z?x:_,N=()=>k(me,z,K);lo($,[me,N]),Jb(()=>{co(me,z?l:s),ns(me,z?u:a),Yb($)||Qb(me,r,m,N)})};return Wt(e,{onBeforeEnter(z){lo(y,[z]),ns(z,s),ns(z,o)},onBeforeAppear(z){lo(I,[z]),ns(z,l),ns(z,c)},onEnter:W(!1),onAppear:W(!0),onLeave(z,me){z._isLeaving=!0;const K=()=>B(z,me);ns(z,h),wD(),ns(z,d),Jb(()=>{z._isLeaving&&(co(z,h),ns(z,f),Yb(w)||Qb(z,r,g,K))}),lo(w,[z,K])},onEnterCancelled(z){k(z,!1),lo(E,[z])},onAppearCancelled(z){k(z,!0),lo(O,[z])},onLeaveCancelled(z){B(z),lo(S,[z])}})}function bD(t){if(t==null)return null;if(ht(t))return[Gm(t.enter),Gm(t.leave)];{const e=Gm(t);return[e,e]}}function Gm(t){return UI(t)}function ns(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ou]||(t[ou]=new Set)).add(e)}function co(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[ou];n&&(n.delete(e),n.size||(t[ou]=void 0))}function Jb(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ED=0;function Qb(t,e,n,r){const i=t._endId=++ED,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=TD(t,e);if(!o)return r();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,d),s()},d=f=>{f.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,d)}function TD(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${ts}Delay`),s=r(`${ts}Duration`),o=Xb(i,s),a=r(`${Xl}Delay`),l=r(`${Xl}Duration`),c=Xb(a,l);let u=null,h=0,d=0;e===ts?o>0&&(u=ts,h=o,d=s.length):e===Xl?c>0&&(u=Xl,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?ts:Xl:null,d=u?u===ts?s.length:l.length:0);const f=u===ts&&/\b(transform|all)(,|$)/.test(r(`${ts}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function Xb(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Zb(n)+Zb(t[r])))}function Zb(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function wD(){return document.body.offsetHeight}function SD(t,e,n){const r=t[ou];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Xd=Symbol("_vod"),$A=Symbol("_vsh"),Zl={beforeMount(t,{value:e},{transition:n}){t[Xd]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ec(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ec(t,!0),r.enter(t)):r.leave(t,()=>{ec(t,!1)}):ec(t,e))},beforeUnmount(t,{value:e}){ec(t,e)}};function ec(t,e){t.style.display=e?t[Xd]:"none",t[$A]=!e}const ID=Symbol(""),AD=/(^|;)\s*display\s*:/;function CD(t,e,n){const r=t.style,i=xt(n);let s=!1;if(n&&!i){if(e)if(xt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&wd(r,a,"")}else for(const o in e)n[o]==null&&wd(r,o,"");for(const o in n)o==="display"&&(s=!0),wd(r,o,n[o])}else if(i){if(e!==n){const o=r[ID];o&&(n+=";"+o),r.cssText=n,s=AD.test(n)}}else e&&t.removeAttribute("style");Xd in t&&(t[Xd]=s?r.display:"",t[$A]&&(r.display="none"))}const eE=/\s*!important$/;function wd(t,e,n){if(_e(n))n.forEach(r=>wd(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=RD(t,e);eE.test(n)?t.setProperty(oa(r),n.replace(eE,""),"important"):t[r]=n}}const tE=["Webkit","Moz","ms"],qm={};function RD(t,e){const n=qm[e];if(n)return n;let r=fi(e);if(r!=="filter"&&r in t)return qm[e]=r;r=hp(r);for(let i=0;i<tE.length;i++){const s=tE[i]+r;if(s in t)return qm[e]=s}return e}const nE="http://www.w3.org/1999/xlink";function kD(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(nE,e.slice(6,e.length)):t.setAttributeNS(nE,e,n);else{const s=TP(e);n==null||s&&!HI(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function OD(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=HI(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function yo(t,e,n,r){t.addEventListener(e,n,r)}function ND(t,e,n,r){t.removeEventListener(e,n,r)}const rE=Symbol("_vei");function MD(t,e,n,r,i=null){const s=t[rE]||(t[rE]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=PD(e);if(r){const c=s[e]=LD(r,i);yo(t,a,c,l)}else o&&(ND(t,a,o,l),s[e]=void 0)}}const iE=/(?:Once|Passive|Capture)$/;function PD(t){let e;if(iE.test(t)){e={};let r;for(;r=t.match(iE);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):oa(t.slice(2)),e]}let Km=0;const xD=Promise.resolve(),DD=()=>Km||(xD.then(()=>Km=0),Km=Date.now());function LD(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Sr(VD(r,n.value),e,5,[r])};return n.value=t,n.attached=DD(),n}function VD(t,e){if(_e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const sE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,FD=(t,e,n,r,i,s,o,a,l)=>{const c=i==="svg";e==="class"?SD(t,r,c):e==="style"?CD(t,n,r):lp(e)?Ev(e)||MD(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):BD(t,e,r,c))?OD(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),kD(t,e,r,c))};function BD(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&sE(e)&&Ie(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return sE(e)&&xt(n)?!1:e in t}const Zd=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _e(e)?n=>vd(e,n):e};function UD(t){t.target.composing=!0}function oE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ja=Symbol("_assign"),Oi={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[ja]=Zd(i);const s=r||i.props&&i.props.type==="number";yo(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=fy(a)),t[ja](a)}),n&&yo(t,"change",()=>{t.value=t.value.trim()}),e||(yo(t,"compositionstart",UD),yo(t,"compositionend",oE),yo(t,"change",oE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[ja]=Zd(s),t.composing)return;const o=i||t.type==="number"?fy(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},aE={deep:!0,created(t,e,n){t[ja]=Zd(n),yo(t,"change",()=>{const r=t._modelValue,i=$D(t),s=t.checked,o=t[ja];if(_e(r)){const a=zI(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(cp(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(HA(t,s))})},mounted:lE,beforeUpdate(t,e,n){t[ja]=Zd(n),lE(t,e,n)}};function lE(t,{value:e,oldValue:n},r){t._modelValue=e,_e(e)?t.checked=zI(e,r.props.value)>-1:cp(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=fp(e,HA(t,!0)))}function $D(t){return"_value"in t?t._value:t.value}function HA(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const HD=["ctrl","shift","alt","meta"],zD={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>HD.some(n=>t[`${n}Key`]&&!e.includes(n))},lt=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=zD[e[o]];if(a&&a(i,e))return}return t(i,...s)})},jD={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qr=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=oa(i.key);if(e.some(o=>o===s||jD[o]===s))return t(i)})},WD=Wt({patchProp:FD},_D);let cE;function GD(){return cE||(cE=Kx(WD))}const qD=(...t)=>{const e=GD().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=YD(r);if(!i)return;const s=e._component;!Ie(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,KD(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function KD(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function YD(t){return xt(t)?document.querySelector(t):t}var JD=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const QD=Symbol();var uE;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(uE||(uE={}));function XD(){const t=GI(!0),e=t.run(()=>xe({}));let n=[],r=[];const i=mp({install(s){i._a=s,s.provide(QD,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!JD?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}var hE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(t,e){if(!t)throw Ll(e)},Ll=function(t){return new Error("Firebase Database ("+zA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ap={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new e4;const d=s<<2|a>>4;if(r.push(d),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class e4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WA=function(t){const e=jA(t);return Ap.encodeByteArray(e,!0)},ef=function(t){return WA(t).replace(/\./g,"")},tf=function(t){try{return Ap.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){return GA(void 0,t)}function GA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!n4(n)||(t[n]=GA(t[n],e[n]));return t}function n4(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=()=>r4().__FIREBASE_DEFAULTS__,s4=()=>{if(typeof process>"u"||typeof hE>"u")return;const t=hE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},o4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tf(t[1]);return e&&JSON.parse(e)},Cp=()=>{try{return i4()||s4()||o4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},a4=t=>{var e,n;return(n=(e=Cp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},l4=t=>{const e=a4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qA=()=>{var t;return(t=Cp())===null||t===void 0?void 0:t.config},c4=t=>{var e;return(e=Cp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ef(JSON.stringify(n)),ef(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function h4(){var t;const e=(t=Cp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function d4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f4(){const t=$t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YA(){return zA.NODE_ADMIN===!0}function p4(){return!h4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wv(){try{return typeof indexedDB=="object"}catch{return!1}}function m4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4="FirebaseError";class Ii extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=g4,Object.setPrototypeOf(this,Ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vl.prototype.create)}}class Vl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?y4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ii(i,a,r)}}function y4(t,e){return t.replace(_4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){return JSON.parse(t)}function _n(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=lu(tf(s[0])||""),n=lu(tf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},v4=function(t){const e=JA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},b4=function(t){const e=JA(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ll(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ny(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function cu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(dE(s)&&dE(o)){if(!cu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function dE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const d=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function T4(t,e){const n=new w4(t,e);return n.subscribe.bind(n)}class w4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");S4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ym),i.error===void 0&&(i.error=Ym),i.complete===void 0&&(i.complete=Ym);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ym(){}function I4(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ne(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Rp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return t&&t._delegate?t._delegate:t}class Ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new au;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k4(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:R4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function R4(t){return t===fo?void 0:t}function k4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new C4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const N4={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},M4=Be.INFO,P4={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},x4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=P4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yu{constructor(e){this.name=e,this._logLevel=M4,this._logHandler=x4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?N4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const D4=(t,e)=>e.some(n=>t instanceof n);let fE,pE;function L4(){return fE||(fE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V4(){return pE||(pE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QA=new WeakMap,My=new WeakMap,XA=new WeakMap,Jm=new WeakMap,Gv=new WeakMap;function F4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Os(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&QA.set(n,t)}).catch(()=>{}),Gv.set(e,t),e}function B4(t){if(My.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});My.set(t,e)}let Py={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return My.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function U4(t){Py=t(Py)}function $4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qm(this),e,...n);return XA.set(r,e.sort?e.sort():[e]),Os(r)}:V4().includes(t)?function(...e){return t.apply(Qm(this),e),Os(QA.get(this))}:function(...e){return Os(t.apply(Qm(this),e))}}function H4(t){return typeof t=="function"?$4(t):(t instanceof IDBTransaction&&B4(t),D4(t,L4())?new Proxy(t,Py):t)}function Os(t){if(t instanceof IDBRequest)return F4(t);if(Jm.has(t))return Jm.get(t);const e=H4(t);return e!==t&&(Jm.set(t,e),Gv.set(e,t)),e}const Qm=t=>Gv.get(t);function z4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Os(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Os(o.result),l.oldVersion,l.newVersion,Os(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const j4=["get","getKey","getAll","getAllKeys","count"],W4=["put","add","delete","clear"],Xm=new Map;function mE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xm.get(e))return Xm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=W4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||j4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Xm.set(e,s),s}U4(t=>({...t,get:(e,n,r)=>mE(e,n)||t.get(e,n,r),has:(e,n)=>!!mE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(q4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function q4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xy="@firebase/app",gE="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new Yu("@firebase/app"),K4="@firebase/app-compat",Y4="@firebase/analytics-compat",J4="@firebase/analytics",Q4="@firebase/app-check-compat",X4="@firebase/app-check",Z4="@firebase/auth",e3="@firebase/auth-compat",t3="@firebase/database",n3="@firebase/database-compat",r3="@firebase/functions",i3="@firebase/functions-compat",s3="@firebase/installations",o3="@firebase/installations-compat",a3="@firebase/messaging",l3="@firebase/messaging-compat",c3="@firebase/performance",u3="@firebase/performance-compat",h3="@firebase/remote-config",d3="@firebase/remote-config-compat",f3="@firebase/storage",p3="@firebase/storage-compat",m3="@firebase/firestore",g3="@firebase/firestore-compat",y3="firebase",_3="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="[DEFAULT]",v3={[xy]:"fire-core",[K4]:"fire-core-compat",[J4]:"fire-analytics",[Y4]:"fire-analytics-compat",[X4]:"fire-app-check",[Q4]:"fire-app-check-compat",[Z4]:"fire-auth",[e3]:"fire-auth-compat",[t3]:"fire-rtdb",[n3]:"fire-rtdb-compat",[r3]:"fire-fn",[i3]:"fire-fn-compat",[s3]:"fire-iid",[o3]:"fire-iid-compat",[a3]:"fire-fcm",[l3]:"fire-fcm-compat",[c3]:"fire-perf",[u3]:"fire-perf-compat",[h3]:"fire-rc",[d3]:"fire-rc-compat",[f3]:"fire-gcs",[p3]:"fire-gcs-compat",[m3]:"fire-fst",[g3]:"fire-fst-compat","fire-js":"fire-js",[y3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Map,Ly=new Map;function b3(t,e){try{t.container.addComponent(e)}catch(n){Go.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mi(t){const e=t.name;if(Ly.has(e))return Go.debug(`There were multiple attempts to register component ${e}.`),!1;Ly.set(e,t);for(const n of rf.values())b3(n,t);return!0}function ZA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ns=new Vl("app","Firebase",E3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=_3;function eC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ns.create("bad-app-name",{appName:String(i)});if(n||(n=qA()),!n)throw Ns.create("no-options");const s=rf.get(i);if(s){if(cu(n,s.options)&&cu(r,s.config))return s;throw Ns.create("duplicate-app",{appName:i})}const o=new O4(i);for(const l of Ly.values())o.addComponent(l);const a=new T3(n,r,o);return rf.set(i,a),a}function tC(t=Dy){const e=rf.get(t);if(!e&&t===Dy&&qA())return eC();if(!e)throw Ns.create("no-app",{appName:t});return e}function lr(t,e,n){var r;let i=(r=v3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Go.warn(a.join(" "));return}mi(new Ur(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="firebase-heartbeat-database",S3=1,uu="firebase-heartbeat-store";let Zm=null;function nC(){return Zm||(Zm=z4(w3,S3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),Zm}async function I3(t){try{const n=(await nC()).transaction(uu),r=await n.objectStore(uu).get(rC(t));return await n.done,r}catch(e){if(e instanceof Ii)Go.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Go.warn(n.message)}}}async function yE(t,e){try{const r=(await nC()).transaction(uu,"readwrite");await r.objectStore(uu).put(e,rC(t)),await r.done}catch(n){if(n instanceof Ii)Go.warn(n.message);else{const r=Ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Go.warn(r.message)}}}function rC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1024,C3=30*24*60*60*1e3;class R3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_E();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=C3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_E(),{heartbeatsToSend:r,unsentEntries:i}=k3(this._heartbeatsCache.heartbeats),s=ef(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function _E(){return new Date().toISOString().substring(0,10)}function k3(t,e=A3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class O3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wv()?m4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vE(t){return ef(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t){mi(new Ur("platform-logger",e=>new G4(e),"PRIVATE")),mi(new Ur("heartbeat",e=>new R3(e),"PRIVATE")),lr(xy,gE,t),lr(xy,gE,"esm2017"),lr("fire-js","")}N3("");function qv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const M3=iC,sC=new Vl("auth","Firebase",iC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new Yu("@firebase/auth");function P3(t,...e){sf.logLevel<=Be.WARN&&sf.warn(`Auth (${Js}): ${t}`,...e)}function Sd(t,...e){sf.logLevel<=Be.ERROR&&sf.error(`Auth (${Js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t,...e){throw Kv(t,...e)}function ai(t,...e){return Kv(t,...e)}function oC(t,e,n){const r=Object.assign(Object.assign({},M3()),{[e]:n});return new Vl("auth","Firebase",r).create(e,{appName:t.name})}function x3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&gi(t,"argument-error"),oC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sC.create(t,...e)}function Pe(t,e,...n){if(!t)throw Kv(e,...n)}function xi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sd(e),new Error(e)}function zi(t,e){t||xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function D3(){return bE()==="http:"||bE()==="https:"}function bE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D3()||d4()||"connection"in navigator)?navigator.onLine:!0}function V3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.shortDelay=e,this.longDelay=n,zi(n>e,"Short delay should be less than long delay!"),this.isMobile=jv()||KA()}get(){return L3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t,e){zi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=new Ju(3e4,6e4);function Jv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Bl(t,e,n,r,i={}){return lC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Fl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),aC.fetch()(cC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function lC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},F3),e);try{const i=new $3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw $h(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $h(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $h(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw $h(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw oC(t,u,c);gi(t,u)}}catch(i){if(i instanceof Ii)throw i;gi(t,"network-request-failed",{message:String(i)})}}async function U3(t,e,n,r,i={}){const s=await Bl(t,e,n,r,i);return"mfaPendingCredential"in s&&gi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function cC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Yv(t.config,i):`${t.config.apiScheme}://${i}`}class $3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ai(this.auth,"network-request-failed")),B3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $h(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ai(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(t,e){return Bl(t,"POST","/v1/accounts:delete",e)}async function z3(t,e){return Bl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function j3(t,e=!1){const n=on(t),r=await n.getIdToken(e),i=Qv(r);Pe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Mc(eg(i.auth_time)),issuedAtTime:Mc(eg(i.iat)),expirationTime:Mc(eg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function eg(t){return Number(t)*1e3}function Qv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sd("JWT malformed, contained fewer than 3 sections"),null;try{const i=tf(n);return i?JSON.parse(i):(Sd("Failed to decode base64 JWT payload"),null)}catch(i){return Sd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function W3(t){const e=Qv(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ii&&G3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(t){var e;const n=t.auth,r=await t.getIdToken(),i=await hu(t,z3(n,{idToken:r}));Pe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?J3(s.providerUserInfo):[],a=Y3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new uC(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function K3(t){const e=on(t);await of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function J3(t){return t.map(e=>{var{providerId:n}=e,r=qv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q3(t,e){const n=await lC(t,{},async()=>{const r=Fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=cC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",aC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function X3(t,e){return Bl(t,"POST","/v2/accounts:revokeToken",Jv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):W3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Pe(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Q3(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new du;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Pe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new du,this.toJSON())}_performRefresh(){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Lo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=qv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new q3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await hu(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return j3(this,e)}reload(){return K3(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await of(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await hu(this,H3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:w,isAnonymous:S,providerData:I,stsTokenManager:x}=n;Pe(E&&x,e,"internal-error");const O=du.fromJSON(this.name,x);Pe(typeof E=="string",e,"internal-error"),rs(h,e.name),rs(d,e.name),Pe(typeof w=="boolean",e,"internal-error"),Pe(typeof S=="boolean",e,"internal-error"),rs(f,e.name),rs(p,e.name),rs(m,e.name),rs(g,e.name),rs(y,e.name),rs(_,e.name);const k=new Lo({uid:E,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:S,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:O,createdAt:y,lastLoginAt:_});return I&&Array.isArray(I)&&(k.providerData=I.map(B=>Object.assign({},B))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new du;i.updateFromServerResponse(n);const s=new Lo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await of(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;function Di(t){zi(t instanceof Function,"Expected a class definition");let e=EE.get(t);return e?(zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,EE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hC.type="NONE";const TE=hC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t,e,n){return`firebase:${t}:${e}:${n}`}class Wa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Id(this.userKey,i.apiKey,s),this.fullPersistenceKey=Id("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Lo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wa(Di(TE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Di(TE);const o=Id(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Lo._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Wa(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Wa(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gC(e))return"Blackberry";if(yC(e))return"Webos";if(Xv(e))return"Safari";if((e.includes("chrome/")||fC(e))&&!e.includes("edge/"))return"Chrome";if(mC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dC(t=$t()){return/firefox\//i.test(t)}function Xv(t=$t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fC(t=$t()){return/crios\//i.test(t)}function pC(t=$t()){return/iemobile/i.test(t)}function mC(t=$t()){return/android/i.test(t)}function gC(t=$t()){return/blackberry/i.test(t)}function yC(t=$t()){return/webos/i.test(t)}function kp(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Z3(t=$t()){var e;return kp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eL(){return f4()&&document.documentMode===10}function _C(t=$t()){return kp(t)||mC(t)||yC(t)||gC(t)||/windows phone/i.test(t)||pC(t)}function tL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t,e=[]){let n;switch(t){case"Browser":n=wE($t());break;case"Worker":n=`${wE($t())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e={}){return Bl(t,"GET","/v2/passwordPolicy",Jv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=6;class sL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:iL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SE(this),this.idTokenSubscription=new SE(this),this.beforeStateQueue=new nL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Di(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Wa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await of(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?on(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rL(this),n=new sL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await X3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Di(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Wa.create(this,[Di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&P3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Zv(t){return on(t)}class SE{constructor(e){this.auth=e,this.observer=null,this.addObserver=T4(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aL(t){e0=t}function lL(t){return e0.loadJS(t)}function cL(){return e0.gapiScript}function uL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){const n=ZA(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(cu(s,e??{}))return i;gi(i,"already-initialized")}return n.initialize({options:e})}function dL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,n){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,e){return U3(t,"POST","/v1/accounts:signInWithIdp",Jv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="http://localhost";class qo extends bC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):gi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=qv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new qo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ga(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ga(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ga(e,n)}buildRequest(){const e={requestUri:fL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends t0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Qu{constructor(){super("facebook.com")}static credential(e){return qo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qo._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mi.credential(n,r)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends Qu{constructor(){super("github.com")}static credential(e){return qo._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Qu{constructor(){super("twitter.com")}static credential(e,n){return qo._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vs.credential(n,r)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Lo._fromIdTokenResponse(e,r,i),o=IE(r);return new cl({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=IE(r);return new cl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function IE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends Ii{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,af.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new af(e,n,r,i)}}function EC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?af._fromErrorAndOperation(t,s,e,r):s})}async function pL(t,e,n=!1){const r=await hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await hu(t,EC(r,i,e,t),n);Pe(s.idToken,r,"internal-error");const o=Qv(s.idToken);Pe(o,r,"internal-error");const{sub:a}=o;return Pe(t.uid===a,r,"user-mismatch"),cl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&gi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(t,e,n=!1){const r="signIn",i=await EC(t,r,e),s=await cl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function yL(t,e,n,r){return on(t).onIdTokenChanged(e,n,r)}function _L(t){return on(t).signOut()}const lf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lf,"1"),this.storage.removeItem(lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(){const t=$t();return Xv(t)||kp(t)}const bL=1e3,EL=10;class wC extends TC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=vL()&&tL(),this.fallbackToPolling=_C(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);eL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,EL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wC.type="LOCAL";const TL=wC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC extends TC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SC.type="SESSION";const IC=SC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Op(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await wL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Op.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=n0("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return window}function IL(t){li().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function AL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RL(){return AC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="firebaseLocalStorageDb",kL=1,cf="firebaseLocalStorage",RC="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Np(t,e){return t.transaction([cf],e?"readwrite":"readonly").objectStore(cf)}function OL(){const t=indexedDB.deleteDatabase(CC);return new Xu(t).toPromise()}function Fy(){const t=indexedDB.open(CC,kL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cf,{keyPath:RC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cf)?e(r):(r.close(),await OL(),e(await Fy()))})})}async function AE(t,e,n){const r=Np(t,!0).put({[RC]:e,value:n});return new Xu(r).toPromise()}async function NL(t,e){const n=Np(t,!1).get(e),r=await new Xu(n).toPromise();return r===void 0?null:r.value}function CE(t,e){const n=Np(t,!0).delete(e);return new Xu(n).toPromise()}const ML=800,PL=3;class kC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>PL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Op._getInstance(RL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await AL(),!this.activeServiceWorker)return;this.sender=new SL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fy();return await AE(e,lf,"1"),await CE(e,lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>AE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>NL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Np(i,!1).getAll();return new Xu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ML)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kC.type="LOCAL";const xL=kC;new Ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t,e){return e?Di(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends bC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ga(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DL(t){return gL(t.auth,new r0(t),t.bypassAuthState)}function LL(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),mL(n,new r0(t),t.bypassAuthState)}async function VL(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),pL(n,new r0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DL;case"linkViaPopup":case"linkViaRedirect":return VL;case"reauthViaPopup":case"reauthViaRedirect":return LL;default:gi(this.auth,"internal-error")}}resolve(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=new Ju(2e3,1e4);async function BL(t,e,n){const r=Zv(t);x3(t,e,t0);const i=OC(r,n);return new To(r,"signInViaPopup",e,i).executeNotNull()}class To extends NC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){zi(this.filter.length===1,"Popup operations only handle one event");const e=n0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ai(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ai(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ai(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FL.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="pendingRedirect",Ad=new Map;class $L extends NC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ad.get(this.auth._key());if(!e){try{const r=await HL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ad.set(this.auth._key(),e)}return this.bypassAuthState||Ad.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HL(t,e){const n=WL(e),r=jL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function zL(t,e){Ad.set(t._key(),e)}function jL(t){return Di(t._redirectPersistence)}function WL(t){return Id(UL,t.config.apiKey,t.name)}async function GL(t,e,n=!1){const r=Zv(t),i=OC(r,e),o=await new $L(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=10*60*1e3;class KL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!MC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ai(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qL&&this.cachedEventUids.clear(),this.cachedEventUids.has(RE(e))}saveEventToCache(e){this.cachedEventUids.add(RE(e)),this.lastProcessedEventTime=Date.now()}}function RE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL(t,e={}){return Bl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XL=/^https?/;async function ZL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JL(t);for(const n of e)try{if(e6(n))return}catch{}gi(t,"unauthorized-domain")}function e6(t){const e=Vy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!XL.test(n))return!1;if(QL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=new Ju(3e4,6e4);function kE(){const t=li().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function n6(t){return new Promise((e,n)=>{var r,i,s;function o(){kE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kE(),n(ai(t,"network-request-failed"))},timeout:t6.get()})}if(!((i=(r=li().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=li().gapi)===null||s===void 0)&&s.load)o();else{const a=uL("iframefcb");return li()[a]=()=>{gapi.load?o():n(ai(t,"network-request-failed"))},lL(`${cL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Cd=null,e})}let Cd=null;function r6(t){return Cd=Cd||n6(t),Cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new Ju(5e3,15e3),s6="__/auth/iframe",o6="emulator/auth/iframe",a6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c6(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yv(e,o6):`https://${t.config.authDomain}/${s6}`,r={apiKey:e.apiKey,appName:t.name,v:Js},i=l6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Fl(r).slice(1)}`}async function u6(t){const e=await r6(t),n=li().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:c6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ai(t,"network-request-failed"),a=li().setTimeout(()=>{s(o)},i6.get());function l(){li().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d6=500,f6=600,p6="_blank",m6="http://localhost";class OE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g6(t,e,n,r=d6,i=f6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},h6),{width:r.toString(),height:i.toString(),top:s,left:o}),c=$t().toLowerCase();n&&(a=fC(c)?p6:n),dC(c)&&(e=e||m6,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(Z3(c)&&a!=="_self")return y6(e||"",a),new OE(null);const h=window.open(e||"",a,u);Pe(h,t,"popup-blocked");try{h.focus()}catch{}return new OE(h)}function y6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="__/auth/handler",v6="emulator/auth/handler",b6=encodeURIComponent("fac");async function NE(t,e,n,r,i,s){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Js,eventId:i};if(e instanceof t0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ny(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof Qu){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${b6}=${encodeURIComponent(l)}`:"";return`${E6(t)}?${Fl(a).slice(1)}${c}`}function E6({config:t}){return t.emulator?Yv(t,v6):`https://${t.authDomain}/${_6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="webStorageSupport";class T6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IC,this._completeRedirectFn=GL,this._overrideRedirectResult=zL}async _openPopup(e,n,r,i){var s;zi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await NE(e,n,r,Vy(),i);return g6(e,o,n0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await NE(e,n,r,Vy(),i);return IL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await u6(e),r=new KL(e);return n.register("authEvent",i=>(Pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tg,{type:tg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[tg];o!==void 0&&n(!!o),gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _C()||Xv()||kp()}}const w6=T6;var ME="@firebase/auth",PE="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function A6(t){mi(new Ur("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vC(t)},c=new oL(r,i,s,l);return dL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mi(new Ur("auth-internal",e=>{const n=Zv(e.getProvider("auth").getImmediate());return(r=>new S6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(ME,PE,I6(t)),lr(ME,PE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=5*60;c4("authIdTokenMaxAge");function R6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ai("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",R6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});A6("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=new Map,O6={activated:!1,tokenObservers:[]};function $r(t){return k6.get(t)||Object.assign({},O6)}const xE={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new au,this.pending.promise.catch(n=>{}),await M6(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new au,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function M6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},uf=new Vl("appCheck","AppCheck",P6);function PC(t){if(!$r(t).activated)throw uf.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="firebase-app-check-database",D6=1,By="firebase-app-check-store";let Hh=null;function L6(){return Hh||(Hh=new Promise((t,e)=>{try{const n=indexedDB.open(x6,D6);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(uf.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(By,{keyPath:"compositeKey"})}}}catch(n){e(uf.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Hh)}function V6(t,e){return F6(B6(t),e)}async function F6(t,e){const r=(await L6()).transaction(By,"readwrite"),s=r.objectStore(By).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(uf.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function B6(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=new Yu("@firebase/app-check");function DE(t,e){return Wv()?V6(t,e).catch(n=>{Uy.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={error:"UNKNOWN_ERROR"};function $6(t){return Ap.encodeString(JSON.stringify(t),!1)}async function $y(t,e=!1){const n=t.app;PC(n);const r=$r(n);let i=r.token,s;if(i&&!hc(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(hc(l)?i=l:await DE(n,void 0))}if(!e&&i&&hc(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await $r(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Uy.warn(l.message):Uy.error(l),s=l}let a;return i?s?hc(i)?a={token:i.token,internalError:s}:a=VE(s):(a={token:i.token},r.token=i,await DE(n,i)):a=VE(s),o&&W6(n,a),a}async function H6(t){const e=t.app;PC(e);const{provider:n}=$r(e);{const{token:r}=await n.getToken();return{token:r}}}function z6(t,e,n,r){const{app:i}=t,s=$r(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&hc(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),LE(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>LE(t))}function xC(t,e){const n=$r(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function LE(t){const{app:e}=t,n=$r(e);let r=n.tokenRefresher;r||(r=j6(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function j6(t){const{app:e}=t;return new N6(async()=>{const n=$r(e);let r;if(n.token?r=await $y(t,!0):r=await $y(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=$r(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xE.RETRIAL_MIN_WAIT,xE.RETRIAL_MAX_WAIT)}function W6(t,e){const n=$r(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hc(t){return t.expireTimeMillis-Date.now()>0}function VE(t){return{token:$6(U6),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=$r(this.app);for(const n of e)xC(this.app,n.next);return Promise.resolve()}}function q6(t,e){return new G6(t,e)}function K6(t){return{getToken:e=>$y(t,e),getLimitedUseToken:()=>H6(t),addTokenListener:e=>z6(t,"INTERNAL",e),removeTokenListener:e=>xC(t.app,e)}}const Y6="@firebase/app-check",J6="0.8.2",Q6="app-check",FE="app-check-internal";function X6(){mi(new Ur(Q6,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return q6(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(FE).initialize()})),mi(new Ur(FE,t=>{const e=t.getProvider("app-check").getImmediate();return K6(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),lr(Y6,J6)}X6();var Z6="firebase",e5="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(Z6,e5,"app");const DC=Symbol("firebaseApp");function Mp(t){return ca()&&Yn(DC,null)||tC(t)}const Zr=()=>{},t5=typeof window<"u";function i0(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function n5(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,a)=>o&&o[a],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function ua(t){return!!t&&typeof t=="object"}const r5=Object.prototype;function i5(t){return ua(t)&&Object.getPrototypeOf(t)===r5}function s0(t){return ua(t)&&t.type==="document"}function s5(t){return ua(t)&&t.type==="collection"}function o5(t){return s0(t)||s5(t)}function a5(t){return ua(t)&&t.type==="query"}function l5(t){return ua(t)&&"ref"in t}function c5(t){return ua(t)&&typeof t.bucket=="string"}function u5(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const h5=Symbol.for("v-scx");function d5(){return!!Yn(h5,0)}const zh=new WeakMap;function f5(t,e){if(!zh.has(t)){const n=GI(!0);zh.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),zh.delete(t)}}return zh.get(t)}const LC=new WeakMap;function p5(t){return LC.get(Mp(t))}const jh=new WeakMap;function VC(t){const e=Mp(t);if(!jh.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{jh.set(e,s),n(s.value)}];jh.set(e,i)}return jh.get(e)}function Pp(t){const e=VC(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function m5(t,e){yL(e,n=>{const r=VC();t.value=n,Array.isArray(r)&&r[1](t)})}var BE={};const UE="@firebase/database",$E="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FC="";function g5(t){FC=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_n(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:lu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Qi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new y5(e)}}catch{}return new _5},wo=BC("localStorage"),Hy=BC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=new Yu("@firebase/database"),v5=function(){let t=1;return function(){return t++}}(),UC=function(t){const e=A4(t),n=new E4;n.update(e);const r=n.digest();return Ap.encodeByteArray(r)},Zu=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Zu.apply(null,r):typeof r=="object"?e+=_n(r):e+=r,e+=" "}return e};let Vo=null,HE=!0;const b5=function(t,e){ne(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(qa.logLevel=Be.VERBOSE,Vo=qa.log.bind(qa),e&&Hy.set("logging_enabled",!0)):typeof t=="function"?Vo=t:(Vo=null,Hy.remove("logging_enabled"))},Cn=function(...t){if(HE===!0&&(HE=!1,Vo===null&&Hy.get("logging_enabled")===!0&&b5(!0)),Vo){const e=Zu.apply(null,t);Vo(e)}},eh=function(t){return function(...e){Cn(t,...e)}},zy=function(...t){const e="FIREBASE INTERNAL ERROR: "+Zu(...t);qa.error(e)},Ko=function(...t){const e=`FIREBASE FATAL ERROR: ${Zu(...t)}`;throw qa.error(e),new Error(e)},cr=function(...t){const e="FIREBASE WARNING: "+Zu(...t);qa.warn(e)},E5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&cr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$C=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T5=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ul="[MIN_NAME]",Yo="[MAX_NAME]",Ul=function(t,e){if(t===e)return 0;if(t===ul||e===Yo)return-1;if(e===ul||t===Yo)return 1;{const n=zE(t),r=zE(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},w5=function(t,e){return t===e?0:t<e?-1:1},tc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+_n(e))},o0=function(t){if(typeof t!="object"||t===null)return _n(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=_n(e[r]),n+=":",n+=o0(t[e[r]]);return n+="}",n},HC=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ar(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const zC=function(t){ne(!$C(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},S5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},I5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},A5=new RegExp("^-?(0*)\\d{1,10}$"),C5=-2147483648,R5=2147483647,zE=function(t){if(A5.test(t)){const e=Number(t);if(e>=C5&&e<=R5)return e}return null},th=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw cr("Exception was thrown by user callback.",n),e},Math.floor(0))}},k5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Pc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){cr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',cr(e)}}class jy{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}jy.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="5",jC="v",WC="s",GC="r",qC="f",KC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YC="ls",JC="p",Wy="ac",QC="websocket",XC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function P5(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ZC(t,e,n){ne(typeof e=="string","typeof type must == string"),ne(typeof n=="object","typeof params must == object");let r;if(e===QC)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===XC)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);P5(t)&&(n.ns=t.namespace);const i=[];return Ar(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(){this.counters_={}}incrementCounter(e,n=1){Qi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return t4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng={},rg={};function l0(t){const e=t.toString();return ng[e]||(ng[e]=new x5),ng[e]}function D5(t,e){const n=t.toString();return rg[n]||(rg[n]=e()),rg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&th(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="start",V5="close",F5="pLPCommand",B5="pRTLPCB",eR="id",tR="pw",nR="ser",U5="cb",$5="seg",H5="ts",z5="d",j5="dframe",rR=1870,iR=30,W5=rR-iR,G5=25e3,q5=3e4;class Oa{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=eh(e),this.stats_=l0(n),this.urlFn=l=>(this.appCheckToken&&(l[Wy]=this.appCheckToken),ZC(n,XC,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new L5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(q5)),T5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new c0((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===jE)this.id=a,this.password=l;else if(o===V5)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[jE]="t",r[nR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[U5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jC]=a0,this.transportSessionId&&(r[WC]=this.transportSessionId),this.lastSessionId&&(r[YC]=this.lastSessionId),this.applicationId&&(r[JC]=this.applicationId),this.appCheckToken&&(r[Wy]=this.appCheckToken),typeof location<"u"&&location.hostname&&KC.test(location.hostname)&&(r[GC]=qC);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oa.forceAllow_=!0}static forceDisallow(){Oa.forceDisallow_=!0}static isAvailable(){return Oa.forceAllow_?!0:!Oa.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!S5()&&!I5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=_n(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=WA(n),i=HC(r,W5);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[j5]="t",r[eR]=e,r[tR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=_n(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class c0{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=v5(),window[F5+this.uniqueCallbackIdentifier]=e,window[B5+this.uniqueCallbackIdentifier]=n,this.myIFrame=c0.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Cn("frame writing exception"),a.stack&&Cn(a.stack),Cn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Cn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[eR]=this.myID,e[tR]=this.myPW,e[nR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+iR+r.length<=rR;){const o=this.pendingSegs.shift();r=r+"&"+$5+i+"="+o.seg+"&"+H5+i+"="+o.ts+"&"+z5+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(G5)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Cn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=16384,Y5=45e3;let hf=null;typeof MozWebSocket<"u"?hf=MozWebSocket:typeof WebSocket<"u"&&(hf=WebSocket);class Pr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=eh(this.connId),this.stats_=l0(n),this.connURL=Pr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[jC]=a0,typeof location<"u"&&location.hostname&&KC.test(location.hostname)&&(o[GC]=qC),n&&(o[WC]=n),r&&(o[YC]=r),i&&(o[Wy]=i),s&&(o[JC]=s),ZC(e,QC,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wo.set("previous_websocket_failure",!0);try{let r;YA(),this.mySock=new hf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Pr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&hf!==null&&!Pr.forceDisallow_}static previouslyFailed(){return wo.isInMemoryStorage||wo.get("previous_websocket_failure")===!0}markConnectionHealthy(){wo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=lu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=_n(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=HC(n,K5);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Y5))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pr.responsesRequiredToBeHealthy=2;Pr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Oa,Pr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Pr&&Pr.isAvailable();let r=n&&!Pr.previouslyFailed();if(e.webSocketOnly&&(n||cr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Pr];else{const i=this.transports_=[];for(const s of fu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);fu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=6e4,Q5=5e3,X5=10*1024,Z5=100*1024,ig="t",WE="d",eV="s",GE="r",tV="e",qE="o",KE="a",YE="n",JE="p",nV="h";class rV{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=eh("c:"+this.id+":"),this.transportManager_=new fu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Pc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Z5?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>X5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ig in e){const n=e[ig];n===KE?this.upgradeIfSecondaryHealthy_():n===GE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===qE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=tc("t",e),r=tc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:JE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:KE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:YE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=tc("t",e),r=tc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=tc(ig,e);if(WE in e){const r=e[WE];if(n===nV){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===YE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===eV?this.onConnectionShutdown_(r):n===GE?this.onReset_(r):n===tV?zy("Server Error: "+r):n===qE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),a0!==r&&cr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Pc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(J5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Q5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:JE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oR=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends oR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!jv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new df}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=32,XE=768;class Tt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ut(){return new Tt("")}function Ke(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $s(t){return t.pieces_.length-t.pieceNum_}function _t(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Tt(t.pieces_,e)}function aR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function iV(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function lR(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function cR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Tt(e,0)}function tn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Tt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Tt(n,0)}function ze(t){return t.pieceNum_>=t.pieces_.length}function Tr(t,e){const n=Ke(t),r=Ke(e);if(n===null)return e;if(n===r)return Tr(_t(t),_t(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function uR(t,e){if($s(t)!==$s(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Dr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if($s(t)>$s(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class sV{constructor(e,n){this.errorPrefix_=n,this.parts_=lR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Rp(this.parts_[r]);hR(this)}}function oV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Rp(e),hR(t)}function aV(t){const e=t.parts_.pop();t.byteLength_-=Rp(e),t.parts_.length>0&&(t.byteLength_-=1)}function hR(t){if(t.byteLength_>XE)throw new Error(t.errorPrefix_+"has a key path longer than "+XE+" bytes ("+t.byteLength_+").");if(t.parts_.length>QE)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+QE+") or object contains a cycle "+po(t))}function po(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends oR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new u0}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=1e3,lV=60*5*1e3,ZE=30*1e3,cV=1.3,uV=3e4,hV="server_kill",eT=3;class Ui extends sR{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Ui.nextPersistentConnectionId_++,this.log_=eh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=nc,this.maxReconnectDelay_=lV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!YA())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");u0.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&df.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(_n(s)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new au,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Ui.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Qi(e,"w")){const r=ll(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();cr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||b4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ZE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=v4(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+_n(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):zy("Unrecognized action received from server: "+_n(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=nc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uV&&(this.reconnectDelay_=nc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*cV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ui.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){ne(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Cn("getToken() completed but was canceled"):(Cn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new rV(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{cr(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(hV)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&cr(h),l())}}}interrupt(e){Cn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Cn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ny(this.interruptReasons_)&&(this.reconnectDelay_=nc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>o0(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new Tt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Cn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=eT&&(this.reconnectDelay_=ZE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Cn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=eT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+FC.replace(/\./g,"-")]=1,jv()?e["framework.cordova"]=1:KA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=df.getInstance().currentlyOnline();return Ny(this.interruptReasons_)&&e}}Ui.nextPersistentConnectionId_=0;Ui.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ye(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ye(ul,e),i=new Ye(ul,n);return this.compare(r,i)!==0}minPost(){return Ye.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh;class dR extends xp{static get __EMPTY_NODE(){return Wh}static set __EMPTY_NODE(e){Wh=e}compare(e,n){return Ul(e.name,n.name)}isDefinedOn(e){throw Ll("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ye.MIN}maxPost(){return new Ye(Yo,Wh)}makePost(e,n){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Ye(e,Wh)}toString(){return".key"}}const Ka=new dR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ir=class dc{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??dc.RED,this.left=i??ei.EMPTY_NODE,this.right=s??ei.EMPTY_NODE}copy(e,n,r,i,s){return new dc(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ei.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ei.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,dc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,dc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};ir.RED=!0;ir.BLACK=!1;class dV{copy(e,n,r,i,s){return this}insert(e,n,r){return new ir(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ei=class Rd{constructor(e,n=Rd.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Rd(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ir.BLACK,null,null))}remove(e){return new Rd(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ir.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Gh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Gh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Gh(this.root_,null,this.comparator_,!0,e)}};ei.EMPTY_NODE=new dV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t,e){return Ul(t.name,e.name)}function h0(t,e){return Ul(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gy;function pV(t){Gy=t}const fR=function(t){return typeof t=="number"?"number:"+zC(t):"string:"+t},pR=function(t){if(t.isLeafNode()){const e=t.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Qi(e,".sv"),"Priority must be a string or number.")}else ne(t===Gy||t.isEmpty(),"priority of unexpected type.");ne(t===Gy||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tT;class Qt{constructor(e,n=Qt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),pR(this.priorityNode_)}static set __childrenNodeConstructor(e){tT=e}static get __childrenNodeConstructor(){return tT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:Ke(e)===".priority"?this.priorityNode_:Qt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Qt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ke(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ne(r!==".priority"||$s(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Qt.__childrenNodeConstructor.EMPTY_NODE.updateChild(_t(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=zC(this.value_):e+=this.value_,this.lazyHash_=UC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qt.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Qt.VALUE_TYPE_ORDER.indexOf(n),s=Qt.VALUE_TYPE_ORDER.indexOf(r);return ne(i>=0,"Unknown leaf type: "+n),ne(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Qt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mR,gR;function mV(t){mR=t}function gV(t){gR=t}class yV extends xp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Ul(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ye.MIN}maxPost(){return new Ye(Yo,new Qt("[PRIORITY-POST]",gR))}makePost(e,n){const r=mR(e);return new Ye(n,new Qt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Mn=new yV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=Math.log(2);class vV{constructor(e){const n=s=>parseInt(Math.log(s)/_V,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ff=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new ir(d,h.node,ir.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),m=i(f+1,c);return h=t[f],d=n?n(h):h,new ir(d,h.node,ir.BLACK,p,m)}},s=function(l){let c=null,u=null,h=t.length;const d=function(p,m){const g=h-p,y=h;h-=p;const _=i(g+1,y),E=t[g],w=n?n(E):E;f(new ir(w,E.node,m,null,_))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));m?d(g,ir.BLACK):(d(g,ir.BLACK),d(g,ir.RED))}return u},o=new vV(t.length),a=s(o);return new ei(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg;const ya={};class Li{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ne(ya&&Mn,"ChildrenNode.ts has not been loaded"),sg=sg||new Li({".priority":ya},{".priority":Mn}),sg}get(e){const n=ll(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ei?n:null}hasIndex(e){return Qi(this.indexSet_,e.toString())}addIndex(e,n){ne(e!==Ka,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ye.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=ff(r,e.getCompare()):a=ya;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Li(u,c)}addToIndexes(e,n){const r=nf(this.indexes_,(i,s)=>{const o=ll(this.indexSet_,s);if(ne(o,"Missing index implementation for "+s),i===ya)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Ye.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),ff(a,o.getCompare())}else return ya;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Ye(e.name,a))),l.insert(e,e.node)}});return new Li(r,this.indexSet_)}removeFromIndexes(e,n){const r=nf(this.indexes_,i=>{if(i===ya)return i;{const s=n.get(e.name);return s?i.remove(new Ye(e.name,s)):i}});return new Li(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc;class nt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&pR(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rc||(rc=new nt(new ei(h0),null,Li.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rc}updatePriority(e){return this.children_.isEmpty()?this:new nt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?rc:n}}getChild(e){const n=Ke(e);return n===null?this:this.getImmediateChild(n).getChild(_t(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ye(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?rc:this.priorityNode_;return new nt(i,o,s)}}updateChild(e,n){const r=Ke(e);if(r===null)return n;{ne(Ke(e)!==".priority"||$s(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(_t(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Mn,(o,a)=>{n[o]=a.val(e),r++,s&&nt.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+fR(this.getPriority().val())+":"),this.forEachChild(Mn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":UC(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ye(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ye(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ye(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ye.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ye.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===nh?-1:0}withIndex(e){if(e===Ka||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new nt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ka||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Mn),i=n.getIterator(Mn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ka?null:this.indexMap_.get(e.toString())}}nt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class bV extends nt{constructor(){super(new ei(h0),nt.EMPTY_NODE,Li.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nt.EMPTY_NODE}isEmpty(){return!1}}const nh=new bV;Object.defineProperties(Ye,{MIN:{value:new Ye(ul,nt.EMPTY_NODE)},MAX:{value:new Ye(Yo,nh)}});dR.__EMPTY_NODE=nt.EMPTY_NODE;Qt.__childrenNodeConstructor=nt;pV(nh);gV(nh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=!0;function Rn(t,e=null){if(t===null)return nt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Qt(n,Rn(e))}if(!(t instanceof Array)&&EV){const n=[];let r=!1;if(Ar(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Rn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Ye(o,l)))}}),n.length===0)return nt.EMPTY_NODE;const s=ff(n,fV,o=>o.name,h0);if(r){const o=ff(n,Mn.getCompare());return new nt(s,Rn(e),new Li({".priority":o},{".priority":Mn}))}else return new nt(s,Rn(e),Li.Default)}else{let n=nt.EMPTY_NODE;return Ar(t,(r,i)=>{if(Qi(t,r)&&r.substring(0,1)!=="."){const s=Rn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Rn(e))}}mV(Rn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV extends xp{constructor(e){super(),this.indexPath_=e,ne(!ze(e)&&Ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Ul(e.name,n.name):s}makePost(e,n){const r=Rn(e),i=nt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ye(n,i)}maxPost(){const e=nt.EMPTY_NODE.updateChild(this.indexPath_,nh);return new Ye(Yo,e)}toString(){return lR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV extends xp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ul(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ye.MIN}maxPost(){return Ye.MAX}makePost(e,n){const r=Rn(e);return new Ye(n,r)}toString(){return".value"}}const SV=new wV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){return{type:"value",snapshotNode:t}}function AV(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function CV(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function nT(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function RV(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ul}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mn}copy(){const e=new d0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Mn?n="$priority":t.index_===SV?n="$value":t.index_===Ka?n="$key":(ne(t.index_ instanceof TV,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=_n(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=_n(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+_n(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=_n(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+_n(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function iT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Mn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends sR{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=eh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=pf.getListenId_(e,r),a={};this.listens_[o]=a;const l=rT(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,r),ll(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",i(d,null)}})}unlisten(e,n){const r=pf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=rT(e._queryParams),r=e._path.toString(),i=new au;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Fl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=lu(a.responseText)}catch{cr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&cr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.rootNode_=nt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(){return{value:null,children:new Map}}function yR(t,e,n){if(ze(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ke(e);t.children.has(r)||t.children.set(r,mf());const i=t.children.get(r);e=_t(e),yR(i,e,n)}}function qy(t,e,n){t.value!==null?n(e,t.value):OV(t,(r,i)=>{const s=new Tt(e.toString()+"/"+r);qy(i,s,n)})}function OV(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ar(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=10*1e3,MV=30*1e3,PV=5*60*1e3;class xV{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new NV(e);const r=sT+(MV-sT)*Math.random();Pc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ar(e,(i,s)=>{s>0&&Qi(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Pc(this.reportStats_.bind(this),Math.floor(Math.random()*2*PV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ti;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ti||(ti={}));function _R(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function vR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function bR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ti.ACK_USER_WRITE,this.source=_R()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Tt(e));return new gf(ut(),n,this.revert)}}else return ne(Ke(this.path)===e,"operationForChild called for unrelated child."),new gf(_t(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ti.OVERWRITE}operationForChild(e){return ze(this.path)?new Jo(this.source,ut(),this.snap.getImmediateChild(e)):new Jo(this.source,_t(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ti.MERGE}operationForChild(e){if(ze(this.path)){const n=this.children.subtree(new Tt(e));return n.isEmpty()?null:n.value?new Jo(this.source,ut(),n.value):new pu(this.source,ut(),n)}else return ne(Ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pu(this.source,_t(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ke(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function DV(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(RV(o.childName,o.snapshotNode))}),ic(t,i,"child_removed",e,r,n),ic(t,i,"child_added",e,r,n),ic(t,i,"child_moved",s,r,n),ic(t,i,"child_changed",e,r,n),ic(t,i,"value",e,r,n),i}function ic(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>VV(t,a,l)),o.forEach(a=>{const l=LV(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function LV(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function VV(t,e,n){if(e.childName==null||n.childName==null)throw Ll("Should only compare child_ events.");const r=new Ye(e.childName,e.snapshotNode),i=new Ye(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t,e){return{eventCache:t,serverCache:e}}function xc(t,e,n,r){return ER(new f0(e,n,r),t.serverCache)}function TR(t,e,n,r){return ER(t.eventCache,new f0(e,n,r))}function Ky(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og;const FV=()=>(og||(og=new ei(w5)),og);class gt{constructor(e,n=FV()){this.value=e,this.children=n}static fromObject(e){let n=new gt(null);return Ar(e,(r,i)=>{n=n.set(new Tt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ut(),value:this.value};if(ze(e))return null;{const r=Ke(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(_t(e),n);return s!=null?{path:tn(new Tt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const n=Ke(e),r=this.children.get(n);return r!==null?r.subtree(_t(e)):new gt(null)}}set(e,n){if(ze(e))return new gt(n,this.children);{const r=Ke(e),s=(this.children.get(r)||new gt(null)).set(_t(e),n),o=this.children.insert(r,s);return new gt(this.value,o)}}remove(e){if(ze(e))return this.children.isEmpty()?new gt(null):new gt(null,this.children);{const n=Ke(e),r=this.children.get(n);if(r){const i=r.remove(_t(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new gt(null):new gt(this.value,s)}else return this}}get(e){if(ze(e))return this.value;{const n=Ke(e),r=this.children.get(n);return r?r.get(_t(e)):null}}setTree(e,n){if(ze(e))return n;{const r=Ke(e),s=(this.children.get(r)||new gt(null)).setTree(_t(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new gt(this.value,o)}}fold(e){return this.fold_(ut(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(tn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ut(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(ze(e))return null;{const s=Ke(e),o=this.children.get(s);return o?o.findOnPath_(_t(e),tn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ut(),n)}foreachOnPath_(e,n,r){if(ze(e))return this;{this.value&&r(n,this.value);const i=Ke(e),s=this.children.get(i);return s?s.foreachOnPath_(_t(e),tn(n,i),r):new gt(null)}}foreach(e){this.foreach_(ut(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(tn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.writeTree_=e}static empty(){return new Fr(new gt(null))}}function Dc(t,e,n){if(ze(e))return new Fr(new gt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Tr(i,e);return s=s.updateChild(o,n),new Fr(t.writeTree_.set(i,s))}else{const i=new gt(n),s=t.writeTree_.setTree(e,i);return new Fr(s)}}}function oT(t,e,n){let r=t;return Ar(n,(i,s)=>{r=Dc(r,tn(e,i),s)}),r}function aT(t,e){if(ze(e))return Fr.empty();{const n=t.writeTree_.setTree(e,new gt(null));return new Fr(n)}}function Yy(t,e){return ha(t,e)!=null}function ha(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Tr(n.path,e)):null}function lT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Mn,(r,i)=>{e.push(new Ye(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ye(r,i.value))}),e}function Ms(t,e){if(ze(e))return t;{const n=ha(t,e);return n!=null?new Fr(new gt(n)):new Fr(t.writeTree_.subtree(e))}}function Jy(t){return t.writeTree_.isEmpty()}function hl(t,e){return wR(ut(),t.writeTree_,e)}function wR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ne(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=wR(tn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(tn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t,e){return kR(e,t)}function BV(t,e,n,r,i){ne(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Dc(t.visibleWrites,e,n)),t.lastWriteId=r}function UV(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function $V(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ne(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&HV(a,r.path)?i=!1:Dr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return zV(t),!0;if(r.snap)t.visibleWrites=aT(t.visibleWrites,r.path);else{const a=r.children;Ar(a,l=>{t.visibleWrites=aT(t.visibleWrites,tn(r.path,l))})}return!0}else return!1}function HV(t,e){if(t.snap)return Dr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Dr(tn(t.path,n),e))return!0;return!1}function zV(t){t.visibleWrites=IR(t.allWrites,jV,ut()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function jV(t){return t.visible}function IR(t,e,n){let r=Fr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Dr(n,o)?(a=Tr(n,o),r=Dc(r,a,s.snap)):Dr(o,n)&&(a=Tr(o,n),r=Dc(r,ut(),s.snap.getChild(a)));else if(s.children){if(Dr(n,o))a=Tr(n,o),r=oT(r,a,s.children);else if(Dr(o,n))if(a=Tr(o,n),ze(a))r=oT(r,ut(),s.children);else{const l=ll(s.children,Ke(a));if(l){const c=l.getChild(_t(a));r=Dc(r,ut(),c)}}}else throw Ll("WriteRecord should have .snap or .children")}}return r}function AR(t,e,n,r,i){if(!r&&!i){const s=ha(t.visibleWrites,e);if(s!=null)return s;{const o=Ms(t.visibleWrites,e);if(Jy(o))return n;if(n==null&&!Yy(o,ut()))return null;{const a=n||nt.EMPTY_NODE;return hl(o,a)}}}else{const s=Ms(t.visibleWrites,e);if(!i&&Jy(s))return n;if(!i&&n==null&&!Yy(s,ut()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Dr(c.path,e)||Dr(e,c.path))},a=IR(t.allWrites,o,e),l=n||nt.EMPTY_NODE;return hl(a,l)}}}function WV(t,e,n){let r=nt.EMPTY_NODE;const i=ha(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Mn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ms(t.visibleWrites,e);return n.forEachChild(Mn,(o,a)=>{const l=hl(Ms(s,new Tt(o)),a);r=r.updateImmediateChild(o,l)}),lT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Ms(t.visibleWrites,e);return lT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function GV(t,e,n,r,i){ne(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=tn(e,n);if(Yy(t.visibleWrites,s))return null;{const o=Ms(t.visibleWrites,s);return Jy(o)?i.getChild(n):hl(o,i.getChild(n))}}function qV(t,e,n,r){const i=tn(e,n),s=ha(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Ms(t.visibleWrites,i);return hl(o,r.getNode().getImmediateChild(n))}else return null}function KV(t,e){return ha(t.visibleWrites,e)}function YV(t,e,n,r,i,s,o){let a;const l=Ms(t.visibleWrites,e),c=ha(l,ut());if(c!=null)a=c;else if(n!=null)a=hl(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&u.length<i;)h(f,r)!==0&&u.push(f),f=d.getNext();return u}else return[]}function JV(){return{visibleWrites:Fr.empty(),allWrites:[],lastWriteId:-1}}function Qy(t,e,n,r){return AR(t.writeTree,t.treePath,e,n,r)}function CR(t,e){return WV(t.writeTree,t.treePath,e)}function cT(t,e,n,r){return GV(t.writeTree,t.treePath,e,n,r)}function yf(t,e){return KV(t.writeTree,tn(t.treePath,e))}function QV(t,e,n,r,i,s){return YV(t.writeTree,t.treePath,e,n,r,i,s)}function p0(t,e,n){return qV(t.writeTree,t.treePath,e,n)}function RR(t,e){return kR(tn(t.treePath,e),t.writeTree)}function kR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ne(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,nT(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,CV(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,AV(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,nT(r,e.snapshotNode,i.oldSnap));else throw Ll("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const OR=new ZV;class m0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new f0(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return p0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Qo(this.viewCache_),s=QV(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function e9(t,e){ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function t9(t,e,n,r,i){const s=new XV;let o,a;if(n.type===ti.OVERWRITE){const c=n;c.source.fromUser?o=Xy(t,e,c.path,c.snap,r,i,s):(ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ze(c.path),o=_f(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===ti.MERGE){const c=n;c.source.fromUser?o=r9(t,e,c.path,c.children,r,i,s):(ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Zy(t,e,c.path,c.children,r,i,a,s))}else if(n.type===ti.ACK_USER_WRITE){const c=n;c.revert?o=o9(t,e,c.path,r,i,s):o=i9(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===ti.LISTEN_COMPLETE)o=s9(t,e,n.path,r,s);else throw Ll("Unknown operation type: "+n.type);const l=s.getChanges();return n9(e,o,l),{viewCache:o,changes:l}}function n9(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ky(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(IV(Ky(e)))}}function NR(t,e,n,r,i,s){const o=e.eventCache;if(yf(r,n)!=null)return e;{let a,l;if(ze(n))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Qo(e),u=c instanceof nt?c:nt.EMPTY_NODE,h=CR(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=Qy(r,Qo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ke(n);if(c===".priority"){ne($s(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=cT(r,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=_t(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=cT(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=p0(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,i,s):a=o.getNode()}}return xc(e,a,o.isFullyInitialized()||ze(n),t.filter.filtersNodes())}}function _f(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(ze(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Ke(n);if(!l.isCompleteForPath(n)&&$s(n)>1)return e;const p=_t(n),g=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),f,g,p,OR,null)}const h=TR(e,c,l.isFullyInitialized()||ze(n),u.filtersNodes()),d=new m0(i,h,s);return NR(t,h,n,i,d,a)}function Xy(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new m0(i,e,s);if(ze(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=xc(e,c,!0,t.filter.filtersNodes());else{const h=Ke(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=xc(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=_t(n),f=a.getNode().getImmediateChild(h);let p;if(ze(d))p=r;else{const m=u.getCompleteChild(h);m!=null?aR(d)===".priority"&&m.getChild(cR(d)).isEmpty()?p=m:p=m.updateChild(d,r):p=nt.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=xc(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function uT(t,e){return t.eventCache.isCompleteForChild(e)}function r9(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=tn(n,l);uT(e,Ke(u))&&(a=Xy(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=tn(n,l);uT(e,Ke(u))||(a=Xy(t,a,u,c,i,s,o))}),a}function hT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Zy(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ze(n)?c=r:c=new gt(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=hT(t,f,d);l=_f(t,l,new Tt(h),p,i,s,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),m=hT(t,p,d);l=_f(t,l,new Tt(h),m,i,s,o,a)}}),l}function i9(t,e,n,r,i,s,o){if(yf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(ze(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return _f(t,e,n,l.getNode().getChild(n),i,s,a,o);if(ze(n)){let c=new gt(null);return l.getNode().forEachChild(Ka,(u,h)=>{c=c.set(new Tt(u),h)}),Zy(t,e,n,c,i,s,a,o)}else return e}else{let c=new gt(null);return r.foreach((u,h)=>{const d=tn(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),Zy(t,e,n,c,i,s,a,o)}}function s9(t,e,n,r,i){const s=e.serverCache,o=TR(e,s.getNode(),s.isFullyInitialized()||ze(n),s.isFiltered());return NR(t,o,n,r,OR,i)}function o9(t,e,n,r,i,s){let o;if(yf(r,n)!=null)return e;{const a=new m0(r,e,i),l=e.eventCache.getNode();let c;if(ze(n)||Ke(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Qy(r,Qo(e));else{const h=e.serverCache.getNode();ne(h instanceof nt,"serverChildren would be complete if leaf node"),u=CR(r,h)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Ke(n);let h=p0(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,_t(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,nt.EMPTY_NODE,_t(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Qy(r,Qo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||yf(r,ut())!=null,xc(e,c,o,t.filter.filtersNodes())}}function a9(t,e){const n=Qo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ze(e)&&!n.getImmediateChild(Ke(e)).isEmpty())?n.getChild(e):null}function dT(t,e,n,r){e.type===ti.MERGE&&e.source.queryId!==null&&(ne(Qo(t.viewCache_),"We should always have a full cache before handling merges"),ne(Ky(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=t9(t.processor_,i,e,n,r);return e9(t.processor_,s.viewCache),ne(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,l9(t,s.changes,s.viewCache.eventCache.getNode(),null)}function l9(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return DV(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fT;function c9(t){ne(!fT,"__referenceConstructor has already been defined"),fT=t}function g0(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ne(s!=null,"SyncTree gave us an op for an invalid query."),dT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(dT(o,e,n,r));return s}}function y0(t,e){let n=null;for(const r of t.views.values())n=n||a9(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pT;function u9(t){ne(!pT,"__referenceConstructor has already been defined"),pT=t}class mT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new gt(null),this.pendingWriteTree_=JV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function h9(t,e,n,r,i){return BV(t.pendingWriteTree_,e,n,r,i),i?Lp(t,new Jo(_R(),e,n)):[]}function Na(t,e,n=!1){const r=UV(t.pendingWriteTree_,e);if($V(t.pendingWriteTree_,e)){let s=new gt(null);return r.snap!=null?s=s.set(ut(),!0):Ar(r.children,o=>{s=s.set(new Tt(o),!0)}),Lp(t,new gf(r.path,s,n))}else return[]}function Dp(t,e,n){return Lp(t,new Jo(vR(),e,n))}function d9(t,e,n){const r=gt.fromObject(n);return Lp(t,new pu(vR(),e,r))}function f9(t,e,n,r){const i=DR(t,r);if(i!=null){const s=LR(i),o=s.path,a=s.queryId,l=Tr(o,e),c=new Jo(bR(a),l,n);return VR(t,o,c)}else return[]}function p9(t,e,n,r){const i=DR(t,r);if(i){const s=LR(i),o=s.path,a=s.queryId,l=Tr(o,e),c=gt.fromObject(n),u=new pu(bR(a),l,c);return VR(t,o,u)}else return[]}function MR(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Tr(o,e),c=y0(a,l);if(c)return c});return AR(i,e,s,n,!0)}function Lp(t,e){return PR(e,t.syncPointTree_,null,SR(t.pendingWriteTree_,ut()))}function PR(t,e,n,r){if(ze(t.path))return xR(t,e,n,r);{const i=e.get(ut());n==null&&i!=null&&(n=y0(i,ut()));let s=[];const o=Ke(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=RR(r,o);s=s.concat(PR(a,l,c,u))}return i&&(s=s.concat(g0(i,t,r,n))),s}}function xR(t,e,n,r){const i=e.get(ut());n==null&&i!=null&&(n=y0(i,ut()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=RR(r,o),u=t.operationForChild(o);u&&(s=s.concat(xR(u,a,l,c)))}),i&&(s=s.concat(g0(i,t,r,n))),s}function DR(t,e){return t.tagToQueryMap.get(e)}function LR(t){const e=t.indexOf("$");return ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Tt(t.substr(0,e))}}function VR(t,e,n){const r=t.syncPointTree_.get(e);ne(r,"Missing sync point for query tag that we're tracking");const i=SR(t.pendingWriteTree_,e);return g0(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new _0(n)}node(){return this.node_}}class v0{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=tn(this.path_,e);return new v0(this.syncTree_,n)}node(){return MR(this.syncTree_,this.path_)}}const m9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gT=function(t,e,n){if(!t||typeof t!="object")return t;if(ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return g9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return y9(t[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},g9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ne(!1,"Unexpected server value: "+t)}},y9=function(t,e,n){t.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ne(!1,"Unexpected increment value: "+r);const i=e.node();if(ne(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},_9=function(t,e,n,r){return b0(e,new v0(n,t),r)},v9=function(t,e,n){return b0(t,new _0(e),n)};function b0(t,e,n){const r=t.getPriority().val(),i=gT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=gT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Qt(a,Rn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Qt(i))),o.forEachChild(Mn,(a,l)=>{const c=b0(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function T0(t,e){let n=e instanceof Tt?e:new Tt(e),r=t,i=Ke(n);for(;i!==null;){const s=ll(r.node.children,i)||{children:{},childCount:0};r=new E0(i,r,s),n=_t(n),i=Ke(n)}return r}function $l(t){return t.node.value}function FR(t,e){t.node.value=e,e_(t)}function BR(t){return t.node.childCount>0}function b9(t){return $l(t)===void 0&&!BR(t)}function Vp(t,e){Ar(t.node.children,(n,r)=>{e(new E0(n,t,r))})}function UR(t,e,n,r){n&&!r&&e(t),Vp(t,i=>{UR(i,e,!0,r)}),n&&r&&e(t)}function E9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function rh(t){return new Tt(t.parent===null?t.name:rh(t.parent)+"/"+t.name)}function e_(t){t.parent!==null&&T9(t.parent,t.name,t)}function T9(t,e,n){const r=b9(n),i=Qi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,e_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,e_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=/[\[\].#$\/\u0000-\u001F\u007F]/,S9=/[\[\].#$\u0000-\u001F\u007F]/,ag=10*1024*1024,$R=function(t){return typeof t=="string"&&t.length!==0&&!w9.test(t)},I9=function(t){return typeof t=="string"&&t.length!==0&&!S9.test(t)},A9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),I9(t)},HR=function(t,e,n){const r=n instanceof Tt?new sV(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+po(r));if(typeof e=="function")throw new Error(t+"contains a function "+po(r)+" with contents = "+e.toString());if($C(e))throw new Error(t+"contains "+e.toString()+" "+po(r));if(typeof e=="string"&&e.length>ag/3&&Rp(e)>ag)throw new Error(t+"contains a string greater than "+ag+" utf8 bytes "+po(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ar(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!$R(o)))throw new Error(t+" contains an invalid key ("+o+") "+po(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);oV(r,o),HR(t,a,r),aV(r)}),i&&s)throw new Error(t+' contains ".value" child '+po(r)+" in addition to actual children.")}},C9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!$R(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!A9(n))throw new Error(I4(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function k9(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!uR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function da(t,e,n){k9(t,n),O9(t,r=>Dr(r,e)||Dr(e,r))}function O9(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(N9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function N9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Vo&&Cn("event: "+n.toString()),th(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="repo_interrupt",P9=25;class x9{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new R9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mf(),this.transactionQueueTree_=new E0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function D9(t,e,n){if(t.stats_=l0(t.repoInfo_),t.forceRestClient_||k5())t.server_=new pf(t.repoInfo_,(r,i,s,o)=>{yT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>_T(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_n(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ui(t.repoInfo_,e,(r,i,s,o)=>{yT(t,r,i,s,o)},r=>{_T(t,r)},r=>{V9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=D5(t.repoInfo_,()=>new xV(t.stats_,t.server_)),t.infoData_=new kV,t.infoSyncTree_=new mT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Dp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),w0(t,"connected",!1),t.serverSyncTree_=new mT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);da(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function L9(t){const n=t.infoData_.getNode(new Tt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function zR(t){return m9({timestamp:L9(t)})}function yT(t,e,n,r,i){t.dataUpdateCount++;const s=new Tt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=nf(n,c=>Rn(c));o=p9(t.serverSyncTree_,s,l,i)}else{const l=Rn(n);o=f9(t.serverSyncTree_,s,l,i)}else if(r){const l=nf(n,c=>Rn(c));o=d9(t.serverSyncTree_,s,l)}else{const l=Rn(n);o=Dp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=I0(t,s)),da(t.eventQueue_,a,o)}function _T(t,e){w0(t,"connected",e),e===!1&&B9(t)}function V9(t,e){Ar(e,(n,r)=>{w0(t,n,r)})}function w0(t,e,n){const r=new Tt("/.info/"+e),i=Rn(n);t.infoData_.updateSnapshot(r,i);const s=Dp(t.infoSyncTree_,r,i);da(t.eventQueue_,r,s)}function F9(t){return t.nextWriteId_++}function B9(t){jR(t,"onDisconnectEvents");const e=zR(t),n=mf();qy(t.onDisconnect_,ut(),(i,s)=>{const o=_9(i,s,t.serverSyncTree_,e);yR(n,i,o)});let r=[];qy(n,ut(),(i,s)=>{r=r.concat(Dp(t.serverSyncTree_,i,s));const o=z9(t,i);I0(t,o)}),t.onDisconnect_=mf(),da(t.eventQueue_,ut(),r)}function U9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(M9)}function jR(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Cn(n,...e)}function WR(t,e,n){return MR(t.serverSyncTree_,e,n)||nt.EMPTY_NODE}function S0(t,e=t.transactionQueueTree_){if(e||Fp(t,e),$l(e)){const n=qR(t,e);ne(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&$9(t,rh(e),n)}else BR(e)&&Vp(e,n=>{S0(t,n)})}function $9(t,e,n){const r=n.map(c=>c.currentWriteId),i=WR(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];ne(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Tr(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{jR(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Na(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Fp(t,T0(t.transactionQueueTree_,e)),S0(t,t.transactionQueueTree_),da(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)th(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{cr("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}I0(t,e)}},o)}function I0(t,e){const n=GR(t,e),r=rh(n),i=qR(t,n);return H9(t,i,r),r}function H9(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Tr(n,l.path);let u=!1,h;if(ne(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(Na(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=P9)u=!0,h="maxretry",i=i.concat(Na(t.serverSyncTree_,l.currentWriteId,!0));else{const d=WR(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){HR("transaction failed: Data returned ",f,l.path);let p=Rn(f);typeof f=="object"&&f!=null&&Qi(f,".priority")||(p=p.updatePriority(d.getPriority()));const g=l.currentWriteId,y=zR(t),_=v9(p,d,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=_,l.currentWriteId=F9(t),o.splice(o.indexOf(g),1),i=i.concat(h9(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(Na(t.serverSyncTree_,g,!0))}else u=!0,h="nodata",i=i.concat(Na(t.serverSyncTree_,l.currentWriteId,!0))}da(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Fp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)th(r[a]);S0(t,t.transactionQueueTree_)}function GR(t,e){let n,r=t.transactionQueueTree_;for(n=Ke(e);n!==null&&$l(r)===void 0;)r=T0(r,n),e=_t(e),n=Ke(e);return r}function qR(t,e){const n=[];return KR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function KR(t,e,n){const r=$l(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Vp(e,i=>{KR(t,i,n)})}function Fp(t,e){const n=$l(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,FR(e,n.length>0?n:void 0)}Vp(e,r=>{Fp(t,r)})}function z9(t,e){const n=rh(GR(t,e)),r=T0(t.transactionQueueTree_,e);return E9(r,i=>{lg(t,i)}),lg(t,r),UR(r,i=>{lg(t,i)}),n}function lg(t,e){const n=$l(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ne(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ne(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Na(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?FR(e,void 0):n.length=s+1,da(t.eventQueue_,rh(e),i);for(let o=0;o<r.length;o++)th(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function W9(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):cr(`Invalid query segment '${n}' in query '${t}'`)}return e}const vT=function(t,e){const n=G9(t),r=n.namespace;n.domain==="firebase.com"&&Ko(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ko("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||E5();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new M5(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Tt(n.pathString)}},G9=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=j9(t.substring(u,h)));const d=W9(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ze(this._path)?null:aR(this._path)}get ref(){return new Hl(this._repo,this._path)}get _queryIdentifier(){const e=iT(this._queryParams),n=o0(e);return n==="{}"?"default":n}get _queryObject(){return iT(this._queryParams)}isEqual(e){if(e=on(e),!(e instanceof A0))return!1;const n=this._repo===e._repo,r=uR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+iV(this._path)}}class Hl extends A0{constructor(e,n){super(e,n,new d0,!1)}get parent(){const e=cR(this._path);return e===null?null:new Hl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}c9(Hl);u9(Hl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="FIREBASE_DATABASE_EMULATOR_HOST",t_={};let K9=!1;function Y9(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Ko("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Cn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=vT(s,i),a=o.repoInfo,l,c;typeof process<"u"&&BE&&(c=BE[q9]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=vT(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new jy(jy.OWNER):new N5(t.name,t.options,e);C9("Invalid Firebase Database URL",o),ze(o.path)||Ko("Database URL must point to the root of a Firebase Database (not including a child path).");const h=Q9(a,t,u,new O5(t.name,n));return new X9(h,t)}function J9(t,e){const n=t_[e];(!n||n[t.key]!==t)&&Ko(`Database ${e}(${t.repoInfo_}) has already been deleted.`),U9(t),delete n[t.key]}function Q9(t,e,n,r){let i=t_[e.name];i||(i={},t_[e.name]=i);let s=i[t.toURLString()];return s&&Ko("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new x9(t,K9,n,r),i[t.toURLString()]=s,s}class X9{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(D9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hl(this._repo,ut())),this._rootInternal}_delete(){return this._rootInternal!==null&&(J9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ko("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t){g5(Js),mi(new Ur("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Y9(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),lr(UE,$E,t),lr(UE,$E,"esm2017")}Ui.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ui.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Z9();var eF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},re,C0=C0||{},Ce=eF||self;function Bp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ih(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function tF(t){return Object.prototype.hasOwnProperty.call(t,cg)&&t[cg]||(t[cg]=++nF)}var cg="closure_uid_"+(1e9*Math.random()>>>0),nF=0;function rF(t,e,n){return t.call.apply(t.bind,arguments)}function iF(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Pn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Pn=rF:Pn=iF,Pn.apply(null,arguments)}function qh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function cn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Qs(){this.s=this.s,this.o=this.o}var sF=0;Qs.prototype.s=!1;Qs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),sF!=0)&&tF(this)};Qs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const YR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function R0(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function bT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Bp(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function xn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}xn.prototype.h=function(){this.defaultPrevented=!0};var oF=function(){if(!Ce.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Ce.addEventListener("test",n,e),Ce.removeEventListener("test",n,e)}catch{}return t}();function mu(t){return/^[\s\xa0]*$/.test(t)}function Up(){var t=Ce.navigator;return t&&(t=t.userAgent)?t:""}function Qr(t){return Up().indexOf(t)!=-1}function k0(t){return k0[" "](t),t}k0[" "]=function(){};function aF(t,e){var n=ZF;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var lF=Qr("Opera"),dl=Qr("Trident")||Qr("MSIE"),JR=Qr("Edge"),n_=JR||dl,QR=Qr("Gecko")&&!(Up().toLowerCase().indexOf("webkit")!=-1&&!Qr("Edge"))&&!(Qr("Trident")||Qr("MSIE"))&&!Qr("Edge"),cF=Up().toLowerCase().indexOf("webkit")!=-1&&!Qr("Edge");function XR(){var t=Ce.document;return t?t.documentMode:void 0}var r_;e:{var ug="",hg=function(){var t=Up();if(QR)return/rv:([^\);]+)(\)|;)/.exec(t);if(JR)return/Edge\/([\d\.]+)/.exec(t);if(dl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(cF)return/WebKit\/(\S+)/.exec(t);if(lF)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(hg&&(ug=hg?hg[1]:""),dl){var dg=XR();if(dg!=null&&dg>parseFloat(ug)){r_=String(dg);break e}}r_=ug}var i_;if(Ce.document&&dl){var ET=XR();i_=ET||parseInt(r_,10)||void 0}else i_=void 0;var uF=i_;function gu(t,e){if(xn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(QR){e:{try{k0(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:hF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&gu.$.h.call(this)}}cn(gu,xn);var hF={2:"touch",3:"pen",4:"mouse"};gu.prototype.h=function(){gu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var sh="closure_listenable_"+(1e6*Math.random()|0),dF=0;function fF(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++dF,this.fa=this.ia=!1}function $p(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function O0(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function pF(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function ZR(t){const e={};for(const n in t)e[n]=t[n];return e}const TT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ek(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<TT.length;s++)n=TT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Hp(t){this.src=t,this.g={},this.h=0}Hp.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=o_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new fF(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function s_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=YR(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&($p(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function o_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var N0="closure_lm_"+(1e6*Math.random()|0),fg={};function tk(t,e,n,r,i){if(r&&r.once)return rk(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)tk(t,e[s],n,r,i);return null}return n=x0(n),t&&t[sh]?t.O(e,n,ih(r)?!!r.capture:!!r,i):nk(t,e,n,!1,r,i)}function nk(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ih(i)?!!i.capture:!!i,a=P0(t);if(a||(t[N0]=a=new Hp(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=mF(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)oF||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sk(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function mF(){function t(n){return e.call(t.src,t.listener,n)}const e=gF;return t}function rk(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)rk(t,e[s],n,r,i);return null}return n=x0(n),t&&t[sh]?t.P(e,n,ih(r)?!!r.capture:!!r,i):nk(t,e,n,!0,r,i)}function ik(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ik(t,e[s],n,r,i);else r=ih(r)?!!r.capture:!!r,n=x0(n),t&&t[sh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=o_(s,n,r,i),-1<n&&($p(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=P0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=o_(e,n,r,i)),(n=-1<t?e[t]:null)&&M0(n))}function M0(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[sh])s_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(sk(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=P0(e))?(s_(n,t),n.h==0&&(n.src=null,e[N0]=null)):$p(t)}}}function sk(t){return t in fg?fg[t]:fg[t]="on"+t}function gF(t,e){if(t.fa)t=!0;else{e=new gu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&M0(t),t=n.call(r,e)}return t}function P0(t){return t=t[N0],t instanceof Hp?t:null}var pg="__closure_events_fn_"+(1e9*Math.random()>>>0);function x0(t){return typeof t=="function"?t:(t[pg]||(t[pg]=function(e){return t.handleEvent(e)}),t[pg])}function an(){Qs.call(this),this.i=new Hp(this),this.S=this,this.J=null}cn(an,Qs);an.prototype[sh]=!0;an.prototype.removeEventListener=function(t,e,n,r){ik(this,t,e,n,r)};function bn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new xn(e,t);else if(e instanceof xn)e.target=e.target||t;else{var i=e;e=new xn(r,t),ek(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Kh(o,r,!0,e)&&i}if(o=e.g=t,i=Kh(o,r,!0,e)&&i,i=Kh(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Kh(o,r,!1,e)&&i}an.prototype.N=function(){if(an.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$p(n[r]);delete t.g[e],t.h--}}this.J=null};an.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};an.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Kh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&s_(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var D0=Ce.JSON.stringify;class yF{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function _F(){var t=L0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class vF{constructor(){this.h=this.g=null}add(e,n){const r=ok.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ok=new yF(()=>new bF,t=>t.reset());class bF{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function EF(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function TF(t){Ce.setTimeout(()=>{throw t},0)}let yu,_u=!1,L0=new vF,ak=()=>{const t=Ce.Promise.resolve(void 0);yu=()=>{t.then(wF)}};var wF=()=>{for(var t;t=_F();){try{t.h.call(t.g)}catch(n){TF(n)}var e=ok;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}_u=!1};function zp(t,e){an.call(this),this.h=t||1,this.g=e||Ce,this.j=Pn(this.qb,this),this.l=Date.now()}cn(zp,an);re=zp.prototype;re.ga=!1;re.T=null;re.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bn(this,"tick"),this.ga&&(V0(this),this.start()))}};re.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function V0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}re.N=function(){zp.$.N.call(this),V0(this),delete this.g};function F0(t,e,n){if(typeof t=="function")n&&(t=Pn(t,n));else if(t&&typeof t.handleEvent=="function")t=Pn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ce.setTimeout(t,e||0)}function lk(t){t.g=F0(()=>{t.g=null,t.i&&(t.i=!1,lk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class SF extends Qs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lk(this)}N(){super.N(),this.g&&(Ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(t){Qs.call(this),this.h=t,this.g={}}cn(vu,Qs);var wT=[];function ck(t,e,n,r){Array.isArray(n)||(n&&(wT[0]=n.toString()),n=wT);for(var i=0;i<n.length;i++){var s=tk(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function uk(t){O0(t.g,function(e,n){this.g.hasOwnProperty(n)&&M0(e)},t),t.g={}}vu.prototype.N=function(){vu.$.N.call(this),uk(this)};vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function jp(){this.g=!0}jp.prototype.Ea=function(){this.g=!1};function IF(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function AF(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ma(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+RF(t,n)+(r?" "+r:"")})}function CF(t,e){t.info(function(){return"TIMEOUT: "+e})}jp.prototype.info=function(){};function RF(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return D0(n)}catch{return e}}var fa={},ST=null;function Wp(){return ST=ST||new an}fa.Ta="serverreachability";function hk(t){xn.call(this,fa.Ta,t)}cn(hk,xn);function bu(t){const e=Wp();bn(e,new hk(e))}fa.STAT_EVENT="statevent";function dk(t,e){xn.call(this,fa.STAT_EVENT,t),this.stat=e}cn(dk,xn);function Bn(t){const e=Wp();bn(e,new dk(e,t))}fa.Ua="timingevent";function fk(t,e){xn.call(this,fa.Ua,t),this.size=e}cn(fk,xn);function oh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ce.setTimeout(function(){t()},e)}var Gp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},pk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function B0(){}B0.prototype.h=null;function IT(t){return t.h||(t.h=t.i())}function mk(){}var ah={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function U0(){xn.call(this,"d")}cn(U0,xn);function $0(){xn.call(this,"c")}cn($0,xn);var a_;function qp(){}cn(qp,B0);qp.prototype.g=function(){return new XMLHttpRequest};qp.prototype.i=function(){return{}};a_=new qp;function lh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new vu(this),this.P=kF,t=n_?125:void 0,this.V=new zp(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gk}function gk(){this.i=null,this.g="",this.h=!1}var kF=45e3,yk={},l_={};re=lh.prototype;re.setTimeout=function(t){this.P=t};function c_(t,e,n){t.L=1,t.A=Yp(ji(e)),t.u=n,t.S=!0,_k(t,null)}function _k(t,e){t.G=Date.now(),ch(t),t.B=ji(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Ak(n.i,"t",r),t.o=0,n=t.l.J,t.h=new gk,t.g=qk(t.l,n?e:null,!t.u),0<t.O&&(t.M=new SF(Pn(t.Pa,t,t.g),t.O)),ck(t.U,t.g,"readystatechange",t.nb),e=t.I?ZR(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),bu(),IF(t.j,t.v,t.B,t.m,t.W,t.u)}re.nb=function(t){t=t.target;const e=this.M;e&&ni(t)==3?e.l():this.Pa(t)};re.Pa=function(t){try{if(t==this.g)e:{const u=ni(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||n_||this.g&&(this.h.h||this.g.ja()||kT(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?bu(3):bu(2)),Kp(this);var n=this.g.da();this.ca=n;t:if(vk(this)){var r=kT(this.g);t="";var i=r.length,s=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){So(this),Lc(this);var o="";break t}this.h.i=new Ce.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,AF(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mu(a)){var c=a;break t}}c=null}if(n=c)Ma(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,u_(this,n);else{this.i=!1,this.s=3,Bn(12),So(this),Lc(this);break e}}this.S?(bk(this,u,o),n_&&this.i&&u==3&&(ck(this.U,this.V,"tick",this.mb),this.V.start())):(Ma(this.j,this.m,o,null),u_(this,o)),u==4&&So(this),this.i&&!this.J&&(u==4?zk(this.l,this):(this.i=!1,ch(this)))}else JF(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Bn(12)):(this.s=0,Bn(13)),So(this),Lc(this)}}}catch{}finally{}};function vk(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function bk(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=OF(t,n),i==l_){e==4&&(t.s=4,Bn(14),r=!1),Ma(t.j,t.m,null,"[Incomplete Response]");break}else if(i==yk){t.s=4,Bn(15),Ma(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ma(t.j,t.m,i,null),u_(t,i);vk(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Bn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),q0(e),e.M=!0,Bn(11))):(Ma(t.j,t.m,n,"[Invalid Chunked Response]"),So(t),Lc(t))}re.mb=function(){if(this.g){var t=ni(this.g),e=this.g.ja();this.o<e.length&&(Kp(this),bk(this,t,e),this.i&&t!=4&&ch(this))}};function OF(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?l_:(n=Number(e.substring(n,r)),isNaN(n)?yk:(r+=1,r+n>e.length?l_:(e=e.slice(r,r+n),t.o=r+n,e)))}re.cancel=function(){this.J=!0,So(this)};function ch(t){t.Y=Date.now()+t.P,Ek(t,t.P)}function Ek(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=oh(Pn(t.lb,t),e)}function Kp(t){t.C&&(Ce.clearTimeout(t.C),t.C=null)}re.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(CF(this.j,this.B),this.L!=2&&(bu(),Bn(17)),So(this),this.s=2,Lc(this)):Ek(this,this.Y-t)};function Lc(t){t.l.H==0||t.J||zk(t.l,t)}function So(t){Kp(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,V0(t.V),uk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function u_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||h_(n.i,t))){if(!t.K&&h_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ef(n),Zp(n);else break e;G0(n),Bn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=oh(Pn(n.ib,n),6e3));if(1>=kk(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Io(n,11)}else if((t.K||n.g==t)&&Ef(n),!mu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(H0(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,bt(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Gk(r,r.J?r.pa:null,r.Y),o.K){Ok(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Kp(a),ch(a)),r.g=o}else $k(r);0<n.j.length&&em(n)}else c[0]!="stop"&&c[0]!="close"||Io(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Io(n,7):W0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}bu(4)}catch{}}function NF(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Bp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function MF(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Bp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Tk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Bp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=MF(t),r=NF(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var wk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function PF(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Fo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Fo){this.h=t.h,vf(this,t.j),this.s=t.s,this.g=t.g,bf(this,t.m),this.l=t.l;var e=t.i,n=new Eu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),AT(this,n),this.o=t.o}else t&&(e=String(t).match(wk))?(this.h=!1,vf(this,e[1]||"",!0),this.s=fc(e[2]||""),this.g=fc(e[3]||"",!0),bf(this,e[4]),this.l=fc(e[5]||"",!0),AT(this,e[6]||"",!0),this.o=fc(e[7]||"")):(this.h=!1,this.i=new Eu(null,this.h))}Fo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(pc(e,CT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(pc(e,CT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(pc(n,n.charAt(0)=="/"?LF:DF,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",pc(n,FF)),t.join("")};function ji(t){return new Fo(t)}function vf(t,e,n){t.j=n?fc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function bf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function AT(t,e,n){e instanceof Eu?(t.i=e,BF(t.i,t.h)):(n||(e=pc(e,VF)),t.i=new Eu(e,t.h))}function bt(t,e,n){t.i.set(e,n)}function Yp(t){return bt(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function fc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,xF),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var CT=/[#\/\?@]/g,DF=/[#\?:]/g,LF=/[#\?]/g,VF=/[#\?@]/g,FF=/#/g;function Eu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xs(t){t.g||(t.g=new Map,t.h=0,t.i&&PF(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}re=Eu.prototype;re.add=function(t,e){Xs(this),this.i=null,t=zl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Sk(t,e){Xs(t),e=zl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ik(t,e){return Xs(t),e=zl(t,e),t.g.has(e)}re.forEach=function(t,e){Xs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};re.ta=function(){Xs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};re.Z=function(t){Xs(this);let e=[];if(typeof t=="string")Ik(this,t)&&(e=e.concat(this.g.get(zl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};re.set=function(t,e){return Xs(this),this.i=null,t=zl(this,t),Ik(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};re.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Ak(t,e,n){Sk(t,e),0<n.length&&(t.i=null,t.g.set(zl(t,e),R0(n)),t.h+=n.length)}re.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function zl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function BF(t,e){e&&!t.j&&(Xs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Sk(this,r),Ak(this,i,n))},t)),t.j=e}var UF=class{constructor(t,e){this.g=t,this.map=e}};function Ck(t){this.l=t||$F,Ce.PerformanceNavigationTiming?(t=Ce.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ce.g&&Ce.g.Ka&&Ce.g.Ka()&&Ce.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $F=10;function Rk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function kk(t){return t.h?1:t.g?t.g.size:0}function h_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function H0(t,e){t.g?t.g.add(e):t.h=e}function Ok(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Ck.prototype.cancel=function(){if(this.i=Nk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Nk(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return R0(t.i)}var HF=class{stringify(t){return Ce.JSON.stringify(t,void 0)}parse(t){return Ce.JSON.parse(t,void 0)}};function zF(){this.g=new HF}function jF(t,e,n){const r=n||"";try{Tk(t,function(i,s){let o=i;ih(i)&&(o=D0(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function WF(t,e){const n=new jp;if(Ce.Image){const r=new Image;r.onload=qh(Yh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=qh(Yh,n,r,"TestLoadImage: error",!1,e),r.onabort=qh(Yh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=qh(Yh,n,r,"TestLoadImage: timeout",!1,e),Ce.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Yh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Jp(t){this.l=t.ec||null,this.j=t.ob||!1}cn(Jp,B0);Jp.prototype.g=function(){return new Qp(this.l,this.j)};Jp.prototype.i=function(t){return function(){return t}}({});function Qp(t,e){an.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=z0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cn(Qp,an);var z0=0;re=Qp.prototype;re.open=function(t,e){if(this.readyState!=z0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Tu(this)};re.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ce).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};re.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uh(this)),this.readyState=z0};re.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Tu(this)),this.g&&(this.readyState=3,Tu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ce.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Mk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}re.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?uh(this):Tu(this),this.readyState==3&&Mk(this)}};re.Za=function(t){this.g&&(this.response=this.responseText=t,uh(this))};re.Ya=function(t){this.g&&(this.response=t,uh(this))};re.ka=function(){this.g&&uh(this)};function uh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Tu(t)}re.setRequestHeader=function(t,e){this.v.append(t,e)};re.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};re.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Tu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Qp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var GF=Ce.JSON.parse;function Nt(t){an.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Pk,this.L=this.M=!1}cn(Nt,an);var Pk="",qF=/^https?$/i,KF=["POST","PUT"];re=Nt.prototype;re.Oa=function(t){this.M=t};re.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():a_.g(),this.C=this.u?IT(this.u):IT(a_),this.g.onreadystatechange=Pn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){RT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=Ce.FormData&&t instanceof Ce.FormData,!(0<=YR(KF,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Lk(this),0<this.B&&((this.L=YF(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pn(this.ua,this)):this.A=F0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){RT(this,s)}};function YF(t){return dl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}re.ua=function(){typeof C0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bn(this,"timeout"),this.abort(8))};function RT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xk(t),Xp(t)}function xk(t){t.F||(t.F=!0,bn(t,"complete"),bn(t,"error"))}re.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,bn(this,"complete"),bn(this,"abort"),Xp(this))};re.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xp(this,!0)),Nt.$.N.call(this)};re.La=function(){this.s||(this.G||this.v||this.l?Dk(this):this.kb())};re.kb=function(){Dk(this)};function Dk(t){if(t.h&&typeof C0<"u"&&(!t.C[1]||ni(t)!=4||t.da()!=2)){if(t.v&&ni(t)==4)F0(t.La,0,t);else if(bn(t,"readystatechange"),ni(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(wk)[1]||null;!i&&Ce.self&&Ce.self.location&&(i=Ce.self.location.protocol.slice(0,-1)),r=!qF.test(i?i.toLowerCase():"")}n=r}if(n)bn(t,"complete"),bn(t,"success");else{t.m=6;try{var s=2<ni(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",xk(t)}}finally{Xp(t)}}}}function Xp(t,e){if(t.g){Lk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||bn(t,"ready");try{n.onreadystatechange=r}catch{}}}function Lk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ce.clearTimeout(t.A),t.A=null)}re.isActive=function(){return!!this.g};function ni(t){return t.g?t.g.readyState:0}re.da=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}};re.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};re.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),GF(e)}};function kT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Pk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function JF(t){const e={};t=(t.g&&2<=ni(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(mu(t[r]))continue;var n=EF(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}pF(e,function(r){return r.join(", ")})}re.Ia=function(){return this.m};re.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Vk(t){let e="";return O0(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function j0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):bt(t,e,n))}function sc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fk(t){this.Ga=0,this.j=[],this.l=new jp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=sc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=sc("baseRetryDelayMs",5e3,t),this.hb=sc("retryDelaySeedMs",1e4,t),this.eb=sc("forwardChannelMaxRetries",2,t),this.xa=sc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Ck(t&&t.concurrentRequestLimit),this.Ja=new zF,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}re=Fk.prototype;re.ra=8;re.H=1;function W0(t){if(Bk(t),t.H==3){var e=t.W++,n=ji(t.I);if(bt(n,"SID",t.K),bt(n,"RID",e),bt(n,"TYPE","terminate"),hh(t,n),e=new lh(t,t.l,e),e.L=2,e.A=Yp(ji(n)),n=!1,Ce.navigator&&Ce.navigator.sendBeacon)try{n=Ce.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Ce.Image&&(new Image().src=e.A,n=!0),n||(e.g=qk(e.l,null),e.g.ha(e.A)),e.G=Date.now(),ch(e)}Wk(t)}function Zp(t){t.g&&(q0(t),t.g.cancel(),t.g=null)}function Bk(t){Zp(t),t.u&&(Ce.clearTimeout(t.u),t.u=null),Ef(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ce.clearTimeout(t.m),t.m=null)}function em(t){if(!Rk(t.i)&&!t.m){t.m=!0;var e=t.Na;yu||ak(),_u||(yu(),_u=!0),L0.add(e,t),t.C=0}}function QF(t,e){return kk(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=oh(Pn(t.Na,t,e),jk(t,t.C)),t.C++,!0)}re.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new lh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=ZR(s),ek(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Uk(this,i,e),n=ji(this.I),bt(n,"RID",t),bt(n,"CVER",22),this.F&&bt(n,"X-HTTP-Session-Id",this.F),hh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Vk(s)))+"&"+e:this.o&&j0(n,this.o,s)),H0(this.i,i),this.bb&&bt(n,"TYPE","init"),this.P?(bt(n,"$req",e),bt(n,"SID","null"),i.aa=!0,c_(i,n,null)):c_(i,n,e),this.H=2}}else this.H==3&&(t?OT(this,t):this.j.length==0||Rk(this.i)||OT(this))};function OT(t,e){var n;e?n=e.m:n=t.W++;const r=ji(t.I);bt(r,"SID",t.K),bt(r,"RID",n),bt(r,"AID",t.V),hh(t,r),t.o&&t.s&&j0(r,t.o,t.s),n=new lh(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Uk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),H0(t.i,n),c_(n,r,e)}function hh(t,e){t.na&&O0(t.na,function(n,r){bt(e,r,n)}),t.h&&Tk({},function(n,r){bt(e,r,n)})}function Uk(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Pn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{jF(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function $k(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;yu||ak(),_u||(yu(),_u=!0),L0.add(e,t),t.A=0}}function G0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=oh(Pn(t.Ma,t),jk(t,t.A)),t.A++,!0)}re.Ma=function(){if(this.u=null,Hk(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=oh(Pn(this.jb,this),t)}};re.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bn(10),Zp(this),Hk(this))};function q0(t){t.B!=null&&(Ce.clearTimeout(t.B),t.B=null)}function Hk(t){t.g=new lh(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ji(t.wa);bt(e,"RID","rpc"),bt(e,"SID",t.K),bt(e,"AID",t.V),bt(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&bt(e,"TO",t.qa),bt(e,"TYPE","xmlhttp"),hh(t,e),t.o&&t.s&&j0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Yp(ji(e)),n.u=null,n.S=!0,_k(n,t)}re.ib=function(){this.v!=null&&(this.v=null,Zp(this),G0(this),Bn(19))};function Ef(t){t.v!=null&&(Ce.clearTimeout(t.v),t.v=null)}function zk(t,e){var n=null;if(t.g==e){Ef(t),q0(t),t.g=null;var r=2}else if(h_(t.i,e))n=e.F,Ok(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Wp(),bn(r,new fk(r,n)),em(t)}else $k(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&QF(t,e)||r==2&&G0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Io(t,5);break;case 4:Io(t,10);break;case 3:Io(t,6);break;default:Io(t,2)}}}function jk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Io(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Pn(t.pb,t);n||(n=new Fo("//www.google.com/images/cleardot.gif"),Ce.location&&Ce.location.protocol=="http"||vf(n,"https"),Yp(n)),WF(n.toString(),r)}else Bn(2);t.H=0,t.h&&t.h.za(e),Wk(t),Bk(t)}re.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Bn(2)):(this.l.info("Failed to ping google.com"),Bn(1))};function Wk(t){if(t.H=0,t.ma=[],t.h){const e=Nk(t.i);(e.length!=0||t.j.length!=0)&&(bT(t.ma,e),bT(t.ma,t.j),t.i.i.length=0,R0(t.j),t.j.length=0),t.h.ya()}}function Gk(t,e,n){var r=n instanceof Fo?ji(n):new Fo(n);if(r.g!="")e&&(r.g=e+"."+r.g),bf(r,r.m);else{var i=Ce.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Fo(null);r&&vf(s,r),e&&(s.g=e),i&&bf(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&bt(r,n,e),bt(r,"VER",t.ra),hh(t,r),r}function qk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Nt(new Jp({ob:n})):new Nt(t.va),e.Oa(t.J),e}re.isActive=function(){return!!this.h&&this.h.isActive(this)};function Kk(){}re=Kk.prototype;re.Ba=function(){};re.Aa=function(){};re.za=function(){};re.ya=function(){};re.isActive=function(){return!0};re.Va=function(){};function Tf(){if(dl&&!(10<=Number(uF)))throw Error("Environmental error: no available transport.")}Tf.prototype.g=function(t,e){return new dr(t,e)};function dr(t,e){an.call(this),this.g=new Fk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!mu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new jl(this)}cn(dr,an);dr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Bn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Gk(t,null,t.Y),em(t)};dr.prototype.close=function(){W0(this.g)};dr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=D0(t),t=n);e.j.push(new UF(e.fb++,t)),e.H==3&&em(e)};dr.prototype.N=function(){this.g.h=null,delete this.j,W0(this.g),delete this.g,dr.$.N.call(this)};function Yk(t){U0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}cn(Yk,U0);function Jk(){$0.call(this),this.status=1}cn(Jk,$0);function jl(t){this.g=t}cn(jl,Kk);jl.prototype.Ba=function(){bn(this.g,"a")};jl.prototype.Aa=function(t){bn(this.g,new Yk(t))};jl.prototype.za=function(t){bn(this.g,new Jk)};jl.prototype.ya=function(){bn(this.g,"b")};function XF(){this.blockSize=-1}function Hr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}cn(Hr,XF);Hr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function mg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Hr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)mg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){mg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){mg(this,r),i=0;break}}this.h=i,this.i+=e};Hr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function st(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var ZF={};function K0(t){return-128<=t&&128>t?aF(t,function(e){return new st([e|0],0>e?-1:0)}):new st([t|0],0>t?-1:0)}function ri(t){if(isNaN(t)||!isFinite(t))return Ya;if(0>t)return pn(ri(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=d_;return new st(e,0)}function Qk(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return pn(Qk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ri(Math.pow(e,8)),r=Ya,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ri(Math.pow(e,s)),r=r.R(s).add(ri(o))):(r=r.R(n),r=r.add(ri(o)))}return r}var d_=4294967296,Ya=K0(0),f_=K0(1),NT=K0(16777216);re=st.prototype;re.ea=function(){if(vr(this))return-pn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:d_+r)*e,e*=d_}return t};re.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Vi(this))return"0";if(vr(this))return"-"+pn(this).toString(t);for(var e=ri(Math.pow(t,6)),n=this,r="";;){var i=Sf(n,e).g;n=wf(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Vi(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};re.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Vi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function vr(t){return t.h==-1}re.X=function(t){return t=wf(this,t),vr(t)?-1:Vi(t)?0:1};function pn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new st(n,~t.h).add(f_)}re.abs=function(){return vr(this)?pn(this):this};re.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new st(n,n[n.length-1]&-2147483648?-1:0)};function wf(t,e){return t.add(pn(e))}re.R=function(t){if(Vi(this)||Vi(t))return Ya;if(vr(this))return vr(t)?pn(this).R(pn(t)):pn(pn(this).R(t));if(vr(t))return pn(this.R(pn(t)));if(0>this.X(NT)&&0>t.X(NT))return ri(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Jh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Jh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Jh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Jh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new st(n,0)};function Jh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function oc(t,e){this.g=t,this.h=e}function Sf(t,e){if(Vi(e))throw Error("division by zero");if(Vi(t))return new oc(Ya,Ya);if(vr(t))return e=Sf(pn(t),e),new oc(pn(e.g),pn(e.h));if(vr(e))return e=Sf(t,pn(e)),new oc(pn(e.g),e.h);if(30<t.g.length){if(vr(t)||vr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=f_,r=e;0>=r.X(t);)n=MT(n),r=MT(r);var i=_a(n,1),s=_a(r,1);for(r=_a(r,2),n=_a(n,2);!Vi(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=_a(r,1),n=_a(n,1)}return e=wf(t,i.R(e)),new oc(i,e)}for(i=Ya;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ri(n),o=s.R(e);vr(o)||0<o.X(t);)n-=r,s=ri(n),o=s.R(e);Vi(s)&&(s=f_),i=i.add(s),t=wf(t,o)}return new oc(i,t)}re.gb=function(t){return Sf(this,t).h};re.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new st(n,this.h&t.h)};re.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new st(n,this.h|t.h)};re.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new st(n,this.h^t.h)};function MT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new st(n,t.h)}function _a(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new st(i,t.h)}Tf.prototype.createWebChannel=Tf.prototype.g;dr.prototype.send=dr.prototype.u;dr.prototype.open=dr.prototype.m;dr.prototype.close=dr.prototype.close;Gp.NO_ERROR=0;Gp.TIMEOUT=8;Gp.HTTP_ERROR=6;pk.COMPLETE="complete";mk.EventType=ah;ah.OPEN="a";ah.CLOSE="b";ah.ERROR="c";ah.MESSAGE="d";an.prototype.listen=an.prototype.O;Nt.prototype.listenOnce=Nt.prototype.P;Nt.prototype.getLastError=Nt.prototype.Sa;Nt.prototype.getLastErrorCode=Nt.prototype.Ia;Nt.prototype.getStatus=Nt.prototype.da;Nt.prototype.getResponseJson=Nt.prototype.Wa;Nt.prototype.getResponseText=Nt.prototype.ja;Nt.prototype.send=Nt.prototype.ha;Nt.prototype.setWithCredentials=Nt.prototype.Oa;Hr.prototype.digest=Hr.prototype.l;Hr.prototype.reset=Hr.prototype.reset;Hr.prototype.update=Hr.prototype.j;st.prototype.add=st.prototype.add;st.prototype.multiply=st.prototype.R;st.prototype.modulo=st.prototype.gb;st.prototype.compare=st.prototype.X;st.prototype.toNumber=st.prototype.ea;st.prototype.toString=st.prototype.toString;st.prototype.getBits=st.prototype.D;st.fromNumber=ri;st.fromString=Qk;var e7=function(){return new Tf},t7=function(){return Wp()},gg=Gp,n7=pk,r7=fa,PT={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Qh=mk,i7=Nt,s7=Hr,Ja=st;const xT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=new Yu("@firebase/firestore");function ac(){return Xo.logLevel}function te(t,...e){if(Xo.logLevel<=Be.DEBUG){const n=e.map(Y0);Xo.debug(`Firestore (${Wl}): ${t}`,...n)}}function yi(t,...e){if(Xo.logLevel<=Be.ERROR){const n=e.map(Y0);Xo.error(`Firestore (${Wl}): ${t}`,...n)}}function fl(t,...e){if(Xo.logLevel<=Be.WARN){const n=e.map(Y0);Xo.warn(`Firestore (${Wl}): ${t}`,...n)}}function Y0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t="Unexpected state"){const e=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: `+t;throw yi(e),new Error(e)}function mt(t,e){t||Ae()}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(An.UNAUTHENTICATED))}shutdown(){}}class a7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l7{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ci,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ci)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string"),new Xk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string"),new An(e)}}class c7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class u7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new c7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(mt(typeof n.token=="string"),this.R=n.token,new h7(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=f7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function et(t,e){return t<e?-1:t>e?1:0}function pl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new fe(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ut(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Ut(0,0))}static max(){return new Oe(new Ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ae(),r===void 0?r=e.length-n:r>e.length-n&&Ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class It extends wu{construct(e,n,r){return new It(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new It(n)}static emptyPath(){return new It([])}}const p7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends wu{construct(e,n,r){return new vn(e,n,r)}static isValidIdentifier(e){return p7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new fe(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new fe(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new fe(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new fe(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(n)}static emptyPath(){return new vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(It.fromString(e))}static fromName(e){return new ve(It.fromString(e).popFirst(5))}static empty(){return new ve(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return It.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new It(e.slice()))}}function m7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Oe.fromTimestamp(r===1e9?new Ut(n+1,0):new Ut(n,r));return new Hs(i,ve.empty(),e)}function g7(t){return new Hs(t.readTime,t.key,-1)}class Hs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hs(Oe.min(),ve.empty(),-1)}static max(){return new Hs(Oe.max(),ve.empty(),-1)}}function y7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dh(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==_7)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ci,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Vc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Q0(r.target.error);this.V.reject(new Vc(e,i))}}static open(e,n,r,i){try{return new J0(n,e.transaction(i,r))}catch(s){throw new Vc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(te("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new E7(n)}}class Ao{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Ao.S($t())===12.2&&yi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return te("SimpleDb","Removing database:",e),_o(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Wv())return!1;if(Ao.C())return!0;const e=$t(),n=Ao.S(e),r=0<n&&n<10,i=Ao.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(te("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Vc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new fe(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new fe(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Vc(e,o))},i.onupgradeneeded=s=>{te("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{te("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=J0.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(te("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class b7{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return _o(this.k.delete())}}class Vc extends fe{constructor(e,n){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function fh(t){return t.name==="IndexedDbTransactionError"}class E7{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(te("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_o(r)}add(e){return te("SimpleDb","ADD",this.store.name,e,e),_o(this.store.add(e))}get(e){return _o(this.store.get(e)).next(n=>(n===void 0&&(n=null),te("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return te("SimpleDb","DELETE",this.store.name,e),_o(this.store.delete(e))}count(){return te("SimpleDb","COUNT",this.store.name),_o(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){te("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=Q0(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new b7(a),c=n(a.primaryKey,a.value,l);if(c instanceof L){const u=c.catch(h=>(l.done(),L.reject(h)));r.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function _o(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Q0(r.target.error);n(i)}})}let DT=!1;function Q0(t){const e=Ao.S($t());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DT||(DT=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}X0._e=-1;function tm(t){return t==null}function If(t){return t===0&&1/t==-1/0}function T7(t){return typeof t=="number"&&Number.isInteger(t)&&!If(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function e2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||fn.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??fn.RED,this.left=i??fn.EMPTY,this.right=s??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new fn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return fn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VT(this.data.getIterator())}getIteratorFrom(e){return new VT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new En(this.comparator);return n.data=e,n}}class VT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new ar([])}unionWith(e){let n=new En(vn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new t2("Invalid base64 string: "+s):s}}(e);return new Dn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const w7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(t){if(mt(!!t),typeof t=="string"){let e=0;const n=w7.exec(t);if(mt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zo(t){return typeof t=="string"?Dn.fromBase64String(t):Dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function e1(t){const e=t.mapValue.fields.__previous_value__;return Z0(e)?e1(e):e}function Su(t){const e=zs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Iu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Z0(t)?4:I7(t)?9007199254740991:10:Ae()}function _i(t,e){if(t===e)return!0;const n=ea(t);if(n!==ea(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Su(t).isEqual(Su(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=zs(i.timestampValue),a=zs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zo(i.bytesValue).isEqual(Zo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Vt(i.geoPointValue.latitude)===Vt(s.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Vt(i.integerValue)===Vt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Vt(i.doubleValue),a=Vt(s.doubleValue);return o===a?If(o)===If(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return pl(t.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(LT(o)!==LT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!_i(o[l],a[l])))return!1;return!0}(t,e);default:return Ae()}}function Au(t,e){return(t.values||[]).find(n=>_i(n,e))!==void 0}function ml(t,e){if(t===e)return 0;const n=ea(t),r=ea(e);if(n!==r)return et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Vt(s.integerValue||s.doubleValue),l=Vt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return FT(t.timestampValue,e.timestampValue);case 4:return FT(Su(t),Su(e));case 5:return et(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Zo(s),l=Zo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=et(a[c],l[c]);if(u!==0)return u}return et(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=et(Vt(s.latitude),Vt(o.latitude));return a!==0?a:et(Vt(s.longitude),Vt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=ml(a[c],l[c]);if(u)return u}return et(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Zh.mapValue&&o===Zh.mapValue)return 0;if(s===Zh.mapValue)return 1;if(o===Zh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=et(l[h],u[h]);if(d!==0)return d;const f=ml(a[l[h]],c[u[h]]);if(f!==0)return f}return et(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Ae()}}function FT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const n=zs(t),r=zs(e),i=et(n.seconds,r.seconds);return i!==0?i:et(n.nanos,r.nanos)}function gl(t){return p_(t)}function p_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=p_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${p_(n.fields[o])}`;return i+"}"}(t.mapValue):Ae()}function m_(t){return!!t&&"integerValue"in t}function t1(t){return!!t&&"arrayValue"in t}function BT(t){return!!t&&"nullValue"in t}function UT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kd(t){return!!t&&"mapValue"in t}function Fc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Fc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function I7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fc(n)}setAll(e){let n=vn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Fc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];kd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Kn(Fc(this.value))}}function n2(t){const e=[];return pa(t.fields,(n,r)=>{const i=new vn([n]);if(kd(r)){const s=n2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new kn(e,0,Oe.min(),Oe.min(),Oe.min(),Kn.empty(),0)}static newFoundDocument(e,n,r,i){return new kn(e,1,n,Oe.min(),r,i,0)}static newNoDocument(e,n){return new kn(e,2,n,Oe.min(),Oe.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new kn(e,3,n,Oe.min(),Oe.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n){this.position=e,this.inclusive=n}}function $T(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ve.comparator(ve.fromName(o.referenceValue),n.key):r=ml(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function HT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_i(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n="asc"){this.field=e,this.dir=n}}function A7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{}class zt extends r2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new R7(e,n,r):n==="array-contains"?new N7(e,r):n==="in"?new M7(e,r):n==="not-in"?new P7(e,r):n==="array-contains-any"?new x7(e,r):new zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new k7(e,r):new O7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ml(n,this.value)):n!==null&&ea(this.value)===ea(n)&&this.matchesComparison(ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends r2{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new vi(e,n)}matches(e){return i2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function i2(t){return t.op==="and"}function s2(t){return C7(t)&&i2(t)}function C7(t){for(const e of t.filters)if(e instanceof vi)return!1;return!0}function g_(t){if(t instanceof zt)return t.field.canonicalString()+t.op.toString()+gl(t.value);if(s2(t))return t.filters.map(e=>g_(e)).join(",");{const e=t.filters.map(n=>g_(n)).join(",");return`${t.op}(${e})`}}function o2(t,e){return t instanceof zt?function(r,i){return i instanceof zt&&r.op===i.op&&r.field.isEqual(i.field)&&_i(r.value,i.value)}(t,e):t instanceof vi?function(r,i){return i instanceof vi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&o2(o,i.filters[a]),!0):!1}(t,e):void Ae()}function a2(t){return t instanceof zt?function(n){return`${n.field.canonicalString()} ${n.op} ${gl(n.value)}`}(t):t instanceof vi?function(n){return n.op.toString()+" {"+n.getFilters().map(a2).join(" ,")+"}"}(t):"Filter"}class R7 extends zt{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class k7 extends zt{constructor(e,n){super(e,"in",n),this.keys=l2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class O7 extends zt{constructor(e,n){super(e,"not-in",n),this.keys=l2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function l2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ve.fromName(r.referenceValue))}class N7 extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return t1(n)&&Au(n.arrayValue,this.value)}}class M7 extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Au(this.value.arrayValue,n)}}class P7 extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Au(this.value.arrayValue,n)}}class x7 extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!t1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Au(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function zT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new D7(t,e,n,r,i,s,o)}function n1(t){const e=Me(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>g_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),tm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gl(r)).join(",")),e.ce=n}return e.ce}function r1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!A7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!o2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HT(t.startAt,e.startAt)&&HT(t.endAt,e.endAt)}function y_(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function L7(t,e,n,r,i,s,o,a){return new nm(t,e,n,r,i,s,o,a)}function rm(t){return new nm(t)}function jT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function V7(t){return t.collectionGroup!==null}function Bc(t){const e=Me(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new En(vn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Cf(s,r))}),n.has(vn.keyField().canonicalString())||e.le.push(new Cf(vn.keyField(),r))}return e.le}function ui(t){const e=Me(t);return e.he||(e.he=F7(e,Bc(t))),e.he}function F7(t,e){if(t.limitType==="F")return zT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Cf(i.field,s)});const n=t.endAt?new Af(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Af(t.startAt.position,t.startAt.inclusive):null;return zT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function __(t,e,n){return new nm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function im(t,e){return r1(ui(t),ui(e))&&t.limitType===e.limitType}function c2(t){return`${n1(ui(t))}|lt:${t.limitType}`}function wa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>a2(i)).join(", ")}]`),tm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>gl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>gl(i)).join(",")),`Target(${r})`}(ui(t))}; limitType=${t.limitType})`}function sm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ve.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Bc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=$T(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Bc(r),i)||r.endAt&&!function(o,a,l){const c=$T(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Bc(r),i))}(t,e)}function B7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function u2(t){return(e,n)=>{let r=!1;for(const i of Bc(t)){const s=U7(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function U7(t,e,n){const r=t.field.isKeyField()?ve.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ml(l,c):Ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return e2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=new Ct(ve.comparator);function Wi(){return $7}const h2=new Ct(ve.comparator);function mc(...t){let e=h2;for(const n of t)e=e.insert(n.key,n);return e}function d2(t){let e=h2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Co(){return Uc()}function f2(){return Uc()}function Uc(){return new Gl(t=>t.toString(),(t,e)=>t.isEqual(e))}const H7=new Ct(ve.comparator),z7=new En(ve.comparator);function $e(...t){let e=z7;for(const n of t)e=e.add(n);return e}const j7=new En(et);function W7(){return j7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:If(e)?"-0":e}}function m2(t){return{integerValue:""+t}}function G7(t,e){return T7(e)?m2(e):p2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(){this._=void 0}}function q7(t,e,n){return t instanceof Rf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Z0(s)&&(s=e1(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof yl?y2(t,e):t instanceof Cu?_2(t,e):function(i,s){const o=g2(i,s),a=WT(o)+WT(i.Ie);return m_(o)&&m_(i.Ie)?m2(a):p2(i.serializer,a)}(t,e)}function K7(t,e,n){return t instanceof yl?y2(t,e):t instanceof Cu?_2(t,e):n}function g2(t,e){return t instanceof kf?function(r){return m_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Rf extends om{}class yl extends om{constructor(e){super(),this.elements=e}}function y2(t,e){const n=v2(e);for(const r of t.elements)n.some(i=>_i(i,r))||n.push(r);return{arrayValue:{values:n}}}class Cu extends om{constructor(e){super(),this.elements=e}}function _2(t,e){let n=v2(e);for(const r of t.elements)n=n.filter(i=>!_i(i,r));return{arrayValue:{values:n}}}class kf extends om{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function WT(t){return Vt(t.integerValue||t.doubleValue)}function v2(t){return t1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y7{constructor(e,n){this.field=e,this.transform=n}}function J7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof yl&&i instanceof yl||r instanceof Cu&&i instanceof Cu?pl(r.elements,i.elements,_i):r instanceof kf&&i instanceof kf?_i(r.Ie,i.Ie):r instanceof Rf&&i instanceof Rf}(t.transform,e.transform)}class Q7{constructor(e,n){this.version=e,this.transformResults=n}}class ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Od(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class am{}function b2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new i1(t.key,ur.none()):new ph(t.key,t.data,ur.none());{const n=t.data,r=Kn.empty();let i=new En(vn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zs(t.key,r,new ar(i.toArray()),ur.none())}}function X7(t,e,n){t instanceof ph?function(i,s,o){const a=i.value.clone(),l=qT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zs?function(i,s,o){if(!Od(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=qT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(E2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $c(t,e,n,r){return t instanceof ph?function(s,o,a,l){if(!Od(s.precondition,o))return a;const c=s.value.clone(),u=KT(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zs?function(s,o,a,l){if(!Od(s.precondition,o))return a;const c=KT(s.fieldTransforms,l,o),u=o.data;return u.setAll(E2(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Od(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Z7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=g2(r.transform,i||null);s!=null&&(n===null&&(n=Kn.empty()),n.set(r.field,s))}return n||null}function GT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&pl(r,i,(s,o)=>J7(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ph extends am{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zs extends am{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function E2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qT(t,e,n){const r=new Map;mt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,K7(o,a,n[i]))}return r}function KT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,q7(s,o,e))}return r}class i1 extends am{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eB extends am{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&X7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$c(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$c(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=f2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=b2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$e())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,(n,r)=>GT(n,r))&&pl(this.baseMutations,e.baseMutations,(n,r)=>GT(n,r))}}class s1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){mt(e.mutations.length===r.length);let i=function(){return H7}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new s1(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Ge;function iB(t){switch(t){default:return Ae();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function T2(t){if(t===void 0)return yi("GRPC error has no .code"),V.UNKNOWN;switch(t){case Dt.OK:return V.OK;case Dt.CANCELLED:return V.CANCELLED;case Dt.UNKNOWN:return V.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return V.INTERNAL;case Dt.UNAVAILABLE:return V.UNAVAILABLE;case Dt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Dt.NOT_FOUND:return V.NOT_FOUND;case Dt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Dt.ABORTED:return V.ABORTED;case Dt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Dt.DATA_LOSS:return V.DATA_LOSS;default:return Ae()}}(Ge=Dt||(Dt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB=new Ja([4294967295,4294967295],0);function YT(t){const e=sB().encode(t),n=new s7;return n.update(e),new Uint8Array(n.digest())}function JT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ja([n,r],0),new Ja([i,s],0)]}class o1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gc(`Invalid padding: ${n}`);if(r<0)throw new gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Ja.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Ja.fromNumber(r)));return i.compare(oB)===1&&(i=new Ja([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=YT(e),[r,i]=JT(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new o1(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=YT(e),[r,i]=JT(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lm(Oe.min(),i,new Ct(et),Wi(),$e())}}class mh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mh(r,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class w2{constructor(e,n){this.targetId=e,this.fe=n}}class S2{constructor(e,n,r=Dn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class QT{constructor(){this.ge=0,this.pe=ZT(),this.ye=Dn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=$e(),n=$e(),r=$e();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ae()}}),new mh(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=ZT()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,mt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class aB{constructor(e){this.Be=e,this.ke=new Map,this.qe=Wi(),this.Qe=XT(),this.Ke=new Ct(et)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(y_(s))if(r===0){const o=new ve(s.path);this.We(n,o,kn.newNoDocument(o,Oe.min()))}else mt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Zo(r).toUint8Array()}catch(l){if(l instanceof t2)return fl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new o1(o,i,s)}catch(l){return fl(l instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&y_(a.target)){const l=new ve(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,kn.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=$e();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new lm(e,n,this.Ke,this.qe,r);return this.qe=Wi(),this.Qe=XT(),this.Ke=new Ct(et),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new QT,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new En(et),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new QT),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function XT(){return new Ct(ve.comparator)}function ZT(){return new Ct(ve.comparator)}const lB={asc:"ASCENDING",desc:"DESCENDING"},cB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uB={and:"AND",or:"OR"};class hB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function v_(t,e){return t.useProto3Json||tm(e)?e:{value:e}}function Of(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dB(t,e){return Of(t,e.toTimestamp())}function hi(t){return mt(!!t),Oe.fromTimestamp(function(n){const r=zs(n);return new Ut(r.seconds,r.nanos)}(t))}function a1(t,e){return b_(t,e).canonicalString()}function b_(t,e){const n=function(i){return new It(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function A2(t){const e=It.fromString(t);return mt(N2(e)),e}function E_(t,e){return a1(t.databaseId,e.path)}function yg(t,e){const n=A2(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(R2(n))}function C2(t,e){return a1(t.databaseId,e)}function fB(t){const e=A2(t);return e.length===4?It.emptyPath():R2(e)}function T_(t){return new It(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R2(t){return mt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ew(t,e,n){return{name:E_(t,e),fields:n.value.mapValue.fields}}function pB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(mt(u===void 0||typeof u=="string"),Dn.fromBase64String(u||"")):(mt(u===void 0||u instanceof Uint8Array),Dn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?V.UNKNOWN:T2(c.code);return new fe(u,c.message||"")}(o);n=new S2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yg(t,r.document.name),s=hi(r.document.updateTime),o=r.document.createTime?hi(r.document.createTime):Oe.min(),a=new Kn({mapValue:{fields:r.document.fields}}),l=kn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Nd(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yg(t,r.document),s=r.readTime?hi(r.readTime):Oe.min(),o=kn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Nd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yg(t,r.document),s=r.removedTargetIds||[];n=new Nd([],s,i,null)}else{if(!("filter"in e))return Ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new rB(i,s),a=r.targetId;n=new w2(a,o)}}return n}function mB(t,e){let n;if(e instanceof ph)n={update:ew(t,e.key,e.value)};else if(e instanceof i1)n={delete:E_(t,e.key)};else if(e instanceof Zs)n={update:ew(t,e.key,e.data),updateMask:SB(e.fieldMask)};else{if(!(e instanceof eB))return Ae();n={verify:E_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Rf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof yl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:dB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ae()}(t,e.precondition)),n}function gB(t,e){return t&&t.length>0?(mt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?hi(i.updateTime):hi(s);return o.isEqual(Oe.min())&&(o=hi(s)),new Q7(o,i.transformResults||[])}(n,e))):[]}function yB(t,e){return{documents:[C2(t,e.path)]}}function _B(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=C2(t,i);const s=function(c){if(c.length!==0)return O2(vi.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Sa(d.field),direction:EB(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=v_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function vB(t){let e=fB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){mt(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=k2(h);return d instanceof vi&&s2(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new Cf(Ia(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,tm(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Af(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Af(f,d)}(n.endAt)),L7(e,i,o,s,a,"F",l,c)}function bB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function k2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ia(n.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ia(n.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ia(n.unaryFilter.field);return zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ia(n.unaryFilter.field);return zt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(t):t.fieldFilter!==void 0?function(n){return zt.create(Ia(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return vi.create(n.compositeFilter.filters.map(r=>k2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae()}}(n.compositeFilter.op))}(t):Ae()}function EB(t){return lB[t]}function TB(t){return cB[t]}function wB(t){return uB[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function Ia(t){return vn.fromServerFormat(t.fieldPath)}function O2(t){return t instanceof zt?function(n){if(n.op==="=="){if(UT(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NAN"}};if(BT(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(UT(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NAN"}};if(BT(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(n.field),op:TB(n.op),value:n.value}}}(t):t instanceof vi?function(n){const r=n.getFilters().map(i=>O2(i));return r.length===1?r[0]:{compositeFilter:{op:wB(n.op),filters:r}}}(t):Ae()}function SB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function N2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,r,i,s=Oe.min(),o=Oe.min(),a=Dn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e){this.ct=e}}function AB(t){const e=vB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?__(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(){this._n=new RB}addToCollectionParentIndex(e,n){return this._n.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Hs.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class RB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new En(It.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new _l(0)}static Ln(){return new _l(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.changes=new Gl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$c(r.mutation,i,ar.empty(),Ut.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,$e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=$e()){const i=Co();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=mc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Co();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,$e()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Wi();const o=Uc(),a=function(){return Uc()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Zs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),$c(u.mutation,c,u.mutation.getFieldMask(),Ut.now())):o.set(c.key,ar.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new OB(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Uc();let i=new Ct((o,a)=>o-a),s=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||ar.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||$e()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=f2();u.forEach(d=>{if(!s.has(d)){const f=b2(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):V7(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Co());let a=-1,l=s;return o.next(c=>L.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?L.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,$e())).next(u=>({batchId:a,changes:d2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(r=>{let i=mc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=mc();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const c=function(h,d){return new nm(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,kn.newInvalidDocument(u)))});let a=mc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&$c(u.mutation,c,ar.empty(),Ut.now()),sm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return L.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hi(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:AB(i.bundledQuery),readTime:hi(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(){this.overlays=new Ct(ve.comparator),this.hr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Co();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Co(),s=n.length+1,o=new ve(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ct((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Co(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Co(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return L.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nB(n,r));let s=this.hr.get(n);s===void 0&&(s=$e(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(){this.Pr=new En(Xt.Ir),this.Tr=new En(Xt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Xt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Xt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ve(new It([])),r=new Xt(n,e),i=new Xt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ve(new It([])),r=new Xt(n,e),i=new Xt(n,e+1);let s=$e();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Xt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ve.comparator(e.key,n.key)||et(e.pr,n.pr)}static Er(e,n){return et(e.pr,n.pr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new En(Xt.Ir)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tB(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xt(n,0),i=new Xt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new En(et);return n.forEach(i=>{const s=new Xt(i,0),o=new Xt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),L.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ve.isDocumentKey(s)||(s=s.child(""));const o=new Xt(new ve(s),0);let a=new En(et);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),L.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){mt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return L.forEach(n.mutations,i=>{const s=new Xt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Xt(n,0),i=this.wr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.vr=e,this.docs=function(){return new Ct(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(n))}getEntries(e,n){let r=Wi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():kn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Wi();const o=n.path,a=new ve(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||y7(g7(u),r)<=0||(i.has(u.key)||sm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ae()}Fr(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LB(this)}getSize(e){return L.resolve(this.size)}}class LB extends kB{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e){this.persistence=e,this.Mr=new Gl(n=>n1(n),r1),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new l1,this.targetCount=0,this.Lr=_l.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),L.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new _l(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.qn(n),L.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,n){this.Br={},this.overlays={},this.kr=new X0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new VB(this),this.indexManager=new CB,this.remoteDocumentCache=function(i){return new DB(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new IB(n),this.$r=new MB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new xB(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const i=new BB(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return L.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class BB extends v7{constructor(e){super(),this.currentSequenceNumber=e}}class c1{constructor(e){this.persistence=e,this.zr=new l1,this.jr=null}static Hr(e){return new c1(e)}get Jr(){if(this.jr)return this.jr;throw Ae()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),L.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Jr,r=>{const i=ve.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Oe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return L.or([()=>L.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=$e(),i=$e();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new u1(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return p4()?8:Ao.v($t())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new UB;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(ac()<=Be.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),L.resolve()):(ac()<=Be.DEBUG&&te("QueryEngine","Query:",wa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ac()<=Be.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(n))):L.resolve())}ji(e,n){if(jT(n))return L.resolve(null);let r=ui(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=__(n,null,"F"),r=ui(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=$e(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,__(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return jT(n)||i.isEqual(Oe.min())?L.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?L.resolve(null):(ac()<=Be.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wa(n)),this.es(e,o,n,m7(i,-1)).next(a=>a))})}Zi(e,n){let r=new En(u2(e));return n.forEach((i,s)=>{sm(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return ac()<=Be.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",wa(n)),this.zi.getDocumentsMatchingQuery(e,n,Hs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ct(et),this.rs=new Gl(s=>n1(s),r1),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NB(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function zB(t,e,n,r){return new HB(t,e,n,r)}async function M2(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=$e();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function jB(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=L.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(m=>{const g=c.docVersions.get(p);mt(g!==null),m.version.compareTo(g)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=$e();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function P2(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function WB(t,e){const n=Me(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Dn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let l=Wi(),c=$e();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(GB(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(Oe.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function GB(t,e,n){let r=$e(),i=$e();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Wi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function qB(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KB(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ts(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function w_(t,e,n){const r=Me(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!fh(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function tw(t,e,n){const r=Me(t);let i=Oe.min(),s=$e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Me(l),d=h.rs.get(u);return d!==void 0?L.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,ui(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Oe.min(),n?s:$e())).next(a=>(YB(r,B7(e),a),{documents:a,hs:s})))}function YB(t,e,n){let r=t.ss.get(e)||Oe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class nw{constructor(){this.activeTargetIds=W7()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JB{constructor(){this.no=new nw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new nw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed=null;function _g(){return ed===null?ed=function(){return 268435456+Math.round(2147483648*Math.random())}():ed++,"0x"+ed.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class e8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=_g(),l=this.bo(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,i).then(u=>(te("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw fl("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=XB[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=_g();return new Promise((o,a)=>{const l=new i7;l.setWithCredentials(!0),l.listenOnce(n7.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gg.NO_ERROR:const u=l.getResponseJson();te(Tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case gg.TIMEOUT:te(Tn,`RPC '${e}' ${s} timed out`),a(new fe(V.DEADLINE_EXCEEDED,"Request time out"));break;case gg.HTTP_ERROR:const h=l.getStatus();if(te(Tn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(y)>=0?y:V.UNKNOWN}(f.status);a(new fe(p,f.message))}else a(new fe(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new fe(V.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{te(Tn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);te(Tn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=_g(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=e7(),a=t7(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");te(Tn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new ZB({lo:g=>{f?te(Tn,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(d||(te(Tn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),te(Tn,`RPC '${e}' stream ${i} sending:`,g),h.send(g))},ho:()=>h.close()}),m=(g,y,_)=>{g.listen(y,E=>{try{_(E)}catch(w){setTimeout(()=>{throw w},0)}})};return m(h,Qh.EventType.OPEN,()=>{f||te(Tn,`RPC '${e}' stream ${i} transport opened.`)}),m(h,Qh.EventType.CLOSE,()=>{f||(f=!0,te(Tn,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(h,Qh.EventType.ERROR,g=>{f||(f=!0,fl(Tn,`RPC '${e}' stream ${i} transport errored:`,g),p.Vo(new fe(V.UNAVAILABLE,"The operation could not be completed")))}),m(h,Qh.EventType.MESSAGE,g=>{var y;if(!f){const _=g.data[0];mt(!!_);const E=_,w=E.error||((y=E[0])===null||y===void 0?void 0:y.error);if(w){te(Tn,`RPC '${e}' stream ${i} received error:`,w);const S=w.status;let I=function(k){const B=Dt[k];if(B!==void 0)return T2(B)}(S),x=w.message;I===void 0&&(I=V.INTERNAL,x="Unknown error status: "+S+" with message "+w.message),f=!0,p.Vo(new fe(I,x)),h.close()}else te(Tn,`RPC '${e}' stream ${i} received:`,_),p.mo(_)}}),m(a,r7.STAT_EVENT,g=>{g.stat===PT.PROXY?te(Tn,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===PT.NOPROXY&&te(Tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function vg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){return new hB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new x2(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(yi(n.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new fe(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t8 extends D2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=pB(this.serializer,e),r=function(s){if(!("targetChange"in s))return Oe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Oe.min():o.readTime?hi(o.readTime):Oe.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=T_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=y_(l)?{documents:yB(s,l)}:{query:_B(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=I2(s,o.resumeToken);const c=v_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Oe.min())>0){a.readTime=Of(s,o.snapshotVersion.toTimestamp());const c=v_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=bB(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=T_(this.serializer),n.removeTarget=e,this.t_(n)}}class n8 extends D2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=gB(e.writeResults,e.commitTime),r=hi(e.commitTime);return this.listener.T_(r,n)}return mt(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=T_(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mB(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new fe(V.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,b_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(V.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,b_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(V.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class i8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(yi(n),this.g_=!1):te("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{ma(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Me(l);c.v_.add(4),await gh(c),c.x_.set("Unknown"),c.v_.delete(4),await um(c)}(this))})}),this.x_=new i8(r,i)}}async function um(t){if(ma(t))for(const e of t.F_)await e(!0)}async function gh(t){for(const e of t.F_)await e(!1)}function L2(t,e){const n=Me(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),p1(n)?f1(n):ql(n).Jo()&&d1(n,e))}function h1(t,e){const n=Me(t),r=ql(n);n.C_.delete(e),r.Jo()&&V2(n,e),n.C_.size===0&&(r.Jo()?r.Xo():ma(n)&&n.x_.set("Unknown"))}function d1(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ql(t).c_(e)}function V2(t,e){t.O_.Oe(e),ql(t).l_(e)}function f1(t){t.O_=new aB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ql(t).start(),t.x_.p_()}function p1(t){return ma(t)&&!ql(t).Ho()&&t.C_.size>0}function ma(t){return Me(t).v_.size===0}function F2(t){t.O_=void 0}async function o8(t){t.C_.forEach((e,n)=>{d1(t,e)})}async function a8(t,e){F2(t),p1(t)?(t.x_.S_(e),f1(t)):t.x_.set("Unknown")}async function l8(t,e,n){if(t.x_.set("Online"),e instanceof S2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nf(t,r)}else if(e instanceof Nd?t.O_.$e(e):e instanceof w2?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Oe.min()))try{const r=await P2(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(Dn.EMPTY_BYTE_STRING,u.snapshotVersion)),V2(s,l);const h=new Ts(u.target,l,c,u.sequenceNumber);d1(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await Nf(t,r)}}async function Nf(t,e,n){if(!fh(e))throw e;t.v_.add(1),await gh(t),t.x_.set("Offline"),n||(n=()=>P2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await um(t)})}function B2(t,e){return e().catch(n=>Nf(t,n,e))}async function hm(t){const e=Me(t),n=js(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;c8(e);)try{const i=await qB(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,u8(e,i)}catch(i){await Nf(e,i)}U2(e)&&$2(e)}function c8(t){return ma(t)&&t.D_.length<10}function u8(t,e){t.D_.push(e);const n=js(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function U2(t){return ma(t)&&!js(t).Ho()&&t.D_.length>0}function $2(t){js(t).start()}async function h8(t){js(t).d_()}async function d8(t){const e=js(t);for(const n of t.D_)e.I_(n.mutations)}async function f8(t,e,n){const r=t.D_.shift(),i=s1.from(r,e,n);await B2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hm(t)}async function p8(t,e){e&&js(t).P_&&await async function(r,i){if(function(o){return iB(o)&&o!==V.ABORTED}(i.code)){const s=r.D_.shift();js(r).Zo(),await B2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await hm(r)}}(t,e),U2(t)&&$2(t)}async function iw(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=ma(n);n.v_.add(3),await gh(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await um(n)}async function m8(t,e){const n=Me(t);e?(n.v_.delete(2),await um(n)):e||(n.v_.add(2),await gh(n),n.x_.set("Unknown"))}function ql(t){return t.N_||(t.N_=function(n,r,i){const s=Me(n);return s.R_(),new t8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:o8.bind(null,t),To:a8.bind(null,t),u_:l8.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),p1(t)?f1(t):t.x_.set("Unknown")):(await t.N_.stop(),F2(t))})),t.N_}function js(t){return t.L_||(t.L_=function(n,r,i){const s=Me(n);return s.R_(),new n8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:h8.bind(null,t),To:p8.bind(null,t),E_:d8.bind(null,t),T_:f8.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await hm(t)):(await t.L_.stop(),t.D_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new m1(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g1(t,e){if(yi("AsyncQueue",`${e}: ${t}`),fh(t))return new fe(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=mc(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new Qa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.B_=new Ct(ve.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Ae():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class vl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new vl(e,n,Qa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&im(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class y8{constructor(){this.queries=new Gl(e=>c2(e),im),this.onlineState="Unknown",this.W_=new Set}}async function y1(t,e){const n=Me(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new g8,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=g1(o,`Initialization of query '${wa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&v1(n)}async function _1(t,e){const n=Me(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _8(t,e){const n=Me(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&v1(n)}function v8(t,e,n){const r=Me(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function v1(t){t.W_.forEach(e=>{e.next()})}var S_,ow;(ow=S_||(S_={})).j_="default",ow.Cache="cache";class b1{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==S_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.key=e}}class z2{constructor(e){this.key=e}}class b8{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=$e(),this.mutatedKeys=$e(),this.ha=u2(e),this.Pa=new Qa(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new sw,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=sm(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),g=!0):this.da(d,f)||(r.track({type:2,doc:f}),g=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),g=!0):d&&!f&&(r.track({type:1,doc:d}),g=!0,(l||c)&&(a=!0)),g&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(f,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return m(f)-m(p)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new vl(this.query,e.Pa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new sw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=$e(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new z2(r))}),this.la.forEach(r=>{e.has(r)||n.push(new H2(r))}),n}fa(e){this.ua=e.hs,this.la=$e();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return vl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class E8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class T8{constructor(e){this.key=e,this.pa=!1}}class w8{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Gl(a=>c2(a),im),this.Sa=new Map,this.ba=new Set,this.Da=new Ct(ve.comparator),this.Ca=new Map,this.va=new l1,this.Fa={},this.Ma=new Map,this.xa=_l.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function S8(t,e,n=!0){const r=Y2(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await j2(r,e,n,!0),i}async function I8(t,e){const n=Y2(t);await j2(n,e,!0,!1)}async function j2(t,e,n,r){const i=await KB(t.localStore,ui(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await A8(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&L2(t.remoteStore,i),a}async function A8(t,e,n,r,i){t.Na=(h,d,f)=>async function(m,g,y,_){let E=g.view.Ta(y);E.Xi&&(E=await tw(m.localStore,g.query,!1).then(({documents:x})=>g.view.Ta(x,E)));const w=_&&_.targetChanges.get(g.targetId),S=_&&_.targetMismatches.get(g.targetId)!=null,I=g.view.applyChanges(E,m.isPrimaryClient,w,S);return lw(m,g.targetId,I.Va),I.snapshot}(t,h,d,f);const s=await tw(t.localStore,e,!0),o=new b8(e,s.hs),a=o.Ta(s.documents),l=mh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);lw(t,n,c.Va);const u=new E8(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function C8(t,e,n){const r=Me(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!im(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await w_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&h1(r.remoteStore,i.targetId),I_(r,i.targetId)}).catch(dh)):(I_(r,i.targetId),await w_(r.localStore,i.targetId,!0))}async function R8(t,e){const n=Me(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),h1(n.remoteStore,r.targetId))}async function k8(t,e,n){const r=L8(t);try{const i=await function(o,a){const l=Me(o),c=Ut.now(),u=a.reduce((f,p)=>f.add(p.key),$e());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Wi(),m=$e();return l.os.getEntries(f,u).next(g=>{p=g,p.forEach((y,_)=>{_.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(g=>{h=g;const y=[];for(const _ of a){const E=Z7(_,h.get(_.key).overlayedDocument);E!=null&&y.push(new Zs(_.key,E,n2(E.value.mapValue),ur.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:d2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new Ct(et)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,i.batchId,n),await yh(r,i.changes),await hm(r.remoteStore)}catch(i){const s=g1(i,"Failed to persist write");n.reject(s)}}async function W2(t,e){const n=Me(t);try{const r=await WB(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?mt(o.pa):i.removedDocuments.size>0&&(mt(o.pa),o.pa=!1))}),await yh(n,r,e)}catch(r){await dh(r)}}function aw(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Me(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&v1(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O8(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Ct(ve.comparator);o=o.insert(s,kn.newNoDocument(s,Oe.min()));const a=$e().add(s),l=new lm(Oe.min(),new Map,new Ct(et),o,a);await W2(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),E1(r)}else await w_(r.localStore,e,!1).then(()=>I_(r,e,n)).catch(dh)}async function N8(t,e){const n=Me(t),r=e.batch.batchId;try{const i=await jB(n.localStore,e);q2(n,r,null),G2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yh(n,i)}catch(i){await dh(i)}}async function M8(t,e,n){const r=Me(t);try{const i=await function(o,a){const l=Me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(mt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);q2(r,e,n),G2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yh(r,i)}catch(i){await dh(i)}}function G2(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function q2(t,e,n){const r=Me(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function I_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||K2(t,r)})}function K2(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(h1(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),E1(t))}function lw(t,e,n){for(const r of n)r instanceof H2?(t.va.addReference(r.key,e),P8(t,r)):r instanceof z2?(te("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||K2(t,r.key)):Ae()}function P8(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(te("SyncEngine","New document in limbo: "+n),t.ba.add(r),E1(t))}function E1(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new ve(It.fromString(e)),r=t.xa.next();t.Ca.set(r,new T8(n)),t.Da=t.Da.insert(n,r),L2(t.remoteStore,new Ts(ui(rm(n.path)),r,"TargetPurposeLimboResolution",X0._e))}}async function yh(t,e,n){const r=Me(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=u1.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,c){const u=Me(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,d=>L.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>L.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!fh(h))throw h;te("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(d,m)}}}(r.localStore,s))}async function x8(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await M2(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new fe(V.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yh(n,r.us)}}function D8(t,e){const n=Me(t),r=n.Ca.get(e);if(r&&r.pa)return $e().add(r.key);{let i=$e();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function Y2(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=W2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O8.bind(null,e),e.ya.u_=_8.bind(null,e.eventManager),e.ya.La=v8.bind(null,e.eventManager),e}function L8(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M8.bind(null,e),e}class cw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=cm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return zB(this.persistence,new $B,e.initialUser,this.serializer)}createPersistence(e){return new FB(c1.Hr,this.serializer)}createSharedClientState(e){return new JB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class V8{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=x8.bind(null,this.syncEngine),await m8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y8}()}createDatastore(e){const n=cm(e.databaseInfo.databaseId),r=function(s){return new e8(s)}(e.databaseInfo);return function(s,o,a,l){return new r8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new s8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>aw(this.syncEngine,n,0),function(){return rw.D()?new rw:new QB}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new w8(i,s,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=Me(r);te("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await gh(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=An.UNAUTHENTICATED,this.clientId=Zk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{te("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(te("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new fe(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=g1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bg(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await M2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await U8(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iw(e.remoteStore,i)),t._onlineComponents=e}function B8(t){return t.name==="FirebaseError"?t.code===V.FAILED_PRECONDITION||t.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function U8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await bg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!B8(n))throw n;fl("Error using user provided cache. Falling back to memory cache: "+n),await bg(t,new cw)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await bg(t,new cw);return t._offlineComponents}async function J2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await uw(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await uw(t,new V8))),t._onlineComponents}function $8(t){return J2(t).then(e=>e.syncEngine)}async function Mf(t){const e=await J2(t),n=e.eventManager;return n.onListen=S8.bind(null,e.syncEngine),n.onUnlisten=C8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=R8.bind(null,e.syncEngine),n}function H8(t,e,n={}){const r=new ci;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new T1({next:d=>{o.enqueueAndForget(()=>_1(s,h));const f=d.docs.has(a);!f&&d.fromCache?c.reject(new fe(V.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?c.reject(new fe(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new b1(rm(a.path),u,{includeMetadataChanges:!0,ta:!0});return y1(s,h)}(await Mf(t),t.asyncQueue,e,n,r)),r.promise}function z8(t,e,n={}){const r=new ci;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new T1({next:d=>{o.enqueueAndForget(()=>_1(s,h)),d.fromCache&&l.source==="server"?c.reject(new fe(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new b1(a,u,{includeMetadataChanges:!0,ta:!0});return y1(s,h)}(await Mf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t,e,n){if(!n)throw new fe(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function j8(t,e,n,r){if(e===!0&&r===!0)throw new fe(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dw(t){if(!ve.isDocumentKey(t))throw new fe(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fw(t){if(ve.isDocumentKey(t))throw new fe(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function w1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ae()}function hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=w1(t);throw new fe(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}j8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Q2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new fe(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new fe(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o7;switch(r.type){case"firstParty":return new u7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hw.get(n);r&&(te("ComponentProvider","Removing Datastore"),hw.delete(n),r.terminate())}(this),Promise.resolve()}}function W8(t,e,n,r={}){var i;const s=(t=hr(t,dm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=An.MOCK_USER;else{a=u4(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new fe(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new An(c)}t._authCredentials=new a7(new Xk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _h(this.firestore,e,this._query)}}class $n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class Ps extends _h{constructor(e,n,r){super(e,n,rm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new ve(e))}withConverter(e){return new Ps(this.firestore,e,this._path)}}function Pa(t,e,...n){if(t=on(t),X2("collection","path",e),t instanceof dm){const r=It.fromString(e,...n);return fw(r),new Ps(t,null,r)}{if(!(t instanceof $n||t instanceof Ps))throw new fe(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return fw(r),new Ps(t.firestore,null,r)}}function On(t,e,...n){if(t=on(t),arguments.length===1&&(e=Zk.newId()),X2("doc","path",e),t instanceof dm){const r=It.fromString(e,...n);return dw(r),new $n(t,null,new ve(r))}{if(!(t instanceof $n||t instanceof Ps))throw new fe(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(It.fromString(e,...n));return dw(r),new $n(t.firestore,t instanceof Ps?t.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new x2(this,"async_queue_retry"),this.cu=()=>{const n=vg();n&&te("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=vg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=vg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new ci;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!fh(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=m1.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&Ae()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function mw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ws extends dm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new G8}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Z2(this),this._firestoreClient.terminate()}}function q8(t,e){const n=typeof t=="object"?t:tC(),r=typeof t=="string"?t:e||"(default)",i=ZA(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=l4("firestore");s&&W8(i,...s)}return i}function vh(t){return t._firestoreClient||Z2(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Z2(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new S7(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Q2(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new F8(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(Dn.fromBase64String(e))}catch(n){throw new fe(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bl(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=/^__.*__$/;class Y8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new ph(e,this.data,n,this.fieldTransforms)}}class eO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class mm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new mm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Pf(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(tO(this.Vu)&&K8.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class J8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cm(e)}Cu(e,n,r,i=!1){return new mm({Vu:e,methodName:n,Du:r,path:vn.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function S1(t){const e=t._freezeSettings(),n=cm(t._databaseId);return new J8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nO(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);A1("Data must be an object, but it was:",o,r);const a=sO(r,o);let l,c;if(s.merge)l=new ar(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=A_(e,h,n);if(!o.contains(d))throw new fe(V.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);aO(u,d)||u.push(d)}l=new ar(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new Y8(new Kn(a),l,c)}class gm extends fm{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gm}}function Q8(t,e,n){return new mm({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class I1 extends fm{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Q8(this,e,!0),r=this.vu.map(s=>Eh(s,n)),i=new yl(r);return new Y7(e.path,i)}isEqual(e){return e instanceof I1&&cu(this.vu,e.vu)}}function rO(t,e,n,r){const i=t.Cu(1,e,n);A1("Data must be an object, but it was:",i,r);const s=[],o=Kn.empty();pa(r,(l,c)=>{const u=C1(e,l,n);c=on(c);const h=i.yu(u);if(c instanceof gm)s.push(u);else{const d=Eh(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new ar(s);return new eO(o,a,i.fieldTransforms)}function iO(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[A_(e,r,n)],l=[i];if(s.length%2!=0)throw new fe(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(A_(e,s[d])),l.push(s[d+1]);const c=[],u=Kn.empty();for(let d=a.length-1;d>=0;--d)if(!aO(c,a[d])){const f=a[d];let p=l[d];p=on(p);const m=o.yu(f);if(p instanceof gm)c.push(f);else{const g=Eh(p,m);g!=null&&(c.push(f),u.set(f,g))}}const h=new ar(c);return new eO(u,h,o.fieldTransforms)}function Eh(t,e){if(oO(t=on(t)))return A1("Unsupported field value:",e,t),sO(t,e);if(t instanceof fm)return function(r,i){if(!tO(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Eh(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return G7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ut.fromDate(r);return{timestampValue:Of(i.serializer,s)}}if(r instanceof Ut){const s=new Ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Of(i.serializer,s)}}if(r instanceof pm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bl)return{bytesValue:I2(i.serializer,r._byteString)};if(r instanceof $n){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:a1(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${w1(r)}`)}(t,e)}function sO(t,e){const n={};return e2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pa(t,(r,i)=>{const s=Eh(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function oO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ut||t instanceof pm||t instanceof bl||t instanceof $n||t instanceof fm)}function A1(t,e,n){if(!oO(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=w1(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function A_(t,e,n){if((e=on(e))instanceof bh)return e._internalPath;if(typeof e=="string")return C1(t,e);throw Pf("Field path arguments must be of type string or ",t,!1,void 0,n)}const X8=new RegExp("[~\\*/\\[\\]]");function C1(t,e,n){if(e.search(X8)>=0)throw Pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bh(...e.split("."))._internalPath}catch{throw Pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new fe(V.INVALID_ARGUMENT,a+t+l)}function aO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Z8 extends lO{data(){return super.data()}}function cO(t,e){return typeof e=="string"?C1(t,e):e instanceof bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eU{convertValue(e,n="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new pm(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=e1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const n=zs(e);return new Ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=It.fromString(e);mt(N2(r));const i=new Iu(r.get(1),r.get(3)),s=new ve(r.popFirst(5));return i.isEqual(n)||yi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dO extends lO{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Md extends dO{data(e={}){return super.data(e)}}class fO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new yc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Md(this._firestore,this._userDataWriter,r.key,r,new yc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Md(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Md(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:tU(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t){t=hr(t,$n);const e=hr(t.firestore,Ws);return H8(vh(e),t._key).then(n=>mO(e,t,n))}class k1 extends eU{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,n)}}function pO(t){t=hr(t,_h);const e=hr(t.firestore,Ws),n=vh(e),r=new k1(e);return uO(t._query),z8(n,t._query).then(i=>new fO(e,r,t,i))}function gw(t,e,n){t=hr(t,$n);const r=hr(t.firestore,Ws),i=hO(t.converter,e,n);return N1(r,[nO(S1(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ur.none())])}function C_(t,e,n,...r){t=hr(t,$n);const i=hr(t.firestore,Ws),s=S1(i);let o;return o=typeof(e=on(e))=="string"||e instanceof bh?iO(s,"updateDoc",t._key,e,n,r):rO(s,"updateDoc",t._key,e),N1(i,[o.toMutation(t._key,ur.exists(!0))])}function O1(t,...e){var n,r,i;t=on(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||mw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(mw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof $n)c=hr(t.firestore,Ws),u=rm(t._key.path),l={next:h=>{e[o]&&e[o](mO(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=hr(t,_h);c=hr(h.firestore,Ws),u=h._query;const d=new k1(c);l={next:f=>{e[o]&&e[o](new fO(c,d,h,f))},error:e[o+1],complete:e[o+2]},uO(t._query)}return function(d,f,p,m){const g=new T1(m),y=new b1(f,g,p);return d.asyncQueue.enqueueAndForget(async()=>y1(await Mf(d),y)),()=>{g.Qa(),d.asyncQueue.enqueueAndForget(async()=>_1(await Mf(d),y))}}(vh(c),u,a,l)}function N1(t,e){return function(r,i){const s=new ci;return r.asyncQueue.enqueueAndForget(async()=>k8(await $8(r),i,s)),s.promise}(vh(t),e)}function mO(t,e,n){const r=n.docs.get(e._key),i=new k1(t);return new dO(t,i,e._key,r,new yc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=S1(e)}set(e,n,r){this._verifyNotCommitted();const i=Eg(e,this._firestore),s=hO(i.converter,n,r),o=nO(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ur.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Eg(e,this._firestore);let o;return o=typeof(n=on(n))=="string"||n instanceof bh?iO(this._dataReader,"WriteBatch.update",s._key,n,r,i):rO(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Eg(e,this._firestore);return this._mutations=this._mutations.concat(new i1(n._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eg(t,e){if((t=on(t)).firestore!==e)throw new fe(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function rU(...t){return new I1("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t){return vh(t=hr(t,Ws)),new nU(t,e=>N1(t,e))}(function(e,n=!0){(function(i){Wl=i})(Js),mi(new Ur("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ws(new l7(r.getProvider("auth-internal")),new d7(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new fe(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),lr(xT,"4.5.0",e),lr(xT,"4.5.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO="firebasestorage.googleapis.com",sU="storageBucket",oU=2*60*1e3,aU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Ii{constructor(e,n,r=0){super(Tg(e),`Firebase Storage: ${n} (${Tg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ai.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bi||(bi={}));function Tg(t){return"storage/"+t}function lU(){const t="An unknown error occurred, please check the error payload for server response.";return new Ai(bi.UNKNOWN,t)}function cU(){return new Ai(bi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uU(){return new Ai(bi.CANCELED,"User canceled the upload/download.")}function hU(t){return new Ai(bi.INVALID_URL,"Invalid URL '"+t+"'.")}function dU(t){return new Ai(bi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yw(t){return new Ai(bi.INVALID_ARGUMENT,t)}function yO(){return new Ai(bi.APP_DELETED,"The Firebase app was deleted.")}function fU(t){return new Ai(bi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Lr.makeFromUrl(e,n)}catch{return new Lr(e,"")}if(r.path==="")return r;throw dU(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===gO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<E.length;w++){const S=E[w],I=S.regex.exec(e);if(I){const x=I[S.indices.bucket];let O=I[S.indices.path];O||(O=""),r=new Lr(x,O),S.postModify(r);break}}if(r==null)throw hU(e);return r}}class pU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function h(g){i=setTimeout(()=>{i=null,t(f,l())},g)}function d(){s&&clearTimeout(s)}function f(g,...y){if(c){d();return}if(g){d(),u.call(null,g,...y);return}if(l()||o){d(),u.call(null,g,...y);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let p=!1;function m(g){p||(p=!0,d(),!c&&(i!==null?(g||(a=2),clearTimeout(i),h(0)):g||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function gU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t){return t!==void 0}function _w(t,e,n,r){if(r<e)throw yw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw yw(`Invalid value for '${t}'. Expected ${n} or less.`)}function _U(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xf||(xf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n,r,i,s,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new td(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===xf.NO_ERROR,l=s.getStatus();if(!a||vU(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===xf.ABORT;r(!1,new td(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new td(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());yU(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=lU();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?yO():uU();o(l)}else{const l=cU();o(l)}};this.canceled_?n(!1,new td(!1,null,!0)):this.backoffId_=mU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class td{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function EU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function TU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function SU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function IU(t,e,n,r,i,s,o=!0){const a=_U(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return wU(c,e),EU(c,n),TU(c,s),SU(c,r),new bU(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function CU(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this._service=e,n instanceof Lr?this._location=n:this._location=Lr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Df(e,n)}get root(){const e=new Lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CU(this._location.path)}get storage(){return this._service}get parent(){const e=AU(this._location.path);if(e===null)return null;const n=new Lr(this._location.bucket,e);return new Df(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fU(e)}}function vw(t,e){const n=e==null?void 0:e[sU];return n==null?null:Lr.makeFromBucketSpec(n,t)}class RU{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=gO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oU,this._maxUploadRetryTime=aU,this._requests=new Set,i!=null?this._bucket=Lr.makeFromBucketSpec(i,this._host):this._bucket=vw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Lr.makeFromBucketSpec(this._url,e):this._bucket=vw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Df(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new pU(yO());{const o=IU(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const bw="@firebase/storage",Ew="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU="storage";function OU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new RU(n,r,i,e,Js)}function NU(){mi(new Ur(kU,OU,"PUBLIC").setMultipleInstances(!0)),lr(bw,Ew,""),lr(bw,Ew,"esm2017")}NU();const wg=new WeakMap;function _O(t,e){return wg.has(e)||wg.set(e,t||{f:{},r:{},s:{},u:{}}),wg.get(e)}function MU(t,e,n,r){if(!t)return n;const[i,s]=vO(t);if(!i)return n;const o=_O(void 0,r)[i]||{},a=e||s;return a&&a in o?o[a]:n}function PU(t,e,n,r){if(!t)return;const[i,s]=vO(t);if(!i)return;const o=_O(void 0,r)[i],a=e||s;if(a)return n.then(l=>{o[a]=l}).catch(Zr),a}function vO(t){return o5(t)||a5(t)?["f",t.path]:l5(t)?["r",t.toString()]:c5(t)?["s",t.toString()]:[]}const Sg=new WeakMap;function xU(t,e,n){const r=Mp();Sg.has(r)||Sg.set(r,new Map);const i=Sg.get(r),s=PU(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):Zr}const DU={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function R_(t,e,n,r){if(!i5(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((a,l)=>{const c=n[l];return a[c.path]=c.data(),a},{});function o(a,l,c,u){l=l||{};const[h,d]=u;Object.getOwnPropertyNames(a).forEach(f=>{const p=Object.getOwnPropertyDescriptor(a,f);p&&!p.enumerable&&Object.defineProperty(h,f,p)});for(const f in a){const p=a[f];if(p==null||p instanceof Date||p instanceof Ut||p instanceof pm)h[f]=p;else if(s0(p)){const m=c+f;h[f]=m in n?l[f]:p.path,d[m]=p.converter?p:p.withConverter(r.converter)}else if(Array.isArray(p)){h[f]=Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];g&&g.path in s&&(h[f][m]=s[g.path])}o(p,l[f]||h[f],c+f+".",[h[f],d])}else ua(p)?(h[f]={},o(p,l[f],c+f+".",[h[f],d])):h[f]=p}}return o(t,e,"",i),i}const M1={reset:!1,wait:!0,maxRefDepth:2,converter:DU,snapshotOptions:{serverTimestamps:"estimate"}};function Lf(t){for(const e in t)t[e].unsub()}function k_(t,e,n,r,i,s,o,a,l){const[c,u]=R_(r.data(t.snapshotOptions),i0(e,n),i,t);s.set(e,n,c),O_(t,e,n,i,u,s,o,a,l)}function LU({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},a){const l=Object.create(null);let c=Zr;return a.once?R1(t).then(u=>{u.exists()?k_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())}).catch(s):c=O1(t,u=>{u.exists()?k_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())},s),()=>{c(),Lf(l)}}function O_(t,e,n,r,i,s,o,a,l){const c=Object.keys(i);if(Object.keys(r).filter(m=>c.indexOf(m)<0).forEach(m=>{r[m].unsub(),delete r[m]}),!c.length||++o>t.maxRefDepth)return a(n);let h=0;const d=c.length,f=Object.create(null);function p(m){m in f&&++h>=d&&a(n)}c.forEach(m=>{const g=r[m],y=i[m],_=`${n}.${m}`;if(f[_]=!0,g)if(g.path!==y.path)g.unsub();else return;r[m]={data:()=>i0(e,_),unsub:LU({ref:y,target:e,path:_,depth:o,ops:s,resolve:p.bind(null,_),reject:l},t),path:y.path}})}function VU(t,e,n,r,i,s){const o=Object.assign({},M1,s),{snapshotListenOptions:a,snapshotOptions:l,wait:c,once:u}=o,h="value";let d=xe(c?[]:t.value);c||n.set(t,h,[]);const f=r;let p,m=Zr;const g=[],y={added:({newIndex:E,doc:w})=>{g.splice(E,0,Object.create(null));const S=g[E],[I,x]=R_(w.data(l),void 0,S,o);n.add(ki(d),E,I),O_(o,d,`${h}.${E}`,S,x,n,0,r.bind(null,w),i)},modified:({oldIndex:E,newIndex:w,doc:S})=>{const I=ki(d),x=g[E],O=I[E],[k,B]=R_(S.data(l),O,x,o);g.splice(w,0,x),n.remove(I,E),n.add(I,w,k),O_(o,d,`${h}.${w}`,x,B,n,0,r,i)},removed:({oldIndex:E})=>{const w=ki(d);n.remove(w,E),Lf(g.splice(E,1)[0])}};function _(E){const w=E.docChanges(a);if(!p&&w.length){p=!0;let S=0;const I=w.length,x=Object.create(null);for(let O=0;O<I;O++)x[w[O].doc.id]=!0;r=O=>{O&&O.id in x&&++S>=I&&(c&&(n.set(t,h,ki(d)),d=t),f(ki(d)),r=Zr)}}w.forEach(S=>{y[S.type](S)}),w.length||(c&&(n.set(t,h,ki(d)),d=t),r(ki(d)))}return u?pO(e).then(_).catch(i):m=O1(e,_,i),E=>{if(m(),E){const w=typeof E=="function"?E():[];n.set(t,h,w)}g.forEach(Lf)}}function FU(t,e,n,r,i,s){const o=Object.assign({},M1,s),a="value",l=Object.create(null);r=u5(r,()=>i0(t,a));let c=Zr;function u(h){h.exists()?k_(o,t,a,h,l,n,0,r,i):(n.set(t,a,null),r(null))}return o.once?R1(e).then(u).catch(i):c=O1(e,u,i),h=>{if(c(),h){const d=typeof h=="function"?h():null;n.set(t,a,d)}Lf(l)}}const Tw=Symbol();function bO(t,e){let n=Zr;const r=Object.assign({},M1,e),i=ki(t),s=r.target||xe();d5()&&(r.once=!0);const o=MU(i,r.ssrKey,Tw,Mp()),a=o!==Tw;a&&(s.value=o);let l=!a;const c=xe(!1),u=xe(),h=lA(),d=Iv();let f=Zr;function p(){let y=ki(t);const _=new Promise((E,w)=>{if(n(r.reset),!y)return n=Zr,E(null);c.value=l,l=!0,y.converter||(y=y.withConverter(r.converter)),n=(s0(y)?FU:VU)(s,y,BU,E,w,r)}).catch(E=>(h.value===_&&(u.value=E),Promise.reject(E))).finally(()=>{h.value===_&&(c.value=!1)});h.value=_}let m=Zr;(sn(t)||typeof t=="function")&&(m=Bi(t,p)),p(),i&&(f=xU(h.value,i,r.ssrKey)),ca()&&SA(()=>h.value),d&&qI(g);function g(y=r.reset){m(),f(),n(y)}return Object.defineProperties(s,{error:{get:()=>u},data:{get:()=>s},pending:{get:()=>c},promise:{get:()=>h},stop:{get:()=>g}})}const BU={set:(t,e,n)=>n5(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function Pd(t,e){return bO(t,{target:xe([]),...e})}function El(t,e){return bO(t,e)}function UU(t){return $U({initialUser:t,dependencies:{popupRedirectResolver:w6,persistence:[xL,TL,IC]}})}const EO=Symbol("VueFireAuth");function $U({dependencies:t,initialUser:e}){return(n,r)=>{const[i,s]=HU(n,r,e,t);m5(i,s)}}function HU(t,e,n,r,i=hL(t,r)){const s=f5(t,e).run(()=>xe(n));return LC.set(t,s),e.provide(EO,i),[s,i]}function zU(t){return t5?Yn(EO):null}function jU(t,{firebaseApp:e,modules:n=[]}){t.provide(DC,e);for(const r of n)r(e,t)}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Aa=typeof document<"u";function WU(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const it=Object.assign;function Ig(t,e){const n={};for(const r in e){const i=e[r];n[r]=zr(i)?i.map(t):t(i)}return n}const Hc=()=>{},zr=Array.isArray,TO=/#/g,GU=/&/g,qU=/\//g,KU=/=/g,YU=/\?/g,wO=/\+/g,JU=/%5B/g,QU=/%5D/g,SO=/%5E/g,XU=/%60/g,IO=/%7B/g,ZU=/%7C/g,AO=/%7D/g,e$=/%20/g;function P1(t){return encodeURI(""+t).replace(ZU,"|").replace(JU,"[").replace(QU,"]")}function t$(t){return P1(t).replace(IO,"{").replace(AO,"}").replace(SO,"^")}function N_(t){return P1(t).replace(wO,"%2B").replace(e$,"+").replace(TO,"%23").replace(GU,"%26").replace(XU,"`").replace(IO,"{").replace(AO,"}").replace(SO,"^")}function n$(t){return N_(t).replace(KU,"%3D")}function r$(t){return P1(t).replace(TO,"%23").replace(YU,"%3F")}function i$(t){return t==null?"":r$(t).replace(qU,"%2F")}function Ru(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const s$=/\/$/,o$=t=>t.replace(s$,"");function Ag(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=u$(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Ru(o)}}function a$(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ww(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function l$(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Tl(e.matched[r],n.matched[i])&&CO(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Tl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function CO(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!c$(t[n],e[n]))return!1;return!0}function c$(t,e){return zr(t)?Sw(t,e):zr(e)?Sw(e,t):t===e}function Sw(t,e){return zr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function u$(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}var ku;(function(t){t.pop="pop",t.push="push"})(ku||(ku={}));var zc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(zc||(zc={}));function h$(t){if(!t)if(Aa){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),o$(t)}const d$=/^[^#]+#/;function f$(t,e){return t.replace(d$,"#")+e}function p$(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ym=()=>({left:window.scrollX,top:window.scrollY});function m$(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=p$(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Iw(t,e){return(history.state?history.state.position-e:-1)+t}const M_=new Map;function g$(t,e){M_.set(t,e)}function y$(t){const e=M_.get(t);return M_.delete(t),e}let _$=()=>location.protocol+"//"+location.host;function RO(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),ww(l,"")}return ww(n,t)+r+i}function v$(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=RO(t,location),p=n.value,m=e.value;let g=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}g=m?d.position-m.position:0}else r(f);i.forEach(y=>{y(n.value,p,{delta:g,type:ku.pop,direction:g?g>0?zc.forward:zc.back:zc.unknown})})};function l(){o=n.value}function c(d){i.push(d);const f=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(it({},d.state,{scroll:ym()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Aw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?ym():null}}function b$(t){const{history:e,location:n}=window,r={value:RO(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:_$()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=it({},e.state,Aw(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=it({},i.value,e.state,{forward:l,scroll:ym()});s(u.current,u,!0);const h=it({},Aw(r.value,l,null),{position:u.position+1},c);s(l,h,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function E$(t){t=h$(t);const e=b$(t),n=v$(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=it({location:"",base:t,go:r,createHref:f$.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function T$(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),E$(t)}function w$(t){return typeof t=="string"||t&&typeof t=="object"}function kO(t){return typeof t=="string"||typeof t=="symbol"}const is={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},OO=Symbol("");var Cw;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Cw||(Cw={}));function wl(t,e){return it(new Error,{type:t,[OO]:!0},e)}function Ci(t,e){return t instanceof Error&&OO in t&&(e==null||!!(t.type&e))}const Rw="[^/]+?",S$={sensitive:!1,strict:!1,start:!0,end:!0},I$=/[.+*?^${}()[\]/\\]/g;function A$(t,e){const n=it({},S$,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(I$,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:g,regexp:y}=d;s.push({name:p,repeatable:m,optional:g});const _=y||Rw;if(_!==Rw){f+=10;try{new RegExp(`(${_})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+w.message)}}let E=m?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;h||(E=g&&c.length<2?`(?:/${E})`:"/"+E),g&&(E+="?"),i+=E,f+=20,g&&(f+=-8),m&&(f+=-20),_===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=s[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:g}=f,y=p in c?c[p]:"";if(zr(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=zr(y)?y.join("/"):y;if(!_)if(g)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=_}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function C$(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function R$(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=C$(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(kw(r))return 1;if(kw(i))return-1}return i.length-r.length}function kw(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const k$={type:0,value:""},O$=/[a-zA-Z0-9_]/;function N$(t){if(!t)return[[]];if(t==="/")return[[k$]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:O$.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}function M$(t,e,n){const r=A$(N$(t.path),n),i=it(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function P$(t,e){const n=[],r=new Map;e=Mw({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,h,d){const f=!d,p=x$(u);p.aliasOf=d&&d.record;const m=Mw(e,u),g=[p];if("alias"in u){const E=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of E)g.push(it({},p,{components:d?d.record.components:p.components,path:w,aliasOf:d?d.record:p}))}let y,_;for(const E of g){const{path:w}=E;if(h&&w[0]!=="/"){const S=h.record.path,I=S[S.length-1]==="/"?"":"/";E.path=h.record.path+(w&&I+w)}if(y=M$(E,h,m),d?d.alias.push(y):(_=_||y,_!==y&&_.alias.push(y),f&&u.name&&!Nw(y)&&o(u.name)),p.children){const S=p.children;for(let I=0;I<S.length;I++)s(S[I],y,d&&d.children[I])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return _?()=>{o(_)}:Hc}function o(u){if(kO(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&R$(u,n[h])>=0&&(u.record.path!==n[h].record.path||!NO(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Nw(u)&&r.set(u.record.name,u)}function c(u,h){let d,f={},p,m;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw wl(1,{location:u});m=d.record.name,f=it(Ow(h.params,d.keys.filter(_=>!_.optional).concat(d.parent?d.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),u.params&&Ow(u.params,d.keys.map(_=>_.name))),p=d.stringify(f)}else if(u.path!=null)p=u.path,d=n.find(_=>_.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=h.name?r.get(h.name):n.find(_=>_.re.test(h.path)),!d)throw wl(1,{location:u,currentLocation:h});m=d.record.name,f=it({},h.params,u.params),p=d.stringify(f)}const g=[];let y=d;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:p,params:f,matched:g,meta:L$(g)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function Ow(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function x$(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:D$(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function D$(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Nw(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function L$(t){return t.reduce((e,n)=>it(e,n.meta),{})}function Mw(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function NO(t,e){return e.children.some(n=>n===t||NO(t,n))}function V$(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(wO," "),o=s.indexOf("="),a=Ru(o<0?s:s.slice(0,o)),l=o<0?null:Ru(s.slice(o+1));if(a in e){let c=e[a];zr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Pw(t){let e="";for(let n in t){const r=t[n];if(n=n$(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(zr(r)?r.map(s=>s&&N_(s)):[r&&N_(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function F$(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=zr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const B$=Symbol(""),xw=Symbol(""),_m=Symbol(""),x1=Symbol(""),P_=Symbol("");function lc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function fs(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(wl(4,{from:n,to:e})):d instanceof Error?l(d):w$(d)?l(wl(2,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=s(()=>t.call(r&&r.instances[i],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function Cg(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(U$(l)){const u=(l.__vccOpts||l)[e];u&&s.push(fs(u,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=WU(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&fs(f,n,r,o,a,i)()}))}}return s}function U$(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Dw(t){const e=Yn(_m),n=Yn(x1),r=Pt(()=>e.resolve(Ue(t.to))),i=Pt(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Tl.bind(null,u));if(d>-1)return d;const f=Lw(l[c-2]);return c>1&&Lw(u)===f&&h[h.length-1].path!==f?h.findIndex(Tl.bind(null,l[c-2])):d}),s=Pt(()=>i.value>-1&&j$(n.params,r.value.params)),o=Pt(()=>i.value>-1&&i.value===n.matched.length-1&&CO(n.params,r.value.params));function a(l={}){return z$(l)?e[Ue(t.replace)?"replace":"push"](Ue(t.to)).catch(Hc):Promise.resolve()}return{route:r,href:Pt(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const $$=Zn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Dw,setup(t,{slots:e}){const n=Wu(Dw(t)),{options:r}=Yn(_m),i=Pt(()=>({[Vw(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Vw(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Do("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),H$=$$;function z$(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function j$(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!zr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Lw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Vw=(t,e,n)=>t??e??n,W$=Zn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Yn(P_),i=Pt(()=>t.route||r.value),s=Yn(xw,0),o=Pt(()=>{let c=Ue(s);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Pt(()=>i.value.matched[o.value]);bd(xw,Pt(()=>o.value+1)),bd(B$,a),bd(P_,i);const l=xe();return Bi(()=>[l.value,a.value,t.name],([c,u,h],[d,f,p])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Tl(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Fw(n.default,{Component:d,route:c});const f=h.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,g=Do(d,it({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Fw(n.default,{Component:g,route:c})||g}}});function Fw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const G$=W$;function q$(t){const e=P$(t.routes,t),n=t.parseQuery||V$,r=t.stringifyQuery||Pw,i=t.history,s=lc(),o=lc(),a=lc(),l=lA(is);let c=is;Aa&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ig.bind(null,R=>""+R),h=Ig.bind(null,i$),d=Ig.bind(null,Ru);function f(R,J){let q,G;return kO(R)?(q=e.getRecordMatcher(R),G=J):G=R,e.addRoute(G,q)}function p(R){const J=e.getRecordMatcher(R);J&&e.removeRoute(J)}function m(){return e.getRoutes().map(R=>R.record)}function g(R){return!!e.getRecordMatcher(R)}function y(R,J){if(J=it({},J||l.value),typeof R=="string"){const T=Ag(n,R,J.path),C=e.resolve({path:T.path},J),D=i.createHref(T.fullPath);return it(T,C,{params:d(C.params),hash:Ru(T.hash),redirectedFrom:void 0,href:D})}let q;if(R.path!=null)q=it({},R,{path:Ag(n,R.path,J.path).path});else{const T=it({},R.params);for(const C in T)T[C]==null&&delete T[C];q=it({},R,{params:h(T)}),J.params=h(J.params)}const G=e.resolve(q,J),Te=R.hash||"";G.params=u(d(G.params));const We=a$(r,it({},R,{hash:t$(Te),path:G.path})),b=i.createHref(We);return it({fullPath:We,hash:Te,query:r===Pw?F$(R.query):R.query||{}},G,{redirectedFrom:void 0,href:b})}function _(R){return typeof R=="string"?Ag(n,R,l.value.path):it({},R)}function E(R,J){if(c!==R)return wl(8,{from:J,to:R})}function w(R){return x(R)}function S(R){return w(it(_(R),{replace:!0}))}function I(R){const J=R.matched[R.matched.length-1];if(J&&J.redirect){const{redirect:q}=J;let G=typeof q=="function"?q(R):q;return typeof G=="string"&&(G=G.includes("?")||G.includes("#")?G=_(G):{path:G},G.params={}),it({query:R.query,hash:R.hash,params:G.path!=null?{}:R.params},G)}}function x(R,J){const q=c=y(R),G=l.value,Te=R.state,We=R.force,b=R.replace===!0,T=I(q);if(T)return x(it(_(T),{state:typeof T=="object"?it({},Te,T.state):Te,force:We,replace:b}),J||q);const C=q;C.redirectedFrom=J;let D;return!We&&l$(r,G,q)&&(D=wl(16,{to:C,from:G}),Z(G,G,!0,!1)),(D?Promise.resolve(D):B(C,G)).catch(M=>Ci(M)?Ci(M,2)?M:j(M):P(M,C,G)).then(M=>{if(M){if(Ci(M,2))return x(it({replace:b},_(M.to),{state:typeof M.to=="object"?it({},Te,M.to.state):Te,force:We}),J||C)}else M=z(C,G,!0,b,Te);return W(C,G,M),M})}function O(R,J){const q=E(R,J);return q?Promise.reject(q):Promise.resolve()}function k(R){const J=ot.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(R):R()}function B(R,J){let q;const[G,Te,We]=K$(R,J);q=Cg(G.reverse(),"beforeRouteLeave",R,J);for(const T of G)T.leaveGuards.forEach(C=>{q.push(fs(C,R,J))});const b=O.bind(null,R,J);return q.push(b),dt(q).then(()=>{q=[];for(const T of s.list())q.push(fs(T,R,J));return q.push(b),dt(q)}).then(()=>{q=Cg(Te,"beforeRouteUpdate",R,J);for(const T of Te)T.updateGuards.forEach(C=>{q.push(fs(C,R,J))});return q.push(b),dt(q)}).then(()=>{q=[];for(const T of We)if(T.beforeEnter)if(zr(T.beforeEnter))for(const C of T.beforeEnter)q.push(fs(C,R,J));else q.push(fs(T.beforeEnter,R,J));return q.push(b),dt(q)}).then(()=>(R.matched.forEach(T=>T.enterCallbacks={}),q=Cg(We,"beforeRouteEnter",R,J,k),q.push(b),dt(q))).then(()=>{q=[];for(const T of o.list())q.push(fs(T,R,J));return q.push(b),dt(q)}).catch(T=>Ci(T,8)?T:Promise.reject(T))}function W(R,J,q){a.list().forEach(G=>k(()=>G(R,J,q)))}function z(R,J,q,G,Te){const We=E(R,J);if(We)return We;const b=J===is,T=Aa?history.state:{};q&&(G||b?i.replace(R.fullPath,it({scroll:b&&T&&T.scroll},Te)):i.push(R.fullPath,Te)),l.value=R,Z(R,J,q,b),j()}let me;function K(){me||(me=i.listen((R,J,q)=>{if(!Mt.listening)return;const G=y(R),Te=I(G);if(Te){x(it(Te,{replace:!0}),G).catch(Hc);return}c=G;const We=l.value;Aa&&g$(Iw(We.fullPath,q.delta),ym()),B(G,We).catch(b=>Ci(b,12)?b:Ci(b,2)?(x(b.to,G).then(T=>{Ci(T,20)&&!q.delta&&q.type===ku.pop&&i.go(-1,!1)}).catch(Hc),Promise.reject()):(q.delta&&i.go(-q.delta,!1),P(b,G,We))).then(b=>{b=b||z(G,We,!1),b&&(q.delta&&!Ci(b,8)?i.go(-q.delta,!1):q.type===ku.pop&&Ci(b,20)&&i.go(-1,!1)),W(G,We,b)}).catch(Hc)}))}let $=lc(),N=lc(),F;function P(R,J,q){j(R);const G=N.list();return G.length?G.forEach(Te=>Te(R,J,q)):console.error(R),Promise.reject(R)}function ae(){return F&&l.value!==is?Promise.resolve():new Promise((R,J)=>{$.add([R,J])})}function j(R){return F||(F=!R,K(),$.list().forEach(([J,q])=>R?q(R):J()),$.reset()),R}function Z(R,J,q,G){const{scrollBehavior:Te}=t;if(!Aa||!Te)return Promise.resolve();const We=!q&&y$(Iw(R.fullPath,0))||(G||!q)&&history.state&&history.state.scroll||null;return Dl().then(()=>Te(R,J,We)).then(b=>b&&m$(b)).catch(b=>P(b,R,J))}const ce=R=>i.go(R);let rt;const ot=new Set,Mt={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:g,getRoutes:m,resolve:y,options:t,push:w,replace:S,go:ce,back:()=>ce(-1),forward:()=>ce(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:N.add,isReady:ae,install(R){const J=this;R.component("RouterLink",H$),R.component("RouterView",G$),R.config.globalProperties.$router=J,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>Ue(l)}),Aa&&!rt&&l.value===is&&(rt=!0,w(i.location).catch(Te=>{}));const q={};for(const Te in is)Object.defineProperty(q,Te,{get:()=>l.value[Te],enumerable:!0});R.provide(_m,J),R.provide(x1,sA(q)),R.provide(P_,l);const G=R.unmount;ot.add(R),R.unmount=function(){ot.delete(R),ot.size<1&&(c=is,me&&me(),me=null,l.value=is,rt=!1,F=!1),G()}}};function dt(R){return R.reduce((J,q)=>J.then(()=>k(q)),Promise.resolve())}return Mt}function K$(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Tl(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Tl(c,l))||i.push(l))}return[n,r,i]}function D1(){return Yn(_m)}function vm(){return Yn(x1)}const Y$=["current"],J$=["current"],Q$=["current"],X$=["src"],Z$=Zn({__name:"menuBar.vapor",async setup(t){let e,n;const r=D1(),i=vm(),s=([e,n]=ol(()=>Pp()),e=await e,n(),e);return(o,a)=>(ie(),ye("header",null,[A("nav",null,[A("a",{class:"btn",current:Ue(i).name=="Home",icon:"",onClick:a[0]||(a[0]=lt(l=>Ue(r).push({name:"Home"}),["prevent"]))},"home",8,Y$),A("a",{class:"btn",current:Ue(i).name=="loginScreen",icon:"",onClick:a[1]||(a[1]=lt(l=>Ue(r).push({name:"loginScreen"}),["prevent"]))},"person",8,J$),Ue(s)?(ie(),ye("a",{key:0,class:"imgbtn",current:Ue(i).name=="loginScreen",onClick:a[2]||(a[2]=lt(l=>Ue(r).push({name:"loginScreen"}),["prevent"]))},[Ue(s).photoURL?(ie(),ye("img",{key:0,class:"bobble",src:Ue(s).photoURL},null,8,X$)):qe("",!0)],8,Q$)):qe("",!0)])]))}}),eo=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},eH=eo(Z$,[["__scopeId","data-v-8d9c805c"]]),tH=Zn({__name:"App",setup(t){const e=vm();return(n,r)=>{const i=lx("RouterView");return ie(),ye("main",null,[(ie(),Jt(Pb,null,{default:ks(()=>[De(eH)]),_:1})),(ie(),Jt(Pb,null,{default:ks(()=>[(ie(),Jt(i,{key:Ue(e).fullPath}))]),_:1}))])}}});function MO(t){return Iv()?(qI(t),!0):!1}function Ou(t){return typeof t=="function"?t():Ue(t)}const PO=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const nH=t=>t!=null,rH=()=>{};function xO(t){return t||ca()}function iH(...t){if(t.length!==1)return QP(...t);const e=t[0];return typeof e=="function"?Nv(hA(()=>({get:e,set:rH}))):xe(e)}function sH(t,e){xO(e)&&Ku(t,e)}function oH(t,e=!0,n){xO()?qu(t,n):e?t():Dl(t)}function DO(t){var e;const n=Ou(t);return(e=n==null?void 0:n.$el)!=null?e:n}const aH=PO?window:void 0,LO=PO?window.document:void 0;function lH(){const t=xe(!1),e=ca();return e&&qu(()=>{t.value=!0},e),t}function cH(t){const e=lH();return Pt(()=>(e.value,!!t()))}function uH(t,e,n={}){const{window:r=aH,...i}=n;let s;const o=cH(()=>r&&"MutationObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},l=Pt(()=>{const d=Ou(t),f=(Array.isArray(d)?d:[d]).map(DO).filter(nH);return new Set(f)}),c=Bi(()=>l.value,d=>{a(),o.value&&r&&d.size&&(s=new MutationObserver(e),d.forEach(f=>s.observe(f,i)))},{immediate:!0,flush:"post"}),u=()=>s==null?void 0:s.takeRecords(),h=()=>{a(),c()};return MO(h),{isSupported:o,stop:h,takeRecords:u}}function bm(t=null,e={}){var n,r,i;const{document:s=LO,restoreOnUnmount:o=h=>h}=e,a=(n=s==null?void 0:s.title)!=null?n:"",l=iH((r=t??(s==null?void 0:s.title))!=null?r:null),c=t&&typeof t=="function";function u(h){if(!("titleTemplate"in e))return h;const d=e.titleTemplate||"%s";return typeof d=="function"?d(h):Ou(d).replace(/%s/g,h)}return Bi(l,(h,d)=>{h!==d&&s&&(s.title=u(typeof h=="string"?h:""))},{immediate:!0}),e.observe&&!e.titleTemplate&&s&&!c&&uH((i=s.head)==null?void 0:i.querySelector("title"),()=>{s&&s.title!==l.value&&(l.value=u(s.title))},{childList:!0}),sH(()=>{if(o){const h=o(a,l.value||"");h!=null&&s&&(s.title=h)}}),l}const Kl=t=>(_p("data-v-dceb53fe"),t=t(),vp(),t),hH=Kl(()=>A("h1",{class:"font-size-H"},[pt("Bingo "),A("em",null,"Bongo")],-1)),dH=Kl(()=>A("h2",{class:"font-size-L"},"Simplifying OSRS Clan Bingos",-1)),fH={class:"col-2"},pH={class:"ghost-board"},mH=Kl(()=>A("h2",null,"No more spreadsheets",-1)),gH=Kl(()=>A("p",null," You know how annoying it is to keep track of scores during clan bingos, right? Yeah, it's a pain. ",-1)),yH=Kl(()=>A("p",null," No more dealing with spreadsheets or scribbling down scores - Bingo Bongo has got my back on that front. It's like having a reliable sidekick for our clan events, making everything run smoothly and keeping the stress levels down. ",-1)),_H=Kl(()=>A("div",null,null,-1)),vH=Zn({__name:"home.vapor",setup(t){const e=bm();e.value="Bingo Bongo - an osrs bingo app";const n=D1(),r=new Set,i=s=>{for(;r.size<3;)r.add(Math.floor(Math.random()*9)+1);return r.has(s)?"var(--secondary)":"var(--primary)"};return(s,o)=>(ie(),ye(tt,null,[hH,dH,A("div",fH,[A("div",pH,[(ie(),ye(tt,null,pi(9,a=>A("div",{class:"tile",key:a+"tile",style:Bs({"--rotate":Math.random()*6-3+"deg",backgroundColor:i(a)})},null,4)),64))]),A("div",null,[mH,gH,yH,A("a",{class:"btn",big:"",submit:"",onClick:o[0]||(o[0]=a=>Ue(n).push({name:"createNewBingo"}))},"Start a new event!")])]),_H],64))}}),bH=eo(vH,[["__scopeId","data-v-dceb53fe"]]);var VO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function FO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BO={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(VO,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var $=["th","st","nd","rd"],N=K%100;return"["+K+($[(N-20)%10]||$[N]||$[0])+"]"}},E=function(K,$,N){var F=String(K);return!F||F.length>=$?K:""+Array($+1-F.length).join(N)+K},w={s:E,z:function(K){var $=-K.utcOffset(),N=Math.abs($),F=Math.floor(N/60),P=N%60;return($<=0?"+":"-")+E(F,2,"0")+":"+E(P,2,"0")},m:function K($,N){if($.date()<N.date())return-K(N,$);var F=12*(N.year()-$.year())+(N.month()-$.month()),P=$.clone().add(F,h),ae=N-P<0,j=$.clone().add(F+(ae?-1:1),h);return+(-(F+(N-P)/(ae?P-j:j-P))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:h,y:f,w:u,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},S="en",I={};I[S]=_;var x="$isDayjsObject",O=function(K){return K instanceof z||!(!K||!K[x])},k=function K($,N,F){var P;if(!$)return S;if(typeof $=="string"){var ae=$.toLowerCase();I[ae]&&(P=ae),N&&(I[ae]=N,P=ae);var j=$.split("-");if(!P&&j.length>1)return K(j[0])}else{var Z=$.name;I[Z]=$,P=Z}return!F&&P&&(S=P),P||!F&&S},B=function(K,$){if(O(K))return K.clone();var N=typeof $=="object"?$:{};return N.date=K,N.args=arguments,new z(N)},W=w;W.l=k,W.i=O,W.w=function(K,$){return B(K,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var z=function(){function K(N){this.$L=k(N.locale,null,!0),this.parse(N),this.$x=this.$x||N.x||{},this[x]=!0}var $=K.prototype;return $.parse=function(N){this.$d=function(F){var P=F.date,ae=F.utc;if(P===null)return new Date(NaN);if(W.u(P))return new Date;if(P instanceof Date)return new Date(P);if(typeof P=="string"&&!/Z$/i.test(P)){var j=P.match(g);if(j){var Z=j[2]-1||0,ce=(j[7]||"0").substring(0,3);return ae?new Date(Date.UTC(j[1],Z,j[3]||1,j[4]||0,j[5]||0,j[6]||0,ce)):new Date(j[1],Z,j[3]||1,j[4]||0,j[5]||0,j[6]||0,ce)}}return new Date(P)}(N),this.init()},$.init=function(){var N=this.$d;this.$y=N.getFullYear(),this.$M=N.getMonth(),this.$D=N.getDate(),this.$W=N.getDay(),this.$H=N.getHours(),this.$m=N.getMinutes(),this.$s=N.getSeconds(),this.$ms=N.getMilliseconds()},$.$utils=function(){return W},$.isValid=function(){return this.$d.toString()!==m},$.isSame=function(N,F){var P=B(N);return this.startOf(F)<=P&&P<=this.endOf(F)},$.isAfter=function(N,F){return B(N)<this.startOf(F)},$.isBefore=function(N,F){return this.endOf(F)<B(N)},$.$g=function(N,F,P){return W.u(N)?this[F]:this.set(P,N)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(N,F){var P=this,ae=!!W.u(F)||F,j=W.p(N),Z=function(q,G){var Te=W.w(P.$u?Date.UTC(P.$y,G,q):new Date(P.$y,G,q),P);return ae?Te:Te.endOf(c)},ce=function(q,G){return W.w(P.toDate()[q].apply(P.toDate("s"),(ae?[0,0,0,0]:[23,59,59,999]).slice(G)),P)},rt=this.$W,ot=this.$M,Mt=this.$D,dt="set"+(this.$u?"UTC":"");switch(j){case f:return ae?Z(1,0):Z(31,11);case h:return ae?Z(1,ot):Z(0,ot+1);case u:var R=this.$locale().weekStart||0,J=(rt<R?rt+7:rt)-R;return Z(ae?Mt-J:Mt+(6-J),ot);case c:case p:return ce(dt+"Hours",0);case l:return ce(dt+"Minutes",1);case a:return ce(dt+"Seconds",2);case o:return ce(dt+"Milliseconds",3);default:return this.clone()}},$.endOf=function(N){return this.startOf(N,!1)},$.$set=function(N,F){var P,ae=W.p(N),j="set"+(this.$u?"UTC":""),Z=(P={},P[c]=j+"Date",P[p]=j+"Date",P[h]=j+"Month",P[f]=j+"FullYear",P[l]=j+"Hours",P[a]=j+"Minutes",P[o]=j+"Seconds",P[s]=j+"Milliseconds",P)[ae],ce=ae===c?this.$D+(F-this.$W):F;if(ae===h||ae===f){var rt=this.clone().set(p,1);rt.$d[Z](ce),rt.init(),this.$d=rt.set(p,Math.min(this.$D,rt.daysInMonth())).$d}else Z&&this.$d[Z](ce);return this.init(),this},$.set=function(N,F){return this.clone().$set(N,F)},$.get=function(N){return this[W.p(N)]()},$.add=function(N,F){var P,ae=this;N=Number(N);var j=W.p(F),Z=function(ot){var Mt=B(ae);return W.w(Mt.date(Mt.date()+Math.round(ot*N)),ae)};if(j===h)return this.set(h,this.$M+N);if(j===f)return this.set(f,this.$y+N);if(j===c)return Z(1);if(j===u)return Z(7);var ce=(P={},P[a]=r,P[l]=i,P[o]=n,P)[j]||1,rt=this.$d.getTime()+N*ce;return W.w(rt,this)},$.subtract=function(N,F){return this.add(-1*N,F)},$.format=function(N){var F=this,P=this.$locale();if(!this.isValid())return P.invalidDate||m;var ae=N||"YYYY-MM-DDTHH:mm:ssZ",j=W.z(this),Z=this.$H,ce=this.$m,rt=this.$M,ot=P.weekdays,Mt=P.months,dt=P.meridiem,R=function(G,Te,We,b){return G&&(G[Te]||G(F,ae))||We[Te].slice(0,b)},J=function(G){return W.s(Z%12||12,G,"0")},q=dt||function(G,Te,We){var b=G<12?"AM":"PM";return We?b.toLowerCase():b};return ae.replace(y,function(G,Te){return Te||function(We){switch(We){case"YY":return String(F.$y).slice(-2);case"YYYY":return W.s(F.$y,4,"0");case"M":return rt+1;case"MM":return W.s(rt+1,2,"0");case"MMM":return R(P.monthsShort,rt,Mt,3);case"MMMM":return R(Mt,rt);case"D":return F.$D;case"DD":return W.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return R(P.weekdaysMin,F.$W,ot,2);case"ddd":return R(P.weekdaysShort,F.$W,ot,3);case"dddd":return ot[F.$W];case"H":return String(Z);case"HH":return W.s(Z,2,"0");case"h":return J(1);case"hh":return J(2);case"a":return q(Z,ce,!0);case"A":return q(Z,ce,!1);case"m":return String(ce);case"mm":return W.s(ce,2,"0");case"s":return String(F.$s);case"ss":return W.s(F.$s,2,"0");case"SSS":return W.s(F.$ms,3,"0");case"Z":return j}return null}(G)||j.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(N,F,P){var ae,j=this,Z=W.p(F),ce=B(N),rt=(ce.utcOffset()-this.utcOffset())*r,ot=this-ce,Mt=function(){return W.m(j,ce)};switch(Z){case f:ae=Mt()/12;break;case h:ae=Mt();break;case d:ae=Mt()/3;break;case u:ae=(ot-rt)/6048e5;break;case c:ae=(ot-rt)/864e5;break;case l:ae=ot/i;break;case a:ae=ot/r;break;case o:ae=ot/n;break;default:ae=ot}return P?ae:W.a(ae)},$.daysInMonth=function(){return this.endOf(h).$D},$.$locale=function(){return I[this.$L]},$.locale=function(N,F){if(!N)return this.$L;var P=this.clone(),ae=k(N,F,!0);return ae&&(P.$L=ae),P},$.clone=function(){return W.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},K}(),me=z.prototype;return B.prototype=me,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",p]].forEach(function(K){me[K[1]]=function($){return this.$g($,K[0],K[1])}}),B.extend=function(K,$){return K.$i||(K($,z,B),K.$i=!0),B},B.locale=k,B.isDayjs=O,B.unix=function(K){return B(1e3*K)},B.en=I[S],B.Ls=I,B.p={},B})})(BO);var EH=BO.exports;const UO=FO(EH);var $O={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(VO,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(m){return(m=+m)+(m>68?1900:2e3)},c=function(m){return function(g){this[m]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),_=60*y[1]+(+y[2]||0);return _===0?0:y[0]==="+"?-_:_}(m)}],h=function(m){var g=a[m];return g&&(g.indexOf?g:g.s.concat(g.f))},d=function(m,g){var y,_=a.meridiem;if(_){for(var E=1;E<=24;E+=1)if(m.indexOf(_(E,0,g))>-1){y=E>12;break}}else y=m===(g?"pm":"PM");return y},f={A:[o,function(m){this.afternoon=d(m,!1)}],a:[o,function(m){this.afternoon=d(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[i,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[i,c("day")],Do:[o,function(m){var g=a.ordinal,y=m.match(/\d+/);if(this.day=y[0],g)for(var _=1;_<=31;_+=1)g(_).replace(/\[|\]/g,"")===m&&(this.day=_)}],M:[s,c("month")],MM:[i,c("month")],MMM:[o,function(m){var g=h("months"),y=(h("monthsShort")||g.map(function(_){return _.slice(0,3)})).indexOf(m)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(m){var g=h("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(m){this.year=l(m)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function p(m){var g,y;g=m,y=a&&a.formats;for(var _=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(k,B,W){var z=W&&W.toUpperCase();return B||y[W]||n[W]||y[z].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(me,K,$){return K||$.slice(1)})})).match(r),E=_.length,w=0;w<E;w+=1){var S=_[w],I=f[S],x=I&&I[0],O=I&&I[1];_[w]=O?{regex:x,parser:O}:S.replace(/^\[|\]$/g,"")}return function(k){for(var B={},W=0,z=0;W<E;W+=1){var me=_[W];if(typeof me=="string")z+=me.length;else{var K=me.regex,$=me.parser,N=k.slice(z),F=K.exec(N)[0];$.call(B,F),k=k.replace(F,"")}}return function(P){var ae=P.afternoon;if(ae!==void 0){var j=P.hours;ae?j<12&&(P.hours+=12):j===12&&(P.hours=0),delete P.afternoon}}(B),B}}return function(m,g,y){y.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var _=g.prototype,E=_.parse;_.parse=function(w){var S=w.date,I=w.utc,x=w.args;this.$u=I;var O=x[1];if(typeof O=="string"){var k=x[2]===!0,B=x[3]===!0,W=k||B,z=x[2];B&&(z=x[2]),a=this.$locale(),!k&&z&&(a=y.Ls[z]),this.$d=function(N,F,P){try{if(["x","X"].indexOf(F)>-1)return new Date((F==="X"?1e3:1)*N);var ae=p(F)(N),j=ae.year,Z=ae.month,ce=ae.day,rt=ae.hours,ot=ae.minutes,Mt=ae.seconds,dt=ae.milliseconds,R=ae.zone,J=new Date,q=ce||(j||Z?1:J.getDate()),G=j||J.getFullYear(),Te=0;j&&!Z||(Te=Z>0?Z-1:J.getMonth());var We=rt||0,b=ot||0,T=Mt||0,C=dt||0;return R?new Date(Date.UTC(G,Te,q,We,b,T,C+60*R.offset*1e3)):P?new Date(Date.UTC(G,Te,q,We,b,T,C)):new Date(G,Te,q,We,b,T,C)}catch{return new Date("")}}(S,O,I),this.init(),z&&z!==!0&&(this.$L=this.locale(z).$L),W&&S!=this.format(O)&&(this.$d=new Date("")),a={}}else if(O instanceof Array)for(var me=O.length,K=1;K<=me;K+=1){x[1]=O[K-1];var $=y.apply(this,x);if($.isValid()){this.$d=$.$d,this.$L=$.$L,this.init();break}K===me&&(this.$d=new Date(""))}else E.call(this,w)}}})})($O);var TH=$O.exports;const wH=FO(TH);var SH={},Bw={defaultUserAgent:`WiseOldMan JS Client v${SH.npm_package_version}`,baseAPIUrl:"https://api.wiseoldman.net/v2"};function IH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ss(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}UO.extend(wH);function x_(t,e){return Array.isArray(t)?t.map(n=>x_(n,e)):t!==null&&typeof t=="object"?Object.fromEntries(Object.keys(t).map(n=>[n,x_(t[n],e)])):e(t)}function AH(t){return!t||typeof t!="string"?!1:t.endsWith("Z")&&UO(t.slice(0,-1),"YYYY-MM-DDTHH:mm:ss.SSS",!0).isValid()}function CH(t){return x_(t,e=>AH(e)?new Date(e):e)}function Uw(t,e,n){if(n){if(t===400)throw new RH(e,n.message,n.data);if(t===403)throw new kH(e,n.message);if(t===404)throw new OH(e,n.message);if(t===429)throw new NH(e,n.message);if(t===500)throw new MH(e,n.message)}}class RH extends Error{constructor(e,n,r){super(n),this.name="BadRequestError",this.resource=e,this.statusCode=400,this.data=r}}class kH extends Error{constructor(e,n){super(n),this.name="ForbiddenError",this.resource=e,this.statusCode=403}}class OH extends Error{constructor(e,n){super(n),this.name="NotFoundError",this.resource=e,this.statusCode=404}}class NH extends Error{constructor(e,n){super(n),this.name="RateLimitError",this.resource=e,this.statusCode=429}}class MH extends Error{constructor(e,n){super(n),this.name="InternalServerError",this.resource=e,this.statusCode=500}}class to{constructor(e,n){this.baseUrl=n,this.headers=Object.assign({Accept:"application/json","Content-Type":"application/json"},e)}buildParams(e){var n=IH(e,[]);const r=new URLSearchParams;Object.keys(n).filter(s=>n[s]!==void 0).forEach(s=>r.set(s,n[s]));const i=r.toString();return i?`?${i}`:""}fetch({method:e,path:n,body:r,params:i}){return ss(this,void 0,void 0,function*(){const s={method:e,body:void 0,headers:this.headers};let o="";return r&&(s.body=JSON.stringify(r)),i&&(o=this.buildParams(i)),yield fetch(this.baseUrl+n+o,s)})}request({method:e,path:n,body:r,params:i}){return ss(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.json();if(s.ok)return CH(o);Uw(s.status,n,o)})}requestText({method:e,path:n,body:r,params:i}){return ss(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.text();if(s.ok)return o;Uw(s.status,n,JSON.parse(o))})}postRequest(e,n){return ss(this,void 0,void 0,function*(){return yield this.request({method:"POST",path:e,body:n||{}})})}putRequest(e,n){return ss(this,void 0,void 0,function*(){return yield this.request({method:"PUT",path:e,body:n||{}})})}deleteRequest(e,n){return ss(this,void 0,void 0,function*(){return yield this.request({method:"DELETE",path:e,body:n||{}})})}getRequest(e,n){return ss(this,void 0,void 0,function*(){return yield this.request({method:"GET",path:e,params:n})})}getText(e,n){return ss(this,void 0,void 0,function*(){return yield this.requestText({method:"GET",path:e,params:n})})}}class PH extends to{getDeltaLeaderboard(e){return this.getRequest("/deltas/leaderboard",e)}}class xH extends to{searchGroups(e,n){return this.getRequest("/groups",Object.assign({name:e},n))}getGroupDetails(e){return this.getRequest(`/groups/${e}`)}createGroup(e){return this.postRequest("/groups",e)}editGroup(e,n,r){return this.putRequest(`/groups/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteGroup(e,n){return this.deleteRequest(`/groups/${e}`,{verificationCode:n})}addMembers(e,n,r){return this.postRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}removeMembers(e,n,r){return this.deleteRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}changeRole(e,n,r){return this.putRequest(`/groups/${e}/role`,Object.assign(Object.assign({},n),{verificationCode:r}))}updateAll(e,n){return this.postRequest(`/groups/${e}/update-all`,{verificationCode:n})}getGroupCompetitions(e,n){return this.getRequest(`/groups/${e}/competitions`,Object.assign({},n))}getGroupGains(e,n,r){return this.getRequest(`/groups/${e}/gained`,Object.assign(Object.assign({},r),n))}getGroupAchievements(e,n){return this.getRequest(`/groups/${e}/achievements`,Object.assign({},n))}getGroupRecords(e,n,r){return this.getRequest(`/groups/${e}/records`,Object.assign(Object.assign({},r),n))}getGroupHiscores(e,n,r){return this.getRequest(`/groups/${e}/hiscores`,Object.assign(Object.assign({},r),{metric:n}))}getGroupNameChanges(e,n){return this.getRequest(`/groups/${e}/name-changes`,Object.assign({},n))}getGroupStatistics(e){return this.getRequest(`/groups/${e}/statistics`)}getGroupActivity(e,n){return this.getRequest(`/groups/${e}/activity`,Object.assign({},n))}getMembersCSV(e){return this.getText(`/groups/${e}/csv`)}}class DH extends to{searchPlayers(e,n){return this.getRequest("/players/search",Object.assign({username:e},n))}updatePlayer(e){return this.postRequest(`/players/${e}`)}assertPlayerType(e){return this.postRequest(`/players/${e}/assert-type`)}getPlayerDetails(e){return this.getRequest(`/players/${e}`)}getPlayerDetailsById(e){return this.getRequest(`/players/id/${e}`)}getPlayerAchievements(e){return this.getRequest(`/players/${e}/achievements`)}getPlayerAchievementProgress(e){return this.getRequest(`/players/${e}/achievements/progress`)}getPlayerCompetitions(e,n,r){return this.getRequest(`/players/${e}/competitions`,Object.assign(Object.assign({},n),r))}getPlayerCompetitionStandings(e,n){return this.getRequest(`/players/${e}/competitions/standings`,n)}getPlayerGroups(e,n){return this.getRequest(`/players/${e}/groups`,n)}getPlayerGains(e,n){return this.getRequest(`/players/${e}/gained`,n)}getPlayerGainsAsArray(e,n){return this.getRequest(`/players/${e}/gained`,Object.assign(Object.assign({},n),{formatting:"array"}))}getPlayerRecords(e,n){return this.getRequest(`/players/${e}/records`,n)}getPlayerSnapshots(e,n,r){return this.getRequest(`/players/${e}/snapshots`,Object.assign(Object.assign({},n),r))}getPlayerSnapshotTimeline(e,n,r){return this.getRequest(`/players/${e}/snapshots/timeline`,Object.assign(Object.assign({},r),{metric:n}))}getPlayerNames(e){return this.getRequest(`/players/${e}/names`)}getPlayerArchives(e){return this.getRequest(`/players/${e}/archives`)}}class LH extends to{getRecordLeaderboard(e){return this.getRequest("/records/leaderboard",e)}}const ft={OVERALL:"overall",ATTACK:"attack",DEFENCE:"defence",STRENGTH:"strength",HITPOINTS:"hitpoints",RANGED:"ranged",PRAYER:"prayer",MAGIC:"magic",COOKING:"cooking",WOODCUTTING:"woodcutting",FLETCHING:"fletching",FISHING:"fishing",FIREMAKING:"firemaking",CRAFTING:"crafting",SMITHING:"smithing",MINING:"mining",HERBLORE:"herblore",AGILITY:"agility",THIEVING:"thieving",SLAYER:"slayer",FARMING:"farming",RUNECRAFTING:"runecrafting",HUNTER:"hunter",CONSTRUCTION:"construction"},un={LEAGUE_POINTS:"league_points",BOUNTY_HUNTER_HUNTER:"bounty_hunter_hunter",BOUNTY_HUNTER_ROGUE:"bounty_hunter_rogue",CLUE_SCROLLS_ALL:"clue_scrolls_all",CLUE_SCROLLS_BEGINNER:"clue_scrolls_beginner",CLUE_SCROLLS_EASY:"clue_scrolls_easy",CLUE_SCROLLS_MEDIUM:"clue_scrolls_medium",CLUE_SCROLLS_HARD:"clue_scrolls_hard",CLUE_SCROLLS_ELITE:"clue_scrolls_elite",CLUE_SCROLLS_MASTER:"clue_scrolls_master",LAST_MAN_STANDING:"last_man_standing",PVP_ARENA:"pvp_arena",SOUL_WARS_ZEAL:"soul_wars_zeal",GUARDIANS_OF_THE_RIFT:"guardians_of_the_rift",COLOSSEUM_GLORY:"colosseum_glory"},he={ABYSSAL_SIRE:"abyssal_sire",ALCHEMICAL_HYDRA:"alchemical_hydra",ARTIO:"artio",BARROWS_CHESTS:"barrows_chests",BRYOPHYTA:"bryophyta",CALLISTO:"callisto",CALVARION:"calvarion",CERBERUS:"cerberus",CHAMBERS_OF_XERIC:"chambers_of_xeric",CHAMBERS_OF_XERIC_CM:"chambers_of_xeric_challenge_mode",CHAOS_ELEMENTAL:"chaos_elemental",CHAOS_FANATIC:"chaos_fanatic",COMMANDER_ZILYANA:"commander_zilyana",CORPOREAL_BEAST:"corporeal_beast",CRAZY_ARCHAEOLOGIST:"crazy_archaeologist",DAGANNOTH_PRIME:"dagannoth_prime",DAGANNOTH_REX:"dagannoth_rex",DAGANNOTH_SUPREME:"dagannoth_supreme",DERANGED_ARCHAEOLOGIST:"deranged_archaeologist",DUKE_SUCELLUS:"duke_sucellus",GENERAL_GRAARDOR:"general_graardor",GIANT_MOLE:"giant_mole",GROTESQUE_GUARDIANS:"grotesque_guardians",HESPORI:"hespori",KALPHITE_QUEEN:"kalphite_queen",KING_BLACK_DRAGON:"king_black_dragon",KRAKEN:"kraken",KREEARRA:"kreearra",KRIL_TSUTSAROTH:"kril_tsutsaroth",LUNAR_CHESTS:"lunar_chests",MIMIC:"mimic",NEX:"nex",NIGHTMARE:"nightmare",PHOSANIS_NIGHTMARE:"phosanis_nightmare",OBOR:"obor",PHANTOM_MUSPAH:"phantom_muspah",SARACHNIS:"sarachnis",SCORPIA:"scorpia",SCURRIUS:"scurrius",SKOTIZO:"skotizo",SOL_HEREDIT:"sol_heredit",SPINDEL:"spindel",TEMPOROSS:"tempoross",THE_GAUNTLET:"the_gauntlet",THE_CORRUPTED_GAUNTLET:"the_corrupted_gauntlet",THE_LEVIATHAN:"the_leviathan",THE_WHISPERER:"the_whisperer",THEATRE_OF_BLOOD:"theatre_of_blood",THEATRE_OF_BLOOD_HARD_MODE:"theatre_of_blood_hard_mode",THERMONUCLEAR_SMOKE_DEVIL:"thermonuclear_smoke_devil",TOMBS_OF_AMASCUT:"tombs_of_amascut",TOMBS_OF_AMASCUT_EXPERT:"tombs_of_amascut_expert",TZKAL_ZUK:"tzkal_zuk",TZTOK_JAD:"tztok_jad",VARDORVIS:"vardorvis",VENENATIS:"venenatis",VETION:"vetion",VORKATH:"vorkath",WINTERTODT:"wintertodt",ZALCANO:"zalcano",ZULRAH:"zulrah"},Vf={EHP:"ehp",EHB:"ehb"},D_=Object.assign(Object.assign(Object.assign(Object.assign({},ft),un),he),Vf),v={ACHIEVER:"achiever",ADAMANT:"adamant",ADEPT:"adept",ADMINISTRATOR:"administrator",ADMIRAL:"admiral",ADVENTURER:"adventurer",AIR:"air",ANCHOR:"anchor",APOTHECARY:"apothecary",ARCHER:"archer",ARMADYLEAN:"armadylean",ARTILLERY:"artillery",ARTISAN:"artisan",ASGARNIAN:"asgarnian",ASSASSIN:"assassin",ASSISTANT:"assistant",ASTRAL:"astral",ATHLETE:"athlete",ATTACKER:"attacker",BANDIT:"bandit",BANDOSIAN:"bandosian",BARBARIAN:"barbarian",BATTLEMAGE:"battlemage",BEAST:"beast",BERSERKER:"berserker",BLISTERWOOD:"blisterwood",BLOOD:"blood",BLUE:"blue",BOB:"bob",BODY:"body",BRASSICAN:"brassican",BRAWLER:"brawler",BRIGADIER:"brigadier",BRIGAND:"brigand",BRONZE:"bronze",BRUISER:"bruiser",BULWARK:"bulwark",BURGLAR:"burglar",BURNT:"burnt",CADET:"cadet",CAPTAIN:"captain",CARRY:"carry",CHAMPION:"champion",CHAOS:"chaos",CLERIC:"cleric",COLLECTOR:"collector",COLONEL:"colonel",COMMANDER:"commander",COMPETITOR:"competitor",COMPLETIONIST:"completionist",CONSTRUCTOR:"constructor",COOK:"cook",COORDINATOR:"coordinator",CORPORAL:"corporal",COSMIC:"cosmic",COUNCILLOR:"councillor",CRAFTER:"crafter",CREW:"crew",CRUSADER:"crusader",CUTPURSE:"cutpurse",DEATH:"death",DEFENDER:"defender",DEFILER:"defiler",DEPUTY_OWNER:"deputy_owner",DESTROYER:"destroyer",DIAMOND:"diamond",DISEASED:"diseased",DOCTOR:"doctor",DOGSBODY:"dogsbody",DRAGON:"dragon",DRAGONSTONE:"dragonstone",DRUID:"druid",DUELLIST:"duellist",EARTH:"earth",ELITE:"elite",EMERALD:"emerald",ENFORCER:"enforcer",EPIC:"epic",EXECUTIVE:"executive",EXPERT:"expert",EXPLORER:"explorer",FARMER:"farmer",FEEDER:"feeder",FIGHTER:"fighter",FIRE:"fire",FIREMAKER:"firemaker",FIRESTARTER:"firestarter",FISHER:"fisher",FLETCHER:"fletcher",FORAGER:"forager",FREMENNIK:"fremennik",GAMER:"gamer",GATHERER:"gatherer",GENERAL:"general",GNOME_CHILD:"gnome_child",GNOME_ELDER:"gnome_elder",GOBLIN:"goblin",GOLD:"gold",GOON:"goon",GREEN:"green",GREY:"grey",GUARDIAN:"guardian",GUTHIXIAN:"guthixian",HARPOON:"harpoon",HEALER:"healer",HELLCAT:"hellcat",HELPER:"helper",HERBOLOGIST:"herbologist",HERO:"hero",HOLY:"holy",HOARDER:"hoarder",HUNTER:"hunter",IGNITOR:"ignitor",ILLUSIONIST:"illusionist",IMP:"imp",INFANTRY:"infantry",INQUISITOR:"inquisitor",IRON:"iron",JADE:"jade",JUSTICIAR:"justiciar",KANDARIN:"kandarin",KARAMJAN:"karamjan",KHARIDIAN:"kharidian",KITTEN:"kitten",KNIGHT:"knight",LABOURER:"labourer",LAW:"law",LEADER:"leader",LEARNER:"learner",LEGACY:"legacy",LEGEND:"legend",LEGIONNAIRE:"legionnaire",LIEUTENANT:"lieutenant",LOOTER:"looter",LUMBERJACK:"lumberjack",MAGIC:"magic",MAGICIAN:"magician",MAJOR:"major",MAPLE:"maple",MARSHAL:"marshal",MASTER:"master",MAXED:"maxed",MEDIATOR:"mediator",MEDIC:"medic",MENTOR:"mentor",MEMBER:"member",MERCHANT:"merchant",MIND:"mind",MINER:"miner",MINION:"minion",MISTHALINIAN:"misthalinian",MITHRIL:"mithril",MODERATOR:"moderator",MONARCH:"monarch",MORYTANIAN:"morytanian",MYSTIC:"mystic",MYTH:"myth",NATURAL:"natural",NATURE:"nature",NECROMANCER:"necromancer",NINJA:"ninja",NOBLE:"noble",NOVICE:"novice",NURSE:"nurse",OAK:"oak",OFFICER:"officer",ONYX:"onyx",OPAL:"opal",ORACLE:"oracle",ORANGE:"orange",OWNER:"owner",PAGE:"page",PALADIN:"paladin",PAWN:"pawn",PILGRIM:"pilgrim",PINE:"pine",PINK:"pink",PREFECT:"prefect",PRIEST:"priest",PRIVATE:"private",PRODIGY:"prodigy",PROSELYTE:"proselyte",PROSPECTOR:"prospector",PROTECTOR:"protector",PURE:"pure",PURPLE:"purple",PYROMANCER:"pyromancer",QUESTER:"quester",RACER:"racer",RAIDER:"raider",RANGER:"ranger",RECORD_CHASER:"record_chaser",RECRUIT:"recruit",RECRUITER:"recruiter",RED_TOPAZ:"red_topaz",RED:"red",ROGUE:"rogue",RUBY:"ruby",RUNE:"rune",RUNECRAFTER:"runecrafter",SAGE:"sage",SAPPHIRE:"sapphire",SARADOMINIST:"saradominist",SAVIOUR:"saviour",SCAVENGER:"scavenger",SCHOLAR:"scholar",SCOURGE:"scourge",SCOUT:"scout",SCRIBE:"scribe",SEER:"seer",SENATOR:"senator",SENTRY:"sentry",SERENIST:"serenist",SERGEANT:"sergeant",SHAMAN:"shaman",SHERIFF:"sheriff",SHORT_GREEN_GUY:"short_green_guy",SKILLER:"skiller",SKULLED:"skulled",SLAYER:"slayer",SMITER:"smiter",SMITH:"smith",SMUGGLER:"smuggler",SNIPER:"sniper",SOUL:"soul",SPECIALIST:"specialist",SPEED_RUNNER:"speed_runner",SPELLCASTER:"spellcaster",SQUIRE:"squire",STAFF:"staff",STEEL:"steel",STRIDER:"strider",STRIKER:"striker",SUMMONER:"summoner",SUPERIOR:"superior",SUPERVISOR:"supervisor",TEACHER:"teacher",TEMPLAR:"templar",THERAPIST:"therapist",THIEF:"thief",TIRANNIAN:"tirannian",TRIALIST:"trialist",TRICKSTER:"trickster",TZKAL:"tzkal",TZTOK:"tztok",UNHOLY:"unholy",VAGRANT:"vagrant",VANGUARD:"vanguard",WALKER:"walker",WANDERER:"wanderer",WARDEN:"warden",WARLOCK:"warlock",WARRIOR:"warrior",WATER:"water",WILD:"wild",WILLOW:"willow",WILY:"wily",WINTUMBER:"wintumber",WITCH:"witch",WIZARD:"wizard",WORKER:"worker",WRATH:"wrath",XERICIAN:"xerician",YELLOW:"yellow",YEW:"yew",ZAMORAKIAN:"zamorakian",ZAROSIAN:"zarosian",ZEALOT:"zealot",ZENYTE:"zenyte"};var Xa;(function(t){t.UPCOMING="upcoming",t.ONGOING="ongoing",t.FINISHED="finished"})(Xa||(Xa={}));var $w;(function(t){t.TEAM="team",t.TEAMS="teams",t.PARTICIPANTS="participants"})($w||($w={}));Xa.UPCOMING+"",Xa.ONGOING+"",Xa.FINISHED+"";Object.values(Xa);function Th(t,e){const n={};return Object.keys(t).forEach(r=>{const i=r;n[i]=e(t[i],i,t)}),n}const VH=[v.ADMINISTRATOR,v.OWNER,v.LEADER,v.DEPUTY_OWNER,v.MODERATOR];Th({[v.ACHIEVER]:{name:"Achiever"},[v.ADAMANT]:{name:"Adamant"},[v.ADEPT]:{name:"Adept"},[v.ADMINISTRATOR]:{name:"Administrator"},[v.ADMIRAL]:{name:"Admiral"},[v.ADVENTURER]:{name:"Adventurer"},[v.AIR]:{name:"Air"},[v.ANCHOR]:{name:"Anchor"},[v.APOTHECARY]:{name:"Apothecary"},[v.ARCHER]:{name:"Archer"},[v.ARMADYLEAN]:{name:"Armadylean"},[v.ARTILLERY]:{name:"Artillery"},[v.ARTISAN]:{name:"Artisan"},[v.ASGARNIAN]:{name:"Asgarnian"},[v.ASSASSIN]:{name:"Assassin"},[v.ASSISTANT]:{name:"Assistant"},[v.ASTRAL]:{name:"Astral"},[v.ATHLETE]:{name:"Athlete"},[v.ATTACKER]:{name:"Attacker"},[v.BANDIT]:{name:"Bandit"},[v.BANDOSIAN]:{name:"Bandosian"},[v.BARBARIAN]:{name:"Barbarian"},[v.BATTLEMAGE]:{name:"Battlemage"},[v.BEAST]:{name:"Beast"},[v.BERSERKER]:{name:"Berserker"},[v.BLISTERWOOD]:{name:"Blisterwood"},[v.BLOOD]:{name:"Blood"},[v.BLUE]:{name:"Blue"},[v.BOB]:{name:"Bob"},[v.BODY]:{name:"Body"},[v.BRASSICAN]:{name:"Brassican"},[v.BRAWLER]:{name:"Brawler"},[v.BRIGADIER]:{name:"Brigadier"},[v.BRIGAND]:{name:"Brigand"},[v.BRONZE]:{name:"Bronze"},[v.BRUISER]:{name:"Bruiser"},[v.BULWARK]:{name:"Bulwark"},[v.BURGLAR]:{name:"Burglar"},[v.BURNT]:{name:"Burnt"},[v.CADET]:{name:"Cadet"},[v.CAPTAIN]:{name:"Captain"},[v.CARRY]:{name:"Carry"},[v.CHAMPION]:{name:"Champion"},[v.CHAOS]:{name:"Chaos"},[v.CLERIC]:{name:"Cleric"},[v.COLLECTOR]:{name:"Collector"},[v.COLONEL]:{name:"Colonel"},[v.COMMANDER]:{name:"Commander"},[v.COMPETITOR]:{name:"Competitor"},[v.COMPLETIONIST]:{name:"Completionist"},[v.CONSTRUCTOR]:{name:"Constructor"},[v.COOK]:{name:"Cook"},[v.COORDINATOR]:{name:"Coordinator"},[v.CORPORAL]:{name:"Corporal"},[v.COSMIC]:{name:"Cosmic"},[v.COUNCILLOR]:{name:"Councillor"},[v.CRAFTER]:{name:"Crafter"},[v.CREW]:{name:"Crew"},[v.CRUSADER]:{name:"Crusader"},[v.CUTPURSE]:{name:"Cutpurse"},[v.DEATH]:{name:"Death"},[v.DEFENDER]:{name:"Defender"},[v.DEFILER]:{name:"Defiler"},[v.DEPUTY_OWNER]:{name:"Deputy Owner"},[v.DESTROYER]:{name:"Destroyer"},[v.DIAMOND]:{name:"Diamond"},[v.DISEASED]:{name:"Diseased"},[v.DOCTOR]:{name:"Doctor"},[v.DOGSBODY]:{name:"Dogsbody"},[v.DRAGON]:{name:"Dragon"},[v.DRAGONSTONE]:{name:"Dragonstone"},[v.DRUID]:{name:"Druid"},[v.DUELLIST]:{name:"Duellist"},[v.EARTH]:{name:"Earth"},[v.ELITE]:{name:"Elite"},[v.EMERALD]:{name:"Emerald"},[v.ENFORCER]:{name:"Enforcer"},[v.EPIC]:{name:"Epic"},[v.EXECUTIVE]:{name:"Executive"},[v.EXPERT]:{name:"Expert"},[v.EXPLORER]:{name:"Explorer"},[v.FARMER]:{name:"Farmer"},[v.FEEDER]:{name:"Feeder"},[v.FIGHTER]:{name:"Fighter"},[v.FIRE]:{name:"Fire"},[v.FIREMAKER]:{name:"Firemaker"},[v.FIRESTARTER]:{name:"Firestarter"},[v.FISHER]:{name:"Fisher"},[v.FLETCHER]:{name:"Fletcher"},[v.FORAGER]:{name:"Forager"},[v.FREMENNIK]:{name:"Fremennik"},[v.GAMER]:{name:"Gamer"},[v.GATHERER]:{name:"Gatherer"},[v.GENERAL]:{name:"General"},[v.GNOME_CHILD]:{name:"Gnome Child"},[v.GNOME_ELDER]:{name:"Gnome Elder"},[v.GOBLIN]:{name:"Goblin"},[v.GOLD]:{name:"Gold"},[v.GOON]:{name:"Goon"},[v.GREEN]:{name:"Green"},[v.GREY]:{name:"Grey"},[v.GUARDIAN]:{name:"Guardian"},[v.GUTHIXIAN]:{name:"Guthixian"},[v.HARPOON]:{name:"Harpoon"},[v.HEALER]:{name:"Healer"},[v.HELLCAT]:{name:"Hellcat"},[v.HELPER]:{name:"Helper"},[v.HERBOLOGIST]:{name:"Herbologist"},[v.HERO]:{name:"Hero"},[v.HOLY]:{name:"Holy"},[v.HOARDER]:{name:"Hoarder"},[v.HUNTER]:{name:"Hunter"},[v.IGNITOR]:{name:"Ignitor"},[v.ILLUSIONIST]:{name:"Illusionist"},[v.IMP]:{name:"Imp"},[v.INFANTRY]:{name:"Infantry"},[v.INQUISITOR]:{name:"Inquisitor"},[v.IRON]:{name:"Iron"},[v.JADE]:{name:"Jade"},[v.JUSTICIAR]:{name:"Justiciar"},[v.KANDARIN]:{name:"Kandarin"},[v.KARAMJAN]:{name:"Karamjan"},[v.KHARIDIAN]:{name:"Kharidian"},[v.KITTEN]:{name:"Kitten"},[v.KNIGHT]:{name:"Knight"},[v.LABOURER]:{name:"Labourer"},[v.LAW]:{name:"Law"},[v.LEADER]:{name:"Leader"},[v.LEARNER]:{name:"Learner"},[v.LEGACY]:{name:"Legacy"},[v.LEGEND]:{name:"Legend"},[v.LEGIONNAIRE]:{name:"Legionnaire"},[v.LIEUTENANT]:{name:"Lieutenant"},[v.LOOTER]:{name:"Looter"},[v.LUMBERJACK]:{name:"Lumberjack"},[v.MAGIC]:{name:"Magic"},[v.MAGICIAN]:{name:"Magician"},[v.MAJOR]:{name:"Major"},[v.MAPLE]:{name:"Maple"},[v.MARSHAL]:{name:"Marshal"},[v.MASTER]:{name:"Master"},[v.MAXED]:{name:"Maxed"},[v.MEDIATOR]:{name:"Mediator"},[v.MEDIC]:{name:"Medic"},[v.MENTOR]:{name:"Mentor"},[v.MEMBER]:{name:"Member"},[v.MERCHANT]:{name:"Merchant"},[v.MIND]:{name:"Mind"},[v.MINER]:{name:"Miner"},[v.MINION]:{name:"Minion"},[v.MISTHALINIAN]:{name:"Misthalinian"},[v.MITHRIL]:{name:"Mithril"},[v.MODERATOR]:{name:"Moderator"},[v.MONARCH]:{name:"Monarch"},[v.MORYTANIAN]:{name:"Morytanian"},[v.MYSTIC]:{name:"Mystic"},[v.MYTH]:{name:"Myth"},[v.NATURAL]:{name:"Natural"},[v.NATURE]:{name:"Nature"},[v.NECROMANCER]:{name:"Necromancer"},[v.NINJA]:{name:"Ninja"},[v.NOBLE]:{name:"Noble"},[v.NOVICE]:{name:"Novice"},[v.NURSE]:{name:"Nurse"},[v.OAK]:{name:"Oak"},[v.OFFICER]:{name:"Officer"},[v.ONYX]:{name:"Onyx"},[v.OPAL]:{name:"Opal"},[v.ORACLE]:{name:"Oracle"},[v.ORANGE]:{name:"Orange"},[v.OWNER]:{name:"Owner"},[v.PAGE]:{name:"Page"},[v.PALADIN]:{name:"Paladin"},[v.PAWN]:{name:"Pawn"},[v.PILGRIM]:{name:"Pilgrim"},[v.PINE]:{name:"Pine"},[v.PINK]:{name:"Pink"},[v.PREFECT]:{name:"Prefect"},[v.PRIEST]:{name:"Priest"},[v.PRIVATE]:{name:"Private"},[v.PRODIGY]:{name:"Prodigy"},[v.PROSELYTE]:{name:"Proselyte"},[v.PROSPECTOR]:{name:"Prospector"},[v.PROTECTOR]:{name:"Protector"},[v.PURE]:{name:"Pure"},[v.PURPLE]:{name:"Purple"},[v.PYROMANCER]:{name:"Pyromancer"},[v.QUESTER]:{name:"Quester"},[v.RACER]:{name:"Racer"},[v.RAIDER]:{name:"Raider"},[v.RANGER]:{name:"Ranger"},[v.RECORD_CHASER]:{name:"Record-Chaser"},[v.RECRUIT]:{name:"Recruit"},[v.RECRUITER]:{name:"Recruiter"},[v.RED_TOPAZ]:{name:"Red Topaz"},[v.RED]:{name:"Red"},[v.ROGUE]:{name:"Rogue"},[v.RUBY]:{name:"Ruby"},[v.RUNE]:{name:"Rune"},[v.RUNECRAFTER]:{name:"Runecrafter"},[v.SAGE]:{name:"Sage"},[v.SAPPHIRE]:{name:"Sapphire"},[v.SARADOMINIST]:{name:"Saradominist"},[v.SAVIOUR]:{name:"Saviour"},[v.SCAVENGER]:{name:"Scavenger"},[v.SCHOLAR]:{name:"Scholar"},[v.SCOURGE]:{name:"Scourge"},[v.SCOUT]:{name:"Scout"},[v.SCRIBE]:{name:"Scribe"},[v.SEER]:{name:"Seer"},[v.SENATOR]:{name:"Senator"},[v.SENTRY]:{name:"Sentry"},[v.SERENIST]:{name:"Serenist"},[v.SERGEANT]:{name:"Sergeant"},[v.SHAMAN]:{name:"Shaman"},[v.SHERIFF]:{name:"Sheriff"},[v.SHORT_GREEN_GUY]:{name:"Short Green Guy"},[v.SKILLER]:{name:"Skiller"},[v.SKULLED]:{name:"Skulled"},[v.SLAYER]:{name:"Slayer"},[v.SMITER]:{name:"Smiter"},[v.SMITH]:{name:"Smith"},[v.SMUGGLER]:{name:"Smuggler"},[v.SNIPER]:{name:"Sniper"},[v.SOUL]:{name:"Soul"},[v.SPECIALIST]:{name:"Specialist"},[v.SPEED_RUNNER]:{name:"Speed-Runner"},[v.SPELLCASTER]:{name:"Spellcaster"},[v.SQUIRE]:{name:"Squire"},[v.STAFF]:{name:"Staff"},[v.STEEL]:{name:"Steel"},[v.STRIDER]:{name:"Strider"},[v.STRIKER]:{name:"Striker"},[v.SUMMONER]:{name:"Summoner"},[v.SUPERIOR]:{name:"Superior"},[v.SUPERVISOR]:{name:"Supervisor"},[v.TEACHER]:{name:"Teacher"},[v.TEMPLAR]:{name:"Templar"},[v.THERAPIST]:{name:"Therapist"},[v.THIEF]:{name:"Thief"},[v.TIRANNIAN]:{name:"Tirannian"},[v.TRIALIST]:{name:"Trialist"},[v.TRICKSTER]:{name:"Trickster"},[v.TZKAL]:{name:"TzKal"},[v.TZTOK]:{name:"TzTok"},[v.UNHOLY]:{name:"Unholy"},[v.VAGRANT]:{name:"Vagrant"},[v.VANGUARD]:{name:"Vanguard"},[v.WALKER]:{name:"Walker"},[v.WANDERER]:{name:"Wanderer"},[v.WARDEN]:{name:"Warden"},[v.WARLOCK]:{name:"Warlock"},[v.WARRIOR]:{name:"Warrior"},[v.WATER]:{name:"Water"},[v.WILD]:{name:"Wild"},[v.WILLOW]:{name:"Willow"},[v.WILY]:{name:"Wily"},[v.WINTUMBER]:{name:"Wintumber"},[v.WITCH]:{name:"Witch"},[v.WIZARD]:{name:"Wizard"},[v.WORKER]:{name:"Worker"},[v.WRATH]:{name:"Wrath"},[v.XERICIAN]:{name:"Xerician"},[v.YELLOW]:{name:"Yellow"},[v.YEW]:{name:"Yew"},[v.ZAMORAKIAN]:{name:"Zamorakian"},[v.ZAROSIAN]:{name:"Zarosian"},[v.ZEALOT]:{name:"Zealot"},[v.ZENYTE]:{name:"Zenyte"}},(t,e)=>Object.assign(Object.assign({},t),{isPriveleged:VH.includes(e)}));var Sl;(function(t){t.SKILL="skill",t.BOSS="boss",t.ACTIVITY="activity",t.COMPUTED="computed"})(Sl||(Sl={}));var Il;(function(t){t.EXPERIENCE="experience",t.KILLS="kills",t.SCORE="score",t.VALUE="value"})(Il||(Il={}));const FH=Th({[ft.OVERALL]:{name:"Overall"},[ft.ATTACK]:{name:"Attack",isCombat:!0},[ft.DEFENCE]:{name:"Defence",isCombat:!0},[ft.STRENGTH]:{name:"Strength",isCombat:!0},[ft.HITPOINTS]:{name:"Hitpoints",isCombat:!0},[ft.RANGED]:{name:"Ranged",isCombat:!0},[ft.PRAYER]:{name:"Prayer",isCombat:!0},[ft.MAGIC]:{name:"Magic",isCombat:!0},[ft.COOKING]:{name:"Cooking"},[ft.WOODCUTTING]:{name:"Woodcutting"},[ft.FLETCHING]:{name:"Fletching",isMembers:!0},[ft.FISHING]:{name:"Fishing"},[ft.FIREMAKING]:{name:"Firemaking"},[ft.CRAFTING]:{name:"Crafting"},[ft.SMITHING]:{name:"Smithing"},[ft.MINING]:{name:"Mining"},[ft.HERBLORE]:{name:"Herblore",isMembers:!0},[ft.AGILITY]:{name:"Agility",isMembers:!0},[ft.THIEVING]:{name:"Thieving",isMembers:!0},[ft.SLAYER]:{name:"Slayer",isMembers:!0},[ft.FARMING]:{name:"Farming",isMembers:!0},[ft.RUNECRAFTING]:{name:"Runecrafting"},[ft.HUNTER]:{name:"Hunter",isMembers:!0},[ft.CONSTRUCTION]:{name:"Construction",isMembers:!0}},t=>Object.assign(Object.assign({},t),{type:Sl.SKILL,measure:Il.EXPERIENCE,isCombat:"isCombat"in t?t.isCombat:!1,isMembers:"isMembers"in t?t.isMembers:!1})),BH=Th({[he.ABYSSAL_SIRE]:{name:"Abyssal Sire"},[he.ALCHEMICAL_HYDRA]:{name:"Alchemical Hydra"},[he.ARTIO]:{name:"Artio"},[he.BARROWS_CHESTS]:{name:"Barrows Chests"},[he.BRYOPHYTA]:{name:"Bryophyta",isMembers:!1},[he.CALLISTO]:{name:"Callisto"},[he.CALVARION]:{name:"Calvar'ion"},[he.CERBERUS]:{name:"Cerberus"},[he.CHAMBERS_OF_XERIC]:{name:"Chambers Of Xeric"},[he.CHAMBERS_OF_XERIC_CM]:{name:"Chambers Of Xeric (CM)"},[he.CHAOS_ELEMENTAL]:{name:"Chaos Elemental"},[he.CHAOS_FANATIC]:{name:"Chaos Fanatic"},[he.COMMANDER_ZILYANA]:{name:"Commander Zilyana"},[he.CORPOREAL_BEAST]:{name:"Corporeal Beast"},[he.CRAZY_ARCHAEOLOGIST]:{name:"Crazy Archaeologist"},[he.DAGANNOTH_PRIME]:{name:"Dagannoth Prime"},[he.DAGANNOTH_REX]:{name:"Dagannoth Rex"},[he.DAGANNOTH_SUPREME]:{name:"Dagannoth Supreme"},[he.DERANGED_ARCHAEOLOGIST]:{name:"Deranged Archaeologist"},[he.DUKE_SUCELLUS]:{name:"Duke Sucellus"},[he.GENERAL_GRAARDOR]:{name:"General Graardor"},[he.GIANT_MOLE]:{name:"Giant Mole"},[he.GROTESQUE_GUARDIANS]:{name:"Grotesque Guardians"},[he.HESPORI]:{name:"Hespori"},[he.KALPHITE_QUEEN]:{name:"Kalphite Queen"},[he.KING_BLACK_DRAGON]:{name:"King Black Dragon"},[he.KRAKEN]:{name:"Kraken"},[he.KREEARRA]:{name:"Kree'Arra"},[he.KRIL_TSUTSAROTH]:{name:"K'ril Tsutsaroth"},[he.LUNAR_CHESTS]:{name:"Lunar Chests"},[he.MIMIC]:{name:"Mimic",minimumValue:1},[he.NEX]:{name:"Nex"},[he.NIGHTMARE]:{name:"Nightmare"},[he.PHOSANIS_NIGHTMARE]:{name:"Phosani's Nightmare"},[he.OBOR]:{name:"Obor",isMembers:!1},[he.PHANTOM_MUSPAH]:{name:"Phantom Muspah"},[he.SARACHNIS]:{name:"Sarachnis"},[he.SCORPIA]:{name:"Scorpia"},[he.SCURRIUS]:{name:"Scurrius"},[he.SKOTIZO]:{name:"Skotizo"},[he.SOL_HEREDIT]:{name:"Sol Heredit",minimumValue:1},[he.SPINDEL]:{name:"Spindel"},[he.TEMPOROSS]:{name:"Tempoross"},[he.THE_GAUNTLET]:{name:"The Gauntlet"},[he.THE_CORRUPTED_GAUNTLET]:{name:"The Corrupted Gauntlet"},[he.THE_LEVIATHAN]:{name:"The Leviathan"},[he.THE_WHISPERER]:{name:"The Whisperer"},[he.THEATRE_OF_BLOOD]:{name:"Theatre Of Blood"},[he.THEATRE_OF_BLOOD_HARD_MODE]:{name:"Theatre Of Blood (HM)"},[he.THERMONUCLEAR_SMOKE_DEVIL]:{name:"Thermonuclear Smoke Devil"},[he.TOMBS_OF_AMASCUT]:{name:"Tombs of Amascut"},[he.TOMBS_OF_AMASCUT_EXPERT]:{name:"Tombs of Amascut (Expert Mode)"},[he.TZKAL_ZUK]:{name:"TzKal-Zuk",minimumValue:1},[he.TZTOK_JAD]:{name:"TzTok-Jad"},[he.VARDORVIS]:{name:"Vardorvis"},[he.VENENATIS]:{name:"Venenatis"},[he.VETION]:{name:"Vet'ion"},[he.VORKATH]:{name:"Vorkath"},[he.WINTERTODT]:{name:"Wintertodt"},[he.ZALCANO]:{name:"Zalcano"},[he.ZULRAH]:{name:"Zulrah"}},t=>Object.assign(Object.assign({},t),{type:Sl.BOSS,measure:Il.KILLS,isMembers:"isMembers"in t?t.isMembers:!0,minimumValue:"minimumValue"in t?t.minimumValue:5})),UH=Th({[un.LEAGUE_POINTS]:{name:"League Points",minimumValue:100},[un.BOUNTY_HUNTER_HUNTER]:{name:"Bounty Hunter (Hunter)",minimumValue:2},[un.BOUNTY_HUNTER_ROGUE]:{name:"Bounty Hunter (Rogue)",minimumValue:2},[un.CLUE_SCROLLS_ALL]:{name:"Clue Scrolls (All)"},[un.CLUE_SCROLLS_BEGINNER]:{name:"Clue Scrolls (Beginner)"},[un.CLUE_SCROLLS_EASY]:{name:"Clue Scrolls (Easy)"},[un.CLUE_SCROLLS_MEDIUM]:{name:"Clue Scrolls (Medium)"},[un.CLUE_SCROLLS_HARD]:{name:"Clue Scrolls (Hard)"},[un.CLUE_SCROLLS_ELITE]:{name:"Clue Scrolls (Elite)"},[un.CLUE_SCROLLS_MASTER]:{name:"Clue Scrolls (Master)"},[un.LAST_MAN_STANDING]:{name:"Last Man Standing",minimumValue:500},[un.PVP_ARENA]:{name:"PvP Arena",minimumValue:2525},[un.SOUL_WARS_ZEAL]:{name:"Soul Wars Zeal",minimumValue:200},[un.GUARDIANS_OF_THE_RIFT]:{name:"Guardians of the Rift",minimumValue:2},[un.COLOSSEUM_GLORY]:{name:"Colosseum Glory",minimumValue:300}},t=>Object.assign(Object.assign({},t),{type:Sl.ACTIVITY,measure:Il.SCORE,minimumValue:"minimumValue"in t?t.minimumValue:1})),$H=Th({[Vf.EHP]:{name:"EHP"},[Vf.EHB]:{name:"EHB"}},t=>Object.assign(Object.assign({},t),{type:Sl.COMPUTED,measure:Il.VALUE})),L1=Object.assign(Object.assign(Object.assign(Object.assign({},FH),BH),UH),$H),HH=Object.values(D_),wh=Object.values(ft),HO=Object.values(he),zH=Object.values(un);Object.values(Vf);wh.filter(t=>t!==ft.OVERALL);HO.filter(t=>!L1[t].isMembers);wh.filter(t=>L1[t].isMembers);wh.filter(t=>L1[t].isCombat);[...wh,...HO,...zH];var Hw;(function(t){t.MAIN="main",t.IRONMAN="ironman",t.ULTIMATE="ultimate",t.LVL3="lvl3",t.F2P="f2p",t.F2P_LVL3="f2p_lvl3",t.F2P_IRONMAN="f2p_ironman",t.F2P_LVL3_IRONMAN="f2p_lvl3_ironman"})(Hw||(Hw={}));var zw;(function(t){t[t.TEMPLE_OSRS=0]="TEMPLE_OSRS",t[t.CRYSTAL_MATH_LABS=1]="CRYSTAL_MATH_LABS"})(zw||(zw={}));var jw;(function(t){t[t.HISCORES=0]="HISCORES",t[t.CRYSTAL_MATH_LABS=1]="CRYSTAL_MATH_LABS"})(jw||(jw={}));class jH extends to{getEfficiencyLeaderboards(e,n){return this.getRequest("/efficiency/leaderboard",Object.assign(Object.assign({},e),n))}getEHPRates(e){return this.getRequest("/efficiency/rates",{metric:D_.EHP,type:e})}getEHBRates(e){return this.getRequest("/efficiency/rates",{metric:D_.EHB,type:e})}}class WH extends to{searchNameChanges(e,n){return this.getRequest("/names",Object.assign(Object.assign({},e),n))}submitNameChange(e,n){return this.postRequest("/names",{oldName:e,newName:n})}}class GH extends to{searchCompetitions(e,n){return this.getRequest("/competitions",Object.assign(Object.assign({},e),n))}getCompetitionDetails(e,n){return this.getRequest(`/competitions/${e}`,{metric:n})}getCompetitionDetailsCSV(e,n){return this.getText(`/competitions/${e}/csv`,Object.assign({metric:n.previewMetric},n))}getCompetitionTopHistory(e,n){return this.getRequest(`/competitions/${e}/top-history`,{metric:n})}createCompetition(e){return this.postRequest("/competitions",e)}editCompetition(e,n,r){return this.putRequest(`/competitions/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteCompetition(e,n){return this.deleteRequest(`/competitions/${e}`,{verificationCode:n})}addParticipants(e,n,r){return this.postRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}removeParticipants(e,n,r){return this.deleteRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}addTeams(e,n,r){return this.postRequest(`/competitions/${e}/teams`,{verificationCode:r,teams:n})}removeTeams(e,n,r){return this.deleteRequest(`/competitions/${e}/teams`,{verificationCode:r,teamNames:n})}updateAll(e,n){return this.postRequest(`/competitions/${e}/update-all`,{verificationCode:n})}}class qH extends to{constructor(e){const n=(e==null?void 0:e.baseAPIUrl)||Bw.baseAPIUrl,r={"x-user-agent":(e==null?void 0:e.userAgent)||Bw.defaultUserAgent};e!=null&&e.apiKey&&(r["x-api-key"]=e.apiKey),super(r,n),this.deltas=new PH(r,n),this.groups=new xH(r,n),this.players=new DH(r,n),this.records=new LH(r,n),this.efficiency=new jH(r,n),this.nameChanges=new WH(r,n),this.competitions=new GH(r,n)}}const zO=eC({apiKey:"AIzaSyAnOiG77O1ukT9C2x8u1VbMLw7For9C_3w",authDomain:"auth.odinn.nl",databaseURL:"https://bingo-50cec-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bingo-50cec",storageBucket:"bingo-50cec.appspot.com",messagingSenderId:"866066986693",appId:"1:866066986693:web:de513df8434d232b0562ac",measurementId:"G-8F3EECYHQ0"}),Zt=q8(zO),KH=t=>(_p("data-v-7ef1f39d"),t=t(),vp(),t),YH={key:0},JH=KH(()=>A("h1",null,"Hello World",-1)),QH={key:0},XH={key:2},ZH=Zn({__name:"newBoard.vapor",async setup(t){let e,n;const r=([e,n]=ol(()=>Pp()),e=await e,n(),e),i=xe(!1),s=xe(40963),o=xe(),a=new qH,l=xe({}),c=xe({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),u=xe({}),h=async()=>{!s.value||s.value<=0||isNaN(s.value)||await a.competitions.getCompetitionDetails(s.value).then(async p=>{if(p!=null&&p.message)throw new Error("Error creating bingo: "+p.message);if((p==null?void 0:p.metric)!="overall")throw new Error("Error creating bingo: Metric should be set to `Overall`");if((p==null?void 0:p.type)!="team")throw new Error("Error creating bingo: Type should be set to `Team`");if(!(p!=null&&p.participations))throw new Error("Error creating bingo: No participants found");if(new Date>p.endsAt)throw new Error("Error creating bingo: Competition has already ended");const m=On(Zt,"Boards",s.value.toString());if((await R1(m)).exists())throw new Error("Error creating bingo: Board already exists");u.value={name:p.title,start:p.startsAt,end:p.endsAt},l.value=d(p),i.value=!0}).catch(p=>{o.value=p.message})},d=p=>{var y;const m=xe(),g=xe({});return m.value=p.participations,(y=m.value)==null||y.map(_=>{g.value[_.teamName]={teamName:_.teamName,players:[],stats:null}}),m.value.map(_=>{delete _.player.ehb,delete _.player.exp,delete _.player.ehp,g.value[_.teamName].players=[...g.value[_.teamName].players,g.value[_.teamName].players[_.player.username]={..._.player}]}),g.value},f=async()=>{const p=On(Zt,"Boards",s.value.toString());r&&await gw(p,{ownerID:r.uid}).then(()=>{const m=On(Zt,"Users",r.uid);for(let g in l.value){const y=On(Pa(Zt,"Boards",p.id,"Groups")),_=l.value[g];gw(On(Zt,y.path),{teamName:_.teamName,teamId:y.id,players:l.value[g].players,stats:null})}C_(p,{name:u.value.name,start:u.value.start,end:u.value.end}),C_(m,{boards:rU(p.id)})}),i.value=!1};return(p,m)=>{var g,y;return Ue(r)?(ie(),ye("div",YH,[JH,o.value?(ie(),ye("p",QH,He(o.value),1)):qe("",!0),In(A("input",{type:"number","onUpdate:modelValue":m[0]||(m[0]=_=>s.value=_),placeholder:"12345 WOM Team competition code",min:"0",onFocusin:m[1]||(m[1]=()=>{o.value=""})},null,544),[[Oi,s.value]]),A("button",{onClick:m[2]||(m[2]=_=>h())},"Create new Bingo"),i.value?(ie(),ye("button",{key:1,onClick:m[3]||(m[3]=_=>f())},"finish setup")):qe("",!0),l.value!==null&&i.value?(ie(),ye("div",XH,[A("h1",null,He(u.value.name),1),u.value.start?(ie(),ye(tt,{key:0},[A("p",null," Starts: "+He(u.value.start.toLocaleDateString(void 0,c.value)),1),A("code",null,"<t:"+He(((g=u.value.start)==null?void 0:g.valueOf())/1e3)+":F>",1)],64)):qe("",!0),u.value.end?(ie(),ye(tt,{key:1},[A("p",null," Ends: "+He(u.value.end.toLocaleDateString(void 0,c.value)),1),A("code",null,"<t:"+He(((y=u.value.end)==null?void 0:y.valueOf())/1e3)+":F>",1)],64)):qe("",!0),(ie(!0),ye(tt,null,pi(l.value,_=>(ie(),ye("div",{key:_.teamName},[A("h2",null,He(_.teamName),1),(ie(!0),ye(tt,null,pi(_.players,E=>(ie(),ye("div",{key:E.username},[A("div",null,He(E.username),1)]))),128))]))),128))])):qe("",!0)])):qe("",!0)}}}),ez=eo(ZH,[["__scopeId","data-v-7ef1f39d"]]),tz={key:0},nz=A("h1",null,"Log in",-1),rz=A("p",null,"you need to be signed in to edit, create and moderate a board",-1),iz=A("h1",null,"User details",-1),sz=A("h2",null,"Boards",-1),oz=["onClick"],az=["onClick"],lz=Zn({__name:"loginView.vapor",async setup(t){let e,n;const r=D1(),i=new Mi,s=zU(),o=p5(),a=xe();if(o.value){const{data:d,promise:f}=El(On(Zt,"Users",o.value.uid));[e,n]=ol(()=>f.value.then(()=>{var p;a.value=(p=d.value)==null?void 0:p.boards})),await e,n()}const l=bm(),c=()=>o.value?"User details":"log in";l.value=c()+" - Bingo Bongo";const u=()=>{BL(s,i).then(()=>{console.log(o),r.push({name:"Home"})}).catch(d=>{const f=d.message;console.error(f)})},h=()=>{_L(s).then(()=>r.push({name:"Home"}))};return(d,f)=>Ue(o)?(ie(),ye(tt,{key:1},[A("div",null,[iz,A("button",{class:"btn",onClick:lt(h,["prevent"])},"Log out")]),A("div",null,[sz,A("ul",null,[(ie(!0),ye(tt,null,pi(a.value,p=>(ie(),ye("li",null,[(ie(),ye("label",{key:p},[pt(He(p)+" ",1),A("a",{icon:"",class:"btn",onClick:lt(m=>Ue(r).push({name:"editBoard",params:{boardUUID:p}}),["prevent"])},"edit",8,oz)])),A("a",{icon:"",class:"btn",onClick:lt(m=>Ue(r).push({name:"viewBoard",params:{boardUUID:p}}),["prevent"])},"visibility",8,az)]))),256))])])],64)):(ie(),ye("div",tz,[nz,rz,Ue(o)?qe("",!0):(ie(),ye("button",{key:0,class:"btn",onClick:lt(u,["prevent"])},"Log in with Google"))]))}});/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ww(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ww(Object(n),!0).forEach(function(r){cz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ww(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xd(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xd=function(e){return typeof e}:xd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}function cz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gi(){return Gi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gi.apply(this,arguments)}function uz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hz(t,e){if(t==null)return{};var n=uz(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var dz="1.15.2";function $i(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Xi=$i(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Sh=$i(/Edge/i),Gw=$i(/firefox/i),jc=$i(/safari/i)&&!$i(/chrome/i)&&!$i(/android/i),jO=$i(/iP(ad|od|hone)/i),WO=$i(/chrome/i)&&$i(/android/i),GO={capture:!1,passive:!1};function Ze(t,e,n){t.addEventListener(e,n,!Xi&&GO)}function Je(t,e,n){t.removeEventListener(e,n,!Xi&&GO)}function Ff(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function fz(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Or(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Ff(t,e):Ff(t,e))||r&&t===n)return t;if(t===n)break}while(t=fz(t))}return null}var qw=/\s+/g;function tr(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(qw," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(qw," ")}}function we(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Za(t,e){var n="";if(typeof t=="string")n=t;else do{var r=we(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function qO(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function di(){var t=document.scrollingElement;return t||document.documentElement}function Ft(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,u,h;if(t!==window&&t.parentNode&&t!==di()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Xi))do if(i&&i.getBoundingClientRect&&(we(i,"transform")!=="none"||n&&we(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(we(i,"border-top-width")),a-=d.left+parseInt(we(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var f=Za(i||t),p=f&&f.a,m=f&&f.d;f&&(o/=m,a/=p,h/=p,u/=m,l=o+u,c=a+h)}return{top:o,left:a,bottom:l,right:c,width:h,height:u}}}function Kw(t,e,n){for(var r=ws(t,!0),i=Ft(t)[e];r;){var s=Ft(r)[n],o=void 0;if(n==="top"||n==="left"?o=i>=s:o=i<=s,!o)return r;if(r===di())break;r=ws(r,!1)}return!1}function Al(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Se.ghost&&(r||o[s]!==Se.dragged)&&Or(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function V1(t,e){for(var n=t.lastElementChild;n&&(n===Se.ghost||we(n,"display")==="none"||e&&!Ff(n,e));)n=n.previousElementSibling;return n||null}function yr(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Se.clone&&(!e||Ff(t,e))&&n++;return n}function Yw(t){var e=0,n=0,r=di();if(t)do{var i=Za(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function pz(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function ws(t,e){if(!t||!t.getBoundingClientRect)return di();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=we(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return di();if(r||e)return n;r=!0}}while(n=n.parentNode);return di()}function mz(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Rg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Wc;function KO(t,e){return function(){if(!Wc){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Wc=setTimeout(function(){Wc=void 0},e)}}}function gz(){clearTimeout(Wc),Wc=void 0}function YO(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function JO(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function QO(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var s,o,a,l;if(!(!Or(i,e.draggable,t,!1)||i.animated||i===n)){var c=Ft(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var sr="Sortable"+new Date().getTime();function yz(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(we(i,"display")==="none"||i===Se.ghost)){t.push({target:i,rect:Ft(i)});var s=Ei({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=Za(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(pz(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=Ft(c),d=c.prevFromRect,f=c.prevToRect,p=a.rect,m=Za(c,!0);m&&(h.top-=m.f,h.left-=m.e),c.toRect=h,c.thisAnimationDuration&&Rg(d,h)&&!Rg(u,h)&&(p.top-h.top)/(p.left-h.left)===(u.top-h.top)/(u.left-h.left)&&(l=vz(p,d,f,i.options)),Rg(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=i.options.animation),i.animate(c,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){we(r,"transition",""),we(r,"transform","");var a=Za(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-s.left)/(l||1),h=(i.top-s.top)/(c||1);r.animatingX=!!u,r.animatingY=!!h,we(r,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=_z(r),we(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),we(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){we(r,"transition",""),we(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function _z(t){return t.offsetWidth}function vz(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var va=[],kg={initializeByDefault:!0},Ih={mount:function(e){for(var n in kg)kg.hasOwnProperty(n)&&!(n in e)&&(e[n]=kg[n]);va.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),va.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";va.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Ei({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Ei({sortable:n},r)))})},initializePlugins:function(e,n,r,i){va.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Gi(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return va.forEach(function(i){typeof i.eventProperties=="function"&&Gi(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return va.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function bz(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[sr],!!e){var m,g=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Xi&&!Sh?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||n,m.from=a||n,m.item=i||n,m.clone=s,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=d,m.pullMode=f?f.lastPutMode:void 0;var _=Ei(Ei({},p),Ih.getEventProperties(r,e));for(var E in _)m[E]=_[E];n&&n.dispatchEvent(m),g[y]&&g[y].call(e,m)}}var Ez=["evt"],Wn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=hz(r,Ez);Ih.pluginEvent.bind(Se)(e,n,Ei({dragEl:X,parentEl:Rt,ghostEl:ke,rootEl:St,nextEl:mo,lastDownEl:Dd,cloneEl:At,cloneHidden:bs,dragStarted:_c,putSortable:hn,activeSortable:Se.active,originalEvent:i,oldIndex:xa,oldDraggableIndex:Gc,newIndex:nr,newDraggableIndex:ps,hideGhostForTarget:tN,unhideGhostForTarget:nN,cloneNowHidden:function(){bs=!0},cloneNowShown:function(){bs=!1},dispatchSortableEvent:function(a){Fn({sortable:n,name:a,originalEvent:i})}},s))};function Fn(t){bz(Ei({putSortable:hn,cloneEl:At,targetEl:X,rootEl:St,oldIndex:xa,oldDraggableIndex:Gc,newIndex:nr,newDraggableIndex:ps},t))}var X,Rt,ke,St,mo,Dd,At,bs,xa,nr,Gc,ps,nd,hn,Ca=!1,Bf=!1,Uf=[],uo,kr,Og,Ng,Jw,Qw,_c,ba,qc,Kc=!1,rd=!1,Ld,wn,Mg=[],L_=!1,$f=[],Em=typeof document<"u",id=jO,Xw=Sh||Xi?"cssFloat":"float",Tz=Em&&!WO&&!jO&&"draggable"in document.createElement("div"),XO=function(){if(Em){if(Xi)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),ZO=function(e,n){var r=we(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Al(e,0,n),o=Al(e,1,n),a=s&&we(s),l=o&&we(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ft(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ft(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[Xw]==="none"||o&&r[Xw]==="none"&&c+u>i)?"vertical":"horizontal"},wz=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},Sz=function(e,n){var r;return Uf.some(function(i){var s=i[sr].options.emptyInsertThreshold;if(!(!s||V1(i))){var o=Ft(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},eN=function(e){function n(s,o){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,u),o)(a,l,c,u);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},i=e.group;(!i||xd(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},tN=function(){!XO&&ke&&we(ke,"display","none")},nN=function(){!XO&&ke&&we(ke,"display","")};Em&&!WO&&document.addEventListener("click",function(t){if(Bf)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Bf=!1,!1},!0);var ho=function(e){if(X){e=e.touches?e.touches[0]:e;var n=Sz(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[sr]._onDragOver(r)}}},Iz=function(e){X&&X.parentNode[sr]._isOutsideThisEl(e.target)};function Se(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Gi({},e),t[sr]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ZO(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Se.supportPointer!==!1&&"PointerEvent"in window&&!jc,emptyInsertThreshold:5};Ih.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);eN(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Tz,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ze(t,"pointerdown",this._onTapStart):(Ze(t,"mousedown",this._onTapStart),Ze(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ze(t,"dragover",this),Ze(t,"dragenter",this)),Uf.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Gi(this,yz())}Se.prototype={constructor:Se,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ba=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,X):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(Pz(r),!X&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&jc&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Or(l,i.draggable,r,!1),!(l&&l.animated)&&Dd!==l)){if(xa=yr(l),Gc=yr(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Fn({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Wn("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=Or(c,h.trim(),r,!1),h)return Fn({sortable:n,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),Wn("filter",n,{evt:e}),!0}),u)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Or(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!X&&r.parentNode===s){var c=Ft(r);if(St=s,X=r,Rt=X.parentNode,mo=X.nextSibling,Dd=r,nd=o.group,Se.dragged=X,uo={target:X,clientX:(n||e).clientX,clientY:(n||e).clientY},Jw=uo.clientX-c.left,Qw=uo.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,X.style["will-change"]="all",l=function(){if(Wn("delayEnded",i,{evt:e}),Se.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Gw&&i.nativeDraggable&&(X.draggable=!0),i._triggerDragStart(e,n),Fn({sortable:i,name:"choose",originalEvent:e}),tr(X,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){qO(X,u.trim(),Pg)}),Ze(a,"dragover",ho),Ze(a,"mousemove",ho),Ze(a,"touchmove",ho),Ze(a,"mouseup",i._onDrop),Ze(a,"touchend",i._onDrop),Ze(a,"touchcancel",i._onDrop),Gw&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),Wn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Sh||Xi))){if(Se.eventCanceled){this._onDrop();return}Ze(a,"mouseup",i._disableDelayedDrag),Ze(a,"touchend",i._disableDelayedDrag),Ze(a,"touchcancel",i._disableDelayedDrag),Ze(a,"mousemove",i._delayedDragTouchMoveHandler),Ze(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ze(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&Pg(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Je(e,"mouseup",this._disableDelayedDrag),Je(e,"touchend",this._disableDelayedDrag),Je(e,"touchcancel",this._disableDelayedDrag),Je(e,"mousemove",this._delayedDragTouchMoveHandler),Je(e,"touchmove",this._delayedDragTouchMoveHandler),Je(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Ze(document,"pointermove",this._onTouchMove):n?Ze(document,"touchmove",this._onTouchMove):Ze(document,"mousemove",this._onTouchMove):(Ze(X,"dragend",this),Ze(St,"dragstart",this._onDragStart));try{document.selection?Vd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Ca=!1,St&&X){Wn("dragStarted",this,{evt:n}),this.nativeDraggable&&Ze(document,"dragover",Iz);var r=this.options;!e&&tr(X,r.dragClass,!1),tr(X,r.ghostClass,!0),Se.active=this,e&&this._appendGhost(),Fn({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(kr){this._lastX=kr.clientX,this._lastY=kr.clientY,tN();for(var e=document.elementFromPoint(kr.clientX,kr.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(kr.clientX,kr.clientY),e!==n);)n=e;if(X.parentNode[sr]._isOutsideThisEl(e),n)do{if(n[sr]){var r=void 0;if(r=n[sr]._onDragOver({clientX:kr.clientX,clientY:kr.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);nN()}},_onTouchMove:function(e){if(uo){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=ke&&Za(ke,!0),a=ke&&o&&o.a,l=ke&&o&&o.d,c=id&&wn&&Yw(wn),u=(s.clientX-uo.clientX+i.x)/(a||1)+(c?c[0]-Mg[0]:0)/(a||1),h=(s.clientY-uo.clientY+i.y)/(l||1)+(c?c[1]-Mg[1]:0)/(l||1);if(!Se.active&&!Ca){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ke){o?(o.e+=u-(Og||0),o.f+=h-(Ng||0)):o={a:1,b:0,c:0,d:1,e:u,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");we(ke,"webkitTransform",d),we(ke,"mozTransform",d),we(ke,"msTransform",d),we(ke,"transform",d),Og=u,Ng=h,kr=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ke){var e=this.options.fallbackOnBody?document.body:St,n=Ft(X,!0,id,!0,e),r=this.options;if(id){for(wn=e;we(wn,"position")==="static"&&we(wn,"transform")==="none"&&wn!==document;)wn=wn.parentNode;wn!==document.body&&wn!==document.documentElement?(wn===document&&(wn=di()),n.top+=wn.scrollTop,n.left+=wn.scrollLeft):wn=di(),Mg=Yw(wn)}ke=X.cloneNode(!0),tr(ke,r.ghostClass,!1),tr(ke,r.fallbackClass,!0),tr(ke,r.dragClass,!0),we(ke,"transition",""),we(ke,"transform",""),we(ke,"box-sizing","border-box"),we(ke,"margin",0),we(ke,"top",n.top),we(ke,"left",n.left),we(ke,"width",n.width),we(ke,"height",n.height),we(ke,"opacity","0.8"),we(ke,"position",id?"absolute":"fixed"),we(ke,"zIndex","100000"),we(ke,"pointerEvents","none"),Se.ghost=ke,e.appendChild(ke),we(ke,"transform-origin",Jw/parseInt(ke.style.width)*100+"% "+Qw/parseInt(ke.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Wn("dragStart",this,{evt:e}),Se.eventCanceled){this._onDrop();return}Wn("setupClone",this),Se.eventCanceled||(At=JO(X),At.removeAttribute("id"),At.draggable=!1,At.style["will-change"]="",this._hideClone(),tr(At,this.options.chosenClass,!1),Se.clone=At),r.cloneId=Vd(function(){Wn("clone",r),!Se.eventCanceled&&(r.options.removeCloneOnHide||St.insertBefore(At,X),r._hideClone(),Fn({sortable:r,name:"clone"}))}),!n&&tr(X,s.dragClass,!0),n?(Bf=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Je(document,"mouseup",r._onDrop),Je(document,"touchend",r._onDrop),Je(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,X)),Ze(document,"drop",r),we(X,"transform","translateZ(0)")),Ca=!0,r._dragStartId=Vd(r._dragStarted.bind(r,n,e)),Ze(document,"selectstart",r),_c=!0,jc&&we(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Se.active,u=nd===l,h=a.sort,d=hn||c,f,p=this,m=!1;if(L_)return;function g(P,ae){Wn(P,p,Ei({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:d,target:r,completed:_,onMove:function(Z,ce){return sd(St,n,X,i,Z,Ft(Z),e,ce)},changed:E},ae))}function y(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _(P){return g("dragOverCompleted",{insertion:P}),P&&(u?c._hideClone():c._showClone(p),p!==d&&(tr(X,hn?hn.options.ghostClass:c.options.ghostClass,!1),tr(X,a.ghostClass,!0)),hn!==p&&p!==Se.active?hn=p:p===Se.active&&hn&&(hn=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===X&&!X.animated||r===n&&!r.animated)&&(ba=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(X.parentNode[sr]._isOutsideThisEl(e.target),!P&&ho(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function E(){nr=yr(X),ps=yr(X,a.draggable),Fn({sortable:p,name:"change",toEl:n,newIndex:nr,newDraggableIndex:ps,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Or(r,a.draggable,n,!0),g("dragOver"),Se.eventCanceled)return m;if(X.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return _(!1);if(Bf=!1,c&&!a.disabled&&(u?h||(o=Rt!==St):hn===this||(this.lastPutMode=nd.checkPull(this,c,X,e))&&l.checkPut(this,c,X,e))){if(f=this._getDirection(e,r)==="vertical",i=Ft(X),g("dragOverValid"),Se.eventCanceled)return m;if(o)return Rt=St,y(),this._hideClone(),g("revert"),Se.eventCanceled||(mo?St.insertBefore(X,mo):St.appendChild(X)),_(!0);var w=V1(n,a.draggable);if(!w||kz(e,f,this)&&!w.animated){if(w===X)return _(!1);if(w&&n===e.target&&(r=w),r&&(s=Ft(r)),sd(St,n,X,i,r,s,e,!!r)!==!1)return y(),w&&w.nextSibling?n.insertBefore(X,w.nextSibling):n.appendChild(X),Rt=n,E(),_(!0)}else if(w&&Rz(e,f,this)){var S=Al(n,0,a,!0);if(S===X)return _(!1);if(r=S,s=Ft(r),sd(St,n,X,i,r,s,e,!1)!==!1)return y(),n.insertBefore(X,S),Rt=n,E(),_(!0)}else if(r.parentNode===n){s=Ft(r);var I=0,x,O=X.parentNode!==n,k=!wz(X.animated&&X.toRect||i,r.animated&&r.toRect||s,f),B=f?"top":"left",W=Kw(r,"top","top")||Kw(X,"top","top"),z=W?W.scrollTop:void 0;ba!==r&&(x=s[B],Kc=!1,rd=!k&&a.invertSwap||O),I=Oz(e,r,s,f,k?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,rd,ba===r);var me;if(I!==0){var K=yr(X);do K-=I,me=Rt.children[K];while(me&&(we(me,"display")==="none"||me===ke))}if(I===0||me===r)return _(!1);ba=r,qc=I;var $=r.nextElementSibling,N=!1;N=I===1;var F=sd(St,n,X,i,r,s,e,N);if(F!==!1)return(F===1||F===-1)&&(N=F===1),L_=!0,setTimeout(Cz,30),y(),N&&!$?n.appendChild(X):r.parentNode.insertBefore(X,N?$:r),W&&YO(W,0,z-W.scrollTop),Rt=X.parentNode,x!==void 0&&!rd&&(Ld=Math.abs(x-Ft(r)[B])),E(),_(!0)}if(n.contains(X))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Je(document,"mousemove",this._onTouchMove),Je(document,"touchmove",this._onTouchMove),Je(document,"pointermove",this._onTouchMove),Je(document,"dragover",ho),Je(document,"mousemove",ho),Je(document,"touchmove",ho)},_offUpEvents:function(){var e=this.el.ownerDocument;Je(e,"mouseup",this._onDrop),Je(e,"touchend",this._onDrop),Je(e,"pointerup",this._onDrop),Je(e,"touchcancel",this._onDrop),Je(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(nr=yr(X),ps=yr(X,r.draggable),Wn("drop",this,{evt:e}),Rt=X&&X.parentNode,nr=yr(X),ps=yr(X,r.draggable),Se.eventCanceled){this._nulling();return}Ca=!1,rd=!1,Kc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),V_(this.cloneId),V_(this._dragStartId),this.nativeDraggable&&(Je(document,"drop",this),Je(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),jc&&we(document.body,"user-select",""),we(X,"transform",""),e&&(_c&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ke&&ke.parentNode&&ke.parentNode.removeChild(ke),(St===Rt||hn&&hn.lastPutMode!=="clone")&&At&&At.parentNode&&At.parentNode.removeChild(At),X&&(this.nativeDraggable&&Je(X,"dragend",this),Pg(X),X.style["will-change"]="",_c&&!Ca&&tr(X,hn?hn.options.ghostClass:this.options.ghostClass,!1),tr(X,this.options.chosenClass,!1),Fn({sortable:this,name:"unchoose",toEl:Rt,newIndex:null,newDraggableIndex:null,originalEvent:e}),St!==Rt?(nr>=0&&(Fn({rootEl:Rt,name:"add",toEl:Rt,fromEl:St,originalEvent:e}),Fn({sortable:this,name:"remove",toEl:Rt,originalEvent:e}),Fn({rootEl:Rt,name:"sort",toEl:Rt,fromEl:St,originalEvent:e}),Fn({sortable:this,name:"sort",toEl:Rt,originalEvent:e})),hn&&hn.save()):nr!==xa&&nr>=0&&(Fn({sortable:this,name:"update",toEl:Rt,originalEvent:e}),Fn({sortable:this,name:"sort",toEl:Rt,originalEvent:e})),Se.active&&((nr==null||nr===-1)&&(nr=xa,ps=Gc),Fn({sortable:this,name:"end",toEl:Rt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Wn("nulling",this),St=X=Rt=ke=mo=At=Dd=bs=uo=kr=_c=nr=ps=xa=Gc=ba=qc=hn=nd=Se.dragged=Se.ghost=Se.clone=Se.active=null,$f.forEach(function(e){e.checked=!0}),$f.length=Og=Ng=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":X&&(this._onDragOver(e),Az(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Or(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Mz(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Or(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Or(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Ih.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&eN(r)},destroy:function(){Wn("destroy",this);var e=this.el;e[sr]=null,Je(e,"mousedown",this._onTapStart),Je(e,"touchstart",this._onTapStart),Je(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Je(e,"dragover",this),Je(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Uf.splice(Uf.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!bs){if(Wn("hideClone",this),Se.eventCanceled)return;we(At,"display","none"),this.options.removeCloneOnHide&&At.parentNode&&At.parentNode.removeChild(At),bs=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(bs){if(Wn("showClone",this),Se.eventCanceled)return;X.parentNode==St&&!this.options.group.revertClone?St.insertBefore(At,X):mo?St.insertBefore(At,mo):St.appendChild(At),this.options.group.revertClone&&this.animate(X,At),we(At,"display",""),bs=!1}}};function Az(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function sd(t,e,n,r,i,s,o,a){var l,c=t[sr],u=c.options.onMove,h;return window.CustomEvent&&!Xi&&!Sh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Ft(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),u&&(h=u.call(c,l,o)),h}function Pg(t){t.draggable=!1}function Cz(){L_=!1}function Rz(t,e,n){var r=Ft(Al(n.el,0,n.options,!0)),i=QO(n.el,n.options,ke),s=10;return e?t.clientX<i.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-s||t.clientY<r.bottom&&t.clientX<r.left}function kz(t,e,n){var r=Ft(V1(n.el,n.options.draggable)),i=QO(n.el,n.options,ke),s=10;return e?t.clientX>i.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+s||t.clientX>r.right&&t.clientY>r.top}function Oz(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,h=r?n.bottom:n.right,d=!1;if(!o){if(a&&Ld<c*i){if(!Kc&&(qc===1?l>u+c*s/2:l<h-c*s/2)&&(Kc=!0),Kc)d=!0;else if(qc===1?l<u+Ld:l>h-Ld)return-qc}else if(l>u+c*(1-i)/2&&l<h-c*(1-i)/2)return Nz(e)}return d=d||o,d&&(l<u+c*s/2||l>h-c*s/2)?l>u+c/2?1:-1:0}function Nz(t){return yr(X)<yr(t)?1:-1}function Mz(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function Pz(t){$f.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&$f.push(r)}}function Vd(t){return setTimeout(t,0)}function V_(t){return clearTimeout(t)}Em&&Ze(document,"touchmove",function(t){(Se.active||Ca)&&t.cancelable&&t.preventDefault()});Se.utils={on:Ze,off:Je,css:we,find:qO,is:function(e,n){return!!Or(e,n,e,!1)},extend:mz,throttle:KO,closest:Or,toggleClass:tr,clone:JO,index:yr,nextTick:Vd,cancelNextTick:V_,detectDirection:ZO,getChild:Al};Se.get=function(t){return t[sr]};Se.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Se.utils=Ei(Ei({},Se.utils),r.utils)),Ih.mount(r)})};Se.create=function(t,e){return new Se(t,e)};Se.version=dz;var Lt=[],vc,F_,B_=!1,xg,Dg,Hf,bc;function xz(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Ze(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ze(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ze(document,"touchmove",this._handleFallbackAutoScroll):Ze(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Je(document,"dragover",this._handleAutoScroll):(Je(document,"pointermove",this._handleFallbackAutoScroll),Je(document,"touchmove",this._handleFallbackAutoScroll),Je(document,"mousemove",this._handleFallbackAutoScroll)),Zw(),Fd(),gz()},nulling:function(){Hf=F_=vc=B_=bc=xg=Dg=null,Lt.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(Hf=n,r||this.options.forceAutoScrollFallback||Sh||Xi||jc){Lg(n,this.options,a,r);var l=ws(a,!0);B_&&(!bc||s!==xg||o!==Dg)&&(bc&&Zw(),bc=setInterval(function(){var c=ws(document.elementFromPoint(s,o),!0);c!==l&&(l=c,Fd()),Lg(n,i.options,c,r)},10),xg=s,Dg=o)}else{if(!this.options.bubbleScroll||ws(a,!0)===di()){Fd();return}Lg(n,this.options,ws(a,!1),!1)}}},Gi(t,{pluginName:"scroll",initializeByDefault:!0})}function Fd(){Lt.forEach(function(t){clearInterval(t.pid)}),Lt=[]}function Zw(){clearInterval(bc)}var Lg=KO(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=di(),c=!1,u;F_!==n&&(F_=n,Fd(),vc=e.scroll,u=e.scrollFn,vc===!0&&(vc=ws(n,!0)));var h=0,d=vc;do{var f=d,p=Ft(f),m=p.top,g=p.bottom,y=p.left,_=p.right,E=p.width,w=p.height,S=void 0,I=void 0,x=f.scrollWidth,O=f.scrollHeight,k=we(f),B=f.scrollLeft,W=f.scrollTop;f===l?(S=E<x&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),I=w<O&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(S=E<x&&(k.overflowX==="auto"||k.overflowX==="scroll"),I=w<O&&(k.overflowY==="auto"||k.overflowY==="scroll"));var z=S&&(Math.abs(_-i)<=o&&B+E<x)-(Math.abs(y-i)<=o&&!!B),me=I&&(Math.abs(g-s)<=o&&W+w<O)-(Math.abs(m-s)<=o&&!!W);if(!Lt[h])for(var K=0;K<=h;K++)Lt[K]||(Lt[K]={});(Lt[h].vx!=z||Lt[h].vy!=me||Lt[h].el!==f)&&(Lt[h].el=f,Lt[h].vx=z,Lt[h].vy=me,clearInterval(Lt[h].pid),(z!=0||me!=0)&&(c=!0,Lt[h].pid=setInterval((function(){r&&this.layer===0&&Se.active._onTouchMove(Hf);var $=Lt[this.layer].vy?Lt[this.layer].vy*a:0,N=Lt[this.layer].vx?Lt[this.layer].vx*a:0;typeof u=="function"&&u.call(Se.dragged.parentNode[sr],N,$,t,Hf,Lt[this.layer].el)!=="continue"||YO(Lt[this.layer].el,N,$)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=ws(d,!1)));B_=c}},30),rN=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function F1(){}F1.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Al(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:rN};Gi(F1,{pluginName:"revertOnSpill"});function B1(){}B1.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:rN};Gi(B1,{pluginName:"removeOnSpill"});Se.mount(new xz);Se.mount(B1,F1);function Dz(t,e,n={}){let r;const{document:i=LO,...s}=n,o={onUpdate:u=>{iN(e,u.oldIndex,u.newIndex)}},a=()=>{const u=typeof t=="string"?i==null?void 0:i.querySelector(t):DO(t);!u||r!==void 0||(r=new Se(u,{...o,...s}))},l=()=>{r==null||r.destroy(),r=void 0},c=(u,h)=>{if(h!==void 0)r==null||r.option(u,h);else return r==null?void 0:r.option(u)};return oH(a),MO(l),{stop:l,start:a,option:c}}function iN(t,e,n){const r=sn(t),i=r?[...Ou(t)]:Ou(t);if(n>=0&&n<i.length){const s=i.splice(e,1)[0];Dl(()=>{i.splice(n,0,s),r&&(t.value=i)})}}function Lz(){let t=["Bal","Bar","Dal","Dar","Den","Dok","Jar","Jik","Lar","Rak","Ral","Ril","Sig","Tal","Thor","Ton"],e=["dar","dor","dur","kal","kar","kir","kur","lah","lak","lim","lor","rak","tin","ton","tor","vald"],n=["Rockcrusher","Spinewielder","Skullbearer","Drpare"];return t[Math.floor(Math.random()*t.length)]+e[Math.floor(Math.random()*e.length)]+" "+n[Math.floor(Math.random()*n.length)]}function U_(t=4){let e=t,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}const Vz={class:"header"},Fz={class:"body"},Bz={class:"controls"},Uz=Zn({__name:"modal.vapor",setup(t,{expose:e}){const n=xe();return e({showModal:()=>{n.value&&n.value.showModal()},closeModal:()=>{n.value&&n.value.close()}}),(s,o)=>(ie(),ye("dialog",{ref_key:"dialog",ref:n,class:"danger"},[A("div",Vz,[Yt(s.$slots,"header",{},void 0,!0)]),A("div",Fz,[Yt(s.$slots,"body",{},void 0,!0)]),A("div",Bz,[Yt(s.$slots,"controls",{},void 0,!0)])],512))}}),$z=eo(Uz,[["__scopeId","data-v-3eb9aebc"]]);function dn(t){this.content=t}dn.prototype={constructor:dn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new dn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new dn(n)},addToStart:function(t,e){return new dn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new dn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new dn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=dn.from(t),t.size?new dn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=dn.from(t),t.size?new dn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=dn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};dn.from=function(t){if(t instanceof dn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new dn(e)};function sN(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=sN(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function oN(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=oN(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class U{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new U(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new U(r,i)}cutByIndex(e,n){return e==n?U.empty:e==0&&n==this.content.length?this:new U(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new U(i,s)}addToStart(e){return new U([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new U(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return sN(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return oN(this,e,n,r)}findIndex(e,n=-1){if(e==0)return od(0,e);if(e==this.size)return od(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?od(r+1,o):od(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return U.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new U(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return U.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new U(n||e,r)}static from(e){if(!e)return U.empty;if(e instanceof U)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new U([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}U.empty=new U([],0);const Vg={index:0,offset:0};function od(t,e){return Vg.index=t,Vg.offset=e,Vg}function zf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!zf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!zf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ct=class $_{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&zf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return $_.none;if(e instanceof $_)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ct.none=[];class jf extends Error{}class oe{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=lN(this.content,e+this.openStart,n);return r&&new oe(r,this.openStart,this.openEnd)}removeBetween(e,n){return new oe(aN(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return oe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new oe(U.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new oe(e,r,i)}}oe.empty=new oe(U.empty,0,0);function aN(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(aN(s.content,e-i-1,n-i-1)))}function lN(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=lN(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function Hz(t,e,n){if(n.openStart>t.depth)throw new jf("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new jf("Inconsistent open depths");return cN(t,e,n,0)}function cN(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=cN(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Uo(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=zz(n,t);return Uo(s,hN(t,o,a,e,r))}else return Uo(s,Wf(t,e,r))}function uN(t,e){if(!e.type.compatibleContent(t.type))throw new jf("Cannot join "+e.type.name+" onto "+t.type.name)}function H_(t,e,n){let r=t.node(n);return uN(r,e.node(n)),r}function Bo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Yc(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Bo(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Bo(i.child(a),r);e&&e.depth==n&&e.textOffset&&Bo(e.nodeBefore,r)}function Uo(t,e){return t.type.checkContent(e),t.copy(e)}function hN(t,e,n,r,i){let s=t.depth>i&&H_(t,e,i+1),o=r.depth>i&&H_(n,r,i+1),a=[];return Yc(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(uN(s,o),Bo(Uo(s,hN(t,e,n,r,i+1)),a)):(s&&Bo(Uo(s,Wf(t,e,i+1)),a),Yc(e,n,i,a),o&&Bo(Uo(o,Wf(n,r,i+1)),a)),Yc(r,null,i,a),new U(a)}function Wf(t,e,n){let r=[];if(Yc(null,t,n,r),t.depth>n){let i=H_(t,e,n+1);Bo(Uo(i,Wf(t,e,n+1)),r)}return Yc(e,null,n,r),new U(r)}function zz(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(U.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Nu{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ct.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Gf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Nu(n,r,s)}static resolveCached(e,n){for(let i=0;i<Fg.length;i++){let s=Fg[i];if(s.pos==n&&s.doc==e)return s}let r=Fg[Bg]=Nu.resolve(e,n);return Bg=(Bg+1)%jz,r}}let Fg=[],Bg=0,jz=12;class Gf{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Wz=Object.create(null);let $o=class z_{constructor(e,n,r,i=ct.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||U.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&zf(this.attrs,n||e.defaultAttrs||Wz)&&ct.sameSet(this.marks,r||ct.none)}copy(e=null){return e==this.content?this:new z_(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new z_(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return oe.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new oe(c,i.depth-o,s.depth-o)}replace(e,n,r){return Hz(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Nu.resolveCached(this,e)}resolveNoCache(e){return Nu.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),dN(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=U.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=ct.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!ct.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=U.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};$o.prototype.text=void 0;class qf extends $o{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):dN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new qf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new qf(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function dN(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ta{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Gz(e,n);if(r.next==null)return ta.empty;let i=fN(r);r.next&&r.err("Unexpected trailing text");let s=Zz(Xz(i));return ej(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return U.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let d=s(h,a.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ta.empty=new ta(!0);class Gz{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function fN(t){let e=[];do e.push(qz(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function qz(t){let e=[];do e.push(Kz(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Kz(t){let e=Qz(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Yz(t,e);else break;return e}function eS(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Yz(t,e){let n=eS(t),r=n;return t.eat(",")&&(t.next!="}"?r=eS(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Jz(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Qz(t){if(t.eat("(")){let e=fN(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Jz(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Xz(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function pN(t,e){return e-t}function tS(t,e){let n=[];return r(e),n.sort(pN);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Zz(t){let e=Object.create(null);return n(tS(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);tS(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new ta(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(pN);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function ej(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function mN(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function gN(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function yN(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new tj(t[n]);return e}let nS=class _N{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=yN(r.attrs),this.defaultAttrs=mN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ta.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:gN(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $o(this,this.computeAttrs(e),U.from(n),ct.setFrom(r))}createChecked(e=null,n,r){return n=U.from(n),this.checkContent(n),new $o(this,this.computeAttrs(e),n,ct.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=U.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(U.empty,!0);return s?new $o(this,e,n.append(s),ct.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ct.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new _N(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class tj{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Tm{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=yN(i.attrs),this.excluded=null;let s=mN(this.attrs);this.instance=s?new ct(this,s):null}create(e=null){return!e&&this.instance?this.instance:new ct(this,gN(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Tm(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class nj{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=dn.from(e.nodes),n.marks=dn.from(e.marks||{}),this.nodes=nS.compile(this.spec.nodes,this),this.marks=Tm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=ta.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?rS(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:rS(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof nS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new qf(r,r.defaultAttrs,e,ct.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return $o.fromJSON(this,e)}markFromJSON(e){return ct.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function rS(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function rj(t){return t.tag!=null}function ij(t){return t.style!=null}class Cl{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{rj(r)?this.tags.push(r):ij(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new sS(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new sS(this,n,!0);return r.addAll(e,n.from,n.to),oe.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(aj(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=oS(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=oS(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Cl(e,Cl.schemaRules(e)))}}const vN={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},sj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bN={ol:!0,ul:!0},Kf=1,Yf=2,Jc=4;function iS(t,e,n){return e!=null?(e?Kf:0)|(e==="full"?Yf:0):t&&t.whitespace=="pre"?Kf|Yf:n&~Jc}class ad{constructor(e,n,r,i,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=ct.none,this.stashMarks=[],this.match=o||(a&Jc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(U.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Kf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=U.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(U.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):cj(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!vN.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class sS{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=iS(null,n.preserveWhitespace,0)|(r?Jc:0);i?s=new ad(i.type,i.attrs,ct.none,ct.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new ad(null,null,ct.none,ct.none,!0,null,o):s=new ad(e.schema.topNodeType,null,ct.none,ct.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(lj(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Yf||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Kf)r.options&Yf?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;bN.hasOwnProperty(r)&&this.parser.normalizeLists&&oj(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:sj.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(vN.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=ct.none,r=ct.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=iS(e,i,s.options);s.options&Jc&&s.content.length==0&&(o|=Jc),this.nodes.push(new ad(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=uj(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function oj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&bN.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function aj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function lj(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function oS(t){let e={};for(let n in t)e[n]=t[n];return e}function cj(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function uj(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class ii{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Ug(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=ii.renderSpec(Ug(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&ii.renderSpec(Ug(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let h=u.indexOf(" ");h>0?a.setAttributeNS(u.slice(0,h),u.slice(h+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let h=n[u];if(h===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:f}=ii.renderSpec(e,h,r);if(a.appendChild(d),f){if(o)throw new RangeError("Multiple content holes");o=f}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ii(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=aS(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return aS(e.marks)}}function aS(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Ug(t){return t.document||window.document}const EN=65535,TN=Math.pow(2,16);function hj(t,e){return t+e*TN}function lS(t){return t&EN}function dj(t){return(t-(t&EN))/TN}const wN=1,SN=2,Bd=4,IN=8;class j_{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&IN)>0}get deletedBefore(){return(this.delInfo&(wN|Bd))>0}get deletedAfter(){return(this.delInfo&(SN|Bd))>0}get deletedAcross(){return(this.delInfo&Bd)>0}}class or{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&or.empty)return or.empty}recover(e){let n=0,r=lS(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+dj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(e<=h){let d=c?e==l?-1:e==h?1:n:n,f=l+i+(d<0?0:u);if(r)return f;let p=e==(n<0?l:h)?null:hj(a/3,e-l),m=e==l?SN:e==h?wN:Bd;return(n<0?e!=l:e!=h)&&(m|=IN),new j_(f,m,p)}i+=u-c}return r?e+i:new j_(e+i,0,null)}touches(e,n){let r=0,i=lS(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new or(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?or.empty:new or(e<0?[0,-e,0]:[0,0,e])}}or.empty=new or([]);class el{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new el(this.maps,this.mirror,e,n)}copy(){return new el(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new el;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new j_(e,i,null)}}const $g=Object.create(null);class Ln{getMap(){return or.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=$g[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in $g)throw new RangeError("Duplicate use of step JSON ID "+e);return $g[e]=n,n.prototype.jsonID=e,n}}class Bt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Bt(e,null)}static fail(e){return new Bt(null,e)}static fromReplace(e,n,r,i){try{return Bt.ok(e.replace(n,r,i))}catch(s){if(s instanceof jf)return Bt.fail(s.message);throw s}}}function U1(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(U1(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return U.fromArray(r)}class Ss extends Ln{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new oe(U1(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Bt.fromReplace(e,this.from,this.to,s)}invert(){return new si(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ss(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ss&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ss(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ss(n.from,n.to,e.markFromJSON(n.mark))}}Ln.jsonID("addMark",Ss);class si extends Ln{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new oe(U1(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Bt.fromReplace(e,this.from,this.to,r)}invert(){return new Ss(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new si(n.pos,r.pos,this.mark)}merge(e){return e instanceof si&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new si(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new si(n.from,n.to,e.markFromJSON(n.mark))}}Ln.jsonID("removeMark",si);class Is extends Ln{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Bt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Bt.fromReplace(e,this.pos,this.pos+1,new oe(U.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Is(this.pos,n.marks[i]);return new Is(this.pos,this.mark)}}return new Rl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Is(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Is(n.pos,e.markFromJSON(n.mark))}}Ln.jsonID("addNodeMark",Is);class Rl extends Ln{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Bt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Bt.fromReplace(e,this.pos,this.pos+1,new oe(U.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Is(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Rl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Rl(n.pos,e.markFromJSON(n.mark))}}Ln.jsonID("removeNodeMark",Rl);class en extends Ln{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&W_(e,this.from,this.to)?Bt.fail("Structure replace would overwrite content"):Bt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new or([this.from,this.to-this.from,this.slice.size])}invert(e){return new en(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new en(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof en)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?oe.empty:new oe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new en(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?oe.empty:new oe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new en(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new en(n.from,n.to,oe.fromJSON(e,n.slice),!!n.structure)}}Ln.jsonID("replace",en);class nn extends Ln{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(W_(e,this.from,this.gapFrom)||W_(e,this.gapTo,this.to)))return Bt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Bt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Bt.fromReplace(e,this.from,this.to,r):Bt.fail("Content does not fit in gap")}getMap(){return new or([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new nn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new nn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new nn(n.from,n.to,n.gapFrom,n.gapTo,oe.fromJSON(e,n.slice),n.insert,!!n.structure)}}Ln.jsonID("replaceAround",nn);function W_(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function fj(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[m])?o.to=f:i.push(o=new si(d,f,h[m])));a&&a.to==d?a.to=f:s.push(a=new Ss(d,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function pj(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Tm){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let h=l[u],d;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&h.eq(i[f].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new si(o.from,o.to,o.style)))}function mj(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new en(o,c,oe.empty));else{r=u;for(let h=0;h<l.marks.length;h++)n.allowsMarkType(l.marks[h].type)||t.step(new si(o,c,l.marks[h]));if(l.isText&&!n.spec.code){let h,d=/\r?\n|\r/g,f;for(;h=d.exec(l.text);)f||(f=new oe(U.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new en(o+h.index,o+h.index+h[0].length,f))}}o=c}if(!r.validEnd){let a=r.fillBefore(U.empty,!0);t.replace(o,o,new oe(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function gj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Yl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!gj(i,s,o))break}return null}function yj(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=U.empty,h=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=U.from(r.node(p).copy(u)),h++):l--;let d=U.empty,f=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=U.from(i.node(p).copy(d)),f++):c++;t.step(new nn(l,c,o,a,new oe(u.append(d),h,f),u.size-h,!0))}function $1(t,e,n=null,r=t){let i=_j(t,e),s=i&&vj(r,e);return s?i.map(cS).concat({type:e,attrs:n}).concat(s.map(cS)):null}function cS(t){return{type:t,attrs:null}}function _j(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function vj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function bj(t,e,n){let r=U.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=U.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new nn(i,s,i,s,new oe(r,0,0),n.length,!0))}function Ej(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&Tj(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return t.step(new nn(c,u,c+1,u-1,new oe(U.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function Tj(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function wj(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new nn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new oe(U.from(o),0,0),1,!0))}function tl(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let h=i.node(c),d=i.index(c);if(h.type.spec.isolating)return!1;let f=h.content.cutByIndex(d,h.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||h;if(!h.canReplace(d+1,h.childCount)||!m.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Sj(t,e,n=1,r){let i=t.doc.resolve(e),s=U.empty,o=U.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=U.from(i.node(a).copy(s));let u=r&&r[c];o=U.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new en(e,e,new oe(s.append(o),n,n),!0))}function no(t,e){let n=t.resolve(e),r=n.index();return AN(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function AN(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function wm(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&AN(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Ij(t,e,n){let r=new en(e-n,e+n,oe.empty,!0);t.step(r)}function Aj(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function CN(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Sm(t,e,n=e,r=oe.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return RN(i,s,r)?new en(e,n,r):new Cj(i,s,r).fit()}function RN(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Cj{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=U.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=U.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new oe(s,o,a);return e>-1?new nn(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new en(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Hg(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(n==1&&(o?c.matchType(o.type)||(h=c.fillBefore(U.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:h};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Hg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new oe(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Hg(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new oe(Ec(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new oe(Ec(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:h,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));h=h.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=h.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(h=g,u.push(kN(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Tc(this.placed,n,U.from(u)),this.frontier[n].match=h,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<f;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?oe.empty:new oe(Ec(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new oe(Ec(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!zg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=zg(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=zg(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Tc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Tc(this.placed,this.depth,U.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(U.empty,!0);n.childCount&&(this.placed=Tc(this.placed,this.frontier.length,n))}}function Ec(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Ec(t.firstChild.content,e-1,n)))}function Tc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Tc(t.lastChild.content,e-1,n)))}function Hg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function kN(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,kN(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(U.empty,!0)))),t.copy(r)}function zg(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Rj(n,s.content,o)?a:null}function Rj(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function kj(t){return t.spec.defining||t.spec.definingForContent}function Oj(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(RN(i,s,r))return t.step(new en(e,n,r));let o=NN(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let d=i.depth,f=i.pos-1;d>0;d--,f--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:i.before(d)==f&&o.splice(1,0,-d)}let l=o.indexOf(a),c=[],u=r.openStart;for(let d=r.content,f=0;;f++){let p=d.firstChild;if(c.push(p),f==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let f=c[d],p=kj(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=d;else if(p||!f.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let f=(d+u+1)%(r.openStart+1),p=c[f];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let _=i.node(g-1),E=i.index(g-1);if(_.canReplaceWith(E,E,p.type,p.marks))return t.replace(i.before(g),y?s.after(g):n,new oe(ON(r.content,0,r.openStart,f),f,r.openEnd))}}let h=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>h));d--){let f=o[d];f<0||(e=i.before(f),n=s.after(f))}}function ON(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(ON(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(U.empty,!0))}return t}function Nj(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Aj(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new oe(U.from(r),0,0))}function Mj(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=NN(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function NN(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class nl extends Ln{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Bt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Bt.fromReplace(e,this.pos,this.pos+1,new oe(U.from(i),0,n.isLeaf?0:1))}getMap(){return or.empty}invert(e){return new nl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new nl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new nl(n.pos,n.attr,n.value)}}Ln.jsonID("attr",nl);class Mu extends Ln{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Bt.ok(r)}getMap(){return or.empty}invert(e){return new Mu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Mu(n.attr,n.value)}}Ln.jsonID("docAttr",Mu);let kl=class extends Error{};kl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};kl.prototype=Object.create(Error.prototype);kl.prototype.constructor=kl;kl.prototype.name="TransformError";class Pj{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new el}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new kl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=oe.empty){let i=Sm(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new oe(U.from(r),0,0))}delete(e,n){return this.replace(e,n,oe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Oj(this,e,n,r),this}replaceRangeWith(e,n,r){return Nj(this,e,n,r),this}deleteRange(e,n){return Mj(this,e,n),this}lift(e,n){return yj(this,e,n),this}join(e,n=1){return Ij(this,e,n),this}wrap(e,n){return bj(this,e,n),this}setBlockType(e,n=e,r,i=null){return Ej(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return wj(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new nl(e,n,r)),this}setDocAttribute(e,n){return this.step(new Mu(e,n)),this}addNodeMark(e,n){return this.step(new Is(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ct)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Rl(e,n)),this}split(e,n=1,r){return Sj(this,e,n,r),this}addMark(e,n,r){return fj(this,e,n,r),this}removeMark(e,n,r){return pj(this,e,n,r),this}clearIncompatible(e,n,r){return mj(this,e,n,r),this}}const jg=Object.create(null);class Ve{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new xj(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=oe.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?oe.empty:n),a==0&&dS(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),dS(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Ne(e):Ra(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Ra(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Ra(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Br(e.node(0))}static atStart(e){return Ra(e,e,0,0,1)||new Br(e)}static atEnd(e){return Ra(e,e,e.content.size,e.childCount,-1)||new Br(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=jg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in jg)throw new RangeError("Duplicate use of selection JSON ID "+e);return jg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ne.between(this.$anchor,this.$head).getBookmark()}}Ve.prototype.visible=!0;class xj{constructor(e,n){this.$from=e,this.$to=n}}let uS=!1;function hS(t){!uS&&!t.parent.inlineContent&&(uS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ne extends Ve{constructor(e,n=e){hS(e),hS(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ve.near(r);let i=e.resolve(n.map(this.anchor));return new Ne(i.parent.inlineContent?i:r,r)}replace(e,n=oe.empty){if(super.replace(e,n),n==oe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ne&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Im(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ne(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ve.findFrom(n,r,!0)||Ve.findFrom(n,-r,!0);if(s)n=s.$head;else return Ve.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Ve.findFrom(e,-r,!0)||Ve.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ne(e,n)}}Ve.jsonID("text",Ne);class Im{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Im(e.map(this.anchor),e.map(this.head))}resolve(e){return Ne.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ee extends Ve{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Ve.near(s):new Ee(s)}content(){return new oe(U.from(this.node),0,0)}eq(e){return e instanceof Ee&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new H1(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ee(e.resolve(n.anchor))}static create(e,n){return new Ee(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ee.prototype.visible=!1;Ve.jsonID("node",Ee);class H1{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Im(r,r):new H1(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ee.isSelectable(r)?new Ee(n):Ve.near(n)}}class Br extends Ve{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=oe.empty){if(n==oe.empty){e.delete(0,e.doc.content.size);let r=Ve.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Br(e)}map(e){return new Br(e)}eq(e){return e instanceof Br}getBookmark(){return Dj}}Ve.jsonID("all",Br);const Dj={map(){return this},resolve(t){return new Br(t)}};function Ra(t,e,n,r,i,s=!1){if(e.inlineContent)return Ne.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Ee.isSelectable(a))return Ee.create(t,n-(i<0?a.nodeSize:0))}else{let l=Ra(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function dS(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof en||i instanceof nn))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(Ve.near(t.doc.resolve(o),n))}const fS=1,ld=2,pS=4;class Lj extends Pj{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|fS)&~ld,this.storedMarks=null,this}get selectionSet(){return(this.updated&fS)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ld,this}ensureMarks(e){return ct.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ld)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~ld,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ct.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(Ve.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=pS,this}get scrolledIntoView(){return(this.updated&pS)>0}}function mS(t,e){return!e||!t?t:t.bind(e)}class wc{constructor(e,n,r){this.name=e,this.init=mS(n.init,r),this.apply=mS(n.apply,r)}}const Vj=[new wc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new wc("selection",{init(t,e){return t.selection||Ve.atStart(e.doc)},apply(t){return t.selection}}),new wc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new wc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Wg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Vj.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new wc(r.key,r.spec.state,r))})}}class Da{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Da(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Lj(this)}static create(e){let n=new Wg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Da(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Wg(this.schema,e.plugins),r=n.fields,i=new Da(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Wg(e.schema,e.plugins),s=new Da(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=$o.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Ve.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function MN(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=MN(i,e,{})),n[r]=i}return n}class Cr{constructor(e){this.spec=e,this.props={},e.props&&MN(e.props,this,this.props),this.key=e.key?e.key.key:PN("plugin")}getState(e){return e[this.key]}}const Gg=Object.create(null);function PN(t){return t in Gg?t+"$"+ ++Gg[t]:(Gg[t]=0,t+"$")}class ro{constructor(e="key"){this.key=PN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const mn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Pu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let G_=null;const Ni=function(t,e,n){let r=G_||(G_=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Fj=function(){G_=null},na=function(t,e,n,r){return n&&(gS(t,e,n,r,-1)||gS(t,e,n,r,1))},Bj=/^(img|br|input|textarea|hr)$/i;function gS(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Xr(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Ah(t)||Bj.test(t.nodeName)||t.contentEditable=="false")return!1;e=mn(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Xr(t):0}else return!1}}function Xr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Uj(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Xr(t)}else if(t.parentNode&&!Ah(t))e=mn(t),t=t.parentNode;else return null}}function $j(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Ah(t))e=mn(t)+1,t=t.parentNode;else return null}}function Hj(t,e,n){for(let r=e==0,i=e==Xr(t);r||i;){if(t==n)return!0;let s=mn(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Xr(t)}}function Ah(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Am=function(t){return t.focusNode&&na(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function vo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function zj(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function jj(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const Ti=typeof navigator<"u"?navigator:null,yS=typeof document<"u"?document:null,io=Ti&&Ti.userAgent||"",q_=/Edge\/(\d+)/.exec(io),xN=/MSIE \d/.exec(io),K_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(io),Qn=!!(xN||K_||q_),xs=xN?document.documentMode:K_?+K_[1]:q_?+q_[1]:0,jr=!Qn&&/gecko\/(\d+)/i.test(io);jr&&+(/Firefox\/(\d+)/.exec(io)||[0,0])[1];const Y_=!Qn&&/Chrome\/(\d+)/.exec(io),Un=!!Y_,Wj=Y_?+Y_[1]:0,Hn=!Qn&&!!Ti&&/Apple Computer/.test(Ti.vendor),Ol=Hn&&(/Mobile\/\w+/.test(io)||!!Ti&&Ti.maxTouchPoints>2),_r=Ol||(Ti?/Mac/.test(Ti.platform):!1),Gj=Ti?/Win/.test(Ti.platform):!1,Mr=/Android \d/.test(io),Ch=!!yS&&"webkitFontSmoothing"in yS.documentElement.style,qj=Ch?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Kj(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ri(t,e){return typeof t=="number"?t:t[e]}function Yj(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function _S(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Pu(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?Kj(s):Yj(a),u=0,h=0;if(e.top<c.top+Ri(r,"top")?h=-(c.top-e.top+Ri(i,"top")):e.bottom>c.bottom-Ri(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Ri(i,"top")-c.top:e.bottom-c.bottom+Ri(i,"bottom")),e.left<c.left+Ri(r,"left")?u=-(c.left-e.left+Ri(i,"left")):e.right>c.right-Ri(r,"right")&&(u=e.right-c.right+Ri(i,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let d=a.scrollLeft,f=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let p=a.scrollLeft-d,m=a.scrollTop-f;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function Jj(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:DN(t.dom)}}function DN(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Pu(r));return e}function Qj({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;LN(n,r==0?0:r-e)}function LN(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ea=null;function Xj(t){if(t.setActive)return t.setActive();if(Ea)return t.focus(Ea);let e=DN(t);t.focus(Ea==null?{get preventScroll(){return Ea={preventScroll:!0},!0}}:void 0),Ea||(Ea=!1,LN(e,0))}function VN(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Ni(u).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?Zj(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:VN(n,i)}function Zj(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=ls(r,1);if(s.top!=s.bottom&&z1(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function z1(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function eW(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function tW(t,e,n){let{node:r,offset:i}=VN(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function nW(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function FN(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(z1(e,c))return FN(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function rW(t,e){let n=t.dom.ownerDocument,r,i=0,s=jj(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!z1(e,c)||(o=FN(t.dom,e,c),!o))return null}if(Hn)for(let c=o;r&&c;c=Pu(c))c.draggable&&(r=void 0);if(o=eW(o,e),r){if(jr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;Ch&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=nW(t,r,i,e))}a==null&&(a=tW(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function vS(t){return t.top<t.bottom||t.left<t.right}function ls(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(vS(r))return r}return Array.prototype.find.call(n,vS)||t.getBoundingClientRect()}const iW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function BN(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Ch||jr;if(r.nodeType==3)if(o&&(iW.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=ls(Ni(r,i,i),n);if(jr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=ls(Ni(r,i-1,i-1),-1);if(c.top==l.top){let u=ls(Ni(r,i,i+1),-1);if(u.top!=l.top)return cc(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,cc(ls(Ni(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Xr(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return qg(l.getBoundingClientRect(),!1)}if(s==null&&i<Xr(r)){let l=r.childNodes[i];if(l.nodeType==1)return qg(l.getBoundingClientRect(),!0)}return qg(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Xr(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Ni(l,Xr(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return cc(ls(c,1),!1)}if(s==null&&i<Xr(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Ni(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return cc(ls(c,-1),!0)}return cc(ls(r.nodeType==3?Ni(r):r,-n),n>=0)}function cc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function qg(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function UN(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function sW(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return UN(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=BN(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Ni(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const oW=/[\u0590-\u08ac]/;function aW(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return!oW.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:UN(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),g})}let bS=null,ES=null,TS=!1;function lW(t,e,n){return bS==e&&ES==n?TS:(bS=e,ES=n,TS=n=="up"||n=="down"?sW(t,e,n):aW(t,e,n))}const Ir=0,wS=1,Ro=2,wi=3;class Rh{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ir,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>mn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof HN){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof $N&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?mn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?mn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let h=a;h>0;h--){let d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=mn(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=mn(h.dom);break}n+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let d=0,f=0;d<this.children.length;d++){let p=this.children[d],m=f+p.size;if(s>f&&o<m)return p.setSelection(e-f-p.border,n-f-p.border,r,i);f=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((jr||Hn)&&e==n){let{node:d,offset:f}=a;if(d.nodeType==3){if(u=!!(f&&d.nodeValue[f-1]==`
`),u&&f==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:mn(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=d.childNodes[f-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(jr&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&Hn)&&na(a.node,a.offset,c.anchorNode,c.anchorOffset)&&na(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let f=a;a=l,l=f}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Ro:wS,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=wi:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ro:wi}r=o}this.dirty=Ro}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ro:wS;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class $N extends Rh{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ir&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class cW extends Rh{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ra extends Rh{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=ii.renderSpec(document,n.type.spec.toDOM(n,r))),new ra(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&wi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=wi&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ir){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ir}}slice(e,n,r){let i=ra.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=X_(s,n,o,r)),e>0&&(s=X_(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class Ds extends Rh{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,h=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=ii.renderSpec(document,n.type.spec.toDOM(n)));!h&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=WN(u,r,n),c?l=new uW(e,n,r,i,u,h||null,d,c,s,o+1):n.isText?new Cm(e,n,r,i,u,d,s):new Ds(e,n,r,i,u,h||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>U.empty)}return e}matchesNode(e,n,r){return this.dirty==Ir&&e.eq(this.node)&&Q_(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new dW(this,o&&o.node,e);mW(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?ct.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,h,d)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,h,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,f,e)||l.updateNextNode(c,u,h,e,d,i)||l.addNode(c,u,h,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ro)&&(o&&this.protectLocalComposition(e,o),zN(this.contentDOM,this.children,e),Ol&&gW(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ne)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=yW(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new cW(this,s,n,i);e.input.compositionNodes.push(o),this.children=X_(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==wi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ir}updateOuterDeco(e){if(Q_(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=jN(this.dom,this.nodeDOM,J_(this.outerDeco,this.node,n),J_(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function SS(t,e,n,r,i){WN(r,e,t);let s=new Ds(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Cm extends Ds{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==wi||this.dirty!=Ir&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ir||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ir,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Cm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=wi)}get domAtom(){return!1}isText(e){return this.node.text==e}}class HN extends Rh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ir&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uW extends Ds{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==wi)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function zN(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=IS(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof ra){let l=r?r.previousSibling:t.lastChild;zN(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=IS(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Qc=function(t){t&&(this.nodeName=t)};Qc.prototype=Object.create(null);const ko=[new Qc];function J_(t,e,n){if(t.length==0)return ko;let r=n?ko[0]:new Qc,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Qc(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Qc(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function jN(t,e,n,r){if(n==ko&&r==ko)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=ko[0]),i=l}hW(i,a||ko[0],o)}return i}function hW(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function WN(t,e,n){return jN(t,t,ko,J_(e,n,t.nodeType!=1))}function Q_(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function IS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class dW{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=fW(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ir,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ra.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==wi&&o.dom==o.contentDOM&&(o.dirty=Ro),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ds){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,h,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=wi&&Q_(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(l,e,n,r,i,o)))return this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Ro,h.updateChildren(i,o+1),h.dirty=Ir),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=Ds.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Ds.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new $N(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ra;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Cm)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Hn||Un)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new HN(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function fW(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ra)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function pW(t,e){return t.type.side-e.type.side}function mW(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(u?(h||(h=[u])).push(g):u=g)}if(u)if(h){h.sort(pW);for(let g=0;g<h.length;g++)n(h[g],c,!!l)}else n(u,c,!!l);let d,f;if(l)f=-1,d=l,l=null;else if(c<t.childCount)f=c,d=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=d.cut(g-s),d=d.cut(0,g-s),p=g,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();r(d,m,e.forChild(s,d),f),s=p}}function gW(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function yW(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function X_(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function j1(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Am(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&Ee.isSelectable(u)&&i.parent&&!(u.isInline&&Hj(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new Ee(o==h?a:r.resolve(h))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=W1(t,l,a,u)}return c}function GN(t){return t.editable?t.hasFocus():KN(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Hi(t,e=!1){let n=t.state.selection;if(qN(t,n),!!GN(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Un){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&na(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)vW(t);else{let{anchor:r,head:i}=n,s,o;AS&&!(n instanceof Ne)&&(n.$from.parent.inlineContent||(s=CS(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=CS(t,n.to))),t.docView.setSelection(r,i,t.root,e),AS&&(s&&RS(s),o&&RS(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_W(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const AS=Hn||Un&&Wj<63;function CS(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Hn&&i&&i.contentEditable=="false")return Kg(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Kg(i);if(s)return Kg(s)}}function Kg(t){return t.contentEditable="true",Hn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function RS(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function _W(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!GN(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function vW(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,mn(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Qn&&xs<=11&&(r.disabled=!0,r.disabled=!1)}function qN(t,e){if(e instanceof Ee){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(kS(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else kS(t)}function kS(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function W1(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Ne.between(e,n,r)}function OS(t){return t.editable&&!t.hasFocus()?!1:KN(t)}function KN(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function bW(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return na(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Z_(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Ve.findFrom(s,e)}function ms(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function NS(t,e,n){let r=t.state.selection;if(r instanceof Ne)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ms(t,new Ne(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Z_(t.state,e);return i&&i instanceof Ee?ms(t,i):!1}else if(!(_r&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Ee.isSelectable(s)?ms(t,new Ee(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Ch?ms(t,new Ne(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ee&&r.node.isInline)return ms(t,new Ne(e>0?r.$to:r.$from));{let i=Z_(t.state,e);return i?ms(t,i):!1}}}function Jf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Xc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ta(t,e){return e<0?EW(t):TW(t)}function EW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(jr&&n.nodeType==1&&r<Jf(n)&&Xc(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Xc(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(YN(n))break;{let a=n.previousSibling;for(;a&&Xc(a,-1);)i=n.parentNode,s=mn(a),a=a.previousSibling;if(a)n=a,r=Jf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?ev(t,n,r):i&&ev(t,i,s)}function TW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Jf(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Xc(a,1))s=n,o=++r;else break}else{if(YN(n))break;{let a=n.nextSibling;for(;a&&Xc(a,1);)s=a.parentNode,o=mn(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Jf(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&ev(t,s,o)}function YN(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function wW(t,e){for(;t&&e==t.childNodes.length&&!Ah(t);)e=mn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function SW(t,e){for(;t&&!e&&!Ah(t);)e=mn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function ev(t,e,n){if(e.nodeType!=3){let s,o;(o=wW(e,n))?(e=o,n=0):(s=SW(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(Am(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Hi(t)},50)}function MS(t,e){let n=t.state.doc.resolve(e);if(!(Un||Gj)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function PS(t,e,n){let r=t.state.selection;if(r instanceof Ne&&!r.empty||n.indexOf("s")>-1||_r&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Z_(t.state,e);if(o&&o instanceof Ee)return ms(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Br?Ve.near(o,e):Ve.findFrom(o,e);return a?ms(t,a):!1}return!1}function xS(t,e){if(!(t.state.selection instanceof Ne))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function DS(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function IW(t){if(!Hn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;DS(t,r,"true"),setTimeout(()=>DS(t,r,"false"),20)}return!1}function AW(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function CW(t,e){let n=e.keyCode,r=AW(e);if(n==8||_r&&n==72&&r=="c")return xS(t,-1)||Ta(t,-1);if(n==46&&!e.shiftKey||_r&&n==68&&r=="c")return xS(t,1)||Ta(t,1);if(n==13||n==27)return!0;if(n==37||_r&&n==66&&r=="c"){let i=n==37?MS(t,t.state.selection.from)=="ltr"?-1:1:-1;return NS(t,i,r)||Ta(t,i)}else if(n==39||_r&&n==70&&r=="c"){let i=n==39?MS(t,t.state.selection.from)=="ltr"?1:-1:1;return NS(t,i,r)||Ta(t,i)}else{if(n==38||_r&&n==80&&r=="c")return PS(t,-1,r)||Ta(t,-1);if(n==40||_r&&n==78&&r=="c")return IW(t)||PS(t,1,r)||Ta(t,1);if(r==(_r?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function JN(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||ii.fromSchema(t.state.schema),a=nM(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=tM[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d}}function QN(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new oe(U.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):oe.empty;let h=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(h)a=h;else{let d=i.marks(),{schema:f}=t.state,p=ii.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(f.text(m,d)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=OW(n),Ch&&NW(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Cl.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!RW.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=MW(LS(a,+u[1],+u[2]),u[4]);else if(a=oe.maxOpen(kW(a.content,i),!0),a.openStart||a.openEnd){let h=0,d=0;for(let f=a.content.firstChild;h<a.openStart&&!f.type.spec.isolating;h++,f=f.firstChild);for(let f=a.content.lastChild;d<a.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);a=LS(a,h,d)}return t.someProp("transformPasted",h=>{a=h(a,t)}),a}const RW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function kW(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&ZN(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=eM(o[o.length-1],s.length));let u=XN(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return U.from(o)}return t}function XN(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,U.from(t));return t}function ZN(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=ZN(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(U.from(XN(n,t,i+1))))}}function eM(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,eM(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(U.empty,!0);return t.copy(n.append(r))}function tv(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=tv(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(U.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function LS(t,e,n){return e<t.openStart&&(t=new oe(tv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new oe(tv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const tM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let VS=null;function nM(){return VS||(VS=document.implementation.createHTMLDocument("title"))}function OW(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=nM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&tM[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function NW(t){let e=t.querySelectorAll(Un?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function MW(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=U.from(l.create(r[a+1],i)),s++,o++}return new oe(i,s,o)}const zn={},jn={},PW={touchstart:!0,touchmove:!0};class xW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function DW(t){for(let e in zn){let n=zn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{VW(t,r)&&!G1(t,r)&&(t.editable||!(r.type in jn))&&n(t,r)},PW[e]?{passive:!0}:void 0)}Hn&&t.dom.addEventListener("input",()=>null),nv(t)}function As(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function LW(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function nv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>G1(t,r))})}function G1(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function VW(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function FW(t,e){!G1(t,e)&&zn[e.type]&&(t.editable||!(e.type in jn))&&zn[e.type](t,e)}jn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!iM(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Mr&&Un&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ol&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,vo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||CW(t,n)?n.preventDefault():As(t,"key")};jn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};jn.keypress=(t,e)=>{let n=e;if(iM(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||_r&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ne)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Rm(t){return{left:t.clientX,top:t.clientY}}function BW(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function q1(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function rl(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function UW(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ee.isSelectable(r)?(rl(t,new Ee(n),"pointer"),!0):!1}function $W(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Ee&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Ee.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(rl(t,Ee.create(t.state.doc,i),"pointer"),!0):!1}function HW(t,e,n,r,i){return q1(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?$W(t,n):UW(t,n))}function zW(t,e,n,r){return q1(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function jW(t,e,n,r){return q1(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||WW(t,n,r)}function WW(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(rl(t,Ne.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)rl(t,Ne.create(r,a+1,a+1+o.content.size),"pointer");else if(Ee.isSelectable(o))rl(t,Ee.create(r,a),"pointer");else continue;return!0}}function K1(t){return Qf(t)}const rM=_r?"metaKey":"ctrlKey";zn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=K1(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&BW(n,t.input.lastClick)&&!n[rM]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(Rm(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new GW(t,o,n,!!r)):(s=="doubleClick"?zW:jW)(t,o.pos,o.inside,n)?n.preventDefault():As(t,"pointer"))};class GW{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[rM],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Ee&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&jr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),As(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Hi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Rm(e))),this.updateAllowDefault(e),this.allowDefault||!n?As(this.view,"pointer"):HW(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Hn&&this.mightDrag&&!this.mightDrag.node.isAtom||Un&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(rl(this.view,Ve.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):As(this.view,"pointer")}move(e){this.updateAllowDefault(e),As(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}zn.touchstart=t=>{t.input.lastTouch=Date.now(),K1(t),As(t,"pointer")};zn.touchmove=t=>{t.input.lastTouch=Date.now(),As(t,"pointer")};zn.contextmenu=t=>K1(t);function iM(t,e){return t.composing?!0:Hn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const qW=Mr?5e3:-1;jn.compositionstart=jn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Qf(t,!0),t.markCursor=null;else if(Qf(t),jr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}sM(t,qW)};jn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,sM(t,20))};function sM(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Qf(t),e))}function oM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=YW());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function KW(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Uj(e.focusNode,e.focusOffset),r=$j(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n}function YW(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Qf(t,e=!1){if(!(Mr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),oM(t),e||t.docView&&t.docView.dirty){let n=j1(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function JW(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const xu=Qn&&xs<15||Ol&&qj<604;zn.copy=jn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=xu?null:n.clipboardData,o=r.content(),{dom:a,text:l}=JN(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):JW(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function QW(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function XW(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Du(t,r.value,null,i,e):Du(t,r.textContent,r.innerHTML,i,e)},50)}function Du(t,e,n,r,i){let s=QN(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||oe.empty)))return!0;if(!s)return!1;let o=QW(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function aM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}jn.paste=(t,e)=>{let n=e;if(t.composing&&!Mr)return;let r=xu?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Du(t,aM(r),r.getData("text/html"),i,n)?n.preventDefault():XW(t,n)};class lM{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const cM=_r?"altKey":"ctrlKey";zn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Rm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ee?i.to-1:i.to))){if(r&&r.mightDrag)o=Ee.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(o=Ee.create(t.state.doc,u.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c}=JN(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(xu?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",xu||n.dataTransfer.setData("text/plain",c),t.dragging=new lM(a,!n[cM],o)};zn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};jn.dragover=jn.dragenter=(t,e)=>e.preventDefault();jn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Rm(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=QN(t,aM(n.dataTransfer),xu?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[cM]);if(t.someProp("handleDrop",p=>p(t,n,o||oe.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?CN(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let f=c.doc.resolve(u);if(h&&Ee.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Ee(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,_)=>p=_),c.setSelection(W1(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};zn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Hi(t)},20))};zn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};zn.beforeinput=(t,e)=>{if(Un&&Mr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,vo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in jn)zn[t]=jn[t];function Lu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Xf{constructor(e,n){this.toDOM=e,this.spec=n||Ho,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new wr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Xf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Lu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ls{constructor(e,n){this.attrs=e,this.spec=n||Ho}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new wr(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ls&&Lu(this.attrs,e.attrs)&&Lu(this.spec,e.spec)}static is(e){return e.type instanceof Ls}destroy(){}}class Y1{constructor(e,n){this.attrs=e,this.spec=n||Ho}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new wr(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Y1&&Lu(this.attrs,e.attrs)&&Lu(this.spec,e.spec)}destroy(){}}class wr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new wr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new wr(e,e,new Xf(n,r))}static inline(e,n,r,i){return new wr(e,n,new Ls(r,i))}static node(e,n,r,i){return new wr(e,n,new Y1(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ls}get widget(){return this.type instanceof Xf}}const ka=[],Ho={};class Ht{constructor(e,n){this.local=e.length?e:ka,this.children=n.length?n:ka}static create(e,n){return n.length?Zf(n,e,0,Ho):Sn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Sn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ho)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?ZW(this.children,o||[],e,n,r,i,s):o?new Ht(o.sort(zo),ka):Sn}add(e,n){return n.length?this==Sn?Ht.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=hM(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,Zf(u,a,c+1,Ho)),s+=3}});let o=uM(s?dM(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ht(o.length?this.local.concat(o).sort(zo):this.local,i||this.children)}remove(e){return e.length==0||this==Sn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Sn?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ht(i,r):Sn}forChild(e,n){if(this==Sn)return this;if(n.isLeaf)return Ht.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ls){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Ht(i.sort(zo),ka);return r?new Es([a,r]):a}return r||Sn}eq(e){if(this==e)return!0;if(!(e instanceof Ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return J1(this.localsInner(e))}localsInner(e){if(this==Sn)return ka;if(e.inlineContent||!this.local.some(Ls.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ls||n.push(this.local[r]);return n}}Ht.empty=new Ht([],[]);Ht.removeOverlap=J1;const Sn=Ht.empty;class Es{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Ho));return Es.from(r)}forChild(e,n){if(n.isLeaf)return Ht.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Sn&&(s instanceof Es?r=r.concat(s.members):r.push(s))}return Es.from(r)}eq(e){if(!(e instanceof Es)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?J1(r?n:n.sort(zo)):ka}static from(e){switch(e.length){case 0:return Sn;case 1:return e[0];default:return new Es(e.every(n=>n instanceof Ht)?e:e.reduce((n,r)=>n.concat(r instanceof Ht?r:r.members),[]))}}}function ZW(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let h=0;n.maps[c].forEach((d,f,p,m)=>{let g=m-p-(f-d);for(let y=0;y<a.length;y+=3){let _=a[y+1];if(_<0||d>_+u-h)continue;let E=a[y]+u-h;f>=E?a[y+1]=d<=E?-2:-1:d>=u&&g&&(a[y]+=g,a[y+1]+=g)}h+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),h=u-i;if(h<0||h>=r.content.size){l=!0;continue}let d=n.map(t[c+1]+s,-1),f=d-i,{index:p,offset:m}=r.content.findIndex(h),g=r.maybeChild(p);if(g&&m==h&&m+g.nodeSize==f){let y=a[c+2].mapInner(n,g,u+1,t[c]+s+1,o);y!=Sn?(a[c]=h,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=eG(a,t,e,n,i,s,o),u=Zf(c,r,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,d=0;h<u.children.length;h+=3){let f=u.children[h];for(;d<a.length&&a[d]<f;)d+=3;a.splice(d,0,u.children[h],u.children[h+1],u.children[h+2])}}return new Ht(e.sort(zo),a)}function uM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new wr(i.from+e,i.to+e,i.type))}return n}function eG(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(r,i,c);h?n.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function hM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function dM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Zf(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=hM(t,a,l+n);if(c){s=!0;let u=Zf(c,a,n+l+1,r);u!=Sn&&i.push(l,l+a.nodeSize,u)}});let o=uM(s?dM(t):t,-n).sort(zo);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Ht(o,i):Sn}function zo(t,e){return t.from-e.from||t.to-e.to}function J1(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),FS(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),FS(e,i,r.copy(s.from,r.to)));break}}}return e}function FS(t,e,n){for(;e<t.length&&zo(n,t[e])>0;)e++;t.splice(e,0,n)}function Yg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Sn&&e.push(r)}),t.cursorWrapper&&e.push(Ht.create(t.state.doc,[t.cursorWrapper.deco])),Es.from(e)}const tG={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},nG=Qn&&xs<=11;class rG{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class iG{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new rG,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Qn&&xs<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),nG&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,tG)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(OS(this.view)){if(this.suppressingSelectionUpdates)return Hi(this.view);if(Qn&&xs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&na(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Pu(s))n.add(s);for(let s=e.anchorNode;s;s=Pu(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&OS(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let h=this.registerMutation(n[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(jr&&l.length>1){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let h=u[0],d=u[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Am(r)&&(c=j1(e))&&c.eq(Ve.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Hi(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),sG(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Hi(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Qn&&xs<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:d}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?mn(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?mn(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let BS=new WeakMap,US=!1;function sG(t){if(!BS.has(t)&&(BS.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=jr,US)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),US=!0}}function $S(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return na(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function oG(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return $S(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?$S(t,n):null}function aG(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Am(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Un&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],_=y.pmViewDesc;if(y.nodeName=="BR"&&!_){s=g;break}if(!_||_.size)break}let h=t.state.doc,d=t.someProp("domParser")||Cl.fromSchema(t.state.schema),f=h.resolve(o),p=null,m=d.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:lG,context:f});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function lG(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Hn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Hn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const cG=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function uG(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let k=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,B=j1(t,k);if(B&&!t.state.selection.eq(B)){if(Un&&Mr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",z=>z(t,vo(13,"Enter"))))return;let W=t.state.tr.setSelection(B);k=="pointer"?W.setMeta("pointer",!0):k=="key"&&W.scrollIntoView(),s&&W.setMeta("composition",s),t.dispatch(W)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=aG(t,e,n),u=t.state.doc,h=u.slice(c.from,c.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=fG(h.content,c.doc.content,c.from,d,f);if((Ol&&t.input.lastIOSEnter>Date.now()-225||Mr)&&i.some(k=>k.nodeType==1&&!cG.test(k.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",k=>k(t,vo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Ne&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let k=HS(t,t.state.doc,c.sel);if(k&&!k.eq(t.state.selection)){let B=t.state.tr.setSelection(k);s&&B.setMeta("composition",s),t.dispatch(B)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Ne&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Qn&&xs<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),_=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,E;if((Ol&&t.input.lastIOSEnter>Date.now()-225&&(!_||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!_&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(E=Ve.findFrom(c.doc.resolve(m.pos+1),1,!0))&&E.head==g.pos)&&t.someProp("handleKeyDown",k=>k(t,vo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&dG(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",k=>k(t,vo(8,"Backspace")))){Mr&&Un&&t.domObserver.suppressSelectionUpdates();return}Un&&Mr&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),Mr&&!_&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(k){return k(t,vo(13,"Enter"))})},20));let w=p.start,S=p.endA,I,x,O;if(_){if(m.pos==g.pos)Qn&&xs<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Hi(t),20)),I=t.state.tr.delete(w,S),x=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(O=hG(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))I=t.state.tr,O.type=="add"?I.addMark(w,S,O.mark):I.removeMark(w,S,O.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let k=m.parent.textBetween(m.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",B=>B(t,w,S,k)))return;I=t.state.tr.insertText(k,w,S)}}if(I||(I=t.state.tr.replace(w,S,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let k=HS(t,I.doc,c.sel);k&&!(Un&&Mr&&t.composing&&k.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(k.head==w||k.head==I.mapping.map(S)-1)||Qn&&k.empty&&k.head==w)&&I.setSelection(k)}x&&I.ensureMarks(x),s&&I.setMeta("composition",s),t.dispatch(I.scrollIntoView())}function HS(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:W1(t,e.resolve(n.anchor),e.resolve(n.head))}function hG(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(U.from(c).eq(t))return{mark:a,type:o}}function dG(t,e,n,r,i){if(n-e<=i.pos-r.pos||Jg(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Jg(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Jg(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Jg(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function fG(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&zS(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&zS(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function zS(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class pG{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new xW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(KS),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=GS(this),WS(this),this.nodeViews=qS(this),this.docView=SS(this.state.doc,jS(this),Yg(this),this.dom,this),this.domObserver=new iG(this,(r,i,s,o)=>uG(this,r,i,s,o)),this.domObserver.start(),DW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&nv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(KS),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(oM(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=qS(this);gG(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&nv(this),this.editable=GS(this),WS(this);let l=Yg(this),c=jS(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Jj(this);if(o){this.domObserver.stop();let f=h&&(Qn||Un)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&mG(i.selection,e.selection);if(h){let p=Un?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=KW(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=SS(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&bW(this))?Hi(this,f):(qN(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&Qj(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ee){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&_S(this,n.getBoundingClientRect(),e)}else _S(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new lM(e.slice,e.move,i<0?void 0:Ee.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Qn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Xj(this.dom),Hi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rW(this,e)}coordsAtPos(e,n=1){return BN(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return lW(this,n||this.state,e)}pasteHTML(e,n){return Du(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Du(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(LW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Yg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Fj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return FW(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return Hn&&this.root.nodeType===11&&zj(this.dom.ownerDocument)==this.dom&&oG(this,e)||e}domSelection(){return this.root.getSelection()}}function jS(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[wr.node(0,t.state.doc.content.size,e)]}function WS(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:wr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function GS(t){return!t.someProp("editable",e=>e(t.state)===!1)}function mG(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function qS(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function gG(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function KS(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Gs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ep={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},yG=typeof navigator<"u"&&/Mac/.test(navigator.platform),_G=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var gn=0;gn<10;gn++)Gs[48+gn]=Gs[96+gn]=String(gn);for(var gn=1;gn<=24;gn++)Gs[gn+111]="F"+gn;for(var gn=65;gn<=90;gn++)Gs[gn]=String.fromCharCode(gn+32),ep[gn]=String.fromCharCode(gn);for(var Qg in Gs)ep.hasOwnProperty(Qg)||(ep[Qg]=Gs[Qg]);function vG(t){var e=yG&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||_G&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ep:Gs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const bG=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function EG(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))bG?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function TG(t){let e=Object.create(null);for(let n in t)e[EG(n)]=t[n];return e}function Xg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function wG(t){return new Cr({props:{handleKeyDown:fM(t)}})}function fM(t){let e=TG(t);return function(n,r){let i=vG(r),s,o=e[Xg(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Xg(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Gs[r.keyCode])&&s!=i){let a=e[Xg(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const SG=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function pM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const IG=(t,e,n)=>{let r=pM(t,n);if(!r)return!1;let i=Q1(r);if(!i){let o=r.blockRange(),a=o&&Yl(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&_M(t,i,e))return!0;if(r.parent.content.size==0&&(Nl(s,"end")||Ee.isSelectable(s))){let o=Sm(t.doc,r.before(),r.after(),oe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Nl(s,"end")?Ve.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Ee.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},AG=(t,e,n)=>{let r=pM(t,n);if(!r)return!1;let i=Q1(r);return i?mM(t,i,e):!1},CG=(t,e,n)=>{let r=gM(t,n);if(!r)return!1;let i=X1(r);return i?mM(t,i,e):!1};function mM(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Sm(t.doc,s,l,oe.empty);if(!c||c.from!=s||c instanceof en&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Ne.create(u.doc,s)),n(u.scrollIntoView())}return!0}function Nl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const RG=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Q1(r)}let o=s&&s.nodeBefore;return!o||!Ee.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ee.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Q1(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function gM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const kG=(t,e,n)=>{let r=gM(t,n);if(!r)return!1;let i=X1(r);if(!i)return!1;let s=i.nodeAfter;if(_M(t,i,e))return!0;if(r.parent.content.size==0&&(Nl(s,"start")||Ee.isSelectable(s))){let o=Sm(t.doc,r.before(),r.after(),oe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Nl(s,"start")?Ve.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Ee.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},OG=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=X1(r)}let o=s&&s.nodeAfter;return!o||!Ee.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ee.create(t.doc,s.pos)).scrollIntoView()),!0)};function X1(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const NG=(t,e)=>{let n=t.selection,r=n instanceof Ee,i;if(r){if(n.node.isTextblock||!no(t.doc,n.from))return!1;i=n.from}else if(i=wm(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Ee.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},MG=(t,e)=>{let n=t.selection,r;if(n instanceof Ee){if(n.node.isTextblock||!no(t.doc,n.to))return!1;r=n.to}else if(r=wm(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},PG=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Yl(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},xG=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function yM(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const DG=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=yM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Ve.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},LG=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Br||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=yM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Ne.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},VG=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(tl(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Yl(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},FG=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Ee.create(t.doc,i))),!0)};function BG(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||no(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function _M(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(BG(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,d=U.empty;for(let m=s.length-1;m>=0;m--)d=U.from(s[m].create(null,d));d=U.from(r.copy(d));let f=t.tr.step(new nn(e.pos-1,h,e.pos,h,new oe(d,1,0),s.length,!0)),p=h+2*s.length;no(f.doc,p)&&f.join(p),n(f.scrollIntoView())}return!0}let l=Ve.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Yl(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&Nl(i,"start",!0)&&Nl(r,"end")){let h=r,d=[];for(;d.push(h),!h.isTextblock;)h=h.lastChild;let f=i,p=1;for(;!f.isTextblock;f=f.firstChild)p++;if(h.canReplace(h.childCount,h.childCount,f.content)){if(n){let m=U.empty;for(let y=d.length-1;y>=0;y--)m=U.from(d[y].copy(m));let g=t.tr.step(new nn(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new oe(m,d.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function vM(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Ne.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const UG=vM(-1),$G=vM(1);function HG(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&$1(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function YS(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function zG(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);l=new Gf(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new Gf(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=$1(l,t,e,o);return c?(r&&r(jG(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function jG(t,e,n,r,i){let s=U.empty;for(let u=n.length-1;u>=0;u--)s=U.from(n[u].type.create(n[u].attrs,s));t.step(new nn(e.start-(r?2:0),e.end,e.start,e.end,new oe(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,h=e.endIndex,d=!0;u<h;u++,d=!1)!d&&tl(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function WG(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?GG(e,n,t,s):qG(e,n,s):!0:!1}}function GG(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new nn(s-1,o,s,o,new oe(U.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Gf(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Yl(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return no(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function qG(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?U.empty:U.from(i))))return!1;let h=s.pos,d=h+o.nodeSize;return r.step(new nn(h-(a?1:0),d+(l?1:0),h+1,d-1,new oe((a?U.empty:U.from(i.copy(U.empty))).append(l?U.empty:U.from(i.copy(U.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function KG(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=U.from(c?t.create():null),h=new oe(U.from(t.create(null,U.from(a.type.create(null,u)))),c?3:1,0),d=s.start,f=s.end;n(e.tr.step(new nn(d-(c?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}function km(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class Om{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const h=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),h={...Object.fromEntries(Object.entries(r).map(([d,f])=>[d,(...m)=>{const g=this.buildProps(c,n),y=f(...m)(g);return a.push(y),h}])),run:u};return h}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:km({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class YG{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function de(t,e,n){return t.config[e]===void 0&&t.parent?de(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?de(t.parent,e,n):null}):t.config[e]}function Nm(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function bM(t){const e=[],{nodeExtensions:n,markExtensions:r}=Nm(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=de(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([d,f])=>{e.push({type:h,name:d,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=de(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const d={...s,...h};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function ln(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Gt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function rv(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Gt(n,r),{})}function EM(t){return typeof t=="function"}function Le(t,e=void 0,...n){return EM(t)?e?t.bind(e)(...n):t(...n):t}function JG(t={}){return Object.keys(t).length===0&&t.constructor===Object}function QG(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function JS(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):QG(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function QS(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&JG(n)?!1:n!=null))}function XG(t,e){var n;const r=bM(t),{nodeExtensions:i,markExtensions:s}=Nm(t),o=(n=i.find(c=>de(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((y,_)=>{const E=de(_,"extendNodeSchema",h);return{...y,...E?E(c):{}}},{}),f=QS({...d,content:Le(de(c,"content",h)),marks:Le(de(c,"marks",h)),group:Le(de(c,"group",h)),inline:Le(de(c,"inline",h)),atom:Le(de(c,"atom",h)),selectable:Le(de(c,"selectable",h)),draggable:Le(de(c,"draggable",h)),code:Le(de(c,"code",h)),defining:Le(de(c,"defining",h)),isolating:Le(de(c,"isolating",h)),attrs:Object.fromEntries(u.map(y=>{var _;return[y.name,{default:(_=y==null?void 0:y.attribute)===null||_===void 0?void 0:_.default}]}))}),p=Le(de(c,"parseHTML",h));p&&(f.parseDOM=p.map(y=>JS(y,u)));const m=de(c,"renderHTML",h);m&&(f.toDOM=y=>m({node:y,HTMLAttributes:rv(y,u)}));const g=de(c,"renderText",h);return g&&(f.toText=g),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,y)=>{const _=de(y,"extendMarkSchema",h);return{...g,..._?_(c):{}}},{}),f=QS({...d,inclusive:Le(de(c,"inclusive",h)),excludes:Le(de(c,"excludes",h)),group:Le(de(c,"group",h)),spanning:Le(de(c,"spanning",h)),code:Le(de(c,"code",h)),attrs:Object.fromEntries(u.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=Le(de(c,"parseHTML",h));p&&(f.parseDOM=p.map(g=>JS(g,u)));const m=de(c,"renderHTML",h);return m&&(f.toDOM=g=>m({mark:g,HTMLAttributes:rv(g,u)})),[c.name,f]}));return new nj({topNode:o,nodes:a,marks:l})}function Zg(t,e){return e.nodes[t]||e.marks[t]||null}function XS(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const ZG=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function Z1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Mm{constructor(e){this.find=e.find,this.handler=e.handler}}const eq=(t,e)=>{if(Z1(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ey(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const h=ZG(c)+s;return o.forEach(d=>{if(u)return;const f=eq(h,d.find);if(!f)return;const p=l.state.tr,m=km({state:l.state,transaction:p}),g={from:r-(f[0].length-s.length),to:i},{commands:y,chain:_,can:E}=new Om({editor:n,state:m});d.handler({state:m,range:g,match:f,commands:y,chain:_,can:E})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function tq(t){const{editor:e,rules:n}=t,r=new Cr({state:{init(){return null},apply(i,s){const o=i.getMeta(r);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,a){return ey({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&ey({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?ey({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function nq(t){return typeof t=="number"}class rq{constructor(e){this.find=e.find,this.handler=e.handler}}const iq=(t,e,n)=>{if(Z1(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function sq(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Om({editor:e,state:n}),h=[];return n.doc.nodesBetween(r,i,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(r,p),g=Math.min(i,p+f.content.size),y=f.textBetween(m-p,g-p,void 0,"");iq(y,s.find,o).forEach(E=>{if(E.index===void 0)return;const w=m+E.index+1,S=w+E[0].length,I={from:n.tr.mapping.map(w),to:n.tr.mapping.map(S)},x=s.handler({state:n,range:I,match:E,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});h.push(x)})}),h.every(f=>f!==null)}function oq(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;return n.map(c=>new Cr({view(u){const h=d=>{var f;r=!((f=u.dom.parentElement)===null||f===void 0)&&f.contains(d.target)?u.dom.parentElement:null};return window.addEventListener("dragstart",h),{destroy(){window.removeEventListener("dragstart",h)}}},props:{handleDOMEvents:{drop:(u,h)=>(s=r===u.dom.parentElement,a=h,!1),paste:(u,h)=>{var d;const f=(d=h.clipboardData)===null||d===void 0?void 0:d.getData("text/html");return o=h,i=!!(f!=null&&f.includes("data-pm-slice")),!1}}},appendTransaction:(u,h,d)=>{const f=u[0],p=f.getMeta("uiEvent")==="paste"&&!i,m=f.getMeta("uiEvent")==="drop"&&!s;if(!p&&!m)return;const g=h.doc.content.findDiffStart(d.doc.content),y=h.doc.content.findDiffEnd(d.doc.content);if(!nq(g)||!y||g===y.b)return;const _=d.tr,E=km({state:d,transaction:_});if(!(!sq({editor:e,state:E,from:Math.max(g-1,0),to:y.b-1,rule:c,pasteEvent:o,dropEvent:a})||!_.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,_}}))}function aq(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class La{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=La.resolve(e),this.schema=XG(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:Zg(r.name,this.schema)};r.type==="mark"&&(!((i=Le(de(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=de(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=de(r,"onCreate",s);a&&this.editor.on("create",a);const l=de(r,"onUpdate",s);l&&this.editor.on("update",l);const c=de(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=de(r,"onTransaction",s);u&&this.editor.on("transaction",u);const h=de(r,"onFocus",s);h&&this.editor.on("focus",h);const d=de(r,"onBlur",s);d&&this.editor.on("blur",d);const f=de(r,"onDestroy",s);f&&this.editor.on("destroy",f)})}static resolve(e){const n=La.sort(La.flatten(e)),r=aq(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=de(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=de(r,"priority")||100,o=de(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Zg(n.name,this.schema)},i=de(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=La.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:Zg(o.name,this.schema)},l=[],c=de(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>Si.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,y])=>[g,()=>y({editor:e})]));u={...u,...m}}const h=wG(u);l.push(h);const d=de(o,"addInputRules",a);XS(o,e.options.enableInputRules)&&d&&r.push(...d());const f=de(o,"addPasteRules",a);XS(o,e.options.enablePasteRules)&&f&&i.push(...f());const p=de(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[tq({editor:e,rules:r}),...oq({editor:e,rules:i}),...s]}get attributes(){return bM(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Nm(this.extensions);return Object.fromEntries(n.filter(r=>!!de(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:ln(r.name,this.schema)},o=de(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,h)=>{const d=rv(l,i);return o()({editor:e,node:l,getPos:u,decorations:h,HTMLAttributes:d,extension:r})};return[r.name,a]}))}}function lq(t){return Object.prototype.toString.call(t).slice(8,-1)}function ty(t){return lq(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Pm(t,e){const n={...t};return ty(t)&&ty(e)&&Object.keys(e).forEach(r=>{ty(e[r])?r in t?n[r]=Pm(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class fr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(de(this,"addOptions",{name:this.name}))),this.storage=Le(de(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new fr(e)}configure(e={}){const n=this.extend();return n.options=Pm(this.options,e),n.storage=Le(de(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new fr({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Le(de(n,"addOptions",{name:n.name})),n.storage=Le(de(n,"addStorage",{name:n.name,options:n.options})),n}}function TM(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,u,h,d)=>{var f;const p=o==null?void 0:o[c.type.name];if(p)return c.isBlock&&!l&&(a+=s,l=!0),h&&(a+=p({node:c,pos:u,parent:h,index:d,range:e})),!1;c.isText?(a+=(f=c==null?void 0:c.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function wM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const cq=fr.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Cr({key:new ro("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=wM(n);return TM(r,{from:o,to:a},{textSerializers:l})}}})]}}),uq=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),hq=(t=!1)=>({commands:e})=>e.setContent("",t),dq=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,h=c.resolve(u.map(l)),d=c.resolve(u.map(l+a.nodeSize)),f=h.blockRange(d);if(!f)return;const p=Yl(f);if(a.type.isTextblock){const{defaultType:m}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(f.start,m)}(p||p===0)&&e.lift(f,p)})}),!0},fq=t=>e=>t(e),pq=()=>({state:t,dispatch:e})=>LG(t,e),mq=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Ne(r.doc.resolve(o-1))),!0},gq=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},yq=t=>({tr:e,state:n,dispatch:r})=>{const i=ln(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},_q=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},vq=()=>({state:t,dispatch:e})=>SG(t,e),bq=()=>({commands:t})=>t.keyboardShortcut("Enter"),Eq=()=>({state:t,dispatch:e})=>DG(t,e);function tp(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Z1(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function iv(t,e,n={}){return t.find(r=>r.type===e&&tp(r.attrs,n))}function Tq(t,e,n={}){return!!iv(t,e,n)}function eb(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=iv([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(iv([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&Tq([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function so(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const wq=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=so(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const h=eb(l,s,e);if(h&&h.from<=c&&h.to>=u){const d=Ne.create(o,h.from,h.to);n.setSelection(d)}}return!0},Sq=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function SM(t){return t instanceof Ne}function Oo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function IM(t,e=null){if(!e)return null;const n=Ve.atStart(t),r=Ve.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Ne.create(t,Oo(0,i,s),Oo(t.content.size,i,s)):Ne.create(t,Oo(e,i,s),Oo(e,i,s))}function tb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Iq=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{tb()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!SM(n.state.selection))return o(),!0;const a=IM(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Aq=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Cq=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),AM=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&AM(r)}return t};function ZS(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return AM(n)}function np(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?U.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),np("",e,n)}if(typeof t=="string"){const r=Cl.fromSchema(e);return n.slice?r.parseSlice(ZS(t),n.parseOptions).content:r.parse(ZS(t),n.parseOptions)}return np("",e,n)}function Rq(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof en||i instanceof nn))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(Ve.near(t.doc.resolve(o),n))}const kq=t=>t.toString().startsWith("<"),Oq=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const o=np(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,u=!0;if((kq(o)?o:[o]).forEach(d=>{d.check(),c=c?d.isText&&d.marks.length===0:!1,u=u?d.isBlock:!1}),a===l&&u){const{parent:d}=r.doc.resolve(a);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(d=>d.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),n.updateSelection&&Rq(r,r.steps.length-1,-1)}return!0},Nq=()=>({state:t,dispatch:e})=>NG(t,e),Mq=()=>({state:t,dispatch:e})=>MG(t,e),Pq=()=>({state:t,dispatch:e})=>IG(t,e),xq=()=>({state:t,dispatch:e})=>kG(t,e),Dq=()=>({tr:t,state:e,dispatch:n})=>{try{const r=wm(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},Lq=()=>({state:t,dispatch:e,tr:n})=>{try{const r=wm(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Vq=()=>({state:t,dispatch:e})=>AG(t,e),Fq=()=>({state:t,dispatch:e})=>CG(t,e);function nb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Bq(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))tb()||nb()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const Uq=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=Bq(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Vu(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?ln(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(h,d)=>{if(h.isText)return;const f=Math.max(r,d),p=Math.min(i,d+h.nodeSize);a.push({node:h,from:f,to:p})});const l=i-r,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>tp(h.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((h,d)=>h+d.to-d.from,0)>=l}const $q=(t,e={})=>({state:n,dispatch:r})=>{const i=ln(t,n.schema);return Vu(n,i,e)?PG(n,r):!1},Hq=()=>({state:t,dispatch:e})=>VG(t,e),zq=t=>({state:e,dispatch:n})=>{const r=ln(t,e.schema);return WG(r)(e,n)},jq=()=>({state:t,dispatch:e})=>xG(t,e);function xm(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function eI(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const Wq=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=xm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=ln(t,r.schema)),a==="mark"&&(o=so(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,eI(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&n.addMark(u,u+c.nodeSize,o.create(eI(h.attrs,e)))})})}),!0):!1},Gq=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),qq=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),Kq=()=>({state:t,dispatch:e})=>RG(t,e),Yq=()=>({state:t,dispatch:e})=>OG(t,e),Jq=()=>({state:t,dispatch:e})=>FG(t,e),Qq=()=>({state:t,dispatch:e})=>$G(t,e),Xq=()=>({state:t,dispatch:e})=>UG(t,e);function CM(t,e,n={}){return np(t,e,{slice:!1,parseOptions:n})}const Zq=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=CM(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Dm(t,e){const n=so(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function eK(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function tK(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function rb(t){return e=>tK(e.$from,t)}function nK(t,e){const n=ii.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function rK(t,e){const n={from:0,to:t.content.size};return TM(t,n,e)}function iK(t,e){const n=ln(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function sK(t,e){const n=xm(typeof e=="string"?e:e.name,t.schema);return n==="node"?iK(t,e):n==="mark"?Dm(t,e):{}}function RM(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=eb(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function Ud(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function sv(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?so(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>tp(h.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:d})=>{const f=h.pos,p=d.pos;t.doc.nodesBetween(f,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,g),_=Math.min(p,g+m.nodeSize),E=_-y;o+=E,a.push(...m.marks.map(w=>({mark:w,from:y,to:_})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>tp(h.mark.attrs,n,{strict:!1})).reduce((h,d)=>h+d.to-d.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,d)=>h+d.to-d.from,0);return(l>0?l+c:l)>=o}function oK(t,e,n={}){if(!e)return Vu(t,null,n)||sv(t,null,n);const r=xm(e,t.schema);return r==="node"?Vu(t,e,n):r==="mark"?sv(t,e,n):!1}function tI(t,e){const{nodeExtensions:n}=Nm(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Le(de(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function aK(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function lK(t,e,n){var r;const{selection:i}=e;let s=null;if(SM(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,h,d)=>{if(c)return!1;if(u.isInline){const f=!d||d.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=f&&p}return!c}),c})}const cK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=so(t,r.schema);if(i)if(o){const c=Dm(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;r.doc.nodesBetween(u,h,(d,f)=>{const p=Math.max(f,u),m=Math.min(f+d.nodeSize,h);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&n.addMark(p,m,l.create({...y.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return lK(r,n,l)},uK=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),hK=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=ln(t,n.schema);return s.isTextblock?i().command(({commands:o})=>YS(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>YS(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},dK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Oo(t,0,r.content.size),s=Ee.create(r,i);e.setSelection(s)}return!0},fK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Ne.atStart(r).from,a=Ne.atEnd(r).to,l=Oo(i,o,a),c=Oo(s,o,a),u=Ne.create(r,l,c);e.setSelection(u)}return!0},pK=t=>({state:e,dispatch:n})=>{const r=ln(t,e.schema);return KG(r)(e,n)};function nI(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const mK=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=Ud(c,a.node().type.name,a.node().attrs);if(s instanceof Ee&&s.node.isBlock)return!a.parentOffset||!tl(o,a.pos)?!1:(r&&(t&&nI(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const h=l.parentOffset===l.parent.content.size;s instanceof Ne&&e.deleteSelection();const d=a.depth===0?void 0:eK(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=h&&d?[{type:d,attrs:u}]:void 0,p=tl(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&tl(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,f=d?[{type:d,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,f),d&&!h&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&nI(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},gK=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=ln(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const h=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=U.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let x=a.depth-y;x>=a.depth-3;x-=1)g=U.from(a.node(x).copy(g));const _=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,E=Ud(h,a.node().type.name,a.node().attrs),w=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(E))||void 0;g=g.append(U.from(o.createAndFill(null,w)||void 0));const S=a.before(a.depth-(y-1));e.replace(S,a.after(-_),new oe(g,4-y,0));let I=-1;e.doc.nodesBetween(S,e.doc.content.size,(x,O)=>{if(I>-1)return!1;x.isTextblock&&x.content.size===0&&(I=O+1)}),I>-1&&e.setSelection(Ne.near(e.doc.resolve(I))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,f=Ud(h,u.type.name,u.attrs),p=Ud(h,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:o,attrs:f},{type:d,attrs:p}]:[{type:o,attrs:f}];if(!tl(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=n,{splittableMarks:_}=i.extensionManager,E=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!E||!r)return!0;const w=E.filter(S=>_.includes(S.type.name));e.ensureMarks(w)}return!0},ny=(t,e)=>{const n=rb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&no(t.doc,n.pos)&&t.join(n.pos),!0},ry=(t,e)=>{const n=rb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&no(t.doc,r)&&t.join(r),!0},yK=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:h,splittableMarks:d}=i.extensionManager,f=ln(t,o.schema),p=ln(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:_}=m,E=y.blockRange(_),w=g||m.$to.parentOffset&&m.$from.marks();if(!E)return!1;const S=rb(I=>tI(I.type.name,h))(m);if(E.depth>=1&&S&&E.depth-S.depth<=1){if(S.node.type===f)return c.liftListItem(p);if(tI(S.node.type.name,h)&&f.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,f),!0)).command(()=>ny(s,f)).command(()=>ry(s,f)).run()}return!n||!w||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>ny(s,f)).command(()=>ry(s,f)).run():l().command(()=>{const I=u().wrapInList(f,r),x=w.filter(O=>d.includes(O.type.name));return s.ensureMarks(x),I?!0:c.clearNodes()}).wrapInList(f,r).command(()=>ny(s,f)).command(()=>ry(s,f)).run()},_K=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=so(t,r.schema);return sv(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},vK=(t,e,n={})=>({state:r,commands:i})=>{const s=ln(t,r.schema),o=ln(e,r.schema);return Vu(r,s,n)?i.setNode(o):i.setNode(s,n)},bK=(t,e={})=>({state:n,commands:r})=>{const i=ln(t,n.schema);return Vu(n,i,e)?r.lift(i):r.wrapIn(i,e)},EK=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},TK=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},wK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=so(t,r.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&o){let{from:d,to:f}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=eb(c,l,p);m&&(d=m.from,f=m.to),n.removeMark(d,f,l)}else h.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},SK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=xm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=ln(t,r.schema)),a==="mark"&&(o=so(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(h,d)=>{s&&s===h.type&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(f=>{if(o===f.type){const p=Math.max(d,c),m=Math.min(d+h.nodeSize,u);n.addMark(p,m,o.create({...f.attrs,...e}))}})})}),!0):!1},IK=(t,e={})=>({state:n,dispatch:r})=>{const i=ln(t,n.schema);return HG(i,e)(n,r)},AK=(t,e={})=>({state:n,dispatch:r})=>{const i=ln(t,n.schema);return zG(i,e)(n,r)};var CK=Object.freeze({__proto__:null,blur:uq,clearContent:hq,clearNodes:dq,command:fq,createParagraphNear:pq,cut:mq,deleteCurrentNode:gq,deleteNode:yq,deleteRange:_q,deleteSelection:vq,enter:bq,exitCode:Eq,extendMarkRange:wq,first:Sq,focus:Iq,forEach:Aq,insertContent:Cq,insertContentAt:Oq,joinUp:Nq,joinDown:Mq,joinBackward:Pq,joinForward:xq,joinItemBackward:Dq,joinItemForward:Lq,joinTextblockBackward:Vq,joinTextblockForward:Fq,keyboardShortcut:Uq,lift:$q,liftEmptyBlock:Hq,liftListItem:zq,newlineInCode:jq,resetAttributes:Wq,scrollIntoView:Gq,selectAll:qq,selectNodeBackward:Kq,selectNodeForward:Yq,selectParentNode:Jq,selectTextblockEnd:Qq,selectTextblockStart:Xq,setContent:Zq,setMark:cK,setMeta:uK,setNode:hK,setNodeSelection:dK,setTextSelection:fK,sinkListItem:pK,splitBlock:mK,splitListItem:gK,toggleList:yK,toggleMark:_K,toggleNode:vK,toggleWrap:bK,undoInputRule:EK,unsetAllMarks:TK,unsetMark:wK,updateAttributes:SK,wrapIn:IK,wrapInList:AK});const RK=fr.create({name:"commands",addCommands(){return{...CK}}}),kK=fr.create({name:"editable",addProseMirrorPlugins(){return[new Cr({key:new ro("editable"),props:{editable:()=>this.editor.options.editable}})]}}),OK=fr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Cr({key:new ro("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),NK=fr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:d,parent:f}=h,p=h.parent.isTextblock&&d>0?a.doc.resolve(d-1):h,m=p.parent.type.spec.isolating,g=h.pos-h.parentOffset,y=m&&p.parent.childCount===1?g===h.pos:Ve.atStart(c).from===d;return!u||!y||!f.type.isTextblock||f.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return tb()||nb()?s:i},addProseMirrorPlugins(){return[new Cr({key:new ro("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=Ve.atStart(e.doc).from,l=Ve.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const h=n.tr,d=km({state:n,transaction:h}),{commands:f}=new Om({editor:this.editor,state:d});if(f.clearNodes(),!!h.steps.length)return h}})]}}),MK=fr.create({name:"tabindex",addProseMirrorPlugins(){return[new Cr({key:new ro("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var PK=Object.freeze({__proto__:null,ClipboardTextSerializer:cq,Commands:RK,Editable:kK,FocusEvents:OK,Keymap:NK,Tabindex:MK});class bo{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new bo(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new bo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new bo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+(i?0:1),o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new bo(o,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new bo(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];return this.isBlock||!this.children||this.children.length===0||this.children.forEach(s=>{if(s.node.type.name===e){if(Object.keys(n).length>0){const o=s.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(o[c]!==n[c])return}}if(i.push(s),r)return}i=i.concat(s.querySelectorAll(e))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const xK=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function DK(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let LK=class extends YG{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=DK(xK,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=EM(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(PK):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new La(n,this)}createCommandManager(){this.commandManager=new Om({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=CM(this.options.content,this.schema,this.options.parseOptions),n=IM(e,this.options.autofocus);this.view=new pG(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Da.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return sK(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return oK(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return nK(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return rK(this.state.doc,{blockSeparator:n,textSerializers:{...wM(this.schema),...r}})}get isEmpty(){return aK(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new bo(n,this)}get $doc(){return this.$pos(0)}};function Ml(t){return new Mm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Le(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(RM(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(m=>m===t.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const d=n.from+l+o.length;s.addMark(n.from+l,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function VK(t){return new Mm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Le(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const h=r[0][r[0].length-1];s.insertText(h,o+r[0].length-1),s.replaceWith(u,a,l)}else r[0]&&s.insert(o-1,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}})}function ov(t){return new Mm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Le(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Fu(t){return new Mm({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Le(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&$1(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:d}=e,{splittableMarks:f}=t.editor.extensionManager,p=d||h.$to.parentOffset&&h.$from.marks();if(p){const m=p.filter(g=>f.includes(g.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&no(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class Si{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(de(this,"addOptions",{name:this.name}))),this.storage=Le(de(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Si(e)}configure(e={}){const n=this.extend();return n.options=Pm(this.options,e),n.storage=Le(de(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Si({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Le(de(n,"addOptions",{name:n.name})),n.storage=Le(de(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}let pr=class av{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Le(de(this,"addOptions",{name:this.name}))),this.storage=Le(de(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new av(e)}configure(e={}){const n=this.extend();return n.options=Pm(this.options,e),n.storage=Le(de(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new av({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Le(de(n,"addOptions",{name:n.name})),n.storage=Le(de(n,"addStorage",{name:n.name,options:n.options})),n}};function Pl(t){return new rq({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Le(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),h=n.from+l.indexOf(a),d=h+a.length;if(RM(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>h).length)return null;d<n.to&&o.delete(d,n.to),h>n.from&&o.delete(n.from+u,h),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const FK=/^\s*>\s$/,BK=pr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Fu({find:FK,type:this.type})]}}),UK=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,$K=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,HK=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,zK=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,jK=Si.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ml({find:UK,type:this.type}),Ml({find:HK,type:this.type})]},addPasteRules(){return[Pl({find:$K,type:this.type}),Pl({find:zK,type:this.type})]}}),WK=pr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Gt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),rI=Si.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Dm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),iI=/^\s*([-+*])\s$/,GK=pr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(WK.name,this.editor.getAttributes(rI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Fu({find:iI,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fu({find:iI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(rI.name),editor:this.editor})),[t]}}),qK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,KK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,YK=Si.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ml({find:qK,type:this.type})]},addPasteRules(){return[Pl({find:KK,type:this.type})]}}),JK=/^```([a-z]+)?[\s\n]$/,QK=/^~~~([a-z]+)?[\s\n]$/,XK=pr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Gt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[ov({find:JK,type:this.type,getAttributes:t=>({language:t[1]})}),ov({find:QK,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Cr({key:new ro("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o}=t.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(Ne.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),ZK=pr.create({name:"doc",topNode:!0,content:"block+"});function eY(t={}){return new Cr({view(e){return new tY(e,t)}})}class tY{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),h=a?u.bottom:u.top;a&&l&&(h=(h+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:h-this.width/2,bottom:h+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=CN(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const nY=fr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[eY(this.options)]}});class kt extends Ve{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return kt.valid(r)?new kt(r):Ve.near(r)}content(){return oe.empty}eq(e){return e instanceof kt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new kt(e.resolve(n.pos))}getBookmark(){return new ib(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!rY(e)||!iY(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&kt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(kt.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Ee.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(kt.valid(a))return a}return null}}}kt.prototype.visible=!1;kt.findFrom=kt.findGapCursorFrom;Ve.jsonID("gapcursor",kt);class ib{constructor(e){this.pos=e}map(e){return new ib(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return kt.valid(n)?new kt(n):Ve.near(n)}}function rY(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function iY(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function sY(){return new Cr({props:{decorations:cY,createSelectionBetween(t,e,n){return e.pos==n.pos&&kt.valid(n)?new kt(n):null},handleClick:aY,handleKeyDown:oY,handleDOMEvents:{beforeinput:lY}}})}const oY=fM({ArrowLeft:cd("horiz",-1),ArrowRight:cd("horiz",1),ArrowUp:cd("vert",-1),ArrowDown:cd("vert",1)});function cd(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Ne){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=kt.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new kt(c))),!0):!1}}function aY(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!kt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Ee.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new kt(r))),!0)}function lY(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof kt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=U.empty;for(let o=r.length-1;o>=0;o--)i=U.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new oe(i,0,0));return s.setSelection(Ne.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function cY(t){if(!(t.selection instanceof kt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ht.create(t.doc,[wr.widget(t.selection.head,e,{key:"gapcursor"})])}const uY=fr.create({name:"gapCursor",addProseMirrorPlugins(){return[sY()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Le(de(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),hY=pr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Gt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(d=>a.includes(d.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),dY=pr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Gt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>ov({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var rp=200,rn=function(){};rn.prototype.append=function(e){return e.length?(e=rn.from(e),!this.length&&e||e.length<rp&&this.leafAppend(e)||this.length<rp&&e.leafPrepend(this)||this.appendInner(e)):this};rn.prototype.prepend=function(e){return e.length?rn.from(e).append(this):this};rn.prototype.appendInner=function(e){return new fY(this,e)};rn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?rn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};rn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};rn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};rn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};rn.from=function(e){return e instanceof rn?e:e&&e.length?new kM(e):rn.empty};var kM=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=rp)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=rp)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(rn);rn.empty=new kM([]);var fY=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(rn);const pY=500;class xr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((h,d)=>{if(!h.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new Kr(h.map));let f=h.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Kr(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new xr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),d=new Kr(e.mapping.maps[u],h,n),f;(f=l&&l.merge(d))&&(d=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(d),n&&(o++,n=void 0),i||(l=d)}let c=o-r.depth;return c>gY&&(a=mY(a,c),o-=c),new xr(a.append(s),o)}remapping(e,n){let r=new el;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new xr(this.items.append(e.map(n=>new Kr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(d.step){let m=e.steps[f].invert(e.docs[f]),g=d.selection&&d.selection.map(s.slice(l+1,f));g&&a++,r.push(new Kr(p,m,g))}else r.push(new Kr(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new Kr(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),h=new xr(u,a);return h.emptyItemCount()>pY&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let h=new Kr(c.invert(),l,u),d,f=i.length-1;(d=i.length&&i[f].merge(h))?i[f]=d:i.push(h)}}else o.map&&r--},this.items.length,0),new xr(rn.from(i.reverse()),s)}}xr.empty=new xr(rn.empty,0);function mY(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Kr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Kr(n.getMap().invert(),n,this.selection)}}}class gs{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const gY=20;function yY(t,e,n,r){let i=n.getMeta(jo),s;if(i)return i.historyState;n.getMeta(bY)&&(t=new gs(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(jo))return o.getMeta(jo).redo?new gs(t.done.addTransform(n,void 0,r,$d(e)),t.undone,sI(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new gs(t.done,t.undone.addTransform(n,void 0,r,$d(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!_Y(n,t.prevRanges)),c=o?iy(t.prevRanges,n.mapping):sI(n.mapping.maps[n.steps.length-1]);return new gs(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,$d(e)),xr.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new gs(t.done.rebased(n,s),t.undone.rebased(n,s),iy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new gs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),iy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function _Y(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function sI(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function iy(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function vY(t,e,n){let r=$d(e),i=jo.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new gs(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(jo,{redo:n,historyState:l})}let sy=!1,oI=null;function $d(t){let e=t.plugins;if(oI!=e){sy=!1,oI=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){sy=!0;break}}return sy}const jo=new ro("history"),bY=new ro("closeHistory");function EY(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Cr({key:jo,state:{init(){return new gs(xr.empty,xr.empty,null,0,-1)},apply(e,n,r){return yY(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?NM:r=="historyRedo"?MM:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function OM(t,e){return(n,r)=>{let i=jo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=vY(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const NM=OM(!1,!0),MM=OM(!0,!0),TY=fr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>NM(t,e),redo:()=>({state:t,dispatch:e})=>MM(t,e)}},addProseMirrorPlugins(){return[EY(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),wY=pr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Gt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){const{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(Ne.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(Ee.create(i.doc,a.pos)):i.setSelection(Ne.create(i.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(i.insert(l,c),i.setSelection(Ne.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[VK({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),SY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,IY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,AY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,CY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,RY=Si.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ml({find:SY,type:this.type}),Ml({find:AY,type:this.type})]},addPasteRules(){return[Pl({find:IY,type:this.type}),Pl({find:CY,type:this.type})]}}),kY=pr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Gt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),OY=pr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Gt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),aI=Si.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Dm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),lI=/^(\d+)\.\s$/,NY=pr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Gt(this.options.HTMLAttributes,n),0]:["ol",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(OY.name,this.editor.getAttributes(aI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Fu({find:lI,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fu({find:lI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(aI.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),MY=pr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),PY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,xY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,DY=Si.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){const t={};return nb()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[Ml({find:PY,type:this.type})]},addPasteRules(){return[Pl({find:xY,type:this.type})]}}),LY=pr.create({name:"text",group:"inline"}),VY=fr.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,h,d,f,p,m,g,y;const _=[];return this.options.blockquote!==!1&&_.push(BK.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&_.push(jK.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&_.push(GK.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&_.push(YK.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&_.push(XK.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&_.push(ZK.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&_.push(nY.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&_.push(uY.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&_.push(hY.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&_.push(dY.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&_.push(TY.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&_.push(wY.configure((h=this.options)===null||h===void 0?void 0:h.horizontalRule)),this.options.italic!==!1&&_.push(RY.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&_.push(kY.configure((f=this.options)===null||f===void 0?void 0:f.listItem)),this.options.orderedList!==!1&&_.push(NY.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&_.push(MY.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&_.push(DY.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&_.push(LY.configure((y=this.options)===null||y===void 0?void 0:y.text)),_}});function cI(t){return hA((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class FY extends LK{constructor(e={}){return super(e),this.vueRenderers=Wu(new Map),this.contentComponent=null,this.reactiveState=cI(this.view.state),this.reactiveExtensionStorage=cI(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),mp(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const BY=Zn({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=xe(),n=ca();return Ex(()=>{const r=t.editor;r&&r.options.element&&e.value&&Dl(()=>{if(!e.value||!r.options.element.firstChild)return;const i=Ue(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),Ku(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=Do(tD,{to:e.teleportElement,key:e.id},Do(e.component,{ref:e.id,...e.props}));t.push(n)}),Do("div",{ref:e=>{this.rootEl=e}},...t)}}),UY={class:"editor"},$Y={class:"controlls"},HY=Zn({__name:"tiptapEditor.vapor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=xe();return Bi(()=>n.modelValue,s=>{var a,l;((a=i.value)==null?void 0:a.getHTML())!==s&&((l=i.value)==null||l.commands.setContent(s,!1))}),qu(()=>{i.value=new FY({extensions:[VY],content:n.modelValue,onUpdate:()=>{var s;r("update:modelValue",(s=i.value)==null?void 0:s.getHTML())}})}),Ku(()=>{var s;(s=i.value)==null||s.destroy()}),(s,o)=>(ie(),ye("div",UY,[De(Ue(BY),{editor:i.value,class:"editor-content"},null,8,["editor"]),A("div",$Y,[i.value?(ie(),ye(tt,{key:0},[A("button",{icon:"",big:"",onClick:o[0]||(o[0]=a=>i.value.chain().focus().toggleBold().run())},"format_bold"),A("button",{icon:"",big:"",onClick:o[1]||(o[1]=a=>i.value.chain().focus().toggleItalic().run())},"format_italic"),A("button",{icon:"",big:"",onClick:o[2]||(o[2]=a=>i.value.chain().focus().toggleBulletList().run())}," format_list_bulleted "),A("button",{icon:"",big:"",onClick:o[3]||(o[3]=a=>i.value.chain().focus().toggleOrderedList().run())}," format_list_numbered ")],64)):qe("",!0)])]))}}),zY=eo(HY,[["__scopeId","data-v-f4b35bc7"]]);function oy(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function jY(t){return(...e)=>!t(...e)}function WY(t,e){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(e.trim())!==-1}function PM(t,e,n,r){return e?t.filter(i=>WY(r(i,n),e)).sort((i,s)=>r(i,n).length-r(s,n).length):t}function GY(t){return t.filter(e=>!e.$isLabel)}function ay(t,e){return n=>n.reduce((r,i)=>i[t]&&i[t].length?(r.push({$groupLabel:i[e],$isLabel:!0}),r.concat(i[t])):r,[])}function qY(t,e,n,r,i){return s=>s.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const a=PM(o[n],t,e,i);return a.length?{[r]:o[r],[n]:a}:[]})}const uI=(...t)=>e=>t.reduce((n,r)=>r(n),e);var KY={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,e){return oy(t)?"":e?t[e]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",e=t.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,e,this.label):PM(n,e,this.label,this.customLabel):n=this.groupValues?ay(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(jY(this.isSelected)):n,this.taggable&&e.length&&!this.isExistingOption(e)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:t}):n.unshift({isTag:!0,label:t})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,e,n){return uI(qY(e,n,this.groupValues,this.groupLabel,this.customLabel),ay(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return uI(ay(this.groupValues,this.groupLabel),GY)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const e=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(e)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(oy(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const e=this.customLabel(t,this.label);return oy(e)?"":e},select(t,e){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(e)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(e==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){e!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const e=this.options.find(n=>n[this.groupLabel]===t.$groupLabel);if(e){if(this.wholeGroupSelected(e)){this.$emit("remove",e[this.groupValues],this.id);const n=this.internalValue.filter(r=>e[this.groupValues].indexOf(r)===-1);this.$emit("update:modelValue",n)}else{let n=e[this.groupValues].filter(r=>!(this.isOptionDisabled(r)||this.isSelected(r)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,e=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const r=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",r)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&e&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const t=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},YY={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,e){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight(t,e){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":e.$isLabel}];const n=this.options.find(r=>r[this.groupLabel]===e.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},Hd={name:"vue-multiselect",mixins:[KY,YY],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const JY={ref:"tags",class:"multiselect__tags"},QY={class:"multiselect__tags-wrap"},XY={class:"multiselect__spinner"},ZY={key:0},eJ={class:"multiselect__option"},tJ={class:"multiselect__option"},nJ=pt("No elements found. Consider changing the search query."),rJ={class:"multiselect__option"},iJ=pt("List is empty.");function sJ(t,e,n,r,i,s){return ie(),Jt("div",{tabindex:t.searchable?-1:n.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":s.isAbove,"multiselect--has-options-group":s.hasOptionGroup},"multiselect"],onFocus:e[14]||(e[14]=o=>t.activate()),onBlur:e[15]||(e[15]=o=>t.searchable?!1:t.deactivate()),onKeydown:[e[16]||(e[16]=qr(lt(o=>t.pointerForward(),["self","prevent"]),["down"])),e[17]||(e[17]=qr(lt(o=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:e[18]||(e[18]=qr(lt(o=>t.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:e[19]||(e[19]=qr(o=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[Yt(t.$slots,"caret",{toggle:t.toggle},()=>[De("div",{onMousedown:e[1]||(e[1]=lt(o=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),Yt(t.$slots,"clear",{search:t.search}),De("div",JY,[Yt(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:s.visibleValues,isOpen:t.isOpen},()=>[In(De("div",QY,[(ie(!0),Jt(tt,null,pi(s.visibleValues,(o,a)=>Yt(t.$slots,"tag",{option:o,search:t.search,remove:t.removeElement},()=>[(ie(),Jt("span",{class:"multiselect__tag",key:a},[De("span",{textContent:He(t.getOptionLabel(o))},null,8,["textContent"]),De("i",{tabindex:"1",onKeypress:qr(lt(l=>t.removeElement(o),["prevent"]),["enter"]),onMousedown:lt(l=>t.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[Zl,s.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>n.limit?Yt(t.$slots,"limit",{key:0},()=>[De("strong",{class:"multiselect__strong",textContent:He(n.limitText(t.internalValue.length-n.limit))},null,8,["textContent"])]):qe("v-if",!0)]),De(Qd,{name:"multiselect__loading"},{default:ks(()=>[Yt(t.$slots,"loading",{},()=>[In(De("div",XY,null,512),[[Zl,n.loading]])])]),_:3}),t.searchable?(ie(),Jt("input",{key:0,ref:"search",name:n.name,id:t.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:t.placeholder,style:s.inputStyle,value:t.search,disabled:n.disabled,tabindex:n.tabindex,onInput:e[2]||(e[2]=o=>t.updateSearch(o.target.value)),onFocus:e[3]||(e[3]=lt(o=>t.activate(),["prevent"])),onBlur:e[4]||(e[4]=lt(o=>t.deactivate(),["prevent"])),onKeyup:e[5]||(e[5]=qr(o=>t.deactivate(),["esc"])),onKeydown:[e[6]||(e[6]=qr(lt(o=>t.pointerForward(),["prevent"]),["down"])),e[7]||(e[7]=qr(lt(o=>t.pointerBackward(),["prevent"]),["up"])),e[9]||(e[9]=qr(lt(o=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:e[8]||(e[8]=qr(lt(o=>t.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):qe("v-if",!0),s.isSingleLabelVisible?(ie(),Jt("span",{key:1,class:"multiselect__single",onMousedown:e[10]||(e[10]=lt((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[Yt(t.$slots,"singleLabel",{option:s.singleValue},()=>[pt(He(t.currentOptionLabel),1)])],32)):qe("v-if",!0),s.isPlaceholderVisible?(ie(),Jt("span",{key:2,class:"multiselect__placeholder",onMousedown:e[11]||(e[11]=lt((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[Yt(t.$slots,"placeholder",{},()=>[pt(He(t.placeholder),1)])],32)):qe("v-if",!0)],512),De(Qd,{name:"multiselect"},{default:ks(()=>[In(De("div",{class:"multiselect__content-wrapper",onFocus:e[12]||(e[12]=(...o)=>t.activate&&t.activate(...o)),tabindex:"-1",onMousedown:e[13]||(e[13]=lt(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[De("ul",{class:"multiselect__content",style:s.contentStyle,role:"listbox",id:"listbox-"+t.id},[Yt(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(ie(),Jt("li",ZY,[De("span",eJ,[Yt(t.$slots,"maxElements",{},()=>[pt("Maximum of "+He(t.max)+" options selected. First remove a selected option to select another.",1)])])])):qe("v-if",!0),!t.max||t.internalValue.length<t.max?(ie(!0),Jt(tt,{key:1},pi(t.filteredOptions,(o,a)=>(ie(),Jt("li",{class:"multiselect__element",key:a,id:t.id+"-"+a,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?qe("v-if",!0):(ie(),Jt("span",{key:0,class:[t.optionHighlight(a,o),"multiselect__option"],onClick:lt(l=>t.select(o),["stop"]),onMouseenter:lt(l=>t.pointerSet(a),["self"]),"data-select":o&&o.isTag?t.tagPlaceholder:s.selectLabelText,"data-selected":s.selectedLabelText,"data-deselect":s.deselectLabelText},[Yt(t.$slots,"option",{option:o,search:t.search,index:a},()=>[De("span",null,He(t.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(ie(),Jt("span",{key:1,"data-select":t.groupSelect&&s.selectGroupLabelText,"data-deselect":t.groupSelect&&s.deselectGroupLabelText,class:[t.groupHighlight(a,o),"multiselect__option"],onMouseenter:lt(l=>t.groupSelect&&t.pointerSet(a),["self"]),onMousedown:lt(l=>t.selectGroup(o),["prevent"])},[Yt(t.$slots,"option",{option:o,search:t.search,index:a},()=>[De("span",null,He(t.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):qe("v-if",!0)],8,["id","role"]))),128)):qe("v-if",!0),In(De("li",null,[De("span",tJ,[Yt(t.$slots,"noResult",{search:t.search},()=>[nJ])])],512),[[Zl,n.showNoResults&&t.filteredOptions.length===0&&t.search&&!n.loading]]),In(De("li",null,[De("span",rJ,[Yt(t.$slots,"noOptions",{},()=>[iJ])])],512),[[Zl,n.showNoOptions&&(t.options.length===0||s.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!n.loading]]),Yt(t.$slots,"afterList")],12,["id"])],36),[[Zl,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}Hd.render=sJ;const oJ={key:0},aJ=A("h3",{class:"font-size-S"},"Description",-1),lJ=A("h3",{class:"font-size-S"},"Image",-1),cJ=["src"],uJ=A("br",null,null,-1),hJ=A("h3",{class:"font-size-S"},"Tile type",-1),dJ=A("p",null,"Choose any of the different tile types.",-1),fJ=A("hr",null,null,-1),pJ=A("h3",{class:"font-size-S"},"Metric",-1),mJ=A("p",null,"Search and select the metric you want to associate with this tile.",-1),gJ=A("hr",null,null,-1),yJ={key:0},_J=A("h3",{class:"font-size-S"},"Repeatable tile",-1),vJ=A("p",null," Can the competitors complete the tile multiple times and gain points each time? ",-1),bJ=A("hr",null,null,-1),EJ=A("h3",{class:"font-size-S"},"Points and count",-1),TJ=A("p",null,"the points the competitors will get when they complete the tile",-1),wJ=A("p",null,[pt(" amount that is needed to complete the tile "),A("br"),A("em",null,"a.e. 200.000.000 slayer exp or 5 unique barrows items")],-1),SJ=A("p",null,[pt(" this is the minimum required amount for the tile"),A("br"),A("em",null,"a.e. if the count is 5 and you want the team to collect at least one of each item, the minimum would be 1")],-1),IJ=A("p",null,[pt(" this is the maximum amount for the tile"),A("br"),A("em",null,"a.e. if the count is 5 and you want the team to collect at most two of each item, the maximum would be 2")],-1),AJ={key:1},CJ={key:2},RJ=A("h3",{class:"font-size-S"},"Drops",-1),kJ=A("p",null,"add drops to the list of valid drops",-1),OJ=["onClick"],NJ={key:3},MJ=A("h3",{class:"font-size-S"},"Need Any or All?",-1),PJ=A("p",null," do the competors need to achieve all of the requirements to complete the tile? ",-1),xJ=Zn({__name:"EditTileModal.vapor",props:{localTileData:{}},emits:["save","cancel"],setup(t,{expose:e,emit:n}){const r=t,i=xe(),s=xe(""),o=()=>{r.localTileData&&(r.localTileData.drops?r.localTileData.drops.push({id:U_(),name:s.value}):r.localTileData.drops=[{id:U_(),name:s.value}])},a=h=>{r.localTileData&&r.localTileData.drops&&r.localTileData.drops.indexOf(h)>-1&&r.localTileData.drops.splice(r.localTileData.drops.indexOf(h),1)},l=xe(HH.filter(h=>!["ehb","ehp","league_points"].includes(h)));return e({showModal:()=>{i.value&&i.value.showModal()},closeModal:()=>{i.value&&i.value.close()}}),(h,d)=>{var f,p,m,g,y,_;return ie(),ye("dialog",{ref_key:"dialog",ref:i},[r.localTileData?(ie(),ye("div",oJ,[A("div",null,[A("h2",null,[pt(" Edit tile: "+He((f=r.localTileData)==null?void 0:f.title)+" ",1),A("small",null,[A("code",null,He((p=r.localTileData)==null?void 0:p.id),1)])]),In(A("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=E=>r.localTileData.title=E)},null,512),[[Oi,r.localTileData.title]]),aJ,De(zY,{class:"editable",modelValue:r.localTileData.description,"onUpdate:modelValue":d[1]||(d[1]=E=>r.localTileData.description=E)},null,8,["modelValue"])]),A("div",null,[lJ,A("img",{src:r.localTileData.image},null,8,cJ),uJ,A("label",null,[pt("Image URL: "),In(A("input",{required:"",type:"url","onUpdate:modelValue":d[2]||(d[2]=E=>r.localTileData.image=E)},null,512),[[Oi,r.localTileData.image]])])]),A("div",null,[hJ,dJ,De(Ue(Hd),{modelValue:r.localTileData.type,"onUpdate:modelValue":d[3]||(d[3]=E=>r.localTileData.type=E),options:["drop","exp","kc"],"close-on-select":!0,"clear-on-select":!1,"allow-empty":!0,placeholder:"Choose a tile Type"},null,8,["modelValue"])]),fJ,A("div",null,[pJ,mJ,((m=r.localTileData)==null?void 0:m.type)!=="exp"?(ie(),Jt(Ue(Hd),{key:0,modelValue:r.localTileData.metric,"onUpdate:modelValue":d[4]||(d[4]=E=>r.localTileData.metric=E),options:l.value,"close-on-select":!0,"clear-on-select":!1,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):(ie(),Jt(Ue(Hd),{key:1,modelValue:r.localTileData.metric,"onUpdate:modelValue":d[5]||(d[5]=E=>r.localTileData.metric=E),options:Ue(wh),"close-on-select":!0,"clear-on-select":!1,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"]))]),gJ,r.localTileData&&((g=r.localTileData.repeatable)!=null&&g.toString())?(ie(),ye("div",yJ,[_J,vJ,A("label",null,[pt("Repeatable "),In(A("input",{type:"checkbox","onUpdate:modelValue":d[6]||(d[6]=E=>r.localTileData.repeatable=E)},null,512),[[aE,r.localTileData.repeatable]]),pt(" "+He(r.localTileData.repeatable),1)])])):qe("",!0),bJ,A("div",null,[EJ,TJ,A("label",null,[pt("points value: "),In(A("input",{type:"number",min:"0","onUpdate:modelValue":d[7]||(d[7]=E=>r.localTileData.points=E)},null,512),[[Oi,r.localTileData.points]])]),wJ,A("label",null,[pt("count: "),In(A("input",{type:"number",min:"0","onUpdate:modelValue":d[8]||(d[8]=E=>r.localTileData.count=E)},null,512),[[Oi,r.localTileData.count]])]),SJ,A("label",null,[pt("minimum count: "),r.localTileData!==null?In((ie(),ye("input",{key:0,placeholder:"unset",type:"number",min:"0",onBlur:d[9]||(d[9]=()=>{r.localTileData&&r.localTileData.min!=null&&(r.localTileData.min=r.localTileData.min<0?0:r.localTileData.min)}),"onUpdate:modelValue":d[10]||(d[10]=E=>r.localTileData.min=E)},null,544)),[[Oi,r.localTileData.min]]):qe("",!0)]),IJ,A("label",null,[pt("maximum count: "),In(A("input",{placeholder:"unset",type:"number",min:"0",onBlur:d[11]||(d[11]=()=>{r.localTileData&&r.localTileData.max!=null&&(r.localTileData.max=r.localTileData.max<0?0:r.localTileData.max)}),"onUpdate:modelValue":d[12]||(d[12]=E=>r.localTileData.max=E)},null,544),[[Oi,r.localTileData.max]])])]),((y=r.localTileData)==null?void 0:y.type)=="drop"?(ie(),ye("hr",AJ)):qe("",!0),((_=r.localTileData)==null?void 0:_.type)=="drop"?(ie(),ye("div",CJ,[RJ,kJ,A("ul",null,[(ie(!0),ye(tt,null,pi(r.localTileData.drops,E=>(ie(),ye("li",null,[pt(He(E)+" ",1),A("button",{icon:"",cancel:"",onClick:w=>a(E)},"delete",8,OJ)]))),256)),A("li",null,[In(A("input",{type:"text","onUpdate:modelValue":d[13]||(d[13]=E=>s.value=E)},null,512),[[Oi,s.value]]),A("button",{onClick:o},"Add Drop")])])])):qe("",!0),r.localTileData&&r.localTileData.needAny.toString()?(ie(),ye("div",NJ,[MJ,PJ,A("label",null,[pt("All"),In(A("input",{type:"checkbox",choice:"","onUpdate:modelValue":d[14]||(d[14]=E=>r.localTileData.needAny=E)},null,512),[[aE,r.localTileData.needAny]]),pt("Any")])])):qe("",!0)])):qe("",!0),A("button",{submit:"",onClick:d[15]||(d[15]=E=>h.$emit("save"))},"Save changes"),A("button",{cancel:"",onClick:d[16]||(d[16]=E=>h.$emit("cancel"))},"Cancel")],512)}}}),DJ={id:"board-info"},LJ={key:0},VJ={key:0,id:"controlls-are-editing"},FJ={key:1,id:"controlls-are-viewing"},BJ=["src"],UJ=["onClick"],$J=["onClick"],HJ=Zn({__name:"editBoard.vapor",async setup(t){var P,ae;let e,n;const r=bm();r.value="Edit board - Bingo Bongo";const i=vm(),s=xe(),o=xe(),a=xe(null),l=xe(),c=xe(!1),u=xe(!1),h=xe(),d=xe(null),f=xe(0),p=xe([]);let m=[];window.addEventListener("keydown",j=>{switch(j.key){case"Escape":s.value&&s.value.closeModal&&o.value&&o.value.closeModal&&(s.value.closeModal(),o.value.closeModal(),h.value=null,d.value=null,u.value=!1,u.value=!1);break}});const{data:g,promise:y}=El(On(Zt,"Boards",i.params.boardUUID)),{data:_,promise:E}=Pd(Pa(Zt,"Boards",i.params.boardUUID,"Tiles"));[e,n]=ol(()=>Promise.all([y.value,E.value])),await e,n();const w=xe(((P=g.value)==null?void 0:P.boardWidth)||5),S=xe(_.value),I=()=>{s.value&&s.value.showModal&&s.value.showModal(),o.value&&o.value.showModal&&o.value.showModal()},x=()=>{s.value&&s.value.closeModal&&s.value.closeModal(),o.value&&o.value.closeModal&&o.value.closeModal()};p.value=(ae=g.value)!=null&&ae.orderOfList?g.value.orderOfList:S.value.map(j=>j.id);const O=Pt(()=>S.value===void 0?[]:S.value.toSorted((j,Z)=>p.value.indexOf(j.id)-p.value.indexOf(Z.id)));Dz(a,O,{inverted:!0,handle:".handle",ghostClass:"blue-background-class",onUpdate:j=>{iN(O.value,j.oldIndex,j.newIndex),Dl(()=>{p.value=O.value.map(Z=>Z.id)})}});const k=j=>{var Z;j==="add"?w.value=Math.min(w.value+1,12):j==="remove"&&(w.value=Math.max(w.value-1,3)),(Z=a.value)==null||Z.style.setProperty("--width",w.value.toString())},B=async()=>{c.value=!1;try{const j=On(Zt,"Boards",i.params.boardUUID),Z=Pa(j,"Tiles"),ce=iU(Zt);ce.update(j,{orderOfList:p.value,boardWidth:w.value});const rt=await pO(Z),ot={};rt.forEach(R=>{const J=R.id;ot[J]=!0;const q=R.data(),G=S.value.find(Te=>Te.id===J);if(G){if(JSON.stringify(G)!==JSON.stringify(q)){const Te=On(Z,J);ce.set(Te,{id:G.id,title:G.title,description:G.description,image:G.image,type:G.type,needAny:G.needAny,points:G.points,count:G.count})}}else{const Te=On(Z,J);ce.delete(Te)}}),S.value.forEach(R=>{if(!ot[R.id]){const J=On(Z,R.id);ce.set(J,{id:R.id,title:R.title,description:R.description,image:R.image,type:R.type,needAny:R.needAny,points:R.points,count:R.count})}}),await ce.commit();const{data:Mt,promise:dt}=Pd(Pa(Zt,"Boards",i.params.boardUUID,"Tiles"),{once:!0});await dt.value,S.value=Mt.value}catch(j){console.error("Error synchronizing tiles:",j)}},W=async()=>{S.value=_.value,w.value=f.value,c.value=!1,p.value=m},z=()=>{const j=[..._.value];S.value=j,m=p.value,f.value=w.value,c.value=!0},me=async()=>{C_(On(Zt,"Boards",i.params.boardUUID,"Tiles",d.value.id),{...d.value}),u.value=!1,o.value&&o.value.closeModal&&o.value.closeModal(),h.value=d.value;const{data:j,promise:Z}=Pd(Pa(Zt,"Boards",i.params.boardUUID,"Tiles"),{once:!0});await Z.value,S.value=j.value},K=()=>{o.value&&o.value.closeModal&&(u.value=!1,d.value=null,h.value=null,o.value.closeModal())},$=()=>{const j={...h.value};d.value=j,u.value=!0,o.value.showModal()},N=()=>{const j=U_(),Z=Lz();S.value.push({id:j,title:Z,description:"a sample description",image:"https://oldschool.runescape.wiki/images/Frog_%28Ruins_of_Camdozaal%29.png?6ae5e",type:"drop",needAny:!1,points:0,count:0,repeatable:!1}),p.value.push(j)},F=()=>{h.value&&(S.value=S.value.filter(j=>j.id!==h.value.id),p.value=O.value.map(j=>j.id),x())};return(j,Z)=>(ie(),ye(tt,null,[A("section",DJ,[Ue(g)?(ie(),ye("h1",LJ,He(Ue(g).name),1)):qe("",!0),A("code",null," Board ID: "+He(Ue(i).params.boardUUID),1)]),c.value?(ie(),ye("section",VJ,[A("button",{onClick:Z[0]||(Z[0]=ce=>k("remove"))},"-"),In(A("input",{id:"widthInputElement",ref_key:"widthInputForm",ref:l,class:"widthInput","onUpdate:modelValue":Z[1]||(Z[1]=ce=>w.value=ce),type:"number",min:"3",max:"12",onBlur:Z[2]||(Z[2]=()=>{w.value=Math.min(w.value,12),w.value=Math.max(w.value,3)})},null,544),[[Oi,w.value]]),A("button",{onClick:Z[3]||(Z[3]=ce=>k("add"))},"+"),A("button",{submit:"",onClick:Z[4]||(Z[4]=ce=>B())},"save"),A("button",{cancel:"",onClick:Z[5]||(Z[5]=ce=>W())},"cancel")])):(ie(),ye("section",FJ,[A("button",{onClick:Z[6]||(Z[6]=ce=>z())},"move / edit")])),A("section",{ref_key:"el",ref:a,class:"board",style:Bs({"--width":w.value,position:"relative"})},[(ie(!0),ye(tt,null,pi(O.value,ce=>(ie(),ye("div",{class:dp(["tile",{handle:c.value}]),key:ce.id},[A("img",{class:"tile--image",src:ce.image},null,8,BJ),c.value?(ie(),ye("button",{key:0,icon:"",cancel:"",onClick:()=>{h.value=ce,I()}}," delete ",8,UJ)):qe("",!0),c.value?(ie(),ye("button",{key:1,icon:"",onClick:()=>{h.value=ce,$()}}," edit ",8,$J)):qe("",!0)],2))),128)),S.value.length<100?(ie(),ye("button",{key:0,class:"add_tile",icon:"",onClick:Z[7]||(Z[7]=ce=>N()),style:Bs({order:O.value.length+1})}," add_box ",4)):qe("",!0)],4),De($z,{ref_key:"modalEle",ref:s},{header:ks(()=>{var ce;return[pt(" Delete tile: "+He((ce=h.value)==null?void 0:ce.title),1)]}),body:ks(()=>{var ce;return[pt(" are you sure you want to delete the tile "+He((ce=h.value)==null?void 0:ce.title),1)]}),controls:ks(()=>[A("button",{submit:"",onClick:F},"REMOVE"),A("button",{cancel:"",onClick:Z[8]||(Z[8]=ce=>x())},"Cancel")]),_:1},512),De(xJ,{ref_key:"asideModalEle",ref:o,selectedTile:h.value,localTileData:d.value,onSave:me,onCancel:K},null,8,["selectedTile","localTileData"])],64))}}),zJ=eo(HJ,[["__scopeId","data-v-5778a8d7"]]),jJ=t=>(_p("data-v-8498b725"),t=t(),vp(),t),WJ=["onClick"],GJ=["src"],qJ=["src"],KJ=["innerHTML"],YJ={key:0},JJ={key:1},QJ={key:2},XJ={key:3},ZJ=jJ(()=>A("p",null,"valid Drops",-1)),eQ=Zn({__name:"viewBoard.vapor",async setup(t){var m;let e,n;const r=vm(),i=bm(),{data:s,promise:o}=El(On(Zt,"Boards",r.params.boardUUID));[e,n]=ol(()=>o.value),await e,n(),(m=s.value)!=null&&m.name&&(i.value=s.value.name+" - Bingo Bongo");const{data:a,promise:l}=Pd(Pa(Zt,"Boards",r.params.boardUUID,"Tiles"));[e,n]=ol(()=>l.value),await e,n();const c=xe(a.value),u=Pt(()=>{if(c.value===void 0)return[];if(!s.value||!s.value.orderOfList)return c.value.map(y=>y);const g=s.value.orderOfList;return c.value.toSorted((y,_)=>g.indexOf(y.id)-g.indexOf(_.id))}),h=xe(),d=xe(void 0),f=g=>{var y;h.value=g,(y=d.value)==null||y.showModal()},p=()=>{var g;(g=d.value)==null||g.close()};return(g,y)=>{var _,E,w;return Ue(s)?(ie(),ye(tt,{key:0},[A("h1",null,He(Ue(s).name),1),A("section",{ref:"el",class:"board",style:Bs({"--width":Ue(s).boardWidth,position:"relative"})},[(ie(!0),ye(tt,null,pi(u.value,S=>(ie(),ye("div",{class:"tile",style:Bs({"--_image":`url('${S.image}')`}),key:S.id,onClick:lt(I=>f(S),["prevent"])},[A("img",{class:"tile--image",src:S.image},null,8,GJ)],12,WJ))),128))],4),A("dialog",{ref_key:"asideModalEle",ref:d,class:"modal"},[h.value?(ie(),ye(tt,{key:0},[A("button",{class:"close-modal",onClick:lt(p,["prevent"]),icon:""},"close"),A("div",null,[A("img",{src:h.value.image},null,8,qJ)]),A("div",null,[A("h2",null,He((_=h.value)==null?void 0:_.title),1),A("div",{innerHTML:h.value.description},null,8,KJ)]),h.value.type?(ie(),ye("div",YJ,[A("p",null,"type: "+He(h.value.type),1)])):qe("",!0),h.value.metric?(ie(),ye("div",JJ,[A("p",null,"metric: "+He(h.value.metric),1)])):qe("",!0),(E=h.value.repeatable)!=null&&E.toString()?(ie(),ye("div",QJ,[A("p",null,He(h.value.repeatable),1)])):qe("",!0),A("div",null,[A("p",null,"points: "+He(h.value.points),1),A("p",null,"count: "+He(h.value.count),1),A("p",null,"minimum count: "+He(h.value.min),1),A("p",null,"maximum count: "+He(h.value.max),1)]),((w=h.value)==null?void 0:w.type)=="drop"?(ie(),ye("div",XJ,[ZJ,A("ul",null,[(ie(!0),ye(tt,null,pi(h.value.drops,S=>(ie(),ye("li",null,He(S),1))),256))])])):qe("",!0),A("div",null,[A("p",null,"need any:"+He(h.value.needAny),1)])],64)):qe("",!0)],512)],64)):qe("",!0)}}}),tQ=eo(eQ,[["__scopeId","data-v-8498b725"]]),nQ={},xM=t=>(_p("data-v-9b1c0c5b"),t=t(),vp(),t),rQ=iD('<h1 data-v-9b1c0c5b>Theme preview page</h1><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>Colors</h2><div class="wrapper" data-v-9b1c0c5b><div class="block bg-background border" data-v-9b1c0c5b>background</div><div class="block bg-bgalt" data-v-9b1c0c5b>alt bg</div><div class="block bg-bgaccent" data-v-9b1c0c5b>accent bg</div><div class="block bg-primary-100" data-v-9b1c0c5b>primary-100</div><div class="block bg-primary" data-v-9b1c0c5b>primary</div><div class="block bg-primary-900" data-v-9b1c0c5b>primary-900</div><div class="block bg-secondary-100" data-v-9b1c0c5b>secondary-100</div><div class="block bg-secondary" data-v-9b1c0c5b>secondary</div><div class="block bg-secondary-900" data-v-9b1c0c5b>secondary-900</div><div class="block bg-accent-100" data-v-9b1c0c5b>accent-100</div><div class="block bg-accent" data-v-9b1c0c5b>accent</div><div class="block bg-accent-900" data-v-9b1c0c5b>accent-900</div></div></section><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>This is a Heading</h2><h3 data-v-9b1c0c5b>This is a Heading</h3><h4 data-v-9b1c0c5b>This is a Heading</h4><h5 data-v-9b1c0c5b>This is a Heading</h5><p data-v-9b1c0c5b>This is a paragraph.</p><p data-v-9b1c0c5b><code data-v-9b1c0c5b>this is code</code></p><p data-v-9b1c0c5b><a href="https://www.example.com" data-v-9b1c0c5b>This is a link</a></p><p data-v-9b1c0c5b><a href="https://www.example.com" target="_blank" data-v-9b1c0c5b>This is an external link</a></p></section><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>Unordered lists</h2><ul data-v-9b1c0c5b><li data-v-9b1c0c5b>List Item 1</li><li data-v-9b1c0c5b>List Item 2</li><li data-v-9b1c0c5b>List Item 3</li></ul></section><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>Ordered lists</h2><ol data-v-9b1c0c5b><li data-v-9b1c0c5b>List Item 1</li><li data-v-9b1c0c5b>List Item 2</li><li data-v-9b1c0c5b>List Item 3</li></ol></section><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>Table</h2><table data-v-9b1c0c5b><tr data-v-9b1c0c5b><th data-v-9b1c0c5b>Header 1</th><th data-v-9b1c0c5b>Header 2</th></tr><tr data-v-9b1c0c5b><td data-v-9b1c0c5b>Data 1</td><td data-v-9b1c0c5b>Data 2</td></tr></table></section>',6),iQ=xM(()=>A("section",null,[A("h2",null,"Inputs"),A("section",null,[A("div",null,[A("label",{for:"input-text"},"Input Text:")]),A("input",{type:"text",id:"input-text",name:"input-text"})]),A("label",null,"Input Radio:"),A("br"),A("input",{type:"radio",id:"input-radio1",name:"input-radio",value:"radio1"}),A("label",{for:"input-radio1"},"Radio 1"),A("br"),A("input",{type:"radio",id:"input-radio2",name:"input-radio",value:"radio2"}),A("label",{for:"input-radio2"},"Radio 2"),A("br"),A("div",null,[A("label",{for:"input-checkbox"},"Input Checkbox:"),A("br"),A("input",{type:"checkbox",id:"input-checkbox",name:"input-checkbox",value:"checkbox1"}),pt("Checkbox 1"),A("br"),A("input",{type:"checkbox",checked:"",id:"input-checkbox",name:"input-checkbox",value:"checkbox2"}),pt("Checkbox 2"),A("br")]),A("button",null,"Button"),A("button",{outline:""},"outline"),A("button",{cancel:""},"cancel"),A("button",{submit:""},"submit")],-1)),sQ=xM(()=>A("section",null,[A("h2",null,"Combination elements"),A("section",null,[A("button",null,"add"),A("input",{type:"text",class:"width-2"}),A("button",null,"subtract")]),A("section",null,[A("span",{type:"text",class:"input width-10",contenteditable:""}),A("button",null,"subtract")])],-1));function oQ(t,e){return ie(),ye(tt,null,[rQ,iQ,sQ],64)}const aQ=eo(nQ,[["render",oQ],["__scopeId","data-v-9b1c0c5b"]]),DM=q$({history:T$(),routes:[{path:"/new",name:"createNewBingo",component:ez},{path:"/login",name:"loginScreen",component:lz},{path:"/view/:boardUUID",name:"viewBoard",component:tQ},{path:"/edit/:boardUUID",name:"editBoard",component:zJ},{path:"/color/",name:"color",component:aQ},{path:"/",name:"Home",component:bH}]});DM.beforeEach(async t=>{if(t.name=="editBoard"&&!await cQ(t.params.boardUUID))return{name:"loginScreen"};if(t.name=="createNewBingo"&&!await lQ())return{name:"loginScreen"}});const lQ=async()=>{var e;const t=await Pp();if(t){const{data:n,promise:r}=El(On(Zt,"Users",t.uid));if(await r.value,(e=n.value)!=null&&e.banned&&n.value.banned)return!n.value.banned}return!!(t!=null&&t.uid)},cQ=async t=>{var i;const e=await Pp();if(e){const{data:s,promise:o}=El(On(Zt,"Users",e.uid));if(await o.value,(i=s.value)!=null&&i.banned&&s.value.banned)return!s.value.banned}const{data:n,promise:r}=El(On(Zt,"Boards",t));return await r.value,n.value&&e?n.value.ownerID==e.uid:!1};function hI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function le(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hI(Object(n),!0).forEach(function(r){qt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ip(t){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ip(t)}function uQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hQ(t,e,n){return e&&dI(t.prototype,e),n&&dI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sb(t,e){return fQ(t)||mQ(t,e)||LM(t,e)||yQ()}function kh(t){return dQ(t)||pQ(t)||LM(t)||gQ()}function dQ(t){if(Array.isArray(t))return lv(t)}function fQ(t){if(Array.isArray(t))return t}function pQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function LM(t,e){if(t){if(typeof t=="string")return lv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lv(t,e)}}function lv(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fI=function(){},ob={},VM={},FM=null,BM={mark:fI,measure:fI};try{typeof window<"u"&&(ob=window),typeof document<"u"&&(VM=document),typeof MutationObserver<"u"&&(FM=MutationObserver),typeof performance<"u"&&(BM=performance)}catch{}var _Q=ob.navigator||{},pI=_Q.userAgent,mI=pI===void 0?"":pI,qs=ob,Et=VM,gI=FM,ud=BM;qs.document;var Zi=!!Et.documentElement&&!!Et.head&&typeof Et.addEventListener=="function"&&typeof Et.createElement=="function",UM=~mI.indexOf("MSIE")||~mI.indexOf("Trident/"),hd,dd,fd,pd,md,qi="___FONT_AWESOME___",cv=16,$M="fa",HM="svg-inline--fa",ia="data-fa-i2svg",uv="data-fa-pseudo-element",vQ="data-fa-pseudo-element-pending",ab="data-prefix",lb="data-icon",yI="fontawesome-i2svg",bQ="async",EQ=["HTML","HEAD","STYLE","SCRIPT"],zM=function(){try{return!0}catch{return!1}}(),vt="classic",Ot="sharp",cb=[vt,Ot];function Oh(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[vt]}})}var Bu=Oh((hd={},qt(hd,vt,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),qt(hd,Ot,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),hd)),Uu=Oh((dd={},qt(dd,vt,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),qt(dd,Ot,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),dd)),$u=Oh((fd={},qt(fd,vt,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),qt(fd,Ot,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),fd)),TQ=Oh((pd={},qt(pd,vt,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),qt(pd,Ot,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),pd)),wQ=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,jM="fa-layers-text",SQ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,IQ=Oh((md={},qt(md,vt,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),qt(md,Ot,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),md)),WM=[1,2,3,4,5,6,7,8,9,10],AQ=WM.concat([11,12,13,14,15,16,17,18,19,20]),CQ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],No={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Hu=new Set;Object.keys(Uu[vt]).map(Hu.add.bind(Hu));Object.keys(Uu[Ot]).map(Hu.add.bind(Hu));var RQ=[].concat(cb,kh(Hu),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",No.GROUP,No.SWAP_OPACITY,No.PRIMARY,No.SECONDARY]).concat(WM.map(function(t){return"".concat(t,"x")})).concat(AQ.map(function(t){return"w-".concat(t)})),Zc=qs.FontAwesomeConfig||{};function kQ(t){var e=Et.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function OQ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Et&&typeof Et.querySelector=="function"){var NQ=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];NQ.forEach(function(t){var e=sb(t,2),n=e[0],r=e[1],i=OQ(kQ(n));i!=null&&(Zc[r]=i)})}var GM={styleDefault:"solid",familyDefault:"classic",cssPrefix:$M,replacementClass:HM,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Zc.familyPrefix&&(Zc.cssPrefix=Zc.familyPrefix);var xl=le(le({},GM),Zc);xl.autoReplaceSvg||(xl.observeMutations=!1);var pe={};Object.keys(GM).forEach(function(t){Object.defineProperty(pe,t,{enumerable:!0,set:function(n){xl[t]=n,eu.forEach(function(r){return r(pe)})},get:function(){return xl[t]}})});Object.defineProperty(pe,"familyPrefix",{enumerable:!0,set:function(e){xl.cssPrefix=e,eu.forEach(function(n){return n(pe)})},get:function(){return xl.cssPrefix}});qs.FontAwesomeConfig=pe;var eu=[];function MQ(t){return eu.push(t),function(){eu.splice(eu.indexOf(t),1)}}var as=cv,oi={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function PQ(t){if(!(!t||!Zi)){var e=Et.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Et.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Et.head.insertBefore(e,r),t}}var xQ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function zu(){for(var t=12,e="";t-- >0;)e+=xQ[Math.random()*62|0];return e}function Jl(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function ub(t){return t.classList?Jl(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function qM(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function DQ(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(qM(t[n]),'" ')},"").trim()}function Lm(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function hb(t){return t.size!==oi.size||t.x!==oi.x||t.y!==oi.y||t.rotate!==oi.rotate||t.flipX||t.flipY}function LQ(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function VQ(t){var e=t.transform,n=t.width,r=n===void 0?cv:n,i=t.height,s=i===void 0?cv:i,o=t.startCentered,a=o===void 0?!1:o,l="";return a&&UM?l+="translate(".concat(e.x/as-r/2,"em, ").concat(e.y/as-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/as,"em), calc(-50% + ").concat(e.y/as,"em)) "):l+="translate(".concat(e.x/as,"em, ").concat(e.y/as,"em) "),l+="scale(".concat(e.size/as*(e.flipX?-1:1),", ").concat(e.size/as*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var FQ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function KM(){var t=$M,e=HM,n=pe.cssPrefix,r=pe.replacementClass,i=FQ;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var _I=!1;function ly(){pe.autoAddCss&&!_I&&(PQ(KM()),_I=!0)}var BQ={mixout:function(){return{dom:{css:KM,insertCss:ly}}},hooks:function(){return{beforeDOMElementCreation:function(){ly()},beforeI2svg:function(){ly()}}}},Ki=qs||{};Ki[qi]||(Ki[qi]={});Ki[qi].styles||(Ki[qi].styles={});Ki[qi].hooks||(Ki[qi].hooks={});Ki[qi].shims||(Ki[qi].shims=[]);var Vr=Ki[qi],YM=[],UQ=function t(){Et.removeEventListener("DOMContentLoaded",t),sp=1,YM.map(function(e){return e()})},sp=!1;Zi&&(sp=(Et.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Et.readyState),sp||Et.addEventListener("DOMContentLoaded",UQ));function $Q(t){Zi&&(sp?setTimeout(t,0):YM.push(t))}function Nh(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?qM(t):"<".concat(e," ").concat(DQ(r),">").concat(s.map(Nh).join(""),"</").concat(e,">")}function vI(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var HQ=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},cy=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?HQ(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function zQ(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function hv(t){var e=zQ(t);return e.length===1?e[0].toString(16):null}function jQ(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function bI(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function dv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=bI(e);typeof Vr.hooks.addPack=="function"&&!i?Vr.hooks.addPack(t,bI(e)):Vr.styles[t]=le(le({},Vr.styles[t]||{}),s),t==="fas"&&dv("fa",e)}var gd,yd,_d,Va=Vr.styles,WQ=Vr.shims,GQ=(gd={},qt(gd,vt,Object.values($u[vt])),qt(gd,Ot,Object.values($u[Ot])),gd),db=null,JM={},QM={},XM={},ZM={},eP={},qQ=(yd={},qt(yd,vt,Object.keys(Bu[vt])),qt(yd,Ot,Object.keys(Bu[Ot])),yd);function KQ(t){return~RQ.indexOf(t)}function YQ(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!KQ(i)?i:null}var tP=function(){var e=function(s){return cy(Va,function(o,a,l){return o[l]=cy(a,s,{}),o},{})};JM=e(function(i,s,o){if(s[3]&&(i[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){i[l.toString(16)]=o})}return i}),QM=e(function(i,s,o){if(i[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){i[l]=o})}return i}),eP=e(function(i,s,o){var a=s[2];return i[o]=o,a.forEach(function(l){i[l]=o}),i});var n="far"in Va||pe.autoFetchSvg,r=cy(WQ,function(i,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!n&&(a="fas"),typeof o=="string"&&(i.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:a,iconName:l}),i},{names:{},unicodes:{}});XM=r.names,ZM=r.unicodes,db=Vm(pe.styleDefault,{family:pe.familyDefault})};MQ(function(t){db=Vm(t.styleDefault,{family:pe.familyDefault})});tP();function fb(t,e){return(JM[t]||{})[e]}function JQ(t,e){return(QM[t]||{})[e]}function Mo(t,e){return(eP[t]||{})[e]}function nP(t){return XM[t]||{prefix:null,iconName:null}}function QQ(t){var e=ZM[t],n=fb("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Ks(){return db}var pb=function(){return{prefix:null,iconName:null,rest:[]}};function Vm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?vt:n,i=Bu[r][t],s=Uu[r][t]||Uu[r][i],o=t in Vr.styles?t:null;return s||o||null}var EI=(_d={},qt(_d,vt,Object.keys($u[vt])),qt(_d,Ot,Object.keys($u[Ot])),_d);function Fm(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,s=(e={},qt(e,vt,"".concat(pe.cssPrefix,"-").concat(vt)),qt(e,Ot,"".concat(pe.cssPrefix,"-").concat(Ot)),e),o=null,a=vt;(t.includes(s[vt])||t.some(function(c){return EI[vt].includes(c)}))&&(a=vt),(t.includes(s[Ot])||t.some(function(c){return EI[Ot].includes(c)}))&&(a=Ot);var l=t.reduce(function(c,u){var h=YQ(pe.cssPrefix,u);if(Va[u]?(u=GQ[a].includes(u)?TQ[a][u]:u,o=u,c.prefix=u):qQ[a].indexOf(u)>-1?(o=u,c.prefix=Vm(u,{family:a})):h?c.iconName=h:u!==pe.replacementClass&&u!==s[vt]&&u!==s[Ot]&&c.rest.push(u),!i&&c.prefix&&c.iconName){var d=o==="fa"?nP(c.iconName):{},f=Mo(c.prefix,c.iconName);d.prefix&&(o=null),c.iconName=d.iconName||f||c.iconName,c.prefix=d.prefix||c.prefix,c.prefix==="far"&&!Va.far&&Va.fas&&!pe.autoFetchSvg&&(c.prefix="fas")}return c},pb());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===Ot&&(Va.fass||pe.autoFetchSvg)&&(l.prefix="fass",l.iconName=Mo(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||o==="fa")&&(l.prefix=Ks()||"fas"),l}var XQ=function(){function t(){uQ(this,t),this.definitions={}}return hQ(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){n.definitions[a]=le(le({},n.definitions[a]||{}),o[a]),dv(a,o[a]);var l=$u[vt][a];l&&dv(l,o[a]),tP()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var o=i[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];n[a]||(n[a]={}),u.length>0&&u.forEach(function(h){typeof h=="string"&&(n[a][h]=c)}),n[a][l]=c}),n}}]),t}(),TI=[],Fa={},il={},ZQ=Object.keys(il);function eX(t,e){var n=e.mixoutsTo;return TI=t,Fa={},Object.keys(il).forEach(function(r){ZQ.indexOf(r)===-1&&delete il[r]}),TI.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),ip(i[o])==="object"&&Object.keys(i[o]).forEach(function(a){n[o]||(n[o]={}),n[o][a]=i[o][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(o){Fa[o]||(Fa[o]=[]),Fa[o].push(s[o])})}r.provides&&r.provides(il)}),n}function fv(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=Fa[t]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function sa(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Fa[t]||[];i.forEach(function(s){s.apply(null,n)})}function Yi(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return il[t]?il[t].apply(null,e):void 0}function pv(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Ks();if(e)return e=Mo(n,e)||e,vI(rP.definitions,n,e)||vI(Vr.styles,n,e)}var rP=new XQ,tX=function(){pe.autoReplaceSvg=!1,pe.observeMutations=!1,sa("noAuto")},nX={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Zi?(sa("beforeI2svg",e),Yi("pseudoElements2svg",e),Yi("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;pe.autoReplaceSvg===!1&&(pe.autoReplaceSvg=!0),pe.observeMutations=!0,$Q(function(){iX({autoReplaceSvgRoot:n}),sa("watch",e)})}},rX={icon:function(e){if(e===null)return null;if(ip(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Mo(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=Vm(e[0]);return{prefix:r,iconName:Mo(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(pe.cssPrefix,"-"))>-1||e.match(wQ))){var i=Fm(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||Ks(),iconName:Mo(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=Ks();return{prefix:s,iconName:Mo(s,e)||e}}}},mr={noAuto:tX,config:pe,dom:nX,parse:rX,library:rP,findIconDefinition:pv,toHtml:Nh},iX=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?Et:n;(Object.keys(Vr.styles).length>0||pe.autoFetchSvg)&&Zi&&pe.autoReplaceSvg&&mr.dom.i2svg({node:r})};function Bm(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return Nh(r)})}}),Object.defineProperty(t,"node",{get:function(){if(Zi){var r=Et.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function sX(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,o=t.transform;if(hb(o)&&n.found&&!r.found){var a=n.width,l=n.height,c={x:a/l/2,y:.5};i.style=Lm(le(le({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function oX(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,o=s===!0?"".concat(e,"-").concat(pe.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:le(le({},i),{},{id:o}),children:r}]}]}function mb(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,o=t.transform,a=t.symbol,l=t.title,c=t.maskId,u=t.titleId,h=t.extra,d=t.watchable,f=d===void 0?!1:d,p=r.found?r:n,m=p.width,g=p.height,y=i==="fak",_=[pe.replacementClass,s?"".concat(pe.cssPrefix,"-").concat(s):""].filter(function(k){return h.classes.indexOf(k)===-1}).filter(function(k){return k!==""||!!k}).concat(h.classes).join(" "),E={children:[],attributes:le(le({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:_,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},w=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(E.attributes[ia]=""),l&&(E.children.push({tag:"title",attributes:{id:E.attributes["aria-labelledby"]||"title-".concat(u||zu())},children:[l]}),delete E.attributes.title);var S=le(le({},E),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:le(le({},w),h.styles)}),I=r.found&&n.found?Yi("generateAbstractMask",S)||{children:[],attributes:{}}:Yi("generateAbstractIcon",S)||{children:[],attributes:{}},x=I.children,O=I.attributes;return S.children=x,S.attributes=O,a?oX(S):sX(S)}function wI(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,o=t.extra,a=t.watchable,l=a===void 0?!1:a,c=le(le(le({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[ia]="");var u=le({},o.styles);hb(i)&&(u.transform=VQ({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=Lm(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function aX(t){var e=t.content,n=t.title,r=t.extra,i=le(le(le({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=Lm(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var uy=Vr.styles;function mv(t){var e=t[0],n=t[1],r=t.slice(4),i=sb(r,1),s=i[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(pe.cssPrefix,"-").concat(No.GROUP)},children:[{tag:"path",attributes:{class:"".concat(pe.cssPrefix,"-").concat(No.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(pe.cssPrefix,"-").concat(No.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:o}}var lX={found:!1,width:512,height:512};function cX(t,e){!zM&&!pe.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function gv(t,e){var n=e;return e==="fa"&&pe.styleDefault!==null&&(e=Ks()),new Promise(function(r,i){if(Yi("missingIconAbstract"),n==="fa"){var s=nP(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&uy[e]&&uy[e][t]){var o=uy[e][t];return r(mv(o))}cX(t,e),r(le(le({},lX),{},{icon:pe.showMissingIcons&&t?Yi("missingIconAbstract")||{}:{}}))})}var SI=function(){},yv=pe.measurePerformance&&ud&&ud.mark&&ud.measure?ud:{mark:SI,measure:SI},Sc='FA "6.5.1"',uX=function(e){return yv.mark("".concat(Sc," ").concat(e," begins")),function(){return iP(e)}},iP=function(e){yv.mark("".concat(Sc," ").concat(e," ends")),yv.measure("".concat(Sc," ").concat(e),"".concat(Sc," ").concat(e," begins"),"".concat(Sc," ").concat(e," ends"))},gb={begin:uX,end:iP},zd=function(){};function II(t){var e=t.getAttribute?t.getAttribute(ia):null;return typeof e=="string"}function hX(t){var e=t.getAttribute?t.getAttribute(ab):null,n=t.getAttribute?t.getAttribute(lb):null;return e&&n}function dX(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(pe.replacementClass)}function fX(){if(pe.autoReplaceSvg===!0)return jd.replace;var t=jd[pe.autoReplaceSvg];return t||jd.replace}function pX(t){return Et.createElementNS("http://www.w3.org/2000/svg",t)}function mX(t){return Et.createElement(t)}function sP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?pX:mX:n;if(typeof t=="string")return Et.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var s=t.children||[];return s.forEach(function(o){i.appendChild(sP(o,{ceFn:r}))}),i}function gX(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var jd={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(sP(i),n)}),n.getAttribute(ia)===null&&pe.keepOriginalSource){var r=Et.createComment(gX(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~ub(n).indexOf(pe.replacementClass))return jd.replace(e);var i=new RegExp("".concat(pe.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,l){return l===pe.replacementClass||l.match(i)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var o=r.map(function(a){return Nh(a)}).join(`
`);n.setAttribute(ia,""),n.innerHTML=o}};function AI(t){t()}function oP(t,e){var n=typeof e=="function"?e:zd;if(t.length===0)n();else{var r=AI;pe.mutateApproach===bQ&&(r=qs.requestAnimationFrame||AI),r(function(){var i=fX(),s=gb.begin("mutate");t.map(i),s(),n()})}}var yb=!1;function aP(){yb=!0}function _v(){yb=!1}var op=null;function CI(t){if(gI&&pe.observeMutations){var e=t.treeCallback,n=e===void 0?zd:e,r=t.nodeCallback,i=r===void 0?zd:r,s=t.pseudoElementsCallback,o=s===void 0?zd:s,a=t.observeMutationsRoot,l=a===void 0?Et:a;op=new gI(function(c){if(!yb){var u=Ks();Jl(c).forEach(function(h){if(h.type==="childList"&&h.addedNodes.length>0&&!II(h.addedNodes[0])&&(pe.searchPseudoElements&&o(h.target),n(h.target)),h.type==="attributes"&&h.target.parentNode&&pe.searchPseudoElements&&o(h.target.parentNode),h.type==="attributes"&&II(h.target)&&~CQ.indexOf(h.attributeName))if(h.attributeName==="class"&&hX(h.target)){var d=Fm(ub(h.target)),f=d.prefix,p=d.iconName;h.target.setAttribute(ab,f||u),p&&h.target.setAttribute(lb,p)}else dX(h.target)&&i(h.target)})}}),Zi&&op.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function yX(){op&&op.disconnect()}function _X(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function vX(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=Fm(ub(t));return i.prefix||(i.prefix=Ks()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=JQ(i.prefix,t.innerText)||fb(i.prefix,hv(t.innerText))),!i.iconName&&pe.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function bX(t){var e=Jl(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return pe.autoA11y&&(n?e["aria-labelledby"]="".concat(pe.replacementClass,"-title-").concat(r||zu()):(e["aria-hidden"]="true",e.focusable="false")),e}function EX(){return{iconName:null,title:null,titleId:null,prefix:null,transform:oi,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function RI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=vX(t),r=n.iconName,i=n.prefix,s=n.rest,o=bX(t),a=fv("parseNodeAttributes",{},t),l=e.styleParser?_X(t):[];return le({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:oi,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var TX=Vr.styles;function lP(t){var e=pe.autoReplaceSvg==="nest"?RI(t,{styleParser:!1}):RI(t);return~e.extra.classes.indexOf(jM)?Yi("generateLayersText",t,e):Yi("generateSvgReplacementMutation",t,e)}var Ys=new Set;cb.map(function(t){Ys.add("fa-".concat(t))});Object.keys(Bu[vt]).map(Ys.add.bind(Ys));Object.keys(Bu[Ot]).map(Ys.add.bind(Ys));Ys=kh(Ys);function kI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Zi)return Promise.resolve();var n=Et.documentElement.classList,r=function(h){return n.add("".concat(yI,"-").concat(h))},i=function(h){return n.remove("".concat(yI,"-").concat(h))},s=pe.autoFetchSvg?Ys:cb.map(function(u){return"fa-".concat(u)}).concat(Object.keys(TX));s.includes("fa")||s.push("fa");var o=[".".concat(jM,":not([").concat(ia,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(ia,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=Jl(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();var l=gb.begin("onTree"),c=a.reduce(function(u,h){try{var d=lP(h);d&&u.push(d)}catch(f){zM||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise(function(u,h){Promise.all(c).then(function(d){oP(d,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(d){l(),h(d)})})}function wX(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;lP(t).then(function(n){n&&oP([n],e)})}function SX(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:pv(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:pv(i||{})),t(r,le(le({},n),{},{mask:i}))}}var IX=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?oi:r,s=n.symbol,o=s===void 0?!1:s,a=n.mask,l=a===void 0?null:a,c=n.maskId,u=c===void 0?null:c,h=n.title,d=h===void 0?null:h,f=n.titleId,p=f===void 0?null:f,m=n.classes,g=m===void 0?[]:m,y=n.attributes,_=y===void 0?{}:y,E=n.styles,w=E===void 0?{}:E;if(e){var S=e.prefix,I=e.iconName,x=e.icon;return Bm(le({type:"icon"},e),function(){return sa("beforeDOMElementCreation",{iconDefinition:e,params:n}),pe.autoA11y&&(d?_["aria-labelledby"]="".concat(pe.replacementClass,"-title-").concat(p||zu()):(_["aria-hidden"]="true",_.focusable="false")),mb({icons:{main:mv(x),mask:l?mv(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:S,iconName:I,transform:le(le({},oi),i),symbol:o,title:d,maskId:u,titleId:p,extra:{attributes:_,styles:w,classes:g}})})}},AX={mixout:function(){return{icon:SX(IX)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=kI,n.nodeCallback=wX,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?Et:r,s=n.callback,o=s===void 0?function(){}:s;return kI(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,o=r.titleId,a=r.prefix,l=r.transform,c=r.symbol,u=r.mask,h=r.maskId,d=r.extra;return new Promise(function(f,p){Promise.all([gv(i,a),u.iconName?gv(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=sb(m,2),y=g[0],_=g[1];f([n,mb({icons:{main:y,mask:_},prefix:a,iconName:i,transform:l,symbol:c,maskId:h,title:s,titleId:o,extra:d,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.transform,a=n.styles,l=Lm(a);l.length>0&&(i.style=l);var c;return hb(o)&&(c=Yi("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),r.push(c||s.icon),{children:r,attributes:i}}}},CX={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return Bm({type:"layer"},function(){sa("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(pe.cssPrefix,"-layers")].concat(kh(s)).join(" ")},children:o}]})}}}},RX={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,o=r.classes,a=o===void 0?[]:o,l=r.attributes,c=l===void 0?{}:l,u=r.styles,h=u===void 0?{}:u;return Bm({type:"counter",content:n},function(){return sa("beforeDOMElementCreation",{content:n,params:r}),aX({content:n.toString(),title:s,extra:{attributes:c,styles:h,classes:["".concat(pe.cssPrefix,"-layers-counter")].concat(kh(a))}})})}}}},kX={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?oi:i,o=r.title,a=o===void 0?null:o,l=r.classes,c=l===void 0?[]:l,u=r.attributes,h=u===void 0?{}:u,d=r.styles,f=d===void 0?{}:d;return Bm({type:"text",content:n},function(){return sa("beforeDOMElementCreation",{content:n,params:r}),wI({content:n,transform:le(le({},oi),s),title:a,extra:{attributes:h,styles:f,classes:["".concat(pe.cssPrefix,"-layers-text")].concat(kh(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,o=r.extra,a=null,l=null;if(UM){var c=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();a=u.width/c,l=u.height/c}return pe.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([n,wI({content:n.innerHTML,width:a,height:l,transform:s,title:i,extra:o,watchable:!0})])}}},OX=new RegExp('"',"ug"),OI=[1105920,1112319];function NX(t){var e=t.replace(OX,""),n=jQ(e,0),r=n>=OI[0]&&n<=OI[1],i=e.length===2?e[0]===e[1]:!1;return{value:hv(i?e[0]:e),isSecondary:r||i}}function NI(t,e){var n="".concat(vQ).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=Jl(t.children),o=s.filter(function(x){return x.getAttribute(uv)===e})[0],a=qs.getComputedStyle(t,e),l=a.getPropertyValue("font-family").match(SQ),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return t.removeChild(o),r();if(l&&u!=="none"&&u!==""){var h=a.getPropertyValue("content"),d=~["Sharp"].indexOf(l[2])?Ot:vt,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?Uu[d][l[2].toLowerCase()]:IQ[d][c],p=NX(h),m=p.value,g=p.isSecondary,y=l[0].startsWith("FontAwesome"),_=fb(f,m),E=_;if(y){var w=QQ(m);w.iconName&&w.prefix&&(_=w.iconName,f=w.prefix)}if(_&&!g&&(!o||o.getAttribute(ab)!==f||o.getAttribute(lb)!==E)){t.setAttribute(n,E),o&&t.removeChild(o);var S=EX(),I=S.extra;I.attributes[uv]=e,gv(_,f).then(function(x){var O=mb(le(le({},S),{},{icons:{main:x,mask:pb()},prefix:f,iconName:E,extra:I,watchable:!0})),k=Et.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(k,t.firstChild):t.appendChild(k),k.outerHTML=O.map(function(B){return Nh(B)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function MX(t){return Promise.all([NI(t,"::before"),NI(t,"::after")])}function PX(t){return t.parentNode!==document.head&&!~EQ.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(uv)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function MI(t){if(Zi)return new Promise(function(e,n){var r=Jl(t.querySelectorAll("*")).filter(PX).map(MX),i=gb.begin("searchPseudoElements");aP(),Promise.all(r).then(function(){i(),_v(),e()}).catch(function(){i(),_v(),n()})})}var xX={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=MI,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?Et:r;pe.searchPseudoElements&&MI(i)}}},PI=!1,DX={mixout:function(){return{dom:{unwatch:function(){aP(),PI=!0}}}},hooks:function(){return{bootstrap:function(){CI(fv("mutationObserverCallbacks",{}))},noAuto:function(){yX()},watch:function(n){var r=n.observeMutationsRoot;PI?_v():CI(fv("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},xI=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return r.flipX=!0,r;if(o&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(o){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},LX={mixout:function(){return{parse:{transform:function(n){return xI(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=xI(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,o=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),c="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),h={transform:"".concat(l," ").concat(c," ").concat(u)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:h,path:d};return{tag:"g",attributes:le({},f.outer),children:[{tag:"g",attributes:le({},f.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:le(le({},r.icon.attributes),f.path)}]}]}}}},hy={x:0,y:0,width:"100%",height:"100%"};function DI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function VX(t){return t.tag==="g"?t.children:[t]}var FX={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?Fm(i.split(" ").map(function(o){return o.trim()})):pb();return s.prefix||(s.prefix=Ks()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.mask,a=n.maskId,l=n.transform,c=s.width,u=s.icon,h=o.width,d=o.icon,f=LQ({transform:l,containerWidth:h,iconWidth:c}),p={tag:"rect",attributes:le(le({},hy),{},{fill:"white"})},m=u.children?{children:u.children.map(DI)}:{},g={tag:"g",attributes:le({},f.inner),children:[DI(le({tag:u.tag,attributes:le(le({},u.attributes),f.path)},m))]},y={tag:"g",attributes:le({},f.outer),children:[g]},_="mask-".concat(a||zu()),E="clip-".concat(a||zu()),w={tag:"mask",attributes:le(le({},hy),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:E},children:VX(d)},w]};return r.push(S,{tag:"rect",attributes:le({fill:"currentColor","clip-path":"url(#".concat(E,")"),mask:"url(#".concat(_,")")},hy)}),{children:r,attributes:i}}}},BX={provides:function(e){var n=!1;qs.matchMedia&&(n=qs.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:le(le({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=le(le({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:le(le({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:le(le({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:le(le({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:le(le({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:le(le({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:le(le({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:le(le({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},UX={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},$X=[BQ,AX,CX,RX,kX,xX,DX,LX,FX,BX,UX];eX($X,{mixoutsTo:mr});mr.noAuto;mr.config;var je=mr.library;mr.dom;var vv=mr.parse;mr.findIconDefinition;mr.toHtml;var HX=mr.icon;mr.layer;mr.text;mr.counter;var zX={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},jX={prefix:"fas",iconName:"users-rectangle",icon:[640,512,[],"e594","M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H544c53 0 96-43 96-96V96c0-53-43-96-96-96H96zM64 96c0-17.7 14.3-32 32-32H544c17.7 0 32 14.3 32 32V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V96zm159.8 80a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM96 309.3c0 14.7 11.9 26.7 26.7 26.7h56.1c8-34.1 32.8-61.7 65.2-73.6c-7.5-4.1-16.2-6.4-25.3-6.4H149.3C119.9 256 96 279.9 96 309.3zM461.2 336h56.1c14.7 0 26.7-11.9 26.7-26.7c0-29.5-23.9-53.3-53.3-53.3H421.3c-9.2 0-17.8 2.3-25.3 6.4c32.4 11.9 57.2 39.5 65.2 73.6zM372 289c-3.9-.7-7.9-1-12-1H280c-4.1 0-8.1 .3-12 1c-26 4.4-47.3 22.7-55.9 47c-2.7 7.5-4.1 15.6-4.1 24c0 13.3 10.7 24 24 24H408c13.3 0 24-10.7 24-24c0-8.4-1.4-16.5-4.1-24c-8.6-24.3-29.9-42.6-55.9-47zM512 176a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM320 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},WX={prefix:"fas",iconName:"spaghetti-monster-flying",icon:[640,512,["pastafarianism"],"f67b","M208 64a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 0c0 16.2-6 31.1-16 42.3l15.6 31.2c18.7-6 39.9-9.5 64.4-9.5s45.8 3.5 64.4 9.5L400 106.3C390 95.1 384 80.2 384 64c0-35.3 28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64c-1.7 0-3.4-.1-5.1-.2L427.8 158c21.1 13.6 37.7 30.2 51.4 46.4c7.1 8.3 13.5 16.6 19.3 24l1.4 1.8c6.3 8.1 11.6 14.8 16.7 20.4C527.3 262.3 532.7 264 536 264c2.5 0 4.3-.6 7.1-3.3c3.7-3.5 7.1-8.8 12.5-17.4l.6-.9c4.6-7.4 11-17.6 19.4-25.7c9.7-9.3 22.9-16.7 40.4-16.7c13.3 0 24 10.7 24 24s-10.7 24-24 24c-2.5 0-4.3 .6-7.1 3.3c-3.7 3.5-7.1 8.8-12.5 17.4l-.6 .9c-4.6 7.4-11 17.6-19.4 25.7c-9.7 9.3-22.9 16.7-40.4 16.7c-18.5 0-32.9-8.5-44.3-18.6c-3.1 4-6.6 8.3-10.5 12.7c1.4 4.3 2.8 8.5 4 12.5c.9 3 1.8 5.8 2.6 8.6c3 9.8 5.5 18.2 8.6 25.9c3.9 9.8 7.4 15.4 10.8 18.5c2.6 2.4 5.9 4.3 12.8 4.3c8.7 0 16.9-4.2 33.7-13.2c15-8 35.7-18.8 62.3-18.8c13.3 0 24 10.7 24 24s-10.7 24-24 24c-13.4 0-24.7 5.2-39.7 13.2c-1 .6-2.1 1.1-3.2 1.7C559.9 414 541.4 424 520 424c-18.4 0-33.6-6.1-45.5-17.2c-11.1-10.3-17.9-23.7-22.7-36c-3.6-9-6.7-19.1-9.5-28.5c-16.4 12.3-36.1 23.6-58.9 31.3c3.6 10.8 8.4 23.5 14.4 36.2c7.5 15.9 16.2 30.4 25.8 40.5C433 460.5 441.2 464 448 464c13.3 0 24 10.7 24 24s-10.7 24-24 24c-25.2 0-45-13.5-59.5-28.8c-14.5-15.4-25.7-34.9-34.2-53c-8-17-14.1-33.8-18.3-46.9c-5.2 .4-10.6 .6-16 .6s-10.8-.2-16-.6c-4.2 13-10.3 29.9-18.3 46.9c-8.5 18.1-19.8 37.6-34.2 53C237 498.5 217.2 512 192 512c-13.3 0-24-10.7-24-24s10.7-24 24-24c6.8 0 15-3.5 24.5-13.7c9.5-10.1 18.3-24.6 25.8-40.5c5.9-12.6 10.7-25.4 14.4-36.2c-22.8-7.7-42.5-19-58.9-31.3c-2.9 9.4-6 19.5-9.5 28.5c-4.8 12.2-11.6 25.6-22.7 36C153.6 417.9 138.4 424 120 424c-21.4 0-39.9-10-53.1-17.1l0 0c-1.1-.6-2.2-1.2-3.2-1.7c-15-8-26.3-13.2-39.7-13.2c-13.3 0-24-10.7-24-24s10.7-24 24-24c26.6 0 47.3 10.8 62.3 18.8c16.8 9 25 13.2 33.7 13.2c6.8 0 10.2-1.9 12.8-4.3c3.4-3.2 7-8.8 10.8-18.5c3-7.7 5.6-16.1 8.6-25.9c.8-2.7 1.7-5.6 2.6-8.6c1.2-4 2.6-8.2 4-12.5c-3.9-4.5-7.4-8.8-10.5-12.7C136.9 303.5 122.5 312 104 312c-17.5 0-30.7-7.4-40.4-16.7c-8.4-8.1-14.8-18.3-19.4-25.7l-.6-.9c-5.4-8.6-8.8-13.9-12.5-17.4c-2.8-2.7-4.6-3.3-7.1-3.3c-13.3 0-24-10.7-24-24s10.7-24 24-24c17.5 0 30.7 7.4 40.4 16.7c8.4 8.1 14.8 18.3 19.4 25.7l.6 .9c5.4 8.6 8.8 13.9 12.5 17.4c2.8 2.7 4.6 3.3 7.1 3.3c3.3 0 8.7-1.7 19.4-13.4c5.1-5.6 10.4-12.3 16.7-20.4l1.4-1.8c5.8-7.4 12.2-15.7 19.3-24c13.8-16.2 30.3-32.8 51.4-46.4l-15.1-30.2c-1.7 .1-3.4 .2-5.1 .2c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm208 0a16 16 0 1 0 -32 0 16 16 0 1 0 32 0z"]},GX={prefix:"fas",iconName:"spoon",icon:[512,512,[129348,61873,"utensil-spoon"],"f2e5","M245.8 220.9c-14.5-17.6-21.8-39.2-21.8-60.8C224 80 320 0 416 0c53 0 96 43 96 96c0 96-80 192-160.2 192c-21.6 0-43.2-7.3-60.8-21.8L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L245.8 220.9z"]},qX={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},KX={prefix:"fas",iconName:"paw",icon:[512,512,[],"f1b0","M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z"]},YX={prefix:"fas",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},JX={prefix:"fas",iconName:"ghost",icon:[384,512,[128123],"f6e2","M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9C8 480 0 472 0 462.2V192C0 86 86 0 192 0S384 86 384 192V462.2c0 9.8-8 17.8-17.8 17.8c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-13.4-10.7-32.8-9-44.1 3.9L269.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6l-26.6-30.5c-12.7-14.6-35.4-14.6-48.2 0L141.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6L84.2 471c-11.3-12.9-30.7-14.6-44.1-3.9zM160 192a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},QX={prefix:"fas",iconName:"tree",icon:[448,512,[127794],"f1bb","M210.6 5.9L62 169.4c-3.9 4.2-6 9.8-6 15.5C56 197.7 66.3 208 79.1 208H104L30.6 281.4c-4.2 4.2-6.6 10-6.6 16C24 309.9 34.1 320 46.6 320H80L5.4 409.5C1.9 413.7 0 419 0 424.5c0 13 10.5 23.5 23.5 23.5H192v32c0 17.7 14.3 32 32 32s32-14.3 32-32V448H424.5c13 0 23.5-10.5 23.5-23.5c0-5.5-1.9-10.8-5.4-15L368 320h33.4c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16L344 208h24.9c12.7 0 23.1-10.3 23.1-23.1c0-5.7-2.1-11.3-6-15.5L237.4 5.9C234 2.1 229.1 0 224 0s-10 2.1-13.4 5.9z"]},XX={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},ZX={prefix:"fas",iconName:"shapes",icon:[512,512,["triangle-circle-square"],"f61f","M315.4 15.5C309.7 5.9 299.2 0 288 0s-21.7 5.9-27.4 15.5l-96 160c-5.9 9.9-6.1 22.2-.4 32.2s16.3 16.2 27.8 16.2H384c11.5 0 22.2-6.2 27.8-16.2s5.5-22.3-.4-32.2l-96-160zM288 312V456c0 22.1 17.9 40 40 40H472c22.1 0 40-17.9 40-40V312c0-22.1-17.9-40-40-40H328c-22.1 0-40 17.9-40 40zM128 512a128 128 0 1 0 0-256 128 128 0 1 0 0 256z"]},eZ={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},tZ={prefix:"fas",iconName:"user-group",icon:[640,512,[128101,"user-friends"],"f500","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM609.3 512H471.4c5.4-9.4 8.6-20.3 8.6-32v-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2h61.4C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"]},nZ={prefix:"fas",iconName:"fire",icon:[448,512,[128293],"f06d","M159.3 5.4c7.8-7.3 19.9-7.2 27.7 .1c27.6 25.9 53.5 53.8 77.7 84c11-14.4 23.5-30.1 37-42.9c7.9-7.4 20.1-7.4 28 .1c34.6 33 63.9 76.6 84.5 118c20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512C98.4 512 0 404.1 0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3 0 47.7-7 68.8-21c42.1-29.4 53.4-88.2 28.1-134.4c-4.5-9-16-9.6-22.5-2l-25.2 29.3c-6.6 7.6-18.5 7.4-24.7-.5c-16.5-21-46-58.5-62.8-79.8c-6.3-8-18.3-8.1-24.7-.1c-33.8 42.5-50.8 69.3-50.8 99.4C112 375.4 162.6 416 225.7 416z"]},rZ={prefix:"fas",iconName:"eye-low-vision",icon:[640,512,["low-vision"],"f2a8","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223 149.5c48.6-44.3 123-50.8 179.3-11.7c60.8 42.4 78.9 123.2 44.2 186.9L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3L223 149.5zm-139.9 12c-11 14.4-20.5 28.7-28.4 42.2l339 265.7c18.7-5.5 36.2-13 52.6-21.8L83.1 161.5zm-50 86.3c-1.8 6.8-1.3 14 1.4 20.5c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c3.1 0 6.1-.1 9.2-.2L33.1 247.8z"]},iZ={prefix:"fas",iconName:"crow",icon:[640,512,[],"f520","M456 0c-48.6 0-88 39.4-88 88v29.2L12.5 390.6c-14 10.8-16.6 30.9-5.9 44.9s30.9 16.6 44.9 5.9L126.1 384H259.2l46.6 113.1c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3L311.1 384H352c1.1 0 2.1 0 3.2 0l46.6 113.2c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3l-42-102C484.9 354.1 544 280 544 192V128v-8l80.5-20.1c8.6-2.1 13.8-10.8 11.6-19.4C629 52 603.4 32 574 32H523.9C507.7 12.5 483.3 0 456 0zm0 64a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},sZ={prefix:"fas",iconName:"frog",icon:[576,512,[],"f52e","M368 32c41.7 0 75.9 31.8 79.7 72.5l85.6 26.3c25.4 7.8 42.8 31.3 42.8 57.9c0 21.8-11.7 41.9-30.7 52.7L400.8 323.5 493.3 416H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H480c-8.5 0-16.6-3.4-22.6-9.4L346.9 360.2c11.7-36 3.2-77.1-25.4-105.7c-40.6-40.6-106.3-40.6-146.9-.1L101 324.4c-6.4 6.1-6.7 16.2-.6 22.6s16.2 6.6 22.6 .6l73.8-70.2 .1-.1 .1-.1c3.5-3.5 7.3-6.6 11.3-9.2c27.9-18.5 65.9-15.4 90.5 9.2c24.7 24.7 27.7 62.9 9 90.9c-2.6 3.8-5.6 7.5-9 10.9L261.8 416H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-35.3 0-64-28.7-64-64C0 249.6 127 112.9 289.3 97.5C296.2 60.2 328.8 32 368 32zm0 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},oZ={prefix:"fas",iconName:"feather-pointed",icon:[512,512,["feather-alt"],"f56b","M278.5 215.6L23 471c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l74.8-74.8c7.4 4.6 15.3 8.2 23.8 10.5C200.3 452.8 270 454.5 338 409.4c12.2-8.1 5.8-25.4-8.8-25.4l-16.1 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l97.7-29.3c3.4-1 6.4-3.1 8.4-6.1c4.4-6.4 8.6-12.9 12.6-19.6c6.2-10.3-1.5-23-13.5-23l-38.6 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l80.9-24.3c4.6-1.4 8.4-4.8 10.2-9.3C494.5 163 507.8 86.1 511.9 36.8c.8-9.9-3-19.6-10-26.6s-16.7-10.8-26.6-10C391.5 7 228.5 40.5 137.4 131.6C57.3 211.7 56.7 302.3 71.3 356.4c2.1 7.9 12 9.6 17.8 3.8L253.6 195.8c6.2-6.2 16.4-6.2 22.6 0c5.4 5.4 6.1 13.6 2.2 19.8z"]},aZ={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},lZ={prefix:"fas",iconName:"hat-cowboy",icon:[640,512,[],"f8c0","M320 64c14.4 0 22.3-7 30.8-14.4C360.4 41.1 370.7 32 392 32c49.3 0 84.4 152.2 97.9 221.9C447.8 272.1 390.9 288 320 288s-127.8-15.9-169.9-34.1C163.6 184.2 198.7 32 248 32c21.3 0 31.6 9.1 41.2 17.6C297.7 57 305.6 64 320 64zM111.1 270.7c47.2 24.5 117.5 49.3 209 49.3s161.8-24.8 208.9-49.3c24.8-12.9 49.8-28.3 70.1-47.7c7.9-7.9 20.2-9.2 29.6-3.3c9.5 5.9 13.5 17.9 9.9 28.5c-13.5 37.7-38.4 72.3-66.1 100.6C523.7 398.9 443.6 448 320 448s-203.6-49.1-252.5-99.2C39.8 320.4 14.9 285.8 1.4 248.1c-3.6-10.6 .4-22.6 9.9-28.5c9.5-5.9 21.7-4.5 29.6 3.3c20.4 19.4 45.3 34.8 70.1 47.7z"]},cZ={prefix:"fas",iconName:"cat",icon:[576,512,[128008],"f6be","M320 192h17.1c22.1 38.3 63.5 64 110.9 64c11 0 21.8-1.4 32-4v4 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V339.2L280 448h56c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-53 0-96-43-96-96V192.5c0-16.1-12-29.8-28-31.8l-7.9-1c-17.5-2.2-30-18.2-27.8-35.7s18.2-30 35.7-27.8l7.9 1c48 6 84.1 46.8 84.1 95.3v85.3c34.4-51.7 93.2-85.8 160-85.8zm160 26.5v0c-10 3.5-20.8 5.5-32 5.5c-28.4 0-54-12.4-71.6-32h0c-3.7-4.1-7-8.5-9.9-13.2C357.3 164 352 146.6 352 128v0V32 12 10.7C352 4.8 356.7 .1 362.6 0h.2c3.3 0 6.4 1.6 8.4 4.2l0 .1L384 21.3l27.2 36.3L416 64h64l4.8-6.4L512 21.3 524.8 4.3l0-.1c2-2.6 5.1-4.2 8.4-4.2h.2C539.3 .1 544 4.8 544 10.7V12 32v96c0 17.3-4.6 33.6-12.6 47.6c-11.3 19.8-29.6 35.2-51.4 42.9zM432 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},uZ={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},hZ={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},dZ={prefix:"fas",iconName:"hat-wizard",icon:[512,512,[],"f6e8","M64 416L168.6 180.7c15.3-34.4 40.3-63.5 72-83.7l146.9-94c3-1.9 6.5-2.9 10-2.9C407.7 0 416 8.3 416 18.6v1.6c0 2.6-.5 5.1-1.4 7.5L354.8 176.9c-1.9 4.7-2.8 9.7-2.8 14.7c0 5.5 1.2 11 3.4 16.1L448 416H240.9l11.8-35.4 40.4-13.5c6.5-2.2 10.9-8.3 10.9-15.2s-4.4-13-10.9-15.2l-40.4-13.5-13.5-40.4C237 276.4 230.9 272 224 272s-13 4.4-15.2 10.9l-13.5 40.4-40.4 13.5C148.4 339 144 345.1 144 352s4.4 13 10.9 15.2l40.4 13.5L207.1 416H64zM279.6 141.5c-1.1-3.3-4.1-5.5-7.6-5.5s-6.5 2.2-7.6 5.5l-6.7 20.2-20.2 6.7c-3.3 1.1-5.5 4.1-5.5 7.6s2.2 6.5 5.5 7.6l20.2 6.7 6.7 20.2c1.1 3.3 4.1 5.5 7.6 5.5s6.5-2.2 7.6-5.5l6.7-20.2 20.2-6.7c3.3-1.1 5.5-4.1 5.5-7.6s-2.2-6.5-5.5-7.6l-20.2-6.7-6.7-20.2zM32 448H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},fZ={prefix:"fas",iconName:"table-cells-large",icon:[512,512,["th-large"],"f009","M448 96V224H288V96H448zm0 192V416H288V288H448zM224 224H64V96H224V224zM64 288H224V416H64V288zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},pZ={prefix:"fas",iconName:"dove",icon:[512,512,[128330],"f4ba","M160.8 96.5c14 17 31 30.9 49.5 42.2c25.9 15.8 53.7 25.9 77.7 31.6V138.8C265.8 108.5 250 71.5 248.6 28c-.4-11.3-7.5-21.5-18.4-24.4c-7.6-2-15.8-.2-21 5.8c-13.3 15.4-32.7 44.6-48.4 87.2zM320 144v30.6l0 0v1.3l0 0 0 32.1c-60.8-5.1-185-43.8-219.3-157.2C97.4 40 87.9 32 76.6 32c-7.9 0-15.3 3.9-18.8 11C46.8 65.9 32 112.1 32 176c0 116.9 80.1 180.5 118.4 202.8L11.8 416.6C6.7 418 2.6 421.8 .9 426.8s-.8 10.6 2.3 14.8C21.7 466.2 77.3 512 160 512c3.6 0 7.2-1.2 10-3.5L245.6 448H320c88.4 0 160-71.6 160-160V128l29.9-44.9c1.3-2 2.1-4.4 2.1-6.8c0-6.8-5.5-12.3-12.3-12.3H400c-44.2 0-80 35.8-80 80zm80-16a16 16 0 1 1 0 32 16 16 0 1 1 0-32z"]},mZ={prefix:"fas",iconName:"list-ul",icon:[512,512,["list-dots"],"f0ca","M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"]},gZ={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},yZ={prefix:"fas",iconName:"users-line",icon:[640,512,[],"e592","M211.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM32 256c0 17.7 14.3 32 32 32h85.6c10.1-39.4 38.6-71.5 75.8-86.6c-9.7-6-21.2-9.4-33.4-9.4H96c-35.3 0-64 28.7-64 64zm461.6 32H576c17.7 0 32-14.3 32-32c0-35.3-28.7-64-64-64H448c-11.7 0-22.7 3.1-32.1 8.6c38.1 14.8 67.4 47.3 77.7 87.4zM391.2 226.4c-6.9-1.6-14.2-2.4-21.6-2.4h-96c-8.5 0-16.7 1.1-24.5 3.1c-30.8 8.1-55.6 31.1-66.1 60.9c-3.5 10-5.5 20.8-5.5 32c0 17.7 14.3 32 32 32h224c17.7 0 32-14.3 32-32c0-11.2-1.9-22-5.5-32c-10.8-30.7-36.8-54.2-68.9-61.6zM563.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM321.6 192a80 80 0 1 0 0-160 80 80 0 1 0 0 160zM32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32H608c17.7 0 32-14.3 32-32s-14.3-32-32-32H32z"]},_Z={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2v82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9V380.8c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},vZ={prefix:"fas",iconName:"disease",icon:[512,512,[],"f7fa","M236.4 61.4L227 75.5c-21.3 32-59.4 48.5-97.3 42.1l-59.6-9.9C33.4 101.6 0 129.9 .1 167.1c0 15.9 6.4 31.2 17.6 42.5l29.2 29.2c11 11 17.2 25.9 17.2 41.5c0 15.8-6.4 30.9-17.7 42L33.3 335.1C22.2 345.9 16 360.7 16 376.2c0 36.8 34.1 64.2 70.1 56.2l62.3-13.8c7.7-1.7 15.7-2.6 23.6-2.6h10c27.2 0 53.7 9.3 75 26.3L287.8 467c10.5 8.4 23.6 13 37 13c32.7 0 59.3-26.5 59.3-59.3l0-25.2c0-34.9 21.4-66.2 53.9-78.8l36.9-14.3c22.4-8.7 37.2-30.3 37.2-54.3c0-28.1-20.1-52.3-47.8-57.3l-28-5.1c-36.5-6.7-65.4-34.5-73.6-70.7l-7.1-31.5C348.9 53.4 322.1 32 291.3 32c-22 0-42.6 11-54.9 29.4zM160 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 16a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zm0 80a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},bZ={prefix:"fas",iconName:"shield",icon:[512,512,[128737,"shield-blank"],"f132","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0z"]},EZ={prefix:"fas",iconName:"hippo",icon:[640,512,[129435],"f6ed","M407 47c9.4-9.4 24.6-9.4 33.9 0l17.2 17.2c1.9-.1 3.9-.2 5.8-.2h32c11.2 0 21.9 2.3 31.6 6.5L543 55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L564 101.9c7.6 12.2 12 26.7 12 42.1c0 10.2 7.4 18.8 16.7 23c27.9 12.5 47.3 40.5 47.3 73c0 26.2-12.6 49.4-32 64v32c0 8.8-7.2 16-16 16H560c-8.8 0-16-7.2-16-16V320H480v16c0 8.8-7.2 16-16 16H432c-8.8 0-16-7.2-16-16V318.4c-11.8-2.4-22.7-7.4-32-14.4c-1.5-1.1-2.9-2.3-4.3-3.5c-17-14.7-27.7-36.4-27.7-60.5c0-8.8-7.2-16-16-16s-16 7.2-16 16c0 44.7 26.2 83.2 64 101.2V352c0 17.7 14.3 32 32 32h32v64c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V372c-19.8 7.7-41.4 12-64 12s-44.2-4.3-64-12v76c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V329.1L45.9 369.7c-5.4 12.1-19.6 17.6-31.7 12.2S-3.3 362.4 2.1 350.3L24 300.9c5.3-11.9 8-24.7 8-37.7C32 155.7 117.2 68 223.8 64.1l.2-.1h7.2H256h32c41.7 0 83.4 12.1 117.2 25.7c1.7-1.8 3.5-3.6 5.3-5.2L407 81c-9.4-9.4-9.4-24.6 0-33.9zm73 185a24 24 0 1 0 -48 0 24 24 0 1 0 48 0zm88 24a24 24 0 1 0 0-48 24 24 0 1 0 0 48zM480 144a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},TZ={prefix:"fas",iconName:"hand-fist",icon:[448,512,[9994,"fist-raised"],"f6de","M192 0c17.7 0 32 14.3 32 32V144H160V32c0-17.7 14.3-32 32-32zM64 64c0-17.7 14.3-32 32-32s32 14.3 32 32v80H64V64zm192 0c0-17.7 14.3-32 32-32s32 14.3 32 32v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V64zm96 64c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V128zm-96 88l0-.6c9.4 5.4 20.3 8.6 32 8.6c13.2 0 25.4-4 35.6-10.8c8.7 24.9 32.5 42.8 60.4 42.8c11.7 0 22.6-3.1 32-8.6V256c0 52.3-25.1 98.8-64 128v96c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V401.6c-17.3-7.9-33.2-18.8-46.9-32.5L69.5 357.5C45.5 333.5 32 300.9 32 267V240c0-35.3 28.7-64 64-64h88c22.1 0 40 17.9 40 40s-17.9 40-40 40H128c-8.8 0-16 7.2-16 16s7.2 16 16 16h56c39.8 0 72-32.2 72-72z"]},wZ={prefix:"fas",iconName:"users-gear",icon:[640,512,["users-cog"],"f509","M144 160A80 80 0 1 0 144 0a80 80 0 1 0 0 160zm368 0A80 80 0 1 0 512 0a80 80 0 1 0 0 160zM0 298.7C0 310.4 9.6 320 21.3 320H234.7c.2 0 .4 0 .7 0c-26.6-23.5-43.3-57.8-43.3-96c0-7.6 .7-15 1.9-22.3c-13.6-6.3-28.7-9.7-44.6-9.7H106.7C47.8 192 0 239.8 0 298.7zM320 320c24 0 45.9-8.8 62.7-23.3c2.5-3.7 5.2-7.3 8-10.7c2.7-3.3 5.7-6.1 9-8.3C410 262.3 416 243.9 416 224c0-53-43-96-96-96s-96 43-96 96s43 96 96 96zm65.4 60.2c-10.3-5.9-18.1-16.2-20.8-28.2H261.3C187.7 352 128 411.7 128 485.3c0 14.7 11.9 26.7 26.7 26.7H455.2c-2.1-5.2-3.2-10.9-3.2-16.4v-3c-1.3-.7-2.7-1.5-4-2.3l-2.6 1.5c-16.8 9.7-40.5 8-54.7-9.7c-4.5-5.6-8.6-11.5-12.4-17.6l-.1-.2-.1-.2-2.4-4.1-.1-.2-.1-.2c-3.4-6.2-6.4-12.6-9-19.3c-8.2-21.2 2.2-42.6 19-52.3l2.7-1.5c0-.8 0-1.5 0-2.3s0-1.5 0-2.3l-2.7-1.5zM533.3 192H490.7c-15.9 0-31 3.5-44.6 9.7c1.3 7.2 1.9 14.7 1.9 22.3c0 17.4-3.5 33.9-9.7 49c2.5 .9 4.9 2 7.1 3.3l2.6 1.5c1.3-.8 2.6-1.6 4-2.3v-3c0-19.4 13.3-39.1 35.8-42.6c7.9-1.2 16-1.9 24.2-1.9s16.3 .6 24.2 1.9c22.5 3.5 35.8 23.2 35.8 42.6v3c1.3 .7 2.7 1.5 4 2.3l2.6-1.5c16.8-9.7 40.5-8 54.7 9.7c2.3 2.8 4.5 5.8 6.6 8.7c-2.1-57.1-49-102.7-106.6-102.7zm91.3 163.9c6.3-3.6 9.5-11.1 6.8-18c-2.1-5.5-4.6-10.8-7.4-15.9l-2.3-4c-3.1-5.1-6.5-9.9-10.2-14.5c-4.6-5.7-12.7-6.7-19-3l-2.9 1.7c-9.2 5.3-20.4 4-29.6-1.3s-16.1-14.5-16.1-25.1v-3.4c0-7.3-4.9-13.8-12.1-14.9c-6.5-1-13.1-1.5-19.9-1.5s-13.4 .5-19.9 1.5c-7.2 1.1-12.1 7.6-12.1 14.9v3.4c0 10.6-6.9 19.8-16.1 25.1s-20.4 6.6-29.6 1.3l-2.9-1.7c-6.3-3.6-14.4-2.6-19 3c-3.7 4.6-7.1 9.5-10.2 14.6l-2.3 3.9c-2.8 5.1-5.3 10.4-7.4 15.9c-2.6 6.8 .5 14.3 6.8 17.9l2.9 1.7c9.2 5.3 13.7 15.8 13.7 26.4s-4.5 21.1-13.7 26.4l-3 1.7c-6.3 3.6-9.5 11.1-6.8 17.9c2.1 5.5 4.6 10.7 7.4 15.8l2.4 4.1c3 5.1 6.4 9.9 10.1 14.5c4.6 5.7 12.7 6.7 19 3l2.9-1.7c9.2-5.3 20.4-4 29.6 1.3s16.1 14.5 16.1 25.1v3.4c0 7.3 4.9 13.8 12.1 14.9c6.5 1 13.1 1.5 19.9 1.5s13.4-.5 19.9-1.5c7.2-1.1 12.1-7.6 12.1-14.9v-3.4c0-10.6 6.9-19.8 16.1-25.1s20.4-6.6 29.6-1.3l2.9 1.7c6.3 3.6 14.4 2.6 19-3c3.7-4.6 7.1-9.4 10.1-14.5l2.4-4.2c2.8-5.1 5.3-10.3 7.4-15.8c2.6-6.8-.5-14.3-6.8-17.9l-3-1.7c-9.2-5.3-13.7-15.8-13.7-26.4s4.5-21.1 13.7-26.4l3-1.7zM472 384a40 40 0 1 1 80 0 40 40 0 1 1 -80 0z"]};function LI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LI(Object(n),!0).forEach(function(r){Gn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function Gn(t,e,n){return e=CZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IZ(t,e){if(t==null)return{};var n=SZ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CZ(t){var e=AZ(t,"string");return typeof e=="symbol"?e:String(e)}var RZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cP={exports:{}};(function(t){(function(e){var n=function(y,_,E){if(!c(_)||h(_)||d(_)||f(_)||l(_))return _;var w,S=0,I=0;if(u(_))for(w=[],I=_.length;S<I;S++)w.push(n(y,_[S],E));else{w={};for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(w[y(x,E)]=n(y,_[x],E))}return w},r=function(y,_){_=_||{};var E=_.separator||"_",w=_.split||/(?=[A-Z])/;return y.split(w).join(E)},i=function(y){return p(y)?y:(y=y.replace(/[\-_\s]+(.)?/g,function(_,E){return E?E.toUpperCase():""}),y.substr(0,1).toLowerCase()+y.substr(1))},s=function(y){var _=i(y);return _.substr(0,1).toUpperCase()+_.substr(1)},o=function(y,_){return r(y,_).toLowerCase()},a=Object.prototype.toString,l=function(y){return typeof y=="function"},c=function(y){return y===Object(y)},u=function(y){return a.call(y)=="[object Array]"},h=function(y){return a.call(y)=="[object Date]"},d=function(y){return a.call(y)=="[object RegExp]"},f=function(y){return a.call(y)=="[object Boolean]"},p=function(y){return y=y-0,y===y},m=function(y,_){var E=_&&"process"in _?_.process:_;return typeof E!="function"?y:function(w,S){return E(w,y,S)}},g={camelize:i,decamelize:o,pascalize:s,depascalize:o,camelizeKeys:function(y,_){return n(m(i,_),y)},decamelizeKeys:function(y,_){return n(m(o,_),y,_)},pascalizeKeys:function(y,_){return n(m(s,_),y)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=g:e.humps=g})(RZ)})(cP);var kZ=cP.exports,OZ=["class","style"];function NZ(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=kZ.camelize(n.slice(0,r)),s=n.slice(r+1).trim();return e[i]=s,e},{})}function MZ(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function uP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(l){return uP(l)}),i=Object.keys(t.attributes||{}).reduce(function(l,c){var u=t.attributes[c];switch(c){case"class":l.class=MZ(u);break;case"style":l.style=NZ(u);break;default:l.attrs[c]=u}return l},{attrs:{},class:{},style:{}});n.class;var s=n.style,o=s===void 0?{}:s,a=IZ(n,OZ);return Do(t.tag,Pi(Pi(Pi({},e),{},{class:i.class,style:Pi(Pi({},i.style),o)},i.attrs),a),r)}var hP=!1;try{hP=!0}catch{}function PZ(){if(!hP&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function dy(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Gn({},t,e):{}}function xZ(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Gn(e,"fa-".concat(t.size),t.size!==null),Gn(e,"fa-rotate-".concat(t.rotation),t.rotation!==null),Gn(e,"fa-pull-".concat(t.pull),t.pull!==null),Gn(e,"fa-swap-opacity",t.swapOpacity),Gn(e,"fa-bounce",t.bounce),Gn(e,"fa-shake",t.shake),Gn(e,"fa-beat",t.beat),Gn(e,"fa-fade",t.fade),Gn(e,"fa-beat-fade",t.beatFade),Gn(e,"fa-flash",t.flash),Gn(e,"fa-spin-pulse",t.spinPulse),Gn(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function VI(t){if(t&&ap(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(vv.icon)return vv.icon(t);if(t===null)return null;if(ap(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var DZ=Zn({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,i=Pt(function(){return VI(e.icon)}),s=Pt(function(){return dy("classes",xZ(e))}),o=Pt(function(){return dy("transform",typeof e.transform=="string"?vv.transform(e.transform):e.transform)}),a=Pt(function(){return dy("mask",VI(e.mask))}),l=Pt(function(){return HX(i.value,Pi(Pi(Pi(Pi({},s.value),o.value),a.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});Bi(l,function(u){if(!u)return PZ("Could not find one or more icon(s)",i.value,a.value)},{immediate:!0});var c=Pt(function(){return l.value?uP(l.value.abstract[0],{},r):null});return function(){return c.value}}});je.add(tZ);je.add(hZ);je.add(XX);je.add(uZ);je.add(rZ);je.add(mZ);je.add(eZ);je.add(zX);je.add(jX);je.add(YX);je.add(fZ);je.add(ZX);je.add(yZ);je.add(wZ);je.add(gZ);je.add(qX);je.add(bZ);je.add(_Z);je.add(WX);je.add(KX);je.add(EZ);je.add(iZ);je.add(sZ);je.add(oZ);je.add(vZ);je.add(cZ);je.add(pZ);je.add(GX);je.add(JX);je.add(aZ);je.add(TZ);je.add(dZ);je.add(lZ);je.add(QX);je.add(nZ);const Mh=qD(tH);Mh.use(XD());Mh.use(jU,{firebaseApp:zO,modules:[UU()]});Mh.use(DM);Mh.component("FontAwesomeIcon",DZ);Mh.mount("#app");
