(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ov(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const wt={},Xa=[],Rr=()=>{},kP=()=>!1,Tp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Nv=t=>t.startsWith("onUpdate:"),Xt=Object.assign,Mv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},RP=Object.prototype.hasOwnProperty,nt=(t,e)=>RP.call(t,e),Ie=Array.isArray,Za=t=>sh(t)==="[object Map]",wp=t=>sh(t)==="[object Set]",Db=t=>sh(t)==="[object Date]",Pe=t=>typeof t=="function",Bt=t=>typeof t=="string",Ys=t=>typeof t=="symbol",_t=t=>t!==null&&typeof t=="object",Pv=t=>(_t(t)||Pe(t))&&Pe(t.then)&&Pe(t.catch),QI=Object.prototype.toString,sh=t=>QI.call(t),OP=t=>sh(t).slice(8,-1),XI=t=>sh(t)==="[object Object]",Dv=t=>Bt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,$c=Ov(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},NP=/-(\w)/g,Ti=Sp(t=>t.replace(NP,(e,n)=>n?n.toUpperCase():"")),MP=/\B([A-Z])/g,va=Sp(t=>t.replace(MP,"-$1").toLowerCase()),Ip=Sp(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ym=Sp(t=>t?`on${Ip(t)}`:""),Js=(t,e)=>!Object.is(t,e),xd=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},of=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Ey=t=>{const e=parseFloat(t);return isNaN(e)?t:e},ZI=t=>{const e=Bt(t)?Number(t):NaN;return isNaN(e)?t:e};let xb;const eA=()=>xb||(xb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wn(t){if(Ie(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Bt(r)?LP(r):Wn(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Bt(t)||_t(t))return t}const PP=/;(?![^(]*\))/g,DP=/:([^]+)/,xP=/\/\*[^]*?\*\//g;function LP(t){const e={};return t.replace(xP,"").split(PP).forEach(n=>{if(n){const r=n.split(DP);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Qs(t){let e="";if(Bt(t))e=t;else if(Ie(t))for(let n=0;n<t.length;n++){const r=Qs(t[n]);r&&(e+=r+" ")}else if(_t(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const VP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",FP=Ov(VP);function tA(t){return!!t||t===""}function UP(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ap(t[r],e[r]);return n}function Ap(t,e){if(t===e)return!0;let n=Db(t),r=Db(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Ys(t),r=Ys(e),n||r)return t===e;if(n=Ie(t),r=Ie(e),n||r)return n&&r?UP(t,e):!1;if(n=_t(t),r=_t(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ap(t[o],e[o]))return!1}}return String(t)===String(e)}function nA(t,e){return t.findIndex(n=>Ap(n,e))}const ne=t=>Bt(t)?t:t==null?"":Ie(t)||_t(t)&&(t.toString===QI||!Pe(t.toString))?JSON.stringify(t,rA,2):String(t),rA=(t,e)=>e&&e.__v_isRef?rA(t,e.value):Za(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Jm(r,s)+" =>"]=i,n),{})}:wp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Jm(n))}:Ys(e)?Jm(e):_t(e)&&!Ie(e)&&!XI(e)?String(e):e,Jm=(t,e="")=>{var n;return Ys(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cr;class iA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=cr,!e&&cr&&(this.index=(cr.scopes||(cr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=cr;try{return cr=this,e()}finally{cr=n}}}on(){cr=this}off(){cr=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function sA(t){return new iA(t)}function BP(t,e=cr){e&&e.active&&e.effects.push(t)}function xv(){return cr}function oA(t){cr&&cr.cleanups.push(t)}let Wo;class Lv{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,BP(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ba();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&($P(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ea()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Bs,n=Wo;try{return Bs=!0,Wo=this,this._runnings++,Lb(this),this.fn()}finally{Vb(this),this._runnings--,Wo=n,Bs=e}}stop(){var e;this.active&&(Lb(this),Vb(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function $P(t){return t.value}function Lb(t){t._trackId++,t._depsLength=0}function Vb(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)aA(t.deps[e],t);t.deps.length=t._depsLength}}function aA(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Bs=!0,Ty=0;const lA=[];function ba(){lA.push(Bs),Bs=!1}function Ea(){const t=lA.pop();Bs=t===void 0?!0:t}function Vv(){Ty++}function Fv(){for(Ty--;!Ty&&wy.length;)wy.shift()()}function cA(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&aA(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const wy=[];function uA(t,e,n){Vv();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&wy.push(r.scheduler)))}Fv()}const hA=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},af=new WeakMap,qo=Symbol(""),Sy=Symbol("");function rr(t,e,n){if(Bs&&Wo){let r=af.get(t);r||af.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=hA(()=>r.delete(n))),cA(Wo,i)}}function Ji(t,e,n,r,i,s){const o=af.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Ie(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!Ys(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Ie(t)?Dv(n)&&a.push(o.get("length")):(a.push(o.get(qo)),Za(t)&&a.push(o.get(Sy)));break;case"delete":Ie(t)||(a.push(o.get(qo)),Za(t)&&a.push(o.get(Sy)));break;case"set":Za(t)&&a.push(o.get(qo));break}Vv();for(const l of a)l&&uA(l,4);Fv()}function HP(t,e){var n;return(n=af.get(t))==null?void 0:n.get(e)}const zP=Ov("__proto__,__v_isRef,__isVue"),dA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ys)),Fb=jP();function jP(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=rt(this);for(let s=0,o=this.length;s<o;s++)rr(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(rt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){ba(),Vv();const r=rt(this)[e].apply(this,n);return Fv(),Ea(),r}}),t}function WP(t){const e=rt(this);return rr(e,"has",t),e.hasOwnProperty(t)}class fA{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?iD:yA:s?gA:mA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ie(e);if(!i){if(o&&nt(Fb,n))return Reflect.get(Fb,n,r);if(n==="hasOwnProperty")return WP}const a=Reflect.get(e,n,r);return(Ys(n)?dA.has(n):zP(n))||(i||rr(e,"get",n),s)?a:un(a)?o&&Dv(n)?a:a.value:_t(a)?i?$v(a):oh(a):a}}class pA extends fA{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=vl(s);if(!lf(r)&&!vl(r)&&(s=rt(s),r=rt(r)),!Ie(e)&&un(s)&&!un(r))return l?!1:(s.value=r,!0)}const o=Ie(e)&&Dv(n)?Number(n)<e.length:nt(e,n),a=Reflect.set(e,n,r,i);return e===rt(i)&&(o?Js(r,s)&&Ji(e,"set",n,r):Ji(e,"add",n,r)),a}deleteProperty(e,n){const r=nt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ji(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Ys(n)||!dA.has(n))&&rr(e,"has",n),r}ownKeys(e){return rr(e,"iterate",Ie(e)?"length":qo),Reflect.ownKeys(e)}}class qP extends fA{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const GP=new pA,KP=new qP,YP=new pA(!0),Uv=t=>t,Cp=t=>Reflect.getPrototypeOf(t);function Kh(t,e,n=!1,r=!1){t=t.__v_raw;const i=rt(t),s=rt(e);n||(Js(e,s)&&rr(i,"get",e),rr(i,"get",s));const{has:o}=Cp(i),a=r?Uv:n?zv:yu;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Yh(t,e=!1){const n=this.__v_raw,r=rt(n),i=rt(t);return e||(Js(t,i)&&rr(r,"has",t),rr(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Jh(t,e=!1){return t=t.__v_raw,!e&&rr(rt(t),"iterate",qo),Reflect.get(t,"size",t)}function Ub(t){t=rt(t);const e=rt(this);return Cp(e).has.call(e,t)||(e.add(t),Ji(e,"add",t,t)),this}function Bb(t,e){e=rt(e);const n=rt(this),{has:r,get:i}=Cp(n);let s=r.call(n,t);s||(t=rt(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Js(e,o)&&Ji(n,"set",t,e):Ji(n,"add",t,e),this}function $b(t){const e=rt(this),{has:n,get:r}=Cp(e);let i=n.call(e,t);i||(t=rt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Ji(e,"delete",t,void 0),s}function Hb(){const t=rt(this),e=t.size!==0,n=t.clear();return e&&Ji(t,"clear",void 0,void 0),n}function Qh(t,e){return function(r,i){const s=this,o=s.__v_raw,a=rt(o),l=e?Uv:t?zv:yu;return!t&&rr(a,"iterate",qo),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function Xh(t,e,n){return function(...r){const i=this.__v_raw,s=rt(i),o=Za(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?Uv:e?zv:yu;return!e&&rr(s,"iterate",l?Sy:qo),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ps(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function JP(){const t={get(s){return Kh(this,s)},get size(){return Jh(this)},has:Yh,add:Ub,set:Bb,delete:$b,clear:Hb,forEach:Qh(!1,!1)},e={get(s){return Kh(this,s,!1,!0)},get size(){return Jh(this)},has:Yh,add:Ub,set:Bb,delete:$b,clear:Hb,forEach:Qh(!1,!0)},n={get(s){return Kh(this,s,!0)},get size(){return Jh(this,!0)},has(s){return Yh.call(this,s,!0)},add:ps("add"),set:ps("set"),delete:ps("delete"),clear:ps("clear"),forEach:Qh(!0,!1)},r={get(s){return Kh(this,s,!0,!0)},get size(){return Jh(this,!0)},has(s){return Yh.call(this,s,!0)},add:ps("add"),set:ps("set"),delete:ps("delete"),clear:ps("clear"),forEach:Qh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Xh(s,!1,!1),n[s]=Xh(s,!0,!1),e[s]=Xh(s,!1,!0),r[s]=Xh(s,!0,!0)}),[t,n,e,r]}const[QP,XP,ZP,eD]=JP();function Bv(t,e){const n=e?t?eD:ZP:t?XP:QP;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(nt(n,i)&&i in r?n:r,i,s)}const tD={get:Bv(!1,!1)},nD={get:Bv(!1,!0)},rD={get:Bv(!0,!1)},mA=new WeakMap,gA=new WeakMap,yA=new WeakMap,iD=new WeakMap;function sD(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oD(t){return t.__v_skip||!Object.isExtensible(t)?0:sD(OP(t))}function oh(t){return vl(t)?t:Hv(t,!1,GP,tD,mA)}function _A(t){return Hv(t,!1,YP,nD,gA)}function $v(t){return Hv(t,!0,KP,rD,yA)}function Hv(t,e,n,r,i){if(!_t(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=oD(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function el(t){return vl(t)?el(t.__v_raw):!!(t&&t.__v_isReactive)}function vl(t){return!!(t&&t.__v_isReadonly)}function lf(t){return!!(t&&t.__v_isShallow)}function vA(t){return el(t)||vl(t)}function rt(t){const e=t&&t.__v_raw;return e?rt(e):t}function kp(t){return Object.isExtensible(t)&&of(t,"__v_skip",!0),t}const yu=t=>_t(t)?oh(t):t,zv=t=>_t(t)?$v(t):t;class bA{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Lv(()=>e(this._value),()=>Hc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=rt(this);return(!e._cacheable||e.effect.dirty)&&Js(e._value,e._value=e.effect.run())&&Hc(e,4),jv(e),e.effect._dirtyLevel>=2&&Hc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function aD(t,e,n=!1){let r,i;const s=Pe(t);return s?(r=t,i=Rr):(r=t.get,i=t.set),new bA(r,i,s||!i,n)}function jv(t){var e;Bs&&Wo&&(t=rt(t),cA(Wo,(e=t.dep)!=null?e:t.dep=hA(()=>t.dep=void 0,t instanceof bA?t:void 0)))}function Hc(t,e=4,n){t=rt(t);const r=t.dep;r&&uA(r,e)}function un(t){return!!(t&&t.__v_isRef===!0)}function ae(t){return TA(t,!1)}function EA(t){return TA(t,!0)}function TA(t,e){return un(t)?t:new lD(t,e)}class lD{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:rt(e),this._value=n?e:yu(e)}get value(){return jv(this),this._value}set value(e){const n=this.__v_isShallow||lf(e)||vl(e);e=n?e:rt(e),Js(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:yu(e),Hc(this,4))}}function K(t){return un(t)?t.value:t}function Ui(t){return Pe(t)?t():K(t)}const cD={get:(t,e,n)=>K(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return un(i)&&!un(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function wA(t){return el(t)?t:new Proxy(t,cD)}class uD{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>jv(this),()=>Hc(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function SA(t){return new uD(t)}class hD{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return HP(rt(this._object),this._key)}}class dD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function fD(t,e,n){return un(t)?t:Pe(t)?new dD(t):_t(t)&&arguments.length>1?pD(t,e,n):ae(t)}function pD(t,e,n){const r=t[e];return un(r)?r:new hD(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $s(t,e,n,r){try{return r?t(...r):t()}catch(i){ah(i,e,n)}}function Mr(t,e,n,r){if(Pe(t)){const s=$s(t,e,n,r);return s&&Pv(s)&&s.catch(o=>{ah(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Mr(t[s],e,n,r));return i}function ah(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){$s(l,null,10,[t,o,a]);return}}mD(t,n,i,r)}function mD(t,e,n,r=!0){console.error(t)}let _u=!1,Iy=!1;const Dn=[];let ii=0;const tl=[];let Ts=null,ko=0;const IA=Promise.resolve();let Wv=null;function Gl(t){const e=Wv||IA;return t?e.then(this?t.bind(this):t):e}function gD(t){let e=ii+1,n=Dn.length;for(;e<n;){const r=e+n>>>1,i=Dn[r],s=vu(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function qv(t){(!Dn.length||!Dn.includes(t,_u&&t.allowRecurse?ii+1:ii))&&(t.id==null?Dn.push(t):Dn.splice(gD(t.id),0,t),AA())}function AA(){!_u&&!Iy&&(Iy=!0,Wv=IA.then(kA))}function yD(t){const e=Dn.indexOf(t);e>ii&&Dn.splice(e,1)}function Ay(t){Ie(t)?tl.push(...t):(!Ts||!Ts.includes(t,t.allowRecurse?ko+1:ko))&&tl.push(t),AA()}function zb(t,e,n=_u?ii+1:0){for(;n<Dn.length;n++){const r=Dn[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Dn.splice(n,1),n--,r()}}}function CA(t){if(tl.length){const e=[...new Set(tl)].sort((n,r)=>vu(n)-vu(r));if(tl.length=0,Ts){Ts.push(...e);return}for(Ts=e,ko=0;ko<Ts.length;ko++)Ts[ko]();Ts=null,ko=0}}const vu=t=>t.id==null?1/0:t.id,_D=(t,e)=>{const n=vu(t)-vu(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function kA(t){Iy=!1,_u=!0,Dn.sort(_D);try{for(ii=0;ii<Dn.length;ii++){const e=Dn[ii];e&&e.active!==!1&&$s(e,null,14)}}finally{ii=0,Dn.length=0,CA(),_u=!1,Wv=null,(Dn.length||tl.length)&&kA()}}function vD(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||wt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||wt;d&&(i=n.map(f=>Bt(f)?f.trim():f)),h&&(i=n.map(Ey))}let a,l=r[a=Ym(e)]||r[a=Ym(Ti(e))];!l&&s&&(l=r[a=Ym(va(e))]),l&&Mr(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Mr(c,t,6,i)}}function RA(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Pe(t)){const l=c=>{const u=RA(c,e,!0);u&&(a=!0,Xt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(_t(t)&&r.set(t,null),null):(Ie(s)?s.forEach(l=>o[l]=null):Xt(o,s),_t(t)&&r.set(t,o),o)}function Rp(t,e){return!t||!Tp(e)?!1:(e=e.slice(2).replace(/Once$/,""),nt(t,e[0].toLowerCase()+e.slice(1))||nt(t,va(e))||nt(t,e))}let Qt=null,Op=null;function cf(t){const e=Qt;return Qt=t,Op=t&&t.type.__scopeId||null,e}function Kl(t){Op=t}function Yl(){Op=null}function lt(t,e=Qt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&sE(-1);const s=cf(e);let o;try{o=t(...i)}finally{cf(s),r._d&&sE(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Qm(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=t;let g,y;const _=cf(t);try{if(n.shapeFlag&4){const w=i||r,S=w;g=Ur(u.call(S,w,h,s,f,d,p)),y=l}else{const w=e;g=Ur(w.length>1?w(s,{attrs:l,slots:a,emit:c}):w(s,null)),y=e.props?l:ED(l)}}catch(w){Gc.length=0,ah(w,t,1),g=Ee(tr)}let v=g;if(y&&m!==!1){const w=Object.keys(y),{shapeFlag:S}=v;w.length&&S&7&&(o&&w.some(Nv)&&(y=TD(y,o)),v=Xs(v,y))}return n.dirs&&(v=Xs(v),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&(v.transition=n.transition),g=v,cf(_),g}function bD(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Eu(i)){if(i.type!==tr||i.children==="v-if"){if(n)return;n=i}}else return}return n}const ED=t=>{let e;for(const n in t)(n==="class"||n==="style"||Tp(n))&&((e||(e={}))[n]=t[n]);return e},TD=(t,e)=>{const n={};for(const r in t)(!Nv(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function wD(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?jb(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!Rp(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?jb(r,o,c):!0:!!o;return!1}function jb(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Rp(n,s))return!0}return!1}function Gv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const OA="components";function vr(t,e){return ID(OA,t,!0,e)||t}const SD=Symbol.for("v-ndc");function ID(t,e,n=!0,r=!1){const i=Qt||Tn;if(i){const s=i.type;if(t===OA){const a=Ax(s,!1);if(a&&(a===e||a===Ti(e)||a===Ip(Ti(e))))return s}const o=Wb(i[t]||s[t],e)||Wb(i.appContext[t],e);return!o&&r?s:o}}function Wb(t,e){return t&&(t[e]||t[Ti(e)]||t[Ip(Ti(e))])}const AD=t=>t.__isSuspense;let Cy=0;const CD={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)kD(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}RD(t,e,n,r,i,o,a,l,c)}},hydrate:OD,create:Kv,normalize:ND},qb=CD;function bu(t,e){const n=t.props&&t.props[e];Pe(n)&&n()}function kD(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:u}}=l,h=u("div"),d=t.suspense=Kv(t,i,r,e,h,n,s,o,a,l);c(null,d.pendingBranch=t.ssContent,h,null,r,d,s,o),d.deps>0?(bu(t,"onPending"),bu(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),nl(d,t.ssFallback)):d.resolve(!1,!0)}function RD(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:y}=h;if(m)h.pendingBranch=d,si(d,m)?(l(m,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():g&&(y||(l(p,f,n,r,i,null,s,o,a),nl(h,f)))):(h.pendingId=Cy++,y?(h.isHydrating=!1,h.activeBranch=m):c(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),g?(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():(l(p,f,n,r,i,null,s,o,a),nl(h,f))):p&&si(d,p)?(l(p,d,n,r,i,h,s,o,a),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0&&h.resolve()));else if(p&&si(d,p))l(p,d,n,r,i,h,s,o,a),nl(h,d);else if(bu(e,"onPending"),h.pendingBranch=d,d.shapeFlag&512?h.pendingId=d.component.suspenseId:h.pendingId=Cy++,l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0)h.resolve();else{const{timeout:_,pendingId:v}=h;_>0?setTimeout(()=>{h.pendingId===v&&h.fallback(f)},_):_===0&&h.fallback(f)}}function Kv(t,e,n,r,i,s,o,a,l,c,u=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:m,remove:g}}=c;let y;const _=PD(t);_&&e!=null&&e.pendingBranch&&(y=e.pendingId,e.deps++);const v=t.props?ZI(t.props.timeout):void 0,w=s,S={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Cy++,timeout:typeof v=="number"?v:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(A=!1,P=!1){const{vnode:M,activeBranch:k,pendingBranch:z,pendingId:Y,effects:j,parentComponent:U,container:L}=S;let D=!1;S.isHydrating?S.isHydrating=!1:A||(D=k&&z.transition&&z.transition.mode==="out-in",D&&(k.transition.afterLeave=()=>{Y===S.pendingId&&(d(z,L,s===w?p(k):s,0),Ay(j))}),k&&(m(k.el)!==S.hiddenContainer&&(s=p(k)),f(k,U,S,!0)),D||d(z,L,s,0)),nl(S,z),S.pendingBranch=null,S.isInFallback=!1;let C=S.parent,V=!1;for(;C;){if(C.pendingBranch){C.effects.push(...j),V=!0;break}C=C.parent}!V&&!D&&Ay(j),S.effects=[],_&&e&&e.pendingBranch&&y===e.pendingId&&(e.deps--,e.deps===0&&!P&&e.resolve()),bu(M,"onResolve")},fallback(A){if(!S.pendingBranch)return;const{vnode:P,activeBranch:M,parentComponent:k,container:z,namespace:Y}=S;bu(P,"onFallback");const j=p(M),U=()=>{S.isInFallback&&(h(null,A,z,j,k,null,Y,a,l),nl(S,A))},L=A.transition&&A.transition.mode==="out-in";L&&(M.transition.afterLeave=U),S.isInFallback=!0,f(M,k,null,!0),L||U()},move(A,P,M){S.activeBranch&&d(S.activeBranch,A,P,M),S.container=A},next(){return S.activeBranch&&p(S.activeBranch)},registerDep(A,P){const M=!!S.pendingBranch;M&&S.deps++;const k=A.vnode.el;A.asyncDep.catch(z=>{ah(z,A,0)}).then(z=>{if(A.isUnmounted||S.isUnmounted||S.pendingId!==A.suspenseId)return;A.asyncResolved=!0;const{vnode:Y}=A;Fy(A,z,!1),k&&(Y.el=k);const j=!k&&A.subTree.el;P(A,Y,m(k||A.subTree.el),k?null:p(A.subTree),S,o,l),j&&g(j),Gv(A,Y.el),M&&--S.deps===0&&S.resolve()})},unmount(A,P){S.isUnmounted=!0,S.activeBranch&&f(S.activeBranch,n,A,P),S.pendingBranch&&f(S.pendingBranch,n,A,P)}};return S}function OD(t,e,n,r,i,s,o,a,l){const c=e.suspense=Kv(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),u}function ND(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Gb(r?n.default:n),t.ssFallback=r?Gb(n.fallback):Ee(tr)}function Gb(t){let e;if(Pe(t)){const n=bl&&t._c;n&&(t._d=!1,R()),t=t(),n&&(t._d=!0,e=Or,YA())}return Ie(t)&&(t=bD(t)),t=Ur(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function MD(t,e){e&&e.pendingBranch?Ie(t)?e.effects.push(...t):e.effects.push(t):Ay(t)}function nl(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Gv(r,i))}function PD(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}const DD=Symbol.for("v-scx"),xD=()=>er(DD);function NA(t,e){return Yv(t,null,e)}const Zh={};function Qi(t,e,n){return Yv(t,e,n)}function Yv(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=wt){if(e&&s){const A=e;e=(...P)=>{A(...P),S()}}const l=Tn,c=A=>r===!0?A:Po(A,r===!1?1:void 0);let u,h=!1,d=!1;if(un(t)?(u=()=>t.value,h=lf(t)):el(t)?(u=()=>c(t),h=!0):Ie(t)?(d=!0,h=t.some(A=>el(A)||lf(A)),u=()=>t.map(A=>{if(un(A))return A.value;if(el(A))return c(A);if(Pe(A))return $s(A,l,2)})):Pe(t)?e?u=()=>$s(t,l,2):u=()=>(f&&f(),Mr(t,l,3,[p])):u=Rr,e&&r){const A=u;u=()=>Po(A())}let f,p=A=>{f=v.onStop=()=>{$s(A,l,4),f=v.onStop=void 0}},m;if(Lp)if(p=Rr,e?n&&Mr(e,l,3,[u(),d?[]:void 0,p]):u(),i==="sync"){const A=xD();m=A.__watcherHandles||(A.__watcherHandles=[])}else return Rr;let g=d?new Array(t.length).fill(Zh):Zh;const y=()=>{if(!(!v.active||!v.dirty))if(e){const A=v.run();(r||h||(d?A.some((P,M)=>Js(P,g[M])):Js(A,g)))&&(f&&f(),Mr(e,l,3,[A,g===Zh?void 0:d&&g[0]===Zh?[]:g,p]),g=A)}else v.run()};y.allowRecurse=!!e;let _;i==="sync"?_=y:i==="post"?_=()=>Qn(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),_=()=>qv(y));const v=new Lv(u,Rr,_),w=xv(),S=()=>{v.stop(),w&&Mv(w.effects,v)};return e?n?y():g=v.run():i==="post"?Qn(v.run.bind(v),l&&l.suspense):v.run(),m&&m.push(S),S}function LD(t,e,n){const r=this.proxy,i=Bt(t)?t.includes(".")?MA(r,t):()=>r[t]:t.bind(r,r);let s;Pe(e)?s=e:(s=e.handler,n=e);const o=ia(this),a=Yv(i,s.bind(r),n);return o(),a}function MA(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Po(t,e,n=0,r){if(!_t(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),un(t))Po(t.value,e,n,r);else if(Ie(t))for(let i=0;i<t.length;i++)Po(t[i],e,n,r);else if(wp(t)||Za(t))t.forEach(i=>{Po(i,e,n,r)});else if(XI(t))for(const i in t)Po(t[i],e,n,r);return t}function zt(t,e){if(Qt===null)return t;const n=Vp(Qt)||Qt.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=wt]=e[i];s&&(Pe(s)&&(s={mounted:s,updated:s}),s.deep&&Po(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function vo(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(ba(),Mr(l,n,8,[t.el,a,t,e]),Ea())}}const ws=Symbol("_leaveCb"),ed=Symbol("_enterCb");function VD(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return lh(()=>{t.isMounted=!0}),ch(()=>{t.isUnmounting=!0}),t}const Sr=[Function,Array],PA={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Sr,onEnter:Sr,onAfterEnter:Sr,onEnterCancelled:Sr,onBeforeLeave:Sr,onLeave:Sr,onAfterLeave:Sr,onLeaveCancelled:Sr,onBeforeAppear:Sr,onAppear:Sr,onAfterAppear:Sr,onAppearCancelled:Sr},FD={name:"BaseTransition",props:PA,setup(t,{slots:e}){const n=Ta(),r=VD();return()=>{const i=e.default&&xA(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const d of i)if(d.type!==tr){s=d;break}}const o=rt(t),{mode:a}=o;if(r.isLeaving)return Xm(s);const l=Kb(s);if(!l)return Xm(s);const c=ky(l,o,r,n);Ry(l,c);const u=n.subTree,h=u&&Kb(u);if(h&&h.type!==tr&&!si(l,h)){const d=ky(h,o,r,n);if(Ry(h,d),a==="out-in")return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Xm(s);a==="in-out"&&l.type!==tr&&(d.delayLeave=(f,p,m)=>{const g=DA(r,h);g[String(h.key)]=h,f[ws]=()=>{p(),f[ws]=void 0,delete c.delayedLeave},c.delayedLeave=m})}return s}}},UD=FD;function DA(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function ky(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:y,onAppearCancelled:_}=e,v=String(t.key),w=DA(n,t),S=(M,k)=>{M&&Mr(M,r,9,k)},A=(M,k)=>{const z=k[1];S(M,k),Ie(M)?M.every(Y=>Y.length<=1)&&z():M.length<=1&&z()},P={mode:s,persisted:o,beforeEnter(M){let k=a;if(!n.isMounted)if(i)k=m||a;else return;M[ws]&&M[ws](!0);const z=w[v];z&&si(t,z)&&z.el[ws]&&z.el[ws](),S(k,[M])},enter(M){let k=l,z=c,Y=u;if(!n.isMounted)if(i)k=g||l,z=y||c,Y=_||u;else return;let j=!1;const U=M[ed]=L=>{j||(j=!0,L?S(Y,[M]):S(z,[M]),P.delayedLeave&&P.delayedLeave(),M[ed]=void 0)};k?A(k,[M,U]):U()},leave(M,k){const z=String(t.key);if(M[ed]&&M[ed](!0),n.isUnmounting)return k();S(h,[M]);let Y=!1;const j=M[ws]=U=>{Y||(Y=!0,k(),U?S(p,[M]):S(f,[M]),M[ws]=void 0,w[z]===t&&delete w[z])};w[z]=t,d?A(d,[M,j]):j()},clone(M){return ky(M,e,n,r)}};return P}function Xm(t){if(Np(t))return t=Xs(t),t.children=null,t}function Kb(t){return Np(t)?t.children?t.children[0]:void 0:t}function Ry(t,e){t.shapeFlag&6&&t.component?Ry(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xA(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===se?(o.patchFlag&128&&i++,r=r.concat(xA(o.children,e,a))):(e||o.type!==tr)&&r.push(a!=null?Xs(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ut(t,e){return Pe(t)?Xt({name:t.name},e,{setup:t}):t}const zc=t=>!!t.type.__asyncLoader,Np=t=>t.type.__isKeepAlive;function BD(t,e){LA(t,"a",e)}function $D(t,e){LA(t,"da",e)}function LA(t,e,n=Tn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Mp(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Np(i.parent.vnode)&&HD(r,e,n,i),i=i.parent}}function HD(t,e,n,r){const i=Mp(e,t,r,!0);VA(()=>{Mv(r[e],i)},n)}function Mp(t,e,n=Tn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;ba();const a=ia(n),l=Mr(e,n,t,o);return a(),Ea(),l});return r?i.unshift(s):i.push(s),s}}const cs=t=>(e,n=Tn)=>(!Lp||t==="sp")&&Mp(t,(...r)=>e(...r),n),zD=cs("bm"),lh=cs("m"),jD=cs("bu"),WD=cs("u"),ch=cs("bum"),VA=cs("um"),FA=cs("sp"),qD=cs("rtg"),GD=cs("rtc");function KD(t,e=Tn){Mp("ec",t,e)}function at(t,e,n,r){let i;const s=n&&n[r];if(Ie(t)||Bt(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(_t(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function nn(t,e,n={},r,i){if(Qt.isCE||Qt.parent&&zc(Qt.parent)&&Qt.parent.isCE)return e!=="default"&&(n.name=e),Ee("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),R();const o=s&&UA(s(n)),a=qe(se,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function UA(t){return t.some(e=>Eu(e)?!(e.type===tr||e.type===se&&!UA(e.children)):!0)?t:null}const Oy=t=>t?XA(t)?Vp(t)||t.proxy:Oy(t.parent):null,jc=Xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Oy(t.parent),$root:t=>Oy(t.root),$emit:t=>t.emit,$options:t=>Jv(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,qv(t.update)}),$nextTick:t=>t.n||(t.n=Gl.bind(t.proxy)),$watch:t=>LD.bind(t)}),Zm=(t,e)=>t!==wt&&!t.__isScriptSetup&&nt(t,e),YD={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Zm(r,e))return o[e]=1,r[e];if(i!==wt&&nt(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&nt(c,e))return o[e]=3,s[e];if(n!==wt&&nt(n,e))return o[e]=4,n[e];Ny&&(o[e]=0)}}const u=jc[e];let h,d;if(u)return e==="$attrs"&&rr(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==wt&&nt(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,nt(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Zm(i,e)?(i[e]=n,!0):r!==wt&&nt(r,e)?(r[e]=n,!0):nt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==wt&&nt(t,o)||Zm(e,o)||(a=s[0])&&nt(a,o)||nt(r,o)||nt(jc,o)||nt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:nt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Yb(t){return Ie(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function ir(t){const e=Ta();let n=t();return Vy(),Pv(n)&&(n=n.catch(r=>{throw ia(e),r})),[n,()=>ia(e)]}let Ny=!0;function JD(t){const e=Jv(t),n=t.proxy,r=t.ctx;Ny=!1,e.beforeCreate&&Jb(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:_,destroyed:v,unmounted:w,render:S,renderTracked:A,renderTriggered:P,errorCaptured:M,serverPrefetch:k,expose:z,inheritAttrs:Y,components:j,directives:U,filters:L}=e;if(c&&QD(c,r,null),o)for(const V in o){const $=o[V];Pe($)&&(r[V]=$.bind(n))}if(i){const V=i.call(n,n);_t(V)&&(t.data=oh(V))}if(Ny=!0,s)for(const V in s){const $=s[V],fe=Pe($)?$.bind(n,n):Pe($.get)?$.get.bind(n,n):Rr,be=!Pe($)&&Pe($.set)?$.set.bind(n):Rr,Ne=ct({get:fe,set:be});Object.defineProperty(r,V,{enumerable:!0,configurable:!0,get:()=>Ne.value,set:He=>Ne.value=He})}if(a)for(const V in a)BA(a[V],r,n,V);if(l){const V=Pe(l)?l.call(n):l;Reflect.ownKeys(V).forEach($=>{Ld($,V[$])})}u&&Jb(u,t,"c");function C(V,$){Ie($)?$.forEach(fe=>V(fe.bind(n))):$&&V($.bind(n))}if(C(zD,h),C(lh,d),C(jD,f),C(WD,p),C(BD,m),C($D,g),C(KD,M),C(GD,A),C(qD,P),C(ch,_),C(VA,w),C(FA,k),Ie(z))if(z.length){const V=t.exposed||(t.exposed={});z.forEach($=>{Object.defineProperty(V,$,{get:()=>n[$],set:fe=>n[$]=fe})})}else t.exposed||(t.exposed={});S&&t.render===Rr&&(t.render=S),Y!=null&&(t.inheritAttrs=Y),j&&(t.components=j),U&&(t.directives=U)}function QD(t,e,n=Rr){Ie(t)&&(t=My(t));for(const r in t){const i=t[r];let s;_t(i)?"default"in i?s=er(i.from||r,i.default,!0):s=er(i.from||r):s=er(i),un(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Jb(t,e,n){Mr(Ie(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function BA(t,e,n,r){const i=r.includes(".")?MA(n,r):()=>n[r];if(Bt(t)){const s=e[t];Pe(s)&&Qi(i,s)}else if(Pe(t))Qi(i,t.bind(n));else if(_t(t))if(Ie(t))t.forEach(s=>BA(s,e,n,r));else{const s=Pe(t.handler)?t.handler.bind(n):e[t.handler];Pe(s)&&Qi(i,s,t)}}function Jv(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>uf(l,c,o,!0)),uf(l,e,o)),_t(e)&&s.set(e,l),l}function uf(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&uf(t,s,n,!0),i&&i.forEach(o=>uf(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=XD[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const XD={data:Qb,props:Xb,emits:Xb,methods:Sc,computed:Sc,beforeCreate:Bn,created:Bn,beforeMount:Bn,mounted:Bn,beforeUpdate:Bn,updated:Bn,beforeDestroy:Bn,beforeUnmount:Bn,destroyed:Bn,unmounted:Bn,activated:Bn,deactivated:Bn,errorCaptured:Bn,serverPrefetch:Bn,components:Sc,directives:Sc,watch:ex,provide:Qb,inject:ZD};function Qb(t,e){return e?t?function(){return Xt(Pe(t)?t.call(this,this):t,Pe(e)?e.call(this,this):e)}:e:t}function ZD(t,e){return Sc(My(t),My(e))}function My(t){if(Ie(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Bn(t,e){return t?[...new Set([].concat(t,e))]:e}function Sc(t,e){return t?Xt(Object.create(null),t,e):e}function Xb(t,e){return t?Ie(t)&&Ie(e)?[...new Set([...t,...e])]:Xt(Object.create(null),Yb(t),Yb(e??{})):e}function ex(t,e){if(!t)return e;if(!e)return t;const n=Xt(Object.create(null),t);for(const r in e)n[r]=Bn(t[r],e[r]);return n}function $A(){return{app:null,config:{isNativeTag:kP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let tx=0;function nx(t,e){return function(r,i=null){Pe(r)||(r=Xt({},r)),i!=null&&!_t(i)&&(i=null);const s=$A(),o=new WeakSet;let a=!1;const l=s.app={_uid:tx++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:kx,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Pe(c.install)?(o.add(c),c.install(l,...u)):Pe(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=Ee(r,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Vp(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Wc;Wc=l;try{return c()}finally{Wc=u}}};return l}}let Wc=null;function Ld(t,e){if(Tn){let n=Tn.provides;const r=Tn.parent&&Tn.parent.provides;r===n&&(n=Tn.provides=Object.create(r)),n[t]=e}}function er(t,e,n=!1){const r=Tn||Qt;if(r||Wc){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Wc._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Pe(e)?e.call(r&&r.proxy):e}}function rx(t,e,n,r=!1){const i={},s={};of(s,Dp,1),t.propsDefaults=Object.create(null),HA(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:_A(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function ix(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=rt(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Rp(t.emitsOptions,d))continue;const f=e[d];if(l)if(nt(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const p=Ti(d);i[p]=Py(l,a,p,f,t,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{HA(t,e,i,s)&&(c=!0);let u;for(const h in a)(!e||!nt(e,h)&&((u=va(h))===h||!nt(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=Py(l,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!nt(e,h))&&(delete s[h],c=!0)}c&&Ji(t,"set","$attrs")}function HA(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if($c(l))continue;const c=e[l];let u;i&&nt(i,u=Ti(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:Rp(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=rt(n),c=a||wt;for(let u=0;u<s.length;u++){const h=s[u];n[h]=Py(i,l,h,c[h],t,!nt(c,h))}}return o}function Py(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=nt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Pe(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=ia(i);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===va(n))&&(r=!0))}return r}function zA(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Pe(t)){const u=h=>{l=!0;const[d,f]=zA(h,e,!0);Xt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return _t(t)&&r.set(t,Xa),Xa;if(Ie(s))for(let u=0;u<s.length;u++){const h=Ti(s[u]);Zb(h)&&(o[h]=wt)}else if(s)for(const u in s){const h=Ti(u);if(Zb(h)){const d=s[u],f=o[h]=Ie(d)||Pe(d)?{type:d}:Xt({},d);if(f){const p=nE(Boolean,f.type),m=nE(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||nt(f,"default"))&&a.push(h)}}}const c=[o,a];return _t(t)&&r.set(t,c),c}function Zb(t){return t[0]!=="$"&&!$c(t)}function eE(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function tE(t,e){return eE(t)===eE(e)}function nE(t,e){return Ie(e)?e.findIndex(n=>tE(n,t)):Pe(e)&&tE(e,t)?0:-1}const jA=t=>t[0]==="_"||t==="$stable",Qv=t=>Ie(t)?t.map(Ur):[Ur(t)],sx=(t,e,n)=>{if(e._n)return e;const r=lt((...i)=>Qv(e(...i)),n);return r._c=!1,r},WA=(t,e,n)=>{const r=t._ctx;for(const i in t){if(jA(i))continue;const s=t[i];if(Pe(s))e[i]=sx(i,s,r);else if(s!=null){const o=Qv(s);e[i]=()=>o}}},qA=(t,e)=>{const n=Qv(e);t.slots.default=()=>n},ox=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=rt(e),of(e,"_",n)):WA(e,t.slots={})}else t.slots={},e&&qA(t,e);of(t.slots,Dp,1)},ax=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=wt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Xt(i,e),!n&&a===1&&delete i._):(s=!e.$stable,WA(e,i)),o=e}else e&&(qA(t,e),o={default:1});if(s)for(const a in i)!jA(a)&&o[a]==null&&delete i[a]};function Dy(t,e,n,r,i=!1){if(Ie(t)){t.forEach((d,f)=>Dy(d,e&&(Ie(e)?e[f]:e),n,r,i));return}if(zc(r)&&!i)return;const s=r.shapeFlag&4?Vp(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===wt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Bt(c)?(u[c]=null,nt(h,c)&&(h[c]=null)):un(c)&&(c.value=null)),Pe(l))$s(l,a,12,[o,u]);else{const d=Bt(l),f=un(l);if(d||f){const p=()=>{if(t.f){const m=d?nt(h,l)?h[l]:u[l]:l.value;i?Ie(m)&&Mv(m,s):Ie(m)?m.includes(s)||m.push(s):d?(u[l]=[s],nt(h,l)&&(h[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,nt(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Qn(p,n)):p()}}}const Qn=MD;function lx(t){return cx(t)}function cx(t,e){const n=eA();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Rr,insertStaticContent:p}=t,m=(E,I,N,B=null,F=null,Z=null,ie=void 0,ee=null,oe=!!I.dynamicChildren)=>{if(E===I)return;E&&!si(E,I)&&(B=O(E),He(E,F,Z,!0),E=null),I.patchFlag===-2&&(oe=!1,I.dynamicChildren=null);const{type:X,ref:me,shapeFlag:Ce}=I;switch(X){case Pp:g(E,I,N,B);break;case tr:y(E,I,N,B);break;case Vd:E==null&&_(I,N,B,ie);break;case se:j(E,I,N,B,F,Z,ie,ee,oe);break;default:Ce&1?S(E,I,N,B,F,Z,ie,ee,oe):Ce&6?U(E,I,N,B,F,Z,ie,ee,oe):(Ce&64||Ce&128)&&X.process(E,I,N,B,F,Z,ie,ee,oe,J)}me!=null&&F&&Dy(me,E&&E.ref,Z,I||E,!I)},g=(E,I,N,B)=>{if(E==null)r(I.el=a(I.children),N,B);else{const F=I.el=E.el;I.children!==E.children&&c(F,I.children)}},y=(E,I,N,B)=>{E==null?r(I.el=l(I.children||""),N,B):I.el=E.el},_=(E,I,N,B)=>{[E.el,E.anchor]=p(E.children,I,N,B,E.el,E.anchor)},v=({el:E,anchor:I},N,B)=>{let F;for(;E&&E!==I;)F=d(E),r(E,N,B),E=F;r(I,N,B)},w=({el:E,anchor:I})=>{let N;for(;E&&E!==I;)N=d(E),i(E),E=N;i(I)},S=(E,I,N,B,F,Z,ie,ee,oe)=>{I.type==="svg"?ie="svg":I.type==="math"&&(ie="mathml"),E==null?A(I,N,B,F,Z,ie,ee,oe):k(E,I,F,Z,ie,ee,oe)},A=(E,I,N,B,F,Z,ie,ee)=>{let oe,X;const{props:me,shapeFlag:Ce,transition:Se,dirs:Le}=E;if(oe=E.el=o(E.type,Z,me&&me.is,me),Ce&8?u(oe,E.children):Ce&16&&M(E.children,oe,null,B,F,eg(E,Z),ie,ee),Le&&vo(E,null,B,"created"),P(oe,E,E.scopeId,ie,B),me){for(const mt in me)mt!=="value"&&!$c(mt)&&s(oe,mt,null,me[mt],Z,E.children,B,F,pt);"value"in me&&s(oe,"value",null,me.value,Z),(X=me.onVnodeBeforeMount)&&ni(X,B,E)}Le&&vo(E,null,B,"beforeMount");const We=ux(F,Se);We&&Se.beforeEnter(oe),r(oe,I,N),((X=me&&me.onVnodeMounted)||We||Le)&&Qn(()=>{X&&ni(X,B,E),We&&Se.enter(oe),Le&&vo(E,null,B,"mounted")},F)},P=(E,I,N,B,F)=>{if(N&&f(E,N),B)for(let Z=0;Z<B.length;Z++)f(E,B[Z]);if(F){let Z=F.subTree;if(I===Z){const ie=F.vnode;P(E,ie,ie.scopeId,ie.slotScopeIds,F.parent)}}},M=(E,I,N,B,F,Z,ie,ee,oe=0)=>{for(let X=oe;X<E.length;X++){const me=E[X]=ee?Ss(E[X]):Ur(E[X]);m(null,me,I,N,B,F,Z,ie,ee)}},k=(E,I,N,B,F,Z,ie)=>{const ee=I.el=E.el;let{patchFlag:oe,dynamicChildren:X,dirs:me}=I;oe|=E.patchFlag&16;const Ce=E.props||wt,Se=I.props||wt;let Le;if(N&&bo(N,!1),(Le=Se.onVnodeBeforeUpdate)&&ni(Le,N,I,E),me&&vo(I,E,N,"beforeUpdate"),N&&bo(N,!0),X?z(E.dynamicChildren,X,ee,N,B,eg(I,F),Z):ie||$(E,I,ee,null,N,B,eg(I,F),Z,!1),oe>0){if(oe&16)Y(ee,I,Ce,Se,N,B,F);else if(oe&2&&Ce.class!==Se.class&&s(ee,"class",null,Se.class,F),oe&4&&s(ee,"style",Ce.style,Se.style,F),oe&8){const We=I.dynamicProps;for(let mt=0;mt<We.length;mt++){const Rt=We[mt],tn=Ce[Rt],xr=Se[Rt];(xr!==tn||Rt==="value")&&s(ee,Rt,tn,xr,F,E.children,N,B,pt)}}oe&1&&E.children!==I.children&&u(ee,I.children)}else!ie&&X==null&&Y(ee,I,Ce,Se,N,B,F);((Le=Se.onVnodeUpdated)||me)&&Qn(()=>{Le&&ni(Le,N,I,E),me&&vo(I,E,N,"updated")},B)},z=(E,I,N,B,F,Z,ie)=>{for(let ee=0;ee<I.length;ee++){const oe=E[ee],X=I[ee],me=oe.el&&(oe.type===se||!si(oe,X)||oe.shapeFlag&70)?h(oe.el):N;m(oe,X,me,null,B,F,Z,ie,!0)}},Y=(E,I,N,B,F,Z,ie)=>{if(N!==B){if(N!==wt)for(const ee in N)!$c(ee)&&!(ee in B)&&s(E,ee,N[ee],null,ie,I.children,F,Z,pt);for(const ee in B){if($c(ee))continue;const oe=B[ee],X=N[ee];oe!==X&&ee!=="value"&&s(E,ee,X,oe,ie,I.children,F,Z,pt)}"value"in B&&s(E,"value",N.value,B.value,ie)}},j=(E,I,N,B,F,Z,ie,ee,oe)=>{const X=I.el=E?E.el:a(""),me=I.anchor=E?E.anchor:a("");let{patchFlag:Ce,dynamicChildren:Se,slotScopeIds:Le}=I;Le&&(ee=ee?ee.concat(Le):Le),E==null?(r(X,N,B),r(me,N,B),M(I.children||[],N,me,F,Z,ie,ee,oe)):Ce>0&&Ce&64&&Se&&E.dynamicChildren?(z(E.dynamicChildren,Se,N,F,Z,ie,ee),(I.key!=null||F&&I===F.subTree)&&Xv(E,I,!0)):$(E,I,N,me,F,Z,ie,ee,oe)},U=(E,I,N,B,F,Z,ie,ee,oe)=>{I.slotScopeIds=ee,E==null?I.shapeFlag&512?F.ctx.activate(I,N,B,ie,oe):L(I,N,B,F,Z,ie,oe):D(E,I,oe)},L=(E,I,N,B,F,Z,ie)=>{const ee=E.component=Ex(E,B,F);if(Np(E)&&(ee.ctx.renderer=J),Tx(ee),ee.asyncDep){if(F&&F.registerDep(ee,C),!E.el){const oe=ee.subTree=Ee(tr);y(null,oe,I,N)}}else C(ee,E,I,N,F,Z,ie)},D=(E,I,N)=>{const B=I.component=E.component;if(wD(E,I,N))if(B.asyncDep&&!B.asyncResolved){V(B,I,N);return}else B.next=I,yD(B.update),B.effect.dirty=!0,B.update();else I.el=E.el,B.vnode=I},C=(E,I,N,B,F,Z,ie)=>{const ee=()=>{if(E.isMounted){let{next:me,bu:Ce,u:Se,parent:Le,vnode:We}=E;{const Oa=GA(E);if(Oa){me&&(me.el=We.el,V(E,me,ie)),Oa.asyncDep.then(()=>{E.isUnmounted||ee()});return}}let mt=me,Rt;bo(E,!1),me?(me.el=We.el,V(E,me,ie)):me=We,Ce&&xd(Ce),(Rt=me.props&&me.props.onVnodeBeforeUpdate)&&ni(Rt,Le,me,We),bo(E,!0);const tn=Qm(E),xr=E.subTree;E.subTree=tn,m(xr,tn,h(xr.el),O(xr),E,F,Z),me.el=tn.el,mt===null&&Gv(E,tn.el),Se&&Qn(Se,F),(Rt=me.props&&me.props.onVnodeUpdated)&&Qn(()=>ni(Rt,Le,me,We),F)}else{let me;const{el:Ce,props:Se}=I,{bm:Le,m:We,parent:mt}=E,Rt=zc(I);if(bo(E,!1),Le&&xd(Le),!Rt&&(me=Se&&Se.onVnodeBeforeMount)&&ni(me,mt,I),bo(E,!0),Ce&&ge){const tn=()=>{E.subTree=Qm(E),ge(Ce,E.subTree,E,F,null)};Rt?I.type.__asyncLoader().then(()=>!E.isUnmounted&&tn()):tn()}else{const tn=E.subTree=Qm(E);m(null,tn,N,B,E,F,Z),I.el=tn.el}if(We&&Qn(We,F),!Rt&&(me=Se&&Se.onVnodeMounted)){const tn=I;Qn(()=>ni(me,mt,tn),F)}(I.shapeFlag&256||mt&&zc(mt.vnode)&&mt.vnode.shapeFlag&256)&&E.a&&Qn(E.a,F),E.isMounted=!0,I=N=B=null}},oe=E.effect=new Lv(ee,Rr,()=>qv(X),E.scope),X=E.update=()=>{oe.dirty&&oe.run()};X.id=E.uid,bo(E,!0),X()},V=(E,I,N)=>{I.component=E;const B=E.vnode.props;E.vnode=I,E.next=null,ix(E,I.props,B,N),ax(E,I.children,N),ba(),zb(E),Ea()},$=(E,I,N,B,F,Z,ie,ee,oe=!1)=>{const X=E&&E.children,me=E?E.shapeFlag:0,Ce=I.children,{patchFlag:Se,shapeFlag:Le}=I;if(Se>0){if(Se&128){be(X,Ce,N,B,F,Z,ie,ee,oe);return}else if(Se&256){fe(X,Ce,N,B,F,Z,ie,ee,oe);return}}Le&8?(me&16&&pt(X,F,Z),Ce!==X&&u(N,Ce)):me&16?Le&16?be(X,Ce,N,B,F,Z,ie,ee,oe):pt(X,F,Z,!0):(me&8&&u(N,""),Le&16&&M(Ce,N,B,F,Z,ie,ee,oe))},fe=(E,I,N,B,F,Z,ie,ee,oe)=>{E=E||Xa,I=I||Xa;const X=E.length,me=I.length,Ce=Math.min(X,me);let Se;for(Se=0;Se<Ce;Se++){const Le=I[Se]=oe?Ss(I[Se]):Ur(I[Se]);m(E[Se],Le,N,null,F,Z,ie,ee,oe)}X>me?pt(E,F,Z,!0,!1,Ce):M(I,N,B,F,Z,ie,ee,oe,Ce)},be=(E,I,N,B,F,Z,ie,ee,oe)=>{let X=0;const me=I.length;let Ce=E.length-1,Se=me-1;for(;X<=Ce&&X<=Se;){const Le=E[X],We=I[X]=oe?Ss(I[X]):Ur(I[X]);if(si(Le,We))m(Le,We,N,null,F,Z,ie,ee,oe);else break;X++}for(;X<=Ce&&X<=Se;){const Le=E[Ce],We=I[Se]=oe?Ss(I[Se]):Ur(I[Se]);if(si(Le,We))m(Le,We,N,null,F,Z,ie,ee,oe);else break;Ce--,Se--}if(X>Ce){if(X<=Se){const Le=Se+1,We=Le<me?I[Le].el:B;for(;X<=Se;)m(null,I[X]=oe?Ss(I[X]):Ur(I[X]),N,We,F,Z,ie,ee,oe),X++}}else if(X>Se)for(;X<=Ce;)He(E[X],F,Z,!0),X++;else{const Le=X,We=X,mt=new Map;for(X=We;X<=Se;X++){const or=I[X]=oe?Ss(I[X]):Ur(I[X]);or.key!=null&&mt.set(or.key,X)}let Rt,tn=0;const xr=Se-We+1;let Oa=!1,Nb=0;const hc=new Array(xr);for(X=0;X<xr;X++)hc[X]=0;for(X=Le;X<=Ce;X++){const or=E[X];if(tn>=xr){He(or,F,Z,!0);continue}let ti;if(or.key!=null)ti=mt.get(or.key);else for(Rt=We;Rt<=Se;Rt++)if(hc[Rt-We]===0&&si(or,I[Rt])){ti=Rt;break}ti===void 0?He(or,F,Z,!0):(hc[ti-We]=X+1,ti>=Nb?Nb=ti:Oa=!0,m(or,I[ti],N,null,F,Z,ie,ee,oe),tn++)}const Mb=Oa?hx(hc):Xa;for(Rt=Mb.length-1,X=xr-1;X>=0;X--){const or=We+X,ti=I[or],Pb=or+1<me?I[or+1].el:B;hc[X]===0?m(null,ti,N,Pb,F,Z,ie,ee,oe):Oa&&(Rt<0||X!==Mb[Rt]?Ne(ti,N,Pb,2):Rt--)}}},Ne=(E,I,N,B,F=null)=>{const{el:Z,type:ie,transition:ee,children:oe,shapeFlag:X}=E;if(X&6){Ne(E.component.subTree,I,N,B);return}if(X&128){E.suspense.move(I,N,B);return}if(X&64){ie.move(E,I,N,J);return}if(ie===se){r(Z,I,N);for(let Ce=0;Ce<oe.length;Ce++)Ne(oe[Ce],I,N,B);r(E.anchor,I,N);return}if(ie===Vd){v(E,I,N);return}if(B!==2&&X&1&&ee)if(B===0)ee.beforeEnter(Z),r(Z,I,N),Qn(()=>ee.enter(Z),F);else{const{leave:Ce,delayLeave:Se,afterLeave:Le}=ee,We=()=>r(Z,I,N),mt=()=>{Ce(Z,()=>{We(),Le&&Le()})};Se?Se(Z,We,mt):mt()}else r(Z,I,N)},He=(E,I,N,B=!1,F=!1)=>{const{type:Z,props:ie,ref:ee,children:oe,dynamicChildren:X,shapeFlag:me,patchFlag:Ce,dirs:Se}=E;if(ee!=null&&Dy(ee,null,N,E,!0),me&256){I.ctx.deactivate(E);return}const Le=me&1&&Se,We=!zc(E);let mt;if(We&&(mt=ie&&ie.onVnodeBeforeUnmount)&&ni(mt,I,E),me&6)Dt(E.component,N,B);else{if(me&128){E.suspense.unmount(N,B);return}Le&&vo(E,null,I,"beforeUnmount"),me&64?E.type.remove(E,I,N,F,J,B):X&&(Z!==se||Ce>0&&Ce&64)?pt(X,I,N,!1,!0):(Z===se&&Ce&384||!F&&me&16)&&pt(oe,I,N),B&&ht(E)}(We&&(mt=ie&&ie.onVnodeUnmounted)||Le)&&Qn(()=>{mt&&ni(mt,I,E),Le&&vo(E,null,I,"unmounted")},N)},ht=E=>{const{type:I,el:N,anchor:B,transition:F}=E;if(I===se){vt(N,B);return}if(I===Vd){w(E);return}const Z=()=>{i(N),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(E.shapeFlag&1&&F&&!F.persisted){const{leave:ie,delayLeave:ee}=F,oe=()=>ie(N,Z);ee?ee(E.el,Z,oe):oe()}else Z()},vt=(E,I)=>{let N;for(;E!==I;)N=d(E),i(E),E=N;i(I)},Dt=(E,I,N)=>{const{bum:B,scope:F,update:Z,subTree:ie,um:ee}=E;B&&xd(B),F.stop(),Z&&(Z.active=!1,He(ie,E,I,N)),ee&&Qn(ee,I),Qn(()=>{E.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},pt=(E,I,N,B=!1,F=!1,Z=0)=>{for(let ie=Z;ie<E.length;ie++)He(E[ie],I,N,B,F)},O=E=>E.shapeFlag&6?O(E.component.subTree):E.shapeFlag&128?E.suspense.next():d(E.anchor||E.el);let H=!1;const W=(E,I,N)=>{E==null?I._vnode&&He(I._vnode,null,null,!0):m(I._vnode||null,E,I,null,null,null,N),H||(H=!0,zb(),CA(),H=!1),I._vnode=E},J={p:m,um:He,m:Ne,r:ht,mt:L,mc:M,pc:$,pbc:z,n:O,o:t};let we,ge;return e&&([we,ge]=e(J)),{render:W,hydrate:we,createApp:nx(W,we)}}function eg({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function bo({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function ux(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Xv(t,e,n=!1){const r=t.children,i=e.children;if(Ie(r)&&Ie(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Ss(i[s]),a.el=o.el),n||Xv(o,a)),a.type===Pp&&(a.el=o.el)}}function hx(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function GA(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:GA(e)}const dx=t=>t.__isTeleport,qc=t=>t&&(t.disabled||t.disabled===""),rE=t=>typeof SVGElement<"u"&&t instanceof SVGElement,iE=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,xy=(t,e)=>{const n=t&&t.to;return Bt(n)?e?e(n):null:n},fx={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:m,createComment:g}}=c,y=qc(e.props);let{shapeFlag:_,children:v,dynamicChildren:w}=e;if(t==null){const S=e.el=m(""),A=e.anchor=m("");f(S,n,r),f(A,n,r);const P=e.target=xy(e.props,p),M=e.targetAnchor=m("");P&&(f(M,P),o==="svg"||rE(P)?o="svg":(o==="mathml"||iE(P))&&(o="mathml"));const k=(z,Y)=>{_&16&&u(v,z,Y,i,s,o,a,l)};y?k(n,A):P&&k(P,M)}else{e.el=t.el;const S=e.anchor=t.anchor,A=e.target=t.target,P=e.targetAnchor=t.targetAnchor,M=qc(t.props),k=M?n:A,z=M?S:P;if(o==="svg"||rE(A)?o="svg":(o==="mathml"||iE(A))&&(o="mathml"),w?(d(t.dynamicChildren,w,k,i,s,o,a),Xv(t,e,!0)):l||h(t,e,k,z,i,s,o,a,!1),y)M?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):td(e,n,S,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Y=e.target=xy(e.props,p);Y&&td(e,Y,null,c,0)}else M&&td(e,A,P,c,1)}KA(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:d}=t;if(h&&s(u),o&&s(c),a&16){const f=o||!qc(d);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,n,f,!!m.dynamicChildren)}}},move:td,hydrate:px};function td(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,h=s===2;if(h&&r(o,e,n),(!h||qc(u))&&l&16)for(let d=0;d<c.length;d++)i(c[d],e,n,2);h&&r(a,e,n)}function px(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=xy(e.props,l);if(u){const h=u._lpa||u.firstChild;if(e.shapeFlag&16)if(qc(e.props))e.anchor=c(o(t),e,a(t),n,r,i,s),e.targetAnchor=h;else{e.anchor=o(t);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(h,e,u,n,r,i,s)}KA(e)}return e.anchor&&o(e.anchor)}const mx=fx;function KA(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const se=Symbol.for("v-fgt"),Pp=Symbol.for("v-txt"),tr=Symbol.for("v-cmt"),Vd=Symbol.for("v-stc"),Gc=[];let Or=null;function R(t=!1){Gc.push(Or=t?null:[])}function YA(){Gc.pop(),Or=Gc[Gc.length-1]||null}let bl=1;function sE(t){bl+=t}function JA(t){return t.dynamicChildren=bl>0?Or||Xa:null,YA(),bl>0&&Or&&Or.push(t),t}function x(t,e,n,r,i,s){return JA(b(t,e,n,r,i,s,!0))}function qe(t,e,n,r,i){return JA(Ee(t,e,n,r,i,!0))}function Eu(t){return t?t.__v_isVNode===!0:!1}function si(t,e){return t.type===e.type&&t.key===e.key}const Dp="__vInternal",QA=({key:t})=>t??null,Fd=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Bt(t)||un(t)||Pe(t)?{i:Qt,r:t,k:e,f:!!n}:t:null);function b(t,e=null,n=null,r=0,i=null,s=t===se?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&QA(e),ref:e&&Fd(e),scopeId:Op,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Qt};return a?(Zv(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Bt(n)?8:16),bl>0&&!o&&Or&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Or.push(l),l}const Ee=gx;function gx(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===SD)&&(t=tr),Eu(t)){const a=Xs(t,e,!0);return n&&Zv(a,n),bl>0&&!s&&Or&&(a.shapeFlag&6?Or[Or.indexOf(t)]=a:Or.push(a)),a.patchFlag|=-2,a}if(Cx(t)&&(t=t.__vccOpts),e){e=yx(e);let{class:a,style:l}=e;a&&!Bt(a)&&(e.class=Qs(a)),_t(l)&&(vA(l)&&!Ie(l)&&(l=Xt({},l)),e.style=Wn(l))}const o=Bt(t)?1:AD(t)?128:dx(t)?64:_t(t)?4:Pe(t)?2:0;return b(t,e,n,r,i,o,s,!0)}function yx(t){return t?vA(t)||Dp in t?Xt({},t):t:null}function Xs(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?_x(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&QA(a),ref:e&&e.ref?n&&i?Ie(i)?i.concat(Fd(e)):[i,Fd(e)]:Fd(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==se?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Xs(t.ssContent),ssFallback:t.ssFallback&&Xs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function te(t=" ",e=0){return Ee(Pp,null,t,e)}function xp(t,e){const n=Ee(Vd,null,t);return n.staticCount=e,n}function ce(t="",e=!1){return e?(R(),qe(tr,null,t)):Ee(tr,null,t)}function Ur(t){return t==null||typeof t=="boolean"?Ee(tr):Ie(t)?Ee(se,null,t.slice()):typeof t=="object"?Ss(t):Ee(Pp,null,String(t))}function Ss(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Xs(t)}function Zv(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ie(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Zv(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Dp in e)?e._ctx=Qt:i===3&&Qt&&(Qt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pe(e)?(e={default:e,_ctx:Qt},n=32):(e=String(e),r&64?(n=16,e=[te(e)]):n=8);t.children=e,t.shapeFlag|=n}function _x(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Qs([e.class,r.class]));else if(i==="style")e.style=Wn([e.style,r.style]);else if(Tp(i)){const s=e[i],o=r[i];o&&s!==o&&!(Ie(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function ni(t,e,n,r=null){Mr(t,e,7,[n,r])}const vx=$A();let bx=0;function Ex(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||vx,s={uid:bx++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new iA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zA(r,i),emitsOptions:RA(r,i),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:r.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=vD.bind(null,s),t.ce&&t.ce(s),s}let Tn=null;const Ta=()=>Tn||Qt;let hf,Ly;{const t=eA(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};hf=e("__VUE_INSTANCE_SETTERS__",n=>Tn=n),Ly=e("__VUE_SSR_SETTERS__",n=>Lp=n)}const ia=t=>{const e=Tn;return hf(t),t.scope.on(),()=>{t.scope.off(),hf(e)}},Vy=()=>{Tn&&Tn.scope.off(),hf(null)};function XA(t){return t.vnode.shapeFlag&4}let Lp=!1;function Tx(t,e=!1){e&&Ly(e);const{props:n,children:r}=t.vnode,i=XA(t);rx(t,n,i,e),ox(t,r);const s=i?wx(t,e):void 0;return e&&Ly(!1),s}function wx(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=kp(new Proxy(t.ctx,YD));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?Ix(t):null,s=ia(t);ba();const o=$s(r,t,0,[t.props,i]);if(Ea(),s(),Pv(o)){if(o.then(Vy,Vy),e)return o.then(a=>{Fy(t,a,e)}).catch(a=>{ah(a,t,0)});t.asyncDep=o}else Fy(t,o,e)}else ZA(t,e)}function Fy(t,e,n){Pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:_t(e)&&(t.setupState=wA(e)),ZA(t,n)}let oE;function ZA(t,e,n){const r=t.type;if(!t.render){if(!e&&oE&&!r.render){const i=r.template||Jv(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Xt(Xt({isCustomElement:s,delimiters:a},o),l);r.render=oE(i,c)}}t.render=r.render||Rr}{const i=ia(t);ba();try{JD(t)}finally{Ea(),i()}}}function Sx(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return rr(t,"get","$attrs"),e[n]}}))}function Ix(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return Sx(t)},slots:t.slots,emit:t.emit,expose:e}}function Vp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(wA(kp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in jc)return jc[n](t)},has(e,n){return n in e||n in jc}}))}function Ax(t,e=!0){return Pe(t)?t.displayName||t.name:t.name||e&&t.__name}function Cx(t){return Pe(t)&&"__vccOpts"in t}const ct=(t,e)=>aD(t,e,Lp);function Go(t,e,n){const r=arguments.length;return r===2?_t(e)&&!Ie(e)?Eu(e)?Ee(t,null,[e]):Ee(t,e):Ee(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Eu(n)&&(n=[n]),Ee(t,e,n))}const kx="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Rx="http://www.w3.org/2000/svg",Ox="http://www.w3.org/1998/Math/MathML",Is=typeof document<"u"?document:null,aE=Is&&Is.createElement("template"),Nx={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Is.createElementNS(Rx,t):e==="mathml"?Is.createElementNS(Ox,t):Is.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Is.createTextNode(t),createComment:t=>Is.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Is.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{aE.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=aE.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ms="transition",dc="animation",Tu=Symbol("_vtc"),df=(t,{slots:e})=>Go(UD,Mx(t),e);df.displayName="Transition";const eC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};df.props=Xt({},PA,eC);const Eo=(t,e=[])=>{Ie(t)?t.forEach(n=>n(...e)):t&&t(...e)},lE=t=>t?Ie(t)?t.some(e=>e.length>1):t.length>1:!1;function Mx(t){const e={};for(const j in t)j in eC||(e[j]=t[j]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=Px(i),m=p&&p[0],g=p&&p[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:v,onLeave:w,onLeaveCancelled:S,onBeforeAppear:A=y,onAppear:P=_,onAppearCancelled:M=v}=e,k=(j,U,L)=>{To(j,U?u:a),To(j,U?c:o),L&&L()},z=(j,U)=>{j._isLeaving=!1,To(j,h),To(j,f),To(j,d),U&&U()},Y=j=>(U,L)=>{const D=j?P:_,C=()=>k(U,j,L);Eo(D,[U,C]),cE(()=>{To(U,j?l:s),gs(U,j?u:a),lE(D)||uE(U,r,m,C)})};return Xt(e,{onBeforeEnter(j){Eo(y,[j]),gs(j,s),gs(j,o)},onBeforeAppear(j){Eo(A,[j]),gs(j,l),gs(j,c)},onEnter:Y(!1),onAppear:Y(!0),onLeave(j,U){j._isLeaving=!0;const L=()=>z(j,U);gs(j,h),Lx(),gs(j,d),cE(()=>{j._isLeaving&&(To(j,h),gs(j,f),lE(w)||uE(j,r,g,L))}),Eo(w,[j,L])},onEnterCancelled(j){k(j,!1),Eo(v,[j])},onAppearCancelled(j){k(j,!0),Eo(M,[j])},onLeaveCancelled(j){z(j),Eo(S,[j])}})}function Px(t){if(t==null)return null;if(_t(t))return[tg(t.enter),tg(t.leave)];{const e=tg(t);return[e,e]}}function tg(t){return ZI(t)}function gs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Tu]||(t[Tu]=new Set)).add(e)}function To(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Tu];n&&(n.delete(e),n.size||(t[Tu]=void 0))}function cE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Dx=0;function uE(t,e,n,r){const i=t._endId=++Dx,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=xx(t,e);if(!o)return r();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,d),s()},d=f=>{f.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,d)}function xx(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${ms}Delay`),s=r(`${ms}Duration`),o=hE(i,s),a=r(`${dc}Delay`),l=r(`${dc}Duration`),c=hE(a,l);let u=null,h=0,d=0;e===ms?o>0&&(u=ms,h=o,d=s.length):e===dc?c>0&&(u=dc,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?ms:dc:null,d=u?u===ms?s.length:l.length:0);const f=u===ms&&/\b(transform|all)(,|$)/.test(r(`${ms}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function hE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>dE(n)+dE(t[r])))}function dE(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Lx(){return document.body.offsetHeight}function Vx(t,e,n){const r=t[Tu];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ff=Symbol("_vod"),tC=Symbol("_vsh"),fc={beforeMount(t,{value:e},{transition:n}){t[ff]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):pc(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),pc(t,!0),r.enter(t)):r.leave(t,()=>{pc(t,!1)}):pc(t,e))},beforeUnmount(t,{value:e}){pc(t,e)}};function pc(t,e){t.style.display=e?t[ff]:"none",t[tC]=!e}const Fx=Symbol(""),Ux=/(^|;)\s*display\s*:/;function Bx(t,e,n){const r=t.style,i=Bt(n);let s=!1;if(n&&!i){if(e)if(Bt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ud(r,a,"")}else for(const o in e)n[o]==null&&Ud(r,o,"");for(const o in n)o==="display"&&(s=!0),Ud(r,o,n[o])}else if(i){if(e!==n){const o=r[Fx];o&&(n+=";"+o),r.cssText=n,s=Ux.test(n)}}else e&&t.removeAttribute("style");ff in t&&(t[ff]=s?r.display:"",t[tC]&&(r.display="none"))}const fE=/\s*!important$/;function Ud(t,e,n){if(Ie(n))n.forEach(r=>Ud(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=$x(t,e);fE.test(n)?t.setProperty(va(r),n.replace(fE,""),"important"):t[r]=n}}const pE=["Webkit","Moz","ms"],ng={};function $x(t,e){const n=ng[e];if(n)return n;let r=Ti(e);if(r!=="filter"&&r in t)return ng[e]=r;r=Ip(r);for(let i=0;i<pE.length;i++){const s=pE[i]+r;if(s in t)return ng[e]=s}return e}const mE="http://www.w3.org/1999/xlink";function Hx(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(mE,e.slice(6,e.length)):t.setAttributeNS(mE,e,n);else{const s=FP(e);n==null||s&&!tA(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function zx(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=tA(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Ro(t,e,n,r){t.addEventListener(e,n,r)}function jx(t,e,n,r){t.removeEventListener(e,n,r)}const gE=Symbol("_vei");function Wx(t,e,n,r,i=null){const s=t[gE]||(t[gE]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=qx(e);if(r){const c=s[e]=Yx(r,i);Ro(t,a,c,l)}else o&&(jx(t,a,o,l),s[e]=void 0)}}const yE=/(?:Once|Passive|Capture)$/;function qx(t){let e;if(yE.test(t)){e={};let r;for(;r=t.match(yE);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):va(t.slice(2)),e]}let rg=0;const Gx=Promise.resolve(),Kx=()=>rg||(Gx.then(()=>rg=0),rg=Date.now());function Yx(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Mr(Jx(r,n.value),e,5,[r])};return n.value=t,n.attached=Kx(),n}function Jx(t,e){if(Ie(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const _E=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Qx=(t,e,n,r,i,s,o,a,l)=>{const c=i==="svg";e==="class"?Vx(t,r,c):e==="style"?Bx(t,n,r):Tp(e)?Nv(e)||Wx(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Xx(t,e,r,c))?zx(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Hx(t,e,r,c))};function Xx(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&_E(e)&&Pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return _E(e)&&Bt(n)?!1:e in t}const pf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ie(e)?n=>xd(e,n):e};function Zx(t){t.target.composing=!0}function vE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const rl=Symbol("_assign"),Ar={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[rl]=pf(i);const s=r||i.props&&i.props.type==="number";Ro(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Ey(a)),t[rl](a)}),n&&Ro(t,"change",()=>{t.value=t.value.trim()}),e||(Ro(t,"compositionstart",Zx),Ro(t,"compositionend",vE),Ro(t,"change",vE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[rl]=pf(s),t.composing)return;const o=i||t.type==="number"?Ey(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},Uy={deep:!0,created(t,e,n){t[rl]=pf(n),Ro(t,"change",()=>{const r=t._modelValue,i=e4(t),s=t.checked,o=t[rl];if(Ie(r)){const a=nA(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(wp(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(nC(t,s))})},mounted:bE,beforeUpdate(t,e,n){t[rl]=pf(n),bE(t,e,n)}};function bE(t,{value:e,oldValue:n},r){t._modelValue=e,Ie(e)?t.checked=nA(e,r.props.value)>-1:wp(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Ap(e,nC(t,!0)))}function e4(t){return"_value"in t?t._value:t.value}function nC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const t4=["ctrl","shift","alt","meta"],n4={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>t4.some(n=>t[`${n}Key`]&&!e.includes(n))},it=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=n4[e[o]];if(a&&a(i,e))return}return t(i,...s)})},r4={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Vr=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=va(i.key);if(e.some(o=>o===s||r4[o]===s))return t(i)})},i4=Xt({patchProp:Qx},Nx);let EE;function s4(){return EE||(EE=lx(i4))}const o4=(...t)=>{const e=s4().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=l4(r);if(!i)return;const s=e._component;!Pe(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,a4(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function a4(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function l4(t){return Bt(t)?document.querySelector(t):t}var c4=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const u4=Symbol();var TE;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(TE||(TE={}));function h4(){const t=sA(!0),e=t.run(()=>ae({}));let n=[],r=[];const i=kp({install(s){i._a=s,s.provide(u4,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!c4?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}var wE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=function(t,e){if(!t)throw Jl(e)},Jl=function(t){return new Error("Firebase Database ("+rC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},d4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Fp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new f4;const d=s<<2|a>>4;if(r.push(d),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sC=function(t){const e=iC(t);return Fp.encodeByteArray(e,!0)},mf=function(t){return sC(t).replace(/\./g,"")},gf=function(t){try{return Fp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t){return oC(void 0,t)}function oC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!m4(n)||(t[n]=oC(t[n],e[n]));return t}function m4(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=()=>g4().__FIREBASE_DEFAULTS__,_4=()=>{if(typeof process>"u"||typeof wE>"u")return;const t=wE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},v4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gf(t[1]);return e&&JSON.parse(e)},Up=()=>{try{return y4()||_4()||v4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b4=t=>{var e,n;return(n=(e=Up())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},E4=t=>{const e=b4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},aC=()=>{var t;return(t=Up())===null||t===void 0?void 0:t.config},T4=t=>{var e;return(e=Up())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mf(JSON.stringify(n)),mf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function S4(){var t;const e=(t=Up())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function I4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function A4(){const t=Yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cC(){return rC.NODE_ADMIN===!0}function C4(){return!S4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function t1(){try{return typeof indexedDB=="object"}catch{return!1}}function k4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4="FirebaseError";class Pi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=R4,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ql.prototype.create)}}class Ql{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?O4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Pi(i,a,r)}}function O4(t,e){return t.replace(N4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const N4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){return JSON.parse(t)}function wn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Su(gf(s[0])||""),n=Su(gf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},M4=function(t){const e=uC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},P4=function(t){const e=uC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function El(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function By(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Iu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(SE(s)&&SE(o)){if(!Iu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function SE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const d=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function x4(t,e){const n=new L4(t,e);return n.subscribe.bind(n)}class L4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");V4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ig),i.error===void 0&&(i.error=ig),i.complete===void 0&&(i.complete=ig);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ig(){}function F4(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,ue(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Bp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(H4(e))try{this.getOrInitializeService({instanceIdentifier:Io})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Io){return this.instances.has(e)}getOptions(e=Io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Io){return this.component?this.component.multipleInstances?e:Io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $4(t){return t===Io?void 0:t}function H4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new B4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const j4={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},W4=Ge.INFO,q4={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},G4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=q4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uh{constructor(e){this.name=e,this._logLevel=W4,this._logHandler=G4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const K4=(t,e)=>e.some(n=>t instanceof n);let IE,AE;function Y4(){return IE||(IE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function J4(){return AE||(AE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hC=new WeakMap,$y=new WeakMap,dC=new WeakMap,sg=new WeakMap,n1=new WeakMap;function Q4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hC.set(n,t)}).catch(()=>{}),n1.set(e,t),e}function X4(t){if($y.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});$y.set(t,e)}let Hy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $y.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Z4(t){Hy=t(Hy)}function e3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(og(this),e,...n);return dC.set(r,e.sort?e.sort():[e]),Hs(r)}:J4().includes(t)?function(...e){return t.apply(og(this),e),Hs(hC.get(this))}:function(...e){return Hs(t.apply(og(this),e))}}function t3(t){return typeof t=="function"?e3(t):(t instanceof IDBTransaction&&X4(t),K4(t,Y4())?new Proxy(t,Hy):t)}function Hs(t){if(t instanceof IDBRequest)return Q4(t);if(sg.has(t))return sg.get(t);const e=t3(t);return e!==t&&(sg.set(t,e),n1.set(e,t)),e}const og=t=>n1.get(t);function n3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Hs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hs(o.result),l.oldVersion,l.newVersion,Hs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const r3=["get","getKey","getAll","getAllKeys","count"],i3=["put","add","delete","clear"],ag=new Map;function CE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ag.get(e))return ag.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=i3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||r3.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return ag.set(e,s),s}Z4(t=>({...t,get:(e,n,r)=>CE(e,n)||t.get(e,n,r),has:(e,n)=>!!CE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(o3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function o3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zy="@firebase/app",kE="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new uh("@firebase/app"),a3="@firebase/app-compat",l3="@firebase/analytics-compat",c3="@firebase/analytics",u3="@firebase/app-check-compat",h3="@firebase/app-check",d3="@firebase/auth",f3="@firebase/auth-compat",p3="@firebase/database",m3="@firebase/database-compat",g3="@firebase/functions",y3="@firebase/functions-compat",_3="@firebase/installations",v3="@firebase/installations-compat",b3="@firebase/messaging",E3="@firebase/messaging-compat",T3="@firebase/performance",w3="@firebase/performance-compat",S3="@firebase/remote-config",I3="@firebase/remote-config-compat",A3="@firebase/storage",C3="@firebase/storage-compat",k3="@firebase/firestore",R3="@firebase/firestore-compat",O3="firebase",N3="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="[DEFAULT]",M3={[zy]:"fire-core",[a3]:"fire-core-compat",[c3]:"fire-analytics",[l3]:"fire-analytics-compat",[h3]:"fire-app-check",[u3]:"fire-app-check-compat",[d3]:"fire-auth",[f3]:"fire-auth-compat",[p3]:"fire-rtdb",[m3]:"fire-rtdb-compat",[g3]:"fire-fn",[y3]:"fire-fn-compat",[_3]:"fire-iid",[v3]:"fire-iid-compat",[b3]:"fire-fcm",[E3]:"fire-fcm-compat",[T3]:"fire-perf",[w3]:"fire-perf-compat",[S3]:"fire-rc",[I3]:"fire-rc-compat",[A3]:"fire-gcs",[C3]:"fire-gcs-compat",[k3]:"fire-fst",[R3]:"fire-fst-compat","fire-js":"fire-js",[O3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=new Map,P3=new Map,Wy=new Map;function RE(t,e){try{t.container.addComponent(e)}catch(n){sa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wi(t){const e=t.name;if(Wy.has(e))return sa.debug(`There were multiple attempts to register component ${e}.`),!1;Wy.set(e,t);for(const n of _f.values())RE(n,t);for(const n of P3.values())RE(n,t);return!0}function fC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zs=new Ql("app","Firebase",D3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=N3;function pC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw zs.create("bad-app-name",{appName:String(i)});if(n||(n=aC()),!n)throw zs.create("no-options");const s=_f.get(i);if(s){if(Iu(n,s.options)&&Iu(r,s.config))return s;throw zs.create("duplicate-app",{appName:i})}const o=new z4(i);for(const l of Wy.values())o.addComponent(l);const a=new x3(n,r,o);return _f.set(i,a),a}function mC(t=jy){const e=_f.get(t);if(!e&&t===jy&&aC())return pC();if(!e)throw zs.create("no-app",{appName:t});return e}function mr(t,e,n){var r;let i=(r=M3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sa.warn(a.join(" "));return}wi(new Yr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3="firebase-heartbeat-database",V3=1,Au="firebase-heartbeat-store";let lg=null;function gC(){return lg||(lg=n3(L3,V3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Au)}catch(n){console.warn(n)}}}}).catch(t=>{throw zs.create("idb-open",{originalErrorMessage:t.message})})),lg}async function F3(t){try{const n=(await gC()).transaction(Au),r=await n.objectStore(Au).get(yC(t));return await n.done,r}catch(e){if(e instanceof Pi)sa.warn(e.message);else{const n=zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sa.warn(n.message)}}}async function OE(t,e){try{const r=(await gC()).transaction(Au,"readwrite");await r.objectStore(Au).put(e,yC(t)),await r.done}catch(n){if(n instanceof Pi)sa.warn(n.message);else{const r=zs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sa.warn(r.message)}}}function yC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=1024,B3=30*24*60*60*1e3;class $3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=NE();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=B3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=NE(),{heartbeatsToSend:r,unsentEntries:i}=H3(this._heartbeatsCache.heartbeats),s=mf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function NE(){return new Date().toISOString().substring(0,10)}function H3(t,e=U3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ME(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ME(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t1()?k4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await F3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return OE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ME(t){return mf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(t){wi(new Yr("platform-logger",e=>new s3(e),"PRIVATE")),wi(new Yr("heartbeat",e=>new $3(e),"PRIVATE")),mr(zy,kE,t),mr(zy,kE,"esm2017"),mr("fire-js","")}j3("");function r1(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _C(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W3=_C,vC=new Ql("auth","Firebase",_C());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=new uh("@firebase/auth");function q3(t,...e){vf.logLevel<=Ge.WARN&&vf.warn(`Auth (${lo}): ${t}`,...e)}function Bd(t,...e){vf.logLevel<=Ge.ERROR&&vf.error(`Auth (${lo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t,...e){throw s1(t,...e)}function qr(t,...e){return s1(t,...e)}function i1(t,e,n){const r=Object.assign(Object.assign({},W3()),{[e]:n});return new Ql("auth","Firebase",r).create(e,{appName:t.name})}function Ko(t){return i1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Si(t,"argument-error"),i1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function s1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vC.create(t,...e)}function Ue(t,e,...n){if(!t)throw s1(e,...n)}function ji(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bd(e),new Error(e)}function ts(t,e){t||ji(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function K3(){return PE()==="http:"||PE()==="https:"}function PE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K3()||I4()||"connection"in navigator)?navigator.onLine:!0}function J3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.shortDelay=e,this.longDelay=n,ts(n>e,"Short delay should be less than long delay!"),this.isMobile=e1()||lC()}get(){return Y3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t,e){ts(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3=new hh(3e4,6e4);function a1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zl(t,e,n,r,i={}){return EC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Xl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),bC.fetch()(TC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function EC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Q3),e);try{const i=new eL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw nd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw nd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw i1(t,u,c);Si(t,u)}}catch(i){if(i instanceof Pi)throw i;Si(t,"network-request-failed",{message:String(i)})}}async function Z3(t,e,n,r,i={}){const s=await Zl(t,e,n,r,i);return"mfaPendingCredential"in s&&Si(t,"multi-factor-auth-required",{_serverResponse:s}),s}function TC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?o1(t.config,i):`${t.config.apiScheme}://${i}`}class eL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qr(this.auth,"network-request-failed")),X3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(t,e){return Zl(t,"POST","/v1/accounts:delete",e)}async function wC(t,e){return Zl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nL(t,e=!1){const n=hn(t),r=await n.getIdToken(e),i=l1(r);Ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Kc(cg(i.auth_time)),issuedAtTime:Kc(cg(i.iat)),expirationTime:Kc(cg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function cg(t){return Number(t)*1e3}function l1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const i=gf(n);return i?JSON.parse(i):(Bd("Failed to decode base64 JWT payload"),null)}catch(i){return Bd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function DE(t){const e=l1(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pi&&rL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function rL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Cu(t,wC(n,{idToken:r}));Ue(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?SC(s.providerUserInfo):[],a=oL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function sL(t){const e=hn(t);await bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SC(t){return t.map(e=>{var{providerId:n}=e,r=r1(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(t,e){const n=await EC(t,{},async()=>{const r=Xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=TC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",bC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lL(t,e){return Zl(t,"POST","/v2/accounts:revokeToken",a1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const n=DE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await aL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new il;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new il,this.toJSON())}_performRefresh(){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=r1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Cu(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nL(this,e)}reload(){return sL(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zi(this.auth.app))return Promise.reject(Ko(this.auth));const e=await this.getIdToken();return await Cu(this,tL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:w,isAnonymous:S,providerData:A,stsTokenManager:P}=n;Ue(v&&P,e,"internal-error");const M=il.fromJSON(this.name,P);Ue(typeof v=="string",e,"internal-error"),ys(h,e.name),ys(d,e.name),Ue(typeof w=="boolean",e,"internal-error"),Ue(typeof S=="boolean",e,"internal-error"),ys(f,e.name),ys(p,e.name),ys(m,e.name),ys(g,e.name),ys(y,e.name),ys(_,e.name);const k=new Wi({uid:v,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:S,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:M,createdAt:y,lastLoginAt:_});return A&&Array.isArray(A)&&(k.providerData=A.map(z=>Object.assign({},z))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new il;i.updateFromServerResponse(n);const s=new Wi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await bf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?SC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new il;a.updateFromIdToken(r);const l=new Wi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Gy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Map;function qi(t){ts(t instanceof Function,"Expected a class definition");let e=xE.get(t);return e?(ts(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IC.type="NONE";const LE=IC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t,e,n){return`firebase:${t}:${e}:${n}`}class sl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$d(this.userKey,i.apiKey,s),this.fullPersistenceKey=$d("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new sl(qi(LE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||qi(LE);const o=$d(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Wi._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new sl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new sl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OC(e))return"Blackberry";if(NC(e))return"Webos";if(c1(e))return"Safari";if((e.includes("chrome/")||CC(e))&&!e.includes("edge/"))return"Chrome";if(RC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function AC(t=Yt()){return/firefox\//i.test(t)}function c1(t=Yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CC(t=Yt()){return/crios\//i.test(t)}function kC(t=Yt()){return/iemobile/i.test(t)}function RC(t=Yt()){return/android/i.test(t)}function OC(t=Yt()){return/blackberry/i.test(t)}function NC(t=Yt()){return/webos/i.test(t)}function $p(t=Yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cL(t=Yt()){var e;return $p(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uL(){return A4()&&document.documentMode===10}function MC(t=Yt()){return $p(t)||RC(t)||NC(t)||OC(t)||/windows phone/i.test(t)||kC(t)}function hL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e=[]){let n;switch(t){case"Browser":n=VE(Yt());break;case"Worker":n=`${VE(Yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${lo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e={}){return Zl(t,"GET","/v2/passwordPolicy",a1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=6;class mL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FE(this),this.idTokenSubscription=new FE(this),this.beforeStateQueue=new dL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await sl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wC(this,{idToken:e}),r=await Wi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zi(this.app))return Promise.reject(Ko(this));const n=e?hn(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zi(this.app)?Promise.reject(Ko(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zi(this.app)?Promise.reject(Ko(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fL(this),n=new mL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ql("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await lL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qi(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await sl.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&q3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function u1(t){return hn(t)}class FE{constructor(e){this.auth=e,this.observer=null,this.addObserver=x4(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yL(t){h1=t}function _L(t){return h1.loadJS(t)}function vL(){return h1.gapiScript}function bL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t,e){const n=fC(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Iu(s,e??{}))return i;Si(i,"already-initialized")}return n.initialize({options:e})}function TL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ji("not implemented")}_getIdTokenResponse(e){return ji("not implemented")}_linkToIdToken(e,n){return ji("not implemented")}_getReauthenticationResolver(e){return ji("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t,e){return Z3(t,"POST","/v1/accounts:signInWithIdp",a1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="http://localhost";class oa extends DC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Si("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=r1(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new oa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ol(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ol(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ol(e,n)}buildRequest(){const e={requestUri:wL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends d1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends dh{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.FACEBOOK_SIGN_IN_METHOD="facebook.com";Os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oa._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $i.credential(n,r)}catch{return null}}}$i.GOOGLE_SIGN_IN_METHOD="google.com";$i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends dh{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.GITHUB_SIGN_IN_METHOD="github.com";Ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends dh{constructor(){super("twitter.com")}static credential(e,n){return oa._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ms.credential(n,r)}catch{return null}}}Ms.TWITTER_SIGN_IN_METHOD="twitter.com";Ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Wi._fromIdTokenResponse(e,r,i),o=UE(r);return new Tl({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=UE(r);return new Tl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function UE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends Pi{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ef.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ef(e,n,r,i)}}function xC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ef._fromErrorAndOperation(t,s,e,r):s})}async function SL(t,e,n=!1){const r=await Cu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Tl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IL(t,e,n=!1){const{auth:r}=t;if(zi(r.app))return Promise.reject(Ko(r));const i="reauthenticate";try{const s=await Cu(t,xC(r,i,e,t),n);Ue(s.idToken,r,"internal-error");const o=l1(s.idToken);Ue(o,r,"internal-error");const{sub:a}=o;return Ue(t.uid===a,r,"user-mismatch"),Tl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Si(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(t,e,n=!1){if(zi(t.app))return Promise.reject(Ko(t));const r="signIn",i=await xC(t,r,e),s=await Tl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function CL(t,e,n,r){return hn(t).onIdTokenChanged(e,n,r)}function kL(t){return hn(t).signOut()}const Tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(){const t=Yt();return c1(t)||$p(t)}const OL=1e3,NL=10;class VC extends LC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=RL()&&hL(),this.fallbackToPolling=MC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);uL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},OL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VC.type="LOCAL";const ML=VC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC extends LC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}FC.type="SESSION";const UC=FC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Hp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await PL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=f1("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function xL(t){gi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function LL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function FL(){return BC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="firebaseLocalStorageDb",UL=1,wf="firebaseLocalStorage",HC="fbase_key";class fh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zp(t,e){return t.transaction([wf],e?"readwrite":"readonly").objectStore(wf)}function BL(){const t=indexedDB.deleteDatabase($C);return new fh(t).toPromise()}function Ky(){const t=indexedDB.open($C,UL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wf,{keyPath:HC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wf)?e(r):(r.close(),await BL(),e(await Ky()))})})}async function BE(t,e,n){const r=zp(t,!0).put({[HC]:e,value:n});return new fh(r).toPromise()}async function $L(t,e){const n=zp(t,!1).get(e),r=await new fh(n).toPromise();return r===void 0?null:r.value}function $E(t,e){const n=zp(t,!0).delete(e);return new fh(n).toPromise()}const HL=800,zL=3;class zC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ky(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hp._getInstance(FL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await LL(),!this.activeServiceWorker)return;this.sender=new DL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ky();return await BE(e,Tf,"1"),await $E(e,Tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>BE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$L(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$E(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zp(i,!1).getAll();return new fh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zC.type="LOCAL";const jL=zC;new hh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t,e){return e?qi(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1 extends DC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ol(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ol(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ol(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WL(t){return AL(t.auth,new p1(t),t.bypassAuthState)}function qL(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),IL(n,new p1(t),t.bypassAuthState)}async function GL(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),SL(n,new p1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WL;case"linkViaPopup":case"linkViaRedirect":return GL;case"reauthViaPopup":case"reauthViaRedirect":return qL;default:Si(this.auth,"internal-error")}}resolve(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new hh(2e3,1e4);async function YL(t,e,n){if(zi(t.app))return Promise.reject(qr(t,"operation-not-supported-in-this-environment"));const r=u1(t);G3(t,e,d1);const i=jC(r,n);return new Do(r,"signInViaPopup",e,i).executeNotNull()}class Do extends WC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){ts(this.filter.length===1,"Popup operations only handle one event");const e=f1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KL.get())};e()}}Do.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="pendingRedirect",Hd=new Map;class QL extends WC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const r=await XL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XL(t,e){const n=t6(e),r=e6(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ZL(t,e){Hd.set(t._key(),e)}function e6(t){return qi(t._redirectPersistence)}function t6(t){return $d(JL,t.config.apiKey,t.name)}async function n6(t,e,n=!1){if(zi(t.app))return Promise.reject(Ko(t));const r=u1(t),i=jC(r,e),o=await new QL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=10*60*1e3;class i6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!qC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r6&&this.cachedEventUids.clear(),this.cachedEventUids.has(HE(e))}saveEventToCache(e){this.cachedEventUids.add(HE(e)),this.lastProcessedEventTime=Date.now()}}function HE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function s6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(t,e={}){return Zl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l6=/^https?/;async function c6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await o6(t);for(const n of e)try{if(u6(n))return}catch{}Si(t,"unauthorized-domain")}function u6(t){const e=qy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!l6.test(n))return!1;if(a6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=new hh(3e4,6e4);function zE(){const t=gi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function d6(t){return new Promise((e,n)=>{var r,i,s;function o(){zE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zE(),n(qr(t,"network-request-failed"))},timeout:h6.get()})}if(!((i=(r=gi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=gi().gapi)===null||s===void 0)&&s.load)o();else{const a=bL("iframefcb");return gi()[a]=()=>{gapi.load?o():n(qr(t,"network-request-failed"))},_L(`${vL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zd=null,e})}let zd=null;function f6(t){return zd=zd||d6(t),zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=new hh(5e3,15e3),m6="__/auth/iframe",g6="emulator/auth/iframe",y6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v6(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?o1(e,g6):`https://${t.config.authDomain}/${m6}`,r={apiKey:e.apiKey,appName:t.name,v:lo},i=_6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Xl(r).slice(1)}`}async function b6(t){const e=await f6(t),n=gi().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:v6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=qr(t,"network-request-failed"),a=gi().setTimeout(()=>{s(o)},p6.get());function l(){gi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T6=500,w6=600,S6="_blank",I6="http://localhost";class jE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A6(t,e,n,r=T6,i=w6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},E6),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Yt().toLowerCase();n&&(a=CC(c)?S6:n),AC(c)&&(e=e||I6,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(cL(c)&&a!=="_self")return C6(e||"",a),new jE(null);const h=window.open(e||"",a,u);Ue(h,t,"popup-blocked");try{h.focus()}catch{}return new jE(h)}function C6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6="__/auth/handler",R6="emulator/auth/handler",O6=encodeURIComponent("fac");async function WE(t,e,n,r,i,s){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:lo,eventId:i};if(e instanceof d1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",By(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof dh){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${O6}=${encodeURIComponent(l)}`:"";return`${N6(t)}?${Xl(a).slice(1)}${c}`}function N6({config:t}){return t.emulator?o1(t,R6):`https://${t.authDomain}/${k6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="webStorageSupport";class M6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=UC,this._completeRedirectFn=n6,this._overrideRedirectResult=ZL}async _openPopup(e,n,r,i){var s;ts((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await WE(e,n,r,qy(),i);return A6(e,o,f1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await WE(e,n,r,qy(),i);return xL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ts(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await b6(e),r=new i6(e);return n.register("authEvent",i=>(Ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ug,{type:ug},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[ug];o!==void 0&&n(!!o),Si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=c6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return MC()||c1()||$p()}}const P6=M6;var qE="@firebase/auth",GE="1.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L6(t){wi(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PC(t)},c=new gL(r,i,s,l);return TL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wi(new Yr("auth-internal",e=>{const n=u1(e.getProvider("auth").getImmediate());return(r=>new D6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(qE,GE,x6(t)),mr(qE,GE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=5*60;T4("authIdTokenMaxAge");function F6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=qr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",F6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L6("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new Map,B6={activated:!1,tokenObservers:[]};function Jr(t){return U6.get(t)||Object.assign({},B6)}const KE={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new wu,this.pending.promise.catch(n=>{}),await H6(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new wu,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function H6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Sf=new Ql("appCheck","AppCheck",z6);function GC(t){if(!Jr(t).activated)throw Sf.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6="firebase-app-check-database",W6=1,Yy="firebase-app-check-store";let rd=null;function q6(){return rd||(rd=new Promise((t,e)=>{try{const n=indexedDB.open(j6,W6);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Sf.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Yy,{keyPath:"compositeKey"})}}}catch(n){e(Sf.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),rd)}function G6(t,e){return K6(Y6(t),e)}async function K6(t,e){const r=(await q6()).transaction(Yy,"readwrite"),s=r.objectStore(Yy).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Sf.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function Y6(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=new uh("@firebase/app-check");function YE(t,e){return t1()?G6(t,e).catch(n=>{Jy.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6={error:"UNKNOWN_ERROR"};function Q6(t){return Fp.encodeString(JSON.stringify(t),!1)}async function Qy(t,e=!1){const n=t.app;GC(n);const r=Jr(n);let i=r.token,s;if(i&&!Ic(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(Ic(l)?i=l:await YE(n,void 0))}if(!e&&i&&Ic(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Jr(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Jy.warn(l.message):Jy.error(l),s=l}let a;return i?s?Ic(i)?a={token:i.token,internalError:s}:a=QE(s):(a={token:i.token},r.token=i,await YE(n,i)):a=QE(s),o&&t5(n,a),a}async function X6(t){const e=t.app;GC(e);const{provider:n}=Jr(e);{const{token:r}=await n.getToken();return{token:r}}}function Z6(t,e,n,r){const{app:i}=t,s=Jr(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ic(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),JE(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>JE(t))}function KC(t,e){const n=Jr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function JE(t){const{app:e}=t,n=Jr(e);let r=n.tokenRefresher;r||(r=e5(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function e5(t){const{app:e}=t;return new $6(async()=>{const n=Jr(e);let r;if(n.token?r=await Qy(t,!0):r=await Qy(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Jr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},KE.RETRIAL_MIN_WAIT,KE.RETRIAL_MAX_WAIT)}function t5(t,e){const n=Jr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ic(t){return t.expireTimeMillis-Date.now()>0}function QE(t){return{token:Q6(J6),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Jr(this.app);for(const n of e)KC(this.app,n.next);return Promise.resolve()}}function r5(t,e){return new n5(t,e)}function i5(t){return{getToken:e=>Qy(t,e),getLimitedUseToken:()=>X6(t),addTokenListener:e=>Z6(t,"INTERNAL",e),removeTokenListener:e=>KC(t.app,e)}}const s5="@firebase/app-check",o5="0.8.3",a5="app-check",XE="app-check-internal";function l5(){wi(new Yr(a5,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return r5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(XE).initialize()})),wi(new Yr(XE,t=>{const e=t.getProvider("app-check").getImmediate();return i5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),mr(s5,o5)}l5();var c5="firebase",u5="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mr(c5,u5,"app");const YC=Symbol("firebaseApp");function jp(t){return Ta()&&er(YC,null)||mC(t)}const li=()=>{},h5=typeof window<"u";function m1(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function d5(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,a)=>o&&o[a],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function wa(t){return!!t&&typeof t=="object"}const f5=Object.prototype;function p5(t){return wa(t)&&Object.getPrototypeOf(t)===f5}function g1(t){return wa(t)&&t.type==="document"}function m5(t){return wa(t)&&t.type==="collection"}function g5(t){return g1(t)||m5(t)}function y5(t){return wa(t)&&t.type==="query"}function _5(t){return wa(t)&&"ref"in t}function v5(t){return wa(t)&&typeof t.bucket=="string"}function b5(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const E5=Symbol.for("v-scx");function T5(){return!!er(E5,0)}const id=new WeakMap;function w5(t,e){if(!id.has(t)){const n=sA(!0);id.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),id.delete(t)}}return id.get(t)}const JC=new WeakMap;function S5(t){return JC.get(jp(t))}const sd=new WeakMap;function QC(t){const e=jp(t);if(!sd.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{sd.set(e,s),n(s.value)}];sd.set(e,i)}return sd.get(e)}function Di(t){const e=QC(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function I5(t,e){CL(e,n=>{const r=QC();t.value=n,Array.isArray(r)&&r[1](t)})}var ZE={};const eT="@firebase/database",tT="1.0.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XC="";function A5(t){XC=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Su(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return us(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new C5(e)}}catch{}return new k5},xo=ZC("localStorage"),Xy=ZC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=new uh("@firebase/database"),R5=function(){let t=1;return function(){return t++}}(),ek=function(t){const e=U4(t),n=new D4;n.update(e);const r=n.digest();return Fp.encodeByteArray(r)},ph=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ph.apply(null,r):typeof r=="object"?e+=wn(r):e+=r,e+=" "}return e};let Yo=null,nT=!0;const O5=function(t,e){ue(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(al.logLevel=Ge.VERBOSE,Yo=al.log.bind(al),e&&Xy.set("logging_enabled",!0)):typeof t=="function"?Yo=t:(Yo=null,Xy.remove("logging_enabled"))},Nn=function(...t){if(nT===!0&&(nT=!1,Yo===null&&Xy.get("logging_enabled")===!0&&O5(!0)),Yo){const e=ph.apply(null,t);Yo(e)}},mh=function(t){return function(...e){Nn(t,...e)}},Zy=function(...t){const e="FIREBASE INTERNAL ERROR: "+ph(...t);al.error(e)},aa=function(...t){const e=`FIREBASE FATAL ERROR: ${ph(...t)}`;throw al.error(e),new Error(e)},gr=function(...t){const e="FIREBASE WARNING: "+ph(...t);al.warn(e)},N5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&gr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},M5=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},wl="[MIN_NAME]",la="[MAX_NAME]",ec=function(t,e){if(t===e)return 0;if(t===wl||e===la)return-1;if(e===wl||t===la)return 1;{const n=rT(t),r=rT(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},P5=function(t,e){return t===e?0:t<e?-1:1},mc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wn(e))},y1=function(t){if(typeof t!="object"||t===null)return wn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=wn(e[r]),n+=":",n+=y1(t[e[r]]);return n+="}",n},nk=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Dr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const rk=function(t){ue(!tk(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},D5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},x5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},L5=new RegExp("^-?(0*)\\d{1,10}$"),V5=-2147483648,F5=2147483647,rT=function(t){if(L5.test(t)){const e=Number(t);if(e>=V5&&e<=F5)return e}return null},gh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw gr("Exception was thrown by user callback.",n),e},Math.floor(0))}},U5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){gr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gr(e)}}class e_{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}e_.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="5",ik="v",sk="s",ok="r",ak="f",lk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ck="ls",uk="p",t_="ac",hk="websocket",dk="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function z5(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function fk(t,e,n){ue(typeof e=="string","typeof type must == string"),ue(typeof n=="object","typeof params must == object");let r;if(e===hk)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===dk)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);z5(t)&&(n.ns=t.namespace);const i=[];return Dr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(){this.counters_={}}incrementCounter(e,n=1){us(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return p4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg={},dg={};function v1(t){const e=t.toString();return hg[e]||(hg[e]=new j5),hg[e]}function W5(t,e){const n=t.toString();return dg[n]||(dg[n]=e()),dg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&gh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="start",G5="close",K5="pLPCommand",Y5="pRTLPCB",pk="id",mk="pw",gk="ser",J5="cb",Q5="seg",X5="ts",Z5="d",eV="dframe",yk=1870,_k=30,tV=yk-_k,nV=25e3,rV=3e4;class ja{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mh(e),this.stats_=v1(n),this.urlFn=l=>(this.appCheckToken&&(l[t_]=this.appCheckToken),fk(n,dk,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new q5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(rV)),M5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new b1((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===iT)this.id=a,this.password=l;else if(o===G5)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[iT]="t",r[gk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[J5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ik]=_1,this.transportSessionId&&(r[sk]=this.transportSessionId),this.lastSessionId&&(r[ck]=this.lastSessionId),this.applicationId&&(r[uk]=this.applicationId),this.appCheckToken&&(r[t_]=this.appCheckToken),typeof location<"u"&&location.hostname&&lk.test(location.hostname)&&(r[ok]=ak);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ja.forceAllow_=!0}static forceDisallow(){ja.forceDisallow_=!0}static isAvailable(){return ja.forceAllow_?!0:!ja.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!D5()&&!x5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=sC(n),i=nk(r,tV);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[eV]="t",r[pk]=e,r[mk]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=wn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class b1{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=R5(),window[K5+this.uniqueCallbackIdentifier]=e,window[Y5+this.uniqueCallbackIdentifier]=n,this.myIFrame=b1.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Nn("frame writing exception"),a.stack&&Nn(a.stack),Nn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Nn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[pk]=this.myID,e[mk]=this.myPW,e[gk]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_k+r.length<=yk;){const o=this.pendingSegs.shift();r=r+"&"+Q5+i+"="+o.seg+"&"+X5+i+"="+o.ts+"&"+Z5+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(nV)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=16384,sV=45e3;let If=null;typeof MozWebSocket<"u"?If=MozWebSocket:typeof WebSocket<"u"&&(If=WebSocket);class $r{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mh(this.connId),this.stats_=v1(n),this.connURL=$r.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[ik]=_1,typeof location<"u"&&location.hostname&&lk.test(location.hostname)&&(o[ok]=ak),n&&(o[sk]=n),r&&(o[ck]=r),i&&(o[t_]=i),s&&(o[uk]=s),fk(e,hk,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xo.set("previous_websocket_failure",!0);try{let r;cC(),this.mySock=new If(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){$r.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&If!==null&&!$r.forceDisallow_}static previouslyFailed(){return xo.isInMemoryStorage||xo.get("previous_websocket_failure")===!0}markConnectionHealthy(){xo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Su(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=nk(n,iV);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(sV))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}$r.responsesRequiredToBeHealthy=2;$r.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ja,$r]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=$r&&$r.isAvailable();let r=n&&!$r.previouslyFailed();if(e.webSocketOnly&&(n||gr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[$r];else{const i=this.transports_=[];for(const s of ku.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);ku.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ku.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=6e4,aV=5e3,lV=10*1024,cV=100*1024,fg="t",sT="d",uV="s",oT="r",hV="e",aT="o",lT="a",cT="n",uT="p",dV="h";class fV{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mh("c:"+this.id+":"),this.transportManager_=new ku(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Yc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>cV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>lV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(fg in e){const n=e[fg];n===lT?this.upgradeIfSecondaryHealthy_():n===oT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===aT&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=mc("t",e),r=mc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:uT,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:lT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:cT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=mc("t",e),r=mc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=mc(fg,e);if(sT in e){const r=e[sT];if(n===dV){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===cT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===uV?this.onConnectionShutdown_(r):n===oT?this.onReset_(r):n===hV?Zy("Server Error: "+r):n===aT?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Zy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_1!==r&&gr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Yc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(oV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(aV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:uT,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bk=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){ue(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends bk{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!e1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Af}getInitialEvent(e){return ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=32,dT=768;class kt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function yt(){return new kt("")}function Ze(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Zs(t){return t.pieces_.length-t.pieceNum_}function St(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new kt(t.pieces_,e)}function Ek(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function pV(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Tk(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function wk(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new kt(e,0)}function an(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof kt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new kt(n,0)}function Ye(t){return t.pieceNum_>=t.pieces_.length}function Nr(t,e){const n=Ze(t),r=Ze(e);if(n===null)return e;if(n===r)return Nr(St(t),St(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Sk(t,e){if(Zs(t)!==Zs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function zr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Zs(t)>Zs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class mV{constructor(e,n){this.errorPrefix_=n,this.parts_=Tk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Bp(this.parts_[r]);Ik(this)}}function gV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Bp(e),Ik(t)}function yV(t){const e=t.parts_.pop();t.byteLength_-=Bp(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ik(t){if(t.byteLength_>dT)throw new Error(t.errorPrefix_+"has a key path longer than "+dT+" bytes ("+t.byteLength_+").");if(t.parts_.length>hT)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hT+") or object contains a cycle "+Ao(t))}function Ao(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1 extends bk{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new E1}getInitialEvent(e){return ue(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=1e3,_V=60*5*1e3,fT=30*1e3,vV=1.3,bV=3e4,EV="server_kill",pT=3;class Xi extends vk{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Xi.nextPersistentConnectionId_++,this.log_=mh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gc,this.maxReconnectDelay_=_V,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!cC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");E1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Af.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(wn(s)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new wu,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Xi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&us(e,"w")){const r=El(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();gr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||P4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fT)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=M4(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+wn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Zy("Unrecognized action received from server: "+wn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=gc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>bV&&(this.reconnectDelay_=gc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*vV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Xi.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){ue(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Nn("getToken() completed but was canceled"):(Nn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new fV(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{gr(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(EV)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&gr(h),l())}}}interrupt(e){Nn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Nn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],By(this.interruptReasons_)&&(this.reconnectDelay_=gc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>y1(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new kt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Nn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pT&&(this.reconnectDelay_=fT,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Nn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+XC.replace(/\./g,"-")]=1,e1()?e["framework.cordova"]=1:lC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Af.getInstance().currentlyOnline();return By(this.interruptReasons_)&&e}}Xi.nextPersistentConnectionId_=0;Xi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new et(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new et(wl,e),i=new et(wl,n);return this.compare(r,i)!==0}minPost(){return et.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od;class Ak extends Wp{static get __EMPTY_NODE(){return od}static set __EMPTY_NODE(e){od=e}compare(e,n){return ec(e.name,n.name)}isDefinedOn(e){throw Jl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return et.MIN}maxPost(){return new et(la,od)}makePost(e,n){return ue(typeof e=="string","KeyIndex indexValue must always be a string."),new et(e,od)}toString(){return".key"}}const ll=new Ak;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ur=class Ac{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ac.RED,this.left=i??ci.EMPTY_NODE,this.right=s??ci.EMPTY_NODE}copy(e,n,r,i,s){return new Ac(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ci.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ci.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ac.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ac.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};ur.RED=!0;ur.BLACK=!1;class TV{copy(e,n,r,i,s){return this}insert(e,n,r){return new ur(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ci=class jd{constructor(e,n=jd.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new jd(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ur.BLACK,null,null))}remove(e){return new jd(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ur.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ad(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ad(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ad(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ad(this.root_,null,this.comparator_,!0,e)}};ci.EMPTY_NODE=new TV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(t,e){return ec(t.name,e.name)}function T1(t,e){return ec(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_;function SV(t){n_=t}const Ck=function(t){return typeof t=="number"?"number:"+rk(t):"string:"+t},kk=function(t){if(t.isLeafNode()){const e=t.val();ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&us(e,".sv"),"Priority must be a string or number.")}else ue(t===n_||t.isEmpty(),"priority of unexpected type.");ue(t===n_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mT;class rn{constructor(e,n=rn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),kk(this.priorityNode_)}static set __childrenNodeConstructor(e){mT=e}static get __childrenNodeConstructor(){return mT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new rn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ye(e)?this:Ze(e)===".priority"?this.priorityNode_:rn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:rn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ze(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ue(r!==".priority"||Zs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,rn.__childrenNodeConstructor.EMPTY_NODE.updateChild(St(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ck(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=rk(this.value_):e+=this.value_,this.lazyHash_=ek(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===rn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof rn.__childrenNodeConstructor?-1:(ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=rn.VALUE_TYPE_ORDER.indexOf(n),s=rn.VALUE_TYPE_ORDER.indexOf(r);return ue(i>=0,"Unknown leaf type: "+n),ue(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}rn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rk,Ok;function IV(t){Rk=t}function AV(t){Ok=t}class CV extends Wp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ec(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return et.MIN}maxPost(){return new et(la,new rn("[PRIORITY-POST]",Ok))}makePost(e,n){const r=Rk(e);return new et(n,new rn("[PRIORITY-POST]",r))}toString(){return".priority"}}const xn=new CV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=Math.log(2);class RV{constructor(e){const n=s=>parseInt(Math.log(s)/kV,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Cf=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new ur(d,h.node,ur.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),m=i(f+1,c);return h=t[f],d=n?n(h):h,new ur(d,h.node,ur.BLACK,p,m)}},s=function(l){let c=null,u=null,h=t.length;const d=function(p,m){const g=h-p,y=h;h-=p;const _=i(g+1,y),v=t[g],w=n?n(v):v;f(new ur(w,v.node,m,null,_))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));m?d(g,ur.BLACK):(d(g,ur.BLACK),d(g,ur.RED))}return u},o=new RV(t.length),a=s(o);return new ci(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pg;const Na={};class Gi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ue(Na&&xn,"ChildrenNode.ts has not been loaded"),pg=pg||new Gi({".priority":Na},{".priority":xn}),pg}get(e){const n=El(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ci?n:null}hasIndex(e){return us(this.indexSet_,e.toString())}addIndex(e,n){ue(e!==ll,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(et.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Cf(r,e.getCompare()):a=Na;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Gi(u,c)}addToIndexes(e,n){const r=yf(this.indexes_,(i,s)=>{const o=El(this.indexSet_,s);if(ue(o,"Missing index implementation for "+s),i===Na)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(et.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Cf(a,o.getCompare())}else return Na;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new et(e.name,a))),l.insert(e,e.node)}});return new Gi(r,this.indexSet_)}removeFromIndexes(e,n){const r=yf(this.indexes_,i=>{if(i===Na)return i;{const s=n.get(e.name);return s?i.remove(new et(e.name,s)):i}});return new Gi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc;class ut{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&kk(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yc||(yc=new ut(new ci(T1),null,Gi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yc}updatePriority(e){return this.children_.isEmpty()?this:new ut(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?yc:n}}getChild(e){const n=Ze(e);return n===null?this:this.getImmediateChild(n).getChild(St(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ue(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new et(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?yc:this.priorityNode_;return new ut(i,o,s)}}updateChild(e,n){const r=Ze(e);if(r===null)return n;{ue(Ze(e)!==".priority"||Zs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(St(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(xn,(o,a)=>{n[o]=a.val(e),r++,s&&ut.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ck(this.getPriority().val())+":"),this.forEachChild(xn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":ek(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new et(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new et(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new et(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,et.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,et.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yh?-1:0}withIndex(e){if(e===ll||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ut(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ll||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(xn),i=n.getIterator(xn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===ll?null:this.indexMap_.get(e.toString())}}ut.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class OV extends ut{constructor(){super(new ci(T1),ut.EMPTY_NODE,Gi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ut.EMPTY_NODE}isEmpty(){return!1}}const yh=new OV;Object.defineProperties(et,{MIN:{value:new et(wl,ut.EMPTY_NODE)},MAX:{value:new et(la,yh)}});Ak.__EMPTY_NODE=ut.EMPTY_NODE;rn.__childrenNodeConstructor=ut;SV(yh);AV(yh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=!0;function Mn(t,e=null){if(t===null)return ut.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new rn(n,Mn(e))}if(!(t instanceof Array)&&NV){const n=[];let r=!1;if(Dr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Mn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new et(o,l)))}}),n.length===0)return ut.EMPTY_NODE;const s=Cf(n,wV,o=>o.name,T1);if(r){const o=Cf(n,xn.getCompare());return new ut(s,Mn(e),new Gi({".priority":o},{".priority":xn}))}else return new ut(s,Mn(e),Gi.Default)}else{let n=ut.EMPTY_NODE;return Dr(t,(r,i)=>{if(us(t,r)&&r.substring(0,1)!=="."){const s=Mn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Mn(e))}}IV(Mn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV extends Wp{constructor(e){super(),this.indexPath_=e,ue(!Ye(e)&&Ze(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ec(e.name,n.name):s}makePost(e,n){const r=Mn(e),i=ut.EMPTY_NODE.updateChild(this.indexPath_,r);return new et(n,i)}maxPost(){const e=ut.EMPTY_NODE.updateChild(this.indexPath_,yh);return new et(la,e)}toString(){return Tk(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV extends Wp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ec(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return et.MIN}maxPost(){return et.MAX}makePost(e,n){const r=Mn(e);return new et(n,r)}toString(){return".value"}}const DV=new PV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){return{type:"value",snapshotNode:t}}function LV(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function VV(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function gT(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function FV(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wl}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:la}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xn}copy(){const e=new w1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===xn?n="$priority":t.index_===DV?n="$value":t.index_===ll?n="$key":(ue(t.index_ instanceof MV,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=wn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=wn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+wn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=wn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+wn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function _T(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==xn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends vk{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=mh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=kf.getListenId_(e,r),a={};this.listens_[o]=a;const l=yT(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,r),El(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",i(d,null)}})}unlisten(e,n){const r=kf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=yT(e._queryParams),r=e._path.toString(),i=new wu;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Su(a.responseText)}catch{gr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&gr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.rootNode_=ut.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(){return{value:null,children:new Map}}function Nk(t,e,n){if(Ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ze(e);t.children.has(r)||t.children.set(r,Rf());const i=t.children.get(r);e=St(e),Nk(i,e,n)}}function r_(t,e,n){t.value!==null?n(e,t.value):BV(t,(r,i)=>{const s=new kt(e.toString()+"/"+r);r_(i,s,n)})}function BV(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Dr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=10*1e3,HV=30*1e3,zV=5*60*1e3;class jV{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $V(e);const r=vT+(HV-vT)*Math.random();Yc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Dr(e,(i,s)=>{s>0&&us(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Yc(this.reportStats_.bind(this),Math.floor(Math.random()*2*zV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ui||(ui={}));function Mk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Pk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Dk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ui.ACK_USER_WRITE,this.source=Mk()}operationForChild(e){if(Ye(this.path)){if(this.affectedTree.value!=null)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new kt(e));return new Of(yt(),n,this.revert)}}else return ue(Ze(this.path)===e,"operationForChild called for unrelated child."),new Of(St(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ui.OVERWRITE}operationForChild(e){return Ye(this.path)?new ca(this.source,yt(),this.snap.getImmediateChild(e)):new ca(this.source,St(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ui.MERGE}operationForChild(e){if(Ye(this.path)){const n=this.children.subtree(new kt(e));return n.isEmpty()?null:n.value?new ca(this.source,yt(),n.value):new Ru(this.source,yt(),n)}else return ue(Ze(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ru(this.source,St(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ye(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ze(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function WV(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(FV(o.childName,o.snapshotNode))}),_c(t,i,"child_removed",e,r,n),_c(t,i,"child_added",e,r,n),_c(t,i,"child_moved",s,r,n),_c(t,i,"child_changed",e,r,n),_c(t,i,"value",e,r,n),i}function _c(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>GV(t,a,l)),o.forEach(a=>{const l=qV(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function qV(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function GV(t,e,n){if(e.childName==null||n.childName==null)throw Jl("Should only compare child_ events.");const r=new et(e.childName,e.snapshotNode),i=new et(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t,e){return{eventCache:t,serverCache:e}}function Jc(t,e,n,r){return xk(new S1(e,n,r),t.serverCache)}function Lk(t,e,n,r){return xk(t.eventCache,new S1(e,n,r))}function i_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ua(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mg;const KV=()=>(mg||(mg=new ci(P5)),mg);class Tt{constructor(e,n=KV()){this.value=e,this.children=n}static fromObject(e){let n=new Tt(null);return Dr(e,(r,i)=>{n=n.set(new kt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:yt(),value:this.value};if(Ye(e))return null;{const r=Ze(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(St(e),n);return s!=null?{path:an(new kt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ye(e))return this;{const n=Ze(e),r=this.children.get(n);return r!==null?r.subtree(St(e)):new Tt(null)}}set(e,n){if(Ye(e))return new Tt(n,this.children);{const r=Ze(e),s=(this.children.get(r)||new Tt(null)).set(St(e),n),o=this.children.insert(r,s);return new Tt(this.value,o)}}remove(e){if(Ye(e))return this.children.isEmpty()?new Tt(null):new Tt(null,this.children);{const n=Ze(e),r=this.children.get(n);if(r){const i=r.remove(St(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Tt(null):new Tt(this.value,s)}else return this}}get(e){if(Ye(e))return this.value;{const n=Ze(e),r=this.children.get(n);return r?r.get(St(e)):null}}setTree(e,n){if(Ye(e))return n;{const r=Ze(e),s=(this.children.get(r)||new Tt(null)).setTree(St(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Tt(this.value,o)}}fold(e){return this.fold_(yt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(an(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,yt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ye(e))return null;{const s=Ze(e),o=this.children.get(s);return o?o.findOnPath_(St(e),an(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,yt(),n)}foreachOnPath_(e,n,r){if(Ye(e))return this;{this.value&&r(n,this.value);const i=Ze(e),s=this.children.get(i);return s?s.foreachOnPath_(St(e),an(n,i),r):new Tt(null)}}foreach(e){this.foreach_(yt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(an(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.writeTree_=e}static empty(){return new Gr(new Tt(null))}}function Qc(t,e,n){if(Ye(e))return new Gr(new Tt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Nr(i,e);return s=s.updateChild(o,n),new Gr(t.writeTree_.set(i,s))}else{const i=new Tt(n),s=t.writeTree_.setTree(e,i);return new Gr(s)}}}function bT(t,e,n){let r=t;return Dr(n,(i,s)=>{r=Qc(r,an(e,i),s)}),r}function ET(t,e){if(Ye(e))return Gr.empty();{const n=t.writeTree_.setTree(e,new Tt(null));return new Gr(n)}}function s_(t,e){return Sa(t,e)!=null}function Sa(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Nr(n.path,e)):null}function TT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(xn,(r,i)=>{e.push(new et(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new et(r,i.value))}),e}function js(t,e){if(Ye(e))return t;{const n=Sa(t,e);return n!=null?new Gr(new Tt(n)):new Gr(t.writeTree_.subtree(e))}}function o_(t){return t.writeTree_.isEmpty()}function Sl(t,e){return Vk(yt(),t.writeTree_,e)}function Vk(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(ue(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Vk(an(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(an(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t,e){return zk(e,t)}function YV(t,e,n,r,i){ue(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Qc(t.visibleWrites,e,n)),t.lastWriteId=r}function JV(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function QV(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ue(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&XV(a,r.path)?i=!1:zr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return ZV(t),!0;if(r.snap)t.visibleWrites=ET(t.visibleWrites,r.path);else{const a=r.children;Dr(a,l=>{t.visibleWrites=ET(t.visibleWrites,an(r.path,l))})}return!0}else return!1}function XV(t,e){if(t.snap)return zr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&zr(an(t.path,n),e))return!0;return!1}function ZV(t){t.visibleWrites=Uk(t.allWrites,e9,yt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function e9(t){return t.visible}function Uk(t,e,n){let r=Gr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)zr(n,o)?(a=Nr(n,o),r=Qc(r,a,s.snap)):zr(o,n)&&(a=Nr(o,n),r=Qc(r,yt(),s.snap.getChild(a)));else if(s.children){if(zr(n,o))a=Nr(n,o),r=bT(r,a,s.children);else if(zr(o,n))if(a=Nr(o,n),Ye(a))r=bT(r,yt(),s.children);else{const l=El(s.children,Ze(a));if(l){const c=l.getChild(St(a));r=Qc(r,yt(),c)}}}else throw Jl("WriteRecord should have .snap or .children")}}return r}function Bk(t,e,n,r,i){if(!r&&!i){const s=Sa(t.visibleWrites,e);if(s!=null)return s;{const o=js(t.visibleWrites,e);if(o_(o))return n;if(n==null&&!s_(o,yt()))return null;{const a=n||ut.EMPTY_NODE;return Sl(o,a)}}}else{const s=js(t.visibleWrites,e);if(!i&&o_(s))return n;if(!i&&n==null&&!s_(s,yt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(zr(c.path,e)||zr(e,c.path))},a=Uk(t.allWrites,o,e),l=n||ut.EMPTY_NODE;return Sl(a,l)}}}function t9(t,e,n){let r=ut.EMPTY_NODE;const i=Sa(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(xn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=js(t.visibleWrites,e);return n.forEachChild(xn,(o,a)=>{const l=Sl(js(s,new kt(o)),a);r=r.updateImmediateChild(o,l)}),TT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=js(t.visibleWrites,e);return TT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function n9(t,e,n,r,i){ue(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=an(e,n);if(s_(t.visibleWrites,s))return null;{const o=js(t.visibleWrites,s);return o_(o)?i.getChild(n):Sl(o,i.getChild(n))}}function r9(t,e,n,r){const i=an(e,n),s=Sa(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=js(t.visibleWrites,i);return Sl(o,r.getNode().getImmediateChild(n))}else return null}function i9(t,e){return Sa(t.visibleWrites,e)}function s9(t,e,n,r,i,s,o){let a;const l=js(t.visibleWrites,e),c=Sa(l,yt());if(c!=null)a=c;else if(n!=null)a=Sl(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&u.length<i;)h(f,r)!==0&&u.push(f),f=d.getNext();return u}else return[]}function o9(){return{visibleWrites:Gr.empty(),allWrites:[],lastWriteId:-1}}function a_(t,e,n,r){return Bk(t.writeTree,t.treePath,e,n,r)}function $k(t,e){return t9(t.writeTree,t.treePath,e)}function wT(t,e,n,r){return n9(t.writeTree,t.treePath,e,n,r)}function Nf(t,e){return i9(t.writeTree,an(t.treePath,e))}function a9(t,e,n,r,i,s){return s9(t.writeTree,t.treePath,e,n,r,i,s)}function I1(t,e,n){return r9(t.writeTree,t.treePath,e,n)}function Hk(t,e){return zk(an(t.treePath,e),t.writeTree)}function zk(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ue(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ue(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,gT(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,VV(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,LV(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,gT(r,e.snapshotNode,i.oldSnap));else throw Jl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const jk=new c9;class A1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new S1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return I1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ua(this.viewCache_),s=a9(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function u9(t,e){ue(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function h9(t,e,n,r,i){const s=new l9;let o,a;if(n.type===ui.OVERWRITE){const c=n;c.source.fromUser?o=l_(t,e,c.path,c.snap,r,i,s):(ue(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ye(c.path),o=Mf(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===ui.MERGE){const c=n;c.source.fromUser?o=f9(t,e,c.path,c.children,r,i,s):(ue(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=c_(t,e,c.path,c.children,r,i,a,s))}else if(n.type===ui.ACK_USER_WRITE){const c=n;c.revert?o=g9(t,e,c.path,r,i,s):o=p9(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===ui.LISTEN_COMPLETE)o=m9(t,e,n.path,r,s);else throw Jl("Unknown operation type: "+n.type);const l=s.getChanges();return d9(e,o,l),{viewCache:o,changes:l}}function d9(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=i_(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(xV(i_(e)))}}function Wk(t,e,n,r,i,s){const o=e.eventCache;if(Nf(r,n)!=null)return e;{let a,l;if(Ye(n))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ua(e),u=c instanceof ut?c:ut.EMPTY_NODE,h=$k(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=a_(r,ua(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ze(n);if(c===".priority"){ue(Zs(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=wT(r,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=St(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=wT(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=I1(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,i,s):a=o.getNode()}}return Jc(e,a,o.isFullyInitialized()||Ye(n),t.filter.filtersNodes())}}function Mf(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Ye(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Ze(n);if(!l.isCompleteForPath(n)&&Zs(n)>1)return e;const p=St(n),g=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),f,g,p,jk,null)}const h=Lk(e,c,l.isFullyInitialized()||Ye(n),u.filtersNodes()),d=new A1(i,h,s);return Wk(t,h,n,i,d,a)}function l_(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new A1(i,e,s);if(Ye(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Jc(e,c,!0,t.filter.filtersNodes());else{const h=Ze(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Jc(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=St(n),f=a.getNode().getImmediateChild(h);let p;if(Ye(d))p=r;else{const m=u.getCompleteChild(h);m!=null?Ek(d)===".priority"&&m.getChild(wk(d)).isEmpty()?p=m:p=m.updateChild(d,r):p=ut.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=Jc(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function ST(t,e){return t.eventCache.isCompleteForChild(e)}function f9(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=an(n,l);ST(e,Ze(u))&&(a=l_(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=an(n,l);ST(e,Ze(u))||(a=l_(t,a,u,c,i,s,o))}),a}function IT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function c_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Ye(n)?c=r:c=new Tt(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=IT(t,f,d);l=Mf(t,l,new kt(h),p,i,s,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),m=IT(t,p,d);l=Mf(t,l,new kt(h),m,i,s,o,a)}}),l}function p9(t,e,n,r,i,s,o){if(Nf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ye(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Mf(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Ye(n)){let c=new Tt(null);return l.getNode().forEachChild(ll,(u,h)=>{c=c.set(new kt(u),h)}),c_(t,e,n,c,i,s,a,o)}else return e}else{let c=new Tt(null);return r.foreach((u,h)=>{const d=an(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),c_(t,e,n,c,i,s,a,o)}}function m9(t,e,n,r,i){const s=e.serverCache,o=Lk(e,s.getNode(),s.isFullyInitialized()||Ye(n),s.isFiltered());return Wk(t,o,n,r,jk,i)}function g9(t,e,n,r,i,s){let o;if(Nf(r,n)!=null)return e;{const a=new A1(r,e,i),l=e.eventCache.getNode();let c;if(Ye(n)||Ze(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=a_(r,ua(e));else{const h=e.serverCache.getNode();ue(h instanceof ut,"serverChildren would be complete if leaf node"),u=$k(r,h)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Ze(n);let h=I1(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,St(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,ut.EMPTY_NODE,St(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=a_(r,ua(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Nf(r,yt())!=null,Jc(e,c,o,t.filter.filtersNodes())}}function y9(t,e){const n=ua(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ye(e)&&!n.getImmediateChild(Ze(e)).isEmpty())?n.getChild(e):null}function AT(t,e,n,r){e.type===ui.MERGE&&e.source.queryId!==null&&(ue(ua(t.viewCache_),"We should always have a full cache before handling merges"),ue(i_(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=h9(t.processor_,i,e,n,r);return u9(t.processor_,s.viewCache),ue(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,_9(t,s.changes,s.viewCache.eventCache.getNode(),null)}function _9(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return WV(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CT;function v9(t){ue(!CT,"__referenceConstructor has already been defined"),CT=t}function C1(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return ue(s!=null,"SyncTree gave us an op for an invalid query."),AT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(AT(o,e,n,r));return s}}function k1(t,e){let n=null;for(const r of t.views.values())n=n||y9(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kT;function b9(t){ue(!kT,"__referenceConstructor has already been defined"),kT=t}class RT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Tt(null),this.pendingWriteTree_=o9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function E9(t,e,n,r,i){return YV(t.pendingWriteTree_,e,n,r,i),i?Gp(t,new ca(Mk(),e,n)):[]}function Wa(t,e,n=!1){const r=JV(t.pendingWriteTree_,e);if(QV(t.pendingWriteTree_,e)){let s=new Tt(null);return r.snap!=null?s=s.set(yt(),!0):Dr(r.children,o=>{s=s.set(new kt(o),!0)}),Gp(t,new Of(r.path,s,n))}else return[]}function qp(t,e,n){return Gp(t,new ca(Pk(),e,n))}function T9(t,e,n){const r=Tt.fromObject(n);return Gp(t,new Ru(Pk(),e,r))}function w9(t,e,n,r){const i=Yk(t,r);if(i!=null){const s=Jk(i),o=s.path,a=s.queryId,l=Nr(o,e),c=new ca(Dk(a),l,n);return Qk(t,o,c)}else return[]}function S9(t,e,n,r){const i=Yk(t,r);if(i){const s=Jk(i),o=s.path,a=s.queryId,l=Nr(o,e),c=Tt.fromObject(n),u=new Ru(Dk(a),l,c);return Qk(t,o,u)}else return[]}function qk(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Nr(o,e),c=k1(a,l);if(c)return c});return Bk(i,e,s,n,!0)}function Gp(t,e){return Gk(e,t.syncPointTree_,null,Fk(t.pendingWriteTree_,yt()))}function Gk(t,e,n,r){if(Ye(t.path))return Kk(t,e,n,r);{const i=e.get(yt());n==null&&i!=null&&(n=k1(i,yt()));let s=[];const o=Ze(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=Hk(r,o);s=s.concat(Gk(a,l,c,u))}return i&&(s=s.concat(C1(i,t,r,n))),s}}function Kk(t,e,n,r){const i=e.get(yt());n==null&&i!=null&&(n=k1(i,yt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=Hk(r,o),u=t.operationForChild(o);u&&(s=s.concat(Kk(u,a,l,c)))}),i&&(s=s.concat(C1(i,t,r,n))),s}function Yk(t,e){return t.tagToQueryMap.get(e)}function Jk(t){const e=t.indexOf("$");return ue(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new kt(t.substr(0,e))}}function Qk(t,e,n){const r=t.syncPointTree_.get(e);ue(r,"Missing sync point for query tag that we're tracking");const i=Fk(t.pendingWriteTree_,e);return C1(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new R1(n)}node(){return this.node_}}class O1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=an(this.path_,e);return new O1(this.syncTree_,n)}node(){return qk(this.syncTree_,this.path_)}}const I9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},OT=function(t,e,n){if(!t||typeof t!="object")return t;if(ue(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return A9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return C9(t[".sv"],e);ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},A9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ue(!1,"Unexpected server value: "+t)}},C9=function(t,e,n){t.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ue(!1,"Unexpected increment value: "+r);const i=e.node();if(ue(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},k9=function(t,e,n,r){return N1(e,new O1(n,t),r)},R9=function(t,e,n){return N1(t,new R1(e),n)};function N1(t,e,n){const r=t.getPriority().val(),i=OT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=OT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new rn(a,Mn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new rn(i))),o.forEachChild(xn,(a,l)=>{const c=N1(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function P1(t,e){let n=e instanceof kt?e:new kt(e),r=t,i=Ze(n);for(;i!==null;){const s=El(r.node.children,i)||{children:{},childCount:0};r=new M1(i,r,s),n=St(n),i=Ze(n)}return r}function tc(t){return t.node.value}function Xk(t,e){t.node.value=e,u_(t)}function Zk(t){return t.node.childCount>0}function O9(t){return tc(t)===void 0&&!Zk(t)}function Kp(t,e){Dr(t.node.children,(n,r)=>{e(new M1(n,t,r))})}function eR(t,e,n,r){n&&!r&&e(t),Kp(t,i=>{eR(i,e,!0,r)}),n&&r&&e(t)}function N9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function _h(t){return new kt(t.parent===null?t.name:_h(t.parent)+"/"+t.name)}function u_(t){t.parent!==null&&M9(t.parent,t.name,t)}function M9(t,e,n){const r=O9(n),i=us(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,u_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,u_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=/[\[\].#$\/\u0000-\u001F\u007F]/,D9=/[\[\].#$\u0000-\u001F\u007F]/,gg=10*1024*1024,tR=function(t){return typeof t=="string"&&t.length!==0&&!P9.test(t)},x9=function(t){return typeof t=="string"&&t.length!==0&&!D9.test(t)},L9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),x9(t)},nR=function(t,e,n){const r=n instanceof kt?new mV(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ao(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ao(r)+" with contents = "+e.toString());if(tk(e))throw new Error(t+"contains "+e.toString()+" "+Ao(r));if(typeof e=="string"&&e.length>gg/3&&Bp(e)>gg)throw new Error(t+"contains a string greater than "+gg+" utf8 bytes "+Ao(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Dr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!tR(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ao(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);gV(r,o),nR(t,a,r),yV(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ao(r)+" in addition to actual children.")}},V9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!tR(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!L9(n))throw new Error(F4(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function U9(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Sk(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ia(t,e,n){U9(t,n),B9(t,r=>zr(r,e)||zr(e,r))}function B9(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?($9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function $9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Yo&&Nn("event: "+n.toString()),gh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="repo_interrupt",z9=25;class j9{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new F9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rf(),this.transactionQueueTree_=new M1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function W9(t,e,n){if(t.stats_=v1(t.repoInfo_),t.forceRestClient_||U5())t.server_=new kf(t.repoInfo_,(r,i,s,o)=>{NT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>MT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Xi(t.repoInfo_,e,(r,i,s,o)=>{NT(t,r,i,s,o)},r=>{MT(t,r)},r=>{G9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=W5(t.repoInfo_,()=>new jV(t.stats_,t.server_)),t.infoData_=new UV,t.infoSyncTree_=new RT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=qp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),D1(t,"connected",!1),t.serverSyncTree_=new RT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Ia(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function q9(t){const n=t.infoData_.getNode(new kt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function rR(t){return I9({timestamp:q9(t)})}function NT(t,e,n,r,i){t.dataUpdateCount++;const s=new kt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=yf(n,c=>Mn(c));o=S9(t.serverSyncTree_,s,l,i)}else{const l=Mn(n);o=w9(t.serverSyncTree_,s,l,i)}else if(r){const l=yf(n,c=>Mn(c));o=T9(t.serverSyncTree_,s,l)}else{const l=Mn(n);o=qp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=L1(t,s)),Ia(t.eventQueue_,a,o)}function MT(t,e){D1(t,"connected",e),e===!1&&Y9(t)}function G9(t,e){Dr(e,(n,r)=>{D1(t,n,r)})}function D1(t,e,n){const r=new kt("/.info/"+e),i=Mn(n);t.infoData_.updateSnapshot(r,i);const s=qp(t.infoSyncTree_,r,i);Ia(t.eventQueue_,r,s)}function K9(t){return t.nextWriteId_++}function Y9(t){iR(t,"onDisconnectEvents");const e=rR(t),n=Rf();r_(t.onDisconnect_,yt(),(i,s)=>{const o=k9(i,s,t.serverSyncTree_,e);Nk(n,i,o)});let r=[];r_(n,yt(),(i,s)=>{r=r.concat(qp(t.serverSyncTree_,i,s));const o=Z9(t,i);L1(t,o)}),t.onDisconnect_=Rf(),Ia(t.eventQueue_,yt(),r)}function J9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(H9)}function iR(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Nn(n,...e)}function sR(t,e,n){return qk(t.serverSyncTree_,e,n)||ut.EMPTY_NODE}function x1(t,e=t.transactionQueueTree_){if(e||Yp(t,e),tc(e)){const n=aR(t,e);ue(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Q9(t,_h(e),n)}else Zk(e)&&Kp(e,n=>{x1(t,n)})}function Q9(t,e,n){const r=n.map(c=>c.currentWriteId),i=sR(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];ue(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Nr(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{iR(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Wa(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Yp(t,P1(t.transactionQueueTree_,e)),x1(t,t.transactionQueueTree_),Ia(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)gh(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{gr("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}L1(t,e)}},o)}function L1(t,e){const n=oR(t,e),r=_h(n),i=aR(t,n);return X9(t,i,r),r}function X9(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Nr(n,l.path);let u=!1,h;if(ue(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(Wa(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=z9)u=!0,h="maxretry",i=i.concat(Wa(t.serverSyncTree_,l.currentWriteId,!0));else{const d=sR(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){nR("transaction failed: Data returned ",f,l.path);let p=Mn(f);typeof f=="object"&&f!=null&&us(f,".priority")||(p=p.updatePriority(d.getPriority()));const g=l.currentWriteId,y=rR(t),_=R9(p,d,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=_,l.currentWriteId=K9(t),o.splice(o.indexOf(g),1),i=i.concat(E9(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(Wa(t.serverSyncTree_,g,!0))}else u=!0,h="nodata",i=i.concat(Wa(t.serverSyncTree_,l.currentWriteId,!0))}Ia(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Yp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)gh(r[a]);x1(t,t.transactionQueueTree_)}function oR(t,e){let n,r=t.transactionQueueTree_;for(n=Ze(e);n!==null&&tc(r)===void 0;)r=P1(r,n),e=St(e),n=Ze(e);return r}function aR(t,e){const n=[];return lR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function lR(t,e,n){const r=tc(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Kp(e,i=>{lR(t,i,n)})}function Yp(t,e){const n=tc(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Xk(e,n.length>0?n:void 0)}Kp(e,r=>{Yp(t,r)})}function Z9(t,e){const n=_h(oR(t,e)),r=P1(t.transactionQueueTree_,e);return N9(r,i=>{yg(t,i)}),yg(t,r),eR(r,i=>{yg(t,i)}),n}function yg(t,e){const n=tc(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ue(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(ue(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Wa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Xk(e,void 0):n.length=s+1,Ia(t.eventQueue_,_h(e),i);for(let o=0;o<r.length;o++)gh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function tF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):gr(`Invalid query segment '${n}' in query '${t}'`)}return e}const PT=function(t,e){const n=nF(t),r=n.namespace;n.domain==="firebase.com"&&aa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&aa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||N5();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new H5(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new kt(n.pathString)}},nF=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=eF(t.substring(u,h)));const d=tF(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ye(this._path)?null:Ek(this._path)}get ref(){return new nc(this._repo,this._path)}get _queryIdentifier(){const e=_T(this._queryParams),n=y1(e);return n==="{}"?"default":n}get _queryObject(){return _T(this._queryParams)}isEqual(e){if(e=hn(e),!(e instanceof V1))return!1;const n=this._repo===e._repo,r=Sk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+pV(this._path)}}class nc extends V1{constructor(e,n){super(e,n,new w1,!1)}get parent(){const e=wk(this._path);return e===null?null:new nc(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}v9(nc);b9(nc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF="FIREBASE_DATABASE_EMULATOR_HOST",h_={};let iF=!1;function sF(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||aa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=PT(s,i),a=o.repoInfo,l,c;typeof process<"u"&&ZE&&(c=ZE[rF]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=PT(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new e_(e_.OWNER):new $5(t.name,t.options,e);V9("Invalid Firebase Database URL",o),Ye(o.path)||aa("Database URL must point to the root of a Firebase Database (not including a child path).");const h=aF(a,t,u,new B5(t.name,n));return new lF(h,t)}function oF(t,e){const n=h_[e];(!n||n[t.key]!==t)&&aa(`Database ${e}(${t.repoInfo_}) has already been deleted.`),J9(t),delete n[t.key]}function aF(t,e,n,r){let i=h_[e.name];i||(i={},h_[e.name]=i);let s=i[t.toURLString()];return s&&aa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new j9(t,iF,n,r),i[t.toURLString()]=s,s}class lF{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(W9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nc(this._repo,yt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(oF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&aa("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t){A5(lo),wi(new Yr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return sF(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),mr(eT,tT,t),mr(eT,tT,"esm2017")}Xi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Xi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};cF();var uF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he,F1=F1||{},xe=uF||self;function Jp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function vh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function hF(t){return Object.prototype.hasOwnProperty.call(t,_g)&&t[_g]||(t[_g]=++dF)}var _g="closure_uid_"+(1e9*Math.random()>>>0),dF=0;function fF(t,e,n){return t.call.apply(t.bind,arguments)}function pF(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ln(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ln=fF:Ln=pF,Ln.apply(null,arguments)}function ld(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function pn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function co(){this.s=this.s,this.o=this.o}var mF=0;co.prototype.s=!1;co.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),mF!=0)&&hF(this)};co.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function U1(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function DT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Jp(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Vn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vn.prototype.h=function(){this.defaultPrevented=!0};var gF=function(){if(!xe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};xe.addEventListener("test",n,e),xe.removeEventListener("test",n,e)}catch{}return t}();function Ou(t){return/^[\s\xa0]*$/.test(t)}function Qp(){var t=xe.navigator;return t&&(t=t.userAgent)?t:""}function oi(t){return Qp().indexOf(t)!=-1}function B1(t){return B1[" "](t),t}B1[" "]=function(){};function yF(t,e){var n=cU;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var _F=oi("Opera"),Il=oi("Trident")||oi("MSIE"),uR=oi("Edge"),d_=uR||Il,hR=oi("Gecko")&&!(Qp().toLowerCase().indexOf("webkit")!=-1&&!oi("Edge"))&&!(oi("Trident")||oi("MSIE"))&&!oi("Edge"),vF=Qp().toLowerCase().indexOf("webkit")!=-1&&!oi("Edge");function dR(){var t=xe.document;return t?t.documentMode:void 0}var f_;e:{var vg="",bg=function(){var t=Qp();if(hR)return/rv:([^\);]+)(\)|;)/.exec(t);if(uR)return/Edge\/([\d\.]+)/.exec(t);if(Il)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(vF)return/WebKit\/(\S+)/.exec(t);if(_F)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(bg&&(vg=bg?bg[1]:""),Il){var Eg=dR();if(Eg!=null&&Eg>parseFloat(vg)){f_=String(Eg);break e}}f_=vg}var p_;if(xe.document&&Il){var xT=dR();p_=xT||parseInt(f_,10)||void 0}else p_=void 0;var bF=p_;function Nu(t,e){if(Vn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hR){e:{try{B1(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:EF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Nu.$.h.call(this)}}pn(Nu,Vn);var EF={2:"touch",3:"pen",4:"mouse"};Nu.prototype.h=function(){Nu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var bh="closure_listenable_"+(1e6*Math.random()|0),TF=0;function wF(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++TF,this.fa=this.ia=!1}function Xp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function $1(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function SF(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function fR(t){const e={};for(const n in t)e[n]=t[n];return e}const LT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pR(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<LT.length;s++)n=LT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Zp(t){this.src=t,this.g={},this.h=0}Zp.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=g_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new wF(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function m_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=cR(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Xp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function g_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var H1="closure_lm_"+(1e6*Math.random()|0),Tg={};function mR(t,e,n,r,i){if(r&&r.once)return yR(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)mR(t,e[s],n,r,i);return null}return n=W1(n),t&&t[bh]?t.O(e,n,vh(r)?!!r.capture:!!r,i):gR(t,e,n,!1,r,i)}function gR(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=vh(i)?!!i.capture:!!i,a=j1(t);if(a||(t[H1]=a=new Zp(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=IF(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)gF||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vR(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function IF(){function t(n){return e.call(t.src,t.listener,n)}const e=AF;return t}function yR(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)yR(t,e[s],n,r,i);return null}return n=W1(n),t&&t[bh]?t.P(e,n,vh(r)?!!r.capture:!!r,i):gR(t,e,n,!0,r,i)}function _R(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)_R(t,e[s],n,r,i);else r=vh(r)?!!r.capture:!!r,n=W1(n),t&&t[bh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=g_(s,n,r,i),-1<n&&(Xp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=j1(t))&&(e=t.g[e.toString()],t=-1,e&&(t=g_(e,n,r,i)),(n=-1<t?e[t]:null)&&z1(n))}function z1(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[bh])m_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vR(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=j1(e))?(m_(n,t),n.h==0&&(n.src=null,e[H1]=null)):Xp(t)}}}function vR(t){return t in Tg?Tg[t]:Tg[t]="on"+t}function AF(t,e){if(t.fa)t=!0;else{e=new Nu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&z1(t),t=n.call(r,e)}return t}function j1(t){return t=t[H1],t instanceof Zp?t:null}var wg="__closure_events_fn_"+(1e9*Math.random()>>>0);function W1(t){return typeof t=="function"?t:(t[wg]||(t[wg]=function(e){return t.handleEvent(e)}),t[wg])}function dn(){co.call(this),this.i=new Zp(this),this.S=this,this.J=null}pn(dn,co);dn.prototype[bh]=!0;dn.prototype.removeEventListener=function(t,e,n,r){_R(this,t,e,n,r)};function In(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Vn(e,t);else if(e instanceof Vn)e.target=e.target||t;else{var i=e;e=new Vn(r,t),pR(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=cd(o,r,!0,e)&&i}if(o=e.g=t,i=cd(o,r,!0,e)&&i,i=cd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=cd(o,r,!1,e)&&i}dn.prototype.N=function(){if(dn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Xp(n[r]);delete t.g[e],t.h--}}this.J=null};dn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};dn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function cd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&m_(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var q1=xe.JSON.stringify;class CF{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function kF(){var t=G1;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class RF{constructor(){this.h=this.g=null}add(e,n){const r=bR.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var bR=new CF(()=>new OF,t=>t.reset());class OF{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function NF(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function MF(t){xe.setTimeout(()=>{throw t},0)}let Mu,Pu=!1,G1=new RF,ER=()=>{const t=xe.Promise.resolve(void 0);Mu=()=>{t.then(PF)}};var PF=()=>{for(var t;t=kF();){try{t.h.call(t.g)}catch(n){MF(n)}var e=bR;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Pu=!1};function em(t,e){dn.call(this),this.h=t||1,this.g=e||xe,this.j=Ln(this.qb,this),this.l=Date.now()}pn(em,dn);he=em.prototype;he.ga=!1;he.T=null;he.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),In(this,"tick"),this.ga&&(K1(this),this.start()))}};he.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function K1(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}he.N=function(){em.$.N.call(this),K1(this),delete this.g};function Y1(t,e,n){if(typeof t=="function")n&&(t=Ln(t,n));else if(t&&typeof t.handleEvent=="function")t=Ln(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:xe.setTimeout(t,e||0)}function TR(t){t.g=Y1(()=>{t.g=null,t.i&&(t.i=!1,TR(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class DF extends co{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:TR(this)}N(){super.N(),this.g&&(xe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Du(t){co.call(this),this.h=t,this.g={}}pn(Du,co);var VT=[];function wR(t,e,n,r){Array.isArray(n)||(n&&(VT[0]=n.toString()),n=VT);for(var i=0;i<n.length;i++){var s=mR(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function SR(t){$1(t.g,function(e,n){this.g.hasOwnProperty(n)&&z1(e)},t),t.g={}}Du.prototype.N=function(){Du.$.N.call(this),SR(this)};Du.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function tm(){this.g=!0}tm.prototype.Ea=function(){this.g=!1};function xF(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function LF(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function qa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+FF(t,n)+(r?" "+r:"")})}function VF(t,e){t.info(function(){return"TIMEOUT: "+e})}tm.prototype.info=function(){};function FF(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return q1(n)}catch{return e}}var Aa={},FT=null;function nm(){return FT=FT||new dn}Aa.Ta="serverreachability";function IR(t){Vn.call(this,Aa.Ta,t)}pn(IR,Vn);function xu(t){const e=nm();In(e,new IR(e))}Aa.STAT_EVENT="statevent";function AR(t,e){Vn.call(this,Aa.STAT_EVENT,t),this.stat=e}pn(AR,Vn);function Hn(t){const e=nm();In(e,new AR(e,t))}Aa.Ua="timingevent";function CR(t,e){Vn.call(this,Aa.Ua,t),this.size=e}pn(CR,Vn);function Eh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return xe.setTimeout(function(){t()},e)}var rm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},kR={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function J1(){}J1.prototype.h=null;function UT(t){return t.h||(t.h=t.i())}function RR(){}var Th={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Q1(){Vn.call(this,"d")}pn(Q1,Vn);function X1(){Vn.call(this,"c")}pn(X1,Vn);var y_;function im(){}pn(im,J1);im.prototype.g=function(){return new XMLHttpRequest};im.prototype.i=function(){return{}};y_=new im;function wh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Du(this),this.P=UF,t=d_?125:void 0,this.V=new em(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new OR}function OR(){this.i=null,this.g="",this.h=!1}var UF=45e3,NR={},__={};he=wh.prototype;he.setTimeout=function(t){this.P=t};function v_(t,e,n){t.L=1,t.A=om(ns(e)),t.u=n,t.S=!0,MR(t,null)}function MR(t,e){t.G=Date.now(),Sh(t),t.B=ns(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),BR(n.i,"t",r),t.o=0,n=t.l.J,t.h=new OR,t.g=a2(t.l,n?e:null,!t.u),0<t.O&&(t.M=new DF(Ln(t.Pa,t,t.g),t.O)),wR(t.U,t.g,"readystatechange",t.nb),e=t.I?fR(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),xu(),xF(t.j,t.v,t.B,t.m,t.W,t.u)}he.nb=function(t){t=t.target;const e=this.M;e&&hi(t)==3?e.l():this.Pa(t)};he.Pa=function(t){try{if(t==this.g)e:{const u=hi(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||d_||this.g&&(this.h.h||this.g.ja()||zT(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?xu(3):xu(2)),sm(this);var n=this.g.da();this.ca=n;t:if(PR(this)){var r=zT(this.g);t="";var i=r.length,s=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lo(this),Xc(this);var o="";break t}this.h.i=new xe.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,LF(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ou(a)){var c=a;break t}}c=null}if(n=c)qa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,b_(this,n);else{this.i=!1,this.s=3,Hn(12),Lo(this),Xc(this);break e}}this.S?(DR(this,u,o),d_&&this.i&&u==3&&(wR(this.U,this.V,"tick",this.mb),this.V.start())):(qa(this.j,this.m,o,null),b_(this,o)),u==4&&Lo(this),this.i&&!this.J&&(u==4?r2(this.l,this):(this.i=!1,Sh(this)))}else oU(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Hn(12)):(this.s=0,Hn(13)),Lo(this),Xc(this)}}}catch{}finally{}};function PR(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function DR(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=BF(t,n),i==__){e==4&&(t.s=4,Hn(14),r=!1),qa(t.j,t.m,null,"[Incomplete Response]");break}else if(i==NR){t.s=4,Hn(15),qa(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else qa(t.j,t.m,i,null),b_(t,i);PR(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Hn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),i0(e),e.M=!0,Hn(11))):(qa(t.j,t.m,n,"[Invalid Chunked Response]"),Lo(t),Xc(t))}he.mb=function(){if(this.g){var t=hi(this.g),e=this.g.ja();this.o<e.length&&(sm(this),DR(this,t,e),this.i&&t!=4&&Sh(this))}};function BF(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?__:(n=Number(e.substring(n,r)),isNaN(n)?NR:(r+=1,r+n>e.length?__:(e=e.slice(r,r+n),t.o=r+n,e)))}he.cancel=function(){this.J=!0,Lo(this)};function Sh(t){t.Y=Date.now()+t.P,xR(t,t.P)}function xR(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Eh(Ln(t.lb,t),e)}function sm(t){t.C&&(xe.clearTimeout(t.C),t.C=null)}he.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(VF(this.j,this.B),this.L!=2&&(xu(),Hn(17)),Lo(this),this.s=2,Xc(this)):xR(this,this.Y-t)};function Xc(t){t.l.H==0||t.J||r2(t.l,t)}function Lo(t){sm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,K1(t.V),SR(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function b_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||E_(n.i,t))){if(!t.K&&E_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)xf(n),um(n);else break e;r0(n),Hn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Eh(Ln(n.ib,n),6e3));if(1>=zR(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Vo(n,11)}else if((t.K||n.g==t)&&xf(n),!Ou(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Z1(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,At(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=o2(r,r.J?r.pa:null,r.Y),o.K){jR(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(sm(a),Sh(a)),r.g=o}else t2(r);0<n.j.length&&hm(n)}else c[0]!="stop"&&c[0]!="close"||Vo(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Vo(n,7):n0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}xu(4)}catch{}}function $F(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Jp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function HF(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Jp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function LR(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Jp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=HF(t),r=$F(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var VR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zF(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Jo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Jo){this.h=t.h,Pf(this,t.j),this.s=t.s,this.g=t.g,Df(this,t.m),this.l=t.l;var e=t.i,n=new Lu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),BT(this,n),this.o=t.o}else t&&(e=String(t).match(VR))?(this.h=!1,Pf(this,e[1]||"",!0),this.s=Cc(e[2]||""),this.g=Cc(e[3]||"",!0),Df(this,e[4]),this.l=Cc(e[5]||"",!0),BT(this,e[6]||"",!0),this.o=Cc(e[7]||"")):(this.h=!1,this.i=new Lu(null,this.h))}Jo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kc(e,$T,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(kc(e,$T,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(kc(n,n.charAt(0)=="/"?qF:WF,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kc(n,KF)),t.join("")};function ns(t){return new Jo(t)}function Pf(t,e,n){t.j=n?Cc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Df(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function BT(t,e,n){e instanceof Lu?(t.i=e,YF(t.i,t.h)):(n||(e=kc(e,GF)),t.i=new Lu(e,t.h))}function At(t,e,n){t.i.set(e,n)}function om(t){return At(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Cc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,jF),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function jF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var $T=/[#\/\?@]/g,WF=/[#\?:]/g,qF=/[#\?]/g,GF=/[#\?@]/g,KF=/#/g;function Lu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function uo(t){t.g||(t.g=new Map,t.h=0,t.i&&zF(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}he=Lu.prototype;he.add=function(t,e){uo(this),this.i=null,t=rc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function FR(t,e){uo(t),e=rc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function UR(t,e){return uo(t),e=rc(t,e),t.g.has(e)}he.forEach=function(t,e){uo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};he.ta=function(){uo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};he.Z=function(t){uo(this);let e=[];if(typeof t=="string")UR(this,t)&&(e=e.concat(this.g.get(rc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};he.set=function(t,e){return uo(this),this.i=null,t=rc(this,t),UR(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};he.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function BR(t,e,n){FR(t,e),0<n.length&&(t.i=null,t.g.set(rc(t,e),U1(n)),t.h+=n.length)}he.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function rc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function YF(t,e){e&&!t.j&&(uo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(FR(this,r),BR(this,i,n))},t)),t.j=e}var JF=class{constructor(t,e){this.g=t,this.map=e}};function $R(t){this.l=t||QF,xe.PerformanceNavigationTiming?(t=xe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(xe.g&&xe.g.Ka&&xe.g.Ka()&&xe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var QF=10;function HR(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function zR(t){return t.h?1:t.g?t.g.size:0}function E_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Z1(t,e){t.g?t.g.add(e):t.h=e}function jR(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}$R.prototype.cancel=function(){if(this.i=WR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function WR(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return U1(t.i)}var XF=class{stringify(t){return xe.JSON.stringify(t,void 0)}parse(t){return xe.JSON.parse(t,void 0)}};function ZF(){this.g=new XF}function eU(t,e,n){const r=n||"";try{LR(t,function(i,s){let o=i;vh(i)&&(o=q1(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function tU(t,e){const n=new tm;if(xe.Image){const r=new Image;r.onload=ld(ud,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ld(ud,n,r,"TestLoadImage: error",!1,e),r.onabort=ld(ud,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ld(ud,n,r,"TestLoadImage: timeout",!1,e),xe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ud(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function am(t){this.l=t.ec||null,this.j=t.ob||!1}pn(am,J1);am.prototype.g=function(){return new lm(this.l,this.j)};am.prototype.i=function(t){return function(){return t}}({});function lm(t,e){dn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=e0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pn(lm,dn);var e0=0;he=lm.prototype;he.open=function(t,e){if(this.readyState!=e0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Vu(this)};he.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||xe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};he.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ih(this)),this.readyState=e0};he.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Vu(this)),this.g&&(this.readyState=3,Vu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof xe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qR(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function qR(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}he.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ih(this):Vu(this),this.readyState==3&&qR(this)}};he.Za=function(t){this.g&&(this.response=this.responseText=t,Ih(this))};he.Ya=function(t){this.g&&(this.response=t,Ih(this))};he.ka=function(){this.g&&Ih(this)};function Ih(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Vu(t)}he.setRequestHeader=function(t,e){this.v.append(t,e)};he.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};he.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Vu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(lm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var nU=xe.JSON.parse;function Ft(t){dn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=GR,this.L=this.M=!1}pn(Ft,dn);var GR="",rU=/^https?$/i,iU=["POST","PUT"];he=Ft.prototype;he.Oa=function(t){this.M=t};he.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():y_.g(),this.C=this.u?UT(this.u):UT(y_),this.g.onreadystatechange=Ln(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){HT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=xe.FormData&&t instanceof xe.FormData,!(0<=cR(iU,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{JR(this),0<this.B&&((this.L=sU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ln(this.ua,this)):this.A=Y1(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){HT(this,s)}};function sU(t){return Il&&typeof t.timeout=="number"&&t.ontimeout!==void 0}he.ua=function(){typeof F1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))};function HT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,KR(t),cm(t)}function KR(t){t.F||(t.F=!0,In(t,"complete"),In(t,"error"))}he.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,In(this,"complete"),In(this,"abort"),cm(this))};he.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cm(this,!0)),Ft.$.N.call(this)};he.La=function(){this.s||(this.G||this.v||this.l?YR(this):this.kb())};he.kb=function(){YR(this)};function YR(t){if(t.h&&typeof F1<"u"&&(!t.C[1]||hi(t)!=4||t.da()!=2)){if(t.v&&hi(t)==4)Y1(t.La,0,t);else if(In(t,"readystatechange"),hi(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(VR)[1]||null;!i&&xe.self&&xe.self.location&&(i=xe.self.location.protocol.slice(0,-1)),r=!rU.test(i?i.toLowerCase():"")}n=r}if(n)In(t,"complete"),In(t,"success");else{t.m=6;try{var s=2<hi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",KR(t)}}finally{cm(t)}}}}function cm(t,e){if(t.g){JR(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||In(t,"ready");try{n.onreadystatechange=r}catch{}}}function JR(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(xe.clearTimeout(t.A),t.A=null)}he.isActive=function(){return!!this.g};function hi(t){return t.g?t.g.readyState:0}he.da=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}};he.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};he.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),nU(e)}};function zT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case GR:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function oU(t){const e={};t=(t.g&&2<=hi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ou(t[r]))continue;var n=NF(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}SF(e,function(r){return r.join(", ")})}he.Ia=function(){return this.m};he.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function QR(t){let e="";return $1(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function t0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=QR(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):At(t,e,n))}function vc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function XR(t){this.Ga=0,this.j=[],this.l=new tm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=vc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=vc("baseRetryDelayMs",5e3,t),this.hb=vc("retryDelaySeedMs",1e4,t),this.eb=vc("forwardChannelMaxRetries",2,t),this.xa=vc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new $R(t&&t.concurrentRequestLimit),this.Ja=new ZF,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}he=XR.prototype;he.ra=8;he.H=1;function n0(t){if(ZR(t),t.H==3){var e=t.W++,n=ns(t.I);if(At(n,"SID",t.K),At(n,"RID",e),At(n,"TYPE","terminate"),Ah(t,n),e=new wh(t,t.l,e),e.L=2,e.A=om(ns(n)),n=!1,xe.navigator&&xe.navigator.sendBeacon)try{n=xe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&xe.Image&&(new Image().src=e.A,n=!0),n||(e.g=a2(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Sh(e)}s2(t)}function um(t){t.g&&(i0(t),t.g.cancel(),t.g=null)}function ZR(t){um(t),t.u&&(xe.clearTimeout(t.u),t.u=null),xf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&xe.clearTimeout(t.m),t.m=null)}function hm(t){if(!HR(t.i)&&!t.m){t.m=!0;var e=t.Na;Mu||ER(),Pu||(Mu(),Pu=!0),G1.add(e,t),t.C=0}}function aU(t,e){return zR(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Eh(Ln(t.Na,t,e),i2(t,t.C)),t.C++,!0)}he.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new wh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=fR(s),pR(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=e2(this,i,e),n=ns(this.I),At(n,"RID",t),At(n,"CVER",22),this.F&&At(n,"X-HTTP-Session-Id",this.F),Ah(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(QR(s)))+"&"+e:this.o&&t0(n,this.o,s)),Z1(this.i,i),this.bb&&At(n,"TYPE","init"),this.P?(At(n,"$req",e),At(n,"SID","null"),i.aa=!0,v_(i,n,null)):v_(i,n,e),this.H=2}}else this.H==3&&(t?jT(this,t):this.j.length==0||HR(this.i)||jT(this))};function jT(t,e){var n;e?n=e.m:n=t.W++;const r=ns(t.I);At(r,"SID",t.K),At(r,"RID",n),At(r,"AID",t.V),Ah(t,r),t.o&&t.s&&t0(r,t.o,t.s),n=new wh(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=e2(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Z1(t.i,n),v_(n,r,e)}function Ah(t,e){t.na&&$1(t.na,function(n,r){At(e,r,n)}),t.h&&LR({},function(n,r){At(e,r,n)})}function e2(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ln(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{eU(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function t2(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Mu||ER(),Pu||(Mu(),Pu=!0),G1.add(e,t),t.A=0}}function r0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Eh(Ln(t.Ma,t),i2(t,t.A)),t.A++,!0)}he.Ma=function(){if(this.u=null,n2(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Eh(Ln(this.jb,this),t)}};he.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hn(10),um(this),n2(this))};function i0(t){t.B!=null&&(xe.clearTimeout(t.B),t.B=null)}function n2(t){t.g=new wh(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ns(t.wa);At(e,"RID","rpc"),At(e,"SID",t.K),At(e,"AID",t.V),At(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&At(e,"TO",t.qa),At(e,"TYPE","xmlhttp"),Ah(t,e),t.o&&t.s&&t0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=om(ns(e)),n.u=null,n.S=!0,MR(n,t)}he.ib=function(){this.v!=null&&(this.v=null,um(this),r0(this),Hn(19))};function xf(t){t.v!=null&&(xe.clearTimeout(t.v),t.v=null)}function r2(t,e){var n=null;if(t.g==e){xf(t),i0(t),t.g=null;var r=2}else if(E_(t.i,e))n=e.F,jR(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=nm(),In(r,new CR(r,n)),hm(t)}else t2(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&aU(t,e)||r==2&&r0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Vo(t,5);break;case 4:Vo(t,10);break;case 3:Vo(t,6);break;default:Vo(t,2)}}}function i2(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Vo(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ln(t.pb,t);n||(n=new Jo("//www.google.com/images/cleardot.gif"),xe.location&&xe.location.protocol=="http"||Pf(n,"https"),om(n)),tU(n.toString(),r)}else Hn(2);t.H=0,t.h&&t.h.za(e),s2(t),ZR(t)}he.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Hn(2)):(this.l.info("Failed to ping google.com"),Hn(1))};function s2(t){if(t.H=0,t.ma=[],t.h){const e=WR(t.i);(e.length!=0||t.j.length!=0)&&(DT(t.ma,e),DT(t.ma,t.j),t.i.i.length=0,U1(t.j),t.j.length=0),t.h.ya()}}function o2(t,e,n){var r=n instanceof Jo?ns(n):new Jo(n);if(r.g!="")e&&(r.g=e+"."+r.g),Df(r,r.m);else{var i=xe.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Jo(null);r&&Pf(s,r),e&&(s.g=e),i&&Df(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&At(r,n,e),At(r,"VER",t.ra),Ah(t,r),r}function a2(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ft(new am({ob:n})):new Ft(t.va),e.Oa(t.J),e}he.isActive=function(){return!!this.h&&this.h.isActive(this)};function l2(){}he=l2.prototype;he.Ba=function(){};he.Aa=function(){};he.za=function(){};he.ya=function(){};he.isActive=function(){return!0};he.Va=function(){};function Lf(){if(Il&&!(10<=Number(bF)))throw Error("Environmental error: no available transport.")}Lf.prototype.g=function(t,e){return new br(t,e)};function br(t,e){dn.call(this),this.g=new XR(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ou(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ou(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ic(this)}pn(br,dn);br.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Hn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=o2(t,null,t.Y),hm(t)};br.prototype.close=function(){n0(this.g)};br.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=q1(t),t=n);e.j.push(new JF(e.fb++,t)),e.H==3&&hm(e)};br.prototype.N=function(){this.g.h=null,delete this.j,n0(this.g),delete this.g,br.$.N.call(this)};function c2(t){Q1.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}pn(c2,Q1);function u2(){X1.call(this),this.status=1}pn(u2,X1);function ic(t){this.g=t}pn(ic,l2);ic.prototype.Ba=function(){In(this.g,"a")};ic.prototype.Aa=function(t){In(this.g,new c2(t))};ic.prototype.za=function(t){In(this.g,new u2)};ic.prototype.ya=function(){In(this.g,"b")};function lU(){this.blockSize=-1}function Qr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}pn(Qr,lU);Qr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Sg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Qr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Sg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Sg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Sg(this,r),i=0;break}}this.h=i,this.i+=e};Qr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ft(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var cU={};function s0(t){return-128<=t&&128>t?yF(t,function(e){return new ft([e|0],0>e?-1:0)}):new ft([t|0],0>t?-1:0)}function di(t){if(isNaN(t)||!isFinite(t))return cl;if(0>t)return vn(di(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=T_;return new ft(e,0)}function h2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return vn(h2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=di(Math.pow(e,8)),r=cl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=di(Math.pow(e,s)),r=r.R(s).add(di(o))):(r=r.R(n),r=r.add(di(o)))}return r}var T_=4294967296,cl=s0(0),w_=s0(1),WT=s0(16777216);he=ft.prototype;he.ea=function(){if(kr(this))return-vn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:T_+r)*e,e*=T_}return t};he.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ki(this))return"0";if(kr(this))return"-"+vn(this).toString(t);for(var e=di(Math.pow(t,6)),n=this,r="";;){var i=Ff(n,e).g;n=Vf(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Ki(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};he.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ki(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function kr(t){return t.h==-1}he.X=function(t){return t=Vf(this,t),kr(t)?-1:Ki(t)?0:1};function vn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ft(n,~t.h).add(w_)}he.abs=function(){return kr(this)?vn(this):this};he.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ft(n,n[n.length-1]&-2147483648?-1:0)};function Vf(t,e){return t.add(vn(e))}he.R=function(t){if(Ki(this)||Ki(t))return cl;if(kr(this))return kr(t)?vn(this).R(vn(t)):vn(vn(this).R(t));if(kr(t))return vn(this.R(vn(t)));if(0>this.X(WT)&&0>t.X(WT))return di(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,hd(n,2*r+2*i),n[2*r+2*i+1]+=s*l,hd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,hd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,hd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ft(n,0)};function hd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function bc(t,e){this.g=t,this.h=e}function Ff(t,e){if(Ki(e))throw Error("division by zero");if(Ki(t))return new bc(cl,cl);if(kr(t))return e=Ff(vn(t),e),new bc(vn(e.g),vn(e.h));if(kr(e))return e=Ff(t,vn(e)),new bc(vn(e.g),e.h);if(30<t.g.length){if(kr(t)||kr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=w_,r=e;0>=r.X(t);)n=qT(n),r=qT(r);var i=Ma(n,1),s=Ma(r,1);for(r=Ma(r,2),n=Ma(n,2);!Ki(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Ma(r,1),n=Ma(n,1)}return e=Vf(t,i.R(e)),new bc(i,e)}for(i=cl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=di(n),o=s.R(e);kr(o)||0<o.X(t);)n-=r,s=di(n),o=s.R(e);Ki(s)&&(s=w_),i=i.add(s),t=Vf(t,o)}return new bc(i,t)}he.gb=function(t){return Ff(this,t).h};he.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ft(n,this.h&t.h)};he.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ft(n,this.h|t.h)};he.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ft(n,this.h^t.h)};function qT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ft(n,t.h)}function Ma(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ft(i,t.h)}Lf.prototype.createWebChannel=Lf.prototype.g;br.prototype.send=br.prototype.u;br.prototype.open=br.prototype.m;br.prototype.close=br.prototype.close;rm.NO_ERROR=0;rm.TIMEOUT=8;rm.HTTP_ERROR=6;kR.COMPLETE="complete";RR.EventType=Th;Th.OPEN="a";Th.CLOSE="b";Th.ERROR="c";Th.MESSAGE="d";dn.prototype.listen=dn.prototype.O;Ft.prototype.listenOnce=Ft.prototype.P;Ft.prototype.getLastError=Ft.prototype.Sa;Ft.prototype.getLastErrorCode=Ft.prototype.Ia;Ft.prototype.getStatus=Ft.prototype.da;Ft.prototype.getResponseJson=Ft.prototype.Wa;Ft.prototype.getResponseText=Ft.prototype.ja;Ft.prototype.send=Ft.prototype.ha;Ft.prototype.setWithCredentials=Ft.prototype.Oa;Qr.prototype.digest=Qr.prototype.l;Qr.prototype.reset=Qr.prototype.reset;Qr.prototype.update=Qr.prototype.j;ft.prototype.add=ft.prototype.add;ft.prototype.multiply=ft.prototype.R;ft.prototype.modulo=ft.prototype.gb;ft.prototype.compare=ft.prototype.X;ft.prototype.toNumber=ft.prototype.ea;ft.prototype.toString=ft.prototype.toString;ft.prototype.getBits=ft.prototype.D;ft.fromNumber=di;ft.fromString=h2;var uU=function(){return new Lf},hU=function(){return nm()},Ig=rm,dU=kR,fU=Aa,GT={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},dd=RR,pU=Ft,mU=Qr,ul=ft;const KT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new uh("@firebase/firestore");function Ec(){return ha.logLevel}function le(t,...e){if(ha.logLevel<=Ge.DEBUG){const n=e.map(o0);ha.debug(`Firestore (${sc}): ${t}`,...n)}}function Ii(t,...e){if(ha.logLevel<=Ge.ERROR){const n=e.map(o0);ha.error(`Firestore (${sc}): ${t}`,...n)}}function Al(t,...e){if(ha.logLevel<=Ge.WARN){const n=e.map(o0);ha.warn(`Firestore (${sc}): ${t}`,...n)}}function o0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t="Unexpected state"){const e=`FIRESTORE (${sc}) INTERNAL ASSERTION FAILED: `+t;throw Ii(e),new Error(e)}function Et(t,e){t||De()}function $e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Pi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(On.UNAUTHENTICATED))}shutdown(){}}class yU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _U{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string"),new d2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string"),new On(e)}}class vU{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bU{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new vU(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Et(typeof n.token=="string"),this.R=n.token,new EU(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=wU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ot(t,e){return t<e?-1:t>e?1:0}function Cl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ve(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Kt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Kt(0,0))}static max(){return new Fe(new Kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,r){n===void 0?n=0:n>e.length&&De(),r===void 0?r=e.length-n:r>e.length-n&&De(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Nt extends Fu{construct(e,n,r){return new Nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const SU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends Fu{construct(e,n,r){return new Sn(e,n,r)}static isValidIdentifier(e){return SU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Sn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ve(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ve(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ve(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ve(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(n)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Nt.fromString(e))}static fromName(e){return new Ae(Nt.fromString(e).popFirst(5))}static empty(){return new Ae(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Nt(e.slice()))}}function IU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(r===1e9?new Kt(n+1,0):new Kt(n,r));return new eo(i,Ae.empty(),e)}function AU(t){return new eo(t.readTime,t.key,-1)}class eo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new eo(Fe.min(),Ae.empty(),-1)}static max(){return new eo(Fe.max(),Ae.empty(),-1)}}function CU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:ot(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==kU)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new yi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Zc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=l0(r.target.error);this.V.reject(new Zc(e,i))}}static open(e,n,r,i){try{return new a0(n,e.transaction(i,r))}catch(s){throw new Zc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new NU(n)}}class Fo{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Fo.S(Yt())===12.2&&Ii("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return le("SimpleDb","Removing database:",e),Oo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!t1())return!1;if(Fo.C())return!0;const e=Yt(),n=Fo.S(e),r=0<n&&n<10,i=Fo.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(le("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Zc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ve(G.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ve(G.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Zc(e,o))},i.onupgradeneeded=s=>{le("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{le("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=a0.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),q.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(le("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class OU{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Oo(this.k.delete())}}class Zc extends ve{constructor(e,n){super(G.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function kh(t){return t.name==="IndexedDbTransactionError"}class NU{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(le("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Oo(r)}add(e){return le("SimpleDb","ADD",this.store.name,e,e),Oo(this.store.add(e))}get(e){return Oo(this.store.get(e)).next(n=>(n===void 0&&(n=null),le("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return le("SimpleDb","DELETE",this.store.name,e),Oo(this.store.delete(e))}count(){return le("SimpleDb","COUNT",this.store.name),Oo(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new q((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new q((r,i)=>{n.onerror=s=>{const o=l0(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new OU(a),c=n(a.primaryKey,a.value,l);if(c instanceof q){const u=c.catch(h=>(l.done(),q.reject(h)));r.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>q.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Oo(t){return new q((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=l0(r.target.error);n(i)}})}let YT=!1;function l0(t){const e=Fo.S(Yt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YT||(YT=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}c0._e=-1;function dm(t){return t==null}function Uf(t){return t===0&&1/t==-1/0}function MU(t){return typeof t=="number"&&Number.isInteger(t)&&!Uf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ca(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function p2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}}class fd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _n{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_n.RED,this.left=i??_n.EMPTY,this.right=s??_n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _n(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,n,r,i,s){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new QT(this.data.getIterator())}getIteratorFrom(e){return new QT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new An(this.comparator);return n.data=e,n}}class QT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new fr([])}unionWith(e){let n=new An(Sn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new fr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new m2("Invalid base64 string: "+s):s}}(e);return new Fn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const PU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(t){if(Et(!!t),typeof t=="string"){let e=0;const n=PU.exec(t);if(Et(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(t.seconds),nanos:jt(t.nanos)}}function jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function da(t){return typeof t=="string"?Fn.fromBase64String(t):Fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function h0(t){const e=t.mapValue.fields.__previous_value__;return u0(e)?h0(e):e}function Uu(t){const e=to(t.mapValue.fields.__local_write_time__.timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Bu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?u0(t)?4:xU(t)?9007199254740991:10:De()}function Ai(t,e){if(t===e)return!0;const n=fa(t);if(n!==fa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Uu(t).isEqual(Uu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=to(i.timestampValue),a=to(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return da(i.bytesValue).isEqual(da(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return jt(i.geoPointValue.latitude)===jt(s.geoPointValue.latitude)&&jt(i.geoPointValue.longitude)===jt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return jt(i.integerValue)===jt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=jt(i.doubleValue),a=jt(s.doubleValue);return o===a?Uf(o)===Uf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Cl(t.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(JT(o)!==JT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ai(o[l],a[l])))return!1;return!0}(t,e);default:return De()}}function $u(t,e){return(t.values||[]).find(n=>Ai(n,e))!==void 0}function kl(t,e){if(t===e)return 0;const n=fa(t),r=fa(e);if(n!==r)return ot(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=jt(s.integerValue||s.doubleValue),l=jt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return XT(t.timestampValue,e.timestampValue);case 4:return XT(Uu(t),Uu(e));case 5:return ot(t.stringValue,e.stringValue);case 6:return function(s,o){const a=da(s),l=da(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ot(a[c],l[c]);if(u!==0)return u}return ot(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ot(jt(s.latitude),jt(o.latitude));return a!==0?a:ot(jt(s.longitude),jt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=kl(a[c],l[c]);if(u)return u}return ot(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===pd.mapValue&&o===pd.mapValue)return 0;if(s===pd.mapValue)return 1;if(o===pd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=ot(l[h],u[h]);if(d!==0)return d;const f=kl(a[l[h]],c[u[h]]);if(f!==0)return f}return ot(l.length,u.length)}(t.mapValue,e.mapValue);default:throw De()}}function XT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ot(t,e);const n=to(t),r=to(e),i=ot(n.seconds,r.seconds);return i!==0?i:ot(n.nanos,r.nanos)}function Rl(t){return S_(t)}function S_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=to(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return da(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=S_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${S_(n.fields[o])}`;return i+"}"}(t.mapValue):De()}function I_(t){return!!t&&"integerValue"in t}function d0(t){return!!t&&"arrayValue"in t}function ZT(t){return!!t&&"nullValue"in t}function ew(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wd(t){return!!t&&"mapValue"in t}function eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ca(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=eu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=Sn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=eu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Wd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ca(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Xn(eu(this.value))}}function g2(t){const e=[];return Ca(t.fields,(n,r)=>{const i=new Sn([n]);if(Wd(r)){const s=g2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new fr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Pn(e,0,Fe.min(),Fe.min(),Fe.min(),Xn.empty(),0)}static newFoundDocument(e,n,r,i){return new Pn(e,1,n,Fe.min(),r,i,0)}static newNoDocument(e,n){return new Pn(e,2,n,Fe.min(),Fe.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Fe.min(),Fe.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n){this.position=e,this.inclusive=n}}function tw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Ae.comparator(Ae.fromName(o.referenceValue),n.key):r=kl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ai(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n="asc"){this.field=e,this.dir=n}}function LU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{}class Jt extends y2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new FU(e,n,r):n==="array-contains"?new $U(e,r):n==="in"?new HU(e,r):n==="not-in"?new zU(e,r):n==="array-contains-any"?new jU(e,r):new Jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UU(e,r):new BU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(kl(n,this.value)):n!==null&&fa(this.value)===fa(n)&&this.matchesComparison(kl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends y2{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ci(e,n)}matches(e){return _2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function _2(t){return t.op==="and"}function v2(t){return VU(t)&&_2(t)}function VU(t){for(const e of t.filters)if(e instanceof Ci)return!1;return!0}function A_(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+Rl(t.value);if(v2(t))return t.filters.map(e=>A_(e)).join(",");{const e=t.filters.map(n=>A_(n)).join(",");return`${t.op}(${e})`}}function b2(t,e){return t instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.field.isEqual(i.field)&&Ai(r.value,i.value)}(t,e):t instanceof Ci?function(r,i){return i instanceof Ci&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&b2(o,i.filters[a]),!0):!1}(t,e):void De()}function E2(t){return t instanceof Jt?function(n){return`${n.field.canonicalString()} ${n.op} ${Rl(n.value)}`}(t):t instanceof Ci?function(n){return n.op.toString()+" {"+n.getFilters().map(E2).join(" ,")+"}"}(t):"Filter"}class FU extends Jt{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class UU extends Jt{constructor(e,n){super(e,"in",n),this.keys=T2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class BU extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=T2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function T2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ae.fromName(r.referenceValue))}class $U extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return d0(n)&&$u(n.arrayValue,this.value)}}class HU extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$u(this.value.arrayValue,n)}}class zU extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$u(this.value.arrayValue,n)}}class jU extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!d0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$u(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WU{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function rw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new WU(t,e,n,r,i,s,o)}function f0(t){const e=$e(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>A_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),dm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rl(r)).join(",")),e.ce=n}return e.ce}function p0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!b2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nw(t.startAt,e.startAt)&&nw(t.endAt,e.endAt)}function C_(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function qU(t,e,n,r,i,s,o,a){return new fm(t,e,n,r,i,s,o,a)}function pm(t){return new fm(t)}function iw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GU(t){return t.collectionGroup!==null}function tu(t){const e=$e(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new An(Sn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new $f(s,r))}),n.has(Sn.keyField().canonicalString())||e.le.push(new $f(Sn.keyField(),r))}return e.le}function _i(t){const e=$e(t);return e.he||(e.he=KU(e,tu(t))),e.he}function KU(t,e){if(t.limitType==="F")return rw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new $f(i.field,s)});const n=t.endAt?new Bf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bf(t.startAt.position,t.startAt.inclusive):null;return rw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function k_(t,e,n){return new fm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mm(t,e){return p0(_i(t),_i(e))&&t.limitType===e.limitType}function w2(t){return`${f0(_i(t))}|lt:${t.limitType}`}function Va(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>E2(i)).join(", ")}]`),dm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Rl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Rl(i)).join(",")),`Target(${r})`}(_i(t))}; limitType=${t.limitType})`}function gm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of tu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=tw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,tu(r),i)||r.endAt&&!function(o,a,l){const c=tw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,tu(r),i))}(t,e)}function YU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function S2(t){return(e,n)=>{let r=!1;for(const i of tu(t)){const s=JU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function JU(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?kl(l,c):De()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ca(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return p2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=new Pt(Ae.comparator);function rs(){return QU}const I2=new Pt(Ae.comparator);function Rc(...t){let e=I2;for(const n of t)e=e.insert(n.key,n);return e}function A2(t){let e=I2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Uo(){return nu()}function C2(){return nu()}function nu(){return new oc(t=>t.toString(),(t,e)=>t.isEqual(e))}const XU=new Pt(Ae.comparator),ZU=new An(Ae.comparator);function Ke(...t){let e=ZU;for(const n of t)e=e.add(n);return e}const eB=new An(ot);function tB(){return eB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uf(e)?"-0":e}}function R2(t){return{integerValue:""+t}}function nB(t,e){return MU(e)?R2(e):k2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this._=void 0}}function rB(t,e,n){return t instanceof Hf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&u0(s)&&(s=h0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ol?N2(t,e):t instanceof Hu?M2(t,e):function(i,s){const o=O2(i,s),a=sw(o)+sw(i.Ie);return I_(o)&&I_(i.Ie)?R2(a):k2(i.serializer,a)}(t,e)}function iB(t,e,n){return t instanceof Ol?N2(t,e):t instanceof Hu?M2(t,e):n}function O2(t,e){return t instanceof zf?function(r){return I_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Hf extends ym{}class Ol extends ym{constructor(e){super(),this.elements=e}}function N2(t,e){const n=P2(e);for(const r of t.elements)n.some(i=>Ai(i,r))||n.push(r);return{arrayValue:{values:n}}}class Hu extends ym{constructor(e){super(),this.elements=e}}function M2(t,e){let n=P2(e);for(const r of t.elements)n=n.filter(i=>!Ai(i,r));return{arrayValue:{values:n}}}class zf extends ym{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function sw(t){return jt(t.integerValue||t.doubleValue)}function P2(t){return d0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e,n){this.field=e,this.transform=n}}function oB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ol&&i instanceof Ol||r instanceof Hu&&i instanceof Hu?Cl(r.elements,i.elements,Ai):r instanceof zf&&i instanceof zf?Ai(r.Ie,i.Ie):r instanceof Hf&&i instanceof Hf}(t.transform,e.transform)}class aB{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _m{}function D2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new m0(t.key,yr.none()):new Rh(t.key,t.data,yr.none());{const n=t.data,r=Xn.empty();let i=new An(Sn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ho(t.key,r,new fr(i.toArray()),yr.none())}}function lB(t,e,n){t instanceof Rh?function(i,s,o){const a=i.value.clone(),l=aw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ho?function(i,s,o){if(!qd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=aw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(x2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ru(t,e,n,r){return t instanceof Rh?function(s,o,a,l){if(!qd(s.precondition,o))return a;const c=s.value.clone(),u=lw(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ho?function(s,o,a,l){if(!qd(s.precondition,o))return a;const c=lw(s.fieldTransforms,l,o),u=o.data;return u.setAll(x2(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return qd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function cB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=O2(r.transform,i||null);s!=null&&(n===null&&(n=Xn.empty()),n.set(r.field,s))}return n||null}function ow(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cl(r,i,(s,o)=>oB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Rh extends _m{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ho extends _m{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function x2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aw(t,e,n){const r=new Map;Et(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iB(o,a,n[i]))}return r}function lw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,rB(s,o,e))}return r}class m0 extends _m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uB extends _m{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lB(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=C2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=D2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,(n,r)=>ow(n,r))&&Cl(this.baseMutations,e.baseMutations,(n,r)=>ow(n,r))}}class g0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Et(e.mutations.length===r.length);let i=function(){return XU}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new g0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,Qe;function pB(t){switch(t){default:return De();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function L2(t){if(t===void 0)return Ii("GRPC error has no .code"),G.UNKNOWN;switch(t){case $t.OK:return G.OK;case $t.CANCELLED:return G.CANCELLED;case $t.UNKNOWN:return G.UNKNOWN;case $t.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case $t.INTERNAL:return G.INTERNAL;case $t.UNAVAILABLE:return G.UNAVAILABLE;case $t.UNAUTHENTICATED:return G.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case $t.NOT_FOUND:return G.NOT_FOUND;case $t.ALREADY_EXISTS:return G.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return G.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case $t.ABORTED:return G.ABORTED;case $t.OUT_OF_RANGE:return G.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return G.UNIMPLEMENTED;case $t.DATA_LOSS:return G.DATA_LOSS;default:return De()}}(Qe=$t||($t={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=new ul([4294967295,4294967295],0);function cw(t){const e=mB().encode(t),n=new mU;return n.update(e),new Uint8Array(n.digest())}function uw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ul([n,r],0),new ul([i,s],0)]}class y0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oc(`Invalid padding: ${n}`);if(r<0)throw new Oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ul.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ul.fromNumber(r)));return i.compare(gB)===1&&(i=new ul([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=cw(e),[r,i]=uw(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new y0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=cw(e),[r,i]=uw(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Oh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vm(Fe.min(),i,new Pt(ot),rs(),Ke())}}class Oh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Oh(r,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class V2{constructor(e,n){this.targetId=e,this.fe=n}}class F2{constructor(e,n,r=Fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hw{constructor(){this.ge=0,this.pe=fw(),this.ye=Fn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ke(),n=Ke(),r=Ke();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:De()}}),new Oh(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=fw()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Et(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class yB{constructor(e){this.Be=e,this.ke=new Map,this.qe=rs(),this.Qe=dw(),this.Ke=new Pt(ot)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:De()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(C_(s))if(r===0){const o=new Ae(s.path);this.We(n,o,Pn.newNoDocument(o,Fe.min()))}else Et(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=da(r).toUint8Array()}catch(l){if(l instanceof m2)return Al("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new y0(o,i,s)}catch(l){return Al(l instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&C_(a.target)){const l=new Ae(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Pn.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Ke();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new vm(e,n,this.Ke,this.qe,r);return this.qe=rs(),this.Qe=dw(),this.Ke=new Pt(ot),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new hw,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new An(ot),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new hw),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function dw(){return new Pt(Ae.comparator)}function fw(){return new Pt(Ae.comparator)}const _B={asc:"ASCENDING",desc:"DESCENDING"},vB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bB={and:"AND",or:"OR"};class EB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function R_(t,e){return t.useProto3Json||dm(e)?e:{value:e}}function jf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TB(t,e){return jf(t,e.toTimestamp())}function vi(t){return Et(!!t),Fe.fromTimestamp(function(n){const r=to(n);return new Kt(r.seconds,r.nanos)}(t))}function _0(t,e){return O_(t,e).canonicalString()}function O_(t,e){const n=function(i){return new Nt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function B2(t){const e=Nt.fromString(t);return Et(W2(e)),e}function N_(t,e){return _0(t.databaseId,e.path)}function Ag(t,e){const n=B2(e);if(n.get(1)!==t.databaseId.projectId)throw new ve(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ve(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(H2(n))}function $2(t,e){return _0(t.databaseId,e)}function wB(t){const e=B2(t);return e.length===4?Nt.emptyPath():H2(e)}function M_(t){return new Nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function H2(t){return Et(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pw(t,e,n){return{name:N_(t,e),fields:n.value.mapValue.fields}}function SB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:De()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Et(u===void 0||typeof u=="string"),Fn.fromBase64String(u||"")):(Et(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Fn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?G.UNKNOWN:L2(c.code);return new ve(u,c.message||"")}(o);n=new F2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ag(t,r.document.name),s=vi(r.document.updateTime),o=r.document.createTime?vi(r.document.createTime):Fe.min(),a=new Xn({mapValue:{fields:r.document.fields}}),l=Pn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Gd(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ag(t,r.document),s=r.readTime?vi(r.readTime):Fe.min(),o=Pn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Gd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ag(t,r.document),s=r.removedTargetIds||[];n=new Gd([],s,i,null)}else{if(!("filter"in e))return De();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new fB(i,s),a=r.targetId;n=new V2(a,o)}}return n}function IB(t,e){let n;if(e instanceof Rh)n={update:pw(t,e.key,e.value)};else if(e instanceof m0)n={delete:N_(t,e.key)};else if(e instanceof ho)n={update:pw(t,e.key,e.data),updateMask:DB(e.fieldMask)};else{if(!(e instanceof uB))return De();n={verify:N_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Hf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ol)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof zf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw De()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:TB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:De()}(t,e.precondition)),n}function AB(t,e){return t&&t.length>0?(Et(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?vi(i.updateTime):vi(s);return o.isEqual(Fe.min())&&(o=vi(s)),new aB(o,i.transformResults||[])}(n,e))):[]}function CB(t,e){return{documents:[$2(t,e.path)]}}function kB(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$2(t,i);const s=function(c){if(c.length!==0)return j2(Ci.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Fa(d.field),direction:NB(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=R_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function RB(t){let e=wB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Et(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=z2(h);return d instanceof Ci&&v2(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new $f(Ua(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,dm(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Bf(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Bf(f,d)}(n.endAt)),qU(e,i,o,s,a,"F",l,c)}function OB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function z2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ua(n.unaryFilter.field);return Jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ua(n.unaryFilter.field);return Jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ua(n.unaryFilter.field);return Jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ua(n.unaryFilter.field);return Jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(t):t.fieldFilter!==void 0?function(n){return Jt.create(Ua(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ci.create(n.compositeFilter.filters.map(r=>z2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De()}}(n.compositeFilter.op))}(t):De()}function NB(t){return _B[t]}function MB(t){return vB[t]}function PB(t){return bB[t]}function Fa(t){return{fieldPath:t.canonicalString()}}function Ua(t){return Sn.fromServerFormat(t.fieldPath)}function j2(t){return t instanceof Jt?function(n){if(n.op==="=="){if(ew(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NAN"}};if(ZT(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ew(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NAN"}};if(ZT(n.value))return{unaryFilter:{field:Fa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(n.field),op:MB(n.op),value:n.value}}}(t):t instanceof Ci?function(n){const r=n.getFilters().map(i=>j2(i));return r.length===1?r[0]:{compositeFilter:{op:PB(n.op),filters:r}}}(t):De()}function DB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function W2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r,i,s=Fe.min(),o=Fe.min(),a=Fn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e){this.ct=e}}function LB(t){const e=RB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?k_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(){this._n=new FB}addToCollectionParentIndex(e,n){return this._n.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(eo.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class FB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new An(Nt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new An(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Nl(0)}static Ln(){return new Nl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(){this.changes=new oc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ru(r.mutation,i,fr.empty(),Kt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ke()){const i=Uo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Rc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Uo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=rs();const o=nu(),a=function(){return nu()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof ho)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ru(u.mutation,c,u.mutation.getFieldMask(),Kt.now())):o.set(c.key,fr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new BB(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=nu();let i=new Pt((o,a)=>o-a),s=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||fr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Ke()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=C2();u.forEach(d=>{if(!s.has(d)){const f=D2(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(Uo());let a=-1,l=s;return o.next(c=>q.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ke())).next(u=>({batchId:a,changes:A2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(r=>{let i=Rc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Rc();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,l=>{const c=function(h,d){return new fm(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Pn.newInvalidDocument(u)))});let a=Rc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&ru(u.mutation,c,fr.empty(),Kt.now()),gm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return q.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:vi(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:LB(i.bundledQuery),readTime:vi(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(){this.overlays=new Pt(Ae.comparator),this.hr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Uo();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Uo(),s=n.length+1,o=new Ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Uo(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Uo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return q.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dB(n,r));let s=this.hr.get(n);s===void 0&&(s=Ke(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this.Pr=new An(sn.Ir),this.Tr=new An(sn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new sn(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new sn(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new Ae(new Nt([])),r=new sn(n,e),i=new sn(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Ae(new Nt([])),r=new sn(n,e),i=new sn(n,e+1);let s=Ke();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new sn(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sn{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Ae.comparator(e.key,n.key)||ot(e.pr,n.pr)}static Er(e,n){return ot(e.pr,n.pr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new An(sn.Ir)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hB(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new sn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sn(n,0),i=new sn(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new An(ot);return n.forEach(i=>{const s=new sn(i,0),o=new sn(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),q.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Ae.isDocumentKey(s)||(s=s.child(""));const o=new sn(new Ae(s),0);let a=new An(ot);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),q.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Et(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return q.forEach(n.mutations,i=>{const s=new sn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new sn(n,0),i=this.wr.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e){this.vr=e,this.docs=function(){return new Pt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let r=rs();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=rs();const o=n.path,a=new Ae(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||CU(AU(u),r)<=0||(i.has(u.key)||gm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){De()}Fr(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qB(this)}getSize(e){return q.resolve(this.size)}}class qB extends UB{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e){this.persistence=e,this.Mr=new oc(n=>f0(n),p0),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new v0,this.targetCount=0,this.Lr=Nl.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),q.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Nl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.qn(n),q.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n){this.Br={},this.overlays={},this.kr=new c0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new GB(this),this.indexManager=new VB,this.remoteDocumentCache=function(i){return new WB(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new xB(n),this.$r=new HB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new jB(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const i=new YB(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return q.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class YB extends RU{constructor(e){super(),this.currentSequenceNumber=e}}class b0{constructor(e){this.persistence=e,this.zr=new v0,this.jr=null}static Hr(e){return new b0(e)}get Jr(){if(this.jr)return this.jr;throw De()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),q.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Jr,r=>{const i=Ae.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Fe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return q.or([()=>q.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Ke(),i=Ke();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new E0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return C4()?8:Fo.v(Yt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new JB;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Ec()<=Ge.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Va(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),q.resolve()):(Ec()<=Ge.DEBUG&&le("QueryEngine","Query:",Va(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ec()<=Ge.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Va(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_i(n))):q.resolve())}ji(e,n){if(iw(n))return q.resolve(null);let r=_i(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=k_(n,null,"F"),r=_i(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ke(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,k_(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return iw(n)||i.isEqual(Fe.min())?q.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?q.resolve(null):(Ec()<=Ge.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Va(n)),this.es(e,o,n,IU(i,-1)).next(a=>a))})}Zi(e,n){let r=new An(S2(e));return n.forEach((i,s)=>{gm(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Ec()<=Ge.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Va(n)),this.zi.getDocumentsMatchingQuery(e,n,eo.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Pt(ot),this.rs=new oc(s=>f0(s),p0),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $B(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function ZB(t,e,n,r){return new XB(t,e,n,r)}async function q2(t,e){const n=$e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ke();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function e8(t,e){const n=$e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=q.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(m=>{const g=c.docVersions.get(p);Et(g!==null),m.version.compareTo(g)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ke();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function G2(t){const e=$e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function t8(t,e){const n=$e(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Fn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let l=rs(),c=Ke();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(n8(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(Fe.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function n8(t,e,n){let r=Ke(),i=Ke();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=rs();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function r8(t,e){const n=$e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function i8(t,e){const n=$e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new xs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function P_(t,e,n){const r=$e(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!kh(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function mw(t,e,n){const r=$e(t);let i=Fe.min(),s=Ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=$e(l),d=h.rs.get(u);return d!==void 0?q.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,_i(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Fe.min(),n?s:Ke())).next(a=>(s8(r,YU(e),a),{documents:a,hs:s})))}function s8(t,e,n){let r=t.ss.get(e)||Fe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class gw{constructor(){this.activeTargetIds=tB()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o8{constructor(){this.no=new gw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new gw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md=null;function Cg(){return md===null?md=function(){return 268435456+Math.round(2147483648*Math.random())}():md++,"0x"+md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class u8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=Cg(),l=this.bo(n,r.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,i).then(u=>(le("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Al("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=l8[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=Cg();return new Promise((o,a)=>{const l=new pU;l.setWithCredentials(!0),l.listenOnce(dU.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ig.NO_ERROR:const u=l.getResponseJson();le(Cn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Ig.TIMEOUT:le(Cn,`RPC '${e}' ${s} timed out`),a(new ve(G.DEADLINE_EXCEEDED,"Request time out"));break;case Ig.HTTP_ERROR:const h=l.getStatus();if(le(Cn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(y)>=0?y:G.UNKNOWN}(f.status);a(new ve(p,f.message))}else a(new ve(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ve(G.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{le(Cn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);le(Cn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=Cg(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uU(),a=hU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");le(Cn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new c8({lo:g=>{f?le(Cn,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(d||(le(Cn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),le(Cn,`RPC '${e}' stream ${i} sending:`,g),h.send(g))},ho:()=>h.close()}),m=(g,y,_)=>{g.listen(y,v=>{try{_(v)}catch(w){setTimeout(()=>{throw w},0)}})};return m(h,dd.EventType.OPEN,()=>{f||le(Cn,`RPC '${e}' stream ${i} transport opened.`)}),m(h,dd.EventType.CLOSE,()=>{f||(f=!0,le(Cn,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(h,dd.EventType.ERROR,g=>{f||(f=!0,Al(Cn,`RPC '${e}' stream ${i} transport errored:`,g),p.Vo(new ve(G.UNAVAILABLE,"The operation could not be completed")))}),m(h,dd.EventType.MESSAGE,g=>{var y;if(!f){const _=g.data[0];Et(!!_);const v=_,w=v.error||((y=v[0])===null||y===void 0?void 0:y.error);if(w){le(Cn,`RPC '${e}' stream ${i} received error:`,w);const S=w.status;let A=function(k){const z=$t[k];if(z!==void 0)return L2(z)}(S),P=w.message;A===void 0&&(A=G.INTERNAL,P="Unknown error status: "+S+" with message "+w.message),f=!0,p.Vo(new ve(A,P)),h.close()}else le(Cn,`RPC '${e}' stream ${i} received:`,_),p.mo(_)}}),m(a,fU.STAT_EVENT,g=>{g.stat===GT.PROXY?le(Cn,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===GT.NOPROXY&&le(Cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function kg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){return new EB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new K2(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Ii(n.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new ve(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class h8 extends Y2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=SB(this.serializer,e),r=function(s){if(!("targetChange"in s))return Fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Fe.min():o.readTime?vi(o.readTime):Fe.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=M_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=C_(l)?{documents:CB(s,l)}:{query:kB(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=U2(s,o.resumeToken);const c=R_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Fe.min())>0){a.readTime=jf(s,o.snapshotVersion.toTimestamp());const c=R_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=OB(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=M_(this.serializer),n.removeTarget=e,this.t_(n)}}class d8 extends Y2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=AB(e.writeResults,e.commitTime),r=vi(e.commitTime);return this.listener.T_(r,n)}return Et(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=M_(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>IB(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new ve(G.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,O_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(G.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,O_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(G.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class p8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ii(n),this.g_=!1):le("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{ka(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=$e(l);c.v_.add(4),await Nh(c),c.x_.set("Unknown"),c.v_.delete(4),await Em(c)}(this))})}),this.x_=new p8(r,i)}}async function Em(t){if(ka(t))for(const e of t.F_)await e(!0)}async function Nh(t){for(const e of t.F_)await e(!1)}function J2(t,e){const n=$e(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),I0(n)?S0(n):ac(n).Jo()&&w0(n,e))}function T0(t,e){const n=$e(t),r=ac(n);n.C_.delete(e),r.Jo()&&Q2(n,e),n.C_.size===0&&(r.Jo()?r.Xo():ka(n)&&n.x_.set("Unknown"))}function w0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ac(t).c_(e)}function Q2(t,e){t.O_.Oe(e),ac(t).l_(e)}function S0(t){t.O_=new yB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ac(t).start(),t.x_.p_()}function I0(t){return ka(t)&&!ac(t).Ho()&&t.C_.size>0}function ka(t){return $e(t).v_.size===0}function X2(t){t.O_=void 0}async function g8(t){t.C_.forEach((e,n)=>{w0(t,e)})}async function y8(t,e){X2(t),I0(t)?(t.x_.S_(e),S0(t)):t.x_.set("Unknown")}async function _8(t,e,n){if(t.x_.set("Online"),e instanceof F2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(t,r)}else if(e instanceof Gd?t.O_.$e(e):e instanceof V2?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Fe.min()))try{const r=await G2(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(Fn.EMPTY_BYTE_STRING,u.snapshotVersion)),Q2(s,l);const h=new xs(u.target,l,c,u.sequenceNumber);w0(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){le("RemoteStore","Failed to raise snapshot:",r),await Wf(t,r)}}async function Wf(t,e,n){if(!kh(e))throw e;t.v_.add(1),await Nh(t),t.x_.set("Offline"),n||(n=()=>G2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Em(t)})}function Z2(t,e){return e().catch(n=>Wf(t,n,e))}async function Tm(t){const e=$e(t),n=no(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;v8(e);)try{const i=await r8(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,b8(e,i)}catch(i){await Wf(e,i)}eO(e)&&tO(e)}function v8(t){return ka(t)&&t.D_.length<10}function b8(t,e){t.D_.push(e);const n=no(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function eO(t){return ka(t)&&!no(t).Ho()&&t.D_.length>0}function tO(t){no(t).start()}async function E8(t){no(t).d_()}async function T8(t){const e=no(t);for(const n of t.D_)e.I_(n.mutations)}async function w8(t,e,n){const r=t.D_.shift(),i=g0.from(r,e,n);await Z2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tm(t)}async function S8(t,e){e&&no(t).P_&&await async function(r,i){if(function(o){return pB(o)&&o!==G.ABORTED}(i.code)){const s=r.D_.shift();no(r).Zo(),await Z2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Tm(r)}}(t,e),eO(t)&&tO(t)}async function _w(t,e){const n=$e(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const r=ka(n);n.v_.add(3),await Nh(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Em(n)}async function I8(t,e){const n=$e(t);e?(n.v_.delete(2),await Em(n)):e||(n.v_.add(2),await Nh(n),n.x_.set("Unknown"))}function ac(t){return t.N_||(t.N_=function(n,r,i){const s=$e(n);return s.R_(),new h8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:g8.bind(null,t),To:y8.bind(null,t),u_:_8.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),I0(t)?S0(t):t.x_.set("Unknown")):(await t.N_.stop(),X2(t))})),t.N_}function no(t){return t.L_||(t.L_=function(n,r,i){const s=$e(n);return s.R_(),new d8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:E8.bind(null,t),To:S8.bind(null,t),E_:T8.bind(null,t),T_:w8.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Tm(t)):(await t.L_.stop(),t.D_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new A0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function C0(t,e){if(Ii("AsyncQueue",`${e}: ${t}`),kh(t))return new ve(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=Rc(),this.sortedSet=new Pt(this.comparator)}static emptySet(e){return new hl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof hl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new hl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.B_=new Pt(Ae.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):De():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ml{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ml(e,n,hl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class C8{constructor(){this.queries=new oc(e=>w2(e),mm),this.onlineState="Unknown",this.W_=new Set}}async function k0(t,e){const n=$e(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new A8,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=C0(o,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&O0(n)}async function R0(t,e){const n=$e(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k8(t,e){const n=$e(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&O0(n)}function R8(t,e,n){const r=$e(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function O0(t){t.W_.forEach(e=>{e.next()})}var D_,bw;(bw=D_||(D_={})).j_="default",bw.Cache="cache";class N0{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==D_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.key=e}}class rO{constructor(e){this.key=e}}class O8{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Ke(),this.mutatedKeys=Ke(),this.ha=S2(e),this.Pa=new hl(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new vw,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=gm(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),g=!0):this.da(d,f)||(r.track({type:2,doc:f}),g=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),g=!0):d&&!f&&(r.track({type:1,doc:d}),g=!0,(l||c)&&(a=!0)),g&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(f,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return m(f)-m(p)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new Ml(this.query,e.Pa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new vw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Ke(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new rO(r))}),this.la.forEach(r=>{e.has(r)||n.push(new nO(r))}),n}fa(e){this.ua=e.hs,this.la=Ke();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Ml.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class N8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class M8{constructor(e){this.key=e,this.pa=!1}}class P8{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new oc(a=>w2(a),mm),this.Sa=new Map,this.ba=new Set,this.Da=new Pt(Ae.comparator),this.Ca=new Map,this.va=new v0,this.Fa={},this.Ma=new Map,this.xa=Nl.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function D8(t,e,n=!0){const r=cO(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await iO(r,e,n,!0),i}async function x8(t,e){const n=cO(t);await iO(n,e,!0,!1)}async function iO(t,e,n,r){const i=await i8(t.localStore,_i(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await L8(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&J2(t.remoteStore,i),a}async function L8(t,e,n,r,i){t.Na=(h,d,f)=>async function(m,g,y,_){let v=g.view.Ta(y);v.Xi&&(v=await mw(m.localStore,g.query,!1).then(({documents:P})=>g.view.Ta(P,v)));const w=_&&_.targetChanges.get(g.targetId),S=_&&_.targetMismatches.get(g.targetId)!=null,A=g.view.applyChanges(v,m.isPrimaryClient,w,S);return Tw(m,g.targetId,A.Va),A.snapshot}(t,h,d,f);const s=await mw(t.localStore,e,!0),o=new O8(e,s.hs),a=o.Ta(s.documents),l=Oh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Tw(t,n,c.Va);const u=new N8(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function V8(t,e,n){const r=$e(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!mm(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await P_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&T0(r.remoteStore,i.targetId),x_(r,i.targetId)}).catch(Ch)):(x_(r,i.targetId),await P_(r.localStore,i.targetId,!0))}async function F8(t,e){const n=$e(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),T0(n.remoteStore,r.targetId))}async function U8(t,e,n){const r=q8(t);try{const i=await function(o,a){const l=$e(o),c=Kt.now(),u=a.reduce((f,p)=>f.add(p.key),Ke());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=rs(),m=Ke();return l.os.getEntries(f,u).next(g=>{p=g,p.forEach((y,_)=>{_.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(g=>{h=g;const y=[];for(const _ of a){const v=cB(_,h.get(_.key).overlayedDocument);v!=null&&y.push(new ho(_.key,v,g2(v.value.mapValue),yr.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:A2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new Pt(ot)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Mh(r,i.changes),await Tm(r.remoteStore)}catch(i){const s=C0(i,"Failed to persist write");n.reject(s)}}async function sO(t,e){const n=$e(t);try{const r=await t8(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?Et(o.pa):i.removedDocuments.size>0&&(Et(o.pa),o.pa=!1))}),await Mh(n,r,e)}catch(r){await Ch(r)}}function Ew(t,e,n){const r=$e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=$e(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&O0(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function B8(t,e,n){const r=$e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Pt(Ae.comparator);o=o.insert(s,Pn.newNoDocument(s,Fe.min()));const a=Ke().add(s),l=new vm(Fe.min(),new Map,new Pt(ot),o,a);await sO(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),M0(r)}else await P_(r.localStore,e,!1).then(()=>x_(r,e,n)).catch(Ch)}async function $8(t,e){const n=$e(t),r=e.batch.batchId;try{const i=await e8(n.localStore,e);aO(n,r,null),oO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mh(n,i)}catch(i){await Ch(i)}}async function H8(t,e,n){const r=$e(t);try{const i=await function(o,a){const l=$e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Et(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);aO(r,e,n),oO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mh(r,i)}catch(i){await Ch(i)}}function oO(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function aO(t,e,n){const r=$e(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function x_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||lO(t,r)})}function lO(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(T0(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),M0(t))}function Tw(t,e,n){for(const r of n)r instanceof nO?(t.va.addReference(r.key,e),z8(t,r)):r instanceof rO?(le("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||lO(t,r.key)):De()}function z8(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(le("SyncEngine","New document in limbo: "+n),t.ba.add(r),M0(t))}function M0(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new Ae(Nt.fromString(e)),r=t.xa.next();t.Ca.set(r,new M8(n)),t.Da=t.Da.insert(n,r),J2(t.remoteStore,new xs(_i(pm(n.path)),r,"TargetPurposeLimboResolution",c0._e))}}async function Mh(t,e,n){const r=$e(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=E0.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,c){const u=$e(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>q.forEach(c,d=>q.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>q.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!kh(h))throw h;le("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(d,m)}}}(r.localStore,s))}async function j8(t,e){const n=$e(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const r=await q2(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new ve(G.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mh(n,r.us)}}function W8(t,e){const n=$e(t),r=n.Ca.get(e);if(r&&r.pa)return Ke().add(r.key);{let i=Ke();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function cO(t){const e=$e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=B8.bind(null,e),e.ya.u_=k8.bind(null,e.eventManager),e.ya.La=R8.bind(null,e.eventManager),e}function q8(t){const e=$e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H8.bind(null,e),e}class ww{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=bm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return ZB(this.persistence,new QB,e.initialUser,this.serializer)}createPersistence(e){return new KB(b0.Hr,this.serializer)}createSharedClientState(e){return new o8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class G8{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ew(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=j8.bind(null,this.syncEngine),await I8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new C8}()}createDatastore(e){const n=bm(e.databaseInfo.databaseId),r=function(s){return new u8(s)}(e.databaseInfo);return function(s,o,a,l){return new f8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new m8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ew(this.syncEngine,n,0),function(){return yw.D()?new yw:new a8}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new P8(i,s,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=$e(r);le("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Nh(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Ii("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=On.UNAUTHENTICATED,this.clientId=f2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{le("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(le("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ve(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=C0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Rg(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await q2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await J8(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_w(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>_w(e.remoteStore,i)),t._onlineComponents=e}function Y8(t){return t.name==="FirebaseError"?t.code===G.FAILED_PRECONDITION||t.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function J8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await Rg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Y8(n))throw n;Al("Error using user provided cache. Falling back to memory cache: "+n),await Rg(t,new ww)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await Rg(t,new ww);return t._offlineComponents}async function uO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await Sw(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await Sw(t,new G8))),t._onlineComponents}function Q8(t){return uO(t).then(e=>e.syncEngine)}async function qf(t){const e=await uO(t),n=e.eventManager;return n.onListen=D8.bind(null,e.syncEngine),n.onUnlisten=V8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=F8.bind(null,e.syncEngine),n}function X8(t,e,n={}){const r=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new P0({next:d=>{o.enqueueAndForget(()=>R0(s,h));const f=d.docs.has(a);!f&&d.fromCache?c.reject(new ve(G.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?c.reject(new ve(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new N0(pm(a.path),u,{includeMetadataChanges:!0,ta:!0});return k0(s,h)}(await qf(t),t.asyncQueue,e,n,r)),r.promise}function Z8(t,e,n={}){const r=new yi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new P0({next:d=>{o.enqueueAndForget(()=>R0(s,h)),d.fromCache&&l.source==="server"?c.reject(new ve(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new N0(a,u,{includeMetadataChanges:!0,ta:!0});return k0(s,h)}(await qf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t,e,n){if(!n)throw new ve(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e7(t,e,n,r){if(e===!0&&r===!0)throw new ve(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Aw(t){if(!Ae.isDocumentKey(t))throw new ve(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cw(t){if(Ae.isDocumentKey(t))throw new ve(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function D0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De()}function _r(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ve(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=D0(t);throw new ve(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ve(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ve(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ve(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ve(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ve(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gU;switch(r.type){case"firstParty":return new bU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Iw.get(n);r&&(le("ComponentProvider","Removing Datastore"),Iw.delete(n),r.terminate())}(this),Promise.resolve()}}function t7(t,e,n,r={}){var i;const s=(t=_r(t,wm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=On.MOCK_USER;else{a=w4(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ve(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new On(c)}t._authCredentials=new yU(new d2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ph(this.firestore,e,this._query)}}class jn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class Ws extends Ph{constructor(e,n,r){super(e,n,pm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Ae(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function Zn(t,e,...n){if(t=hn(t),dO("collection","path",e),t instanceof wm){const r=Nt.fromString(e,...n);return Cw(r),new Ws(t,null,r)}{if(!(t instanceof jn||t instanceof Ws))throw new ve(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Nt.fromString(e,...n));return Cw(r),new Ws(t.firestore,null,r)}}function Xe(t,e,...n){if(t=hn(t),arguments.length===1&&(e=f2.newId()),dO("doc","path",e),t instanceof wm){const r=Nt.fromString(e,...n);return Aw(r),new jn(t,null,new Ae(r))}{if(!(t instanceof jn||t instanceof Ws))throw new ve(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Nt.fromString(e,...n));return Aw(r),new jn(t.firestore,t instanceof Ws?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new K2(this,"async_queue_retry"),this.cu=()=>{const n=kg();n&&le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=kg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=kg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new yi;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!kh(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ii("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=A0.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&De()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function Rw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ro extends wm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new n7}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fO(this),this._firestoreClient.terminate()}}function r7(t,e){const n=typeof t=="object"?t:mC(),r=typeof t=="string"?t:e||"(default)",i=fC(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=E4("firestore");s&&t7(i,...s)}return i}function Dh(t){return t._firestoreClient||fO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function fO(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new DU(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,hO(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new K8(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(Fn.fromBase64String(e))}catch(n){throw new ve(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pl(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=/^__.*__$/;class s7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rh(e,this.data,n,this.fieldTransforms)}}class pO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ho(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class Am{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Am(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Gf(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(mO(this.Vu)&&i7.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class o7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bm(e)}Cu(e,n,r,i=!1){return new Am({Vu:e,methodName:n,Du:r,path:Sn.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function x0(t){const e=t._freezeSettings(),n=bm(t._databaseId);return new o7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gO(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);V0("Data must be an object, but it was:",o,r);const a=vO(r,o);let l,c;if(s.merge)l=new fr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=L_(e,h,n);if(!o.contains(d))throw new ve(G.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);EO(u,d)||u.push(d)}l=new fr(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new s7(new Xn(a),l,c)}class Cm extends Sm{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cm}}function a7(t,e,n){return new Am({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class L0 extends Sm{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=a7(this,e,!0),r=this.vu.map(s=>Lh(s,n)),i=new Ol(r);return new sB(e.path,i)}isEqual(e){return e instanceof L0&&Iu(this.vu,e.vu)}}function yO(t,e,n,r){const i=t.Cu(1,e,n);V0("Data must be an object, but it was:",i,r);const s=[],o=Xn.empty();Ca(r,(l,c)=>{const u=F0(e,l,n);c=hn(c);const h=i.yu(u);if(c instanceof Cm)s.push(u);else{const d=Lh(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new fr(s);return new pO(o,a,i.fieldTransforms)}function _O(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[L_(e,r,n)],l=[i];if(s.length%2!=0)throw new ve(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(L_(e,s[d])),l.push(s[d+1]);const c=[],u=Xn.empty();for(let d=a.length-1;d>=0;--d)if(!EO(c,a[d])){const f=a[d];let p=l[d];p=hn(p);const m=o.yu(f);if(p instanceof Cm)c.push(f);else{const g=Lh(p,m);g!=null&&(c.push(f),u.set(f,g))}}const h=new fr(c);return new pO(u,h,o.fieldTransforms)}function Lh(t,e){if(bO(t=hn(t)))return V0("Unsupported field value:",e,t),vO(t,e);if(t instanceof Sm)return function(r,i){if(!mO(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Lh(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Kt.fromDate(r);return{timestampValue:jf(i.serializer,s)}}if(r instanceof Kt){const s=new Kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jf(i.serializer,s)}}if(r instanceof Im)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pl)return{bytesValue:U2(i.serializer,r._byteString)};if(r instanceof jn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${D0(r)}`)}(t,e)}function vO(t,e){const n={};return p2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(t,(r,i)=>{const s=Lh(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function bO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Kt||t instanceof Im||t instanceof Pl||t instanceof jn||t instanceof Sm)}function V0(t,e,n){if(!bO(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=D0(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function L_(t,e,n){if((e=hn(e))instanceof xh)return e._internalPath;if(typeof e=="string")return F0(t,e);throw Gf("Field path arguments must be of type string or ",t,!1,void 0,n)}const l7=new RegExp("[~\\*/\\[\\]]");function F0(t,e,n){if(e.search(l7)>=0)throw Gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xh(...e.split("."))._internalPath}catch{throw Gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ve(G.INVALID_ARGUMENT,a+t+l)}function EO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class c7 extends TO{data(){return super.data()}}function wO(t,e){return typeof e=="string"?F0(t,e):e instanceof xh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ve(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u7{convertValue(e,n="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw De()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ca(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Im(jt(e.latitude),jt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=h0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){const n=to(e);return new Kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Nt.fromString(e);Et(W2(r));const i=new Bu(r.get(1),r.get(3)),s=new Ae(r.popFirst(5));return i.isEqual(n)||Ii(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class AO extends TO{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kd extends AO{data(e={}){return super.data(e)}}class CO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Nc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kd(this._firestore,this._userDataWriter,r.key,r,new Nc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Kd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Nc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Kd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Nc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:h7(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function h7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t){t=_r(t,jn);const e=_r(t.firestore,ro);return X8(Dh(e),t._key).then(n=>kO(e,t,n))}class U0 extends u7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,n)}}function V_(t){t=_r(t,Ph);const e=_r(t.firestore,ro),n=Dh(e),r=new U0(e);return SO(t._query),Z8(n,t._query).then(i=>new CO(e,r,t,i))}function Ow(t,e,n){t=_r(t,jn);const r=_r(t.firestore,ro),i=IO(t.converter,e,n);return $0(r,[gO(x0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,yr.none())])}function Qo(t,e,n,...r){t=_r(t,jn);const i=_r(t.firestore,ro),s=x0(i);let o;return o=typeof(e=hn(e))=="string"||e instanceof xh?_O(s,"updateDoc",t._key,e,n,r):yO(s,"updateDoc",t._key,e),$0(i,[o.toMutation(t._key,yr.exists(!0))])}function B0(t,...e){var n,r,i;t=hn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Rw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Rw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof jn)c=_r(t.firestore,ro),u=pm(t._key.path),l={next:h=>{e[o]&&e[o](kO(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=_r(t,Ph);c=_r(h.firestore,ro),u=h._query;const d=new U0(c);l={next:f=>{e[o]&&e[o](new CO(c,d,h,f))},error:e[o+1],complete:e[o+2]},SO(t._query)}return function(d,f,p,m){const g=new P0(m),y=new N0(f,g,p);return d.asyncQueue.enqueueAndForget(async()=>k0(await qf(d),y)),()=>{g.Qa(),d.asyncQueue.enqueueAndForget(async()=>R0(await qf(d),y))}}(Dh(c),u,a,l)}function $0(t,e){return function(r,i){const s=new yi;return r.asyncQueue.enqueueAndForget(async()=>U8(await Q8(r),i,s)),s.promise}(Dh(t),e)}function kO(t,e,n){const r=n.docs.get(e._key),i=new U0(t);return new AO(t,i,e._key,r,new Nc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=x0(e)}set(e,n,r){this._verifyNotCommitted();const i=Og(e,this._firestore),s=IO(i.converter,n,r),o=gO(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,yr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Og(e,this._firestore);let o;return o=typeof(n=hn(n))=="string"||n instanceof xh?_O(this._dataReader,"WriteBatch.update",s._key,n,r,i):yO(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Og(e,this._firestore);return this._mutations=this._mutations.concat(new m0(n._key,yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(G.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Og(t,e){if((t=hn(t)).firestore!==e)throw new ve(G.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function f7(...t){return new L0("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t){return Dh(t=_r(t,ro)),new d7(t,e=>$0(t,e))}(function(e,n=!0){(function(i){sc=i})(lo),wi(new Yr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ro(new _U(r.getProvider("auth-internal")),new TU(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ve(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bu(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),mr(KT,"4.6.0",e),mr(KT,"4.6.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="firebasestorage.googleapis.com",p7="storageBucket",m7=2*60*1e3,g7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Pi{constructor(e,n,r=0){super(Ng(e),`Firebase Storage: ${n} (${Ng(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ng(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ki;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ki||(ki={}));function Ng(t){return"storage/"+t}function y7(){const t="An unknown error occurred, please check the error payload for server response.";return new xi(ki.UNKNOWN,t)}function _7(){return new xi(ki.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v7(){return new xi(ki.CANCELED,"User canceled the upload/download.")}function b7(t){return new xi(ki.INVALID_URL,"Invalid URL '"+t+"'.")}function E7(t){return new xi(ki.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Nw(t){return new xi(ki.INVALID_ARGUMENT,t)}function OO(){return new xi(ki.APP_DELETED,"The Firebase app was deleted.")}function T7(t){return new xi(ki.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jr.makeFromUrl(e,n)}catch{return new jr(e,"")}if(r.path==="")return r;throw E7(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(w){w.path_=decodeURIComponent(w.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===RO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let w=0;w<v.length;w++){const S=v[w],A=S.regex.exec(e);if(A){const P=A[S.indices.bucket];let M=A[S.indices.path];M||(M=""),r=new jr(P,M),S.postModify(r);break}}if(r==null)throw b7(e);return r}}class w7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function h(g){i=setTimeout(()=>{i=null,t(f,l())},g)}function d(){s&&clearTimeout(s)}function f(g,...y){if(c){d();return}if(g){d(),u.call(null,g,...y);return}if(l()||o){d(),u.call(null,g,...y);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,h(v)}let p=!1;function m(g){p||(p=!0,d(),!c&&(i!==null?(g||(a=2),clearTimeout(i),h(0)):g||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function I7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(t){return t!==void 0}function Mw(t,e,n,r){if(r<e)throw Nw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Nw(`Invalid value for '${t}'. Expected ${n} or less.`)}function C7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Kf||(Kf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,n,r,i,s,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new gd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Kf.NO_ERROR,l=s.getStatus();if(!a||k7(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Kf.ABORT;r(!1,new gd(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new gd(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());A7(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=y7();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?OO():v7();o(l)}else{const l=_7();o(l)}};this.canceled_?n(!1,new gd(!1,null,!0)):this.backoffId_=S7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function O7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function N7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function M7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function P7(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function D7(t,e,n,r,i,s,o=!0){const a=C7(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return M7(c,e),O7(c,n),N7(c,s),P7(c,r),new R7(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x7(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L7(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this._service=e,n instanceof jr?this._location=n:this._location=jr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Yf(e,n)}get root(){const e=new jr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return L7(this._location.path)}get storage(){return this._service}get parent(){const e=x7(this._location.path);if(e===null)return null;const n=new jr(this._location.bucket,e);return new Yf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw T7(e)}}function Pw(t,e){const n=e==null?void 0:e[p7];return n==null?null:jr.makeFromBucketSpec(n,t)}class V7{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=RO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=m7,this._maxUploadRetryTime=g7,this._requests=new Set,i!=null?this._bucket=jr.makeFromBucketSpec(i,this._host):this._bucket=Pw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jr.makeFromBucketSpec(this._url,e):this._bucket=Pw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Mw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Mw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yf(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new w7(OO());{const o=D7(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Dw="@firebase/storage",xw="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7="storage";function U7(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new V7(n,r,i,e,lo)}function B7(){wi(new Yr(F7,U7,"PUBLIC").setMultipleInstances(!0)),mr(Dw,xw,""),mr(Dw,xw,"esm2017")}B7();const Mg=new WeakMap;function NO(t,e){return Mg.has(e)||Mg.set(e,t||{f:{},r:{},s:{},u:{}}),Mg.get(e)}function $7(t,e,n,r){if(!t)return n;const[i,s]=MO(t);if(!i)return n;const o=NO(void 0,r)[i]||{},a=e||s;return a&&a in o?o[a]:n}function H7(t,e,n,r){if(!t)return;const[i,s]=MO(t);if(!i)return;const o=NO(void 0,r)[i],a=e||s;if(a)return n.then(l=>{o[a]=l}).catch(li),a}function MO(t){return g5(t)||y5(t)?["f",t.path]:_5(t)?["r",t.toString()]:v5(t)?["s",t.toString()]:[]}const Pg=new WeakMap;function z7(t,e,n){const r=jp();Pg.has(r)||Pg.set(r,new Map);const i=Pg.get(r),s=H7(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):li}const j7={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function F_(t,e,n,r){if(!p5(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((a,l)=>{const c=n[l];return a[c.path]=c.data(),a},{});function o(a,l,c,u){l=l||{};const[h,d]=u;Object.getOwnPropertyNames(a).forEach(f=>{const p=Object.getOwnPropertyDescriptor(a,f);p&&!p.enumerable&&Object.defineProperty(h,f,p)});for(const f in a){const p=a[f];if(p==null||p instanceof Date||p instanceof Kt||p instanceof Im)h[f]=p;else if(g1(p)){const m=c+f;h[f]=m in n?l[f]:p.path,d[m]=p.converter?p:p.withConverter(r.converter)}else if(Array.isArray(p)){h[f]=Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];g&&g.path in s&&(h[f][m]=s[g.path])}o(p,l[f]||h[f],c+f+".",[h[f],d])}else wa(p)?(h[f]={},o(p,l[f],c+f+".",[h[f],d])):h[f]=p}}return o(t,e,"",i),i}const H0={reset:!1,wait:!0,maxRefDepth:2,converter:j7,snapshotOptions:{serverTimestamps:"estimate"}};function Jf(t){for(const e in t)t[e].unsub()}function U_(t,e,n,r,i,s,o,a,l){const[c,u]=F_(r.data(t.snapshotOptions),m1(e,n),i,t);s.set(e,n,c),B_(t,e,n,i,u,s,o,a,l)}function W7({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},a){const l=Object.create(null);let c=li;return a.once?Xr(t).then(u=>{u.exists()?U_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())}).catch(s):c=B0(t,u=>{u.exists()?U_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())},s),()=>{c(),Jf(l)}}function B_(t,e,n,r,i,s,o,a,l){const c=Object.keys(i);if(Object.keys(r).filter(m=>c.indexOf(m)<0).forEach(m=>{r[m].unsub(),delete r[m]}),!c.length||++o>t.maxRefDepth)return a(n);let h=0;const d=c.length,f=Object.create(null);function p(m){m in f&&++h>=d&&a(n)}c.forEach(m=>{const g=r[m],y=i[m],_=`${n}.${m}`;if(f[_]=!0,g)if(g.path!==y.path)g.unsub();else return;r[m]={data:()=>m1(e,_),unsub:W7({ref:y,target:e,path:_,depth:o,ops:s,resolve:p.bind(null,_),reject:l},t),path:y.path}})}function q7(t,e,n,r,i,s){const o=Object.assign({},H0,s),{snapshotListenOptions:a,snapshotOptions:l,wait:c,once:u}=o,h="value";let d=ae(c?[]:t.value);c||n.set(t,h,[]);const f=r;let p,m=li;const g=[],y={added:({newIndex:v,doc:w})=>{g.splice(v,0,Object.create(null));const S=g[v],[A,P]=F_(w.data(l),void 0,S,o);n.add(Ui(d),v,A),B_(o,d,`${h}.${v}`,S,P,n,0,r.bind(null,w),i)},modified:({oldIndex:v,newIndex:w,doc:S})=>{const A=Ui(d),P=g[v],M=A[v],[k,z]=F_(S.data(l),M,P,o);g.splice(w,0,P),n.remove(A,v),n.add(A,w,k),B_(o,d,`${h}.${w}`,P,z,n,0,r,i)},removed:({oldIndex:v})=>{const w=Ui(d);n.remove(w,v),Jf(g.splice(v,1)[0])}};function _(v){const w=v.docChanges(a);if(!p&&w.length){p=!0;let S=0;const A=w.length,P=Object.create(null);for(let M=0;M<A;M++)P[w[M].doc.id]=!0;r=M=>{M&&M.id in P&&++S>=A&&(c&&(n.set(t,h,Ui(d)),d=t),f(Ui(d)),r=li)}}w.forEach(S=>{y[S.type](S)}),w.length||(c&&(n.set(t,h,Ui(d)),d=t),r(Ui(d)))}return u?V_(e).then(_).catch(i):m=B0(e,_,i),v=>{if(m(),v){const w=typeof v=="function"?v():[];n.set(t,h,w)}g.forEach(Jf)}}function G7(t,e,n,r,i,s){const o=Object.assign({},H0,s),a="value",l=Object.create(null);r=b5(r,()=>m1(t,a));let c=li;function u(h){h.exists()?U_(o,t,a,h,l,n,0,r,i):(n.set(t,a,null),r(null))}return o.once?Xr(e).then(u).catch(i):c=B0(e,u,i),h=>{if(c(),h){const d=typeof h=="function"?h():null;n.set(t,a,d)}Jf(l)}}const Lw=Symbol();function PO(t,e){let n=li;const r=Object.assign({},H0,e),i=Ui(t),s=r.target||ae();T5()&&(r.once=!0);const o=$7(i,r.ssrKey,Lw,jp()),a=o!==Lw;a&&(s.value=o);let l=!a;const c=ae(!1),u=ae(),h=EA(),d=xv();let f=li;function p(){let y=Ui(t);const _=new Promise((v,w)=>{if(n(r.reset),!y)return n=li,v(null);c.value=l,l=!0,y.converter||(y=y.withConverter(r.converter)),n=(g1(y)?G7:q7)(s,y,K7,v,w,r)}).catch(v=>(h.value===_&&(u.value=v),Promise.reject(v))).finally(()=>{h.value===_&&(c.value=!1)});h.value=_}let m=li;(un(t)||typeof t=="function")&&(m=Qi(t,p)),p(),i&&(f=z7(h.value,i,r.ssrKey)),Ta()&&FA(()=>h.value),d&&oA(g);function g(y=r.reset){m(),f(),n(y)}return Object.defineProperties(s,{error:{get:()=>u},data:{get:()=>s},pending:{get:()=>c},promise:{get:()=>h},stop:{get:()=>g}})}const K7={set:(t,e,n)=>d5(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function bi(t,e){return PO(t,{target:ae([]),...e})}function Ra(t,e){return PO(t,e)}function Y7(t){return J7({initialUser:t,dependencies:{popupRedirectResolver:P6,persistence:[jL,ML,UC]}})}const DO=Symbol("VueFireAuth");function J7({dependencies:t,initialUser:e}){return(n,r)=>{const[i,s]=Q7(n,r,e,t);I5(i,s)}}function Q7(t,e,n,r,i=EL(t,r)){const s=w5(t,e).run(()=>ae(n));return JC.set(t,s),e.provide(DO,i),[s,i]}function X7(t){return h5?er(DO):null}function Z7(t,{firebaseApp:e,modules:n=[]}){t.provide(YC,e);for(const r of n)r(e,t)}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ba=typeof document<"u";function e$(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const dt=Object.assign;function Dg(t,e){const n={};for(const r in e){const i=e[r];n[r]=Zr(i)?i.map(t):t(i)}return n}const iu=()=>{},Zr=Array.isArray,xO=/#/g,t$=/&/g,n$=/\//g,r$=/=/g,i$=/\?/g,LO=/\+/g,s$=/%5B/g,o$=/%5D/g,VO=/%5E/g,a$=/%60/g,FO=/%7B/g,l$=/%7C/g,UO=/%7D/g,c$=/%20/g;function z0(t){return encodeURI(""+t).replace(l$,"|").replace(s$,"[").replace(o$,"]")}function u$(t){return z0(t).replace(FO,"{").replace(UO,"}").replace(VO,"^")}function $_(t){return z0(t).replace(LO,"%2B").replace(c$,"+").replace(xO,"%23").replace(t$,"%26").replace(a$,"`").replace(FO,"{").replace(UO,"}").replace(VO,"^")}function h$(t){return $_(t).replace(r$,"%3D")}function d$(t){return z0(t).replace(xO,"%23").replace(i$,"%3F")}function f$(t){return t==null?"":d$(t).replace(n$,"%2F")}function zu(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const p$=/\/$/,m$=t=>t.replace(p$,"");function xg(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=v$(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:zu(o)}}function g$(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Vw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function y$(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Dl(e.matched[r],n.matched[i])&&BO(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Dl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function BO(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!_$(t[n],e[n]))return!1;return!0}function _$(t,e){return Zr(t)?Fw(t,e):Zr(e)?Fw(e,t):t===e}function Fw(t,e){return Zr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function v$(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}var ju;(function(t){t.pop="pop",t.push="push"})(ju||(ju={}));var su;(function(t){t.back="back",t.forward="forward",t.unknown=""})(su||(su={}));function b$(t){if(!t)if(Ba){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),m$(t)}const E$=/^[^#]+#/;function T$(t,e){return t.replace(E$,"#")+e}function w$(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const km=()=>({left:window.scrollX,top:window.scrollY});function S$(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=w$(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Uw(t,e){return(history.state?history.state.position-e:-1)+t}const H_=new Map;function I$(t,e){H_.set(t,e)}function A$(t){const e=H_.get(t);return H_.delete(t),e}let C$=()=>location.protocol+"//"+location.host;function $O(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Vw(l,"")}return Vw(n,t)+r+i}function k$(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=$O(t,location),p=n.value,m=e.value;let g=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}g=m?d.position-m.position:0}else r(f);i.forEach(y=>{y(n.value,p,{delta:g,type:ju.pop,direction:g?g>0?su.forward:su.back:su.unknown})})};function l(){o=n.value}function c(d){i.push(d);const f=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(dt({},d.state,{scroll:km()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Bw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?km():null}}function R$(t){const{history:e,location:n}=window,r={value:$O(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:C$()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=dt({},e.state,Bw(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=dt({},i.value,e.state,{forward:l,scroll:km()});s(u.current,u,!0);const h=dt({},Bw(r.value,l,null),{position:u.position+1},c);s(l,h,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function O$(t){t=b$(t);const e=R$(t),n=k$(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=dt({location:"",base:t,go:r,createHref:T$.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function N$(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),O$(t)}function M$(t){return typeof t=="string"||t&&typeof t=="object"}function HO(t){return typeof t=="string"||typeof t=="symbol"}const _s={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},zO=Symbol("");var $w;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})($w||($w={}));function xl(t,e){return dt(new Error,{type:t,[zO]:!0},e)}function Vi(t,e){return t instanceof Error&&zO in t&&(e==null||!!(t.type&e))}const Hw="[^/]+?",P$={sensitive:!1,strict:!1,start:!0,end:!0},D$=/[.+*?^${}()[\]/\\]/g;function x$(t,e){const n=dt({},P$,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(D$,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:g,regexp:y}=d;s.push({name:p,repeatable:m,optional:g});const _=y||Hw;if(_!==Hw){f+=10;try{new RegExp(`(${_})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+w.message)}}let v=m?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;h||(v=g&&c.length<2?`(?:/${v})`:"/"+v),g&&(v+="?"),i+=v,f+=20,g&&(f+=-8),m&&(f+=-20),_===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=s[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:g}=f,y=p in c?c[p]:"";if(Zr(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=Zr(y)?y.join("/"):y;if(!_)if(g)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=_}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function L$(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function V$(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=L$(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(zw(r))return 1;if(zw(i))return-1}return i.length-r.length}function zw(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const F$={type:0,value:""},U$=/[a-zA-Z0-9_]/;function B$(t){if(!t)return[[]];if(t==="/")return[[F$]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:U$.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}function $$(t,e,n){const r=x$(B$(t.path),n),i=dt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function H$(t,e){const n=[],r=new Map;e=qw({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,h,d){const f=!d,p=z$(u);p.aliasOf=d&&d.record;const m=qw(e,u),g=[p];if("alias"in u){const v=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of v)g.push(dt({},p,{components:d?d.record.components:p.components,path:w,aliasOf:d?d.record:p}))}let y,_;for(const v of g){const{path:w}=v;if(h&&w[0]!=="/"){const S=h.record.path,A=S[S.length-1]==="/"?"":"/";v.path=h.record.path+(w&&A+w)}if(y=$$(v,h,m),d?d.alias.push(y):(_=_||y,_!==y&&_.alias.push(y),f&&u.name&&!Ww(y)&&o(u.name)),p.children){const S=p.children;for(let A=0;A<S.length;A++)s(S[A],y,d&&d.children[A])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return _?()=>{o(_)}:iu}function o(u){if(HO(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&V$(u,n[h])>=0&&(u.record.path!==n[h].record.path||!jO(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Ww(u)&&r.set(u.record.name,u)}function c(u,h){let d,f={},p,m;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw xl(1,{location:u});m=d.record.name,f=dt(jw(h.params,d.keys.filter(_=>!_.optional).concat(d.parent?d.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),u.params&&jw(u.params,d.keys.map(_=>_.name))),p=d.stringify(f)}else if(u.path!=null)p=u.path,d=n.find(_=>_.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=h.name?r.get(h.name):n.find(_=>_.re.test(h.path)),!d)throw xl(1,{location:u,currentLocation:h});m=d.record.name,f=dt({},h.params,u.params),p=d.stringify(f)}const g=[];let y=d;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:p,params:f,matched:g,meta:W$(g)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function jw(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function z$(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:j$(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function j$(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Ww(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function W$(t){return t.reduce((e,n)=>dt(e,n.meta),{})}function qw(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function jO(t,e){return e.children.some(n=>n===t||jO(t,n))}function q$(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(LO," "),o=s.indexOf("="),a=zu(o<0?s:s.slice(0,o)),l=o<0?null:zu(s.slice(o+1));if(a in e){let c=e[a];Zr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Gw(t){let e="";for(let n in t){const r=t[n];if(n=h$(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Zr(r)?r.map(s=>s&&$_(s)):[r&&$_(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function G$(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Zr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const K$=Symbol(""),Kw=Symbol(""),Rm=Symbol(""),j0=Symbol(""),z_=Symbol("");function Tc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function As(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(xl(4,{from:n,to:e})):d instanceof Error?l(d):M$(d)?l(xl(2,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=s(()=>t.call(r&&r.instances[i],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function Lg(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Y$(l)){const u=(l.__vccOpts||l)[e];u&&s.push(As(u,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=e$(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&As(f,n,r,o,a,i)()}))}}return s}function Y$(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Yw(t){const e=er(Rm),n=er(j0),r=ct(()=>e.resolve(K(t.to))),i=ct(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Dl.bind(null,u));if(d>-1)return d;const f=Jw(l[c-2]);return c>1&&Jw(u)===f&&h[h.length-1].path!==f?h.findIndex(Dl.bind(null,l[c-2])):d}),s=ct(()=>i.value>-1&&Z$(n.params,r.value.params)),o=ct(()=>i.value>-1&&i.value===n.matched.length-1&&BO(n.params,r.value.params));function a(l={}){return X$(l)?e[K(t.replace)?"replace":"push"](K(t.to)).catch(iu):Promise.resolve()}return{route:r,href:ct(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const J$=Ut({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Yw,setup(t,{slots:e}){const n=oh(Yw(t)),{options:r}=er(Rm),i=ct(()=>({[Qw(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qw(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Go("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Q$=J$;function X$(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Z$(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Zr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Jw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Qw=(t,e,n)=>t??e??n,eH=Ut({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=er(z_),i=ct(()=>t.route||r.value),s=er(Kw,0),o=ct(()=>{let c=K(s);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=ct(()=>i.value.matched[o.value]);Ld(Kw,ct(()=>o.value+1)),Ld(K$,a),Ld(z_,i);const l=ae();return Qi(()=>[l.value,a.value,t.name],([c,u,h],[d,f,p])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Dl(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Xw(n.default,{Component:d,route:c});const f=h.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,g=Go(d,dt({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Xw(n.default,{Component:g,route:c})||g}}});function Xw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const tH=eH;function nH(t){const e=H$(t.routes,t),n=t.parseQuery||q$,r=t.stringifyQuery||Gw,i=t.history,s=Tc(),o=Tc(),a=Tc(),l=EA(_s);let c=_s;Ba&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Dg.bind(null,O=>""+O),h=Dg.bind(null,f$),d=Dg.bind(null,zu);function f(O,H){let W,J;return HO(O)?(W=e.getRecordMatcher(O),J=H):J=O,e.addRoute(J,W)}function p(O){const H=e.getRecordMatcher(O);H&&e.removeRoute(H)}function m(){return e.getRoutes().map(O=>O.record)}function g(O){return!!e.getRecordMatcher(O)}function y(O,H){if(H=dt({},H||l.value),typeof O=="string"){const I=xg(n,O,H.path),N=e.resolve({path:I.path},H),B=i.createHref(I.fullPath);return dt(I,N,{params:d(N.params),hash:zu(I.hash),redirectedFrom:void 0,href:B})}let W;if(O.path!=null)W=dt({},O,{path:xg(n,O.path,H.path).path});else{const I=dt({},O.params);for(const N in I)I[N]==null&&delete I[N];W=dt({},O,{params:h(I)}),H.params=h(H.params)}const J=e.resolve(W,H),we=O.hash||"";J.params=u(d(J.params));const ge=g$(r,dt({},O,{hash:u$(we),path:J.path})),E=i.createHref(ge);return dt({fullPath:ge,hash:we,query:r===Gw?G$(O.query):O.query||{}},J,{redirectedFrom:void 0,href:E})}function _(O){return typeof O=="string"?xg(n,O,l.value.path):dt({},O)}function v(O,H){if(c!==O)return xl(8,{from:H,to:O})}function w(O){return P(O)}function S(O){return w(dt(_(O),{replace:!0}))}function A(O){const H=O.matched[O.matched.length-1];if(H&&H.redirect){const{redirect:W}=H;let J=typeof W=="function"?W(O):W;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=_(J):{path:J},J.params={}),dt({query:O.query,hash:O.hash,params:J.path!=null?{}:O.params},J)}}function P(O,H){const W=c=y(O),J=l.value,we=O.state,ge=O.force,E=O.replace===!0,I=A(W);if(I)return P(dt(_(I),{state:typeof I=="object"?dt({},we,I.state):we,force:ge,replace:E}),H||W);const N=W;N.redirectedFrom=H;let B;return!ge&&y$(r,J,W)&&(B=xl(16,{to:N,from:J}),Ne(J,J,!0,!1)),(B?Promise.resolve(B):z(N,J)).catch(F=>Vi(F)?Vi(F,2)?F:be(F):$(F,N,J)).then(F=>{if(F){if(Vi(F,2))return P(dt({replace:E},_(F.to),{state:typeof F.to=="object"?dt({},we,F.to.state):we,force:ge}),H||N)}else F=j(N,J,!0,E,we);return Y(N,J,F),F})}function M(O,H){const W=v(O,H);return W?Promise.reject(W):Promise.resolve()}function k(O){const H=vt.values().next().value;return H&&typeof H.runWithContext=="function"?H.runWithContext(O):O()}function z(O,H){let W;const[J,we,ge]=rH(O,H);W=Lg(J.reverse(),"beforeRouteLeave",O,H);for(const I of J)I.leaveGuards.forEach(N=>{W.push(As(N,O,H))});const E=M.bind(null,O,H);return W.push(E),pt(W).then(()=>{W=[];for(const I of s.list())W.push(As(I,O,H));return W.push(E),pt(W)}).then(()=>{W=Lg(we,"beforeRouteUpdate",O,H);for(const I of we)I.updateGuards.forEach(N=>{W.push(As(N,O,H))});return W.push(E),pt(W)}).then(()=>{W=[];for(const I of ge)if(I.beforeEnter)if(Zr(I.beforeEnter))for(const N of I.beforeEnter)W.push(As(N,O,H));else W.push(As(I.beforeEnter,O,H));return W.push(E),pt(W)}).then(()=>(O.matched.forEach(I=>I.enterCallbacks={}),W=Lg(ge,"beforeRouteEnter",O,H,k),W.push(E),pt(W))).then(()=>{W=[];for(const I of o.list())W.push(As(I,O,H));return W.push(E),pt(W)}).catch(I=>Vi(I,8)?I:Promise.reject(I))}function Y(O,H,W){a.list().forEach(J=>k(()=>J(O,H,W)))}function j(O,H,W,J,we){const ge=v(O,H);if(ge)return ge;const E=H===_s,I=Ba?history.state:{};W&&(J||E?i.replace(O.fullPath,dt({scroll:E&&I&&I.scroll},we)):i.push(O.fullPath,we)),l.value=O,Ne(O,H,W,E),be()}let U;function L(){U||(U=i.listen((O,H,W)=>{if(!Dt.listening)return;const J=y(O),we=A(J);if(we){P(dt(we,{replace:!0}),J).catch(iu);return}c=J;const ge=l.value;Ba&&I$(Uw(ge.fullPath,W.delta),km()),z(J,ge).catch(E=>Vi(E,12)?E:Vi(E,2)?(P(E.to,J).then(I=>{Vi(I,20)&&!W.delta&&W.type===ju.pop&&i.go(-1,!1)}).catch(iu),Promise.reject()):(W.delta&&i.go(-W.delta,!1),$(E,J,ge))).then(E=>{E=E||j(J,ge,!1),E&&(W.delta&&!Vi(E,8)?i.go(-W.delta,!1):W.type===ju.pop&&Vi(E,20)&&i.go(-1,!1)),Y(J,ge,E)}).catch(iu)}))}let D=Tc(),C=Tc(),V;function $(O,H,W){be(O);const J=C.list();return J.length?J.forEach(we=>we(O,H,W)):console.error(O),Promise.reject(O)}function fe(){return V&&l.value!==_s?Promise.resolve():new Promise((O,H)=>{D.add([O,H])})}function be(O){return V||(V=!O,L(),D.list().forEach(([H,W])=>O?W(O):H()),D.reset()),O}function Ne(O,H,W,J){const{scrollBehavior:we}=t;if(!Ba||!we)return Promise.resolve();const ge=!W&&A$(Uw(O.fullPath,0))||(J||!W)&&history.state&&history.state.scroll||null;return Gl().then(()=>we(O,H,ge)).then(E=>E&&S$(E)).catch(E=>$(E,O,H))}const He=O=>i.go(O);let ht;const vt=new Set,Dt={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:g,getRoutes:m,resolve:y,options:t,push:w,replace:S,go:He,back:()=>He(-1),forward:()=>He(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:C.add,isReady:fe,install(O){const H=this;O.component("RouterLink",Q$),O.component("RouterView",tH),O.config.globalProperties.$router=H,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>K(l)}),Ba&&!ht&&l.value===_s&&(ht=!0,w(i.location).catch(we=>{}));const W={};for(const we in _s)Object.defineProperty(W,we,{get:()=>l.value[we],enumerable:!0});O.provide(Rm,H),O.provide(j0,_A(W)),O.provide(z_,l);const J=O.unmount;vt.add(O),O.unmount=function(){vt.delete(O),vt.size<1&&(c=_s,U&&U(),U=null,l.value=_s,ht=!1,V=!1),J()}}};function pt(O){return O.reduce((H,W)=>H.then(()=>k(W)),Promise.resolve())}return Dt}function rH(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Dl(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Dl(c,l))||i.push(l))}return[n,r,i]}function WO(){return er(Rm)}function fo(){return er(j0)}const iH=["src"],sH=Ut({__name:"menuBar.vapor",async setup(t){let e,n;const r=fo(),i=([e,n]=ir(()=>Di()),e=await e,n(),e);return(s,o)=>{const a=vr("router-link");return R(),x("header",null,[b("nav",null,[Ee(a,{to:{name:"Home"},class:"btn",icon:"",current:K(r).name=="Home"},{default:lt(()=>[te(" home ")]),_:1},8,["current"]),Ee(a,{to:{name:"Boards"},class:"btn",icon:"",current:K(r).name=="Boards"},{default:lt(()=>[te(" apps ")]),_:1},8,["current"]),Ee(a,{to:{name:"loginScreen"},current:K(r).name=="loginScreen",class:"btn"},{default:lt(()=>[te(" account ")]),_:1},8,["current"]),Ee(a,{to:{name:"loginScreen"},current:K(r).name=="loginScreen",class:"imgbtn"},{default:lt(()=>{var l,c;return[(l=K(i))!=null&&l.photoURL?(R(),x("img",{key:0,class:"bobble",src:(c=K(i))==null?void 0:c.photoURL},null,8,iH)):ce("",!0)]}),_:1},8,["current"])])])}}}),Li=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},oH=Li(sH,[["__scopeId","data-v-497821f1"]]),aH=Ut({__name:"App",setup(t){const e=fo();return(n,r)=>{const i=vr("RouterView");return R(),x(se,null,[(R(),qe(qb,null,{default:lt(()=>[Ee(oH)]),_:1})),(R(),qe(qb,null,{default:lt(()=>[(R(),qe(i,{key:K(e).fullPath}))]),_:1}))],64)}}}),qO=pC({apiKey:"AIzaSyAnOiG77O1ukT9C2x8u1VbMLw7For9C_3w",authDomain:"auth.odinn.nl",databaseURL:"https://bingo-50cec-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bingo-50cec",storageBucket:"bingo-50cec.appspot.com",messagingSenderId:"866066986693",appId:"1:866066986693:web:de513df8434d232b0562ac",measurementId:"G-8F3EECYHQ0"}),Me=r7(qO);function GO(t){return xv()?(oA(t),!0):!1}function Wu(t){return typeof t=="function"?t():K(t)}const KO=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const lH=t=>t!=null,cH=()=>{};function YO(t){return t||Ta()}function uH(...t){if(t.length!==1)return fD(...t);const e=t[0];return typeof e=="function"?$v(SA(()=>({get:e,set:cH}))):ae(e)}function hH(t,e){YO(e)&&ch(t,e)}function dH(t,e=!0,n){YO()?lh(t,n):e?t():Gl(t)}function JO(t){var e;const n=Wu(t);return(e=n==null?void 0:n.$el)!=null?e:n}const fH=KO?window:void 0,QO=KO?window.document:void 0;function pH(){const t=ae(!1),e=Ta();return e&&lh(()=>{t.value=!0},e),t}function mH(t){const e=pH();return ct(()=>(e.value,!!t()))}function gH(t,e,n={}){const{window:r=fH,...i}=n;let s;const o=mH(()=>r&&"MutationObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},l=ct(()=>{const d=Wu(t),f=(Array.isArray(d)?d:[d]).map(JO).filter(lH);return new Set(f)}),c=Qi(()=>l.value,d=>{a(),o.value&&r&&d.size&&(s=new MutationObserver(e),d.forEach(f=>s.observe(f,i)))},{immediate:!0,flush:"post"}),u=()=>s==null?void 0:s.takeRecords(),h=()=>{a(),c()};return GO(h),{isSupported:o,stop:h,takeRecords:u}}function lc(t=null,e={}){var n,r,i;const{document:s=QO,restoreOnUnmount:o=h=>h}=e,a=(n=s==null?void 0:s.title)!=null?n:"",l=uH((r=t??(s==null?void 0:s.title))!=null?r:null),c=t&&typeof t=="function";function u(h){if(!("titleTemplate"in e))return h;const d=e.titleTemplate||"%s";return typeof d=="function"?d(h):Wu(d).replace(/%s/g,h)}return Qi(l,(h,d)=>{h!==d&&s&&(s.title=u(typeof h=="string"?h:""))},{immediate:!0}),e.observe&&!e.titleTemplate&&s&&!c&&gH((i=s.head)==null?void 0:i.querySelector("title"),()=>{s&&s.title!==l.value&&(l.value=u(s.title))},{childList:!0}),hH(()=>{if(o){const h=o(a,l.value||"");h!=null&&s&&(s.title=h)}}),l}const yH=b("h1",{class:"font-size-H"},[te("Bingo "),b("em",null,"Bongo")],-1),_H=b("h2",{class:"font-size-L"},"Simplifying OSRS Clan Bingos",-1),vH={class:"col-2"},bH={class:"ghost-board"},EH=b("h2",null,"No more spreadsheets",-1),TH=b("p",null," You know how annoying it is to keep track of scores during clan bingos, right? Yeah, it's a pain. ",-1),wH=b("p",null," No more dealing with spreadsheets or scribbling down scores - Bingo Bongo has got my back on that front. It's like having a reliable sidekick for our clan events, making everything run smoothly and keeping the stress levels down. ",-1),SH=b("div",null,null,-1),IH=Ut({__name:"home.vapor",setup(t){const e=lc();e.value="Bingo Bongo - an osrs bingo app";const n=ae(40963),r=new Set,i=s=>{for(;r.size<3;)r.add(Math.floor(Math.random()*9)+1);return r.has(s)?"var(--secondary)":"var(--primary)"};return(s,o)=>{const a=vr("router-link");return R(),x(se,null,[yH,_H,b("div",vH,[b("div",bH,[(R(),x(se,null,at(9,l=>b("div",{class:"tile",key:l+"tile",style:Wn({"--rotate":Math.random()*6-3+"deg",backgroundColor:i(l)})},null,4)),64))]),b("div",null,[EH,TH,wH,zt(b("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>n.value=l)},null,512),[[Ar,n.value]]),Ee(a,{class:"btn",big:"",submit:"",to:{name:"viewBoard",params:{boardUUID:n.value}}},{default:lt(()=>[te(" Go to the event! ")]),_:1},8,["to"])])]),SH],64)}}});var XO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ZO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(XO,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(L){var D=["th","st","nd","rd"],C=L%100;return"["+L+(D[(C-20)%10]||D[C]||D[0])+"]"}},v=function(L,D,C){var V=String(L);return!V||V.length>=D?L:""+Array(D+1-V.length).join(C)+L},w={s:v,z:function(L){var D=-L.utcOffset(),C=Math.abs(D),V=Math.floor(C/60),$=C%60;return(D<=0?"+":"-")+v(V,2,"0")+":"+v($,2,"0")},m:function L(D,C){if(D.date()<C.date())return-L(C,D);var V=12*(C.year()-D.year())+(C.month()-D.month()),$=D.clone().add(V,h),fe=C-$<0,be=D.clone().add(V+(fe?-1:1),h);return+(-(V+(C-$)/(fe?$-be:be-$))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:h,y:f,w:u,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return L===void 0}},S="en",A={};A[S]=_;var P="$isDayjsObject",M=function(L){return L instanceof j||!(!L||!L[P])},k=function L(D,C,V){var $;if(!D)return S;if(typeof D=="string"){var fe=D.toLowerCase();A[fe]&&($=fe),C&&(A[fe]=C,$=fe);var be=D.split("-");if(!$&&be.length>1)return L(be[0])}else{var Ne=D.name;A[Ne]=D,$=Ne}return!V&&$&&(S=$),$||!V&&S},z=function(L,D){if(M(L))return L.clone();var C=typeof D=="object"?D:{};return C.date=L,C.args=arguments,new j(C)},Y=w;Y.l=k,Y.i=M,Y.w=function(L,D){return z(L,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var j=function(){function L(C){this.$L=k(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[P]=!0}var D=L.prototype;return D.parse=function(C){this.$d=function(V){var $=V.date,fe=V.utc;if($===null)return new Date(NaN);if(Y.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var be=$.match(g);if(be){var Ne=be[2]-1||0,He=(be[7]||"0").substring(0,3);return fe?new Date(Date.UTC(be[1],Ne,be[3]||1,be[4]||0,be[5]||0,be[6]||0,He)):new Date(be[1],Ne,be[3]||1,be[4]||0,be[5]||0,be[6]||0,He)}}return new Date($)}(C),this.init()},D.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},D.$utils=function(){return Y},D.isValid=function(){return this.$d.toString()!==m},D.isSame=function(C,V){var $=z(C);return this.startOf(V)<=$&&$<=this.endOf(V)},D.isAfter=function(C,V){return z(C)<this.startOf(V)},D.isBefore=function(C,V){return this.endOf(V)<z(C)},D.$g=function(C,V,$){return Y.u(C)?this[V]:this.set($,C)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(C,V){var $=this,fe=!!Y.u(V)||V,be=Y.p(C),Ne=function(W,J){var we=Y.w($.$u?Date.UTC($.$y,J,W):new Date($.$y,J,W),$);return fe?we:we.endOf(c)},He=function(W,J){return Y.w($.toDate()[W].apply($.toDate("s"),(fe?[0,0,0,0]:[23,59,59,999]).slice(J)),$)},ht=this.$W,vt=this.$M,Dt=this.$D,pt="set"+(this.$u?"UTC":"");switch(be){case f:return fe?Ne(1,0):Ne(31,11);case h:return fe?Ne(1,vt):Ne(0,vt+1);case u:var O=this.$locale().weekStart||0,H=(ht<O?ht+7:ht)-O;return Ne(fe?Dt-H:Dt+(6-H),vt);case c:case p:return He(pt+"Hours",0);case l:return He(pt+"Minutes",1);case a:return He(pt+"Seconds",2);case o:return He(pt+"Milliseconds",3);default:return this.clone()}},D.endOf=function(C){return this.startOf(C,!1)},D.$set=function(C,V){var $,fe=Y.p(C),be="set"+(this.$u?"UTC":""),Ne=($={},$[c]=be+"Date",$[p]=be+"Date",$[h]=be+"Month",$[f]=be+"FullYear",$[l]=be+"Hours",$[a]=be+"Minutes",$[o]=be+"Seconds",$[s]=be+"Milliseconds",$)[fe],He=fe===c?this.$D+(V-this.$W):V;if(fe===h||fe===f){var ht=this.clone().set(p,1);ht.$d[Ne](He),ht.init(),this.$d=ht.set(p,Math.min(this.$D,ht.daysInMonth())).$d}else Ne&&this.$d[Ne](He);return this.init(),this},D.set=function(C,V){return this.clone().$set(C,V)},D.get=function(C){return this[Y.p(C)]()},D.add=function(C,V){var $,fe=this;C=Number(C);var be=Y.p(V),Ne=function(vt){var Dt=z(fe);return Y.w(Dt.date(Dt.date()+Math.round(vt*C)),fe)};if(be===h)return this.set(h,this.$M+C);if(be===f)return this.set(f,this.$y+C);if(be===c)return Ne(1);if(be===u)return Ne(7);var He=($={},$[a]=r,$[l]=i,$[o]=n,$)[be]||1,ht=this.$d.getTime()+C*He;return Y.w(ht,this)},D.subtract=function(C,V){return this.add(-1*C,V)},D.format=function(C){var V=this,$=this.$locale();if(!this.isValid())return $.invalidDate||m;var fe=C||"YYYY-MM-DDTHH:mm:ssZ",be=Y.z(this),Ne=this.$H,He=this.$m,ht=this.$M,vt=$.weekdays,Dt=$.months,pt=$.meridiem,O=function(J,we,ge,E){return J&&(J[we]||J(V,fe))||ge[we].slice(0,E)},H=function(J){return Y.s(Ne%12||12,J,"0")},W=pt||function(J,we,ge){var E=J<12?"AM":"PM";return ge?E.toLowerCase():E};return fe.replace(y,function(J,we){return we||function(ge){switch(ge){case"YY":return String(V.$y).slice(-2);case"YYYY":return Y.s(V.$y,4,"0");case"M":return ht+1;case"MM":return Y.s(ht+1,2,"0");case"MMM":return O($.monthsShort,ht,Dt,3);case"MMMM":return O(Dt,ht);case"D":return V.$D;case"DD":return Y.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return O($.weekdaysMin,V.$W,vt,2);case"ddd":return O($.weekdaysShort,V.$W,vt,3);case"dddd":return vt[V.$W];case"H":return String(Ne);case"HH":return Y.s(Ne,2,"0");case"h":return H(1);case"hh":return H(2);case"a":return W(Ne,He,!0);case"A":return W(Ne,He,!1);case"m":return String(He);case"mm":return Y.s(He,2,"0");case"s":return String(V.$s);case"ss":return Y.s(V.$s,2,"0");case"SSS":return Y.s(V.$ms,3,"0");case"Z":return be}return null}(J)||be.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(C,V,$){var fe,be=this,Ne=Y.p(V),He=z(C),ht=(He.utcOffset()-this.utcOffset())*r,vt=this-He,Dt=function(){return Y.m(be,He)};switch(Ne){case f:fe=Dt()/12;break;case h:fe=Dt();break;case d:fe=Dt()/3;break;case u:fe=(vt-ht)/6048e5;break;case c:fe=(vt-ht)/864e5;break;case l:fe=vt/i;break;case a:fe=vt/r;break;case o:fe=vt/n;break;default:fe=vt}return $?fe:Y.a(fe)},D.daysInMonth=function(){return this.endOf(h).$D},D.$locale=function(){return A[this.$L]},D.locale=function(C,V){if(!C)return this.$L;var $=this.clone(),fe=k(C,V,!0);return fe&&($.$L=fe),$},D.clone=function(){return Y.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},L}(),U=j.prototype;return z.prototype=U,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",p]].forEach(function(L){U[L[1]]=function(D){return this.$g(D,L[0],L[1])}}),z.extend=function(L,D){return L.$i||(L(D,j,z),L.$i=!0),z},z.locale=k,z.isDayjs=M,z.unix=function(L){return z(1e3*L)},z.en=A[S],z.Ls=A,z.p={},z})})(eN);var AH=eN.exports;const tN=ZO(AH);var nN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(XO,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(m){return(m=+m)+(m>68?1900:2e3)},c=function(m){return function(g){this[m]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),_=60*y[1]+(+y[2]||0);return _===0?0:y[0]==="+"?-_:_}(m)}],h=function(m){var g=a[m];return g&&(g.indexOf?g:g.s.concat(g.f))},d=function(m,g){var y,_=a.meridiem;if(_){for(var v=1;v<=24;v+=1)if(m.indexOf(_(v,0,g))>-1){y=v>12;break}}else y=m===(g?"pm":"PM");return y},f={A:[o,function(m){this.afternoon=d(m,!1)}],a:[o,function(m){this.afternoon=d(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[i,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[i,c("day")],Do:[o,function(m){var g=a.ordinal,y=m.match(/\d+/);if(this.day=y[0],g)for(var _=1;_<=31;_+=1)g(_).replace(/\[|\]/g,"")===m&&(this.day=_)}],M:[s,c("month")],MM:[i,c("month")],MMM:[o,function(m){var g=h("months"),y=(h("monthsShort")||g.map(function(_){return _.slice(0,3)})).indexOf(m)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(m){var g=h("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(m){this.year=l(m)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function p(m){var g,y;g=m,y=a&&a.formats;for(var _=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(k,z,Y){var j=Y&&Y.toUpperCase();return z||y[Y]||n[Y]||y[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(U,L,D){return L||D.slice(1)})})).match(r),v=_.length,w=0;w<v;w+=1){var S=_[w],A=f[S],P=A&&A[0],M=A&&A[1];_[w]=M?{regex:P,parser:M}:S.replace(/^\[|\]$/g,"")}return function(k){for(var z={},Y=0,j=0;Y<v;Y+=1){var U=_[Y];if(typeof U=="string")j+=U.length;else{var L=U.regex,D=U.parser,C=k.slice(j),V=L.exec(C)[0];D.call(z,V),k=k.replace(V,"")}}return function($){var fe=$.afternoon;if(fe!==void 0){var be=$.hours;fe?be<12&&($.hours+=12):be===12&&($.hours=0),delete $.afternoon}}(z),z}}return function(m,g,y){y.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var _=g.prototype,v=_.parse;_.parse=function(w){var S=w.date,A=w.utc,P=w.args;this.$u=A;var M=P[1];if(typeof M=="string"){var k=P[2]===!0,z=P[3]===!0,Y=k||z,j=P[2];z&&(j=P[2]),a=this.$locale(),!k&&j&&(a=y.Ls[j]),this.$d=function(C,V,$){try{if(["x","X"].indexOf(V)>-1)return new Date((V==="X"?1e3:1)*C);var fe=p(V)(C),be=fe.year,Ne=fe.month,He=fe.day,ht=fe.hours,vt=fe.minutes,Dt=fe.seconds,pt=fe.milliseconds,O=fe.zone,H=new Date,W=He||(be||Ne?1:H.getDate()),J=be||H.getFullYear(),we=0;be&&!Ne||(we=Ne>0?Ne-1:H.getMonth());var ge=ht||0,E=vt||0,I=Dt||0,N=pt||0;return O?new Date(Date.UTC(J,we,W,ge,E,I,N+60*O.offset*1e3)):$?new Date(Date.UTC(J,we,W,ge,E,I,N)):new Date(J,we,W,ge,E,I,N)}catch{return new Date("")}}(S,M,A),this.init(),j&&j!==!0&&(this.$L=this.locale(j).$L),Y&&S!=this.format(M)&&(this.$d=new Date("")),a={}}else if(M instanceof Array)for(var U=M.length,L=1;L<=U;L+=1){P[1]=M[L-1];var D=y.apply(this,P);if(D.isValid()){this.$d=D.$d,this.$L=D.$L,this.init();break}L===U&&(this.$d=new Date(""))}else v.call(this,w)}}})})(nN);var CH=nN.exports;const kH=ZO(CH);var RH={},Zw={defaultUserAgent:`WiseOldMan JS Client v${RH.npm_package_version}`,baseAPIUrl:"https://api.wiseoldman.net/v2"};function OH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vs(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}tN.extend(kH);function j_(t,e){return Array.isArray(t)?t.map(n=>j_(n,e)):t!==null&&typeof t=="object"?Object.fromEntries(Object.keys(t).map(n=>[n,j_(t[n],e)])):e(t)}function NH(t){return!t||typeof t!="string"?!1:t.endsWith("Z")&&tN(t.slice(0,-1),"YYYY-MM-DDTHH:mm:ss.SSS",!0).isValid()}function MH(t){return j_(t,e=>NH(e)?new Date(e):e)}function eS(t,e,n){if(n){if(t===400)throw new PH(e,n.message,n.data);if(t===403)throw new DH(e,n.message);if(t===404)throw new xH(e,n.message);if(t===429)throw new LH(e,n.message);if(t===500)throw new VH(e,n.message)}}class PH extends Error{constructor(e,n,r){super(n),this.name="BadRequestError",this.resource=e,this.statusCode=400,this.data=r}}class DH extends Error{constructor(e,n){super(n),this.name="ForbiddenError",this.resource=e,this.statusCode=403}}class xH extends Error{constructor(e,n){super(n),this.name="NotFoundError",this.resource=e,this.statusCode=404}}class LH extends Error{constructor(e,n){super(n),this.name="RateLimitError",this.resource=e,this.statusCode=429}}class VH extends Error{constructor(e,n){super(n),this.name="InternalServerError",this.resource=e,this.statusCode=500}}class po{constructor(e,n){this.baseUrl=n,this.headers=Object.assign({Accept:"application/json","Content-Type":"application/json"},e)}buildParams(e){var n=OH(e,[]);const r=new URLSearchParams;Object.keys(n).filter(s=>n[s]!==void 0).forEach(s=>r.set(s,n[s]));const i=r.toString();return i?`?${i}`:""}fetch({method:e,path:n,body:r,params:i}){return vs(this,void 0,void 0,function*(){const s={method:e,body:void 0,headers:this.headers};let o="";return r&&(s.body=JSON.stringify(r)),i&&(o=this.buildParams(i)),yield fetch(this.baseUrl+n+o,s)})}request({method:e,path:n,body:r,params:i}){return vs(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.json();if(s.ok)return MH(o);eS(s.status,n,o)})}requestText({method:e,path:n,body:r,params:i}){return vs(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.text();if(s.ok)return o;eS(s.status,n,JSON.parse(o))})}postRequest(e,n){return vs(this,void 0,void 0,function*(){return yield this.request({method:"POST",path:e,body:n||{}})})}putRequest(e,n){return vs(this,void 0,void 0,function*(){return yield this.request({method:"PUT",path:e,body:n||{}})})}deleteRequest(e,n){return vs(this,void 0,void 0,function*(){return yield this.request({method:"DELETE",path:e,body:n||{}})})}getRequest(e,n){return vs(this,void 0,void 0,function*(){return yield this.request({method:"GET",path:e,params:n})})}getText(e,n){return vs(this,void 0,void 0,function*(){return yield this.requestText({method:"GET",path:e,params:n})})}}class FH extends po{getDeltaLeaderboard(e){return this.getRequest("/deltas/leaderboard",e)}}class UH extends po{searchGroups(e,n){return this.getRequest("/groups",Object.assign({name:e},n))}getGroupDetails(e){return this.getRequest(`/groups/${e}`)}createGroup(e){return this.postRequest("/groups",e)}editGroup(e,n,r){return this.putRequest(`/groups/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteGroup(e,n){return this.deleteRequest(`/groups/${e}`,{verificationCode:n})}addMembers(e,n,r){return this.postRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}removeMembers(e,n,r){return this.deleteRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}changeRole(e,n,r){return this.putRequest(`/groups/${e}/role`,Object.assign(Object.assign({},n),{verificationCode:r}))}updateAll(e,n){return this.postRequest(`/groups/${e}/update-all`,{verificationCode:n})}getGroupCompetitions(e,n){return this.getRequest(`/groups/${e}/competitions`,Object.assign({},n))}getGroupGains(e,n,r){return this.getRequest(`/groups/${e}/gained`,Object.assign(Object.assign({},r),n))}getGroupAchievements(e,n){return this.getRequest(`/groups/${e}/achievements`,Object.assign({},n))}getGroupRecords(e,n,r){return this.getRequest(`/groups/${e}/records`,Object.assign(Object.assign({},r),n))}getGroupHiscores(e,n,r){return this.getRequest(`/groups/${e}/hiscores`,Object.assign(Object.assign({},r),{metric:n}))}getGroupNameChanges(e,n){return this.getRequest(`/groups/${e}/name-changes`,Object.assign({},n))}getGroupStatistics(e){return this.getRequest(`/groups/${e}/statistics`)}getGroupActivity(e,n){return this.getRequest(`/groups/${e}/activity`,Object.assign({},n))}getMembersCSV(e){return this.getText(`/groups/${e}/csv`)}}class BH extends po{searchPlayers(e,n){return this.getRequest("/players/search",Object.assign({username:e},n))}updatePlayer(e){return this.postRequest(`/players/${e}`)}assertPlayerType(e){return this.postRequest(`/players/${e}/assert-type`)}getPlayerDetails(e){return this.getRequest(`/players/${e}`)}getPlayerDetailsById(e){return this.getRequest(`/players/id/${e}`)}getPlayerAchievements(e){return this.getRequest(`/players/${e}/achievements`)}getPlayerAchievementProgress(e){return this.getRequest(`/players/${e}/achievements/progress`)}getPlayerCompetitions(e,n,r){return this.getRequest(`/players/${e}/competitions`,Object.assign(Object.assign({},n),r))}getPlayerCompetitionStandings(e,n){return this.getRequest(`/players/${e}/competitions/standings`,n)}getPlayerGroups(e,n){return this.getRequest(`/players/${e}/groups`,n)}getPlayerGains(e,n){return this.getRequest(`/players/${e}/gained`,n)}getPlayerGainsAsArray(e,n){return this.getRequest(`/players/${e}/gained`,Object.assign(Object.assign({},n),{formatting:"array"}))}getPlayerRecords(e,n){return this.getRequest(`/players/${e}/records`,n)}getPlayerSnapshots(e,n,r){return this.getRequest(`/players/${e}/snapshots`,Object.assign(Object.assign({},n),r))}getPlayerSnapshotTimeline(e,n,r){return this.getRequest(`/players/${e}/snapshots/timeline`,Object.assign(Object.assign({},r),{metric:n}))}getPlayerNames(e){return this.getRequest(`/players/${e}/names`)}getPlayerArchives(e){return this.getRequest(`/players/${e}/archives`)}}class $H extends po{getRecordLeaderboard(e){return this.getRequest("/records/leaderboard",e)}}const bt={OVERALL:"overall",ATTACK:"attack",DEFENCE:"defence",STRENGTH:"strength",HITPOINTS:"hitpoints",RANGED:"ranged",PRAYER:"prayer",MAGIC:"magic",COOKING:"cooking",WOODCUTTING:"woodcutting",FLETCHING:"fletching",FISHING:"fishing",FIREMAKING:"firemaking",CRAFTING:"crafting",SMITHING:"smithing",MINING:"mining",HERBLORE:"herblore",AGILITY:"agility",THIEVING:"thieving",SLAYER:"slayer",FARMING:"farming",RUNECRAFTING:"runecrafting",HUNTER:"hunter",CONSTRUCTION:"construction"},mn={LEAGUE_POINTS:"league_points",BOUNTY_HUNTER_HUNTER:"bounty_hunter_hunter",BOUNTY_HUNTER_ROGUE:"bounty_hunter_rogue",CLUE_SCROLLS_ALL:"clue_scrolls_all",CLUE_SCROLLS_BEGINNER:"clue_scrolls_beginner",CLUE_SCROLLS_EASY:"clue_scrolls_easy",CLUE_SCROLLS_MEDIUM:"clue_scrolls_medium",CLUE_SCROLLS_HARD:"clue_scrolls_hard",CLUE_SCROLLS_ELITE:"clue_scrolls_elite",CLUE_SCROLLS_MASTER:"clue_scrolls_master",LAST_MAN_STANDING:"last_man_standing",PVP_ARENA:"pvp_arena",SOUL_WARS_ZEAL:"soul_wars_zeal",GUARDIANS_OF_THE_RIFT:"guardians_of_the_rift",COLOSSEUM_GLORY:"colosseum_glory"},ye={ABYSSAL_SIRE:"abyssal_sire",ALCHEMICAL_HYDRA:"alchemical_hydra",ARTIO:"artio",BARROWS_CHESTS:"barrows_chests",BRYOPHYTA:"bryophyta",CALLISTO:"callisto",CALVARION:"calvarion",CERBERUS:"cerberus",CHAMBERS_OF_XERIC:"chambers_of_xeric",CHAMBERS_OF_XERIC_CM:"chambers_of_xeric_challenge_mode",CHAOS_ELEMENTAL:"chaos_elemental",CHAOS_FANATIC:"chaos_fanatic",COMMANDER_ZILYANA:"commander_zilyana",CORPOREAL_BEAST:"corporeal_beast",CRAZY_ARCHAEOLOGIST:"crazy_archaeologist",DAGANNOTH_PRIME:"dagannoth_prime",DAGANNOTH_REX:"dagannoth_rex",DAGANNOTH_SUPREME:"dagannoth_supreme",DERANGED_ARCHAEOLOGIST:"deranged_archaeologist",DUKE_SUCELLUS:"duke_sucellus",GENERAL_GRAARDOR:"general_graardor",GIANT_MOLE:"giant_mole",GROTESQUE_GUARDIANS:"grotesque_guardians",HESPORI:"hespori",KALPHITE_QUEEN:"kalphite_queen",KING_BLACK_DRAGON:"king_black_dragon",KRAKEN:"kraken",KREEARRA:"kreearra",KRIL_TSUTSAROTH:"kril_tsutsaroth",LUNAR_CHESTS:"lunar_chests",MIMIC:"mimic",NEX:"nex",NIGHTMARE:"nightmare",PHOSANIS_NIGHTMARE:"phosanis_nightmare",OBOR:"obor",PHANTOM_MUSPAH:"phantom_muspah",SARACHNIS:"sarachnis",SCORPIA:"scorpia",SCURRIUS:"scurrius",SKOTIZO:"skotizo",SOL_HEREDIT:"sol_heredit",SPINDEL:"spindel",TEMPOROSS:"tempoross",THE_GAUNTLET:"the_gauntlet",THE_CORRUPTED_GAUNTLET:"the_corrupted_gauntlet",THE_LEVIATHAN:"the_leviathan",THE_WHISPERER:"the_whisperer",THEATRE_OF_BLOOD:"theatre_of_blood",THEATRE_OF_BLOOD_HARD_MODE:"theatre_of_blood_hard_mode",THERMONUCLEAR_SMOKE_DEVIL:"thermonuclear_smoke_devil",TOMBS_OF_AMASCUT:"tombs_of_amascut",TOMBS_OF_AMASCUT_EXPERT:"tombs_of_amascut_expert",TZKAL_ZUK:"tzkal_zuk",TZTOK_JAD:"tztok_jad",VARDORVIS:"vardorvis",VENENATIS:"venenatis",VETION:"vetion",VORKATH:"vorkath",WINTERTODT:"wintertodt",ZALCANO:"zalcano",ZULRAH:"zulrah"},Qf={EHP:"ehp",EHB:"ehb"},W_=Object.assign(Object.assign(Object.assign(Object.assign({},bt),mn),ye),Qf),T={ACHIEVER:"achiever",ADAMANT:"adamant",ADEPT:"adept",ADMINISTRATOR:"administrator",ADMIRAL:"admiral",ADVENTURER:"adventurer",AIR:"air",ANCHOR:"anchor",APOTHECARY:"apothecary",ARCHER:"archer",ARMADYLEAN:"armadylean",ARTILLERY:"artillery",ARTISAN:"artisan",ASGARNIAN:"asgarnian",ASSASSIN:"assassin",ASSISTANT:"assistant",ASTRAL:"astral",ATHLETE:"athlete",ATTACKER:"attacker",BANDIT:"bandit",BANDOSIAN:"bandosian",BARBARIAN:"barbarian",BATTLEMAGE:"battlemage",BEAST:"beast",BERSERKER:"berserker",BLISTERWOOD:"blisterwood",BLOOD:"blood",BLUE:"blue",BOB:"bob",BODY:"body",BRASSICAN:"brassican",BRAWLER:"brawler",BRIGADIER:"brigadier",BRIGAND:"brigand",BRONZE:"bronze",BRUISER:"bruiser",BULWARK:"bulwark",BURGLAR:"burglar",BURNT:"burnt",CADET:"cadet",CAPTAIN:"captain",CARRY:"carry",CHAMPION:"champion",CHAOS:"chaos",CLERIC:"cleric",COLLECTOR:"collector",COLONEL:"colonel",COMMANDER:"commander",COMPETITOR:"competitor",COMPLETIONIST:"completionist",CONSTRUCTOR:"constructor",COOK:"cook",COORDINATOR:"coordinator",CORPORAL:"corporal",COSMIC:"cosmic",COUNCILLOR:"councillor",CRAFTER:"crafter",CREW:"crew",CRUSADER:"crusader",CUTPURSE:"cutpurse",DEATH:"death",DEFENDER:"defender",DEFILER:"defiler",DEPUTY_OWNER:"deputy_owner",DESTROYER:"destroyer",DIAMOND:"diamond",DISEASED:"diseased",DOCTOR:"doctor",DOGSBODY:"dogsbody",DRAGON:"dragon",DRAGONSTONE:"dragonstone",DRUID:"druid",DUELLIST:"duellist",EARTH:"earth",ELITE:"elite",EMERALD:"emerald",ENFORCER:"enforcer",EPIC:"epic",EXECUTIVE:"executive",EXPERT:"expert",EXPLORER:"explorer",FARMER:"farmer",FEEDER:"feeder",FIGHTER:"fighter",FIRE:"fire",FIREMAKER:"firemaker",FIRESTARTER:"firestarter",FISHER:"fisher",FLETCHER:"fletcher",FORAGER:"forager",FREMENNIK:"fremennik",GAMER:"gamer",GATHERER:"gatherer",GENERAL:"general",GNOME_CHILD:"gnome_child",GNOME_ELDER:"gnome_elder",GOBLIN:"goblin",GOLD:"gold",GOON:"goon",GREEN:"green",GREY:"grey",GUARDIAN:"guardian",GUTHIXIAN:"guthixian",HARPOON:"harpoon",HEALER:"healer",HELLCAT:"hellcat",HELPER:"helper",HERBOLOGIST:"herbologist",HERO:"hero",HOLY:"holy",HOARDER:"hoarder",HUNTER:"hunter",IGNITOR:"ignitor",ILLUSIONIST:"illusionist",IMP:"imp",INFANTRY:"infantry",INQUISITOR:"inquisitor",IRON:"iron",JADE:"jade",JUSTICIAR:"justiciar",KANDARIN:"kandarin",KARAMJAN:"karamjan",KHARIDIAN:"kharidian",KITTEN:"kitten",KNIGHT:"knight",LABOURER:"labourer",LAW:"law",LEADER:"leader",LEARNER:"learner",LEGACY:"legacy",LEGEND:"legend",LEGIONNAIRE:"legionnaire",LIEUTENANT:"lieutenant",LOOTER:"looter",LUMBERJACK:"lumberjack",MAGIC:"magic",MAGICIAN:"magician",MAJOR:"major",MAPLE:"maple",MARSHAL:"marshal",MASTER:"master",MAXED:"maxed",MEDIATOR:"mediator",MEDIC:"medic",MENTOR:"mentor",MEMBER:"member",MERCHANT:"merchant",MIND:"mind",MINER:"miner",MINION:"minion",MISTHALINIAN:"misthalinian",MITHRIL:"mithril",MODERATOR:"moderator",MONARCH:"monarch",MORYTANIAN:"morytanian",MYSTIC:"mystic",MYTH:"myth",NATURAL:"natural",NATURE:"nature",NECROMANCER:"necromancer",NINJA:"ninja",NOBLE:"noble",NOVICE:"novice",NURSE:"nurse",OAK:"oak",OFFICER:"officer",ONYX:"onyx",OPAL:"opal",ORACLE:"oracle",ORANGE:"orange",OWNER:"owner",PAGE:"page",PALADIN:"paladin",PAWN:"pawn",PILGRIM:"pilgrim",PINE:"pine",PINK:"pink",PREFECT:"prefect",PRIEST:"priest",PRIVATE:"private",PRODIGY:"prodigy",PROSELYTE:"proselyte",PROSPECTOR:"prospector",PROTECTOR:"protector",PURE:"pure",PURPLE:"purple",PYROMANCER:"pyromancer",QUESTER:"quester",RACER:"racer",RAIDER:"raider",RANGER:"ranger",RECORD_CHASER:"record_chaser",RECRUIT:"recruit",RECRUITER:"recruiter",RED_TOPAZ:"red_topaz",RED:"red",ROGUE:"rogue",RUBY:"ruby",RUNE:"rune",RUNECRAFTER:"runecrafter",SAGE:"sage",SAPPHIRE:"sapphire",SARADOMINIST:"saradominist",SAVIOUR:"saviour",SCAVENGER:"scavenger",SCHOLAR:"scholar",SCOURGE:"scourge",SCOUT:"scout",SCRIBE:"scribe",SEER:"seer",SENATOR:"senator",SENTRY:"sentry",SERENIST:"serenist",SERGEANT:"sergeant",SHAMAN:"shaman",SHERIFF:"sheriff",SHORT_GREEN_GUY:"short_green_guy",SKILLER:"skiller",SKULLED:"skulled",SLAYER:"slayer",SMITER:"smiter",SMITH:"smith",SMUGGLER:"smuggler",SNIPER:"sniper",SOUL:"soul",SPECIALIST:"specialist",SPEED_RUNNER:"speed_runner",SPELLCASTER:"spellcaster",SQUIRE:"squire",STAFF:"staff",STEEL:"steel",STRIDER:"strider",STRIKER:"striker",SUMMONER:"summoner",SUPERIOR:"superior",SUPERVISOR:"supervisor",TEACHER:"teacher",TEMPLAR:"templar",THERAPIST:"therapist",THIEF:"thief",TIRANNIAN:"tirannian",TRIALIST:"trialist",TRICKSTER:"trickster",TZKAL:"tzkal",TZTOK:"tztok",UNHOLY:"unholy",VAGRANT:"vagrant",VANGUARD:"vanguard",WALKER:"walker",WANDERER:"wanderer",WARDEN:"warden",WARLOCK:"warlock",WARRIOR:"warrior",WATER:"water",WILD:"wild",WILLOW:"willow",WILY:"wily",WINTUMBER:"wintumber",WITCH:"witch",WIZARD:"wizard",WORKER:"worker",WRATH:"wrath",XERICIAN:"xerician",YELLOW:"yellow",YEW:"yew",ZAMORAKIAN:"zamorakian",ZAROSIAN:"zarosian",ZEALOT:"zealot",ZENYTE:"zenyte"};var dl;(function(t){t.UPCOMING="upcoming",t.ONGOING="ongoing",t.FINISHED="finished"})(dl||(dl={}));var tS;(function(t){t.TEAM="team",t.TEAMS="teams",t.PARTICIPANTS="participants"})(tS||(tS={}));dl.UPCOMING+"",dl.ONGOING+"",dl.FINISHED+"";Object.values(dl);function Vh(t,e){const n={};return Object.keys(t).forEach(r=>{const i=r;n[i]=e(t[i],i,t)}),n}const HH=[T.ADMINISTRATOR,T.OWNER,T.LEADER,T.DEPUTY_OWNER,T.MODERATOR];Vh({[T.ACHIEVER]:{name:"Achiever"},[T.ADAMANT]:{name:"Adamant"},[T.ADEPT]:{name:"Adept"},[T.ADMINISTRATOR]:{name:"Administrator"},[T.ADMIRAL]:{name:"Admiral"},[T.ADVENTURER]:{name:"Adventurer"},[T.AIR]:{name:"Air"},[T.ANCHOR]:{name:"Anchor"},[T.APOTHECARY]:{name:"Apothecary"},[T.ARCHER]:{name:"Archer"},[T.ARMADYLEAN]:{name:"Armadylean"},[T.ARTILLERY]:{name:"Artillery"},[T.ARTISAN]:{name:"Artisan"},[T.ASGARNIAN]:{name:"Asgarnian"},[T.ASSASSIN]:{name:"Assassin"},[T.ASSISTANT]:{name:"Assistant"},[T.ASTRAL]:{name:"Astral"},[T.ATHLETE]:{name:"Athlete"},[T.ATTACKER]:{name:"Attacker"},[T.BANDIT]:{name:"Bandit"},[T.BANDOSIAN]:{name:"Bandosian"},[T.BARBARIAN]:{name:"Barbarian"},[T.BATTLEMAGE]:{name:"Battlemage"},[T.BEAST]:{name:"Beast"},[T.BERSERKER]:{name:"Berserker"},[T.BLISTERWOOD]:{name:"Blisterwood"},[T.BLOOD]:{name:"Blood"},[T.BLUE]:{name:"Blue"},[T.BOB]:{name:"Bob"},[T.BODY]:{name:"Body"},[T.BRASSICAN]:{name:"Brassican"},[T.BRAWLER]:{name:"Brawler"},[T.BRIGADIER]:{name:"Brigadier"},[T.BRIGAND]:{name:"Brigand"},[T.BRONZE]:{name:"Bronze"},[T.BRUISER]:{name:"Bruiser"},[T.BULWARK]:{name:"Bulwark"},[T.BURGLAR]:{name:"Burglar"},[T.BURNT]:{name:"Burnt"},[T.CADET]:{name:"Cadet"},[T.CAPTAIN]:{name:"Captain"},[T.CARRY]:{name:"Carry"},[T.CHAMPION]:{name:"Champion"},[T.CHAOS]:{name:"Chaos"},[T.CLERIC]:{name:"Cleric"},[T.COLLECTOR]:{name:"Collector"},[T.COLONEL]:{name:"Colonel"},[T.COMMANDER]:{name:"Commander"},[T.COMPETITOR]:{name:"Competitor"},[T.COMPLETIONIST]:{name:"Completionist"},[T.CONSTRUCTOR]:{name:"Constructor"},[T.COOK]:{name:"Cook"},[T.COORDINATOR]:{name:"Coordinator"},[T.CORPORAL]:{name:"Corporal"},[T.COSMIC]:{name:"Cosmic"},[T.COUNCILLOR]:{name:"Councillor"},[T.CRAFTER]:{name:"Crafter"},[T.CREW]:{name:"Crew"},[T.CRUSADER]:{name:"Crusader"},[T.CUTPURSE]:{name:"Cutpurse"},[T.DEATH]:{name:"Death"},[T.DEFENDER]:{name:"Defender"},[T.DEFILER]:{name:"Defiler"},[T.DEPUTY_OWNER]:{name:"Deputy Owner"},[T.DESTROYER]:{name:"Destroyer"},[T.DIAMOND]:{name:"Diamond"},[T.DISEASED]:{name:"Diseased"},[T.DOCTOR]:{name:"Doctor"},[T.DOGSBODY]:{name:"Dogsbody"},[T.DRAGON]:{name:"Dragon"},[T.DRAGONSTONE]:{name:"Dragonstone"},[T.DRUID]:{name:"Druid"},[T.DUELLIST]:{name:"Duellist"},[T.EARTH]:{name:"Earth"},[T.ELITE]:{name:"Elite"},[T.EMERALD]:{name:"Emerald"},[T.ENFORCER]:{name:"Enforcer"},[T.EPIC]:{name:"Epic"},[T.EXECUTIVE]:{name:"Executive"},[T.EXPERT]:{name:"Expert"},[T.EXPLORER]:{name:"Explorer"},[T.FARMER]:{name:"Farmer"},[T.FEEDER]:{name:"Feeder"},[T.FIGHTER]:{name:"Fighter"},[T.FIRE]:{name:"Fire"},[T.FIREMAKER]:{name:"Firemaker"},[T.FIRESTARTER]:{name:"Firestarter"},[T.FISHER]:{name:"Fisher"},[T.FLETCHER]:{name:"Fletcher"},[T.FORAGER]:{name:"Forager"},[T.FREMENNIK]:{name:"Fremennik"},[T.GAMER]:{name:"Gamer"},[T.GATHERER]:{name:"Gatherer"},[T.GENERAL]:{name:"General"},[T.GNOME_CHILD]:{name:"Gnome Child"},[T.GNOME_ELDER]:{name:"Gnome Elder"},[T.GOBLIN]:{name:"Goblin"},[T.GOLD]:{name:"Gold"},[T.GOON]:{name:"Goon"},[T.GREEN]:{name:"Green"},[T.GREY]:{name:"Grey"},[T.GUARDIAN]:{name:"Guardian"},[T.GUTHIXIAN]:{name:"Guthixian"},[T.HARPOON]:{name:"Harpoon"},[T.HEALER]:{name:"Healer"},[T.HELLCAT]:{name:"Hellcat"},[T.HELPER]:{name:"Helper"},[T.HERBOLOGIST]:{name:"Herbologist"},[T.HERO]:{name:"Hero"},[T.HOLY]:{name:"Holy"},[T.HOARDER]:{name:"Hoarder"},[T.HUNTER]:{name:"Hunter"},[T.IGNITOR]:{name:"Ignitor"},[T.ILLUSIONIST]:{name:"Illusionist"},[T.IMP]:{name:"Imp"},[T.INFANTRY]:{name:"Infantry"},[T.INQUISITOR]:{name:"Inquisitor"},[T.IRON]:{name:"Iron"},[T.JADE]:{name:"Jade"},[T.JUSTICIAR]:{name:"Justiciar"},[T.KANDARIN]:{name:"Kandarin"},[T.KARAMJAN]:{name:"Karamjan"},[T.KHARIDIAN]:{name:"Kharidian"},[T.KITTEN]:{name:"Kitten"},[T.KNIGHT]:{name:"Knight"},[T.LABOURER]:{name:"Labourer"},[T.LAW]:{name:"Law"},[T.LEADER]:{name:"Leader"},[T.LEARNER]:{name:"Learner"},[T.LEGACY]:{name:"Legacy"},[T.LEGEND]:{name:"Legend"},[T.LEGIONNAIRE]:{name:"Legionnaire"},[T.LIEUTENANT]:{name:"Lieutenant"},[T.LOOTER]:{name:"Looter"},[T.LUMBERJACK]:{name:"Lumberjack"},[T.MAGIC]:{name:"Magic"},[T.MAGICIAN]:{name:"Magician"},[T.MAJOR]:{name:"Major"},[T.MAPLE]:{name:"Maple"},[T.MARSHAL]:{name:"Marshal"},[T.MASTER]:{name:"Master"},[T.MAXED]:{name:"Maxed"},[T.MEDIATOR]:{name:"Mediator"},[T.MEDIC]:{name:"Medic"},[T.MENTOR]:{name:"Mentor"},[T.MEMBER]:{name:"Member"},[T.MERCHANT]:{name:"Merchant"},[T.MIND]:{name:"Mind"},[T.MINER]:{name:"Miner"},[T.MINION]:{name:"Minion"},[T.MISTHALINIAN]:{name:"Misthalinian"},[T.MITHRIL]:{name:"Mithril"},[T.MODERATOR]:{name:"Moderator"},[T.MONARCH]:{name:"Monarch"},[T.MORYTANIAN]:{name:"Morytanian"},[T.MYSTIC]:{name:"Mystic"},[T.MYTH]:{name:"Myth"},[T.NATURAL]:{name:"Natural"},[T.NATURE]:{name:"Nature"},[T.NECROMANCER]:{name:"Necromancer"},[T.NINJA]:{name:"Ninja"},[T.NOBLE]:{name:"Noble"},[T.NOVICE]:{name:"Novice"},[T.NURSE]:{name:"Nurse"},[T.OAK]:{name:"Oak"},[T.OFFICER]:{name:"Officer"},[T.ONYX]:{name:"Onyx"},[T.OPAL]:{name:"Opal"},[T.ORACLE]:{name:"Oracle"},[T.ORANGE]:{name:"Orange"},[T.OWNER]:{name:"Owner"},[T.PAGE]:{name:"Page"},[T.PALADIN]:{name:"Paladin"},[T.PAWN]:{name:"Pawn"},[T.PILGRIM]:{name:"Pilgrim"},[T.PINE]:{name:"Pine"},[T.PINK]:{name:"Pink"},[T.PREFECT]:{name:"Prefect"},[T.PRIEST]:{name:"Priest"},[T.PRIVATE]:{name:"Private"},[T.PRODIGY]:{name:"Prodigy"},[T.PROSELYTE]:{name:"Proselyte"},[T.PROSPECTOR]:{name:"Prospector"},[T.PROTECTOR]:{name:"Protector"},[T.PURE]:{name:"Pure"},[T.PURPLE]:{name:"Purple"},[T.PYROMANCER]:{name:"Pyromancer"},[T.QUESTER]:{name:"Quester"},[T.RACER]:{name:"Racer"},[T.RAIDER]:{name:"Raider"},[T.RANGER]:{name:"Ranger"},[T.RECORD_CHASER]:{name:"Record-Chaser"},[T.RECRUIT]:{name:"Recruit"},[T.RECRUITER]:{name:"Recruiter"},[T.RED_TOPAZ]:{name:"Red Topaz"},[T.RED]:{name:"Red"},[T.ROGUE]:{name:"Rogue"},[T.RUBY]:{name:"Ruby"},[T.RUNE]:{name:"Rune"},[T.RUNECRAFTER]:{name:"Runecrafter"},[T.SAGE]:{name:"Sage"},[T.SAPPHIRE]:{name:"Sapphire"},[T.SARADOMINIST]:{name:"Saradominist"},[T.SAVIOUR]:{name:"Saviour"},[T.SCAVENGER]:{name:"Scavenger"},[T.SCHOLAR]:{name:"Scholar"},[T.SCOURGE]:{name:"Scourge"},[T.SCOUT]:{name:"Scout"},[T.SCRIBE]:{name:"Scribe"},[T.SEER]:{name:"Seer"},[T.SENATOR]:{name:"Senator"},[T.SENTRY]:{name:"Sentry"},[T.SERENIST]:{name:"Serenist"},[T.SERGEANT]:{name:"Sergeant"},[T.SHAMAN]:{name:"Shaman"},[T.SHERIFF]:{name:"Sheriff"},[T.SHORT_GREEN_GUY]:{name:"Short Green Guy"},[T.SKILLER]:{name:"Skiller"},[T.SKULLED]:{name:"Skulled"},[T.SLAYER]:{name:"Slayer"},[T.SMITER]:{name:"Smiter"},[T.SMITH]:{name:"Smith"},[T.SMUGGLER]:{name:"Smuggler"},[T.SNIPER]:{name:"Sniper"},[T.SOUL]:{name:"Soul"},[T.SPECIALIST]:{name:"Specialist"},[T.SPEED_RUNNER]:{name:"Speed-Runner"},[T.SPELLCASTER]:{name:"Spellcaster"},[T.SQUIRE]:{name:"Squire"},[T.STAFF]:{name:"Staff"},[T.STEEL]:{name:"Steel"},[T.STRIDER]:{name:"Strider"},[T.STRIKER]:{name:"Striker"},[T.SUMMONER]:{name:"Summoner"},[T.SUPERIOR]:{name:"Superior"},[T.SUPERVISOR]:{name:"Supervisor"},[T.TEACHER]:{name:"Teacher"},[T.TEMPLAR]:{name:"Templar"},[T.THERAPIST]:{name:"Therapist"},[T.THIEF]:{name:"Thief"},[T.TIRANNIAN]:{name:"Tirannian"},[T.TRIALIST]:{name:"Trialist"},[T.TRICKSTER]:{name:"Trickster"},[T.TZKAL]:{name:"TzKal"},[T.TZTOK]:{name:"TzTok"},[T.UNHOLY]:{name:"Unholy"},[T.VAGRANT]:{name:"Vagrant"},[T.VANGUARD]:{name:"Vanguard"},[T.WALKER]:{name:"Walker"},[T.WANDERER]:{name:"Wanderer"},[T.WARDEN]:{name:"Warden"},[T.WARLOCK]:{name:"Warlock"},[T.WARRIOR]:{name:"Warrior"},[T.WATER]:{name:"Water"},[T.WILD]:{name:"Wild"},[T.WILLOW]:{name:"Willow"},[T.WILY]:{name:"Wily"},[T.WINTUMBER]:{name:"Wintumber"},[T.WITCH]:{name:"Witch"},[T.WIZARD]:{name:"Wizard"},[T.WORKER]:{name:"Worker"},[T.WRATH]:{name:"Wrath"},[T.XERICIAN]:{name:"Xerician"},[T.YELLOW]:{name:"Yellow"},[T.YEW]:{name:"Yew"},[T.ZAMORAKIAN]:{name:"Zamorakian"},[T.ZAROSIAN]:{name:"Zarosian"},[T.ZEALOT]:{name:"Zealot"},[T.ZENYTE]:{name:"Zenyte"}},(t,e)=>Object.assign(Object.assign({},t),{isPriveleged:HH.includes(e)}));var Ll;(function(t){t.SKILL="skill",t.BOSS="boss",t.ACTIVITY="activity",t.COMPUTED="computed"})(Ll||(Ll={}));var Vl;(function(t){t.EXPERIENCE="experience",t.KILLS="kills",t.SCORE="score",t.VALUE="value"})(Vl||(Vl={}));const zH=Vh({[bt.OVERALL]:{name:"Overall"},[bt.ATTACK]:{name:"Attack",isCombat:!0},[bt.DEFENCE]:{name:"Defence",isCombat:!0},[bt.STRENGTH]:{name:"Strength",isCombat:!0},[bt.HITPOINTS]:{name:"Hitpoints",isCombat:!0},[bt.RANGED]:{name:"Ranged",isCombat:!0},[bt.PRAYER]:{name:"Prayer",isCombat:!0},[bt.MAGIC]:{name:"Magic",isCombat:!0},[bt.COOKING]:{name:"Cooking"},[bt.WOODCUTTING]:{name:"Woodcutting"},[bt.FLETCHING]:{name:"Fletching",isMembers:!0},[bt.FISHING]:{name:"Fishing"},[bt.FIREMAKING]:{name:"Firemaking"},[bt.CRAFTING]:{name:"Crafting"},[bt.SMITHING]:{name:"Smithing"},[bt.MINING]:{name:"Mining"},[bt.HERBLORE]:{name:"Herblore",isMembers:!0},[bt.AGILITY]:{name:"Agility",isMembers:!0},[bt.THIEVING]:{name:"Thieving",isMembers:!0},[bt.SLAYER]:{name:"Slayer",isMembers:!0},[bt.FARMING]:{name:"Farming",isMembers:!0},[bt.RUNECRAFTING]:{name:"Runecrafting"},[bt.HUNTER]:{name:"Hunter",isMembers:!0},[bt.CONSTRUCTION]:{name:"Construction",isMembers:!0}},t=>Object.assign(Object.assign({},t),{type:Ll.SKILL,measure:Vl.EXPERIENCE,isCombat:"isCombat"in t?t.isCombat:!1,isMembers:"isMembers"in t?t.isMembers:!1})),jH=Vh({[ye.ABYSSAL_SIRE]:{name:"Abyssal Sire"},[ye.ALCHEMICAL_HYDRA]:{name:"Alchemical Hydra"},[ye.ARTIO]:{name:"Artio"},[ye.BARROWS_CHESTS]:{name:"Barrows Chests"},[ye.BRYOPHYTA]:{name:"Bryophyta",isMembers:!1},[ye.CALLISTO]:{name:"Callisto"},[ye.CALVARION]:{name:"Calvar'ion"},[ye.CERBERUS]:{name:"Cerberus"},[ye.CHAMBERS_OF_XERIC]:{name:"Chambers Of Xeric"},[ye.CHAMBERS_OF_XERIC_CM]:{name:"Chambers Of Xeric (CM)"},[ye.CHAOS_ELEMENTAL]:{name:"Chaos Elemental"},[ye.CHAOS_FANATIC]:{name:"Chaos Fanatic"},[ye.COMMANDER_ZILYANA]:{name:"Commander Zilyana"},[ye.CORPOREAL_BEAST]:{name:"Corporeal Beast"},[ye.CRAZY_ARCHAEOLOGIST]:{name:"Crazy Archaeologist"},[ye.DAGANNOTH_PRIME]:{name:"Dagannoth Prime"},[ye.DAGANNOTH_REX]:{name:"Dagannoth Rex"},[ye.DAGANNOTH_SUPREME]:{name:"Dagannoth Supreme"},[ye.DERANGED_ARCHAEOLOGIST]:{name:"Deranged Archaeologist"},[ye.DUKE_SUCELLUS]:{name:"Duke Sucellus"},[ye.GENERAL_GRAARDOR]:{name:"General Graardor"},[ye.GIANT_MOLE]:{name:"Giant Mole"},[ye.GROTESQUE_GUARDIANS]:{name:"Grotesque Guardians"},[ye.HESPORI]:{name:"Hespori"},[ye.KALPHITE_QUEEN]:{name:"Kalphite Queen"},[ye.KING_BLACK_DRAGON]:{name:"King Black Dragon"},[ye.KRAKEN]:{name:"Kraken"},[ye.KREEARRA]:{name:"Kree'Arra"},[ye.KRIL_TSUTSAROTH]:{name:"K'ril Tsutsaroth"},[ye.LUNAR_CHESTS]:{name:"Lunar Chests"},[ye.MIMIC]:{name:"Mimic",minimumValue:1},[ye.NEX]:{name:"Nex"},[ye.NIGHTMARE]:{name:"Nightmare"},[ye.PHOSANIS_NIGHTMARE]:{name:"Phosani's Nightmare"},[ye.OBOR]:{name:"Obor",isMembers:!1},[ye.PHANTOM_MUSPAH]:{name:"Phantom Muspah"},[ye.SARACHNIS]:{name:"Sarachnis"},[ye.SCORPIA]:{name:"Scorpia"},[ye.SCURRIUS]:{name:"Scurrius"},[ye.SKOTIZO]:{name:"Skotizo"},[ye.SOL_HEREDIT]:{name:"Sol Heredit"},[ye.SPINDEL]:{name:"Spindel"},[ye.TEMPOROSS]:{name:"Tempoross"},[ye.THE_GAUNTLET]:{name:"The Gauntlet"},[ye.THE_CORRUPTED_GAUNTLET]:{name:"The Corrupted Gauntlet"},[ye.THE_LEVIATHAN]:{name:"The Leviathan"},[ye.THE_WHISPERER]:{name:"The Whisperer"},[ye.THEATRE_OF_BLOOD]:{name:"Theatre Of Blood"},[ye.THEATRE_OF_BLOOD_HARD_MODE]:{name:"Theatre Of Blood (HM)"},[ye.THERMONUCLEAR_SMOKE_DEVIL]:{name:"Thermonuclear Smoke Devil"},[ye.TOMBS_OF_AMASCUT]:{name:"Tombs of Amascut"},[ye.TOMBS_OF_AMASCUT_EXPERT]:{name:"Tombs of Amascut (Expert Mode)"},[ye.TZKAL_ZUK]:{name:"TzKal-Zuk",minimumValue:1},[ye.TZTOK_JAD]:{name:"TzTok-Jad"},[ye.VARDORVIS]:{name:"Vardorvis"},[ye.VENENATIS]:{name:"Venenatis"},[ye.VETION]:{name:"Vet'ion"},[ye.VORKATH]:{name:"Vorkath"},[ye.WINTERTODT]:{name:"Wintertodt"},[ye.ZALCANO]:{name:"Zalcano"},[ye.ZULRAH]:{name:"Zulrah"}},t=>Object.assign(Object.assign({},t),{type:Ll.BOSS,measure:Vl.KILLS,isMembers:"isMembers"in t?t.isMembers:!0,minimumValue:"minimumValue"in t?t.minimumValue:5})),WH=Vh({[mn.LEAGUE_POINTS]:{name:"League Points",minimumValue:100},[mn.BOUNTY_HUNTER_HUNTER]:{name:"Bounty Hunter (Hunter)",minimumValue:2},[mn.BOUNTY_HUNTER_ROGUE]:{name:"Bounty Hunter (Rogue)",minimumValue:2},[mn.CLUE_SCROLLS_ALL]:{name:"Clue Scrolls (All)"},[mn.CLUE_SCROLLS_BEGINNER]:{name:"Clue Scrolls (Beginner)"},[mn.CLUE_SCROLLS_EASY]:{name:"Clue Scrolls (Easy)"},[mn.CLUE_SCROLLS_MEDIUM]:{name:"Clue Scrolls (Medium)"},[mn.CLUE_SCROLLS_HARD]:{name:"Clue Scrolls (Hard)"},[mn.CLUE_SCROLLS_ELITE]:{name:"Clue Scrolls (Elite)"},[mn.CLUE_SCROLLS_MASTER]:{name:"Clue Scrolls (Master)"},[mn.LAST_MAN_STANDING]:{name:"Last Man Standing",minimumValue:500},[mn.PVP_ARENA]:{name:"PvP Arena",minimumValue:2525},[mn.SOUL_WARS_ZEAL]:{name:"Soul Wars Zeal",minimumValue:200},[mn.GUARDIANS_OF_THE_RIFT]:{name:"Guardians of the Rift",minimumValue:2},[mn.COLOSSEUM_GLORY]:{name:"Colosseum Glory",minimumValue:300}},t=>Object.assign(Object.assign({},t),{type:Ll.ACTIVITY,measure:Vl.SCORE,minimumValue:"minimumValue"in t?t.minimumValue:1})),qH=Vh({[Qf.EHP]:{name:"EHP"},[Qf.EHB]:{name:"EHB"}},t=>Object.assign(Object.assign({},t),{type:Ll.COMPUTED,measure:Vl.VALUE})),W0=Object.assign(Object.assign(Object.assign(Object.assign({},zH),jH),WH),qH),GH=Object.values(W_),Fh=Object.values(bt),q0=Object.values(ye),rN=Object.values(mn);Object.values(Qf);Fh.filter(t=>t!==bt.OVERALL);q0.filter(t=>!W0[t].isMembers);Fh.filter(t=>W0[t].isMembers);Fh.filter(t=>W0[t].isCombat);[...Fh,...q0,...rN];var nS;(function(t){t.MAIN="main",t.IRONMAN="ironman",t.ULTIMATE="ultimate",t.LVL3="lvl3",t.F2P="f2p",t.F2P_LVL3="f2p_lvl3",t.F2P_IRONMAN="f2p_ironman",t.F2P_LVL3_IRONMAN="f2p_lvl3_ironman"})(nS||(nS={}));var rS;(function(t){t[t.TEMPLE_OSRS=0]="TEMPLE_OSRS",t[t.CRYSTAL_MATH_LABS=1]="CRYSTAL_MATH_LABS"})(rS||(rS={}));class KH extends po{getEfficiencyLeaderboards(e,n){return this.getRequest("/efficiency/leaderboard",Object.assign(Object.assign({},e),n))}getEHPRates(e){return this.getRequest("/efficiency/rates",{metric:W_.EHP,type:e})}getEHBRates(e){return this.getRequest("/efficiency/rates",{metric:W_.EHB,type:e})}}class YH extends po{searchNameChanges(e,n){return this.getRequest("/names",Object.assign(Object.assign({},e),n))}submitNameChange(e,n){return this.postRequest("/names",{oldName:e,newName:n})}}class JH extends po{searchCompetitions(e,n){return this.getRequest("/competitions",Object.assign(Object.assign({},e),n))}getCompetitionDetails(e,n){return this.getRequest(`/competitions/${e}`,{metric:n})}getCompetitionDetailsCSV(e,n){return this.getText(`/competitions/${e}/csv`,Object.assign({metric:n.previewMetric},n))}getCompetitionTopHistory(e,n){return this.getRequest(`/competitions/${e}/top-history`,{metric:n})}createCompetition(e){return this.postRequest("/competitions",e)}editCompetition(e,n,r){return this.putRequest(`/competitions/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteCompetition(e,n){return this.deleteRequest(`/competitions/${e}`,{verificationCode:n})}addParticipants(e,n,r){return this.postRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}removeParticipants(e,n,r){return this.deleteRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}addTeams(e,n,r){return this.postRequest(`/competitions/${e}/teams`,{verificationCode:r,teams:n})}removeTeams(e,n,r){return this.deleteRequest(`/competitions/${e}/teams`,{verificationCode:r,teamNames:n})}updateAll(e,n){return this.postRequest(`/competitions/${e}/update-all`,{verificationCode:n})}}class G0 extends po{constructor(e){const n=(e==null?void 0:e.baseAPIUrl)||Zw.baseAPIUrl,r={"x-user-agent":(e==null?void 0:e.userAgent)||Zw.defaultUserAgent};e!=null&&e.apiKey&&(r["x-api-key"]=e.apiKey),super(r,n),this.deltas=new FH(r,n),this.groups=new UH(r,n),this.players=new BH(r,n),this.records=new $H(r,n),this.efficiency=new KH(r,n),this.nameChanges=new YH(r,n),this.competitions=new JH(r,n)}}const QH={key:0},XH=b("h1",null,"Create new Bingo",-1),ZH={key:0},ez={key:2},tz=Ut({__name:"newBoard.vapor",async setup(t){let e,n;const r=WO(),i=([e,n]=ir(()=>Di()),e=await e,n(),e),s=ae(!1),o=ae(40963),a=ae(),l=new G0({apiKey:"zpyy03zybxt0oiznjw6e1mz2",userAgent:"_Odinh"}),c=ae({}),u=ae({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),h=ae({}),d=async()=>{!o.value||o.value<=0||isNaN(o.value)||await l.competitions.getCompetitionDetails(o.value).then(async m=>{if(m!=null&&m.message)throw new Error("Error creating bingo: "+m.message);if((m==null?void 0:m.metric)!="overall")throw new Error("Error creating bingo: Metric should be set to `Overall`");if((m==null?void 0:m.type)!="team")throw new Error("Error creating bingo: Type should be set to `Team`");if(!(m!=null&&m.participations))throw new Error("Error creating bingo: No participants found");if(new Date>m.endsAt)throw new Error("Error creating bingo: Competition has already ended");const g=Xe(Me,"Boards",o.value.toString());if((await Xr(g)).exists())throw new Error("Error creating bingo: Board already exists");h.value={name:m.title,start:m.startsAt,end:m.endsAt,published:!1},c.value=f(m),s.value=!0}).catch(m=>{a.value=m.message})},f=m=>{var _;const g=ae(),y=ae({});return g.value=m.participations,(_=g.value)==null||_.map(v=>{y.value[v.teamName]={teamName:v.teamName,players:[],stats:null}}),g.value.map(v=>{delete v.player.ehb,delete v.player.exp,delete v.player.ehp,y.value[v.teamName].players=[...y.value[v.teamName].players,y.value[v.teamName].players[v.player.username]={...v.player}]}),y.value},p=async()=>{const m=Xe(Me,"Boards",o.value.toString());i&&await Ow(m,{ownerID:i.uid}).then(()=>{const g=Xe(Me,"Users",i.uid);for(let y in c.value){const _=Xe(Zn(Me,"Boards",m.id,"Groups")),v=c.value[y];Ow(Xe(Me,_.path),{teamName:v.teamName,teamId:_.id,players:c.value[y].players,stats:null})}Qo(m,{name:h.value.name,start:h.value.start,end:h.value.end}),Qo(g,{boards:f7(m.id)})}).then(()=>{r.push({name:"editBoard",params:{boardUUID:m.id}})}).catch(g=>{a.value=g.message}),s.value=!1};return(m,g)=>{var y,_;return K(i)?(R(),x("div",QH,[XH,a.value?(R(),x("p",ZH,ne(a.value),1)):ce("",!0),zt(b("input",{type:"number","onUpdate:modelValue":g[0]||(g[0]=v=>o.value=v),placeholder:"12345 WOM Team competition code",min:"0",onFocusin:g[1]||(g[1]=()=>{a.value=""})},null,544),[[Ar,o.value]]),b("button",{onClick:g[2]||(g[2]=v=>d())},"Create new Bingo"),s.value?(R(),x("button",{key:1,onClick:g[3]||(g[3]=v=>p())},"finish setup")):ce("",!0),c.value!==null&&s.value?(R(),x("div",ez,[b("h1",null,ne(h.value.name),1),h.value.start?(R(),x(se,{key:0},[b("p",null," Starts: "+ne(h.value.start.toLocaleDateString(void 0,u.value)),1),b("code",null,"<t:"+ne(((y=h.value.start)==null?void 0:y.valueOf())/1e3)+":F>",1)],64)):ce("",!0),h.value.end?(R(),x(se,{key:1},[b("p",null," Ends: "+ne(h.value.end.toLocaleDateString(void 0,u.value)),1),b("code",null,"<t:"+ne(((_=h.value.end)==null?void 0:_.valueOf())/1e3)+":F>",1)],64)):ce("",!0),(R(!0),x(se,null,at(c.value,v=>(R(),x("div",{key:v.teamName},[te(ne(v)+" ",1),b("h2",null,ne(v.teamName),1),(R(!0),x(se,null,at(v.players,w=>(R(),x("div",{key:w.username},[b("div",null,ne(w.username),1)]))),128))]))),128))])):ce("",!0)])):ce("",!0)}}}),nz=Ut({__name:"userBoardListItems.vapor",props:{boardID:{}},async setup(t){let e,n;const r=t,{data:i,promise:s}=Ra(Xe(Me,"Boards",r.boardID));[e,n]=ir(()=>Promise.all([s.value])),await e,n();const o=()=>{var a;if((a=i.value)!=null&&a.published){i.value.published=!i.value.published,Qo(Xe(Me,"Boards",r.boardID),{published:i.value.published});return}Qo(Xe(Me,"Boards",r.boardID),{published:!0})};return(a,l)=>{var u,h,d,f;const c=vr("router-link");return R(),x(se,null,[K(i)?(R(),x("label",{key:(u=K(i))==null?void 0:u.id},[te(ne((h=K(i))==null?void 0:h.name)+" ",1),Ee(c,{to:{name:"editBoard",params:{boardUUID:(d=K(i))==null?void 0:d.id}},class:"btn",icon:""},{default:lt(()=>[te(" edit ")]),_:1},8,["to"])])):ce("",!0),Ee(c,{to:{name:"viewBoard",params:{boardUUID:(f=K(i))==null?void 0:f.id}},class:"btn",icon:""},{default:lt(()=>[te(" visibility ")]),_:1},8,["to"]),zt(b("input",{type:"checkbox",onClick:o,toggle:"","onUpdate:modelValue":l[0]||(l[0]=p=>K(i).published=p)},null,512),[[Uy,K(i).published]])],64)}}}),rz={key:0},iz=b("h1",null,"Log in",-1),sz=b("p",null,"you need to be signed in to edit, create and moderate a board",-1),oz=b("h1",null,"User details",-1),az=b("h2",null,"Boards",-1),lz=Ut({__name:"loginView.vapor",async setup(t){let e,n;const r=WO(),i=new $i,s=X7(),o=S5(),a=ae();if(o.value){const{data:d,promise:f}=Ra(Xe(Me,"Users",o.value.uid));[e,n]=ir(()=>f.value.then(()=>{var p;a.value=(p=d.value)==null?void 0:p.boards})),await e,n()}const l=lc(),c=()=>o.value?"User details":"log in";l.value=c()+" - Bingo Bongo";const u=()=>{YL(s,i).then(()=>{r.push({name:"Home"})}).catch(d=>{const f=d.message;console.error(f)})},h=()=>{kL(s).then(()=>r.push({name:"Home"}))};return(d,f)=>K(o)?(R(),x(se,{key:1},[b("div",null,[oz,b("button",{class:"btn",onClick:it(h,["prevent"])},"Log out")]),b("div",null,[az,b("ul",null,[(R(!0),x(se,null,at(a.value,p=>(R(),x("li",null,[(R(),qe(nz,{boardID:p,key:p},null,8,["boardID"]))]))),256))])])],64)):(R(),x("div",rz,[iz,sz,K(o)?ce("",!0):(R(),x("button",{key:0,class:"btn",onClick:it(u,["prevent"])},"Log in with Google"))]))}});/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function iS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ri(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iS(Object(n),!0).forEach(function(r){cz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yd(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yd=function(e){return typeof e}:Yd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function cz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function is(){return is=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},is.apply(this,arguments)}function uz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hz(t,e){if(t==null)return{};var n=uz(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var dz="1.15.2";function Zi(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var hs=Zi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Uh=Zi(/Edge/i),sS=Zi(/firefox/i),ou=Zi(/safari/i)&&!Zi(/chrome/i)&&!Zi(/android/i),iN=Zi(/iP(ad|od|hone)/i),sN=Zi(/chrome/i)&&Zi(/android/i),oN={capture:!1,passive:!1};function st(t,e,n){t.addEventListener(e,n,!hs&&oN)}function tt(t,e,n){t.removeEventListener(e,n,!hs&&oN)}function Xf(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function fz(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Fr(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Xf(t,e):Xf(t,e))||r&&t===n)return t;if(t===n)break}while(t=fz(t))}return null}var oS=/\s+/g;function ar(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(oS," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(oS," ")}}function Re(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function fl(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Re(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function aN(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Ei(){var t=document.scrollingElement;return t||document.documentElement}function Wt(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,u,h;if(t!==window&&t.parentNode&&t!==Ei()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!hs))do if(i&&i.getBoundingClientRect&&(Re(i,"transform")!=="none"||n&&Re(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(Re(i,"border-top-width")),a-=d.left+parseInt(Re(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var f=fl(i||t),p=f&&f.a,m=f&&f.d;f&&(o/=m,a/=p,h/=p,u/=m,l=o+u,c=a+h)}return{top:o,left:a,bottom:l,right:c,width:h,height:u}}}function aS(t,e,n){for(var r=Ls(t,!0),i=Wt(t)[e];r;){var s=Wt(r)[n],o=void 0;if(n==="top"||n==="left"?o=i>=s:o=i<=s,!o)return r;if(r===Ei())break;r=Ls(r,!1)}return!1}function Fl(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Oe.ghost&&(r||o[s]!==Oe.dragged)&&Fr(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function K0(t,e){for(var n=t.lastElementChild;n&&(n===Oe.ghost||Re(n,"display")==="none"||e&&!Xf(n,e));)n=n.previousElementSibling;return n||null}function Ir(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Oe.clone&&(!e||Xf(t,e))&&n++;return n}function lS(t){var e=0,n=0,r=Ei();if(t)do{var i=fl(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function pz(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Ls(t,e){if(!t||!t.getBoundingClientRect)return Ei();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Re(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Ei();if(r||e)return n;r=!0}}while(n=n.parentNode);return Ei()}function mz(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Vg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var au;function lN(t,e){return function(){if(!au){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),au=setTimeout(function(){au=void 0},e)}}}function gz(){clearTimeout(au),au=void 0}function cN(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function uN(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function hN(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var s,o,a,l;if(!(!Fr(i,e.draggable,t,!1)||i.animated||i===n)){var c=Wt(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var hr="Sortable"+new Date().getTime();function yz(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Re(i,"display")==="none"||i===Oe.ghost)){t.push({target:i,rect:Wt(i)});var s=Ri({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=fl(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(pz(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=Wt(c),d=c.prevFromRect,f=c.prevToRect,p=a.rect,m=fl(c,!0);m&&(h.top-=m.f,h.left-=m.e),c.toRect=h,c.thisAnimationDuration&&Vg(d,h)&&!Vg(u,h)&&(p.top-h.top)/(p.left-h.left)===(u.top-h.top)/(u.left-h.left)&&(l=vz(p,d,f,i.options)),Vg(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=i.options.animation),i.animate(c,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){Re(r,"transition",""),Re(r,"transform","");var a=fl(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-s.left)/(l||1),h=(i.top-s.top)/(c||1);r.animatingX=!!u,r.animatingY=!!h,Re(r,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=_z(r),Re(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Re(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Re(r,"transition",""),Re(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function _z(t){return t.offsetWidth}function vz(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Pa=[],Fg={initializeByDefault:!0},Bh={mount:function(e){for(var n in Fg)Fg.hasOwnProperty(n)&&!(n in e)&&(e[n]=Fg[n]);Pa.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Pa.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Pa.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Ri({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Ri({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Pa.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,is(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Pa.forEach(function(i){typeof i.eventProperties=="function"&&is(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Pa.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function bz(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[hr],!!e){var m,g=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!hs&&!Uh?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||n,m.from=a||n,m.item=i||n,m.clone=s,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=d,m.pullMode=f?f.lastPutMode:void 0;var _=Ri(Ri({},p),Bh.getEventProperties(r,e));for(var v in _)m[v]=_[v];n&&n.dispatchEvent(m),g[y]&&g[y].call(e,m)}}var Ez=["evt"],Yn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=hz(r,Ez);Bh.pluginEvent.bind(Oe)(e,n,Ri({dragEl:re,parentEl:xt,ghostEl:Ve,rootEl:Ot,nextEl:Co,lastDownEl:Jd,cloneEl:Mt,cloneHidden:Ps,dragStarted:Pc,putSortable:gn,activeSortable:Oe.active,originalEvent:i,oldIndex:Ga,oldDraggableIndex:lu,newIndex:lr,newDraggableIndex:Cs,hideGhostForTarget:mN,unhideGhostForTarget:gN,cloneNowHidden:function(){Ps=!0},cloneNowShown:function(){Ps=!1},dispatchSortableEvent:function(a){$n({sortable:n,name:a,originalEvent:i})}},s))};function $n(t){bz(Ri({putSortable:gn,cloneEl:Mt,targetEl:re,rootEl:Ot,oldIndex:Ga,oldDraggableIndex:lu,newIndex:lr,newDraggableIndex:Cs},t))}var re,xt,Ve,Ot,Co,Jd,Mt,Ps,Ga,lr,lu,Cs,yd,gn,$a=!1,Zf=!1,ep=[],wo,Lr,Ug,Bg,cS,uS,Pc,Da,cu,uu=!1,_d=!1,Qd,kn,$g=[],q_=!1,tp=[],Om=typeof document<"u",vd=iN,hS=Uh||hs?"cssFloat":"float",Tz=Om&&!sN&&!iN&&"draggable"in document.createElement("div"),dN=function(){if(Om){if(hs)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),fN=function(e,n){var r=Re(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Fl(e,0,n),o=Fl(e,1,n),a=s&&Re(s),l=o&&Re(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Wt(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Wt(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[hS]==="none"||o&&r[hS]==="none"&&c+u>i)?"vertical":"horizontal"},wz=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},Sz=function(e,n){var r;return ep.some(function(i){var s=i[hr].options.emptyInsertThreshold;if(!(!s||K0(i))){var o=Wt(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},pN=function(e){function n(s,o){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,u),o)(a,l,c,u);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},i=e.group;(!i||Yd(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},mN=function(){!dN&&Ve&&Re(Ve,"display","none")},gN=function(){!dN&&Ve&&Re(Ve,"display","")};Om&&!sN&&document.addEventListener("click",function(t){if(Zf)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Zf=!1,!1},!0);var So=function(e){if(re){e=e.touches?e.touches[0]:e;var n=Sz(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[hr]._onDragOver(r)}}},Iz=function(e){re&&re.parentNode[hr]._isOutsideThisEl(e.target)};function Oe(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=is({},e),t[hr]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fN(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Oe.supportPointer!==!1&&"PointerEvent"in window&&!ou,emptyInsertThreshold:5};Bh.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);pN(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:Tz,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?st(t,"pointerdown",this._onTapStart):(st(t,"mousedown",this._onTapStart),st(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(st(t,"dragover",this),st(t,"dragenter",this)),ep.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),is(this,yz())}Oe.prototype={constructor:Oe,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Da=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,re):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(Pz(r),!re&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&ou&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Fr(l,i.draggable,r,!1),!(l&&l.animated)&&Jd!==l)){if(Ga=Ir(l),lu=Ir(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){$n({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Yn("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=Fr(c,h.trim(),r,!1),h)return $n({sortable:n,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),Yn("filter",n,{evt:e}),!0}),u)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Fr(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!re&&r.parentNode===s){var c=Wt(r);if(Ot=s,re=r,xt=re.parentNode,Co=re.nextSibling,Jd=r,yd=o.group,Oe.dragged=re,wo={target:re,clientX:(n||e).clientX,clientY:(n||e).clientY},cS=wo.clientX-c.left,uS=wo.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,re.style["will-change"]="all",l=function(){if(Yn("delayEnded",i,{evt:e}),Oe.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!sS&&i.nativeDraggable&&(re.draggable=!0),i._triggerDragStart(e,n),$n({sortable:i,name:"choose",originalEvent:e}),ar(re,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){aN(re,u.trim(),Hg)}),st(a,"dragover",So),st(a,"mousemove",So),st(a,"touchmove",So),st(a,"mouseup",i._onDrop),st(a,"touchend",i._onDrop),st(a,"touchcancel",i._onDrop),sS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,re.draggable=!0),Yn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Uh||hs))){if(Oe.eventCanceled){this._onDrop();return}st(a,"mouseup",i._disableDelayedDrag),st(a,"touchend",i._disableDelayedDrag),st(a,"touchcancel",i._disableDelayedDrag),st(a,"mousemove",i._delayedDragTouchMoveHandler),st(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&st(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){re&&Hg(re),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;tt(e,"mouseup",this._disableDelayedDrag),tt(e,"touchend",this._disableDelayedDrag),tt(e,"touchcancel",this._disableDelayedDrag),tt(e,"mousemove",this._delayedDragTouchMoveHandler),tt(e,"touchmove",this._delayedDragTouchMoveHandler),tt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?st(document,"pointermove",this._onTouchMove):n?st(document,"touchmove",this._onTouchMove):st(document,"mousemove",this._onTouchMove):(st(re,"dragend",this),st(Ot,"dragstart",this._onDragStart));try{document.selection?Xd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if($a=!1,Ot&&re){Yn("dragStarted",this,{evt:n}),this.nativeDraggable&&st(document,"dragover",Iz);var r=this.options;!e&&ar(re,r.dragClass,!1),ar(re,r.ghostClass,!0),Oe.active=this,e&&this._appendGhost(),$n({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Lr){this._lastX=Lr.clientX,this._lastY=Lr.clientY,mN();for(var e=document.elementFromPoint(Lr.clientX,Lr.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Lr.clientX,Lr.clientY),e!==n);)n=e;if(re.parentNode[hr]._isOutsideThisEl(e),n)do{if(n[hr]){var r=void 0;if(r=n[hr]._onDragOver({clientX:Lr.clientX,clientY:Lr.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);gN()}},_onTouchMove:function(e){if(wo){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Ve&&fl(Ve,!0),a=Ve&&o&&o.a,l=Ve&&o&&o.d,c=vd&&kn&&lS(kn),u=(s.clientX-wo.clientX+i.x)/(a||1)+(c?c[0]-$g[0]:0)/(a||1),h=(s.clientY-wo.clientY+i.y)/(l||1)+(c?c[1]-$g[1]:0)/(l||1);if(!Oe.active&&!$a){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Ve){o?(o.e+=u-(Ug||0),o.f+=h-(Bg||0)):o={a:1,b:0,c:0,d:1,e:u,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Re(Ve,"webkitTransform",d),Re(Ve,"mozTransform",d),Re(Ve,"msTransform",d),Re(Ve,"transform",d),Ug=u,Bg=h,Lr=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ve){var e=this.options.fallbackOnBody?document.body:Ot,n=Wt(re,!0,vd,!0,e),r=this.options;if(vd){for(kn=e;Re(kn,"position")==="static"&&Re(kn,"transform")==="none"&&kn!==document;)kn=kn.parentNode;kn!==document.body&&kn!==document.documentElement?(kn===document&&(kn=Ei()),n.top+=kn.scrollTop,n.left+=kn.scrollLeft):kn=Ei(),$g=lS(kn)}Ve=re.cloneNode(!0),ar(Ve,r.ghostClass,!1),ar(Ve,r.fallbackClass,!0),ar(Ve,r.dragClass,!0),Re(Ve,"transition",""),Re(Ve,"transform",""),Re(Ve,"box-sizing","border-box"),Re(Ve,"margin",0),Re(Ve,"top",n.top),Re(Ve,"left",n.left),Re(Ve,"width",n.width),Re(Ve,"height",n.height),Re(Ve,"opacity","0.8"),Re(Ve,"position",vd?"absolute":"fixed"),Re(Ve,"zIndex","100000"),Re(Ve,"pointerEvents","none"),Oe.ghost=Ve,e.appendChild(Ve),Re(Ve,"transform-origin",cS/parseInt(Ve.style.width)*100+"% "+uS/parseInt(Ve.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Yn("dragStart",this,{evt:e}),Oe.eventCanceled){this._onDrop();return}Yn("setupClone",this),Oe.eventCanceled||(Mt=uN(re),Mt.removeAttribute("id"),Mt.draggable=!1,Mt.style["will-change"]="",this._hideClone(),ar(Mt,this.options.chosenClass,!1),Oe.clone=Mt),r.cloneId=Xd(function(){Yn("clone",r),!Oe.eventCanceled&&(r.options.removeCloneOnHide||Ot.insertBefore(Mt,re),r._hideClone(),$n({sortable:r,name:"clone"}))}),!n&&ar(re,s.dragClass,!0),n?(Zf=!0,r._loopId=setInterval(r._emulateDragOver,50)):(tt(document,"mouseup",r._onDrop),tt(document,"touchend",r._onDrop),tt(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,re)),st(document,"drop",r),Re(re,"transform","translateZ(0)")),$a=!0,r._dragStartId=Xd(r._dragStarted.bind(r,n,e)),st(document,"selectstart",r),Pc=!0,ou&&Re(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Oe.active,u=yd===l,h=a.sort,d=gn||c,f,p=this,m=!1;if(q_)return;function g($,fe){Yn($,p,Ri({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:d,target:r,completed:_,onMove:function(Ne,He){return bd(Ot,n,re,i,Ne,Wt(Ne),e,He)},changed:v},fe))}function y(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _($){return g("dragOverCompleted",{insertion:$}),$&&(u?c._hideClone():c._showClone(p),p!==d&&(ar(re,gn?gn.options.ghostClass:c.options.ghostClass,!1),ar(re,a.ghostClass,!0)),gn!==p&&p!==Oe.active?gn=p:p===Oe.active&&gn&&(gn=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===re&&!re.animated||r===n&&!r.animated)&&(Da=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(re.parentNode[hr]._isOutsideThisEl(e.target),!$&&So(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function v(){lr=Ir(re),Cs=Ir(re,a.draggable),$n({sortable:p,name:"change",toEl:n,newIndex:lr,newDraggableIndex:Cs,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Fr(r,a.draggable,n,!0),g("dragOver"),Oe.eventCanceled)return m;if(re.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return _(!1);if(Zf=!1,c&&!a.disabled&&(u?h||(o=xt!==Ot):gn===this||(this.lastPutMode=yd.checkPull(this,c,re,e))&&l.checkPut(this,c,re,e))){if(f=this._getDirection(e,r)==="vertical",i=Wt(re),g("dragOverValid"),Oe.eventCanceled)return m;if(o)return xt=Ot,y(),this._hideClone(),g("revert"),Oe.eventCanceled||(Co?Ot.insertBefore(re,Co):Ot.appendChild(re)),_(!0);var w=K0(n,a.draggable);if(!w||Rz(e,f,this)&&!w.animated){if(w===re)return _(!1);if(w&&n===e.target&&(r=w),r&&(s=Wt(r)),bd(Ot,n,re,i,r,s,e,!!r)!==!1)return y(),w&&w.nextSibling?n.insertBefore(re,w.nextSibling):n.appendChild(re),xt=n,v(),_(!0)}else if(w&&kz(e,f,this)){var S=Fl(n,0,a,!0);if(S===re)return _(!1);if(r=S,s=Wt(r),bd(Ot,n,re,i,r,s,e,!1)!==!1)return y(),n.insertBefore(re,S),xt=n,v(),_(!0)}else if(r.parentNode===n){s=Wt(r);var A=0,P,M=re.parentNode!==n,k=!wz(re.animated&&re.toRect||i,r.animated&&r.toRect||s,f),z=f?"top":"left",Y=aS(r,"top","top")||aS(re,"top","top"),j=Y?Y.scrollTop:void 0;Da!==r&&(P=s[z],uu=!1,_d=!k&&a.invertSwap||M),A=Oz(e,r,s,f,k?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,_d,Da===r);var U;if(A!==0){var L=Ir(re);do L-=A,U=xt.children[L];while(U&&(Re(U,"display")==="none"||U===Ve))}if(A===0||U===r)return _(!1);Da=r,cu=A;var D=r.nextElementSibling,C=!1;C=A===1;var V=bd(Ot,n,re,i,r,s,e,C);if(V!==!1)return(V===1||V===-1)&&(C=V===1),q_=!0,setTimeout(Cz,30),y(),C&&!D?n.appendChild(re):r.parentNode.insertBefore(re,C?D:r),Y&&cN(Y,0,j-Y.scrollTop),xt=re.parentNode,P!==void 0&&!_d&&(Qd=Math.abs(P-Wt(r)[z])),v(),_(!0)}if(n.contains(re))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){tt(document,"mousemove",this._onTouchMove),tt(document,"touchmove",this._onTouchMove),tt(document,"pointermove",this._onTouchMove),tt(document,"dragover",So),tt(document,"mousemove",So),tt(document,"touchmove",So)},_offUpEvents:function(){var e=this.el.ownerDocument;tt(e,"mouseup",this._onDrop),tt(e,"touchend",this._onDrop),tt(e,"pointerup",this._onDrop),tt(e,"touchcancel",this._onDrop),tt(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(lr=Ir(re),Cs=Ir(re,r.draggable),Yn("drop",this,{evt:e}),xt=re&&re.parentNode,lr=Ir(re),Cs=Ir(re,r.draggable),Oe.eventCanceled){this._nulling();return}$a=!1,_d=!1,uu=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),G_(this.cloneId),G_(this._dragStartId),this.nativeDraggable&&(tt(document,"drop",this),tt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ou&&Re(document.body,"user-select",""),Re(re,"transform",""),e&&(Pc&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Ve&&Ve.parentNode&&Ve.parentNode.removeChild(Ve),(Ot===xt||gn&&gn.lastPutMode!=="clone")&&Mt&&Mt.parentNode&&Mt.parentNode.removeChild(Mt),re&&(this.nativeDraggable&&tt(re,"dragend",this),Hg(re),re.style["will-change"]="",Pc&&!$a&&ar(re,gn?gn.options.ghostClass:this.options.ghostClass,!1),ar(re,this.options.chosenClass,!1),$n({sortable:this,name:"unchoose",toEl:xt,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ot!==xt?(lr>=0&&($n({rootEl:xt,name:"add",toEl:xt,fromEl:Ot,originalEvent:e}),$n({sortable:this,name:"remove",toEl:xt,originalEvent:e}),$n({rootEl:xt,name:"sort",toEl:xt,fromEl:Ot,originalEvent:e}),$n({sortable:this,name:"sort",toEl:xt,originalEvent:e})),gn&&gn.save()):lr!==Ga&&lr>=0&&($n({sortable:this,name:"update",toEl:xt,originalEvent:e}),$n({sortable:this,name:"sort",toEl:xt,originalEvent:e})),Oe.active&&((lr==null||lr===-1)&&(lr=Ga,Cs=lu),$n({sortable:this,name:"end",toEl:xt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Yn("nulling",this),Ot=re=xt=Ve=Co=Mt=Jd=Ps=wo=Lr=Pc=lr=Cs=Ga=lu=Da=cu=gn=yd=Oe.dragged=Oe.ghost=Oe.clone=Oe.active=null,tp.forEach(function(e){e.checked=!0}),tp.length=Ug=Bg=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":re&&(this._onDragOver(e),Az(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Fr(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Mz(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Fr(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Fr(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Bh.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&pN(r)},destroy:function(){Yn("destroy",this);var e=this.el;e[hr]=null,tt(e,"mousedown",this._onTapStart),tt(e,"touchstart",this._onTapStart),tt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(tt(e,"dragover",this),tt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ep.splice(ep.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ps){if(Yn("hideClone",this),Oe.eventCanceled)return;Re(Mt,"display","none"),this.options.removeCloneOnHide&&Mt.parentNode&&Mt.parentNode.removeChild(Mt),Ps=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ps){if(Yn("showClone",this),Oe.eventCanceled)return;re.parentNode==Ot&&!this.options.group.revertClone?Ot.insertBefore(Mt,re):Co?Ot.insertBefore(Mt,Co):Ot.appendChild(Mt),this.options.group.revertClone&&this.animate(re,Mt),Re(Mt,"display",""),Ps=!1}}};function Az(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function bd(t,e,n,r,i,s,o,a){var l,c=t[hr],u=c.options.onMove,h;return window.CustomEvent&&!hs&&!Uh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Wt(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),u&&(h=u.call(c,l,o)),h}function Hg(t){t.draggable=!1}function Cz(){q_=!1}function kz(t,e,n){var r=Wt(Fl(n.el,0,n.options,!0)),i=hN(n.el,n.options,Ve),s=10;return e?t.clientX<i.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-s||t.clientY<r.bottom&&t.clientX<r.left}function Rz(t,e,n){var r=Wt(K0(n.el,n.options.draggable)),i=hN(n.el,n.options,Ve),s=10;return e?t.clientX>i.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+s||t.clientX>r.right&&t.clientY>r.top}function Oz(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,h=r?n.bottom:n.right,d=!1;if(!o){if(a&&Qd<c*i){if(!uu&&(cu===1?l>u+c*s/2:l<h-c*s/2)&&(uu=!0),uu)d=!0;else if(cu===1?l<u+Qd:l>h-Qd)return-cu}else if(l>u+c*(1-i)/2&&l<h-c*(1-i)/2)return Nz(e)}return d=d||o,d&&(l<u+c*s/2||l>h-c*s/2)?l>u+c/2?1:-1:0}function Nz(t){return Ir(re)<Ir(t)?1:-1}function Mz(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function Pz(t){tp.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&tp.push(r)}}function Xd(t){return setTimeout(t,0)}function G_(t){return clearTimeout(t)}Om&&st(document,"touchmove",function(t){(Oe.active||$a)&&t.cancelable&&t.preventDefault()});Oe.utils={on:st,off:tt,css:Re,find:aN,is:function(e,n){return!!Fr(e,n,e,!1)},extend:mz,throttle:lN,closest:Fr,toggleClass:ar,clone:uN,index:Ir,nextTick:Xd,cancelNextTick:G_,detectDirection:fN,getChild:Fl};Oe.get=function(t){return t[hr]};Oe.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Oe.utils=Ri(Ri({},Oe.utils),r.utils)),Bh.mount(r)})};Oe.create=function(t,e){return new Oe(t,e)};Oe.version=dz;var Ht=[],Dc,K_,Y_=!1,zg,jg,np,xc;function Dz(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?st(document,"dragover",this._handleAutoScroll):this.options.supportPointer?st(document,"pointermove",this._handleFallbackAutoScroll):r.touches?st(document,"touchmove",this._handleFallbackAutoScroll):st(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?tt(document,"dragover",this._handleAutoScroll):(tt(document,"pointermove",this._handleFallbackAutoScroll),tt(document,"touchmove",this._handleFallbackAutoScroll),tt(document,"mousemove",this._handleFallbackAutoScroll)),dS(),Zd(),gz()},nulling:function(){np=K_=Dc=Y_=xc=zg=jg=null,Ht.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(np=n,r||this.options.forceAutoScrollFallback||Uh||hs||ou){Wg(n,this.options,a,r);var l=Ls(a,!0);Y_&&(!xc||s!==zg||o!==jg)&&(xc&&dS(),xc=setInterval(function(){var c=Ls(document.elementFromPoint(s,o),!0);c!==l&&(l=c,Zd()),Wg(n,i.options,c,r)},10),zg=s,jg=o)}else{if(!this.options.bubbleScroll||Ls(a,!0)===Ei()){Zd();return}Wg(n,this.options,Ls(a,!1),!1)}}},is(t,{pluginName:"scroll",initializeByDefault:!0})}function Zd(){Ht.forEach(function(t){clearInterval(t.pid)}),Ht=[]}function dS(){clearInterval(xc)}var Wg=lN(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Ei(),c=!1,u;K_!==n&&(K_=n,Zd(),Dc=e.scroll,u=e.scrollFn,Dc===!0&&(Dc=Ls(n,!0)));var h=0,d=Dc;do{var f=d,p=Wt(f),m=p.top,g=p.bottom,y=p.left,_=p.right,v=p.width,w=p.height,S=void 0,A=void 0,P=f.scrollWidth,M=f.scrollHeight,k=Re(f),z=f.scrollLeft,Y=f.scrollTop;f===l?(S=v<P&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),A=w<M&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(S=v<P&&(k.overflowX==="auto"||k.overflowX==="scroll"),A=w<M&&(k.overflowY==="auto"||k.overflowY==="scroll"));var j=S&&(Math.abs(_-i)<=o&&z+v<P)-(Math.abs(y-i)<=o&&!!z),U=A&&(Math.abs(g-s)<=o&&Y+w<M)-(Math.abs(m-s)<=o&&!!Y);if(!Ht[h])for(var L=0;L<=h;L++)Ht[L]||(Ht[L]={});(Ht[h].vx!=j||Ht[h].vy!=U||Ht[h].el!==f)&&(Ht[h].el=f,Ht[h].vx=j,Ht[h].vy=U,clearInterval(Ht[h].pid),(j!=0||U!=0)&&(c=!0,Ht[h].pid=setInterval((function(){r&&this.layer===0&&Oe.active._onTouchMove(np);var D=Ht[this.layer].vy?Ht[this.layer].vy*a:0,C=Ht[this.layer].vx?Ht[this.layer].vx*a:0;typeof u=="function"&&u.call(Oe.dragged.parentNode[hr],C,D,t,np,Ht[this.layer].el)!=="continue"||cN(Ht[this.layer].el,C,D)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=Ls(d,!1)));Y_=c}},30),yN=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function Y0(){}Y0.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Fl(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:yN};is(Y0,{pluginName:"revertOnSpill"});function J0(){}J0.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:yN};is(J0,{pluginName:"removeOnSpill"});Oe.mount(new Dz);Oe.mount(J0,Y0);function xz(t,e,n={}){let r;const{document:i=QO,...s}=n,o={onUpdate:u=>{_N(e,u.oldIndex,u.newIndex)}},a=()=>{const u=typeof t=="string"?i==null?void 0:i.querySelector(t):JO(t);!u||r!==void 0||(r=new Oe(u,{...o,...s}))},l=()=>{r==null||r.destroy(),r=void 0},c=(u,h)=>{if(h!==void 0)r==null||r.option(u,h);else return r==null?void 0:r.option(u)};return dH(a),GO(l),{stop:l,start:a,option:c}}function _N(t,e,n){const r=un(t),i=r?[...Wu(t)]:Wu(t);if(n>=0&&n<i.length){const s=i.splice(e,1)[0];Gl(()=>{i.splice(n,0,s),r&&(t.value=i)})}}function Lz(){let t=["Bal","Bar","Dal","Dar","Den","Dok","Jar","Jik","Lar","Rak","Ral","Ril","Sig","Tal","Thor","Ton"],e=["dar","dor","dur","kal","kar","kir","kur","lah","lak","lim","lor","rak","tin","ton","tor","vald"],n=["Rockcrusher","Spinewielder","Skullbearer","Dräpare"];return t[Math.floor(Math.random()*t.length)]+e[Math.floor(Math.random()*e.length)]+" "+n[Math.floor(Math.random()*n.length)]}function J_(t=4){let e=t,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}const Vz={class:"header"},Fz={class:"body"},Uz={class:"controls"},Bz=Ut({__name:"Modal.vapor",setup(t,{expose:e}){const n=ae();return e({showModal:()=>{n.value&&n.value.showModal()},closeModal:()=>{n.value&&n.value.close()}}),(s,o)=>(R(),x("dialog",{ref_key:"dialog",ref:n,class:"danger"},[b("div",Vz,[nn(s.$slots,"header")]),b("div",Fz,[nn(s.$slots,"body")]),b("div",Uz,[nn(s.$slots,"controls")])],512))}});function yn(t){this.content=t}yn.prototype={constructor:yn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new yn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new yn(n)},addToStart:function(t,e){return new yn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new yn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new yn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=yn.from(t),t.size?new yn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=yn.from(t),t.size?new yn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=yn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};yn.from=function(t){if(t instanceof yn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new yn(e)};function vN(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=vN(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function bN(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=bN(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Q{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Q(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Q(r,i)}cutByIndex(e,n){return e==n?Q.empty:e==0&&n==this.content.length?this:new Q(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Q(i,s)}addToStart(e){return new Q([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Q(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return vN(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return bN(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Ed(0,e);if(e==this.size)return Ed(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?Ed(r+1,o):Ed(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Q.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Q(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Q.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Q(n||e,r)}static from(e){if(!e)return Q.empty;if(e instanceof Q)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Q([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Q.empty=new Q([],0);const qg={index:0,offset:0};function Ed(t,e){return qg.index=t,qg.offset=e,qg}function rp(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!rp(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!rp(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let gt=class Q_{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&rp(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Q_.none;if(e instanceof Q_)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};gt.none=[];class ip extends Error{}class de{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=TN(this.content,e+this.openStart,n);return r&&new de(r,this.openStart,this.openEnd)}removeBetween(e,n){return new de(EN(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return de.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new de(Q.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new de(e,r,i)}}de.empty=new de(Q.empty,0,0);function EN(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(EN(s.content,e-i-1,n-i-1)))}function TN(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=TN(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function $z(t,e,n){if(n.openStart>t.depth)throw new ip("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ip("Inconsistent open depths");return wN(t,e,n,0)}function wN(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=wN(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Zo(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Hz(n,t);return Zo(s,IN(t,o,a,e,r))}else return Zo(s,sp(t,e,r))}function SN(t,e){if(!e.type.compatibleContent(t.type))throw new ip("Cannot join "+e.type.name+" onto "+t.type.name)}function X_(t,e,n){let r=t.node(n);return SN(r,e.node(n)),r}function Xo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function hu(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Xo(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Xo(i.child(a),r);e&&e.depth==n&&e.textOffset&&Xo(e.nodeBefore,r)}function Zo(t,e){return t.type.checkContent(e),t.copy(e)}function IN(t,e,n,r,i){let s=t.depth>i&&X_(t,e,i+1),o=r.depth>i&&X_(n,r,i+1),a=[];return hu(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(SN(s,o),Xo(Zo(s,IN(t,e,n,r,i+1)),a)):(s&&Xo(Zo(s,sp(t,e,i+1)),a),hu(e,n,i,a),o&&Xo(Zo(o,sp(n,r,i+1)),a)),hu(r,null,i,a),new Q(a)}function sp(t,e,n){let r=[];if(hu(null,t,n,r),t.depth>n){let i=X_(t,e,n+1);Xo(Zo(i,sp(t,e,n+1)),r)}return hu(e,null,n,r),new Q(r)}function Hz(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Q.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class qu{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return gt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new op(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new qu(n,r,s)}static resolveCached(e,n){for(let i=0;i<Gg.length;i++){let s=Gg[i];if(s.pos==n&&s.doc==e)return s}let r=Gg[Kg]=qu.resolve(e,n);return Kg=(Kg+1)%zz,r}}let Gg=[],Kg=0,zz=12;class op{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const jz=Object.create(null);let ea=class Z_{constructor(e,n,r,i=gt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Q.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&rp(this.attrs,n||e.defaultAttrs||jz)&&gt.sameSet(this.marks,r||gt.none)}copy(e=null){return e==this.content?this:new Z_(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Z_(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return de.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new de(c,i.depth-o,s.depth-o)}replace(e,n,r){return $z(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return qu.resolveCached(this,e)}resolveNoCache(e){return qu.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),AN(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Q.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=gt.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!gt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Q.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};ea.prototype.text=void 0;class ap extends ea{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):AN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ap(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ap(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function AN(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class pa{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Wz(e,n);if(r.next==null)return pa.empty;let i=CN(r);r.next&&r.err("Unexpected trailing text");let s=Xz(Qz(i));return Zz(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return Q.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let d=s(h,a.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}pa.empty=new pa(!0);class Wz{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function CN(t){let e=[];do e.push(qz(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function qz(t){let e=[];do e.push(Gz(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Gz(t){let e=Jz(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Kz(t,e);else break;return e}function fS(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Kz(t,e){let n=fS(t),r=n;return t.eat(",")&&(t.next!="}"?r=fS(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Yz(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Jz(t){if(t.eat("(")){let e=CN(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Yz(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Qz(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function kN(t,e){return e-t}function pS(t,e){let n=[];return r(e),n.sort(kN);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Xz(t){let e=Object.create(null);return n(pS(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);pS(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new pa(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(kN);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function Zz(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function RN(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function ON(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function NN(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new ej(t[n]);return e}let mS=class MN{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=NN(r.attrs),this.defaultAttrs=RN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==pa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ON(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ea(this,this.computeAttrs(e),Q.from(n),gt.setFrom(r))}createChecked(e=null,n,r){return n=Q.from(n),this.checkContent(n),new ea(this,this.computeAttrs(e),n,gt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Q.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Q.empty,!0);return s?new ea(this,e,n.append(s),gt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:gt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new MN(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class ej{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Nm{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=NN(i.attrs),this.excluded=null;let s=RN(this.attrs);this.instance=s?new gt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new gt(this,ON(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Nm(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class tj{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=yn.from(e.nodes),n.marks=yn.from(e.marks||{}),this.nodes=mS.compile(this.spec.nodes,this),this.marks=Nm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=pa.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?gS(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:gS(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof mS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new ap(r,r.defaultAttrs,e,gt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return ea.fromJSON(this,e)}markFromJSON(e){return gt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function gS(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function nj(t){return t.tag!=null}function rj(t){return t.style!=null}class Ul{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{nj(r)?this.tags.push(r):rj(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new _S(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new _S(this,n,!0);return r.addAll(e,n.from,n.to),de.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(oj(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=vS(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=vS(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ul(e,Ul.schemaRules(e)))}}const PN={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ij={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},DN={ol:!0,ul:!0},lp=1,cp=2,du=4;function yS(t,e,n){return e!=null?(e?lp:0)|(e==="full"?cp:0):t&&t.whitespace=="pre"?lp|cp:n&~du}class Td{constructor(e,n,r,i,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=gt.none,this.stashMarks=[],this.match=o||(a&du?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Q.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&lp)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Q.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Q.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):lj(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!PN.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class _S{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=yS(null,n.preserveWhitespace,0)|(r?du:0);i?s=new Td(i.type,i.attrs,gt.none,gt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Td(null,null,gt.none,gt.none,!0,null,o):s=new Td(e.schema.topNodeType,null,gt.none,gt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(aj(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&cp||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&lp)r.options&cp?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;DN.hasOwnProperty(r)&&this.parser.normalizeLists&&sj(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:ij.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(PN.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=gt.none,r=gt.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=yS(e,i,s.options);s.options&du&&s.content.length==0&&(o|=du),this.nodes.push(new Td(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=cj(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function sj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&DN.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function oj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function aj(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function vS(t){let e={};for(let n in t)e[n]=t[n];return e}function lj(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function cj(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class fi{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Yg(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=fi.renderSpec(Yg(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&fi.renderSpec(Yg(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let h=u.indexOf(" ");h>0?a.setAttributeNS(u.slice(0,h),u.slice(h+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let h=n[u];if(h===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:f}=fi.renderSpec(e,h,r);if(a.appendChild(d),f){if(o)throw new RangeError("Multiple content holes");o=f}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new fi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=bS(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return bS(e.marks)}}function bS(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Yg(t){return t.document||window.document}const xN=65535,LN=Math.pow(2,16);function uj(t,e){return t+e*LN}function ES(t){return t&xN}function hj(t){return(t-(t&xN))/LN}const VN=1,FN=2,ef=4,UN=8;class ev{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&UN)>0}get deletedBefore(){return(this.delInfo&(VN|ef))>0}get deletedAfter(){return(this.delInfo&(FN|ef))>0}get deletedAcross(){return(this.delInfo&ef)>0}}class dr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&dr.empty)return dr.empty}recover(e){let n=0,r=ES(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+hj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(e<=h){let d=c?e==l?-1:e==h?1:n:n,f=l+i+(d<0?0:u);if(r)return f;let p=e==(n<0?l:h)?null:uj(a/3,e-l),m=e==l?FN:e==h?VN:ef;return(n<0?e!=l:e!=h)&&(m|=UN),new ev(f,m,p)}i+=u-c}return r?e+i:new ev(e+i,0,null)}touches(e,n){let r=0,i=ES(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new dr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?dr.empty:new dr(e<0?[0,-e,0]:[0,0,e])}}dr.empty=new dr([]);class pl{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new pl(this.maps,this.mirror,e,n)}copy(){return new pl(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new pl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new ev(e,i,null)}}const Jg=Object.create(null);class Un{getMap(){return dr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Jg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Jg)throw new RangeError("Duplicate use of step JSON ID "+e);return Jg[e]=n,n.prototype.jsonID=e,n}}class Gt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Gt(e,null)}static fail(e){return new Gt(null,e)}static fromReplace(e,n,r,i){try{return Gt.ok(e.replace(n,r,i))}catch(s){if(s instanceof ip)return Gt.fail(s.message);throw s}}}function Q0(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Q0(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Q.fromArray(r)}class Vs extends Un{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new de(Q0(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Gt.fromReplace(e,this.from,this.to,s)}invert(){return new pi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Vs(n.pos,r.pos,this.mark)}merge(e){return e instanceof Vs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Vs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Vs(n.from,n.to,e.markFromJSON(n.mark))}}Un.jsonID("addMark",Vs);class pi extends Un{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new de(Q0(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Gt.fromReplace(e,this.from,this.to,r)}invert(){return new Vs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new pi(n.pos,r.pos,this.mark)}merge(e){return e instanceof pi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new pi(n.from,n.to,e.markFromJSON(n.mark))}}Un.jsonID("removeMark",pi);class Fs extends Un{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Gt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Gt.fromReplace(e,this.pos,this.pos+1,new de(Q.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Fs(this.pos,n.marks[i]);return new Fs(this.pos,this.mark)}}return new Bl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Fs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Fs(n.pos,e.markFromJSON(n.mark))}}Un.jsonID("addNodeMark",Fs);class Bl extends Un{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Gt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Gt.fromReplace(e,this.pos,this.pos+1,new de(Q.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Fs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Bl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Bl(n.pos,e.markFromJSON(n.mark))}}Un.jsonID("removeNodeMark",Bl);class on extends Un{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&tv(e,this.from,this.to)?Gt.fail("Structure replace would overwrite content"):Gt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new dr([this.from,this.to-this.from,this.slice.size])}invert(e){return new on(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new on(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof on)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?de.empty:new de(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new on(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?de.empty:new de(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new on(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new on(n.from,n.to,de.fromJSON(e,n.slice),!!n.structure)}}Un.jsonID("replace",on);class ln extends Un{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(tv(e,this.from,this.gapFrom)||tv(e,this.gapTo,this.to)))return Gt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Gt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Gt.fromReplace(e,this.from,this.to,r):Gt.fail("Content does not fit in gap")}getMap(){return new dr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ln(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new ln(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ln(n.from,n.to,n.gapFrom,n.gapTo,de.fromJSON(e,n.slice),n.insert,!!n.structure)}}Un.jsonID("replaceAround",ln);function tv(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function dj(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[m])?o.to=f:i.push(o=new pi(d,f,h[m])));a&&a.to==d?a.to=f:s.push(a=new Vs(d,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function fj(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Nm){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let h=l[u],d;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&h.eq(i[f].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new pi(o.from,o.to,o.style)))}function pj(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new on(o,c,de.empty));else{r=u;for(let h=0;h<l.marks.length;h++)n.allowsMarkType(l.marks[h].type)||t.step(new pi(o,c,l.marks[h]));if(l.isText&&!n.spec.code){let h,d=/\r?\n|\r/g,f;for(;h=d.exec(l.text);)f||(f=new de(Q.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new on(o+h.index,o+h.index+h[0].length,f))}}o=c}if(!r.validEnd){let a=r.fillBefore(Q.empty,!0);t.replace(o,o,new de(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function mj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function cc(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!mj(i,s,o))break}return null}function gj(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=Q.empty,h=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=Q.from(r.node(p).copy(u)),h++):l--;let d=Q.empty,f=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=Q.from(i.node(p).copy(d)),f++):c++;t.step(new ln(l,c,o,a,new de(u.append(d),h,f),u.size-h,!0))}function X0(t,e,n=null,r=t){let i=yj(t,e),s=i&&_j(r,e);return s?i.map(TS).concat({type:e,attrs:n}).concat(s.map(TS)):null}function TS(t){return{type:t,attrs:null}}function yj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function _j(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function vj(t,e,n){let r=Q.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Q.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new ln(i,s,i,s,new de(r,0,0),n.length,!0))}function bj(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&Ej(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return t.step(new ln(c,u,c+1,u-1,new de(Q.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function Ej(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Tj(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ln(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new de(Q.from(o),0,0),1,!0))}function ml(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let h=i.node(c),d=i.index(c);if(h.type.spec.isolating)return!1;let f=h.content.cutByIndex(d,h.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||h;if(!h.canReplace(d+1,h.childCount)||!m.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function wj(t,e,n=1,r){let i=t.doc.resolve(e),s=Q.empty,o=Q.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=Q.from(i.node(a).copy(s));let u=r&&r[c];o=Q.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new on(e,e,new de(s.append(o),n,n),!0))}function mo(t,e){let n=t.resolve(e),r=n.index();return BN(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function BN(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Mm(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&BN(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Sj(t,e,n){let r=new on(e-n,e+n,de.empty,!0);t.step(r)}function Ij(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function $N(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Pm(t,e,n=e,r=de.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return HN(i,s,r)?new on(e,n,r):new Aj(i,s,r).fit()}function HN(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Aj{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Q.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Q.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new de(s,o,a);return e>-1?new ln(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new on(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Qg(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(n==1&&(o?c.matchType(o.type)||(h=c.fillBefore(Q.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:h};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Qg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new de(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Qg(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new de(Lc(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new de(Lc(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:h,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));h=h.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=h.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(h=g,u.push(zN(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Vc(this.placed,n,Q.from(u)),this.frontier[n].match=h,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<f;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?de.empty:new de(Lc(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new de(Lc(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Xg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Xg(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Xg(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Vc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Vc(this.placed,this.depth,Q.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Q.empty,!0);n.childCount&&(this.placed=Vc(this.placed,this.frontier.length,n))}}function Lc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Lc(t.firstChild.content,e-1,n)))}function Vc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Vc(t.lastChild.content,e-1,n)))}function Qg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function zN(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,zN(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Q.empty,!0)))),t.copy(r)}function Xg(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Cj(n,s.content,o)?a:null}function Cj(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function kj(t){return t.spec.defining||t.spec.definingForContent}function Rj(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(HN(i,s,r))return t.step(new on(e,n,r));let o=WN(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let d=i.depth,f=i.pos-1;d>0;d--,f--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:i.before(d)==f&&o.splice(1,0,-d)}let l=o.indexOf(a),c=[],u=r.openStart;for(let d=r.content,f=0;;f++){let p=d.firstChild;if(c.push(p),f==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let f=c[d],p=kj(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=d;else if(p||!f.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let f=(d+u+1)%(r.openStart+1),p=c[f];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let _=i.node(g-1),v=i.index(g-1);if(_.canReplaceWith(v,v,p.type,p.marks))return t.replace(i.before(g),y?s.after(g):n,new de(jN(r.content,0,r.openStart,f),f,r.openEnd))}}let h=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>h));d--){let f=o[d];f<0||(e=i.before(f),n=s.after(f))}}function jN(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(jN(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Q.empty,!0))}return t}function Oj(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Ij(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new de(Q.from(r),0,0))}function Nj(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=WN(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function WN(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class gl extends Un{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Gt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Gt.fromReplace(e,this.pos,this.pos+1,new de(Q.from(i),0,n.isLeaf?0:1))}getMap(){return dr.empty}invert(e){return new gl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new gl(n.pos,n.attr,n.value)}}Un.jsonID("attr",gl);class Gu extends Un{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Gt.ok(r)}getMap(){return dr.empty}invert(e){return new Gu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Gu(n.attr,n.value)}}Un.jsonID("docAttr",Gu);let $l=class extends Error{};$l=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};$l.prototype=Object.create(Error.prototype);$l.prototype.constructor=$l;$l.prototype.name="TransformError";class Mj{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new pl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new $l(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=de.empty){let i=Pm(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new de(Q.from(r),0,0))}delete(e,n){return this.replace(e,n,de.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Rj(this,e,n,r),this}replaceRangeWith(e,n,r){return Oj(this,e,n,r),this}deleteRange(e,n){return Nj(this,e,n),this}lift(e,n){return gj(this,e,n),this}join(e,n=1){return Sj(this,e,n),this}wrap(e,n){return vj(this,e,n),this}setBlockType(e,n=e,r,i=null){return bj(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Tj(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new gl(e,n,r)),this}setDocAttribute(e,n){return this.step(new Gu(e,n)),this}addNodeMark(e,n){return this.step(new Fs(e,n)),this}removeNodeMark(e,n){if(!(n instanceof gt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new Bl(e,n)),this}split(e,n=1,r){return wj(this,e,n,r),this}addMark(e,n,r){return dj(this,e,n,r),this}removeMark(e,n,r){return fj(this,e,n,r),this}clearIncompatible(e,n,r){return pj(this,e,n,r),this}}const Zg=Object.create(null);class je{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Pj(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=de.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?de.empty:n),a==0&&IS(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),IS(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Be(e):Ha(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Ha(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Ha(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Kr(e.node(0))}static atStart(e){return Ha(e,e,0,0,1)||new Kr(e)}static atEnd(e){return Ha(e,e,e.content.size,e.childCount,-1)||new Kr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Zg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Zg)throw new RangeError("Duplicate use of selection JSON ID "+e);return Zg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}je.prototype.visible=!0;class Pj{constructor(e,n){this.$from=e,this.$to=n}}let wS=!1;function SS(t){!wS&&!t.parent.inlineContent&&(wS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends je{constructor(e,n=e){SS(e),SS(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return je.near(r);let i=e.resolve(n.map(this.anchor));return new Be(i.parent.inlineContent?i:r,r)}replace(e,n=de.empty){if(super.replace(e,n),n==de.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Dm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=je.findFrom(n,r,!0)||je.findFrom(n,-r,!0);if(s)n=s.$head;else return je.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(je.findFrom(e,-r,!0)||je.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Be(e,n)}}je.jsonID("text",Be);class Dm{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Dm(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class ke extends je{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?je.near(s):new ke(s)}content(){return new de(Q.from(this.node),0,0)}eq(e){return e instanceof ke&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Z0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ke(e.resolve(n.anchor))}static create(e,n){return new ke(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ke.prototype.visible=!1;je.jsonID("node",ke);class Z0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Dm(r,r):new Z0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ke.isSelectable(r)?new ke(n):je.near(n)}}class Kr extends je{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=de.empty){if(n==de.empty){e.delete(0,e.doc.content.size);let r=je.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Kr(e)}map(e){return new Kr(e)}eq(e){return e instanceof Kr}getBookmark(){return Dj}}je.jsonID("all",Kr);const Dj={map(){return this},resolve(t){return new Kr(t)}};function Ha(t,e,n,r,i,s=!1){if(e.inlineContent)return Be.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&ke.isSelectable(a))return ke.create(t,n-(i<0?a.nodeSize:0))}else{let l=Ha(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function IS(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof on||i instanceof ln))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(je.near(t.doc.resolve(o),n))}const AS=1,wd=2,CS=4;class xj extends Mj{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|AS)&~wd,this.storedMarks=null,this}get selectionSet(){return(this.updated&AS)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wd,this}ensureMarks(e){return gt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wd)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~wd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||gt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(je.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=CS,this}get scrolledIntoView(){return(this.updated&CS)>0}}function kS(t,e){return!e||!t?t:t.bind(e)}class Fc{constructor(e,n,r){this.name=e,this.init=kS(n.init,r),this.apply=kS(n.apply,r)}}const Lj=[new Fc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Fc("selection",{init(t,e){return t.selection||je.atStart(e.doc)},apply(t){return t.selection}}),new Fc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Fc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class ey{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Lj.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Fc(r.key,r.spec.state,r))})}}class Ka{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ka(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new xj(this)}static create(e){let n=new ey(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ka(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new ey(this.schema,e.plugins),r=n.fields,i=new Ka(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new ey(e.schema,e.plugins),s=new Ka(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=ea.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=je.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function qN(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=qN(i,e,{})),n[r]=i}return n}class Er{constructor(e){this.spec=e,this.props={},e.props&&qN(e.props,this,this.props),this.key=e.key?e.key.key:GN("plugin")}getState(e){return e[this.key]}}const ty=Object.create(null);function GN(t){return t in ty?t+"$"+ ++ty[t]:(ty[t]=0,t+"$")}class ds{constructor(e="key"){this.key=GN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const bn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ku=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let nv=null;const Bi=function(t,e,n){let r=nv||(nv=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Vj=function(){nv=null},ma=function(t,e,n,r){return n&&(RS(t,e,n,r,-1)||RS(t,e,n,r,1))},Fj=/^(img|br|input|textarea|hr)$/i;function RS(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ai(t))){let s=t.parentNode;if(!s||s.nodeType!=1||$h(t)||Fj.test(t.nodeName)||t.contentEditable=="false")return!1;e=bn(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?ai(t):0}else return!1}}function ai(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Uj(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ai(t)}else if(t.parentNode&&!$h(t))e=bn(t),t=t.parentNode;else return null}}function Bj(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!$h(t))e=bn(t)+1,t=t.parentNode;else return null}}function $j(t,e,n){for(let r=e==0,i=e==ai(t);r||i;){if(t==n)return!0;let s=bn(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==ai(t)}}function $h(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const xm=function(t){return t.focusNode&&ma(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function No(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Hj(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function zj(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const Oi=typeof navigator<"u"?navigator:null,OS=typeof document<"u"?document:null,go=Oi&&Oi.userAgent||"",rv=/Edge\/(\d+)/.exec(go),KN=/MSIE \d/.exec(go),iv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(go),nr=!!(KN||iv||rv),qs=KN?document.documentMode:iv?+iv[1]:rv?+rv[1]:0,ei=!nr&&/gecko\/(\d+)/i.test(go);ei&&+(/Firefox\/(\d+)/.exec(go)||[0,0])[1];const sv=!nr&&/Chrome\/(\d+)/.exec(go),zn=!!sv,jj=sv?+sv[1]:0,qn=!nr&&!!Oi&&/Apple Computer/.test(Oi.vendor),Hl=qn&&(/Mobile\/\w+/.test(go)||!!Oi&&Oi.maxTouchPoints>2),Cr=Hl||(Oi?/Mac/.test(Oi.platform):!1),Wj=Oi?/Win/.test(Oi.platform):!1,Br=/Android \d/.test(go),Hh=!!OS&&"webkitFontSmoothing"in OS.documentElement.style,qj=Hh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Gj(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Fi(t,e){return typeof t=="number"?t:t[e]}function Kj(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function NS(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=Ku(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?Gj(s):Kj(a),u=0,h=0;if(e.top<c.top+Fi(r,"top")?h=-(c.top-e.top+Fi(i,"top")):e.bottom>c.bottom-Fi(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Fi(i,"top")-c.top:e.bottom-c.bottom+Fi(i,"bottom")),e.left<c.left+Fi(r,"left")?u=-(c.left-e.left+Fi(i,"left")):e.right>c.right-Fi(r,"right")&&(u=e.right-c.right+Fi(i,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let d=a.scrollLeft,f=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let p=a.scrollLeft-d,m=a.scrollTop-f;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function Yj(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:YN(t.dom)}}function YN(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ku(r));return e}function Jj({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;JN(n,r==0?0:r-e)}function JN(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let xa=null;function Qj(t){if(t.setActive)return t.setActive();if(xa)return t.focus(xa);let e=YN(t);t.focus(xa==null?{get preventScroll(){return xa={preventScroll:!0},!0}}:void 0),xa||(xa=!1,JN(e,0))}function QN(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Bi(u).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?Xj(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:QN(n,i)}function Xj(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Es(r,1);if(s.top!=s.bottom&&eb(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function eb(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Zj(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function eW(t,e,n){let{node:r,offset:i}=QN(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function tW(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function XN(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(eb(e,c))return XN(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function nW(t,e){let n=t.dom.ownerDocument,r,i=0,s=zj(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!eb(e,c)||(o=XN(t.dom,e,c),!o))return null}if(qn)for(let c=o;r&&c;c=Ku(c))c.draggable&&(r=void 0);if(o=Zj(o,e),r){if(ei&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;Hh&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=tW(t,r,i,e))}a==null&&(a=eW(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function MS(t){return t.top<t.bottom||t.left<t.right}function Es(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(MS(r))return r}return Array.prototype.find.call(n,MS)||t.getBoundingClientRect()}const rW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ZN(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Hh||ei;if(r.nodeType==3)if(o&&(rW.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Es(Bi(r,i,i),n);if(ei&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Es(Bi(r,i-1,i-1),-1);if(c.top==l.top){let u=Es(Bi(r,i,i+1),-1);if(u.top!=l.top)return wc(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,wc(Es(Bi(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ai(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return ny(l.getBoundingClientRect(),!1)}if(s==null&&i<ai(r)){let l=r.childNodes[i];if(l.nodeType==1)return ny(l.getBoundingClientRect(),!0)}return ny(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ai(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Bi(l,ai(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return wc(Es(c,1),!1)}if(s==null&&i<ai(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Bi(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return wc(Es(c,-1),!0)}return wc(Es(r.nodeType==3?Bi(r):r,-n),n>=0)}function wc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ny(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function eM(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function iW(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return eM(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=ZN(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Bi(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const sW=/[\u0590-\u08ac]/;function oW(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return!sW.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:eM(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),g})}let PS=null,DS=null,xS=!1;function aW(t,e,n){return PS==e&&DS==n?xS:(PS=e,DS=n,xS=n=="up"||n=="down"?iW(t,e,n):oW(t,e,n))}const Pr=0,LS=1,Bo=2,Ni=3;class zh{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Pr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>bn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof nM){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof tM&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?bn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?bn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let h=a;h>0;h--){let d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=bn(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=bn(h.dom);break}n+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let d=0,f=0;d<this.children.length;d++){let p=this.children[d],m=f+p.size;if(s>f&&o<m)return p.setSelection(e-f-p.border,n-f-p.border,r,i);f=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((ei||qn)&&e==n){let{node:d,offset:f}=a;if(d.nodeType==3){if(u=!!(f&&d.nodeValue[f-1]==`
`),u&&f==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:bn(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=d.childNodes[f-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(ei&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&qn)&&ma(a.node,a.offset,c.anchorNode,c.anchorOffset)&&ma(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let f=a;a=l,l=f}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Bo:LS,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ni:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Bo:Ni}r=o}this.dirty=Bo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Bo:LS;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class tM extends zh{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Pr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class lW extends zh{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ga extends zh{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=fi.renderSpec(document,n.type.spec.toDOM(n,r))),new ga(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Ni||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ni&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Pr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Pr}}slice(e,n,r){let i=ga.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=lv(s,n,o,r)),e>0&&(s=lv(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class Gs extends zh{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,h=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=fi.renderSpec(document,n.type.spec.toDOM(n)));!h&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=sM(u,r,n),c?l=new cW(e,n,r,i,u,h||null,d,c,s,o+1):n.isText?new Lm(e,n,r,i,u,d,s):new Gs(e,n,r,i,u,h||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Q.empty)}return e}matchesNode(e,n,r){return this.dirty==Pr&&e.eq(this.node)&&av(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new hW(this,o&&o.node,e);pW(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?gt.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,h,d)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,h,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,f,e)||l.updateNextNode(c,u,h,e,d,i)||l.addNode(c,u,h,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Bo)&&(o&&this.protectLocalComposition(e,o),rM(this.contentDOM,this.children,e),Hl&&mW(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Be)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=gW(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new lW(this,s,n,i);e.input.compositionNodes.push(o),this.children=lv(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Ni||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Pr}updateOuterDeco(e){if(av(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=iM(this.dom,this.nodeDOM,ov(this.outerDeco,this.node,n),ov(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function VS(t,e,n,r,i){sM(r,e,t);let s=new Gs(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Lm extends Gs{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ni||this.dirty!=Pr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Pr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Pr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Lm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ni)}get domAtom(){return!1}isText(e){return this.node.text==e}}class nM extends zh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Pr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cW extends Gs{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==Ni)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function rM(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=FS(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof ga){let l=r?r.previousSibling:t.lastChild;rM(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=FS(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const fu=function(t){t&&(this.nodeName=t)};fu.prototype=Object.create(null);const $o=[new fu];function ov(t,e,n){if(t.length==0)return $o;let r=n?$o[0]:new fu,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new fu(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new fu(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function iM(t,e,n,r){if(n==$o&&r==$o)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=$o[0]),i=l}uW(i,a||$o[0],o)}return i}function uW(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function sM(t,e,n){return iM(t,t,$o,ov(e,n,t.nodeType!=1))}function av(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function FS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class hW{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=dW(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Pr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ga.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Ni&&o.dom==o.contentDOM&&(o.dirty=Bo),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Gs){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,h,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Ni&&av(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(l,e,n,r,i,o)))return this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Bo,h.updateChildren(i,o+1),h.dirty=Pr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=Gs.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Gs.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new tM(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ga;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Lm)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((qn||zn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new nM(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function dW(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ga)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function fW(t,e){return t.type.side-e.type.side}function pW(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(u?(h||(h=[u])).push(g):u=g)}if(u)if(h){h.sort(fW);for(let g=0;g<h.length;g++)n(h[g],c,!!l)}else n(u,c,!!l);let d,f;if(l)f=-1,d=l,l=null;else if(c<t.childCount)f=c,d=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=d.cut(g-s),d=d.cut(0,g-s),p=g,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();r(d,m,e.forChild(s,d),f),s=p}}function mW(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function gW(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function lv(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function tb(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(xm(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&ke.isSelectable(u)&&i.parent&&!(u.isInline&&$j(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new ke(o==h?a:r.resolve(h))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=nb(t,l,a,u)}return c}function oM(t){return t.editable?t.hasFocus():lM(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function es(t,e=!1){let n=t.state.selection;if(aM(t,n),!!oM(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&zn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ma(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)_W(t);else{let{anchor:r,head:i}=n,s,o;US&&!(n instanceof Be)&&(n.$from.parent.inlineContent||(s=BS(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=BS(t,n.to))),t.docView.setSelection(r,i,t.root,e),US&&(s&&$S(s),o&&$S(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yW(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const US=qn||zn&&jj<63;function BS(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(qn&&i&&i.contentEditable=="false")return ry(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ry(i);if(s)return ry(s)}}function ry(t){return t.contentEditable="true",qn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function $S(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function yW(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!oM(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function _W(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,bn(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&nr&&qs<=11&&(r.disabled=!0,r.disabled=!1)}function aM(t,e){if(e instanceof ke){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(HS(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else HS(t)}function HS(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function nb(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Be.between(e,n,r)}function zS(t){return t.editable&&!t.hasFocus()?!1:lM(t)}function lM(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vW(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ma(e.node,e.offset,n.anchorNode,n.anchorOffset)}function cv(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&je.findFrom(s,e)}function ks(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function jS(t,e,n){let r=t.state.selection;if(r instanceof Be)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ks(t,new Be(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=cv(t.state,e);return i&&i instanceof ke?ks(t,i):!1}else if(!(Cr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?ke.isSelectable(s)?ks(t,new ke(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Hh?ks(t,new Be(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ke&&r.node.isInline)return ks(t,new Be(e>0?r.$to:r.$from));{let i=cv(t.state,e);return i?ks(t,i):!1}}}function up(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function pu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function La(t,e){return e<0?bW(t):EW(t)}function bW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(ei&&n.nodeType==1&&r<up(n)&&pu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(pu(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(cM(n))break;{let a=n.previousSibling;for(;a&&pu(a,-1);)i=n.parentNode,s=bn(a),a=a.previousSibling;if(a)n=a,r=up(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?uv(t,n,r):i&&uv(t,i,s)}function EW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=up(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(pu(a,1))s=n,o=++r;else break}else{if(cM(n))break;{let a=n.nextSibling;for(;a&&pu(a,1);)s=a.parentNode,o=bn(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=up(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&uv(t,s,o)}function cM(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function TW(t,e){for(;t&&e==t.childNodes.length&&!$h(t);)e=bn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function wW(t,e){for(;t&&!e&&!$h(t);)e=bn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function uv(t,e,n){if(e.nodeType!=3){let s,o;(o=TW(e,n))?(e=o,n=0):(s=wW(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(xm(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&es(t)},50)}function WS(t,e){let n=t.state.doc.resolve(e);if(!(zn||Wj)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function qS(t,e,n){let r=t.state.selection;if(r instanceof Be&&!r.empty||n.indexOf("s")>-1||Cr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=cv(t.state,e);if(o&&o instanceof ke)return ks(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Kr?je.near(o,e):je.findFrom(o,e);return a?ks(t,a):!1}return!1}function GS(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function KS(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function SW(t){if(!qn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;KS(t,r,"true"),setTimeout(()=>KS(t,r,"false"),20)}return!1}function IW(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function AW(t,e){let n=e.keyCode,r=IW(e);if(n==8||Cr&&n==72&&r=="c")return GS(t,-1)||La(t,-1);if(n==46&&!e.shiftKey||Cr&&n==68&&r=="c")return GS(t,1)||La(t,1);if(n==13||n==27)return!0;if(n==37||Cr&&n==66&&r=="c"){let i=n==37?WS(t,t.state.selection.from)=="ltr"?-1:1:-1;return jS(t,i,r)||La(t,i)}else if(n==39||Cr&&n==70&&r=="c"){let i=n==39?WS(t,t.state.selection.from)=="ltr"?1:-1:1;return jS(t,i,r)||La(t,i)}else{if(n==38||Cr&&n==80&&r=="c")return qS(t,-1,r)||La(t,-1);if(n==40||Cr&&n==78&&r=="c")return SW(t)||qS(t,1,r)||La(t,1);if(r==(Cr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function uM(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||fi.fromSchema(t.state.schema),a=gM(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=mM[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d}}function hM(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new de(Q.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):de.empty;let h=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(h)a=h;else{let d=i.marks(),{schema:f}=t.state,p=fi.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(f.text(m,d)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=RW(n),Hh&&OW(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ul.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!CW.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=NW(YS(a,+u[1],+u[2]),u[4]);else if(a=de.maxOpen(kW(a.content,i),!0),a.openStart||a.openEnd){let h=0,d=0;for(let f=a.content.firstChild;h<a.openStart&&!f.type.spec.isolating;h++,f=f.firstChild);for(let f=a.content.lastChild;d<a.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);a=YS(a,h,d)}return t.someProp("transformPasted",h=>{a=h(a,t)}),a}const CW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function kW(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&fM(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=pM(o[o.length-1],s.length));let u=dM(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return Q.from(o)}return t}function dM(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Q.from(t));return t}function fM(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=fM(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Q.from(dM(n,t,i+1))))}}function pM(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,pM(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Q.empty,!0);return t.copy(n.append(r))}function hv(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=hv(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Q.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function YS(t,e,n){return e<t.openStart&&(t=new de(hv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new de(hv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const mM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let JS=null;function gM(){return JS||(JS=document.implementation.createHTMLDocument("title"))}function RW(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=gM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&mM[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function OW(t){let e=t.querySelectorAll(zn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function NW(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Q.from(l.create(r[a+1],i)),s++,o++}return new de(i,s,o)}const Gn={},Kn={},MW={touchstart:!0,touchmove:!0};class PW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function DW(t){for(let e in Gn){let n=Gn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{LW(t,r)&&!rb(t,r)&&(t.editable||!(r.type in Kn))&&n(t,r)},MW[e]?{passive:!0}:void 0)}qn&&t.dom.addEventListener("input",()=>null),dv(t)}function Us(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function xW(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function dv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>rb(t,r))})}function rb(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function LW(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function VW(t,e){!rb(t,e)&&Gn[e.type]&&(t.editable||!(e.type in Kn))&&Gn[e.type](t,e)}Kn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!_M(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Br&&zn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Hl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,No(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||AW(t,n)?n.preventDefault():Us(t,"key")};Kn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Kn.keypress=(t,e)=>{let n=e;if(_M(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Cr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Be)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Vm(t){return{left:t.clientX,top:t.clientY}}function FW(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function ib(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function yl(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function UW(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ke.isSelectable(r)?(yl(t,new ke(n),"pointer"),!0):!1}function BW(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof ke&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(ke.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(yl(t,ke.create(t.state.doc,i),"pointer"),!0):!1}function $W(t,e,n,r,i){return ib(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?BW(t,n):UW(t,n))}function HW(t,e,n,r){return ib(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function zW(t,e,n,r){return ib(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||jW(t,n,r)}function jW(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(yl(t,Be.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)yl(t,Be.create(r,a+1,a+1+o.content.size),"pointer");else if(ke.isSelectable(o))yl(t,ke.create(r,a),"pointer");else continue;return!0}}function sb(t){return hp(t)}const yM=Cr?"metaKey":"ctrlKey";Gn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=sb(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&FW(n,t.input.lastClick)&&!n[yM]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(Vm(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new WW(t,o,n,!!r)):(s=="doubleClick"?HW:zW)(t,o.pos,o.inside,n)?n.preventDefault():Us(t,"pointer"))};class WW{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[yM],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof ke&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ei&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Us(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>es(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Vm(e))),this.updateAllowDefault(e),this.allowDefault||!n?Us(this.view,"pointer"):$W(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||qn&&this.mightDrag&&!this.mightDrag.node.isAtom||zn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(yl(this.view,je.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Us(this.view,"pointer")}move(e){this.updateAllowDefault(e),Us(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Gn.touchstart=t=>{t.input.lastTouch=Date.now(),sb(t),Us(t,"pointer")};Gn.touchmove=t=>{t.input.lastTouch=Date.now(),Us(t,"pointer")};Gn.contextmenu=t=>sb(t);function _M(t,e){return t.composing?!0:qn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const qW=Br?5e3:-1;Kn.compositionstart=Kn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),hp(t,!0),t.markCursor=null;else if(hp(t),ei&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}vM(t,qW)};Kn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,vM(t,20))};function vM(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>hp(t),e))}function bM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=KW());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function GW(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Uj(e.focusNode,e.focusOffset),r=Bj(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n}function KW(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function hp(t,e=!1){if(!(Br&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),bM(t),e||t.docView&&t.docView.dirty){let n=tb(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function YW(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Yu=nr&&qs<15||Hl&&qj<604;Gn.copy=Kn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Yu?null:n.clipboardData,o=r.content(),{dom:a,text:l}=uM(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):YW(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function JW(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function QW(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ju(t,r.value,null,i,e):Ju(t,r.textContent,r.innerHTML,i,e)},50)}function Ju(t,e,n,r,i){let s=hM(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||de.empty)))return!0;if(!s)return!1;let o=JW(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function EM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Kn.paste=(t,e)=>{let n=e;if(t.composing&&!Br)return;let r=Yu?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ju(t,EM(r),r.getData("text/html"),i,n)?n.preventDefault():QW(t,n)};class TM{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const wM=Cr?"altKey":"ctrlKey";Gn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Vm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof ke?i.to-1:i.to))){if(r&&r.mightDrag)o=ke.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(o=ke.create(t.state.doc,u.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c}=uM(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(Yu?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Yu||n.dataTransfer.setData("text/plain",c),t.dragging=new TM(a,!n[wM],o)};Gn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Kn.dragover=Kn.dragenter=(t,e)=>e.preventDefault();Kn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Vm(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=hM(t,EM(n.dataTransfer),Yu?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[wM]);if(t.someProp("handleDrop",p=>p(t,n,o||de.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?$N(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let f=c.doc.resolve(u);if(h&&ke.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new ke(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,_)=>p=_),c.setSelection(nb(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Gn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&es(t)},20))};Gn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Gn.beforeinput=(t,e)=>{if(zn&&Br&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,No(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Kn)Gn[t]=Kn[t];function Qu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class dp{constructor(e,n){this.toDOM=e,this.spec=n||ta,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new pr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof dp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Qu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ks{constructor(e,n){this.attrs=e,this.spec=n||ta}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new pr(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ks&&Qu(this.attrs,e.attrs)&&Qu(this.spec,e.spec)}static is(e){return e.type instanceof Ks}destroy(){}}class ob{constructor(e,n){this.attrs=e,this.spec=n||ta}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new pr(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof ob&&Qu(this.attrs,e.attrs)&&Qu(this.spec,e.spec)}destroy(){}}class pr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new pr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new pr(e,e,new dp(n,r))}static inline(e,n,r,i){return new pr(e,n,new Ks(r,i))}static node(e,n,r,i){return new pr(e,n,new ob(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ks}get widget(){return this.type instanceof dp}}const za=[],ta={};class qt{constructor(e,n){this.local=e.length?e:za,this.children=n.length?n:za}static create(e,n){return n.length?fp(n,e,0,ta):Rn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Rn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ta)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?XW(this.children,o||[],e,n,r,i,s):o?new qt(o.sort(na),za):Rn}add(e,n){return n.length?this==Rn?qt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=IM(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,fp(u,a,c+1,ta)),s+=3}});let o=SM(s?AM(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new qt(o.length?this.local.concat(o).sort(na):this.local,i||this.children)}remove(e){return e.length==0||this==Rn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Rn?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new qt(i,r):Rn}forChild(e,n){if(this==Rn)return this;if(n.isLeaf)return qt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ks){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new qt(i.sort(na),za);return r?new Ds([a,r]):a}return r||Rn}eq(e){if(this==e)return!0;if(!(e instanceof qt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ab(this.localsInner(e))}localsInner(e){if(this==Rn)return za;if(e.inlineContent||!this.local.some(Ks.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ks||n.push(this.local[r]);return n}}qt.empty=new qt([],[]);qt.removeOverlap=ab;const Rn=qt.empty;class Ds{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ta));return Ds.from(r)}forChild(e,n){if(n.isLeaf)return qt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Rn&&(s instanceof Ds?r=r.concat(s.members):r.push(s))}return Ds.from(r)}eq(e){if(!(e instanceof Ds)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?ab(r?n:n.sort(na)):za}static from(e){switch(e.length){case 0:return Rn;case 1:return e[0];default:return new Ds(e.every(n=>n instanceof qt)?e:e.reduce((n,r)=>n.concat(r instanceof qt?r:r.members),[]))}}}function XW(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let h=0;n.maps[c].forEach((d,f,p,m)=>{let g=m-p-(f-d);for(let y=0;y<a.length;y+=3){let _=a[y+1];if(_<0||d>_+u-h)continue;let v=a[y]+u-h;f>=v?a[y+1]=d<=v?-2:-1:d>=u&&g&&(a[y]+=g,a[y+1]+=g)}h+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),h=u-i;if(h<0||h>=r.content.size){l=!0;continue}let d=n.map(t[c+1]+s,-1),f=d-i,{index:p,offset:m}=r.content.findIndex(h),g=r.maybeChild(p);if(g&&m==h&&m+g.nodeSize==f){let y=a[c+2].mapInner(n,g,u+1,t[c]+s+1,o);y!=Rn?(a[c]=h,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=ZW(a,t,e,n,i,s,o),u=fp(c,r,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,d=0;h<u.children.length;h+=3){let f=u.children[h];for(;d<a.length&&a[d]<f;)d+=3;a.splice(d,0,u.children[h],u.children[h+1],u.children[h+2])}}return new qt(e.sort(na),a)}function SM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new pr(i.from+e,i.to+e,i.type))}return n}function ZW(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(r,i,c);h?n.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function IM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function AM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function fp(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=IM(t,a,l+n);if(c){s=!0;let u=fp(c,a,n+l+1,r);u!=Rn&&i.push(l,l+a.nodeSize,u)}});let o=SM(s?AM(t):t,-n).sort(na);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new qt(o,i):Rn}function na(t,e){return t.from-e.from||t.to-e.to}function ab(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),QS(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),QS(e,i,r.copy(s.from,r.to)));break}}}return e}function QS(t,e,n){for(;e<t.length&&na(n,t[e])>0;)e++;t.splice(e,0,n)}function iy(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Rn&&e.push(r)}),t.cursorWrapper&&e.push(qt.create(t.state.doc,[t.cursorWrapper.deco])),Ds.from(e)}const eq={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},tq=nr&&qs<=11;class nq{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class rq{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new nq,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);nr&&qs<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),tq&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,eq)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(zS(this.view)){if(this.suppressingSelectionUpdates)return es(this.view);if(nr&&qs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ma(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Ku(s))n.add(s);for(let s=e.anchorNode;s;s=Ku(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&zS(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let h=this.registerMutation(n[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(ei&&l.length>1){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let h=u[0],d=u[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&xm(r)&&(c=tb(e))&&c.eq(je.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,es(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),iq(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||es(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(nr&&qs<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:d}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?bn(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?bn(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let XS=new WeakMap,ZS=!1;function iq(t){if(!XS.has(t)&&(XS.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ei,ZS)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ZS=!0}}function eI(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return ma(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function sq(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return eI(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?eI(t,n):null}function oq(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],xm(l)||c.push({node:l.focusNode,offset:l.focusOffset})),zn&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],_=y.pmViewDesc;if(y.nodeName=="BR"&&!_){s=g;break}if(!_||_.size)break}let h=t.state.doc,d=t.someProp("domParser")||Ul.fromSchema(t.state.schema),f=h.resolve(o),p=null,m=d.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:aq,context:f});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function aq(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(qn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||qn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const lq=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function cq(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let k=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,z=tb(t,k);if(z&&!t.state.selection.eq(z)){if(zn&&Br&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,No(13,"Enter"))))return;let Y=t.state.tr.setSelection(z);k=="pointer"?Y.setMeta("pointer",!0):k=="key"&&Y.scrollIntoView(),s&&Y.setMeta("composition",s),t.dispatch(Y)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=oq(t,e,n),u=t.state.doc,h=u.slice(c.from,c.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=dq(h.content,c.doc.content,c.from,d,f);if((Hl&&t.input.lastIOSEnter>Date.now()-225||Br)&&i.some(k=>k.nodeType==1&&!lq.test(k.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",k=>k(t,No(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Be&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let k=tI(t,t.state.doc,c.sel);if(k&&!k.eq(t.state.selection)){let z=t.state.tr.setSelection(k);s&&z.setMeta("composition",s),t.dispatch(z)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Be&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),nr&&qs<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),_=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,v;if((Hl&&t.input.lastIOSEnter>Date.now()-225&&(!_||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!_&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(v=je.findFrom(c.doc.resolve(m.pos+1),1,!0))&&v.head==g.pos)&&t.someProp("handleKeyDown",k=>k(t,No(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&hq(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",k=>k(t,No(8,"Backspace")))){Br&&zn&&t.domObserver.suppressSelectionUpdates();return}zn&&Br&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),Br&&!_&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(k){return k(t,No(13,"Enter"))})},20));let w=p.start,S=p.endA,A,P,M;if(_){if(m.pos==g.pos)nr&&qs<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>es(t),20)),A=t.state.tr.delete(w,S),P=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(M=uq(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))A=t.state.tr,M.type=="add"?A.addMark(w,S,M.mark):A.removeMark(w,S,M.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let k=m.parent.textBetween(m.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",z=>z(t,w,S,k)))return;A=t.state.tr.insertText(k,w,S)}}if(A||(A=t.state.tr.replace(w,S,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let k=tI(t,A.doc,c.sel);k&&!(zn&&Br&&t.composing&&k.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(k.head==w||k.head==A.mapping.map(S)-1)||nr&&k.empty&&k.head==w)&&A.setSelection(k)}P&&A.ensureMarks(P),s&&A.setMeta("composition",s),t.dispatch(A.scrollIntoView())}function tI(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:nb(t,e.resolve(n.anchor),e.resolve(n.head))}function uq(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Q.from(c).eq(t))return{mark:a,type:o}}function hq(t,e,n,r,i){if(n-e<=i.pos-r.pos||sy(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(sy(s,!0,!0));return!o.parent.isTextblock||o.pos>n||sy(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function sy(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function dq(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&nI(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&nI(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function nI(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class fq{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new PW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(aI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=sI(this),iI(this),this.nodeViews=oI(this),this.docView=VS(this.state.doc,rI(this),iy(this),this.dom,this),this.domObserver=new rq(this,(r,i,s,o)=>cq(this,r,i,s,o)),this.domObserver.start(),DW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&dv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(aI),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(bM(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=oI(this);mq(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&dv(this),this.editable=sI(this),iI(this);let l=iy(this),c=rI(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Yj(this);if(o){this.domObserver.stop();let f=h&&(nr||zn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&pq(i.selection,e.selection);if(h){let p=zn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=GW(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=VS(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vW(this))?es(this,f):(aM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&Jj(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ke){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&NS(this,n.getBoundingClientRect(),e)}else NS(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new TM(e.slice,e.move,i<0?void 0:ke.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(nr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Qj(this.dom),es(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return nW(this,e)}coordsAtPos(e,n=1){return ZN(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return aW(this,n||this.state,e)}pasteHTML(e,n){return Ju(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ju(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(xW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],iy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Vj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return VW(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return qn&&this.root.nodeType===11&&Hj(this.dom.ownerDocument)==this.dom&&sq(this,e)||e}domSelection(){return this.root.getSelection()}}function rI(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[pr.node(0,t.state.doc.content.size,e)]}function iI(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:pr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function sI(t){return!t.someProp("editable",e=>e(t.state)===!1)}function pq(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function oI(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function mq(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function aI(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var io={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},pp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gq=typeof navigator<"u"&&/Mac/.test(navigator.platform),yq=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var En=0;En<10;En++)io[48+En]=io[96+En]=String(En);for(var En=1;En<=24;En++)io[En+111]="F"+En;for(var En=65;En<=90;En++)io[En]=String.fromCharCode(En+32),pp[En]=String.fromCharCode(En);for(var oy in io)pp.hasOwnProperty(oy)||(pp[oy]=io[oy]);function _q(t){var e=gq&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||yq&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?pp:io)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const vq=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function bq(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))vq?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function Eq(t){let e=Object.create(null);for(let n in t)e[bq(n)]=t[n];return e}function ay(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Tq(t){return new Er({props:{handleKeyDown:CM(t)}})}function CM(t){let e=Eq(t);return function(n,r){let i=_q(r),s,o=e[ay(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[ay(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=io[r.keyCode])&&s!=i){let a=e[ay(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const wq=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function kM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Sq=(t,e,n)=>{let r=kM(t,n);if(!r)return!1;let i=lb(r);if(!i){let o=r.blockRange(),a=o&&cc(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&MM(t,i,e))return!0;if(r.parent.content.size==0&&(zl(s,"end")||ke.isSelectable(s))){let o=Pm(t.doc,r.before(),r.after(),de.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(zl(s,"end")?je.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):ke.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Iq=(t,e,n)=>{let r=kM(t,n);if(!r)return!1;let i=lb(r);return i?RM(t,i,e):!1},Aq=(t,e,n)=>{let r=OM(t,n);if(!r)return!1;let i=cb(r);return i?RM(t,i,e):!1};function RM(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Pm(t.doc,s,l,de.empty);if(!c||c.from!=s||c instanceof on&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Be.create(u.doc,s)),n(u.scrollIntoView())}return!0}function zl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Cq=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=lb(r)}let o=s&&s.nodeBefore;return!o||!ke.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ke.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function lb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function OM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const kq=(t,e,n)=>{let r=OM(t,n);if(!r)return!1;let i=cb(r);if(!i)return!1;let s=i.nodeAfter;if(MM(t,i,e))return!0;if(r.parent.content.size==0&&(zl(s,"start")||ke.isSelectable(s))){let o=Pm(t.doc,r.before(),r.after(),de.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(zl(s,"start")?je.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):ke.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Rq=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=cb(r)}let o=s&&s.nodeAfter;return!o||!ke.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ke.create(t.doc,s.pos)).scrollIntoView()),!0)};function cb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Oq=(t,e)=>{let n=t.selection,r=n instanceof ke,i;if(r){if(n.node.isTextblock||!mo(t.doc,n.from))return!1;i=n.from}else if(i=Mm(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(ke.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Nq=(t,e)=>{let n=t.selection,r;if(n instanceof ke){if(n.node.isTextblock||!mo(t.doc,n.to))return!1;r=n.to}else if(r=Mm(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Mq=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&cc(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},Pq=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function NM(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Dq=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=NM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(je.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},xq=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Kr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=NM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Be.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Lq=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(ml(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&cc(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},Vq=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(ke.create(t.doc,i))),!0)};function Fq(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||mo(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function MM(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(Fq(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,d=Q.empty;for(let m=s.length-1;m>=0;m--)d=Q.from(s[m].create(null,d));d=Q.from(r.copy(d));let f=t.tr.step(new ln(e.pos-1,h,e.pos,h,new de(d,1,0),s.length,!0)),p=h+2*s.length;mo(f.doc,p)&&f.join(p),n(f.scrollIntoView())}return!0}let l=je.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&cc(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&zl(i,"start",!0)&&zl(r,"end")){let h=r,d=[];for(;d.push(h),!h.isTextblock;)h=h.lastChild;let f=i,p=1;for(;!f.isTextblock;f=f.firstChild)p++;if(h.canReplace(h.childCount,h.childCount,f.content)){if(n){let m=Q.empty;for(let y=d.length-1;y>=0;y--)m=Q.from(d[y].copy(m));let g=t.tr.step(new ln(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new de(m,d.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function PM(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Be.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Uq=PM(-1),Bq=PM(1);function $q(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&X0(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function lI(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Hq(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);l=new op(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new op(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=X0(l,t,e,o);return c?(r&&r(zq(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function zq(t,e,n,r,i){let s=Q.empty;for(let u=n.length-1;u>=0;u--)s=Q.from(n[u].type.create(n[u].attrs,s));t.step(new ln(e.start-(r?2:0),e.end,e.start,e.end,new de(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,h=e.endIndex,d=!0;u<h;u++,d=!1)!d&&ml(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function jq(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?Wq(e,n,t,s):qq(e,n,s):!0:!1}}function Wq(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new ln(s-1,o,s,o,new de(Q.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new op(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=cc(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return mo(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function qq(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Q.empty:Q.from(i))))return!1;let h=s.pos,d=h+o.nodeSize;return r.step(new ln(h-(a?1:0),d+(l?1:0),h+1,d-1,new de((a?Q.empty:Q.from(i.copy(Q.empty))).append(l?Q.empty:Q.from(i.copy(Q.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Gq(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=Q.from(c?t.create():null),h=new de(Q.from(t.create(null,Q.from(a.type.create(null,u)))),c?3:1,0),d=s.start,f=s.end;n(e.tr.step(new ln(d-(c?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}function Fm(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class Um{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const h=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),h={...Object.fromEntries(Object.entries(r).map(([d,f])=>[d,(...m)=>{const g=this.buildProps(c,n),y=f(...m)(g);return a.push(y),h}])),run:u};return h}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Fm({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class Kq{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function _e(t,e,n){return t.config[e]===void 0&&t.parent?_e(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?_e(t.parent,e,n):null}):t.config[e]}function Bm(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function DM(t){const e=[],{nodeExtensions:n,markExtensions:r}=Bm(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=_e(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([d,f])=>{e.push({type:h,name:d,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=_e(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const d={...s,...h};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function fn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Zt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function fv(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Zt(n,r),{})}function xM(t){return typeof t=="function"}function ze(t,e=void 0,...n){return xM(t)?e?t.bind(e)(...n):t(...n):t}function Yq(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Jq(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function cI(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):Jq(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function uI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Yq(n)?!1:n!=null))}function Qq(t,e){var n;const r=DM(t),{nodeExtensions:i,markExtensions:s}=Bm(t),o=(n=i.find(c=>_e(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((y,_)=>{const v=_e(_,"extendNodeSchema",h);return{...y,...v?v(c):{}}},{}),f=uI({...d,content:ze(_e(c,"content",h)),marks:ze(_e(c,"marks",h)),group:ze(_e(c,"group",h)),inline:ze(_e(c,"inline",h)),atom:ze(_e(c,"atom",h)),selectable:ze(_e(c,"selectable",h)),draggable:ze(_e(c,"draggable",h)),code:ze(_e(c,"code",h)),defining:ze(_e(c,"defining",h)),isolating:ze(_e(c,"isolating",h)),attrs:Object.fromEntries(u.map(y=>{var _;return[y.name,{default:(_=y==null?void 0:y.attribute)===null||_===void 0?void 0:_.default}]}))}),p=ze(_e(c,"parseHTML",h));p&&(f.parseDOM=p.map(y=>cI(y,u)));const m=_e(c,"renderHTML",h);m&&(f.toDOM=y=>m({node:y,HTMLAttributes:fv(y,u)}));const g=_e(c,"renderText",h);return g&&(f.toText=g),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,y)=>{const _=_e(y,"extendMarkSchema",h);return{...g,..._?_(c):{}}},{}),f=uI({...d,inclusive:ze(_e(c,"inclusive",h)),excludes:ze(_e(c,"excludes",h)),group:ze(_e(c,"group",h)),spanning:ze(_e(c,"spanning",h)),code:ze(_e(c,"code",h)),attrs:Object.fromEntries(u.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=ze(_e(c,"parseHTML",h));p&&(f.parseDOM=p.map(g=>cI(g,u)));const m=_e(c,"renderHTML",h);return m&&(f.toDOM=g=>m({mark:g,HTMLAttributes:fv(g,u)})),[c.name,f]}));return new tj({topNode:o,nodes:a,marks:l})}function ly(t,e){return e.nodes[t]||e.marks[t]||null}function hI(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const Xq=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function ub(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class $m{constructor(e){this.find=e.find,this.handler=e.handler}}const Zq=(t,e)=>{if(ub(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Sd(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const h=Xq(c)+s;return o.forEach(d=>{if(u)return;const f=Zq(h,d.find);if(!f)return;const p=l.state.tr,m=Fm({state:l.state,transaction:p}),g={from:r-(f[0].length-s.length),to:i},{commands:y,chain:_,can:v}=new Um({editor:n,state:m});d.handler({state:m,range:g,match:f,commands:y,chain:_,can:v})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function eG(t){const{editor:e,rules:n}=t,r=new Er({state:{init(){return null},apply(i,s){const o=i.getMeta(r);if(o)return o;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:c,text:u}=a,h=c+u.length;Sd({editor:e,from:c,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Sd({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Sd({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Sd({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function tG(t){return typeof t=="number"}class nG{constructor(e){this.find=e.find,this.handler=e.handler}}const rG=(t,e,n)=>{if(ub(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function iG(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Um({editor:e,state:n}),h=[];return n.doc.nodesBetween(r,i,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(r,p),g=Math.min(i,p+f.content.size),y=f.textBetween(m-p,g-p,void 0,"￼");rG(y,s.find,o).forEach(v=>{if(v.index===void 0)return;const w=m+v.index+1,S=w+v[0].length,A={from:n.tr.mapping.map(w),to:n.tr.mapping.map(S)},P=s.handler({state:n,range:A,match:v,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});h.push(P)})}),h.every(f=>f!==null)}const sG=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function oG(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:u,from:h,to:d,rule:f,pasteEvt:p})=>{const m=u.tr,g=Fm({state:u,transaction:m});if(!(!iG({editor:e,state:g,from:Math.max(h-1,0),to:d.b-1,rule:f,pasteEvent:p,dropEvent:a})||!m.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m};return n.map(u=>new Er({view(h){const d=f=>{var p;r=!((p=h.dom.parentElement)===null||p===void 0)&&p.contains(f.target)?h.dom.parentElement:null};return window.addEventListener("dragstart",d),{destroy(){window.removeEventListener("dragstart",d)}}},props:{handleDOMEvents:{drop:(h,d)=>(s=r===h.dom.parentElement,a=d,!1),paste:(h,d)=>{var f;const p=(f=d.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=d,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(h,d,f)=>{const p=h[0],m=p.getMeta("uiEvent")==="paste"&&!i,g=p.getMeta("uiEvent")==="drop"&&!s,y=p.getMeta("applyPasteRules"),_=!!y;if(!m&&!g&&!_)return;if(_){const{from:S,text:A}=y,P=S+A.length,M=sG(A);return l({rule:u,state:f,from:S,to:{b:P},pasteEvt:M})}const v=d.doc.content.findDiffStart(f.doc.content),w=d.doc.content.findDiffEnd(f.doc.content);if(!(!tG(v)||!w||v===w.b))return l({rule:u,state:f,from:v,to:w,pasteEvt:o})}}))}function aG(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Ya{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Ya.resolve(e),this.schema=Qq(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:ly(r.name,this.schema)};r.type==="mark"&&(!((i=ze(_e(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=_e(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=_e(r,"onCreate",s);a&&this.editor.on("create",a);const l=_e(r,"onUpdate",s);l&&this.editor.on("update",l);const c=_e(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=_e(r,"onTransaction",s);u&&this.editor.on("transaction",u);const h=_e(r,"onFocus",s);h&&this.editor.on("focus",h);const d=_e(r,"onBlur",s);d&&this.editor.on("blur",d);const f=_e(r,"onDestroy",s);f&&this.editor.on("destroy",f)})}static resolve(e){const n=Ya.sort(Ya.flatten(e)),r=aG(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=_e(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=_e(r,"priority")||100,o=_e(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ly(n.name,this.schema)},i=_e(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Ya.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:ly(o.name,this.schema)},l=[],c=_e(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>Mi.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,y])=>[g,()=>y({editor:e})]));u={...u,...m}}const h=Tq(u);l.push(h);const d=_e(o,"addInputRules",a);hI(o,e.options.enableInputRules)&&d&&r.push(...d());const f=_e(o,"addPasteRules",a);hI(o,e.options.enablePasteRules)&&f&&i.push(...f());const p=_e(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[eG({editor:e,rules:r}),...oG({editor:e,rules:i}),...s]}get attributes(){return DM(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Bm(this.extensions);return Object.fromEntries(n.filter(r=>!!_e(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:fn(r.name,this.schema)},o=_e(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,h)=>{const d=fv(l,i);return o()({editor:e,node:l,getPos:u,decorations:h,HTMLAttributes:d,extension:r})};return[r.name,a]}))}}function lG(t){return Object.prototype.toString.call(t).slice(8,-1)}function cy(t){return lG(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Hm(t,e){const n={...t};return cy(t)&&cy(e)&&Object.keys(e).forEach(r=>{cy(e[r])?r in t?n[r]=Hm(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class sr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ze(_e(this,"addOptions",{name:this.name}))),this.storage=ze(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new sr(e)}configure(e={}){const n=this.extend();return n.options=Hm(this.options,e),n.storage=ze(_e(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new sr({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ze(_e(n,"addOptions",{name:n.name})),n.storage=ze(_e(n,"addStorage",{name:n.name,options:n.options})),n}}function LM(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,u,h,d)=>{var f;const p=o==null?void 0:o[c.type.name];if(p)return c.isBlock&&!l&&(a+=s,l=!0),h&&(a+=p({node:c,pos:u,parent:h,index:d,range:e})),!1;c.isText?(a+=(f=c==null?void 0:c.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function VM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const cG=sr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Er({key:new ds("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=VM(n);return LM(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),uG=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),hG=(t=!1)=>({commands:e})=>e.setContent("",t),dG=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,h=c.resolve(u.map(l)),d=c.resolve(u.map(l+a.nodeSize)),f=h.blockRange(d);if(!f)return;const p=cc(f);if(a.type.isTextblock){const{defaultType:m}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(f.start,m)}(p||p===0)&&e.lift(f,p)})}),!0},fG=t=>e=>t(e),pG=()=>({state:t,dispatch:e})=>xq(t,e),mG=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Be(r.doc.resolve(o-1))),!0},gG=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},yG=t=>({tr:e,state:n,dispatch:r})=>{const i=fn(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},_G=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},vG=()=>({state:t,dispatch:e})=>wq(t,e),bG=()=>({commands:t})=>t.keyboardShortcut("Enter"),EG=()=>({state:t,dispatch:e})=>Dq(t,e);function mp(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:ub(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function pv(t,e,n={}){return t.find(r=>r.type===e&&mp(r.attrs,n))}function TG(t,e,n={}){return!!pv(t,e,n)}function hb(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=pv([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(pv([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&TG([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function yo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const wG=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=yo(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const h=hb(l,s,e);if(h&&h.from<=c&&h.to>=u){const d=Be.create(o,h.from,h.to);n.setSelection(d)}}return!0},SG=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function FM(t){return t instanceof Be}function Ho(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function UM(t,e=null){if(!e)return null;const n=je.atStart(t),r=je.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Be.create(t,Ho(0,i,s),Ho(t.content.size,i,s)):Be.create(t,Ho(e,i,s),Ho(e,i,s))}function db(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const IG=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{db()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!FM(n.state.selection))return o(),!0;const a=UM(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},AG=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),CG=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),BM=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&BM(r)}return t};function dI(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return BM(n)}function gp(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?Q.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),gp("",e,n)}if(typeof t=="string"){const r=Ul.fromSchema(e);return n.slice?r.parseSlice(dI(t),n.parseOptions).content:r.parse(dI(t),n.parseOptions)}return gp("",e,n)}function kG(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof on||i instanceof ln))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(je.near(t.doc.resolve(o),n))}const RG=t=>t.toString().startsWith("<"),OG=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const o=gp(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,u=!0;if((RG(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}let d;c?(Array.isArray(e)?d=e.map(f=>f.text||"").join(""):typeof e=="object"&&e&&e.text?d=e.text:d=e,r.insertText(d,a,l)):(d=o,r.replaceWith(a,l,d)),n.updateSelection&&kG(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:d}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:d})}return!0},NG=()=>({state:t,dispatch:e})=>Oq(t,e),MG=()=>({state:t,dispatch:e})=>Nq(t,e),PG=()=>({state:t,dispatch:e})=>Sq(t,e),DG=()=>({state:t,dispatch:e})=>kq(t,e),xG=()=>({tr:t,state:e,dispatch:n})=>{try{const r=Mm(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},LG=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Mm(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},VG=()=>({state:t,dispatch:e})=>Iq(t,e),FG=()=>({state:t,dispatch:e})=>Aq(t,e);function fb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function UG(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))db()||fb()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const BG=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=UG(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Xu(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?fn(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(h,d)=>{if(h.isText)return;const f=Math.max(r,d),p=Math.min(i,d+h.nodeSize);a.push({node:h,from:f,to:p})});const l=i-r,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>mp(h.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((h,d)=>h+d.to-d.from,0)>=l}const $G=(t,e={})=>({state:n,dispatch:r})=>{const i=fn(t,n.schema);return Xu(n,i,e)?Mq(n,r):!1},HG=()=>({state:t,dispatch:e})=>Lq(t,e),zG=t=>({state:e,dispatch:n})=>{const r=fn(t,e.schema);return jq(r)(e,n)},jG=()=>({state:t,dispatch:e})=>Pq(t,e);function zm(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function fI(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const WG=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=zm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=fn(t,r.schema)),a==="mark"&&(o=yo(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,fI(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&n.addMark(u,u+c.nodeSize,o.create(fI(h.attrs,e)))})})}),!0):!1},qG=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),GG=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),KG=()=>({state:t,dispatch:e})=>Cq(t,e),YG=()=>({state:t,dispatch:e})=>Rq(t,e),JG=()=>({state:t,dispatch:e})=>Vq(t,e),QG=()=>({state:t,dispatch:e})=>Bq(t,e),XG=()=>({state:t,dispatch:e})=>Uq(t,e);function $M(t,e,n={}){return gp(t,e,{slice:!1,parseOptions:n})}const ZG=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=$M(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function jm(t,e){const n=yo(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function eK(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function tK(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function pb(t){return e=>tK(e.$from,t)}function nK(t,e){const n=fi.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function rK(t,e){const n={from:0,to:t.content.size};return LM(t,n,e)}function iK(t,e){const n=fn(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function sK(t,e){const n=zm(typeof e=="string"?e:e.name,t.schema);return n==="node"?iK(t,e):n==="mark"?jm(t,e):{}}function HM(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=hb(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function tf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function mv(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?yo(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>mp(h.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:d})=>{const f=h.pos,p=d.pos;t.doc.nodesBetween(f,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,g),_=Math.min(p,g+m.nodeSize),v=_-y;o+=v,a.push(...m.marks.map(w=>({mark:w,from:y,to:_})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>mp(h.mark.attrs,n,{strict:!1})).reduce((h,d)=>h+d.to-d.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,d)=>h+d.to-d.from,0);return(l>0?l+c:l)>=o}function oK(t,e,n={}){if(!e)return Xu(t,null,n)||mv(t,null,n);const r=zm(e,t.schema);return r==="node"?Xu(t,e,n):r==="mark"?mv(t,e,n):!1}function pI(t,e){const{nodeExtensions:n}=Bm(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ze(_e(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function aK(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function lK(t,e,n){var r;const{selection:i}=e;let s=null;if(FM(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,h,d)=>{if(c)return!1;if(u.isInline){const f=!d||d.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=f&&p}return!c}),c})}const cK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=yo(t,r.schema);if(i)if(o){const c=jm(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;r.doc.nodesBetween(u,h,(d,f)=>{const p=Math.max(f,u),m=Math.min(f+d.nodeSize,h);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&n.addMark(p,m,l.create({...y.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return lK(r,n,l)},uK=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),hK=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=fn(t,n.schema);return s.isTextblock?i().command(({commands:o})=>lI(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>lI(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},dK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Ho(t,0,r.content.size),s=ke.create(r,i);e.setSelection(s)}return!0},fK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Be.atStart(r).from,a=Be.atEnd(r).to,l=Ho(i,o,a),c=Ho(s,o,a),u=Be.create(r,l,c);e.setSelection(u)}return!0},pK=t=>({state:e,dispatch:n})=>{const r=fn(t,e.schema);return Gq(r)(e,n)};function mI(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const mK=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=tf(c,a.node().type.name,a.node().attrs);if(s instanceof ke&&s.node.isBlock)return!a.parentOffset||!ml(o,a.pos)?!1:(r&&(t&&mI(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const h=l.parentOffset===l.parent.content.size;s instanceof Be&&e.deleteSelection();const d=a.depth===0?void 0:eK(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=h&&d?[{type:d,attrs:u}]:void 0,p=ml(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&ml(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,f=d?[{type:d,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,f),d&&!h&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&mI(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},gK=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=fn(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const h=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=Q.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let P=a.depth-y;P>=a.depth-3;P-=1)g=Q.from(a.node(P).copy(g));const _=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,v=tf(h,a.node().type.name,a.node().attrs),w=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(v))||void 0;g=g.append(Q.from(o.createAndFill(null,w)||void 0));const S=a.before(a.depth-(y-1));e.replace(S,a.after(-_),new de(g,4-y,0));let A=-1;e.doc.nodesBetween(S,e.doc.content.size,(P,M)=>{if(A>-1)return!1;P.isTextblock&&P.content.size===0&&(A=M+1)}),A>-1&&e.setSelection(Be.near(e.doc.resolve(A))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,f=tf(h,u.type.name,u.attrs),p=tf(h,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:o,attrs:f},{type:d,attrs:p}]:[{type:o,attrs:f}];if(!ml(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=n,{splittableMarks:_}=i.extensionManager,v=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!v||!r)return!0;const w=v.filter(S=>_.includes(S.type.name));e.ensureMarks(w)}return!0},uy=(t,e)=>{const n=pb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&mo(t.doc,n.pos)&&t.join(n.pos),!0},hy=(t,e)=>{const n=pb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&mo(t.doc,r)&&t.join(r),!0},yK=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:h,splittableMarks:d}=i.extensionManager,f=fn(t,o.schema),p=fn(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:_}=m,v=y.blockRange(_),w=g||m.$to.parentOffset&&m.$from.marks();if(!v)return!1;const S=pb(A=>pI(A.type.name,h))(m);if(v.depth>=1&&S&&v.depth-S.depth<=1){if(S.node.type===f)return c.liftListItem(p);if(pI(S.node.type.name,h)&&f.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,f),!0)).command(()=>uy(s,f)).command(()=>hy(s,f)).run()}return!n||!w||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>uy(s,f)).command(()=>hy(s,f)).run():l().command(()=>{const A=u().wrapInList(f,r),P=w.filter(M=>d.includes(M.type.name));return s.ensureMarks(P),A?!0:c.clearNodes()}).wrapInList(f,r).command(()=>uy(s,f)).command(()=>hy(s,f)).run()},_K=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=yo(t,r.schema);return mv(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},vK=(t,e,n={})=>({state:r,commands:i})=>{const s=fn(t,r.schema),o=fn(e,r.schema);return Xu(r,s,n)?i.setNode(o):i.setNode(s,n)},bK=(t,e={})=>({state:n,commands:r})=>{const i=fn(t,n.schema);return Xu(n,i,e)?r.lift(i):r.wrapIn(i,e)},EK=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},TK=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},wK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=yo(t,r.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&o){let{from:d,to:f}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=hb(c,l,p);m&&(d=m.from,f=m.to),n.removeMark(d,f,l)}else h.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},SK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=zm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=fn(t,r.schema)),a==="mark"&&(o=yo(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(h,d)=>{s&&s===h.type&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(f=>{if(o===f.type){const p=Math.max(d,c),m=Math.min(d+h.nodeSize,u);n.addMark(p,m,o.create({...f.attrs,...e}))}})})}),!0):!1},IK=(t,e={})=>({state:n,dispatch:r})=>{const i=fn(t,n.schema);return $q(i,e)(n,r)},AK=(t,e={})=>({state:n,dispatch:r})=>{const i=fn(t,n.schema);return Hq(i,e)(n,r)};var CK=Object.freeze({__proto__:null,blur:uG,clearContent:hG,clearNodes:dG,command:fG,createParagraphNear:pG,cut:mG,deleteCurrentNode:gG,deleteNode:yG,deleteRange:_G,deleteSelection:vG,enter:bG,exitCode:EG,extendMarkRange:wG,first:SG,focus:IG,forEach:AG,insertContent:CG,insertContentAt:OG,joinUp:NG,joinDown:MG,joinBackward:PG,joinForward:DG,joinItemBackward:xG,joinItemForward:LG,joinTextblockBackward:VG,joinTextblockForward:FG,keyboardShortcut:BG,lift:$G,liftEmptyBlock:HG,liftListItem:zG,newlineInCode:jG,resetAttributes:WG,scrollIntoView:qG,selectAll:GG,selectNodeBackward:KG,selectNodeForward:YG,selectParentNode:JG,selectTextblockEnd:QG,selectTextblockStart:XG,setContent:ZG,setMark:cK,setMeta:uK,setNode:hK,setNodeSelection:dK,setTextSelection:fK,sinkListItem:pK,splitBlock:mK,splitListItem:gK,toggleList:yK,toggleMark:_K,toggleNode:vK,toggleWrap:bK,undoInputRule:EK,unsetAllMarks:TK,unsetMark:wK,updateAttributes:SK,wrapIn:IK,wrapInList:AK});const kK=sr.create({name:"commands",addCommands(){return{...CK}}}),RK=sr.create({name:"editable",addProseMirrorPlugins(){return[new Er({key:new ds("editable"),props:{editable:()=>this.editor.options.editable}})]}}),OK=sr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Er({key:new ds("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),NK=sr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:d,parent:f}=h,p=h.parent.isTextblock&&d>0?a.doc.resolve(d-1):h,m=p.parent.type.spec.isolating,g=h.pos-h.parentOffset,y=m&&p.parent.childCount===1?g===h.pos:je.atStart(c).from===d;return!u||!y||!f.type.isTextblock||f.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return db()||fb()?s:i},addProseMirrorPlugins(){return[new Er({key:new ds("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=je.atStart(e.doc).from,l=je.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const h=n.tr,d=Fm({state:n,transaction:h}),{commands:f}=new Um({editor:this.editor,state:d});if(f.clearNodes(),!!h.steps.length)return h}})]}}),MK=sr.create({name:"tabindex",addProseMirrorPlugins(){return[new Er({key:new ds("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Mo{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Mo(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Mo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Mo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+1,o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new Mo(o,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Mo(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];return!this.children||this.children.length===0||this.children.forEach(s=>{if(s.node.type.name===e){if(Object.keys(n).length>0){const o=s.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(o[c]!==n[c])return}}if(i.push(s),r)return}i=i.concat(s.querySelectorAll(e))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const PK=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function DK(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let xK=class extends Kq{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=DK(PK,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=xM(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[RK,cG.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),kK,OK,NK,MK]:[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Ya(i,this)}createCommandManager(){this.commandManager=new Um({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=$M(this.options.content,this.schema,this.options.parseOptions),n=UM(e,this.options.autofocus);this.view=new fq(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Ka.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return sK(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return oK(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return nK(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return rK(this.state.doc,{blockSeparator:n,textSerializers:{...VM(this.schema),...r}})}get isEmpty(){return aK(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Mo(n,this)}get $doc(){return this.$pos(0)}};function jl(t){return new $m({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ze(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(HM(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(m=>m===t.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const d=n.from+l+o.length;s.addMark(n.from+l,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function LK(t){return new $m({find:t.find,handler:({state:e,range:n,match:r})=>{const i=ze(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const h=r[0][r[0].length-1];s.insertText(h,o+r[0].length-1),s.replaceWith(u,a,l)}else r[0]&&s.insert(o-1,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}})}function gv(t){return new $m({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=ze(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Zu(t){return new $m({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=ze(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&X0(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:d}=e,{splittableMarks:f}=t.editor.extensionManager,p=d||h.$to.parentOffset&&h.$from.marks();if(p){const m=p.filter(g=>f.includes(g.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&mo(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class Mi{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ze(_e(this,"addOptions",{name:this.name}))),this.storage=ze(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Mi(e)}configure(e={}){const n=this.extend();return n.options=Hm(this.options,e),n.storage=ze(_e(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Mi({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ze(_e(n,"addOptions",{name:n.name})),n.storage=ze(_e(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}let Tr=class yv{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ze(_e(this,"addOptions",{name:this.name}))),this.storage=ze(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new yv(e)}configure(e={}){const n=this.extend();return n.options=Hm(this.options,e),n.storage=ze(_e(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new yv({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=ze(_e(n,"addOptions",{name:n.name})),n.storage=ze(_e(n,"addStorage",{name:n.name,options:n.options})),n}};function Wl(t){return new nG({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=ze(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),h=n.from+l.indexOf(a),d=h+a.length;if(HM(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>h).length)return null;d<n.to&&o.delete(d,n.to),h>n.from&&o.delete(n.from+u,h),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const VK=/^\s*>\s$/,FK=Tr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Zu({find:VK,type:this.type})]}}),UK=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,BK=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,$K=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,HK=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,zK=Mi.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[jl({find:UK,type:this.type}),jl({find:$K,type:this.type})]},addPasteRules(){return[Wl({find:BK,type:this.type}),Wl({find:HK,type:this.type})]}}),jK=Tr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Zt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),gI=Mi.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=jm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),yI=/^\s*([-+*])\s$/,WK=Tr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jK.name,this.editor.getAttributes(gI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Zu({find:yI,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Zu({find:yI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(gI.name),editor:this.editor})),[t]}}),qK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,GK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,KK=Mi.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[jl({find:qK,type:this.type})]},addPasteRules(){return[Wl({find:GK,type:this.type})]}}),YK=/^```([a-z]+)?[\s\n]$/,JK=/^~~~([a-z]+)?[\s\n]$/,QK=Tr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Zt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[gv({find:YK,type:this.type,getAttributes:t=>({language:t[1]})}),gv({find:JK,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Er({key:new ds("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o}=t.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(Be.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),XK=Tr.create({name:"doc",topNode:!0,content:"block+"});function ZK(t={}){return new Er({view(e){return new eY(e,t)}})}class eY{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),h=a?u.bottom:u.top;a&&l&&(h=(h+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:h-this.width/2,bottom:h+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=$N(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const tY=sr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ZK(this.options)]}});class Lt extends je{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Lt.valid(r)?new Lt(r):je.near(r)}content(){return de.empty}eq(e){return e instanceof Lt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Lt(e.resolve(n.pos))}getBookmark(){return new mb(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!nY(e)||!rY(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Lt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Lt.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!ke.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Lt.valid(a))return a}return null}}}Lt.prototype.visible=!1;Lt.findFrom=Lt.findGapCursorFrom;je.jsonID("gapcursor",Lt);class mb{constructor(e){this.pos=e}map(e){return new mb(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Lt.valid(n)?new Lt(n):je.near(n)}}function nY(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function rY(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function iY(){return new Er({props:{decorations:lY,createSelectionBetween(t,e,n){return e.pos==n.pos&&Lt.valid(n)?new Lt(n):null},handleClick:oY,handleKeyDown:sY,handleDOMEvents:{beforeinput:aY}}})}const sY=CM({ArrowLeft:Id("horiz",-1),ArrowRight:Id("horiz",1),ArrowUp:Id("vert",-1),ArrowDown:Id("vert",1)});function Id(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Be){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Lt.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Lt(c))),!0):!1}}function oY(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Lt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&ke.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Lt(r))),!0)}function aY(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Lt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Q.empty;for(let o=r.length-1;o>=0;o--)i=Q.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new de(i,0,0));return s.setSelection(Be.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function lY(t){if(!(t.selection instanceof Lt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",qt.create(t.doc,[pr.widget(t.selection.head,e,{key:"gapcursor"})])}const cY=sr.create({name:"gapCursor",addProseMirrorPlugins(){return[iY()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ze(_e(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),uY=Tr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Zt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(d=>a.includes(d.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),hY=Tr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Zt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>gv({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var yp=200,cn=function(){};cn.prototype.append=function(e){return e.length?(e=cn.from(e),!this.length&&e||e.length<yp&&this.leafAppend(e)||this.length<yp&&e.leafPrepend(this)||this.appendInner(e)):this};cn.prototype.prepend=function(e){return e.length?cn.from(e).append(this):this};cn.prototype.appendInner=function(e){return new dY(this,e)};cn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?cn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};cn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};cn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};cn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};cn.from=function(e){return e instanceof cn?e:e&&e.length?new zM(e):cn.empty};var zM=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=yp)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=yp)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(cn);cn.empty=new zM([]);var dY=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(cn);const fY=500;class Hr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((h,d)=>{if(!h.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new ri(h.map));let f=h.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new ri(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new Hr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),d=new ri(e.mapping.maps[u],h,n),f;(f=l&&l.merge(d))&&(d=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(d),n&&(o++,n=void 0),i||(l=d)}let c=o-r.depth;return c>mY&&(a=pY(a,c),o-=c),new Hr(a.append(s),o)}remapping(e,n){let r=new pl;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Hr(this.items.append(e.map(n=>new ri(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(d.step){let m=e.steps[f].invert(e.docs[f]),g=d.selection&&d.selection.map(s.slice(l+1,f));g&&a++,r.push(new ri(p,m,g))}else r.push(new ri(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new ri(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),h=new Hr(u,a);return h.emptyItemCount()>fY&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let h=new ri(c.invert(),l,u),d,f=i.length-1;(d=i.length&&i[f].merge(h))?i[f]=d:i.push(h)}}else o.map&&r--},this.items.length,0),new Hr(cn.from(i.reverse()),s)}}Hr.empty=new Hr(cn.empty,0);function pY(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class ri{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ri(n.getMap().invert(),n,this.selection)}}}class Rs{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const mY=20;function gY(t,e,n,r){let i=n.getMeta(ra),s;if(i)return i.historyState;n.getMeta(vY)&&(t=new Rs(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(ra))return o.getMeta(ra).redo?new Rs(t.done.addTransform(n,void 0,r,nf(e)),t.undone,_I(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Rs(t.done,t.undone.addTransform(n,void 0,r,nf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!yY(n,t.prevRanges)),c=o?dy(t.prevRanges,n.mapping):_I(n.mapping.maps[n.steps.length-1]);return new Rs(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,nf(e)),Hr.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Rs(t.done.rebased(n,s),t.undone.rebased(n,s),dy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Rs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),dy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function yY(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function _I(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function dy(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function _Y(t,e,n){let r=nf(e),i=ra.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Rs(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(ra,{redo:n,historyState:l})}let fy=!1,vI=null;function nf(t){let e=t.plugins;if(vI!=e){fy=!1,vI=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){fy=!0;break}}return fy}const ra=new ds("history"),vY=new ds("closeHistory");function bY(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Er({key:ra,state:{init(){return new Rs(Hr.empty,Hr.empty,null,0,-1)},apply(e,n,r){return gY(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?WM:r=="historyRedo"?qM:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function jM(t,e){return(n,r)=>{let i=ra.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=_Y(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const WM=jM(!1,!0),qM=jM(!0,!0),EY=sr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>WM(t,e),redo:()=>({state:t,dispatch:e})=>qM(t,e)}},addProseMirrorPlugins(){return[bY(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),TY=Tr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Zt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){const{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(Be.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(ke.create(i.doc,a.pos)):i.setSelection(Be.create(i.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(i.insert(l,c),i.setSelection(Be.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[LK({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),wY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,SY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,IY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,AY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,CY=Mi.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[jl({find:wY,type:this.type}),jl({find:IY,type:this.type})]},addPasteRules(){return[Wl({find:SY,type:this.type}),Wl({find:AY,type:this.type})]}}),kY=Tr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Zt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),RY=Tr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Zt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),bI=Mi.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=jm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),EI=/^(\d+)\.\s$/,OY=Tr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Zt(this.options.HTMLAttributes,n),0]:["ol",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(RY.name,this.editor.getAttributes(bI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Zu({find:EI,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Zu({find:EI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(bI.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),NY=Tr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),MY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,PY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,DY=Mi.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){const t={};return fb()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[jl({find:MY,type:this.type})]},addPasteRules(){return[Wl({find:PY,type:this.type})]}}),xY=Tr.create({name:"text",group:"inline"}),LY=sr.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,h,d,f,p,m,g,y;const _=[];return this.options.blockquote!==!1&&_.push(FK.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&_.push(zK.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&_.push(WK.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&_.push(KK.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&_.push(QK.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&_.push(XK.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&_.push(tY.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&_.push(cY.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&_.push(uY.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&_.push(hY.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&_.push(EY.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&_.push(TY.configure((h=this.options)===null||h===void 0?void 0:h.horizontalRule)),this.options.italic!==!1&&_.push(CY.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&_.push(kY.configure((f=this.options)===null||f===void 0?void 0:f.listItem)),this.options.orderedList!==!1&&_.push(OY.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&_.push(NY.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&_.push(DY.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&_.push(xY.configure((y=this.options)===null||y===void 0?void 0:y.text)),_}}),VY=sr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,considerAnyAsEmpty:!1,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Er({key:new ds("placeholder"),props:{decorations:({doc:t,selection:e})=>{var n;const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=e,s=[];if(!r)return null;const{firstChild:o}=t.content,a=o&&o.type.isLeaf,l=o&&o.isAtom,c=this.options.considerAnyAsEmpty?!0:o&&o.type.name===((n=t.type.contentMatch.defaultType)===null||n===void 0?void 0:n.name),u=t.content.childCount<=1&&o&&c&&o.nodeSize<=2&&(!a||!l);return t.descendants((h,d)=>{const f=i>=d&&i<=d+h.nodeSize,p=!h.isLeaf&&!h.childCount;if((f||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];u&&m.push(this.options.emptyEditorClass);const g=pr.node(d,d+h.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:h,pos:d,hasAnchor:f}):this.options.placeholder});s.push(g)}return this.options.includeChildren}),qt.create(t,s)}}})]}});function TI(t){return SA((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class FY extends xK{constructor(e={}){return super(e),this.vueRenderers=oh(new Map),this.contentComponent=null,this.reactiveState=TI(this.view.state),this.reactiveExtensionStorage=TI(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),kp(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const UY=Ut({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=ae(),n=Ta();return NA(()=>{const r=t.editor;r&&r.options.element&&e.value&&Gl(()=>{if(!e.value||!r.options.element.firstChild)return;const i=K(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),ch(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=Go(mx,{to:e.teleportElement,key:e.id},Go(e.component,{ref:e.id,...e.props}));t.push(n)}),Go("div",{ref:e=>{this.rootEl=e}},...t)}}),BY={class:"editor"},$Y={class:"controlls"},HY=Ut({__name:"tiptapEditor.vapor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=ae();return Qi(()=>n.modelValue,s=>{var a,l;((a=i.value)==null?void 0:a.getHTML())!==s&&((l=i.value)==null||l.commands.setContent(s,!1))}),lh(()=>{i.value=new FY({extensions:[LY,VY.configure({placeholder:"Write something …"})],content:n.modelValue,onUpdate:()=>{var s;r("update:modelValue",(s=i.value)==null?void 0:s.getHTML())}})}),ch(()=>{var s;(s=i.value)==null||s.destroy()}),(s,o)=>(R(),x("div",BY,[b("div",$Y,[i.value?(R(),x(se,{key:0},[b("button",{icon:"",big:"",onClick:o[0]||(o[0]=a=>i.value.chain().focus().toggleBold().run())}," format_bold "),b("button",{icon:"",big:"",onClick:o[1]||(o[1]=a=>i.value.chain().focus().toggleItalic().run())}," format_italic "),b("button",{icon:"",big:"",onClick:o[2]||(o[2]=a=>i.value.chain().focus().toggleBulletList().run())}," format_list_bulleted "),b("button",{icon:"",big:"",onClick:o[3]||(o[3]=a=>i.value.chain().focus().toggleOrderedList().run())}," format_list_numbered ")],64)):ce("",!0)]),Ee(K(UY),{editor:i.value,class:"editor-content",placeholder:"bla"},null,8,["editor"])]))}}),GM=Li(HY,[["__scopeId","data-v-9ecefcbc"]]);function py(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function zY(t){return(...e)=>!t(...e)}function jY(t,e){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(e.trim())!==-1}function KM(t,e,n,r){return e?t.filter(i=>jY(r(i,n),e)).sort((i,s)=>r(i,n).length-r(s,n).length):t}function WY(t){return t.filter(e=>!e.$isLabel)}function my(t,e){return n=>n.reduce((r,i)=>i[t]&&i[t].length?(r.push({$groupLabel:i[e],$isLabel:!0}),r.concat(i[t])):r,[])}function qY(t,e,n,r,i){return s=>s.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const a=KM(o[n],t,e,i);return a.length?{[r]:o[r],[n]:a}:[]})}const wI=(...t)=>e=>t.reduce((n,r)=>r(n),e);var GY={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,e){return py(t)?"":e?t[e]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",e=t.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,e,this.label):KM(n,e,this.label,this.customLabel):n=this.groupValues?my(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(zY(this.isSelected)):n,this.taggable&&e.length&&!this.isExistingOption(e)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:t}):n.unshift({isTag:!0,label:t})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,e,n){return wI(qY(e,n,this.groupValues,this.groupLabel,this.customLabel),my(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return wI(my(this.groupValues,this.groupLabel),WY)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const e=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(e)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(py(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const e=this.customLabel(t,this.label);return py(e)?"":e},select(t,e){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(e)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(e==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){e!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const e=this.options.find(n=>n[this.groupLabel]===t.$groupLabel);if(e){if(this.wholeGroupSelected(e)){this.$emit("remove",e[this.groupValues],this.id);const n=this.trackBy?e[this.groupValues].map(i=>i[this.trackBy]):e[this.groupValues],r=this.internalValue.filter(i=>n.indexOf(this.trackBy?i[this.trackBy]:i)===-1);this.$emit("update:modelValue",r)}else{let n=e[this.groupValues].filter(r=>!(this.isOptionDisabled(r)||this.isSelected(r)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,e=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const r=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",r)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&e&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const t=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},KY={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,e){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight(t,e){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":e.$isLabel}];const n=this.options.find(r=>r[this.groupLabel]===e.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},Yi={name:"vue-multiselect",mixins:[GY,KY],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const YY={ref:"tags",class:"multiselect__tags"},JY={class:"multiselect__tags-wrap"},QY={class:"multiselect__spinner"},XY={key:0},ZY={class:"multiselect__option"},eJ={class:"multiselect__option"},tJ=te("No elements found. Consider changing the search query."),nJ={class:"multiselect__option"},rJ=te("List is empty.");function iJ(t,e,n,r,i,s){return R(),qe("div",{tabindex:t.searchable?-1:n.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":s.isAbove,"multiselect--has-options-group":s.hasOptionGroup},"multiselect"],onFocus:e[14]||(e[14]=o=>t.activate()),onBlur:e[15]||(e[15]=o=>t.searchable?!1:t.deactivate()),onKeydown:[e[16]||(e[16]=Vr(it(o=>t.pointerForward(),["self","prevent"]),["down"])),e[17]||(e[17]=Vr(it(o=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:e[18]||(e[18]=Vr(it(o=>t.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:e[19]||(e[19]=Vr(o=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[nn(t.$slots,"caret",{toggle:t.toggle},()=>[Ee("div",{onMousedown:e[1]||(e[1]=it(o=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),nn(t.$slots,"clear",{search:t.search}),Ee("div",YY,[nn(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:s.visibleValues,isOpen:t.isOpen},()=>[zt(Ee("div",JY,[(R(!0),qe(se,null,at(s.visibleValues,(o,a)=>nn(t.$slots,"tag",{option:o,search:t.search,remove:t.removeElement},()=>[(R(),qe("span",{class:"multiselect__tag",key:a},[Ee("span",{textContent:ne(t.getOptionLabel(o))},null,8,["textContent"]),Ee("i",{tabindex:"1",onKeypress:Vr(it(l=>t.removeElement(o),["prevent"]),["enter"]),onMousedown:it(l=>t.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[fc,s.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>n.limit?nn(t.$slots,"limit",{key:0},()=>[Ee("strong",{class:"multiselect__strong",textContent:ne(n.limitText(t.internalValue.length-n.limit))},null,8,["textContent"])]):ce("v-if",!0)]),Ee(df,{name:"multiselect__loading"},{default:lt(()=>[nn(t.$slots,"loading",{},()=>[zt(Ee("div",QY,null,512),[[fc,n.loading]])])]),_:3}),t.searchable?(R(),qe("input",{key:0,ref:"search",name:n.name,id:t.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:t.placeholder,style:s.inputStyle,value:t.search,disabled:n.disabled,tabindex:n.tabindex,onInput:e[2]||(e[2]=o=>t.updateSearch(o.target.value)),onFocus:e[3]||(e[3]=it(o=>t.activate(),["prevent"])),onBlur:e[4]||(e[4]=it(o=>t.deactivate(),["prevent"])),onKeyup:e[5]||(e[5]=Vr(o=>t.deactivate(),["esc"])),onKeydown:[e[6]||(e[6]=Vr(it(o=>t.pointerForward(),["prevent"]),["down"])),e[7]||(e[7]=Vr(it(o=>t.pointerBackward(),["prevent"]),["up"])),e[9]||(e[9]=Vr(it(o=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:e[8]||(e[8]=Vr(it(o=>t.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):ce("v-if",!0),s.isSingleLabelVisible?(R(),qe("span",{key:1,class:"multiselect__single",onMousedown:e[10]||(e[10]=it((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[nn(t.$slots,"singleLabel",{option:s.singleValue},()=>[te(ne(t.currentOptionLabel),1)])],32)):ce("v-if",!0),s.isPlaceholderVisible?(R(),qe("span",{key:2,class:"multiselect__placeholder",onMousedown:e[11]||(e[11]=it((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[nn(t.$slots,"placeholder",{},()=>[te(ne(t.placeholder),1)])],32)):ce("v-if",!0)],512),Ee(df,{name:"multiselect"},{default:lt(()=>[zt(Ee("div",{class:"multiselect__content-wrapper",onFocus:e[12]||(e[12]=(...o)=>t.activate&&t.activate(...o)),tabindex:"-1",onMousedown:e[13]||(e[13]=it(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[Ee("ul",{class:"multiselect__content",style:s.contentStyle,role:"listbox",id:"listbox-"+t.id},[nn(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(R(),qe("li",XY,[Ee("span",ZY,[nn(t.$slots,"maxElements",{},()=>[te("Maximum of "+ne(t.max)+" options selected. First remove a selected option to select another.",1)])])])):ce("v-if",!0),!t.max||t.internalValue.length<t.max?(R(!0),qe(se,{key:1},at(t.filteredOptions,(o,a)=>(R(),qe("li",{class:"multiselect__element",key:a,id:t.id+"-"+a,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?ce("v-if",!0):(R(),qe("span",{key:0,class:[t.optionHighlight(a,o),"multiselect__option"],onClick:it(l=>t.select(o),["stop"]),onMouseenter:it(l=>t.pointerSet(a),["self"]),"data-select":o&&o.isTag?t.tagPlaceholder:s.selectLabelText,"data-selected":s.selectedLabelText,"data-deselect":s.deselectLabelText},[nn(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Ee("span",null,ne(t.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(R(),qe("span",{key:1,"data-select":t.groupSelect&&s.selectGroupLabelText,"data-deselect":t.groupSelect&&s.deselectGroupLabelText,class:[t.groupHighlight(a,o),"multiselect__option"],onMouseenter:it(l=>t.groupSelect&&t.pointerSet(a),["self"]),onMousedown:it(l=>t.selectGroup(o),["prevent"])},[nn(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Ee("span",null,ne(t.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):ce("v-if",!0)],8,["id","role"]))),128)):ce("v-if",!0),zt(Ee("li",null,[Ee("span",eJ,[nn(t.$slots,"noResult",{search:t.search},()=>[tJ])])],512),[[fc,n.showNoResults&&t.filteredOptions.length===0&&t.search&&!n.loading]]),zt(Ee("li",null,[Ee("span",nJ,[nn(t.$slots,"noOptions",{},()=>[rJ])])],512),[[fc,n.showNoOptions&&(t.options.length===0||s.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!n.loading]]),nn(t.$slots,"afterList")],12,["id"])],36),[[fc,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}Yi.render=iJ;const Uc=t=>{const e=ae(t),n=["k","m"];for(let r=n.length-1;r>=0;r--){const i=1e3**(r+1);if(e.value>=i){let o=(e.value/i).toFixed(2).replace(/\.?0+$/,"");return o.length>4&&(o=o.slice(0,4)),o+n[r]}}return e.value.toString()},_o=t=>(Kl("data-v-ebcdcf12"),t=t(),Yl(),t),sJ={key:0},oJ={class:"left-column"},aJ={class:"img-container"},lJ=["src"],cJ=_o(()=>b("h3",{class:"fs-4"},"Points",-1)),uJ=_o(()=>b("p",null,"the points the competitors will get when they complete the tile",-1)),hJ={class:"right-column"},dJ={icon:"",class:"pen fs-4"},fJ=_o(()=>b("h3",{class:"fs-4"},"Tile type",-1)),pJ={key:0},mJ={class:"fs-4"},gJ={class:"drop-list-input"},yJ={key:1},_J=_o(()=>b("h3",{class:"fs-4"},"Drops",-1)),vJ=_o(()=>b("p",null,[te(" Add drops to the list of valid drops and configure the required amount."),b("br"),b("em",null,"if none are set it defaults to target count")],-1)),bJ={key:0,class:"drop-list-input"},EJ={key:0},TJ={class:"drop-list"},wJ={class:"drop-row"},SJ={class:"drop-list-input"},IJ={style:{"margin-left":"0","margin-right":"auto","font-weight":"bold"}},AJ={key:0},CJ={key:1},kJ=["onClick"],RJ={class:"drop-list-input"},OJ={key:0,class:"drop-list-input"},NJ={class:"drop-list-input"},MJ={class:"drop-list-input"},PJ=_o(()=>b("h3",{class:"fs-4"},"Metric",-1)),DJ=_o(()=>b("p",null,"Search and select the metric you want to associate with this tile.",-1)),xJ={key:2},LJ=_o(()=>b("p",null,[b("em",null,"these are example values in edit mode, in view mode it will be with actual data")],-1)),VJ={class:"spread"},FJ=["value","max"],UJ=Ut({__name:"EditTileModal.vapor",props:{localTileData:{}},emits:["save","cancel","delete"],setup(t,{expose:e,emit:n}){const r=t,i=ae(!1),s=ae(),o=ae({name:"",count:0,min:0,max:0}),a=ct(()=>{var w;return((w=r.localTileData)==null?void 0:w.type)=="drop"?"Total Count":"Required "+r.localTileData.type}),l=ct(()=>{var w;return((w=r.localTileData)==null?void 0:w.type)=="drop"?"Drop Count":"Required "+r.localTileData.type}),c=()=>{r.localTileData&&![void 0,""].includes(o.value.name)&&(r.localTileData.drops?r.localTileData.drops.push({id:J_(),...o.value}):r.localTileData.drops=[{id:J_(),...o.value}],o.value.count=0,o.value.min=0,o.value.max=0)},u=w=>{r.localTileData&&r.localTileData.drops&&r.localTileData.drops.indexOf(w)>-1&&r.localTileData.drops.splice(r.localTileData.drops.indexOf(w),1)},h=ae(["ehb","ehp","league_points","overall"]),d=ae(rN.filter(w=>!h.value.includes(w))),f=ae(Fh.filter(w=>!["overall"].includes(w))),p=ae(GH.filter(w=>!h.value.includes(w))),m=ae([...q0,...d.value]);e({showModal:()=>{s.value&&s.value.showModal()},closeModal:()=>{s.value&&(o.value.name="",s.value.close())}});const _=w=>{document.querySelector(w).focus()},v=w=>{[void 0,""].includes(w.target.innerHTML)&&(w.target.innerHTML="Please enter a title..."),r.localTileData.title=w.target.innerHTML};return(w,S)=>{var P,M,k,z,Y,j,U,L,D;const A=vr("font-awesome-icon");return R(),x("dialog",{class:"modal",ref_key:"dialog",ref:s},[r.localTileData?(R(),x("div",sJ,[b("div",oJ,[b("div",aJ,[b("img",{src:r.localTileData.image},null,8,lJ),zt(b("input",{required:"",type:"url","onUpdate:modelValue":S[0]||(S[0]=C=>r.localTileData.image=C)},null,512),[[Ar,r.localTileData.image]])]),Ee(GM,{class:"editable",modelValue:r.localTileData.description,"onUpdate:modelValue":S[1]||(S[1]=C=>r.localTileData.description=C)},null,8,["modelValue"]),b("div",null,[cJ,uJ,b("label",null,[te("points value: "),zt(b("input",{type:"number",min:"0","onUpdate:modelValue":S[2]||(S[2]=C=>r.localTileData.points=C)},null,512),[[Ar,r.localTileData.points]])]),b("label",null,[te("Repeatable "),zt(b("input",{toggle:"",type:"checkbox","onUpdate:modelValue":S[3]||(S[3]=C=>r.localTileData.repeatable=C)},null,512),[[Uy,r.localTileData.repeatable]]),te(" "+ne(r.localTileData.repeatable),1)])])]),b("div",hJ,[b("h2",{onClick:S[7]||(S[7]=C=>_("#title")),class:"fs-1 title"},[b("span",{ref:"props.localTileData.title",contenteditable:"",class:"editable",spellcheck:"false",onFocus:S[4]||(S[4]=C=>i.value=!0),onKeydown:S[5]||(S[5]=Vr(it(C=>{i.value=!1,v(C)},["prevent"]),["enter"])),onBlur:S[6]||(S[6]=it(C=>{i.value=!1,v(C)},["prevent"])),name:"title",id:"title"},ne(r.localTileData.title),545),b("span",dJ,[Ee(A,{icon:["fas","pen"]})])]),b("button",{submit:"",onClick:S[8]||(S[8]=C=>w.$emit("save"))},"Save changes"),b("button",{cancel:"",onClick:S[9]||(S[9]=C=>w.$emit("cancel"))},"Cancel"),b("button",{icon:"",onClick:S[10]||(S[10]=C=>w.$emit("delete"))},"delete"),b("small",null,[te(" tile id: "),b("code",null,ne((P=r.localTileData)==null?void 0:P.id),1)]),b("div",null,[fJ,Ee(K(Yi),{modelValue:r.localTileData.type,"onUpdate:modelValue":S[11]||(S[11]=C=>r.localTileData.type=C),options:["drop","exp","kc"],"close-on-select":!0,"clear-on-select":!1,"allow-empty":!1},null,8,["modelValue"])]),["kc","exp"].includes((M=r.localTileData)==null?void 0:M.type)?(R(),x("div",pJ,[b("h3",mJ,ne(l.value),1),b("p",null," The required "+ne(r.localTileData.type)+" per metric the competitors need to complete the tile ",1),b("div",null,[b("label",gJ,[te(ne(a.value)+": ",1),zt(b("input",{type:"number",min:"0","onUpdate:modelValue":S[12]||(S[12]=C=>r.localTileData.count=C)},null,512),[[Ar,r.localTileData.count]])])])])):ce("",!0),((k=r.localTileData)==null?void 0:k.type)=="drop"?(R(),x("div",yJ,[_J,vJ,b("div",null,[b("label",null,[te(" Individual amount "),zt(b("input",{type:"checkbox",toggle:"",choice:"","onUpdate:modelValue":S[13]||(S[13]=C=>r.localTileData.needAny=C)},null,512),[[Uy,r.localTileData.needAny]]),te(" Total amount ")])]),b("div",null,[(z=r.localTileData)!=null&&z.needAny?(R(),x("label",bJ,[te(" Required amount: "),zt(b("input",{type:"number",min:"0","onUpdate:modelValue":S[14]||(S[14]=C=>r.localTileData.count=C)},null,512),[[Ar,r.localTileData.count]])])):ce("",!0)]),(Y=r.localTileData)!=null&&Y.drops&&((j=r.localTileData)==null?void 0:j.drops.length)>0?(R(),x("hr",EJ)):ce("",!0),b("ul",TJ,[(R(!0),x(se,null,at(r.localTileData.drops,C=>(R(),x("li",null,[b("div",wJ,[b("div",SJ,[b("p",IJ,ne(C.name),1),(C.min||C.max)&&r.localTileData.needAny?(R(),x("small",AJ,[C.min?(R(),x(se,{key:0},[te("min: "+ne(C.min),1)],64)):ce("",!0),C.min&&C.max?(R(),x(se,{key:1},[te(" / ")],64)):ce("",!0),C.max?(R(),x(se,{key:2},[te("max: "+ne(C.max),1)],64)):ce("",!0)])):ce("",!0),r.localTileData.needAny?ce("",!0):(R(),x("div",CJ,ne(C.count)+"x",1)),b("button",{icon:"",outline:"",onClick:V=>u(C)}," delete ",8,kJ)])])]))),256)),b("li",null,[b("div",RJ,[te(" Drop: "),zt(b("input",{type:"text","onUpdate:modelValue":S[15]||(S[15]=C=>o.value.name=C),placeholder:"Bandos tassets"},null,512),[[Ar,o.value.name]])]),r.localTileData.needAny?r.localTileData.needAny?(R(),x(se,{key:1},[b("div",NJ,[te(" Minimum needed: "),zt(b("input",{type:"number",placeholder:"unset","onUpdate:modelValue":S[17]||(S[17]=C=>o.value.min=C)},null,512),[[Ar,o.value.min]])]),b("div",MJ,[te(" Maximum allowed: "),zt(b("input",{type:"number",placeholder:"unset","onUpdate:modelValue":S[18]||(S[18]=C=>o.value.max=C)},null,512),[[Ar,o.value.max]])])],64)):ce("",!0):(R(),x("div",OJ,[te(" Required ammount: "),zt(b("input",{type:"number","onUpdate:modelValue":S[16]||(S[16]=C=>o.value.count=C)},null,512),[[Ar,o.value.count]])])),b("button",{onClick:c},"Add Drop")])])])):ce("",!0),b("div",null,[PJ,DJ,((U=r.localTileData)==null?void 0:U.type)=="drop"?(R(),qe(K(Yi),{key:0,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":S[19]||(S[19]=C=>r.localTileData.metric=C),options:p.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):ce("",!0),((L=r.localTileData)==null?void 0:L.type)=="kc"?(R(),qe(K(Yi),{key:1,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":S[20]||(S[20]=C=>r.localTileData.metric=C),options:m.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):ce("",!0),((D=r.localTileData)==null?void 0:D.type)=="exp"?(R(),qe(K(Yi),{key:2,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":S[21]||(S[21]=C=>r.localTileData.metric=C),options:f.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):ce("",!0)]),["kc","exp"].includes(r.localTileData.type)&&r.localTileData.metric?(R(),x("div",xJ,[(R(!0),x(se,null,at(r.localTileData.metric,C=>(R(),x(se,null,[b("h3",null,ne(C.replace("_"," ")),1),LJ,b("div",VJ,[b("progress",{min:"0",value:Math.random()*r.localTileData.count,max:r.localTileData.count},null,8,FJ),b("p",null,ne(K(Uc)(Math.floor(Math.random()*r.localTileData.count))),1)])],64))),256))])):ce("",!0)])])):ce("",!0)],512)}}}),BJ=Li(UJ,[["__scopeId","data-v-ebcdcf12"]]),$J=t=>(Kl("data-v-45c72334"),t=t(),Yl(),t),HJ=$J(()=>b("span",{icon:""},"sync",-1)),zJ={id:"board-info"},jJ={key:0,class:"fs-2"},WJ={key:0,id:"controlls-are-editing"},qJ={key:1,id:"controlls-are-viewing"},GJ=["src","onClick"],KJ=Ut({__name:"editBoard.vapor",async setup(t){var Dt,pt;let e,n;const r=lc();r.value="Edit board - Bingo Bongo";const i=fo(),s=ae({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),o=ae(),a=ae(),l=ae(null),c=ae(),u=ae(!1),h=ae(!1),d=ae(!1),f=ae(),p=ae(null),m=ae(0),g=ae([]);let y=[];const _=new G0({apiKey:"zpyy03zybxt0oiznjw6e1mz2",userAgent:"_Odinh"}),v=ae(parseInt(i.params.boardUUID));window.addEventListener("keydown",O=>{switch(O.key){case"Escape":o.value&&o.value.closeModal&&a.value&&a.value.closeModal&&(o.value.closeModal(),a.value.closeModal(),f.value=null,p.value=null,h.value=!1,h.value=!1);break}});const{data:w,promise:S}=Ra(Xe(Me,"Boards",i.params.boardUUID)),{data:A,promise:P}=bi(Zn(Me,"Boards",i.params.boardUUID,"Tiles"));[e,n]=ir(()=>Promise.all([S.value,P.value])),await e,n();const M=ae(((Dt=w.value)==null?void 0:Dt.boardWidth)||5),k=ae(A.value),z=()=>{d.value=!0,Y()},Y=()=>{o.value&&o.value.showModal&&d.value&&o.value.showModal(),a.value&&a.value.showModal&&h.value&&a.value.showModal()},j=()=>{o.value&&o.value.closeModal&&d.value&&o.value.closeModal(),a.value&&a.value.closeModal&&h.value&&!d.value&&a.value.closeModal()};g.value=(pt=w.value)!=null&&pt.orderOfList?w.value.orderOfList:k.value.map(O=>O.id);const U=ct(()=>k.value===void 0?[]:k.value.toSorted((O,H)=>g.value.indexOf(O.id)-g.value.indexOf(H.id)));xz(l,U,{inverted:!0,handle:".handle",ghostClass:"blue-background-class",animation:200,onUpdate:O=>{_N(U.value,O.oldIndex,O.newIndex),Gl(()=>{g.value=U.value.map(H=>H.id)})}});const L=O=>{var H;O==="add"?M.value=Math.min(M.value+1,12):O==="remove"&&(M.value=Math.max(M.value-1,3)),(H=l.value)==null||H.style.setProperty("--width",M.value.toString())},D=async()=>{u.value=!1;try{const O=Xe(Me,"Boards",i.params.boardUUID),H=Zn(O,"Tiles"),W=Mc(Me),J=ae(new Set);k.value.forEach(N=>{var B;(B=N.metric)==null||B.forEach(F=>{J.value.add(F)})}),W.update(O,{orderOfList:g.value,boardWidth:M.value,trackingMetrics:[...J.value]});const we=await V_(H),ge={};we.forEach(N=>{const B=N.id;ge[B]=!0;const F=N.data(),Z=k.value.find(ie=>ie.id===B);if(Z){if(JSON.stringify(Z)!==JSON.stringify(F)){const ie=Xe(H,B);W.update(ie,Z)}}else{const ie=Xe(H,B);W.delete(ie)}}),k.value.forEach(N=>{if(!ge[N.id]){const B=Xe(H,N.id);W.set(B,N)}}),await W.commit();const{data:E,promise:I}=bi(Zn(Me,"Boards",i.params.boardUUID,"Tiles"),{once:!0});await I.value,k.value=E.value}catch(O){console.error("Error synchronizing tiles:",O)}},C=async()=>{k.value=A.value,M.value=m.value,u.value=!1,g.value=y},V=()=>{const O=[...A.value];k.value=O,y=g.value,m.value=M.value,u.value=!0},$=async()=>{var W;const O=Xe(Me,"Boards",i.params.boardUUID,"Tiles",p.value.id),H=Xe(Me,"Boards",i.params.boardUUID);try{const J=Mc(Me);(await Xr(O)).data()?J.update(O,p.value):J.set(O,p.value);const E=((W=(await Xr(H)).data())==null?void 0:W.orderOfList)||[];E.includes(p.value.id)||(E.push(p.value.id),J.update(H,{orderOfList:E})),await J.commit(),h.value=!1,a.value&&a.value.closeModal&&a.value.closeModal(),f.value=p.value;const I=Zn(Me,"Boards",i.params.boardUUID,"Tiles"),N=await V_(I);k.value=N.docs.map(Z=>Z.data());const B=new Set;k.value.forEach(Z=>{var ie;(ie=Z.metric)==null||ie.forEach(ee=>{B.add(ee)})});const F=Mc(Me);F.update(H,{boardWidth:M.value,trackingMetrics:Array.from(B)}),await F.commit()}catch(J){console.error("Error saving tile:",J)}},fe=()=>{a.value&&a.value.closeModal&&(h.value=!1,p.value=null,f.value=null,a.value.closeModal())},be=()=>{const O={...f.value};p.value=O,h.value=!0,a.value.showModal()},Ne=()=>{const O=J_(),H=Lz();k.value.push({id:O,title:H,description:"a sample description",image:"https://oldschool.runescape.wiki/images/Frog_%28Ruins_of_Camdozaal%29.png?6ae5e",type:"drop",needAny:!1,points:0,count:0,repeatable:!1}),g.value.push(O)},He=()=>{f.value&&(k.value=k.value.filter(O=>O.id!==f.value.id),g.value=U.value.map(O=>O.id),o.value.closeModal(),a.value.closeModal(),D())},ht=async()=>{var H;const O=Date.now();if(w.value&&(w.value.trackingMetrics=ae([...w.value.trackingMetrics,"overall","hitpoints"]),w.value.trackingMetrics.forEach(W=>{})),(H=w.value)!=null&&H.lastUpdate&&O-w.value.lastUpdate<36e5)return console.log("no need to update"),null;{const W=Mc(Me);w.value.lastUpdate=O,W.update(Xe(Me,"Boards",i.params.boardUUID),{lastUpdate:w.value.lastUpdate}),w.value.trackingMetrics.push("overall"),w.value.trackingMetrics.push("hitpoints"),await Promise.all(w.value.trackingMetrics.map(async J=>{const we=Xe(Me,"Boards",i.params.boardUUID,"Metrics",J);await _.competitions.getCompetitionDetails(v.value,J).then(ge=>{const E=vt(ge,O),I="t-"+O,N=E[I];W.set(we,{[O]:N,metric:J,timestamp:O},{merge:!0})}).catch(ge=>{console.error("Error fetching competition details:",ge)})})),await W.commit()}},vt=(O,H)=>{const W={},J="t-"+H;return W[J]={},O.participations.forEach(we=>{const ge=we.player.username,E=we.progress.gained;W[J][ge]={name:ge,gained:E,teamName:we.teamName}}),W};return(O,H)=>{var J,we;const W=vr("router-link");return R(),x(se,null,[b("section",null,[b("a",{class:"btn",onClick:it(ht,["prevent"])},[te(" Update all metrics"),HJ]),Ee(W,{icon:"",class:"btn",to:{name:"viewBoard",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te("visibility")]),_:1},8,["to"]),Ee(W,{icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te(" library_add_check ")]),_:1},8,["to"]),Ee(W,{icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te("group")]),_:1},8,["to"])]),b("section",zJ,[K(w)?(R(),x("h1",jJ,ne(K(w).name),1)):ce("",!0),te(" Board ID: "),b("code",null,ne(K(i).params.boardUUID),1),(J=K(w))!=null&&J.start?(R(),x(se,{key:1},[b("p",null," Starts: "+ne(new Date(K(w).start.seconds*1e3).toLocaleDateString(void 0,s.value)),1),b("code",null,"<t:"+ne(K(w).start.seconds)+":F>",1)],64)):ce("",!0),(we=K(w))!=null&&we.end?(R(),x(se,{key:2},[b("p",null," Ends: "+ne(new Date(K(w).end.seconds*1e3).toLocaleDateString(void 0,s.value)),1),b("code",null,"<t:"+ne(K(w).end.seconds)+":F>",1)],64)):ce("",!0)]),u.value?(R(),x("section",WJ,[b("button",{onClick:H[0]||(H[0]=ge=>L("remove"))},"-"),zt(b("input",{id:"widthInputElement",ref_key:"widthInputForm",ref:c,class:"widthInput","onUpdate:modelValue":H[1]||(H[1]=ge=>M.value=ge),type:"number",min:"3",max:"12",onBlur:H[2]||(H[2]=()=>{M.value=Math.min(M.value,12),M.value=Math.max(M.value,3)})},null,544),[[Ar,M.value]]),b("button",{onClick:H[3]||(H[3]=ge=>L("add"))},"+"),b("button",{submit:"",onClick:H[4]||(H[4]=ge=>D())},"save"),b("button",{outline:"",onClick:H[5]||(H[5]=ge=>C())},"cancel")])):(R(),x("section",qJ,[b("button",{class:"startEditing",onClick:H[6]||(H[6]=ge=>V())},"reorder / edit board")])),b("section",{ref_key:"el",ref:l,class:"board",style:Wn({"--width":M.value,position:"relative"})},[(R(!0),x(se,null,at(U.value,ge=>(R(),x("div",{class:Qs(["tile",{handle:u.value}]),key:ge.id},[b("img",{class:"tile--image",src:ge.image,onClick:()=>{h.value=!0,f.value=ge,be()}},null,8,GJ)],2))),128)),k.value.length<100&&u.value?(R(),x("button",{key:0,class:"add_tile",icon:"",onClick:H[7]||(H[7]=ge=>Ne()),style:Wn({order:U.value.length+1})}," add_box ",4)):ce("",!0)],4),Ee(Bz,{ref_key:"modalEle",ref:o},{header:lt(()=>{var ge;return[te(" Delete tile: "+ne((ge=f.value)==null?void 0:ge.title),1)]}),body:lt(()=>{var ge;return[te(" are you sure you want to delete the tile "+ne((ge=f.value)==null?void 0:ge.title),1)]}),controls:lt(()=>[b("button",{submit:"",onClick:He},"REMOVE"),b("button",{outline:"",onClick:H[8]||(H[8]=ge=>j())},"Cancel")]),_:1},512),Ee(BJ,{ref_key:"asideModalEle",ref:a,selectedTile:f.value,localTileData:p.value,onSave:$,onCancel:fe,onDelete:z},null,8,["selectedTile","localTileData"])],64)}}}),YJ=Li(KJ,[["__scopeId","data-v-45c72334"]]),YM=t=>(Kl("data-v-ab06ef92"),t=t(),Yl(),t),JJ={key:0},QJ={class:"left-column"},XJ={class:"img-container"},ZJ=["src"],eQ={key:0,icon:""},tQ=["innerHTML"],nQ={key:0},rQ=YM(()=>b("em",null,"This tile is repeatable",-1)),iQ=[rQ],sQ={class:"right-column"},oQ={class:"fs-1 title",style:{"margin-bottom":"var(--size-4)"}},aQ={key:0},lQ={key:0,class:"fs-4"},cQ={key:1,class:"fs-4"},uQ=YM(()=>b("div",null,null,-1)),hQ={key:0},dQ={key:1},fQ={key:0,class:"fs-4"},pQ={key:0,class:"metric-item"},mQ={class:"spread"},gQ=["value","max"],yQ={key:1,class:"metric-item"},_Q={class:"spread"},vQ=["value","max"],bQ={class:"totals"},EQ=Ut({__name:"ViewTileModal.vapor",props:{selectedTile:{},latestData:{},teams:{}},emits:["close"],setup(t,{expose:e}){const n=t,r=ae(),i=ct(()=>{var p,m;return((m=(p=n.selectedTile)==null?void 0:p.verified)==null?void 0:m.map(g=>g.teamName))||[]}),s=p=>{const m={};for(const y in p){const _=p[y],v=_.teamName,w=_.gained||0;m[v]?m[v]+=w:m[v]=w}return Object.keys(m).map(y=>{var _;return{teamName:y,icon:(_=n.teams.filter(v=>v.teamName==y)[0])==null?void 0:_.icon,total:m[y]}})},o=p=>{const m=ae(n.latestData[p]);if(!m)return console.error(`Metric ${p} not found`),null;const g=m.value.data;if(g==null)return null;const y=s(g).toSorted((_,v)=>_.teamName<v.teamName?-1:_.teamName>v.teamName?1:0);return{...m.value,totals:y}},a=p=>{const m=ae(0),g=o(p);if(!g||!g.totals||g.totals.length===0)return m.value;const y=g.totals.sort((_,v)=>v.total-_.total);return m.value=y[0].total,m.value},l=ct(()=>{const p={};return n.teams.forEach(m=>{var g,y;p[m.teamName]=((y=(g=n.selectedTile)==null?void 0:g.collected)==null?void 0:y.filter(_=>_.teamName===m.teamName))||[]}),p}),c=(p,m)=>{var y,_;return`${((_=(y=l.value[p])==null?void 0:y.filter(v=>v.id===m.id))==null?void 0:_.length)||0} `},u=(p,m)=>{var y,_;const g=((_=(y=l.value[p])==null?void 0:y.filter(v=>v.id===m.id))==null?void 0:_.length)||0;return{completed:g>=m.count,notStarted:g===0}};function h(p){return p.toLowerCase().split(" ").map(function(m){return m.charAt(0).toUpperCase()+m.slice(1)}).join(" ")}return e({showModal:()=>{r.value&&r.value.showModal()},closeModal:()=>{r.value&&r.value.close()}}),(p,m)=>{var y,_;const g=vr("font-awesome-icon");return R(),x("dialog",{class:"modal",ref_key:"dialog",ref:r},[n.selectedTile?(R(),x("div",JJ,[b("div",QJ,[b("div",XJ,[b("img",{src:n.selectedTile.image},null,8,ZJ)]),b("button",{onClick:m[0]||(m[0]=it(v=>p.$emit("close"),["prevent"]))},"close"),(R(!0),x(se,null,at(p.teams,v=>(R(),x("div",{key:v.teamName},[i.value&&i.value.includes(v.teamName)?(R(),x("span",eQ," check ")):ce("",!0),v!=null&&v.icon?(R(),qe(g,{key:1,icon:["fas",v.icon]},null,8,["icon"])):ce("",!0),te(" "+ne(v.teamName),1)]))),128)),b("div",{innerHTML:n.selectedTile.description},null,8,tQ),b("small",null," tile id: "+ne((y=n.selectedTile)==null?void 0:y.id),1),b("div",null,"Points: "+ne(n.selectedTile.points),1),n.selectedTile.repeatable?(R(),x("div",nQ,iQ)):ce("",!0)]),b("div",sQ,[b("h2",oQ,ne(n.selectedTile.title),1),((_=n.selectedTile)==null?void 0:_.type)=="drop"?(R(),x("div",aQ,[n.selectedTile.needAny===!1?(R(),x("h2",lQ," Get the following items: ")):(R(),x("h2",cQ," Get a total of "+ne(n.selectedTile.count)+" items: ",1)),b("div",{class:"drop-table",style:Wn({"--_width":p.teams.length})},[uQ,(R(!0),x(se,null,at(p.teams,v=>(R(),x("div",null,[v!=null&&v.icon?(R(),qe(g,{key:0,icon:["fas",v.icon]},null,8,["icon"])):ce("",!0),b("template",null,[te(ne(v.teamName),1)])]))),256)),(R(!0),x(se,null,at(n.selectedTile.drops,v=>(R(),x(se,null,[b("div",null,[te(ne(v.name)+" ",1),v.min!==v.max?(R(),x("small",hQ,[n.selectedTile.needAny&&v.min&&v.min?(R(),x(se,{key:0},[te("min: "+ne(v.min),1)],64)):ce("",!0),n.selectedTile.needAny&&v.max&&v.max>0?(R(),x(se,{key:1},[te(" max: "+ne(v.max),1)],64)):ce("",!0)])):ce("",!0),v.min==v.max&&v.min!=0?(R(),x("small",dQ," exactly: "+ne(v.min),1)):ce("",!0)]),(R(!0),x(se,null,at(p.teams,w=>(R(),x("div",{class:Qs(u(w.teamName,v))},[b("span",null,ne(c(w.teamName,v)),1),n.selectedTile.needAny===!1?(R(),x(se,{key:0},[te("/ "+ne(v.count),1)],64)):ce("",!0)],2))),256))],64))),256))],4)])):ce("",!0),b("div",null,[["kc","exp"].includes(n.selectedTile.type)?ce("",!0):(R(),x("h3",fQ," Metric "))]),b("div",null,[(R(!0),x(se,null,at(n.selectedTile.metric,v=>{var w,S;return R(),x(se,null,[b("h3",{class:"metric-list",onClick:m[1]||(m[1]=it(A=>{const P=A.target;console.log(P.classList.toggle("open-list"))},["prevent"]))},[["kc","exp"].includes(n.selectedTile.type)?(R(),x(se,{key:0},[te(ne(K(Uc)(n.selectedTile.count)),1)],64)):ce("",!0),te(" "+ne(h(v.replaceAll("_"," ")))+" ",1),["kc","exp"].includes(n.selectedTile.type)?(R(),x(se,{key:1},[te(ne(h(n.selectedTile.type)),1)],64)):ce("",!0)]),["kc","exp"].includes(n.selectedTile.type)?(R(),x("div",pQ,[(R(!0),x(se,null,at((w=o(v))==null?void 0:w.totals,A=>(R(),x("div",null,[b("div",mQ,[A!=null&&A.icon?(R(),qe(g,{key:0,icon:["fas",A.icon],title:A.teamName},null,8,["icon","title"])):(R(),x(se,{key:1},[te(ne(A.teamName),1)],64)),b("progress",{min:"0",value:A.total,max:n.selectedTile.count},null,8,gQ),b("p",{class:Qs(["totals",{completed:A.total>=n.selectedTile.count,notStarted:A.total==0}])},ne(A.total>=n.selectedTile.count?K(Uc)(n.selectedTile.count)+"+":K(Uc)(A.total))+ne(" "+h(n.selectedTile.type)),3)])]))),256))])):(R(),x("div",yQ,[(R(!0),x(se,null,at((S=o(v))==null?void 0:S.totals,A=>(R(),x("div",null,[b("div",_Q,[A!=null&&A.icon?(R(),qe(g,{key:0,icon:["fas",A.icon],title:A.teamName},null,8,["icon","title"])):(R(),x(se,{key:1},[te(ne(A.teamName),1)],64)),b("progress",{min:"0",value:A.total!=0?A.total+a(v)*.05:0,max:a(v)+a(v)*.1},null,8,vQ),b("p",bQ,ne(K(Uc)(A.total)),1)])]))),256))]))],64)}),256))])])])):ce("",!0)],512)}}}),TQ=Li(EQ,[["__scopeId","data-v-ab06ef92"]]),wQ={class:"fs-2"},SQ={style:{display:"flex","flex-direction":"row",gap:"var(--gap)","font-size":"var(--fs-4)"}},IQ=["onClick"],AQ=["src"],CQ=Ut({__name:"viewBoard.vapor",async setup(t){var A;let e,n;const r=([e,n]=ir(()=>Di()),e=await e,n(),e),i=fo(),s=lc(),{data:o,promise:a}=Ra(Xe(Me,"Boards",i.params.boardUUID)),{data:l,promise:c}=bi(Zn(Me,"Boards",i.params.boardUUID,"Metrics"));(A=o.value)!=null&&A.name&&(s.value=o.value.name+" - Bingo Bongo");const{data:u,promise:h}=bi(Zn(Me,"Boards",i.params.boardUUID,"Tiles")),{data:d,promise:f}=bi(Zn(Me,"Boards",i.params.boardUUID,"Groups"));[e,n]=ir(()=>Promise.all([a.value,c.value,f.value,h.value])),await e,n();const p=ae(u.value),m=ct(()=>{const P={};return d.value&&u.value&&(d.value.forEach(M=>{P[M.teamName]=0}),u.value.forEach(M=>{M.verified&&M.verified.forEach(k=>{d.value.some(z=>z.teamName===k.teamName)&&(P[k.teamName]+=M.points)})})),P}),g=ct(()=>{if(p.value===void 0)return[];if(!o.value||!o.value.orderOfList)return p.value.map(M=>M);const P=o.value.orderOfList;return p.value.toSorted((M,k)=>P.indexOf(M.id)-P.indexOf(k.id))});window.addEventListener("keydown",P=>{switch(P.key){case"Escape":_.value&&_.value.closeModal&&(y.value={},w());break}});const y=ae(null),_=ae(void 0),v=()=>{var P;(P=_.value)==null||P.showModal()},w=()=>{var P;y.value=null,(P=_.value)==null||P.closeModal()};function S(P){const M={};return P.forEach(k=>{M[k.metric]={metric:k.metric,data:k[k.timestamp]}}),M}return(P,M)=>{var Y,j,U,L,D,C;const k=vr("router-link"),z=vr("font-awesome-icon");return K(o)?(R(),x(se,{key:0},[b("section",null,[((Y=K(r))==null?void 0:Y.uid)==((j=K(o))==null?void 0:j.ownerID)?(R(),qe(k,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te("edit")]),_:1},8,["to"])):ce("",!0),((U=K(r))==null?void 0:U.uid)==((L=K(o))==null?void 0:L.ownerID)?(R(),qe(k,{key:1,icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te(" library_add_check ")]),_:1},8,["to"])):ce("",!0),((D=K(r))==null?void 0:D.uid)==((C=K(o))==null?void 0:C.ownerID)?(R(),qe(k,{key:2,icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te("group")]),_:1},8,["to"])):ce("",!0)]),b("h1",wQ,ne(K(o).name),1),b("div",SQ,[(R(!0),x(se,null,at(K(d),V=>(R(),x("div",null,[V!=null&&V.icon?(R(),qe(z,{key:0,icon:["fas",V.icon],title:V.teamName},null,8,["icon","title"])):(R(),x(se,{key:1},[te(ne(V.teamName),1)],64)),te(": "+ne(m.value[V.teamName]),1)]))),256))]),b("section",{ref:"el",class:"board",style:Wn({"--width":K(o).boardWidth,position:"relative"})},[(R(!0),x(se,null,at(g.value,V=>(R(),x("div",{class:"tile",style:Wn({"--_image":`url('${V.image}')`}),key:V.id,onClick:it(()=>{y.value=V,v()},["prevent"])},[b("img",{class:"tile--image",src:V.image},null,8,AQ)],12,IQ))),128))],4),Ee(TQ,{ref_key:"asideModalEle",ref:_,onClose:w,selectedTile:y.value,latestData:S(K(l)),teams:K(d)},null,8,["selectedTile","latestData","teams"])],64)):ce("",!0)}}}),kQ=Li(CQ,[["__scopeId","data-v-9c1c2feb"]]),gb=t=>(Kl("data-v-a2279517"),t=t(),Yl(),t),RQ={class:"fs-2"},OQ={ref:"el"},NQ=gb(()=>b("h3",null,"Description:",-1)),MQ=["innerHTML"],PQ=gb(()=>b("h3",null,"Drops:",-1)),DQ=gb(()=>b("h3",null,"Metrics:",-1)),xQ=Ut({__name:"viewBoardList.vapor",async setup(t){var m;let e,n;const r=([e,n]=ir(()=>Di()),e=await e,n(),e),i=fo(),s=lc(),{data:o,promise:a}=Ra(Xe(Me,"Boards",i.params.boardUUID));(m=o.value)!=null&&m.name&&(s.value=o.value.name+" - Bingo Bongo");const{data:l,promise:c}=bi(Zn(Me,"Boards",i.params.boardUUID,"Tiles"));[e,n]=ir(()=>Promise.all([a.value,c.value])),await e,n();const u=ae(l.value),h=ct(()=>{if(u.value===void 0)return[];if(!o.value||!o.value.orderOfList)return u.value.map(y=>y);const g=o.value.orderOfList;return u.value.toSorted((y,_)=>g.indexOf(y.id)-g.indexOf(_.id))});window.addEventListener("keydown",g=>{switch(g.key){case"Escape":f.value&&f.value.closeModal&&(d.value={},p());break}});const d=ae(null),f=ae(void 0),p=()=>{var g;d.value=null,(g=f.value)==null||g.closeModal()};return(g,y)=>{var v,w,S,A,P,M;const _=vr("router-link");return K(o)?(R(),x(se,{key:0},[b("section",null,[((v=K(r))==null?void 0:v.uid)==((w=K(o))==null?void 0:w.ownerID)?(R(),qe(_,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te("edit")]),_:1},8,["to"])):ce("",!0),((S=K(r))==null?void 0:S.uid)==((A=K(o))==null?void 0:A.ownerID)?(R(),qe(_,{key:1,icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te(" library_add_check ")]),_:1},8,["to"])):ce("",!0),((P=K(r))==null?void 0:P.uid)==((M=K(o))==null?void 0:M.ownerID)?(R(),qe(_,{key:2,icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te("group")]),_:1},8,["to"])):ce("",!0)]),b("h1",RQ,ne(K(o).name),1),b("section",OQ,[(R(!0),x(se,null,at(h.value,k=>(R(),x("div",{style:Wn({"--_image":`url('${k.image}')`}),key:k.id},[b("h2",null,ne(k.title),1),NQ,b("div",{innerHTML:k.description},null,8,MQ),PQ,(R(!0),x(se,null,at(k.drops,z=>(R(),x("div",null,ne(z.name),1))),256)),DQ,(R(!0),x(se,null,at(k.metric,z=>(R(),x("div",null,ne(z),1))),256))],4))),128))],512)],64)):ce("",!0)}}}),LQ=Li(xQ,[["__scopeId","data-v-a2279517"]]),VQ=xp('<h1 class="fs-4">Typography</h1><hr><h1 class="fs-3">Heading level 1</h1><h2 class="fs-2">Heading level 2</h2><h3 class="fs-1">Heading level 3</h3><h4>Heading level 4</h4><h5>Heading level 5</h5><h2>Paragraph</h2><p> Lorem ipsum dolor sit amet, <strong>consectetur</strong> adipiscing elit. In id risus quis purus mollis lobortis vel ac tellus. Nam pharetra lorem quis dui commodo dapibus. Curabitur aliquet sapien vitae ligula pretium sollicitudin. Sed sed magna eu risus placerat gravida non sit amet augue. Morbi volutpat lobortis imperdiet. Sed elit purus, commodo a mi in, condimentum sagittis urna. Etiam condimentum pharetra cursus. Aliquam erat volutpat. In vel diam nulla. Praesent faucibus augue quis dui vehicula, a consequat est fringilla. Sed nec nisi fermentum, maximus nunc ac, hendrerit lorem. Proin mollis metus in erat dictum egestas. Proin nec ipsum viverra, scelerisque nisi in, faucibus nulla. </p><p> Aliquam erat volutpat. Donec sagittis libero ac justo suscipit laoreet. Suspendisse ut sem vel augue vulputate sodales blandit sit amet metus. Quisque porta consectetur efficitur. Duis venenatis nisl in mollis convallis. Pellentesque quis accumsan orci. Nulla porta arcu quis laoreet sagittis. Aliquam erat volutpat. Suspendisse sagittis, turpis vel posuere suscipit, dolor nunc sodales est, quis cursus dui elit vel nisl. </p><p> Nunc accumsan molestie nisl non malesuada. In egestas tellus lectus, nec venenatis tellus pulvinar vel. Fusce consectetur sodales ante, sed vehicula mauris pulvinar non. Cras tempor ante nec nibh iaculis aliquet. In quis velit non dui dapibus tempus quis sed velit. Morbi a ornare sem. Maecenas ornare molestie ex, sed maximus lorem viverra at. In tincidunt vel purus et suscipit. Aenean aliquam neque et ipsum volutpat, eu laoreet justo vestibulum. Maecenas quam turpis, convallis id nibh efficitur, interdum volutpat elit. Suspendisse potenti. Nulla in vulputate massa. </p><p> Quisque laoreet tincidunt massa, non pulvinar eros euismod sit amet. Maecenas non lorem vitae lorem condimentum posuere. Maecenas ac lectus elit. Nullam feugiat scelerisque interdum. Nullam volutpat tincidunt viverra. Suspendisse egestas venenatis orci. Nunc vehicula ut dolor aliquet finibus. </p><p> Donec tempus vestibulum odio vel consectetur. Donec sed feugiat tortor. Mauris iaculis nunc in orci suscipit, vel egestas orci pulvinar. In dapibus tortor ornare, eleifend eros eu, suscipit neque. Morbi quis pellentesque turpis, sit amet imperdiet augue. Mauris porttitor congue imperdiet. Quisque aliquet id quam a placerat. Fusce maximus in nibh vel ultricies. </p><p> Normal, <abbr title="Abbreviations">abbr</abbr>, <del>del</del>, <dfn>dfn</dfn>, <em>em</em>, <ins>ins</ins>, <mark>mark</mark>, <s>strike through</s>, <small>small</small>, <strong>strong</strong>, <sub>sub</sub>, <sup>sup</sup>, <u>u</u></p><h2>Links</h2>',15),FQ=b("p",null,[te(" These are links: "),b("a",{href:"?2017-06-2703%3A30%3A17",target:"_blank",onclick:"return false;"},"never visited link (just don't click or it will becomes visited)"),te(", "),b("a",{href:"."},"visited link"),te(". Mouse hover to see effects. ")],-1),UQ=xp("<h2>Lists</h2><h3>Unordered list</h3><ul><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ul><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ul></li><li>List item</li><li>List item</li><li>List item</li></ul><h3>Ordered list</h3><ol><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ol><li>Nested List Item</li><li>Nested List Item</li><li>Nested List Item</li></ol></li><li>List item</li><li>List item</li><li>List item</li></ol><h3>Mixed</h3><ul><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ol><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ol></li><li>List item</li><li>List item</li><li>List item</li></ul><ol><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ul><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ol><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ol><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ul><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ul></li></ol></li></ol></li><li>Nested List Item</li><li>Nested List Item</li></ul></li><li>List item</li><li>List item</li><li>List item</li></ol><h3>Definition list</h3><dl><dt>Definition list</dt><dd> Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </dd><dt>Lorem ipsum dolor sit amet</dt><dd> Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </dd></dl><h3>Details &amp; Summary</h3>",11),BQ=b("details",null,[b("summary",null,"Question 1"),b("p",null,[b("strong",null,"Pellentesque habitant morbi tristique"),te(" senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. "),b("em",null,"Aenean ultricies mi vitae est."),te(" Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, "),b("code",null,"commodo vitae"),te(", ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. "),b("a",{href:"#",target:"_blank",onclick:"return false;"},"Donec non enim"),te(" in turpis pulvinar facilisis. Ut felis. ")]),b("details",null,[b("summary",null,"Related documents"),b("ul",null,[b("li",null,[b("a",{href:"#",onclick:"return false;"},"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.")]),b("li",null,[b("a",{href:"#",onclick:"return false;"},"Aliquam tincidunt mauris eu risus.")]),b("li",null,[b("a",{href:"#",onclick:"return false;"},"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.")]),b("li",null,[b("a",{href:"#",onclick:"return false;"},"Aliquam tincidunt mauris eu risus.")])])])],-1),$Q=xp(`<details><summary>Question 2</summary><p> Duis consequat metus et eros rutrum, interdum facilisis urna interdum. Etiam facilisis diam in libero varius ultricies id id est. Sed lacinia pellentesque sem vel sagittis. </p></details><h2>Blockquote</h2><blockquote> Those people who think they know everything are a great annoyance to those of us who do.<cite>Isaac Asimov</cite></blockquote><h2>Code</h2><p> This is inline code <code>&lt;div&gt;div element&lt;/div&gt;</code>. This is sample output <samp>sample</samp> And below is block code. </p><pre>&lt;div&gt;
    div element
    &lt;p&gt;paragraph&lt;/p&gt;
&lt;/div&gt;</pre><p> The input keyboard <kbd>Ctrl</kbd>+<kbd>S</kbd>. This is variable: <var>y</var> = <var>m</var><var>x</var> + <var>b</var></p><h2>Table</h2><table><thead><tr><th>Table heading</th><th>Table heading</th></tr></thead><tfoot><tr><th>Table footer</th><th>Table footer</th></tr></tfoot><tbody><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr></tbody></table><h2>Form elements</h2>`,10),HQ=b("legend",null,"Input types",-1),zQ=b("p",null,[b("label",{for:"input-type-color"},"Input Color"),b("br"),b("input",{id:"input-type-color",type:"color"})],-1),jQ=b("p",null,[b("label",{for:"input-type-number"},"Input Number"),b("br"),b("input",{id:"input-type-number",type:"number"})],-1),WQ=b("label",{for:"input-type-range"},"Input Range",-1),qQ=b("br",null,null,-1),GQ=b("label",{for:"input-type-range"},"Progress",-1),KQ=b("br",null,null,-1),YQ=["value"],JQ=b("p",null,[b("label",{for:"input-type-text"},"Input Text"),b("br"),b("input",{id:"input-type-text",type:"text"})],-1),QQ=b("p",null,[b("label",{for:"input-type-url"},"Input Url"),b("br"),b("input",{id:"input-type-url",type:"url"})],-1),XQ=xp('<p><label><input type="radio" name="input-radio" value="1"> Input radio option 1</label><br><label><input type="radio" name="input-radio" value="2"> Input radio option 2</label></p><p><label><input type="radio" name="input-radio-disabled" value="1" disabled> Input radio option 1</label><br><label><input type="radio" name="input-radio-disabled" value="2" disabled> Input radio option 2</label></p><p><label><input type="checkbox"> Input checkbox 1</label><br><label><input type="checkbox"> Input checkbox 2</label></p>',3),ZQ=b("p",null,[b("label",null,[b("input",{type:"checkbox",toggle:""}),te(" Input checkbox 1")]),b("br"),b("label",null,[b("input",{type:"checkbox",toggle:""}),te(" Input checkbox 2")])],-1),eX=b("p",null,[b("label",null,[b("input",{type:"checkbox",disabled:""}),te(" Input checkbox 1")]),b("br"),b("label",null,[b("input",{type:"checkbox",disabled:""}),te(" Input checkbox 2")])],-1),tX=b("label",{for:"input-textarea"},"Textarea",-1),nX=b("br",null,null,-1),rX=b("label",{for:"input-select"},"Select box",-1),iX=b("br",null,null,-1),sX=b("label",{for:"input-select-multiple"},"Select multiple",-1),oX=b("br",null,null,-1),aX=b("p",null,[b("label",{for:"input-select-disabled"},"Select disabled"),b("br"),b("select",{id:"input-select-disabled",disabled:""},[b("option",null,"1"),b("option",null,"2"),b("option",null,"3")])],-1),lX=b("p",null,[b("button",null,"Normal button"),b("button",{submit:"",onclick:"return false;"},"Submit button"),b("button",{reset:"",onclick:"return false;"},"Reset button"),b("button",{disabled:""},"Disabled button")],-1),cX=b("p",null,[b("input",{type:"button",value:"Input normal button"}),b("input",{type:"button",submit:"",value:"Input submit button",onclick:"return false;"}),b("input",{type:"button",reset:"",value:"Input reset button",onclick:"return false;"}),b("input",{type:"button",disabled:"",value:"Input disabled button"})],-1),uX=b("p",null,[b("a",{class:"button",href:"#",onclick:"return false;"},"Anchor button"),b("a",{class:"button",submit:"",href:"#",onclick:"return false;"},"Anchor disabled button"),b("a",{class:"button",reset:"",href:"#",onclick:"return false;"},"Anchor disabled button"),b("a",{class:"button",disabled:"",href:"#",onclick:"return false;"},"Anchor disabled button")],-1),hX=b("p",null,[te("Thanks to "),b("a",{href:"http://rundiz.com"},"rundiz.com")],-1),dX=Ut({__name:"colorPallete.vapor",setup(t){const e=ae(),n=ae(),r=ae(),i=ae(10),s=ae(["option 1","option 2","option 3"]);return(o,a)=>(R(),x(se,null,[VQ,FQ,UQ,BQ,$Q,b("form",null,[b("fieldset",null,[HQ,zQ,jQ,b("p",null,[WQ,qQ,zt(b("input",{id:"input-type-range",type:"range","onUpdate:modelValue":a[0]||(a[0]=l=>i.value=l)},null,512),[[Ar,i.value]])]),b("p",null,[GQ,KQ,b("progress",{id:"progress",max:"100",value:i.value},null,8,YQ)]),JQ,QQ]),XQ,ZQ,eX,b("p",null,[tX,nX,Ee(GM,{modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value=l)},null,8,["modelValue"])]),b("p",null,[rX,iX,Ee(K(Yi),{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=l=>n.value=l),options:s.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])]),b("p",null,[sX,oX,Ee(K(Yi),{max:3,modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=l=>r.value=l),options:s.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])]),aX,lX,cX,uX]),hX],64))}}),JM=t=>(Kl("data-v-8810900f"),t=t(),Yl(),t),fX=JM(()=>b("div",null,[b("h1",null,"teams")],-1)),pX=JM(()=>b("span",{icon:""},"sync",-1)),mX=Ut({__name:"teamViewer.vapor",async setup(t){let e,n;const r=fo(),i=([e,n]=ir(()=>Di()),e=await e,n(),e),{data:s,promise:o}=Ra(Xe(Me,"Boards",r.params.boardUUID)),{data:a,promise:l}=bi(Zn(Me,"Boards",r.params.boardUUID,"Groups")),c=f=>"https://oldschool.runescape.wiki/images/"+(f.charAt(0).toUpperCase()+f.slice(1))+"_chat_badge.png";[e,n]=ir(()=>Promise.all([l.value,o.value])),await e,n();const u=new G0({apiKey:"zpyy03zybxt0oiznjw6e1mz2",userAgent:"_Odinh"}),h=async()=>{const f=Mc(Me);try{const p=await u.competitions.getCompetitionDetails(parseInt(r.params.boardUUID)),m=d(p);a.value.forEach(g=>{Object.keys(m).findIndex(_=>_===g.teamName)!==-1?f.update(Xe(Me,"Boards",r.params.boardUUID,"Groups",g.id),{...m[g.teamName]}):f.delete(Xe(Me,"Boards",r.params.boardUUID,"Groups",g.id))}),Object.values(m).forEach(g=>{if(a.value.findIndex(_=>_.teamName===g.teamName)===-1){const _=Xe(Zn(Me,"Boards",r.params.boardUUID,"Groups"));f.set(_,g)}}),await f.commit()}catch(p){console.error("Error synchronizing data:",p)}},d=f=>{var g;const p=ae(),m=ae({});return p.value=f.participations,(g=p.value)==null||g.map(y=>{m.value[y.teamName]={teamName:y.teamName,players:[],stats:null}}),p.value.map(y=>{delete y.player.ehb,delete y.player.exp,delete y.player.ehp,m.value[y.teamName].players=[...m.value[y.teamName].players,m.value[y.teamName].players[y.player.username]={...y.player}]}),m.value};return(f,p)=>{var g,y,_,v;const m=vr("router-link");return R(),x(se,null,[b("section",null,[((g=K(i))==null?void 0:g.uid)==((y=K(s))==null?void 0:y.ownerID)?(R(),qe(m,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:K(r).params.boardUUID}}},{default:lt(()=>[te("edit")]),_:1},8,["to"])):ce("",!0),((_=K(i))==null?void 0:_.uid)==((v=K(s))==null?void 0:v.ownerID)?(R(),qe(m,{key:1,icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:K(r).params.boardUUID}}},{default:lt(()=>[te(" library_add_check ")]),_:1},8,["to"])):ce("",!0),Ee(m,{icon:"",class:"btn",to:{name:"viewBoard",params:{boardUUID:K(r).params.boardUUID}}},{default:lt(()=>[te("visibility")]),_:1},8,["to"])]),fX,b("button",{onClick:it(h,["prevent"])},[te("synch teams"),pX]),b("div",{class:"teams",style:Wn({"--width":K(a).length})},[(R(!0),x(se,null,at(K(a),w=>(R(),x("div",{key:w.id},[b("h2",null,ne(w.teamName),1),b("ul",null,[(R(!0),x(se,null,at(w.players,S=>(R(),x("li",{key:S.id,class:Qs({hasHelmet:S.type!=="regular"}),style:Wn({"--marker":"url('"+c(S.type)+"')   "})},ne(S.displayName),7))),128))])]))),128))],4)],64)}}}),gX=Li(mX,[["__scopeId","data-v-8810900f"]]),yb=t=>(Kl("data-v-33b05865"),t=t(),Yl(),t),yX={key:0},_X={class:"left-column"},vX={class:"img-container"},bX=["src"],EX={class:"verifyTile"},TX={key:0,icon:""},wX=["onClick"],SX=["innerHTML"],IX={key:0},AX=yb(()=>b("em",null,"This tile is repeatable",-1)),CX=[AX],kX={class:"right-column"},RX={class:"fs-1 title",style:{"margin-bottom":"var(--size-4)"}},OX={key:0},NX={key:0,class:"fs-4"},MX={key:1,class:"fs-4"},PX=yb(()=>b("div",null,null,-1)),DX=["onClick"],xX={class:"fs-2"},LX={class:"controls"},VX={class:"mini__team-list"},FX={class:"mini__team-header"},UX={class:"mini__team-icon"},BX={class:"mini__team-total"},$X={class:"mini__team-player-entry"},HX=["onClick"],zX=yb(()=>b("h2",null,"Add a drop:",-1)),jX=Ut({__name:"verifyTileModal.vapor",props:{selectedTile:{},teams:{}},emits:["close"],setup(t,{expose:e,emit:n}){const r=t,i=fo(),s=ae(),o=ae(),a=ae(),l=ae(null),c=ae(null),u=ae({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),h=()=>{var U;return(U=s.value)==null?void 0:U.showModal()},d=()=>{var U;return(U=s.value)==null?void 0:U.close()},f=U=>{var L;j.value=U,(L=o.value)==null||L.showModal()},p=()=>{var U;return(U=o.value)==null?void 0:U.close()},m=()=>{var U;return(U=a.value)==null?void 0:U.showModal()},g=()=>{var U;return(U=a.value)==null?void 0:U.close()},y=ct(()=>l.value?l.value.players.map(U=>U.displayName):[]),_=async()=>{if(!r.selectedTile||!l.value||!c.value||!j.value)return;const U={playerName:c.value,timestamp:new Date,teamName:l.value.teamName,id:j.value.id},L=r.selectedTile.collected?{...r.selectedTile,collected:[...r.selectedTile.collected,U]}:{...r.selectedTile,collected:[U]};await Qo(Xe(Me,"Boards",i.params.boardUUID,"Tiles",r.selectedTile.id),L),l.value=null,c.value=null},v=async U=>{var C;if(!r.selectedTile)return;const L=((C=r.selectedTile.collected)==null?void 0:C.filter(V=>V!==U))||[],D={...r.selectedTile,collected:L};await Qo(Xe(Me,"Boards",i.params.boardUUID,"Tiles",r.selectedTile.id),D)},w=ct(()=>{const U={};return r.teams.forEach(L=>{var D,C;U[L.teamName]=((C=(D=r.selectedTile)==null?void 0:D.collected)==null?void 0:C.filter(V=>V.teamName===L.teamName))||[]}),U}),S=ct(()=>{var U,L;return((L=(U=r.selectedTile)==null?void 0:U.verified)==null?void 0:L.map(D=>D.teamName))||[]}),A=async({teamName:U})=>{if(!r.selectedTile)return;const D=S.value.includes(U)?(r.selectedTile.verified||[]).filter(C=>C.teamName!==U):[...r.selectedTile.verified||[],{teamName:U,timestamp:new Date}];await Qo(Xe(Me,"Boards",i.params.boardUUID,"Tiles",r.selectedTile.id),{...r.selectedTile,verified:D})},P=U=>new Date(U*1e3).toLocaleDateString(void 0,u.value),M=(U,L)=>{var C,V;const D=((V=(C=w.value[U.teamName])==null?void 0:C.filter($=>$.id===L.id))==null?void 0:V.length)||0;return{completed:D>=L.count,notStarted:D===0}},k=(U,L)=>{var C,V;return`${((V=(C=w.value[U.teamName])==null?void 0:C.filter($=>$.id===L.id))==null?void 0:V.length)||0}`},z=U=>{var L;return((L=w.value[U.teamName])==null?void 0:L.length)||0},Y=U=>w.value[U.teamName]||[],j=ae(null);return e({showModal:h,closeModal:d}),(U,L)=>(R(),x(se,null,[b("dialog",{class:"modal",ref_key:"dialog",ref:s},[r.selectedTile?(R(),x("div",yX,[b("div",_X,[b("div",vX,[b("img",{src:r.selectedTile.image},null,8,bX)]),b("div",EX,[(R(!0),x(se,null,at(U.teams,D=>(R(),x("div",{key:D.teamName},[S.value&&S.value.includes(D.teamName)?(R(),x("span",TX," check ")):ce("",!0),te(" "+ne(D.teamName)+" ",1),b("button",{onClick:C=>A({teamName:D.teamName})},"verify",8,wX)]))),128))]),b("button",{onClick:L[0]||(L[0]=it(D=>U.$emit("close"),["prevent"]))},"close"),b("div",{innerHTML:r.selectedTile.description},null,8,SX),b("small",null," tile id: "+ne(r.selectedTile.id),1),b("div",null,"Points: "+ne(r.selectedTile.points),1),r.selectedTile.repeatable?(R(),x("div",IX,CX)):ce("",!0)]),b("div",kX,[b("h2",RX,ne(r.selectedTile.title),1),r.selectedTile.type=="drop"?(R(),x("div",OX,[r.selectedTile.needAny===!1?(R(),x("h2",NX," Get the following items: ")):(R(),x("h2",MX," Get a total of "+ne(r.selectedTile.count)+" items: ",1)),b("div",{class:"drop-table",style:Wn({"--_width":U.teams.length})},[PX,(R(!0),x(se,null,at(U.teams,D=>(R(),x("div",null,ne(D.teamName),1))),256)),(R(!0),x(se,null,at(r.selectedTile.drops,D=>(R(),x(se,null,[b("div",null,[b("button",{icon:"",onClick:it(C=>f(D),["prevent"])}," playlist_add",8,DX),te(ne(D.name),1)]),(R(!0),x(se,null,at(U.teams,C=>(R(),x("div",{class:Qs(M(C,D))},[b("span",null,ne(k(C,D)),1),r.selectedTile.needAny===!1?(R(),x(se,{key:0},[te("/ "+ne(D.count),1)],64)):ce("",!0)],2))),256))],64))),256))],4)])):ce("",!0)])])):ce("",!0)],512),b("dialog",{ref_key:"mini",ref:o,class:"mini"},[j.value?(R(),x(se,{key:0},[b("h2",xX,ne(j.value.name)+":",1),b("div",LX,[b("button",{onClick:L[1]||(L[1]=it(D=>m(),["prevent"]))},"Add drop"),b("button",{onClick:L[2]||(L[2]=D=>p())},"Close")]),(R(!0),x(se,null,at(U.teams,D=>{var C;return R(),x("div",VX,[b("div",FX,[b("div",UX,ne(D.teamName),1),b("div",BX,[te(ne(z(D))+" ",1),(C=r.selectedTile)!=null&&C.needAny?ce("",!0):(R(),x(se,{key:0},[te("/ "+ne(j.value.count),1)],64))])]),(R(!0),x(se,null,at(Y(D),V=>(R(),x("div",$X,[te(ne(V.playerName)+": "+ne(P(V.timestamp.seconds))+" ",1),b("div",{icon:"",class:"mini__team-player-remove",onClick:$=>v(V)}," delete ",8,HX)]))),256))])}),256))],64)):ce("",!0)],512),b("dialog",{ref_key:"micro",ref:a,class:"micro"},[zX,Ee(K(Yi),{modelValue:l.value,"onUpdate:modelValue":L[3]||(L[3]=D=>l.value=D),options:U.teams,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,label:"teamName",placeholder:"Choose a team"},null,8,["modelValue","options"]),Ee(K(Yi),{modelValue:c.value,"onUpdate:modelValue":L[4]||(L[4]=D=>c.value=D),options:y.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a team"},null,8,["modelValue","options"]),b("button",{onClick:L[5]||(L[5]=D=>_())},"add"),b("button",{onClick:L[6]||(L[6]=D=>g())},"close")],512)],64))}}),WX=Li(jX,[["__scopeId","data-v-33b05865"]]),qX={class:"fs-2"},GX=["onClick"],KX=["src"],YX=Ut({__name:"moderateBoard.vapor",async setup(t){var _;let e,n;const r=([e,n]=ir(()=>Di()),e=await e,n(),e),i=fo(),s=lc(),{data:o,promise:a}=Ra(Xe(Me,"Boards",i.params.boardUUID));(_=o.value)!=null&&_.name&&(s.value=o.value.name+" - Bingo Bongo");const{data:l,promise:c}=bi(Zn(Me,"Boards",i.params.boardUUID,"Tiles")),{data:u,promise:h}=bi(Zn(Me,"Boards",i.params.boardUUID,"Groups"));[e,n]=ir(()=>Promise.all([a.value,h.value,c.value])),await e,n();const d=ae(l.value),f=ct(()=>{if(d.value===void 0)return[];if(!o.value||!o.value.orderOfList)return d.value.map(w=>w);const v=ae(o.value.orderOfList);return d.value.toSorted((w,S)=>v.value.indexOf(w.id)-v.value.indexOf(S.id))}),p=ae(null);NA(()=>{var S;const v=(S=p.value)==null?void 0:S.id,w=d.value.find(A=>A.id===v);w&&(p.value=w)});const m=ae(void 0),g=()=>{var v;(v=m.value)==null||v.showModal()},y=()=>{var v;p.value=null,(v=m.value)==null||v.closeModal()};return(v,w)=>{var A,P,M,k,z,Y;const S=vr("router-link");return K(o)?(R(),x(se,{key:0},[b("section",null,[((A=K(r))==null?void 0:A.uid)==((P=K(o))==null?void 0:P.ownerID)?(R(),qe(S,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te("edit")]),_:1},8,["to"])):ce("",!0),((M=K(r))==null?void 0:M.uid)==((k=K(o))==null?void 0:k.ownerID)?(R(),qe(S,{key:1,icon:"",class:"btn",to:{name:"viewBoard",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te("visibility")]),_:1},8,["to"])):ce("",!0),((z=K(r))==null?void 0:z.uid)==((Y=K(o))==null?void 0:Y.ownerID)?(R(),qe(S,{key:2,icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:K(i).params.boardUUID}}},{default:lt(()=>[te("group")]),_:1},8,["to"])):ce("",!0)]),b("h1",qX,ne(K(o).name),1),b("section",{ref:"el",class:"board",style:Wn({"--width":K(o).boardWidth,position:"relative"})},[(R(!0),x(se,null,at(f.value,j=>(R(),x("div",{class:"tile",style:Wn({"--_image":`url('${j.image}')`}),key:j.id,onClick:it(()=>{p.value=j,g()},["prevent"])},[b("img",{class:"tile--image",src:j.image},null,8,KX)],12,GX))),128))],4),Ee(WX,{ref_key:"asideModalEle",ref:m,onClose:y,selectedTile:p.value,teams:K(u)},null,8,["selectedTile","teams"])],64)):ce("",!0)}}}),JX=Li(YX,[["__scopeId","data-v-ecca50ab"]]),QX=b("h1",{class:"font-size-H"},"List all boards",-1),XX=b("h2",null,"Published boards:",-1),ZX={key:0},eZ={key:0},tZ=Ut({__name:"allPublishedBoards.vapor",async setup(t){let e,n;const{data:r,promise:i}=bi(Zn(Me,"Boards"));return[e,n]=ir(()=>i.value),await e,n(),(s,o)=>{const a=vr("router-link");return R(),x(se,null,[QX,XX,K(r)?(R(),x("div",ZX,[K(r)?(R(!0),x(se,{key:0},at(K(r),l=>(R(),x("div",null,[l.published?(R(),x("div",eZ,[te(ne(l.name)+" ",1),Ee(a,{to:{name:"viewBoard",params:{boardUUID:l.id}},class:"btn",icon:""},{default:lt(()=>[te(" visibility ")]),_:2},1032,["to"])])):ce("",!0)]))),256)):ce("",!0)])):ce("",!0)],64)}}}),QM=nH({history:N$(),routes:[{path:"/new",name:"createNewBingo",component:tz},{path:"/boards",name:"Boards",component:tZ},{path:"/login",name:"loginScreen",component:lz},{path:"/view/:boardUUID",name:"viewBoard",component:kQ},{path:"/list/:boardUUID",name:"viewBoardList",component:LQ},{path:"/edit/:boardUUID",name:"editBoard",component:YJ},{path:"/verify/:boardUUID",name:"moderateBoard",component:JX},{path:"/teams/:boardUUID",name:"teamViewer",component:gX},{path:"/color/",name:"color",component:dX},{path:"/",name:"Home",component:IH}]});QM.beforeEach(async t=>{if(["editBoard","teamViewer","moderateBoard"].includes(t.name)&&!(await iZ(t.params.boardUUID)||nZ()))return{name:"loginScreen"};if(t.name=="createNewBingo"&&!await rZ())return{name:"loginScreen"};if(t.name=="viewBoard"&&!await sZ(t.params.boardUUID))return{name:"loginScreen"}});const nZ=async()=>{const t=await Di();if(t){const n=(await Xr(Xe(Me,"Users",t.uid))).data();if(n&&n.type=="Admin")return!0}return!1},rZ=async()=>{const t=await Di();if(t){const n=(await Xr(Xe(Me,"Users",t.uid))).data();if(n&&n.banned)return!1}return!!(t!=null&&t.uid)},iZ=async t=>{const e=await Di();if(e){const s=(await Xr(Xe(Me,"Users",e.uid))).data();if(s&&s.banned)return!1}const r=(await Xr(Xe(Me,"Boards",t))).data();return r&&r.ownerID===(e==null?void 0:e.uid)},sZ=async t=>{const e=await Di();if(e){const s=(await Xr(Xe(Me,"Users",e.uid))).data();if(s&&s.banned)return!1}const r=(await Xr(Xe(Me,"Boards",t))).data();return r&&r.ownerID===(e==null?void 0:e.uid)||r&&r.published};function SI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SI(Object(n),!0).forEach(function(r){en(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function oZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function II(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aZ(t,e,n){return e&&II(t.prototype,e),n&&II(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function en(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _b(t,e){return cZ(t)||hZ(t,e)||XM(t,e)||fZ()}function jh(t){return lZ(t)||uZ(t)||XM(t)||dZ()}function lZ(t){if(Array.isArray(t))return _v(t)}function cZ(t){if(Array.isArray(t))return t}function uZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function XM(t,e){if(t){if(typeof t=="string")return _v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _v(t,e)}}function _v(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var AI=function(){},vb={},ZM={},eP=null,tP={mark:AI,measure:AI};try{typeof window<"u"&&(vb=window),typeof document<"u"&&(ZM=document),typeof MutationObserver<"u"&&(eP=MutationObserver),typeof performance<"u"&&(tP=performance)}catch{}var pZ=vb.navigator||{},CI=pZ.userAgent,kI=CI===void 0?"":CI,so=vb,Ct=ZM,RI=eP,Ad=tP;so.document;var fs=!!Ct.documentElement&&!!Ct.head&&typeof Ct.addEventListener=="function"&&typeof Ct.createElement=="function",nP=~kI.indexOf("MSIE")||~kI.indexOf("Trident/"),Cd,kd,Rd,Od,Nd,ss="___FONT_AWESOME___",vv=16,rP="fa",iP="svg-inline--fa",ya="data-fa-i2svg",bv="data-fa-pseudo-element",mZ="data-fa-pseudo-element-pending",bb="data-prefix",Eb="data-icon",OI="fontawesome-i2svg",gZ="async",yZ=["HTML","HEAD","STYLE","SCRIPT"],sP=function(){try{return!0}catch{return!1}}(),It="classic",Vt="sharp",Tb=[It,Vt];function Wh(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[It]}})}var eh=Wh((Cd={},en(Cd,It,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),en(Cd,Vt,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Cd)),th=Wh((kd={},en(kd,It,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),en(kd,Vt,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),kd)),nh=Wh((Rd={},en(Rd,It,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),en(Rd,Vt,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Rd)),_Z=Wh((Od={},en(Od,It,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),en(Od,Vt,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Od)),vZ=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,oP="fa-layers-text",bZ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,EZ=Wh((Nd={},en(Nd,It,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),en(Nd,Vt,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),Nd)),aP=[1,2,3,4,5,6,7,8,9,10],TZ=aP.concat([11,12,13,14,15,16,17,18,19,20]),wZ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],zo={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},rh=new Set;Object.keys(th[It]).map(rh.add.bind(rh));Object.keys(th[Vt]).map(rh.add.bind(rh));var SZ=[].concat(Tb,jh(rh),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",zo.GROUP,zo.SWAP_OPACITY,zo.PRIMARY,zo.SECONDARY]).concat(aP.map(function(t){return"".concat(t,"x")})).concat(TZ.map(function(t){return"w-".concat(t)})),mu=so.FontAwesomeConfig||{};function IZ(t){var e=Ct.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function AZ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Ct&&typeof Ct.querySelector=="function"){var CZ=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];CZ.forEach(function(t){var e=_b(t,2),n=e[0],r=e[1],i=AZ(IZ(n));i!=null&&(mu[r]=i)})}var lP={styleDefault:"solid",familyDefault:"classic",cssPrefix:rP,replacementClass:iP,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};mu.familyPrefix&&(mu.cssPrefix=mu.familyPrefix);var ql=pe(pe({},lP),mu);ql.autoReplaceSvg||(ql.observeMutations=!1);var Te={};Object.keys(lP).forEach(function(t){Object.defineProperty(Te,t,{enumerable:!0,set:function(n){ql[t]=n,gu.forEach(function(r){return r(Te)})},get:function(){return ql[t]}})});Object.defineProperty(Te,"familyPrefix",{enumerable:!0,set:function(e){ql.cssPrefix=e,gu.forEach(function(n){return n(Te)})},get:function(){return ql.cssPrefix}});so.FontAwesomeConfig=Te;var gu=[];function kZ(t){return gu.push(t),function(){gu.splice(gu.indexOf(t),1)}}var bs=vv,mi={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function RZ(t){if(!(!t||!fs)){var e=Ct.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Ct.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Ct.head.insertBefore(e,r),t}}var OZ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function ih(){for(var t=12,e="";t-- >0;)e+=OZ[Math.random()*62|0];return e}function uc(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function wb(t){return t.classList?uc(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function cP(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function NZ(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(cP(t[n]),'" ')},"").trim()}function Wm(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function Sb(t){return t.size!==mi.size||t.x!==mi.x||t.y!==mi.y||t.rotate!==mi.rotate||t.flipX||t.flipY}function MZ(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function PZ(t){var e=t.transform,n=t.width,r=n===void 0?vv:n,i=t.height,s=i===void 0?vv:i,o=t.startCentered,a=o===void 0?!1:o,l="";return a&&nP?l+="translate(".concat(e.x/bs-r/2,"em, ").concat(e.y/bs-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/bs,"em), calc(-50% + ").concat(e.y/bs,"em)) "):l+="translate(".concat(e.x/bs,"em, ").concat(e.y/bs,"em) "),l+="scale(".concat(e.size/bs*(e.flipX?-1:1),", ").concat(e.size/bs*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var DZ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function uP(){var t=rP,e=iP,n=Te.cssPrefix,r=Te.replacementClass,i=DZ;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var NI=!1;function gy(){Te.autoAddCss&&!NI&&(RZ(uP()),NI=!0)}var xZ={mixout:function(){return{dom:{css:uP,insertCss:gy}}},hooks:function(){return{beforeDOMElementCreation:function(){gy()},beforeI2svg:function(){gy()}}}},as=so||{};as[ss]||(as[ss]={});as[ss].styles||(as[ss].styles={});as[ss].hooks||(as[ss].hooks={});as[ss].shims||(as[ss].shims=[]);var Wr=as[ss],hP=[],LZ=function t(){Ct.removeEventListener("DOMContentLoaded",t),vp=1,hP.map(function(e){return e()})},vp=!1;fs&&(vp=(Ct.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ct.readyState),vp||Ct.addEventListener("DOMContentLoaded",LZ));function VZ(t){fs&&(vp?setTimeout(t,0):hP.push(t))}function qh(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?cP(t):"<".concat(e," ").concat(NZ(r),">").concat(s.map(qh).join(""),"</").concat(e,">")}function MI(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var FZ=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},yy=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?FZ(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function UZ(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function Ev(t){var e=UZ(t);return e.length===1?e[0].toString(16):null}function BZ(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function PI(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function Tv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=PI(e);typeof Wr.hooks.addPack=="function"&&!i?Wr.hooks.addPack(t,PI(e)):Wr.styles[t]=pe(pe({},Wr.styles[t]||{}),s),t==="fas"&&Tv("fa",e)}var Md,Pd,Dd,Ja=Wr.styles,$Z=Wr.shims,HZ=(Md={},en(Md,It,Object.values(nh[It])),en(Md,Vt,Object.values(nh[Vt])),Md),Ib=null,dP={},fP={},pP={},mP={},gP={},zZ=(Pd={},en(Pd,It,Object.keys(eh[It])),en(Pd,Vt,Object.keys(eh[Vt])),Pd);function jZ(t){return~SZ.indexOf(t)}function WZ(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!jZ(i)?i:null}var yP=function(){var e=function(s){return yy(Ja,function(o,a,l){return o[l]=yy(a,s,{}),o},{})};dP=e(function(i,s,o){if(s[3]&&(i[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){i[l.toString(16)]=o})}return i}),fP=e(function(i,s,o){if(i[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){i[l]=o})}return i}),gP=e(function(i,s,o){var a=s[2];return i[o]=o,a.forEach(function(l){i[l]=o}),i});var n="far"in Ja||Te.autoFetchSvg,r=yy($Z,function(i,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!n&&(a="fas"),typeof o=="string"&&(i.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:a,iconName:l}),i},{names:{},unicodes:{}});pP=r.names,mP=r.unicodes,Ib=qm(Te.styleDefault,{family:Te.familyDefault})};kZ(function(t){Ib=qm(t.styleDefault,{family:Te.familyDefault})});yP();function Ab(t,e){return(dP[t]||{})[e]}function qZ(t,e){return(fP[t]||{})[e]}function jo(t,e){return(gP[t]||{})[e]}function _P(t){return pP[t]||{prefix:null,iconName:null}}function GZ(t){var e=mP[t],n=Ab("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function oo(){return Ib}var Cb=function(){return{prefix:null,iconName:null,rest:[]}};function qm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?It:n,i=eh[r][t],s=th[r][t]||th[r][i],o=t in Wr.styles?t:null;return s||o||null}var DI=(Dd={},en(Dd,It,Object.keys(nh[It])),en(Dd,Vt,Object.keys(nh[Vt])),Dd);function Gm(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,s=(e={},en(e,It,"".concat(Te.cssPrefix,"-").concat(It)),en(e,Vt,"".concat(Te.cssPrefix,"-").concat(Vt)),e),o=null,a=It;(t.includes(s[It])||t.some(function(c){return DI[It].includes(c)}))&&(a=It),(t.includes(s[Vt])||t.some(function(c){return DI[Vt].includes(c)}))&&(a=Vt);var l=t.reduce(function(c,u){var h=WZ(Te.cssPrefix,u);if(Ja[u]?(u=HZ[a].includes(u)?_Z[a][u]:u,o=u,c.prefix=u):zZ[a].indexOf(u)>-1?(o=u,c.prefix=qm(u,{family:a})):h?c.iconName=h:u!==Te.replacementClass&&u!==s[It]&&u!==s[Vt]&&c.rest.push(u),!i&&c.prefix&&c.iconName){var d=o==="fa"?_P(c.iconName):{},f=jo(c.prefix,c.iconName);d.prefix&&(o=null),c.iconName=d.iconName||f||c.iconName,c.prefix=d.prefix||c.prefix,c.prefix==="far"&&!Ja.far&&Ja.fas&&!Te.autoFetchSvg&&(c.prefix="fas")}return c},Cb());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===Vt&&(Ja.fass||Te.autoFetchSvg)&&(l.prefix="fass",l.iconName=jo(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||o==="fa")&&(l.prefix=oo()||"fas"),l}var KZ=function(){function t(){oZ(this,t),this.definitions={}}return aZ(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){n.definitions[a]=pe(pe({},n.definitions[a]||{}),o[a]),Tv(a,o[a]);var l=nh[It][a];l&&Tv(l,o[a]),yP()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var o=i[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];n[a]||(n[a]={}),u.length>0&&u.forEach(function(h){typeof h=="string"&&(n[a][h]=c)}),n[a][l]=c}),n}}]),t}(),xI=[],Qa={},_l={},YZ=Object.keys(_l);function JZ(t,e){var n=e.mixoutsTo;return xI=t,Qa={},Object.keys(_l).forEach(function(r){YZ.indexOf(r)===-1&&delete _l[r]}),xI.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),_p(i[o])==="object"&&Object.keys(i[o]).forEach(function(a){n[o]||(n[o]={}),n[o][a]=i[o][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(o){Qa[o]||(Qa[o]=[]),Qa[o].push(s[o])})}r.provides&&r.provides(_l)}),n}function wv(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=Qa[t]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function _a(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Qa[t]||[];i.forEach(function(s){s.apply(null,n)})}function ls(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return _l[t]?_l[t].apply(null,e):void 0}function Sv(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||oo();if(e)return e=jo(n,e)||e,MI(vP.definitions,n,e)||MI(Wr.styles,n,e)}var vP=new KZ,QZ=function(){Te.autoReplaceSvg=!1,Te.observeMutations=!1,_a("noAuto")},XZ={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return fs?(_a("beforeI2svg",e),ls("pseudoElements2svg",e),ls("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;Te.autoReplaceSvg===!1&&(Te.autoReplaceSvg=!0),Te.observeMutations=!0,VZ(function(){eee({autoReplaceSvgRoot:n}),_a("watch",e)})}},ZZ={icon:function(e){if(e===null)return null;if(_p(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:jo(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=qm(e[0]);return{prefix:r,iconName:jo(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(Te.cssPrefix,"-"))>-1||e.match(vZ))){var i=Gm(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||oo(),iconName:jo(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=oo();return{prefix:s,iconName:jo(s,e)||e}}}},wr={noAuto:QZ,config:Te,dom:XZ,parse:ZZ,library:vP,findIconDefinition:Sv,toHtml:qh},eee=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?Ct:n;(Object.keys(Wr.styles).length>0||Te.autoFetchSvg)&&fs&&Te.autoReplaceSvg&&wr.dom.i2svg({node:r})};function Km(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return qh(r)})}}),Object.defineProperty(t,"node",{get:function(){if(fs){var r=Ct.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function tee(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,o=t.transform;if(Sb(o)&&n.found&&!r.found){var a=n.width,l=n.height,c={x:a/l/2,y:.5};i.style=Wm(pe(pe({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function nee(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,o=s===!0?"".concat(e,"-").concat(Te.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:pe(pe({},i),{},{id:o}),children:r}]}]}function kb(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,o=t.transform,a=t.symbol,l=t.title,c=t.maskId,u=t.titleId,h=t.extra,d=t.watchable,f=d===void 0?!1:d,p=r.found?r:n,m=p.width,g=p.height,y=i==="fak",_=[Te.replacementClass,s?"".concat(Te.cssPrefix,"-").concat(s):""].filter(function(k){return h.classes.indexOf(k)===-1}).filter(function(k){return k!==""||!!k}).concat(h.classes).join(" "),v={children:[],attributes:pe(pe({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:_,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},w=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(v.attributes[ya]=""),l&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(u||ih())},children:[l]}),delete v.attributes.title);var S=pe(pe({},v),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:pe(pe({},w),h.styles)}),A=r.found&&n.found?ls("generateAbstractMask",S)||{children:[],attributes:{}}:ls("generateAbstractIcon",S)||{children:[],attributes:{}},P=A.children,M=A.attributes;return S.children=P,S.attributes=M,a?nee(S):tee(S)}function LI(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,o=t.extra,a=t.watchable,l=a===void 0?!1:a,c=pe(pe(pe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[ya]="");var u=pe({},o.styles);Sb(i)&&(u.transform=PZ({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=Wm(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function ree(t){var e=t.content,n=t.title,r=t.extra,i=pe(pe(pe({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=Wm(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var _y=Wr.styles;function Iv(t){var e=t[0],n=t[1],r=t.slice(4),i=_b(r,1),s=i[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(Te.cssPrefix,"-").concat(zo.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Te.cssPrefix,"-").concat(zo.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Te.cssPrefix,"-").concat(zo.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:o}}var iee={found:!1,width:512,height:512};function see(t,e){!sP&&!Te.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function Av(t,e){var n=e;return e==="fa"&&Te.styleDefault!==null&&(e=oo()),new Promise(function(r,i){if(ls("missingIconAbstract"),n==="fa"){var s=_P(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&_y[e]&&_y[e][t]){var o=_y[e][t];return r(Iv(o))}see(t,e),r(pe(pe({},iee),{},{icon:Te.showMissingIcons&&t?ls("missingIconAbstract")||{}:{}}))})}var VI=function(){},Cv=Te.measurePerformance&&Ad&&Ad.mark&&Ad.measure?Ad:{mark:VI,measure:VI},Bc='FA "6.5.2"',oee=function(e){return Cv.mark("".concat(Bc," ").concat(e," begins")),function(){return bP(e)}},bP=function(e){Cv.mark("".concat(Bc," ").concat(e," ends")),Cv.measure("".concat(Bc," ").concat(e),"".concat(Bc," ").concat(e," begins"),"".concat(Bc," ").concat(e," ends"))},Rb={begin:oee,end:bP},rf=function(){};function FI(t){var e=t.getAttribute?t.getAttribute(ya):null;return typeof e=="string"}function aee(t){var e=t.getAttribute?t.getAttribute(bb):null,n=t.getAttribute?t.getAttribute(Eb):null;return e&&n}function lee(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Te.replacementClass)}function cee(){if(Te.autoReplaceSvg===!0)return sf.replace;var t=sf[Te.autoReplaceSvg];return t||sf.replace}function uee(t){return Ct.createElementNS("http://www.w3.org/2000/svg",t)}function hee(t){return Ct.createElement(t)}function EP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?uee:hee:n;if(typeof t=="string")return Ct.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var s=t.children||[];return s.forEach(function(o){i.appendChild(EP(o,{ceFn:r}))}),i}function dee(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var sf={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(EP(i),n)}),n.getAttribute(ya)===null&&Te.keepOriginalSource){var r=Ct.createComment(dee(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~wb(n).indexOf(Te.replacementClass))return sf.replace(e);var i=new RegExp("".concat(Te.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,l){return l===Te.replacementClass||l.match(i)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var o=r.map(function(a){return qh(a)}).join(`
`);n.setAttribute(ya,""),n.innerHTML=o}};function UI(t){t()}function TP(t,e){var n=typeof e=="function"?e:rf;if(t.length===0)n();else{var r=UI;Te.mutateApproach===gZ&&(r=so.requestAnimationFrame||UI),r(function(){var i=cee(),s=Rb.begin("mutate");t.map(i),s(),n()})}}var Ob=!1;function wP(){Ob=!0}function kv(){Ob=!1}var bp=null;function BI(t){if(RI&&Te.observeMutations){var e=t.treeCallback,n=e===void 0?rf:e,r=t.nodeCallback,i=r===void 0?rf:r,s=t.pseudoElementsCallback,o=s===void 0?rf:s,a=t.observeMutationsRoot,l=a===void 0?Ct:a;bp=new RI(function(c){if(!Ob){var u=oo();uc(c).forEach(function(h){if(h.type==="childList"&&h.addedNodes.length>0&&!FI(h.addedNodes[0])&&(Te.searchPseudoElements&&o(h.target),n(h.target)),h.type==="attributes"&&h.target.parentNode&&Te.searchPseudoElements&&o(h.target.parentNode),h.type==="attributes"&&FI(h.target)&&~wZ.indexOf(h.attributeName))if(h.attributeName==="class"&&aee(h.target)){var d=Gm(wb(h.target)),f=d.prefix,p=d.iconName;h.target.setAttribute(bb,f||u),p&&h.target.setAttribute(Eb,p)}else lee(h.target)&&i(h.target)})}}),fs&&bp.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function fee(){bp&&bp.disconnect()}function pee(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function mee(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=Gm(wb(t));return i.prefix||(i.prefix=oo()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=qZ(i.prefix,t.innerText)||Ab(i.prefix,Ev(t.innerText))),!i.iconName&&Te.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function gee(t){var e=uc(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Te.autoA11y&&(n?e["aria-labelledby"]="".concat(Te.replacementClass,"-title-").concat(r||ih()):(e["aria-hidden"]="true",e.focusable="false")),e}function yee(){return{iconName:null,title:null,titleId:null,prefix:null,transform:mi,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function $I(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=mee(t),r=n.iconName,i=n.prefix,s=n.rest,o=gee(t),a=wv("parseNodeAttributes",{},t),l=e.styleParser?pee(t):[];return pe({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:mi,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var _ee=Wr.styles;function SP(t){var e=Te.autoReplaceSvg==="nest"?$I(t,{styleParser:!1}):$I(t);return~e.extra.classes.indexOf(oP)?ls("generateLayersText",t,e):ls("generateSvgReplacementMutation",t,e)}var ao=new Set;Tb.map(function(t){ao.add("fa-".concat(t))});Object.keys(eh[It]).map(ao.add.bind(ao));Object.keys(eh[Vt]).map(ao.add.bind(ao));ao=jh(ao);function HI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!fs)return Promise.resolve();var n=Ct.documentElement.classList,r=function(h){return n.add("".concat(OI,"-").concat(h))},i=function(h){return n.remove("".concat(OI,"-").concat(h))},s=Te.autoFetchSvg?ao:Tb.map(function(u){return"fa-".concat(u)}).concat(Object.keys(_ee));s.includes("fa")||s.push("fa");var o=[".".concat(oP,":not([").concat(ya,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(ya,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=uc(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();var l=Rb.begin("onTree"),c=a.reduce(function(u,h){try{var d=SP(h);d&&u.push(d)}catch(f){sP||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise(function(u,h){Promise.all(c).then(function(d){TP(d,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(d){l(),h(d)})})}function vee(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;SP(t).then(function(n){n&&TP([n],e)})}function bee(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:Sv(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Sv(i||{})),t(r,pe(pe({},n),{},{mask:i}))}}var Eee=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?mi:r,s=n.symbol,o=s===void 0?!1:s,a=n.mask,l=a===void 0?null:a,c=n.maskId,u=c===void 0?null:c,h=n.title,d=h===void 0?null:h,f=n.titleId,p=f===void 0?null:f,m=n.classes,g=m===void 0?[]:m,y=n.attributes,_=y===void 0?{}:y,v=n.styles,w=v===void 0?{}:v;if(e){var S=e.prefix,A=e.iconName,P=e.icon;return Km(pe({type:"icon"},e),function(){return _a("beforeDOMElementCreation",{iconDefinition:e,params:n}),Te.autoA11y&&(d?_["aria-labelledby"]="".concat(Te.replacementClass,"-title-").concat(p||ih()):(_["aria-hidden"]="true",_.focusable="false")),kb({icons:{main:Iv(P),mask:l?Iv(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:S,iconName:A,transform:pe(pe({},mi),i),symbol:o,title:d,maskId:u,titleId:p,extra:{attributes:_,styles:w,classes:g}})})}},Tee={mixout:function(){return{icon:bee(Eee)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=HI,n.nodeCallback=vee,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?Ct:r,s=n.callback,o=s===void 0?function(){}:s;return HI(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,o=r.titleId,a=r.prefix,l=r.transform,c=r.symbol,u=r.mask,h=r.maskId,d=r.extra;return new Promise(function(f,p){Promise.all([Av(i,a),u.iconName?Av(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=_b(m,2),y=g[0],_=g[1];f([n,kb({icons:{main:y,mask:_},prefix:a,iconName:i,transform:l,symbol:c,maskId:h,title:s,titleId:o,extra:d,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.transform,a=n.styles,l=Wm(a);l.length>0&&(i.style=l);var c;return Sb(o)&&(c=ls("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),r.push(c||s.icon),{children:r,attributes:i}}}},wee={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return Km({type:"layer"},function(){_a("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Te.cssPrefix,"-layers")].concat(jh(s)).join(" ")},children:o}]})}}}},See={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,o=r.classes,a=o===void 0?[]:o,l=r.attributes,c=l===void 0?{}:l,u=r.styles,h=u===void 0?{}:u;return Km({type:"counter",content:n},function(){return _a("beforeDOMElementCreation",{content:n,params:r}),ree({content:n.toString(),title:s,extra:{attributes:c,styles:h,classes:["".concat(Te.cssPrefix,"-layers-counter")].concat(jh(a))}})})}}}},Iee={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?mi:i,o=r.title,a=o===void 0?null:o,l=r.classes,c=l===void 0?[]:l,u=r.attributes,h=u===void 0?{}:u,d=r.styles,f=d===void 0?{}:d;return Km({type:"text",content:n},function(){return _a("beforeDOMElementCreation",{content:n,params:r}),LI({content:n,transform:pe(pe({},mi),s),title:a,extra:{attributes:h,styles:f,classes:["".concat(Te.cssPrefix,"-layers-text")].concat(jh(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,o=r.extra,a=null,l=null;if(nP){var c=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();a=u.width/c,l=u.height/c}return Te.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([n,LI({content:n.innerHTML,width:a,height:l,transform:s,title:i,extra:o,watchable:!0})])}}},Aee=new RegExp('"',"ug"),zI=[1105920,1112319];function Cee(t){var e=t.replace(Aee,""),n=BZ(e,0),r=n>=zI[0]&&n<=zI[1],i=e.length===2?e[0]===e[1]:!1;return{value:Ev(i?e[0]:e),isSecondary:r||i}}function jI(t,e){var n="".concat(mZ).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=uc(t.children),o=s.filter(function(P){return P.getAttribute(bv)===e})[0],a=so.getComputedStyle(t,e),l=a.getPropertyValue("font-family").match(bZ),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return t.removeChild(o),r();if(l&&u!=="none"&&u!==""){var h=a.getPropertyValue("content"),d=~["Sharp"].indexOf(l[2])?Vt:It,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?th[d][l[2].toLowerCase()]:EZ[d][c],p=Cee(h),m=p.value,g=p.isSecondary,y=l[0].startsWith("FontAwesome"),_=Ab(f,m),v=_;if(y){var w=GZ(m);w.iconName&&w.prefix&&(_=w.iconName,f=w.prefix)}if(_&&!g&&(!o||o.getAttribute(bb)!==f||o.getAttribute(Eb)!==v)){t.setAttribute(n,v),o&&t.removeChild(o);var S=yee(),A=S.extra;A.attributes[bv]=e,Av(_,f).then(function(P){var M=kb(pe(pe({},S),{},{icons:{main:P,mask:Cb()},prefix:f,iconName:v,extra:A,watchable:!0})),k=Ct.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(k,t.firstChild):t.appendChild(k),k.outerHTML=M.map(function(z){return qh(z)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function kee(t){return Promise.all([jI(t,"::before"),jI(t,"::after")])}function Ree(t){return t.parentNode!==document.head&&!~yZ.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(bv)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function WI(t){if(fs)return new Promise(function(e,n){var r=uc(t.querySelectorAll("*")).filter(Ree).map(kee),i=Rb.begin("searchPseudoElements");wP(),Promise.all(r).then(function(){i(),kv(),e()}).catch(function(){i(),kv(),n()})})}var Oee={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=WI,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?Ct:r;Te.searchPseudoElements&&WI(i)}}},qI=!1,Nee={mixout:function(){return{dom:{unwatch:function(){wP(),qI=!0}}}},hooks:function(){return{bootstrap:function(){BI(wv("mutationObserverCallbacks",{}))},noAuto:function(){fee()},watch:function(n){var r=n.observeMutationsRoot;qI?kv():BI(wv("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},GI=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return r.flipX=!0,r;if(o&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(o){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},Mee={mixout:function(){return{parse:{transform:function(n){return GI(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=GI(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,o=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),c="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),h={transform:"".concat(l," ").concat(c," ").concat(u)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:h,path:d};return{tag:"g",attributes:pe({},f.outer),children:[{tag:"g",attributes:pe({},f.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:pe(pe({},r.icon.attributes),f.path)}]}]}}}},vy={x:0,y:0,width:"100%",height:"100%"};function KI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function Pee(t){return t.tag==="g"?t.children:[t]}var Dee={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?Gm(i.split(" ").map(function(o){return o.trim()})):Cb();return s.prefix||(s.prefix=oo()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.mask,a=n.maskId,l=n.transform,c=s.width,u=s.icon,h=o.width,d=o.icon,f=MZ({transform:l,containerWidth:h,iconWidth:c}),p={tag:"rect",attributes:pe(pe({},vy),{},{fill:"white"})},m=u.children?{children:u.children.map(KI)}:{},g={tag:"g",attributes:pe({},f.inner),children:[KI(pe({tag:u.tag,attributes:pe(pe({},u.attributes),f.path)},m))]},y={tag:"g",attributes:pe({},f.outer),children:[g]},_="mask-".concat(a||ih()),v="clip-".concat(a||ih()),w={tag:"mask",attributes:pe(pe({},vy),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:Pee(d)},w]};return r.push(S,{tag:"rect",attributes:pe({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(_,")")},vy)}),{children:r,attributes:i}}}},xee={provides:function(e){var n=!1;so.matchMedia&&(n=so.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:pe(pe({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=pe(pe({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:pe(pe({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:pe(pe({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:pe(pe({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:pe(pe({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:pe(pe({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:pe(pe({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:pe(pe({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},Lee={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},Vee=[xZ,Tee,wee,See,Iee,Oee,Nee,Mee,Dee,xee,Lee];JZ(Vee,{mixoutsTo:wr});wr.noAuto;wr.config;var Je=wr.library;wr.dom;var Rv=wr.parse;wr.findIconDefinition;wr.toHtml;var Fee=wr.icon;wr.layer;wr.text;wr.counter;var Uee={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},Bee={prefix:"fas",iconName:"users-rectangle",icon:[640,512,[],"e594","M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H544c53 0 96-43 96-96V96c0-53-43-96-96-96H96zM64 96c0-17.7 14.3-32 32-32H544c17.7 0 32 14.3 32 32V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V96zm159.8 80a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM96 309.3c0 14.7 11.9 26.7 26.7 26.7h56.1c8-34.1 32.8-61.7 65.2-73.6c-7.5-4.1-16.2-6.4-25.3-6.4H149.3C119.9 256 96 279.9 96 309.3zM461.2 336h56.1c14.7 0 26.7-11.9 26.7-26.7c0-29.5-23.9-53.3-53.3-53.3H421.3c-9.2 0-17.8 2.3-25.3 6.4c32.4 11.9 57.2 39.5 65.2 73.6zM372 289c-3.9-.7-7.9-1-12-1H280c-4.1 0-8.1 .3-12 1c-26 4.4-47.3 22.7-55.9 47c-2.7 7.5-4.1 15.6-4.1 24c0 13.3 10.7 24 24 24H408c13.3 0 24-10.7 24-24c0-8.4-1.4-16.5-4.1-24c-8.6-24.3-29.9-42.6-55.9-47zM512 176a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM320 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},$ee={prefix:"fas",iconName:"spaghetti-monster-flying",icon:[640,512,["pastafarianism"],"f67b","M208 64a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 0c0 16.2-6 31.1-16 42.3l15.6 31.2c18.7-6 39.9-9.5 64.4-9.5s45.8 3.5 64.4 9.5L400 106.3C390 95.1 384 80.2 384 64c0-35.3 28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64c-1.7 0-3.4-.1-5.1-.2L427.8 158c21.1 13.6 37.7 30.2 51.4 46.4c7.1 8.3 13.5 16.6 19.3 24l1.4 1.8c6.3 8.1 11.6 14.8 16.7 20.4C527.3 262.3 532.7 264 536 264c2.5 0 4.3-.6 7.1-3.3c3.7-3.5 7.1-8.8 12.5-17.4l.6-.9c4.6-7.4 11-17.6 19.4-25.7c9.7-9.3 22.9-16.7 40.4-16.7c13.3 0 24 10.7 24 24s-10.7 24-24 24c-2.5 0-4.3 .6-7.1 3.3c-3.7 3.5-7.1 8.8-12.5 17.4l-.6 .9c-4.6 7.4-11 17.6-19.4 25.7c-9.7 9.3-22.9 16.7-40.4 16.7c-18.5 0-32.9-8.5-44.3-18.6c-3.1 4-6.6 8.3-10.5 12.7c1.4 4.3 2.8 8.5 4 12.5c.9 3 1.8 5.8 2.6 8.6c3 9.8 5.5 18.2 8.6 25.9c3.9 9.8 7.4 15.4 10.8 18.5c2.6 2.4 5.9 4.3 12.8 4.3c8.7 0 16.9-4.2 33.7-13.2c15-8 35.7-18.8 62.3-18.8c13.3 0 24 10.7 24 24s-10.7 24-24 24c-13.4 0-24.7 5.2-39.7 13.2c-1 .6-2.1 1.1-3.2 1.7C559.9 414 541.4 424 520 424c-18.4 0-33.6-6.1-45.5-17.2c-11.1-10.3-17.9-23.7-22.7-36c-3.6-9-6.7-19.1-9.5-28.5c-16.4 12.3-36.1 23.6-58.9 31.3c3.6 10.8 8.4 23.5 14.4 36.2c7.5 15.9 16.2 30.4 25.8 40.5C433 460.5 441.2 464 448 464c13.3 0 24 10.7 24 24s-10.7 24-24 24c-25.2 0-45-13.5-59.5-28.8c-14.5-15.4-25.7-34.9-34.2-53c-8-17-14.1-33.8-18.3-46.9c-5.2 .4-10.6 .6-16 .6s-10.8-.2-16-.6c-4.2 13-10.3 29.9-18.3 46.9c-8.5 18.1-19.8 37.6-34.2 53C237 498.5 217.2 512 192 512c-13.3 0-24-10.7-24-24s10.7-24 24-24c6.8 0 15-3.5 24.5-13.7c9.5-10.1 18.3-24.6 25.8-40.5c5.9-12.6 10.7-25.4 14.4-36.2c-22.8-7.7-42.5-19-58.9-31.3c-2.9 9.4-6 19.5-9.5 28.5c-4.8 12.2-11.6 25.6-22.7 36C153.6 417.9 138.4 424 120 424c-21.4 0-39.9-10-53.1-17.1l0 0c-1.1-.6-2.2-1.2-3.2-1.7c-15-8-26.3-13.2-39.7-13.2c-13.3 0-24-10.7-24-24s10.7-24 24-24c26.6 0 47.3 10.8 62.3 18.8c16.8 9 25 13.2 33.7 13.2c6.8 0 10.2-1.9 12.8-4.3c3.4-3.2 7-8.8 10.8-18.5c3-7.7 5.6-16.1 8.6-25.9c.8-2.7 1.7-5.6 2.6-8.6c1.2-4 2.6-8.2 4-12.5c-3.9-4.5-7.4-8.8-10.5-12.7C136.9 303.5 122.5 312 104 312c-17.5 0-30.7-7.4-40.4-16.7c-8.4-8.1-14.8-18.3-19.4-25.7l-.6-.9c-5.4-8.6-8.8-13.9-12.5-17.4c-2.8-2.7-4.6-3.3-7.1-3.3c-13.3 0-24-10.7-24-24s10.7-24 24-24c17.5 0 30.7 7.4 40.4 16.7c8.4 8.1 14.8 18.3 19.4 25.7l.6 .9c5.4 8.6 8.8 13.9 12.5 17.4c2.8 2.7 4.6 3.3 7.1 3.3c3.3 0 8.7-1.7 19.4-13.4c5.1-5.6 10.4-12.3 16.7-20.4l1.4-1.8c5.8-7.4 12.2-15.7 19.3-24c13.8-16.2 30.3-32.8 51.4-46.4l-15.1-30.2c-1.7 .1-3.4 .2-5.1 .2c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm208 0a16 16 0 1 0 -32 0 16 16 0 1 0 32 0z"]},Hee={prefix:"fas",iconName:"spoon",icon:[512,512,[129348,61873,"utensil-spoon"],"f2e5","M245.8 220.9c-14.5-17.6-21.8-39.2-21.8-60.8C224 80 320 0 416 0c53 0 96 43 96 96c0 96-80 192-160.2 192c-21.6 0-43.2-7.3-60.8-21.8L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L245.8 220.9z"]},zee={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},jee={prefix:"fas",iconName:"paw",icon:[512,512,[],"f1b0","M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z"]},Wee={prefix:"fas",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},qee={prefix:"fas",iconName:"ghost",icon:[384,512,[128123],"f6e2","M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9C8 480 0 472 0 462.2V192C0 86 86 0 192 0S384 86 384 192V462.2c0 9.8-8 17.8-17.8 17.8c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-13.4-10.7-32.8-9-44.1 3.9L269.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6l-26.6-30.5c-12.7-14.6-35.4-14.6-48.2 0L141.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6L84.2 471c-11.3-12.9-30.7-14.6-44.1-3.9zM160 192a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},Gee={prefix:"fas",iconName:"tree",icon:[448,512,[127794],"f1bb","M210.6 5.9L62 169.4c-3.9 4.2-6 9.8-6 15.5C56 197.7 66.3 208 79.1 208H104L30.6 281.4c-4.2 4.2-6.6 10-6.6 16C24 309.9 34.1 320 46.6 320H80L5.4 409.5C1.9 413.7 0 419 0 424.5c0 13 10.5 23.5 23.5 23.5H192v32c0 17.7 14.3 32 32 32s32-14.3 32-32V448H424.5c13 0 23.5-10.5 23.5-23.5c0-5.5-1.9-10.8-5.4-15L368 320h33.4c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16L344 208h24.9c12.7 0 23.1-10.3 23.1-23.1c0-5.7-2.1-11.3-6-15.5L237.4 5.9C234 2.1 229.1 0 224 0s-10 2.1-13.4 5.9z"]},Kee={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},Yee={prefix:"fas",iconName:"shapes",icon:[512,512,["triangle-circle-square"],"f61f","M315.4 15.5C309.7 5.9 299.2 0 288 0s-21.7 5.9-27.4 15.5l-96 160c-5.9 9.9-6.1 22.2-.4 32.2s16.3 16.2 27.8 16.2H384c11.5 0 22.2-6.2 27.8-16.2s5.5-22.3-.4-32.2l-96-160zM288 312V456c0 22.1 17.9 40 40 40H472c22.1 0 40-17.9 40-40V312c0-22.1-17.9-40-40-40H328c-22.1 0-40 17.9-40 40zM128 512a128 128 0 1 0 0-256 128 128 0 1 0 0 256z"]},Jee={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Qee={prefix:"fas",iconName:"user-group",icon:[640,512,[128101,"user-friends"],"f500","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM609.3 512H471.4c5.4-9.4 8.6-20.3 8.6-32v-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2h61.4C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"]},Xee={prefix:"fas",iconName:"fire",icon:[448,512,[128293],"f06d","M159.3 5.4c7.8-7.3 19.9-7.2 27.7 .1c27.6 25.9 53.5 53.8 77.7 84c11-14.4 23.5-30.1 37-42.9c7.9-7.4 20.1-7.4 28 .1c34.6 33 63.9 76.6 84.5 118c20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512C98.4 512 0 404.1 0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3 0 47.7-7 68.8-21c42.1-29.4 53.4-88.2 28.1-134.4c-4.5-9-16-9.6-22.5-2l-25.2 29.3c-6.6 7.6-18.5 7.4-24.7-.5c-16.5-21-46-58.5-62.8-79.8c-6.3-8-18.3-8.1-24.7-.1c-33.8 42.5-50.8 69.3-50.8 99.4C112 375.4 162.6 416 225.7 416z"]},Zee={prefix:"fas",iconName:"eye-low-vision",icon:[640,512,["low-vision"],"f2a8","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223 149.5c48.6-44.3 123-50.8 179.3-11.7c60.8 42.4 78.9 123.2 44.2 186.9L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3L223 149.5zm-139.9 12c-11 14.4-20.5 28.7-28.4 42.2l339 265.7c18.7-5.5 36.2-13 52.6-21.8L83.1 161.5zm-50 86.3c-1.8 6.8-1.3 14 1.4 20.5c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c3.1 0 6.1-.1 9.2-.2L33.1 247.8z"]},ete={prefix:"fas",iconName:"crow",icon:[640,512,[],"f520","M456 0c-48.6 0-88 39.4-88 88v29.2L12.5 390.6c-14 10.8-16.6 30.9-5.9 44.9s30.9 16.6 44.9 5.9L126.1 384H259.2l46.6 113.1c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3L311.1 384H352c1.1 0 2.1 0 3.2 0l46.6 113.2c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3l-42-102C484.9 354.1 544 280 544 192V128v-8l80.5-20.1c8.6-2.1 13.8-10.8 11.6-19.4C629 52 603.4 32 574 32H523.9C507.7 12.5 483.3 0 456 0zm0 64a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},tte={prefix:"fas",iconName:"frog",icon:[576,512,[],"f52e","M368 32c41.7 0 75.9 31.8 79.7 72.5l85.6 26.3c25.4 7.8 42.8 31.3 42.8 57.9c0 21.8-11.7 41.9-30.7 52.7L400.8 323.5 493.3 416H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H480c-8.5 0-16.6-3.4-22.6-9.4L346.9 360.2c11.7-36 3.2-77.1-25.4-105.7c-40.6-40.6-106.3-40.6-146.9-.1L101 324.4c-6.4 6.1-6.7 16.2-.6 22.6s16.2 6.6 22.6 .6l73.8-70.2 .1-.1 .1-.1c3.5-3.5 7.3-6.6 11.3-9.2c27.9-18.5 65.9-15.4 90.5 9.2c24.7 24.7 27.7 62.9 9 90.9c-2.6 3.8-5.6 7.5-9 10.9L261.8 416H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-35.3 0-64-28.7-64-64C0 249.6 127 112.9 289.3 97.5C296.2 60.2 328.8 32 368 32zm0 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},nte={prefix:"fas",iconName:"feather-pointed",icon:[512,512,["feather-alt"],"f56b","M278.5 215.6L23 471c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l74.8-74.8c7.4 4.6 15.3 8.2 23.8 10.5C200.3 452.8 270 454.5 338 409.4c12.2-8.1 5.8-25.4-8.8-25.4l-16.1 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l97.7-29.3c3.4-1 6.4-3.1 8.4-6.1c4.4-6.4 8.6-12.9 12.6-19.6c6.2-10.3-1.5-23-13.5-23l-38.6 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l80.9-24.3c4.6-1.4 8.4-4.8 10.2-9.3C494.5 163 507.8 86.1 511.9 36.8c.8-9.9-3-19.6-10-26.6s-16.7-10.8-26.6-10C391.5 7 228.5 40.5 137.4 131.6C57.3 211.7 56.7 302.3 71.3 356.4c2.1 7.9 12 9.6 17.8 3.8L253.6 195.8c6.2-6.2 16.4-6.2 22.6 0c5.4 5.4 6.1 13.6 2.2 19.8z"]},rte={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},ite={prefix:"fas",iconName:"hat-cowboy",icon:[640,512,[],"f8c0","M320 64c14.4 0 22.3-7 30.8-14.4C360.4 41.1 370.7 32 392 32c49.3 0 84.4 152.2 97.9 221.9C447.8 272.1 390.9 288 320 288s-127.8-15.9-169.9-34.1C163.6 184.2 198.7 32 248 32c21.3 0 31.6 9.1 41.2 17.6C297.7 57 305.6 64 320 64zM111.1 270.7c47.2 24.5 117.5 49.3 209 49.3s161.8-24.8 208.9-49.3c24.8-12.9 49.8-28.3 70.1-47.7c7.9-7.9 20.2-9.2 29.6-3.3c9.5 5.9 13.5 17.9 9.9 28.5c-13.5 37.7-38.4 72.3-66.1 100.6C523.7 398.9 443.6 448 320 448s-203.6-49.1-252.5-99.2C39.8 320.4 14.9 285.8 1.4 248.1c-3.6-10.6 .4-22.6 9.9-28.5c9.5-5.9 21.7-4.5 29.6 3.3c20.4 19.4 45.3 34.8 70.1 47.7z"]},ste={prefix:"fas",iconName:"cat",icon:[576,512,[128008],"f6be","M320 192h17.1c22.1 38.3 63.5 64 110.9 64c11 0 21.8-1.4 32-4v4 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V339.2L280 448h56c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-53 0-96-43-96-96V192.5c0-16.1-12-29.8-28-31.8l-7.9-1c-17.5-2.2-30-18.2-27.8-35.7s18.2-30 35.7-27.8l7.9 1c48 6 84.1 46.8 84.1 95.3v85.3c34.4-51.7 93.2-85.8 160-85.8zm160 26.5v0c-10 3.5-20.8 5.5-32 5.5c-28.4 0-54-12.4-71.6-32h0c-3.7-4.1-7-8.5-9.9-13.2C357.3 164 352 146.6 352 128v0V32 12 10.7C352 4.8 356.7 .1 362.6 0h.2c3.3 0 6.4 1.6 8.4 4.2l0 .1L384 21.3l27.2 36.3L416 64h64l4.8-6.4L512 21.3 524.8 4.3l0-.1c2-2.6 5.1-4.2 8.4-4.2h.2C539.3 .1 544 4.8 544 10.7V12 32v96c0 17.3-4.6 33.6-12.6 47.6c-11.3 19.8-29.6 35.2-51.4 42.9zM432 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},ote={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},ate={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},lte={prefix:"fas",iconName:"hat-wizard",icon:[512,512,[],"f6e8","M64 416L168.6 180.7c15.3-34.4 40.3-63.5 72-83.7l146.9-94c3-1.9 6.5-2.9 10-2.9C407.7 0 416 8.3 416 18.6v1.6c0 2.6-.5 5.1-1.4 7.5L354.8 176.9c-1.9 4.7-2.8 9.7-2.8 14.7c0 5.5 1.2 11 3.4 16.1L448 416H240.9l11.8-35.4 40.4-13.5c6.5-2.2 10.9-8.3 10.9-15.2s-4.4-13-10.9-15.2l-40.4-13.5-13.5-40.4C237 276.4 230.9 272 224 272s-13 4.4-15.2 10.9l-13.5 40.4-40.4 13.5C148.4 339 144 345.1 144 352s4.4 13 10.9 15.2l40.4 13.5L207.1 416H64zM279.6 141.5c-1.1-3.3-4.1-5.5-7.6-5.5s-6.5 2.2-7.6 5.5l-6.7 20.2-20.2 6.7c-3.3 1.1-5.5 4.1-5.5 7.6s2.2 6.5 5.5 7.6l20.2 6.7 6.7 20.2c1.1 3.3 4.1 5.5 7.6 5.5s6.5-2.2 7.6-5.5l6.7-20.2 20.2-6.7c3.3-1.1 5.5-4.1 5.5-7.6s-2.2-6.5-5.5-7.6l-20.2-6.7-6.7-20.2zM32 448H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},cte={prefix:"fas",iconName:"table-cells-large",icon:[512,512,["th-large"],"f009","M448 96V224H288V96H448zm0 192V416H288V288H448zM224 224H64V96H224V224zM64 288H224V416H64V288zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},ute={prefix:"fas",iconName:"dove",icon:[512,512,[128330],"f4ba","M160.8 96.5c14 17 31 30.9 49.5 42.2c25.9 15.8 53.7 25.9 77.7 31.6V138.8C265.8 108.5 250 71.5 248.6 28c-.4-11.3-7.5-21.5-18.4-24.4c-7.6-2-15.8-.2-21 5.8c-13.3 15.4-32.7 44.6-48.4 87.2zM320 144v30.6l0 0v1.3l0 0 0 32.1c-60.8-5.1-185-43.8-219.3-157.2C97.4 40 87.9 32 76.6 32c-7.9 0-15.3 3.9-18.8 11C46.8 65.9 32 112.1 32 176c0 116.9 80.1 180.5 118.4 202.8L11.8 416.6C6.7 418 2.6 421.8 .9 426.8s-.8 10.6 2.3 14.8C21.7 466.2 77.3 512 160 512c3.6 0 7.2-1.2 10-3.5L245.6 448H320c88.4 0 160-71.6 160-160V128l29.9-44.9c1.3-2 2.1-4.4 2.1-6.8c0-6.8-5.5-12.3-12.3-12.3H400c-44.2 0-80 35.8-80 80zm80-16a16 16 0 1 1 0 32 16 16 0 1 1 0-32z"]},hte={prefix:"fas",iconName:"list-ul",icon:[512,512,["list-dots"],"f0ca","M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"]},dte={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},fte={prefix:"fas",iconName:"users-line",icon:[640,512,[],"e592","M211.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM32 256c0 17.7 14.3 32 32 32h85.6c10.1-39.4 38.6-71.5 75.8-86.6c-9.7-6-21.2-9.4-33.4-9.4H96c-35.3 0-64 28.7-64 64zm461.6 32H576c17.7 0 32-14.3 32-32c0-35.3-28.7-64-64-64H448c-11.7 0-22.7 3.1-32.1 8.6c38.1 14.8 67.4 47.3 77.7 87.4zM391.2 226.4c-6.9-1.6-14.2-2.4-21.6-2.4h-96c-8.5 0-16.7 1.1-24.5 3.1c-30.8 8.1-55.6 31.1-66.1 60.9c-3.5 10-5.5 20.8-5.5 32c0 17.7 14.3 32 32 32h224c17.7 0 32-14.3 32-32c0-11.2-1.9-22-5.5-32c-10.8-30.7-36.8-54.2-68.9-61.6zM563.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM321.6 192a80 80 0 1 0 0-160 80 80 0 1 0 0 160zM32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32H608c17.7 0 32-14.3 32-32s-14.3-32-32-32H32z"]},pte={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2v82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9V380.8c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},mte={prefix:"fas",iconName:"disease",icon:[512,512,[],"f7fa","M236.4 61.4L227 75.5c-21.3 32-59.4 48.5-97.3 42.1l-59.6-9.9C33.4 101.6 0 129.9 .1 167.1c0 15.9 6.4 31.2 17.6 42.5l29.2 29.2c11 11 17.2 25.9 17.2 41.5c0 15.8-6.4 30.9-17.7 42L33.3 335.1C22.2 345.9 16 360.7 16 376.2c0 36.8 34.1 64.2 70.1 56.2l62.3-13.8c7.7-1.7 15.7-2.6 23.6-2.6h10c27.2 0 53.7 9.3 75 26.3L287.8 467c10.5 8.4 23.6 13 37 13c32.7 0 59.3-26.5 59.3-59.3l0-25.2c0-34.9 21.4-66.2 53.9-78.8l36.9-14.3c22.4-8.7 37.2-30.3 37.2-54.3c0-28.1-20.1-52.3-47.8-57.3l-28-5.1c-36.5-6.7-65.4-34.5-73.6-70.7l-7.1-31.5C348.9 53.4 322.1 32 291.3 32c-22 0-42.6 11-54.9 29.4zM160 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 16a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zm0 80a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},gte={prefix:"fas",iconName:"shield",icon:[512,512,[128737,"shield-blank"],"f132","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0z"]},yte={prefix:"fas",iconName:"hippo",icon:[640,512,[129435],"f6ed","M407 47c9.4-9.4 24.6-9.4 33.9 0l17.2 17.2c1.9-.1 3.9-.2 5.8-.2h32c11.2 0 21.9 2.3 31.6 6.5L543 55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L564 101.9c7.6 12.2 12 26.7 12 42.1c0 10.2 7.4 18.8 16.7 23c27.9 12.5 47.3 40.5 47.3 73c0 26.2-12.6 49.4-32 64v32c0 8.8-7.2 16-16 16H560c-8.8 0-16-7.2-16-16V320H480v16c0 8.8-7.2 16-16 16H432c-8.8 0-16-7.2-16-16V318.4c-11.8-2.4-22.7-7.4-32-14.4c-1.5-1.1-2.9-2.3-4.3-3.5c-17-14.7-27.7-36.4-27.7-60.5c0-8.8-7.2-16-16-16s-16 7.2-16 16c0 44.7 26.2 83.2 64 101.2V352c0 17.7 14.3 32 32 32h32v64c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V372c-19.8 7.7-41.4 12-64 12s-44.2-4.3-64-12v76c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V329.1L45.9 369.7c-5.4 12.1-19.6 17.6-31.7 12.2S-3.3 362.4 2.1 350.3L24 300.9c5.3-11.9 8-24.7 8-37.7C32 155.7 117.2 68 223.8 64.1l.2-.1h7.2H256h32c41.7 0 83.4 12.1 117.2 25.7c1.7-1.8 3.5-3.6 5.3-5.2L407 81c-9.4-9.4-9.4-24.6 0-33.9zm73 185a24 24 0 1 0 -48 0 24 24 0 1 0 48 0zm88 24a24 24 0 1 0 0-48 24 24 0 1 0 0 48zM480 144a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},_te={prefix:"fas",iconName:"hand-fist",icon:[448,512,[9994,"fist-raised"],"f6de","M192 0c17.7 0 32 14.3 32 32V144H160V32c0-17.7 14.3-32 32-32zM64 64c0-17.7 14.3-32 32-32s32 14.3 32 32v80H64V64zm192 0c0-17.7 14.3-32 32-32s32 14.3 32 32v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V64zm96 64c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V128zm-96 88l0-.6c9.4 5.4 20.3 8.6 32 8.6c13.2 0 25.4-4 35.6-10.8c8.7 24.9 32.5 42.8 60.4 42.8c11.7 0 22.6-3.1 32-8.6V256c0 52.3-25.1 98.8-64 128v96c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V401.6c-17.3-7.9-33.2-18.8-46.9-32.5L69.5 357.5C45.5 333.5 32 300.9 32 267V240c0-35.3 28.7-64 64-64h88c22.1 0 40 17.9 40 40s-17.9 40-40 40H128c-8.8 0-16 7.2-16 16s7.2 16 16 16h56c39.8 0 72-32.2 72-72z"]},vte={prefix:"fas",iconName:"users-gear",icon:[640,512,["users-cog"],"f509","M144 160A80 80 0 1 0 144 0a80 80 0 1 0 0 160zm368 0A80 80 0 1 0 512 0a80 80 0 1 0 0 160zM0 298.7C0 310.4 9.6 320 21.3 320H234.7c.2 0 .4 0 .7 0c-26.6-23.5-43.3-57.8-43.3-96c0-7.6 .7-15 1.9-22.3c-13.6-6.3-28.7-9.7-44.6-9.7H106.7C47.8 192 0 239.8 0 298.7zM320 320c24 0 45.9-8.8 62.7-23.3c2.5-3.7 5.2-7.3 8-10.7c2.7-3.3 5.7-6.1 9-8.3C410 262.3 416 243.9 416 224c0-53-43-96-96-96s-96 43-96 96s43 96 96 96zm65.4 60.2c-10.3-5.9-18.1-16.2-20.8-28.2H261.3C187.7 352 128 411.7 128 485.3c0 14.7 11.9 26.7 26.7 26.7H455.2c-2.1-5.2-3.2-10.9-3.2-16.4v-3c-1.3-.7-2.7-1.5-4-2.3l-2.6 1.5c-16.8 9.7-40.5 8-54.7-9.7c-4.5-5.6-8.6-11.5-12.4-17.6l-.1-.2-.1-.2-2.4-4.1-.1-.2-.1-.2c-3.4-6.2-6.4-12.6-9-19.3c-8.2-21.2 2.2-42.6 19-52.3l2.7-1.5c0-.8 0-1.5 0-2.3s0-1.5 0-2.3l-2.7-1.5zM533.3 192H490.7c-15.9 0-31 3.5-44.6 9.7c1.3 7.2 1.9 14.7 1.9 22.3c0 17.4-3.5 33.9-9.7 49c2.5 .9 4.9 2 7.1 3.3l2.6 1.5c1.3-.8 2.6-1.6 4-2.3v-3c0-19.4 13.3-39.1 35.8-42.6c7.9-1.2 16-1.9 24.2-1.9s16.3 .6 24.2 1.9c22.5 3.5 35.8 23.2 35.8 42.6v3c1.3 .7 2.7 1.5 4 2.3l2.6-1.5c16.8-9.7 40.5-8 54.7 9.7c2.3 2.8 4.5 5.8 6.6 8.7c-2.1-57.1-49-102.7-106.6-102.7zm91.3 163.9c6.3-3.6 9.5-11.1 6.8-18c-2.1-5.5-4.6-10.8-7.4-15.9l-2.3-4c-3.1-5.1-6.5-9.9-10.2-14.5c-4.6-5.7-12.7-6.7-19-3l-2.9 1.7c-9.2 5.3-20.4 4-29.6-1.3s-16.1-14.5-16.1-25.1v-3.4c0-7.3-4.9-13.8-12.1-14.9c-6.5-1-13.1-1.5-19.9-1.5s-13.4 .5-19.9 1.5c-7.2 1.1-12.1 7.6-12.1 14.9v3.4c0 10.6-6.9 19.8-16.1 25.1s-20.4 6.6-29.6 1.3l-2.9-1.7c-6.3-3.6-14.4-2.6-19 3c-3.7 4.6-7.1 9.5-10.2 14.6l-2.3 3.9c-2.8 5.1-5.3 10.4-7.4 15.9c-2.6 6.8 .5 14.3 6.8 17.9l2.9 1.7c9.2 5.3 13.7 15.8 13.7 26.4s-4.5 21.1-13.7 26.4l-3 1.7c-6.3 3.6-9.5 11.1-6.8 17.9c2.1 5.5 4.6 10.7 7.4 15.8l2.4 4.1c3 5.1 6.4 9.9 10.1 14.5c4.6 5.7 12.7 6.7 19 3l2.9-1.7c9.2-5.3 20.4-4 29.6 1.3s16.1 14.5 16.1 25.1v3.4c0 7.3 4.9 13.8 12.1 14.9c6.5 1 13.1 1.5 19.9 1.5s13.4-.5 19.9-1.5c7.2-1.1 12.1-7.6 12.1-14.9v-3.4c0-10.6 6.9-19.8 16.1-25.1s20.4-6.6 29.6-1.3l2.9 1.7c6.3 3.6 14.4 2.6 19-3c3.7-4.6 7.1-9.4 10.1-14.5l2.4-4.2c2.8-5.1 5.3-10.3 7.4-15.8c2.6-6.8-.5-14.3-6.8-17.9l-3-1.7c-9.2-5.3-13.7-15.8-13.7-26.4s4.5-21.1 13.7-26.4l3-1.7zM472 384a40 40 0 1 1 80 0 40 40 0 1 1 -80 0z"]};function YI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YI(Object(n),!0).forEach(function(r){Jn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function Jn(t,e,n){return e=wte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bte(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ete(t,e){if(t==null)return{};var n=bte(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tte(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wte(t){var e=Tte(t,"string");return typeof e=="symbol"?e:String(e)}var Ste=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IP={exports:{}};(function(t){(function(e){var n=function(y,_,v){if(!c(_)||h(_)||d(_)||f(_)||l(_))return _;var w,S=0,A=0;if(u(_))for(w=[],A=_.length;S<A;S++)w.push(n(y,_[S],v));else{w={};for(var P in _)Object.prototype.hasOwnProperty.call(_,P)&&(w[y(P,v)]=n(y,_[P],v))}return w},r=function(y,_){_=_||{};var v=_.separator||"_",w=_.split||/(?=[A-Z])/;return y.split(w).join(v)},i=function(y){return p(y)?y:(y=y.replace(/[\-_\s]+(.)?/g,function(_,v){return v?v.toUpperCase():""}),y.substr(0,1).toLowerCase()+y.substr(1))},s=function(y){var _=i(y);return _.substr(0,1).toUpperCase()+_.substr(1)},o=function(y,_){return r(y,_).toLowerCase()},a=Object.prototype.toString,l=function(y){return typeof y=="function"},c=function(y){return y===Object(y)},u=function(y){return a.call(y)=="[object Array]"},h=function(y){return a.call(y)=="[object Date]"},d=function(y){return a.call(y)=="[object RegExp]"},f=function(y){return a.call(y)=="[object Boolean]"},p=function(y){return y=y-0,y===y},m=function(y,_){var v=_&&"process"in _?_.process:_;return typeof v!="function"?y:function(w,S){return v(w,y,S)}},g={camelize:i,decamelize:o,pascalize:s,depascalize:o,camelizeKeys:function(y,_){return n(m(i,_),y)},decamelizeKeys:function(y,_){return n(m(o,_),y,_)},pascalizeKeys:function(y,_){return n(m(s,_),y)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=g:e.humps=g})(Ste)})(IP);var Ite=IP.exports,Ate=["class","style"];function Cte(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=Ite.camelize(n.slice(0,r)),s=n.slice(r+1).trim();return e[i]=s,e},{})}function kte(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function AP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(l){return AP(l)}),i=Object.keys(t.attributes||{}).reduce(function(l,c){var u=t.attributes[c];switch(c){case"class":l.class=kte(u);break;case"style":l.style=Cte(u);break;default:l.attrs[c]=u}return l},{attrs:{},class:{},style:{}});n.class;var s=n.style,o=s===void 0?{}:s,a=Ete(n,Ate);return Go(t.tag,Hi(Hi(Hi({},e),{},{class:i.class,style:Hi(Hi({},i.style),o)},i.attrs),a),r)}var CP=!1;try{CP=!0}catch{}function Rte(){if(!CP&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function by(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Jn({},t,e):{}}function Ote(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Jn(e,"fa-".concat(t.size),t.size!==null),Jn(e,"fa-rotate-".concat(t.rotation),t.rotation!==null),Jn(e,"fa-pull-".concat(t.pull),t.pull!==null),Jn(e,"fa-swap-opacity",t.swapOpacity),Jn(e,"fa-bounce",t.bounce),Jn(e,"fa-shake",t.shake),Jn(e,"fa-beat",t.beat),Jn(e,"fa-fade",t.fade),Jn(e,"fa-beat-fade",t.beatFade),Jn(e,"fa-flash",t.flash),Jn(e,"fa-spin-pulse",t.spinPulse),Jn(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function JI(t){if(t&&Ep(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(Rv.icon)return Rv.icon(t);if(t===null)return null;if(Ep(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var Nte=Ut({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,i=ct(function(){return JI(e.icon)}),s=ct(function(){return by("classes",Ote(e))}),o=ct(function(){return by("transform",typeof e.transform=="string"?Rv.transform(e.transform):e.transform)}),a=ct(function(){return by("mask",JI(e.mask))}),l=ct(function(){return Fee(i.value,Hi(Hi(Hi(Hi({},s.value),o.value),a.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});Qi(l,function(u){if(!u)return Rte("Could not find one or more icon(s)",i.value,a.value)},{immediate:!0});var c=ct(function(){return l.value?AP(l.value.abstract[0],{},r):null});return function(){return c.value}}});Je.add(Qee);Je.add(ate);Je.add(Kee);Je.add(ote);Je.add(Zee);Je.add(hte);Je.add(Jee);Je.add(Uee);Je.add(Bee);Je.add(Wee);Je.add(cte);Je.add(Yee);Je.add(fte);Je.add(vte);Je.add(dte);Je.add(zee);Je.add(gte);Je.add(pte);Je.add($ee);Je.add(jee);Je.add(yte);Je.add(ete);Je.add(tte);Je.add(nte);Je.add(mte);Je.add(ste);Je.add(ute);Je.add(Hee);Je.add(qee);Je.add(rte);Je.add(_te);Je.add(lte);Je.add(ite);Je.add(Gee);Je.add(Xee);const Gh=o4(aH);Gh.use(h4());Gh.use(Z7,{firebaseApp:qO,modules:[Y7()]});Gh.use(QM);Gh.component("FontAwesomeIcon",Nte);Gh.mount("#app");
