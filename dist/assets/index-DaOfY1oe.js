(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fv(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const wt={},nl=[],Rr=()=>{},jP=()=>!1,Cp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Uv=t=>t.startsWith("onUpdate:"),Zt=Object.assign,Bv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},WP=Object.prototype.hasOwnProperty,it=(t,e)=>WP.call(t,e),Se=Array.isArray,rl=t=>hh(t)==="[object Map]",kp=t=>hh(t)==="[object Set]",Wb=t=>hh(t)==="[object Date]",Pe=t=>typeof t=="function",Ht=t=>typeof t=="string",Zs=t=>typeof t=="symbol",yt=t=>t!==null&&typeof t=="object",$v=t=>(yt(t)||Pe(t))&&Pe(t.then)&&Pe(t.catch),cA=Object.prototype.toString,hh=t=>cA.call(t),qP=t=>hh(t).slice(8,-1),uA=t=>hh(t)==="[object Object]",Hv=t=>Ht(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,qc=Fv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},GP=/-(\w)/g,Ii=Rp(t=>t.replace(GP,(e,n)=>n?n.toUpperCase():"")),KP=/\B([A-Z])/g,Ea=Rp(t=>t.replace(KP,"-$1").toLowerCase()),Op=Rp(t=>t.charAt(0).toUpperCase()+t.slice(1)),tg=Rp(t=>t?`on${Op(t)}`:""),eo=(t,e)=>!Object.is(t,e),Bd=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},hf=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Cy=t=>{const e=parseFloat(t);return isNaN(e)?t:e},hA=t=>{const e=Ht(t)?Number(t):NaN;return isNaN(e)?t:e};let qb;const dA=()=>qb||(qb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rr(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Ht(r)?XP(r):rr(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Ht(t)||yt(t))return t}const YP=/;(?![^(]*\))/g,JP=/:([^]+)/,QP=/\/\*[^]*?\*\//g;function XP(t){const e={};return t.replace(QP,"").split(YP).forEach(n=>{if(n){const r=n.split(JP);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Mr(t){let e="";if(Ht(t))e=t;else if(Se(t))for(let n=0;n<t.length;n++){const r=Mr(t[n]);r&&(e+=r+" ")}else if(yt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const ZP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ex=Fv(ZP);function fA(t){return!!t||t===""}function tx(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Np(t[r],e[r]);return n}function Np(t,e){if(t===e)return!0;let n=Wb(t),r=Wb(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Zs(t),r=Zs(e),n||r)return t===e;if(n=Se(t),r=Se(e),n||r)return n&&r?tx(t,e):!1;if(n=yt(t),r=yt(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Np(t[o],e[o]))return!1}}return String(t)===String(e)}function pA(t,e){return t.findIndex(n=>Np(n,e))}const ee=t=>Ht(t)?t:t==null?"":Se(t)||yt(t)&&(t.toString===cA||!Pe(t.toString))?JSON.stringify(t,mA,2):String(t),mA=(t,e)=>e&&e.__v_isRef?mA(t,e.value):rl(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[ng(r,s)+" =>"]=i,n),{})}:kp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ng(n))}:Zs(e)?ng(e):yt(e)&&!Se(e)&&!uA(e)?String(e):e,ng=(t,e="")=>{var n;return Zs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ur;class gA{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ur,!e&&ur&&(this.index=(ur.scopes||(ur.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=ur;try{return ur=this,e()}finally{ur=n}}}on(){ur=this}off(){ur=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function zv(t){return new gA(t)}function nx(t,e=ur){e&&e.active&&e.effects.push(t)}function Mp(){return ur}function jv(t){ur&&ur.cleanups.push(t)}let Ko;class Wv{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,nx(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Ta();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(rx(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),wa()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=js,n=Ko;try{return js=!0,Ko=this,this._runnings++,Gb(this),this.fn()}finally{Kb(this),this._runnings--,Ko=n,js=e}}stop(){var e;this.active&&(Gb(this),Kb(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function rx(t){return t.value}function Gb(t){t._trackId++,t._depsLength=0}function Kb(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)yA(t.deps[e],t);t.deps.length=t._depsLength}}function yA(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let js=!0,ky=0;const _A=[];function Ta(){_A.push(js),js=!1}function wa(){const t=_A.pop();js=t===void 0?!0:t}function qv(){ky++}function Gv(){for(ky--;!ky&&Ry.length;)Ry.shift()()}function vA(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&yA(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Ry=[];function bA(t,e,n){qv();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Ry.push(r.scheduler)))}Gv()}const EA=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},df=new WeakMap,Yo=Symbol(""),Oy=Symbol("");function ir(t,e,n){if(js&&Ko){let r=df.get(t);r||df.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=EA(()=>r.delete(n))),vA(Ko,i)}}function Xi(t,e,n,r,i,s){const o=df.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Se(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!Zs(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Se(t)?Hv(n)&&a.push(o.get("length")):(a.push(o.get(Yo)),rl(t)&&a.push(o.get(Oy)));break;case"delete":Se(t)||(a.push(o.get(Yo)),rl(t)&&a.push(o.get(Oy)));break;case"set":rl(t)&&a.push(o.get(Yo));break}qv();for(const l of a)l&&bA(l,4);Gv()}function ix(t,e){var n;return(n=df.get(t))==null?void 0:n.get(e)}const sx=Fv("__proto__,__v_isRef,__isVue"),TA=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Zs)),Yb=ox();function ox(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Xe(this);for(let s=0,o=this.length;s<o;s++)ir(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Xe)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Ta(),qv();const r=Xe(this)[e].apply(this,n);return Gv(),wa(),r}}),t}function ax(t){const e=Xe(this);return ir(e,"has",t),e.hasOwnProperty(t)}class wA{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?bx:CA:s?AA:IA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Se(e);if(!i){if(o&&it(Yb,n))return Reflect.get(Yb,n,r);if(n==="hasOwnProperty")return ax}const a=Reflect.get(e,n,r);return(Zs(n)?TA.has(n):sx(n))||(i||ir(e,"get",n),s)?a:Pt(a)?o&&Hv(n)?a:a.value:yt(a)?i?Jv(a):Ql(a):a}}class SA extends wA{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=wl(s);if(!ff(r)&&!wl(r)&&(s=Xe(s),r=Xe(r)),!Se(e)&&Pt(s)&&!Pt(r))return l?!1:(s.value=r,!0)}const o=Se(e)&&Hv(n)?Number(n)<e.length:it(e,n),a=Reflect.set(e,n,r,i);return e===Xe(i)&&(o?eo(r,s)&&Xi(e,"set",n,r):Xi(e,"add",n,r)),a}deleteProperty(e,n){const r=it(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Xi(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Zs(n)||!TA.has(n))&&ir(e,"has",n),r}ownKeys(e){return ir(e,"iterate",Se(e)?"length":Yo),Reflect.ownKeys(e)}}class lx extends wA{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const cx=new SA,ux=new lx,hx=new SA(!0),Kv=t=>t,Pp=t=>Reflect.getPrototypeOf(t);function Zh(t,e,n=!1,r=!1){t=t.__v_raw;const i=Xe(t),s=Xe(e);n||(eo(e,s)&&ir(i,"get",e),ir(i,"get",s));const{has:o}=Pp(i),a=r?Kv:n?Xv:wu;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function ed(t,e=!1){const n=this.__v_raw,r=Xe(n),i=Xe(t);return e||(eo(t,i)&&ir(r,"has",t),ir(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function td(t,e=!1){return t=t.__v_raw,!e&&ir(Xe(t),"iterate",Yo),Reflect.get(t,"size",t)}function Jb(t){t=Xe(t);const e=Xe(this);return Pp(e).has.call(e,t)||(e.add(t),Xi(e,"add",t,t)),this}function Qb(t,e){e=Xe(e);const n=Xe(this),{has:r,get:i}=Pp(n);let s=r.call(n,t);s||(t=Xe(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?eo(e,o)&&Xi(n,"set",t,e):Xi(n,"add",t,e),this}function Xb(t){const e=Xe(this),{has:n,get:r}=Pp(e);let i=n.call(e,t);i||(t=Xe(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Xi(e,"delete",t,void 0),s}function Zb(){const t=Xe(this),e=t.size!==0,n=t.clear();return e&&Xi(t,"clear",void 0,void 0),n}function nd(t,e){return function(r,i){const s=this,o=s.__v_raw,a=Xe(o),l=e?Kv:t?Xv:wu;return!t&&ir(a,"iterate",Yo),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function rd(t,e,n){return function(...r){const i=this.__v_raw,s=Xe(i),o=rl(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?Kv:e?Xv:wu;return!e&&ir(s,"iterate",l?Oy:Yo),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ys(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function dx(){const t={get(s){return Zh(this,s)},get size(){return td(this)},has:ed,add:Jb,set:Qb,delete:Xb,clear:Zb,forEach:nd(!1,!1)},e={get(s){return Zh(this,s,!1,!0)},get size(){return td(this)},has:ed,add:Jb,set:Qb,delete:Xb,clear:Zb,forEach:nd(!1,!0)},n={get(s){return Zh(this,s,!0)},get size(){return td(this,!0)},has(s){return ed.call(this,s,!0)},add:ys("add"),set:ys("set"),delete:ys("delete"),clear:ys("clear"),forEach:nd(!0,!1)},r={get(s){return Zh(this,s,!0,!0)},get size(){return td(this,!0)},has(s){return ed.call(this,s,!0)},add:ys("add"),set:ys("set"),delete:ys("delete"),clear:ys("clear"),forEach:nd(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=rd(s,!1,!1),n[s]=rd(s,!0,!1),e[s]=rd(s,!1,!0),r[s]=rd(s,!0,!0)}),[t,n,e,r]}const[fx,px,mx,gx]=dx();function Yv(t,e){const n=e?t?gx:mx:t?px:fx;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(it(n,i)&&i in r?n:r,i,s)}const yx={get:Yv(!1,!1)},_x={get:Yv(!1,!0)},vx={get:Yv(!0,!1)},IA=new WeakMap,AA=new WeakMap,CA=new WeakMap,bx=new WeakMap;function Ex(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Tx(t){return t.__v_skip||!Object.isExtensible(t)?0:Ex(qP(t))}function Ql(t){return wl(t)?t:Qv(t,!1,cx,yx,IA)}function kA(t){return Qv(t,!1,hx,_x,AA)}function Jv(t){return Qv(t,!0,ux,vx,CA)}function Qv(t,e,n,r,i){if(!yt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=Tx(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Zi(t){return wl(t)?Zi(t.__v_raw):!!(t&&t.__v_isReactive)}function wl(t){return!!(t&&t.__v_isReadonly)}function ff(t){return!!(t&&t.__v_isShallow)}function RA(t){return Zi(t)||wl(t)}function Xe(t){const e=t&&t.__v_raw;return e?Xe(e):t}function dh(t){return Object.isExtensible(t)&&hf(t,"__v_skip",!0),t}const wu=t=>yt(t)?Ql(t):t,Xv=t=>yt(t)?Jv(t):t;class OA{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Wv(()=>e(this._value),()=>Gc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Xe(this);return(!e._cacheable||e.effect.dirty)&&eo(e._value,e._value=e.effect.run())&&Gc(e,4),Zv(e),e.effect._dirtyLevel>=2&&Gc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function wx(t,e,n=!1){let r,i;const s=Pe(t);return s?(r=t,i=Rr):(r=t.get,i=t.set),new OA(r,i,s||!i,n)}function Zv(t){var e;js&&Ko&&(t=Xe(t),vA(Ko,(e=t.dep)!=null?e:t.dep=EA(()=>t.dep=void 0,t instanceof OA?t:void 0)))}function Gc(t,e=4,n){t=Xe(t);const r=t.dep;r&&bA(r,e)}function Pt(t){return!!(t&&t.__v_isRef===!0)}function ie(t){return MA(t,!1)}function NA(t){return MA(t,!0)}function MA(t,e){return Pt(t)?t:new Sx(t,e)}class Sx{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Xe(e),this._value=n?e:wu(e)}get value(){return Zv(this),this._value}set value(e){const n=this.__v_isShallow||ff(e)||wl(e);e=n?e:Xe(e),eo(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:wu(e),Gc(this,4))}}function j(t){return Pt(t)?t.value:t}function $i(t){return Pe(t)?t():j(t)}const Ix={get:(t,e,n)=>j(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Pt(i)&&!Pt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function PA(t){return Zi(t)?t:new Proxy(t,Ix)}class Ax{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>Zv(this),()=>Gc(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function xA(t){return new Ax(t)}function Cx(t){const e=Se(t)?new Array(t.length):{};for(const n in t)e[n]=LA(t,n);return e}class kx{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ix(Xe(this._object),this._key)}}class Rx{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function DA(t,e,n){return Pt(t)?t:Pe(t)?new Rx(t):yt(t)&&arguments.length>1?LA(t,e,n):ie(t)}function LA(t,e,n){const r=t[e];return Pt(r)?r:new kx(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ws(t,e,n,r){try{return r?t(...r):t()}catch(i){fh(i,e,n)}}function Pr(t,e,n,r){if(Pe(t)){const s=Ws(t,e,n,r);return s&&$v(s)&&s.catch(o=>{fh(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Pr(t[s],e,n,r));return i}function fh(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Ws(l,null,10,[t,o,a]);return}}Ox(t,n,i,r)}function Ox(t,e,n,r=!0){console.error(t)}let Su=!1,Ny=!1;const xn=[];let oi=0;const il=[];let As=null,No=0;const VA=Promise.resolve();let e1=null;function Sa(t){const e=e1||VA;return t?e.then(this?t.bind(this):t):e}function Nx(t){let e=oi+1,n=xn.length;for(;e<n;){const r=e+n>>>1,i=xn[r],s=Iu(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function t1(t){(!xn.length||!xn.includes(t,Su&&t.allowRecurse?oi+1:oi))&&(t.id==null?xn.push(t):xn.splice(Nx(t.id),0,t),FA())}function FA(){!Su&&!Ny&&(Ny=!0,e1=VA.then(BA))}function Mx(t){const e=xn.indexOf(t);e>oi&&xn.splice(e,1)}function My(t){Se(t)?il.push(...t):(!As||!As.includes(t,t.allowRecurse?No+1:No))&&il.push(t),FA()}function eE(t,e,n=Su?oi+1:0){for(;n<xn.length;n++){const r=xn[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;xn.splice(n,1),n--,r()}}}function UA(t){if(il.length){const e=[...new Set(il)].sort((n,r)=>Iu(n)-Iu(r));if(il.length=0,As){As.push(...e);return}for(As=e,No=0;No<As.length;No++)As[No]();As=null,No=0}}const Iu=t=>t.id==null?1/0:t.id,Px=(t,e)=>{const n=Iu(t)-Iu(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function BA(t){Ny=!1,Su=!0,xn.sort(Px);try{for(oi=0;oi<xn.length;oi++){const e=xn[oi];e&&e.active!==!1&&Ws(e,null,14)}}finally{oi=0,xn.length=0,UA(),Su=!1,e1=null,(xn.length||il.length)&&BA()}}function xx(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||wt;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||wt;d&&(i=n.map(f=>Ht(f)?f.trim():f)),h&&(i=n.map(Cy))}let a,l=r[a=tg(e)]||r[a=tg(Ii(e))];!l&&s&&(l=r[a=tg(Ea(e))]),l&&Pr(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Pr(c,t,6,i)}}function $A(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Pe(t)){const l=c=>{const u=$A(c,e,!0);u&&(a=!0,Zt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(yt(t)&&r.set(t,null),null):(Se(s)?s.forEach(l=>o[l]=null):Zt(o,s),yt(t)&&r.set(t,o),o)}function xp(t,e){return!t||!Cp(e)?!1:(e=e.slice(2).replace(/Once$/,""),it(t,e[0].toLowerCase()+e.slice(1))||it(t,Ea(e))||it(t,e))}let Kt=null,Dp=null;function pf(t){const e=Kt;return Kt=t,Dp=t&&t.type.__scopeId||null,e}function Xl(t){Dp=t}function Zl(){Dp=null}function ct(t,e=Kt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&gE(-1);const s=pf(e);let o;try{o=t(...i)}finally{pf(s),r._d&&gE(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function rg(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=t;let g,y;const _=pf(t);try{if(n.shapeFlag&4){const I=i||r,S=I;g=Br(u.call(S,I,h,s,f,d,p)),y=l}else{const I=e;g=Br(I.length>1?I(s,{attrs:l,slots:a,emit:c}):I(s,null)),y=e.props?l:Lx(l)}}catch(I){Qc.length=0,fh(I,t,1),g=Ee(tr)}let v=g;if(y&&m!==!1){const I=Object.keys(y),{shapeFlag:S}=v;I.length&&S&7&&(o&&I.some(Uv)&&(y=Vx(y,o)),v=to(v,y))}return n.dirs&&(v=to(v),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&(v.transition=n.transition),g=v,pf(_),g}function Dx(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Cu(i)){if(i.type!==tr||i.children==="v-if"){if(n)return;n=i}}else return}return n}const Lx=t=>{let e;for(const n in t)(n==="class"||n==="style"||Cp(n))&&((e||(e={}))[n]=t[n]);return e},Vx=(t,e)=>{const n={};for(const r in t)(!Uv(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Fx(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?tE(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!xp(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?tE(r,o,c):!0:!!o;return!1}function tE(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!xp(n,s))return!0}return!1}function n1({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const HA="components";function sr(t,e){return Bx(HA,t,!0,e)||t}const Ux=Symbol.for("v-ndc");function Bx(t,e,n=!0,r=!1){const i=Kt||ln;if(i){const s=i.type;if(t===HA){const a=HD(s,!1);if(a&&(a===e||a===Ii(e)||a===Op(Ii(e))))return s}const o=nE(i[t]||s[t],e)||nE(i.appContext[t],e);return!o&&r?s:o}}function nE(t,e){return t&&(t[e]||t[Ii(e)]||t[Op(Ii(e))])}const $x=t=>t.__isSuspense;let Py=0;const Hx={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)zx(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}jx(t,e,n,r,i,o,a,l,c)}},hydrate:Wx,create:r1,normalize:qx},rE=Hx;function Au(t,e){const n=t.props&&t.props[e];Pe(n)&&n()}function zx(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:u}}=l,h=u("div"),d=t.suspense=r1(t,i,r,e,h,n,s,o,a,l);c(null,d.pendingBranch=t.ssContent,h,null,r,d,s,o),d.deps>0?(Au(t,"onPending"),Au(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),sl(d,t.ssFallback)):d.resolve(!1,!0)}function jx(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:y}=h;if(m)h.pendingBranch=d,ai(d,m)?(l(m,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():g&&(y||(l(p,f,n,r,i,null,s,o,a),sl(h,f)))):(h.pendingId=Py++,y?(h.isHydrating=!1,h.activeBranch=m):c(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),g?(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():(l(p,f,n,r,i,null,s,o,a),sl(h,f))):p&&ai(d,p)?(l(p,d,n,r,i,h,s,o,a),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0&&h.resolve()));else if(p&&ai(d,p))l(p,d,n,r,i,h,s,o,a),sl(h,d);else if(Au(e,"onPending"),h.pendingBranch=d,d.shapeFlag&512?h.pendingId=d.component.suspenseId:h.pendingId=Py++,l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0)h.resolve();else{const{timeout:_,pendingId:v}=h;_>0?setTimeout(()=>{h.pendingId===v&&h.fallback(f)},_):_===0&&h.fallback(f)}}function r1(t,e,n,r,i,s,o,a,l,c,u=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:m,remove:g}}=c;let y;const _=Kx(t);_&&e!=null&&e.pendingBranch&&(y=e.pendingId,e.deps++);const v=t.props?hA(t.props.timeout):void 0,I=s,S={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Py++,timeout:typeof v=="number"?v:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(C=!1,F=!1){const{vnode:N,activeBranch:A,pendingBranch:V,pendingId:z,effects:H,parentComponent:Z,container:M}=S;let D=!1;S.isHydrating?S.isHydrating=!1:C||(D=A&&V.transition&&V.transition.mode==="out-in",D&&(A.transition.afterLeave=()=>{z===S.pendingId&&(d(V,M,s===I?p(A):s,0),My(H))}),A&&(m(A.el)!==S.hiddenContainer&&(s=p(A)),f(A,Z,S,!0)),D||d(V,M,s,0)),sl(S,V),S.pendingBranch=null,S.isInFallback=!1;let k=S.parent,P=!1;for(;k;){if(k.pendingBranch){k.effects.push(...H),P=!0;break}k=k.parent}!P&&!D&&My(H),S.effects=[],_&&e&&e.pendingBranch&&y===e.pendingId&&(e.deps--,e.deps===0&&!F&&e.resolve()),Au(N,"onResolve")},fallback(C){if(!S.pendingBranch)return;const{vnode:F,activeBranch:N,parentComponent:A,container:V,namespace:z}=S;Au(F,"onFallback");const H=p(N),Z=()=>{S.isInFallback&&(h(null,C,V,H,A,null,z,a,l),sl(S,C))},M=C.transition&&C.transition.mode==="out-in";M&&(N.transition.afterLeave=Z),S.isInFallback=!0,f(N,A,null,!0),M||Z()},move(C,F,N){S.activeBranch&&d(S.activeBranch,C,F,N),S.container=C},next(){return S.activeBranch&&p(S.activeBranch)},registerDep(C,F){const N=!!S.pendingBranch;N&&S.deps++;const A=C.vnode.el;C.asyncDep.catch(V=>{fh(V,C,0)}).then(V=>{if(C.isUnmounted||S.isUnmounted||S.pendingId!==C.suspenseId)return;C.asyncResolved=!0;const{vnode:z}=C;jy(C,V,!1),A&&(z.el=A);const H=!A&&C.subTree.el;F(C,z,m(A||C.subTree.el),A?null:p(C.subTree),S,o,l),H&&g(H),n1(C,z.el),N&&--S.deps===0&&S.resolve()})},unmount(C,F){S.isUnmounted=!0,S.activeBranch&&f(S.activeBranch,n,C,F),S.pendingBranch&&f(S.pendingBranch,n,C,F)}};return S}function Wx(t,e,n,r,i,s,o,a,l){const c=e.suspense=r1(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),u}function qx(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=iE(r?n.default:n),t.ssFallback=r?iE(n.fallback):Ee(tr)}function iE(t){let e;if(Pe(t)){const n=Sl&&t._c;n&&(t._d=!1,O()),t=t(),n&&(t._d=!0,e=Or,oC())}return Se(t)&&(t=Dx(t)),t=Br(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function Gx(t,e){e&&e.pendingBranch?Se(t)?e.effects.push(...t):e.effects.push(t):My(t)}function sl(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,n1(r,i))}function Kx(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}const Yx=Symbol.for("v-scx"),Jx=()=>jn(Yx);function zA(t,e){return i1(t,null,e)}const id={};function _i(t,e,n){return i1(t,e,n)}function i1(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=wt){if(e&&s){const C=e;e=(...F)=>{C(...F),S()}}const l=ln,c=C=>r===!0?C:Lo(C,r===!1?1:void 0);let u,h=!1,d=!1;if(Pt(t)?(u=()=>t.value,h=ff(t)):Zi(t)?(u=()=>c(t),h=!0):Se(t)?(d=!0,h=t.some(C=>Zi(C)||ff(C)),u=()=>t.map(C=>{if(Pt(C))return C.value;if(Zi(C))return c(C);if(Pe(C))return Ws(C,l,2)})):Pe(t)?e?u=()=>Ws(t,l,2):u=()=>(f&&f(),Pr(t,l,3,[p])):u=Rr,e&&r){const C=u;u=()=>Lo(C())}let f,p=C=>{f=v.onStop=()=>{Ws(C,l,4),f=v.onStop=void 0}},m;if($p)if(p=Rr,e?n&&Pr(e,l,3,[u(),d?[]:void 0,p]):u(),i==="sync"){const C=Jx();m=C.__watcherHandles||(C.__watcherHandles=[])}else return Rr;let g=d?new Array(t.length).fill(id):id;const y=()=>{if(!(!v.active||!v.dirty))if(e){const C=v.run();(r||h||(d?C.some((F,N)=>eo(F,g[N])):eo(C,g)))&&(f&&f(),Pr(e,l,3,[C,g===id?void 0:d&&g[0]===id?[]:g,p]),g=C)}else v.run()};y.allowRecurse=!!e;let _;i==="sync"?_=y:i==="post"?_=()=>Xn(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),_=()=>t1(y));const v=new Wv(u,Rr,_),I=Mp(),S=()=>{v.stop(),I&&Bv(I.effects,v)};return e?n?y():g=v.run():i==="post"?Xn(v.run.bind(v),l&&l.suspense):v.run(),m&&m.push(S),S}function Qx(t,e,n){const r=this.proxy,i=Ht(t)?t.includes(".")?jA(r,t):()=>r[t]:t.bind(r,r);let s;Pe(e)?s=e:(s=e.handler,n=e);const o=oa(this),a=i1(i,s.bind(r),n);return o(),a}function jA(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Lo(t,e,n=0,r){if(!yt(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),Pt(t))Lo(t.value,e,n,r);else if(Se(t))for(let i=0;i<t.length;i++)Lo(t[i],e,n,r);else if(kp(t)||rl(t))t.forEach(i=>{Lo(i,e,n,r)});else if(uA(t))for(const i in t)Lo(t[i],e,n,r);return t}function $t(t,e){if(Kt===null)return t;const n=Hp(Kt)||Kt.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=wt]=e[i];s&&(Pe(s)&&(s={mounted:s,updated:s}),s.deep&&Lo(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function To(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Ta(),Pr(l,n,8,[t.el,a,t,e]),wa())}}const Cs=Symbol("_leaveCb"),sd=Symbol("_enterCb");function Xx(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ec(()=>{t.isMounted=!0}),ph(()=>{t.isUnmounting=!0}),t}const Ir=[Function,Array],WA={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ir,onEnter:Ir,onAfterEnter:Ir,onEnterCancelled:Ir,onBeforeLeave:Ir,onLeave:Ir,onAfterLeave:Ir,onLeaveCancelled:Ir,onBeforeAppear:Ir,onAppear:Ir,onAfterAppear:Ir,onAppearCancelled:Ir},Zx={name:"BaseTransition",props:WA,setup(t,{slots:e}){const n=Ia(),r=Xx();return()=>{const i=e.default&&GA(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const d of i)if(d.type!==tr){s=d;break}}const o=Xe(t),{mode:a}=o;if(r.isLeaving)return ig(s);const l=sE(s);if(!l)return ig(s);const c=xy(l,o,r,n);Dy(l,c);const u=n.subTree,h=u&&sE(u);if(h&&h.type!==tr&&!ai(l,h)){const d=xy(h,o,r,n);if(Dy(h,d),a==="out-in")return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},ig(s);a==="in-out"&&l.type!==tr&&(d.delayLeave=(f,p,m)=>{const g=qA(r,h);g[String(h.key)]=h,f[Cs]=()=>{p(),f[Cs]=void 0,delete c.delayedLeave},c.delayedLeave=m})}return s}}},eD=Zx;function qA(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function xy(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:y,onAppearCancelled:_}=e,v=String(t.key),I=qA(n,t),S=(N,A)=>{N&&Pr(N,r,9,A)},C=(N,A)=>{const V=A[1];S(N,A),Se(N)?N.every(z=>z.length<=1)&&V():N.length<=1&&V()},F={mode:s,persisted:o,beforeEnter(N){let A=a;if(!n.isMounted)if(i)A=m||a;else return;N[Cs]&&N[Cs](!0);const V=I[v];V&&ai(t,V)&&V.el[Cs]&&V.el[Cs](),S(A,[N])},enter(N){let A=l,V=c,z=u;if(!n.isMounted)if(i)A=g||l,V=y||c,z=_||u;else return;let H=!1;const Z=N[sd]=M=>{H||(H=!0,M?S(z,[N]):S(V,[N]),F.delayedLeave&&F.delayedLeave(),N[sd]=void 0)};A?C(A,[N,Z]):Z()},leave(N,A){const V=String(t.key);if(N[sd]&&N[sd](!0),n.isUnmounting)return A();S(h,[N]);let z=!1;const H=N[Cs]=Z=>{z||(z=!0,A(),Z?S(p,[N]):S(f,[N]),N[Cs]=void 0,I[V]===t&&delete I[V])};I[V]=t,d?C(d,[N,H]):H()},clone(N){return xy(N,e,n,r)}};return F}function ig(t){if(Lp(t))return t=to(t),t.children=null,t}function sE(t){return Lp(t)?t.children?t.children[0]:void 0:t}function Dy(t,e){t.shapeFlag&6&&t.component?Dy(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function GA(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===se?(o.patchFlag&128&&i++,r=r.concat(GA(o.children,e,a))):(e||o.type!==tr)&&r.push(a!=null?to(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ut(t,e){return Pe(t)?Zt({name:t.name},e,{setup:t}):t}const Kc=t=>!!t.type.__asyncLoader,Lp=t=>t.type.__isKeepAlive;function tD(t,e){KA(t,"a",e)}function nD(t,e){KA(t,"da",e)}function KA(t,e,n=ln){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Vp(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Lp(i.parent.vnode)&&rD(r,e,n,i),i=i.parent}}function rD(t,e,n,r){const i=Vp(e,t,r,!0);s1(()=>{Bv(r[e],i)},n)}function Vp(t,e,n=ln,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Ta();const a=oa(n),l=Pr(e,n,t,o);return a(),wa(),l});return r?i.unshift(s):i.push(s),s}}const ds=t=>(e,n=ln)=>(!$p||t==="sp")&&Vp(t,(...r)=>e(...r),n),iD=ds("bm"),ec=ds("m"),sD=ds("bu"),oD=ds("u"),ph=ds("bum"),s1=ds("um"),YA=ds("sp"),aD=ds("rtg"),lD=ds("rtc");function cD(t,e=ln){Vp("ec",t,e)}function st(t,e,n,r){let i;const s=n&&n[r];if(Se(t)||Ht(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(yt(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function rn(t,e,n={},r,i){if(Kt.isCE||Kt.parent&&Kc(Kt.parent)&&Kt.parent.isCE)return e!=="default"&&(n.name=e),Ee("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),O();const o=s&&JA(s(n)),a=We(se,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function JA(t){return t.some(e=>Cu(e)?!(e.type===tr||e.type===se&&!JA(e.children)):!0)?t:null}const Ly=t=>t?cC(t)?Hp(t)||t.proxy:Ly(t.parent):null,Yc=Zt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ly(t.parent),$root:t=>Ly(t.root),$emit:t=>t.emit,$options:t=>o1(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,t1(t.update)}),$nextTick:t=>t.n||(t.n=Sa.bind(t.proxy)),$watch:t=>Qx.bind(t)}),sg=(t,e)=>t!==wt&&!t.__isScriptSetup&&it(t,e),uD={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(sg(r,e))return o[e]=1,r[e];if(i!==wt&&it(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&it(c,e))return o[e]=3,s[e];if(n!==wt&&it(n,e))return o[e]=4,n[e];Vy&&(o[e]=0)}}const u=Yc[e];let h,d;if(u)return e==="$attrs"&&ir(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==wt&&it(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,it(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return sg(i,e)?(i[e]=n,!0):r!==wt&&it(r,e)?(r[e]=n,!0):it(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==wt&&it(t,o)||sg(e,o)||(a=s[0])&&it(a,o)||it(r,o)||it(Yc,o)||it(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:it(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function oE(t){return Se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function qn(t){const e=Ia();let n=t();return zy(),$v(n)&&(n=n.catch(r=>{throw oa(e),r})),[n,()=>oa(e)]}let Vy=!0;function hD(t){const e=o1(t),n=t.proxy,r=t.ctx;Vy=!1,e.beforeCreate&&aE(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:y,beforeUnmount:_,destroyed:v,unmounted:I,render:S,renderTracked:C,renderTriggered:F,errorCaptured:N,serverPrefetch:A,expose:V,inheritAttrs:z,components:H,directives:Z,filters:M}=e;if(c&&dD(c,r,null),o)for(const P in o){const x=o[P];Pe(x)&&(r[P]=x.bind(n))}if(i){const P=i.call(n,n);yt(P)&&(t.data=Ql(P))}if(Vy=!0,s)for(const P in s){const x=s[P],re=Pe(x)?x.bind(n,n):Pe(x.get)?x.get.bind(n,n):Rr,_e=!Pe(x)&&Pe(x.set)?x.set.bind(n):Rr,Ne=ot({get:re,set:_e});Object.defineProperty(r,P,{enumerable:!0,configurable:!0,get:()=>Ne.value,set:$e=>Ne.value=$e})}if(a)for(const P in a)QA(a[P],r,n,P);if(l){const P=Pe(l)?l.call(n):l;Reflect.ownKeys(P).forEach(x=>{$d(x,P[x])})}u&&aE(u,t,"c");function k(P,x){Se(x)?x.forEach(re=>P(re.bind(n))):x&&P(x.bind(n))}if(k(iD,h),k(ec,d),k(sD,f),k(oD,p),k(tD,m),k(nD,g),k(cD,N),k(lD,C),k(aD,F),k(ph,_),k(s1,I),k(YA,A),Se(V))if(V.length){const P=t.exposed||(t.exposed={});V.forEach(x=>{Object.defineProperty(P,x,{get:()=>n[x],set:re=>n[x]=re})})}else t.exposed||(t.exposed={});S&&t.render===Rr&&(t.render=S),z!=null&&(t.inheritAttrs=z),H&&(t.components=H),Z&&(t.directives=Z)}function dD(t,e,n=Rr){Se(t)&&(t=Fy(t));for(const r in t){const i=t[r];let s;yt(i)?"default"in i?s=jn(i.from||r,i.default,!0):s=jn(i.from||r):s=jn(i),Pt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function aE(t,e,n){Pr(Se(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function QA(t,e,n,r){const i=r.includes(".")?jA(n,r):()=>n[r];if(Ht(t)){const s=e[t];Pe(s)&&_i(i,s)}else if(Pe(t))_i(i,t.bind(n));else if(yt(t))if(Se(t))t.forEach(s=>QA(s,e,n,r));else{const s=Pe(t.handler)?t.handler.bind(n):e[t.handler];Pe(s)&&_i(i,s,t)}}function o1(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>mf(l,c,o,!0)),mf(l,e,o)),yt(e)&&s.set(e,l),l}function mf(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&mf(t,s,n,!0),i&&i.forEach(o=>mf(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=fD[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const fD={data:lE,props:cE,emits:cE,methods:Rc,computed:Rc,beforeCreate:Bn,created:Bn,beforeMount:Bn,mounted:Bn,beforeUpdate:Bn,updated:Bn,beforeDestroy:Bn,beforeUnmount:Bn,destroyed:Bn,unmounted:Bn,activated:Bn,deactivated:Bn,errorCaptured:Bn,serverPrefetch:Bn,components:Rc,directives:Rc,watch:mD,provide:lE,inject:pD};function lE(t,e){return e?t?function(){return Zt(Pe(t)?t.call(this,this):t,Pe(e)?e.call(this,this):e)}:e:t}function pD(t,e){return Rc(Fy(t),Fy(e))}function Fy(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Bn(t,e){return t?[...new Set([].concat(t,e))]:e}function Rc(t,e){return t?Zt(Object.create(null),t,e):e}function cE(t,e){return t?Se(t)&&Se(e)?[...new Set([...t,...e])]:Zt(Object.create(null),oE(t),oE(e??{})):e}function mD(t,e){if(!t)return e;if(!e)return t;const n=Zt(Object.create(null),t);for(const r in e)n[r]=Bn(t[r],e[r]);return n}function XA(){return{app:null,config:{isNativeTag:jP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gD=0;function yD(t,e){return function(r,i=null){Pe(r)||(r=Zt({},r)),i!=null&&!yt(i)&&(i=null);const s=XA(),o=new WeakSet;let a=!1;const l=s.app={_uid:gD++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:jD,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Pe(c.install)?(o.add(c),c.install(l,...u)):Pe(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=Ee(r,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Hp(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=ol;ol=l;try{return c()}finally{ol=u}}};return l}}let ol=null;function $d(t,e){if(ln){let n=ln.provides;const r=ln.parent&&ln.parent.provides;r===n&&(n=ln.provides=Object.create(r)),n[t]=e}}function jn(t,e,n=!1){const r=ln||Kt;if(r||ol){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ol._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Pe(e)?e.call(r&&r.proxy):e}}function _D(){return!!(ln||Kt||ol)}function vD(t,e,n,r=!1){const i={},s={};hf(s,Up,1),t.propsDefaults=Object.create(null),ZA(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:kA(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function bD(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Xe(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(xp(t.emitsOptions,d))continue;const f=e[d];if(l)if(it(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const p=Ii(d);i[p]=Uy(l,a,p,f,t,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{ZA(t,e,i,s)&&(c=!0);let u;for(const h in a)(!e||!it(e,h)&&((u=Ea(h))===h||!it(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=Uy(l,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!it(e,h))&&(delete s[h],c=!0)}c&&Xi(t,"set","$attrs")}function ZA(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(qc(l))continue;const c=e[l];let u;i&&it(i,u=Ii(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:xp(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Xe(n),c=a||wt;for(let u=0;u<s.length;u++){const h=s[u];n[h]=Uy(i,l,h,c[h],t,!it(c,h))}}return o}function Uy(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=it(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Pe(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=oa(i);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Ea(n))&&(r=!0))}return r}function eC(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Pe(t)){const u=h=>{l=!0;const[d,f]=eC(h,e,!0);Zt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return yt(t)&&r.set(t,nl),nl;if(Se(s))for(let u=0;u<s.length;u++){const h=Ii(s[u]);uE(h)&&(o[h]=wt)}else if(s)for(const u in s){const h=Ii(u);if(uE(h)){const d=s[u],f=o[h]=Se(d)||Pe(d)?{type:d}:Zt({},d);if(f){const p=fE(Boolean,f.type),m=fE(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||it(f,"default"))&&a.push(h)}}}const c=[o,a];return yt(t)&&r.set(t,c),c}function uE(t){return t[0]!=="$"&&!qc(t)}function hE(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function dE(t,e){return hE(t)===hE(e)}function fE(t,e){return Se(e)?e.findIndex(n=>dE(n,t)):Pe(e)&&dE(e,t)?0:-1}const tC=t=>t[0]==="_"||t==="$stable",a1=t=>Se(t)?t.map(Br):[Br(t)],ED=(t,e,n)=>{if(e._n)return e;const r=ct((...i)=>a1(e(...i)),n);return r._c=!1,r},nC=(t,e,n)=>{const r=t._ctx;for(const i in t){if(tC(i))continue;const s=t[i];if(Pe(s))e[i]=ED(i,s,r);else if(s!=null){const o=a1(s);e[i]=()=>o}}},rC=(t,e)=>{const n=a1(e);t.slots.default=()=>n},TD=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Xe(e),hf(e,"_",n)):nC(e,t.slots={})}else t.slots={},e&&rC(t,e);hf(t.slots,Up,1)},wD=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=wt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Zt(i,e),!n&&a===1&&delete i._):(s=!e.$stable,nC(e,i)),o=e}else e&&(rC(t,e),o={default:1});if(s)for(const a in i)!tC(a)&&o[a]==null&&delete i[a]};function By(t,e,n,r,i=!1){if(Se(t)){t.forEach((d,f)=>By(d,e&&(Se(e)?e[f]:e),n,r,i));return}if(Kc(r)&&!i)return;const s=r.shapeFlag&4?Hp(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===wt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Ht(c)?(u[c]=null,it(h,c)&&(h[c]=null)):Pt(c)&&(c.value=null)),Pe(l))Ws(l,a,12,[o,u]);else{const d=Ht(l),f=Pt(l);if(d||f){const p=()=>{if(t.f){const m=d?it(h,l)?h[l]:u[l]:l.value;i?Se(m)&&Bv(m,s):Se(m)?m.includes(s)||m.push(s):d?(u[l]=[s],it(h,l)&&(h[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,it(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Xn(p,n)):p()}}}const Xn=Gx;function SD(t){return ID(t)}function ID(t,e){const n=dA();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Rr,insertStaticContent:p}=t,m=(w,E,R,B=null,U=null,Q=null,ne=void 0,Y=null,W=!!E.dynamicChildren)=>{if(w===E)return;w&&!ai(w,E)&&(B=$(w),$e(w,U,Q,!0),w=null),E.patchFlag===-2&&(W=!1,E.dynamicChildren=null);const{type:q,ref:le,shapeFlag:we}=E;switch(q){case Fp:g(w,E,R,B);break;case tr:y(w,E,R,B);break;case Hd:w==null&&_(E,R,B,ne);break;case se:H(w,E,R,B,U,Q,ne,Y,W);break;default:we&1?S(w,E,R,B,U,Q,ne,Y,W):we&6?Z(w,E,R,B,U,Q,ne,Y,W):(we&64||we&128)&&q.process(w,E,R,B,U,Q,ne,Y,W,ae)}le!=null&&U&&By(le,w&&w.ref,Q,E||w,!E)},g=(w,E,R,B)=>{if(w==null)r(E.el=a(E.children),R,B);else{const U=E.el=w.el;E.children!==w.children&&c(U,E.children)}},y=(w,E,R,B)=>{w==null?r(E.el=l(E.children||""),R,B):E.el=w.el},_=(w,E,R,B)=>{[w.el,w.anchor]=p(w.children,E,R,B,w.el,w.anchor)},v=({el:w,anchor:E},R,B)=>{let U;for(;w&&w!==E;)U=d(w),r(w,R,B),w=U;r(E,R,B)},I=({el:w,anchor:E})=>{let R;for(;w&&w!==E;)R=d(w),i(w),w=R;i(E)},S=(w,E,R,B,U,Q,ne,Y,W)=>{E.type==="svg"?ne="svg":E.type==="math"&&(ne="mathml"),w==null?C(E,R,B,U,Q,ne,Y,W):A(w,E,U,Q,ne,Y,W)},C=(w,E,R,B,U,Q,ne,Y)=>{let W,q;const{props:le,shapeFlag:we,transition:ve,dirs:Ie}=w;if(W=w.el=o(w.type,Q,le&&le.is,le),we&8?u(W,w.children):we&16&&N(w.children,W,null,B,U,og(w,Q),ne,Y),Ie&&To(w,null,B,"created"),F(W,w,w.scopeId,ne,B),le){for(const pt in le)pt!=="value"&&!qc(pt)&&s(W,pt,null,le[pt],Q,w.children,B,U,vt);"value"in le&&s(W,"value",null,le.value,Q),(q=le.onVnodeBeforeMount)&&ii(q,B,w)}Ie&&To(w,null,B,"beforeMount");const je=AD(U,ve);je&&ve.beforeEnter(W),r(W,E,R),((q=le&&le.onVnodeMounted)||je||Ie)&&Xn(()=>{q&&ii(q,B,w),je&&ve.enter(W),Ie&&To(w,null,B,"mounted")},U)},F=(w,E,R,B,U)=>{if(R&&f(w,R),B)for(let Q=0;Q<B.length;Q++)f(w,B[Q]);if(U){let Q=U.subTree;if(E===Q){const ne=U.vnode;F(w,ne,ne.scopeId,ne.slotScopeIds,U.parent)}}},N=(w,E,R,B,U,Q,ne,Y,W=0)=>{for(let q=W;q<w.length;q++){const le=w[q]=Y?ks(w[q]):Br(w[q]);m(null,le,E,R,B,U,Q,ne,Y)}},A=(w,E,R,B,U,Q,ne)=>{const Y=E.el=w.el;let{patchFlag:W,dynamicChildren:q,dirs:le}=E;W|=w.patchFlag&16;const we=w.props||wt,ve=E.props||wt;let Ie;if(R&&wo(R,!1),(Ie=ve.onVnodeBeforeUpdate)&&ii(Ie,R,E,w),le&&To(E,w,R,"beforeUpdate"),R&&wo(R,!0),q?V(w.dynamicChildren,q,Y,R,B,og(E,U),Q):ne||x(w,E,Y,null,R,B,og(E,U),Q,!1),W>0){if(W&16)z(Y,E,we,ve,R,B,U);else if(W&2&&we.class!==ve.class&&s(Y,"class",null,ve.class,U),W&4&&s(Y,"style",we.style,ve.style,U),W&8){const je=E.dynamicProps;for(let pt=0;pt<je.length;pt++){const Rt=je[pt],nn=we[Rt],Lr=ve[Rt];(Lr!==nn||Rt==="value")&&s(Y,Rt,nn,Lr,U,w.children,R,B,vt)}}W&1&&w.children!==E.children&&u(Y,E.children)}else!ne&&q==null&&z(Y,E,we,ve,R,B,U);((Ie=ve.onVnodeUpdated)||le)&&Xn(()=>{Ie&&ii(Ie,R,E,w),le&&To(E,w,R,"updated")},B)},V=(w,E,R,B,U,Q,ne)=>{for(let Y=0;Y<E.length;Y++){const W=w[Y],q=E[Y],le=W.el&&(W.type===se||!ai(W,q)||W.shapeFlag&70)?h(W.el):R;m(W,q,le,null,B,U,Q,ne,!0)}},z=(w,E,R,B,U,Q,ne)=>{if(R!==B){if(R!==wt)for(const Y in R)!qc(Y)&&!(Y in B)&&s(w,Y,R[Y],null,ne,E.children,U,Q,vt);for(const Y in B){if(qc(Y))continue;const W=B[Y],q=R[Y];W!==q&&Y!=="value"&&s(w,Y,q,W,ne,E.children,U,Q,vt)}"value"in B&&s(w,"value",R.value,B.value,ne)}},H=(w,E,R,B,U,Q,ne,Y,W)=>{const q=E.el=w?w.el:a(""),le=E.anchor=w?w.anchor:a("");let{patchFlag:we,dynamicChildren:ve,slotScopeIds:Ie}=E;Ie&&(Y=Y?Y.concat(Ie):Ie),w==null?(r(q,R,B),r(le,R,B),N(E.children||[],R,le,U,Q,ne,Y,W)):we>0&&we&64&&ve&&w.dynamicChildren?(V(w.dynamicChildren,ve,R,U,Q,ne,Y),(E.key!=null||U&&E===U.subTree)&&l1(w,E,!0)):x(w,E,R,le,U,Q,ne,Y,W)},Z=(w,E,R,B,U,Q,ne,Y,W)=>{E.slotScopeIds=Y,w==null?E.shapeFlag&512?U.ctx.activate(E,R,B,ne,W):M(E,R,B,U,Q,ne,W):D(w,E,W)},M=(w,E,R,B,U,Q,ne)=>{const Y=w.component=VD(w,B,U);if(Lp(w)&&(Y.ctx.renderer=ae),FD(Y),Y.asyncDep){if(U&&U.registerDep(Y,k),!w.el){const W=Y.subTree=Ee(tr);y(null,W,E,R)}}else k(Y,w,E,R,U,Q,ne)},D=(w,E,R)=>{const B=E.component=w.component;if(Fx(w,E,R))if(B.asyncDep&&!B.asyncResolved){P(B,E,R);return}else B.next=E,Mx(B.update),B.effect.dirty=!0,B.update();else E.el=w.el,B.vnode=E},k=(w,E,R,B,U,Q,ne)=>{const Y=()=>{if(w.isMounted){let{next:le,bu:we,u:ve,parent:Ie,vnode:je}=w;{const Pa=iC(w);if(Pa){le&&(le.el=je.el,P(w,le,ne)),Pa.asyncDep.then(()=>{w.isUnmounted||Y()});return}}let pt=le,Rt;wo(w,!1),le?(le.el=je.el,P(w,le,ne)):le=je,we&&Bd(we),(Rt=le.props&&le.props.onVnodeBeforeUpdate)&&ii(Rt,Ie,le,je),wo(w,!0);const nn=rg(w),Lr=w.subTree;w.subTree=nn,m(Lr,nn,h(Lr.el),$(Lr),w,U,Q),le.el=nn.el,pt===null&&n1(w,nn.el),ve&&Xn(ve,U),(Rt=le.props&&le.props.onVnodeUpdated)&&Xn(()=>ii(Rt,Ie,le,je),U)}else{let le;const{el:we,props:ve}=E,{bm:Ie,m:je,parent:pt}=w,Rt=Kc(E);if(wo(w,!1),Ie&&Bd(Ie),!Rt&&(le=ve&&ve.onVnodeBeforeMount)&&ii(le,pt,E),wo(w,!0),we&&qe){const nn=()=>{w.subTree=rg(w),qe(we,w.subTree,w,U,null)};Rt?E.type.__asyncLoader().then(()=>!w.isUnmounted&&nn()):nn()}else{const nn=w.subTree=rg(w);m(null,nn,R,B,w,U,Q),E.el=nn.el}if(je&&Xn(je,U),!Rt&&(le=ve&&ve.onVnodeMounted)){const nn=E;Xn(()=>ii(le,pt,nn),U)}(E.shapeFlag&256||pt&&Kc(pt.vnode)&&pt.vnode.shapeFlag&256)&&w.a&&Xn(w.a,U),w.isMounted=!0,E=R=B=null}},W=w.effect=new Wv(Y,Rr,()=>t1(q),w.scope),q=w.update=()=>{W.dirty&&W.run()};q.id=w.uid,wo(w,!0),q()},P=(w,E,R)=>{E.component=w;const B=w.vnode.props;w.vnode=E,w.next=null,bD(w,E.props,B,R),wD(w,E.children,R),Ta(),eE(w),wa()},x=(w,E,R,B,U,Q,ne,Y,W=!1)=>{const q=w&&w.children,le=w?w.shapeFlag:0,we=E.children,{patchFlag:ve,shapeFlag:Ie}=E;if(ve>0){if(ve&128){_e(q,we,R,B,U,Q,ne,Y,W);return}else if(ve&256){re(q,we,R,B,U,Q,ne,Y,W);return}}Ie&8?(le&16&&vt(q,U,Q),we!==q&&u(R,we)):le&16?Ie&16?_e(q,we,R,B,U,Q,ne,Y,W):vt(q,U,Q,!0):(le&8&&u(R,""),Ie&16&&N(we,R,B,U,Q,ne,Y,W))},re=(w,E,R,B,U,Q,ne,Y,W)=>{w=w||nl,E=E||nl;const q=w.length,le=E.length,we=Math.min(q,le);let ve;for(ve=0;ve<we;ve++){const Ie=E[ve]=W?ks(E[ve]):Br(E[ve]);m(w[ve],Ie,R,null,U,Q,ne,Y,W)}q>le?vt(w,U,Q,!0,!1,we):N(E,R,B,U,Q,ne,Y,W,we)},_e=(w,E,R,B,U,Q,ne,Y,W)=>{let q=0;const le=E.length;let we=w.length-1,ve=le-1;for(;q<=we&&q<=ve;){const Ie=w[q],je=E[q]=W?ks(E[q]):Br(E[q]);if(ai(Ie,je))m(Ie,je,R,null,U,Q,ne,Y,W);else break;q++}for(;q<=we&&q<=ve;){const Ie=w[we],je=E[ve]=W?ks(E[ve]):Br(E[ve]);if(ai(Ie,je))m(Ie,je,R,null,U,Q,ne,Y,W);else break;we--,ve--}if(q>we){if(q<=ve){const Ie=ve+1,je=Ie<le?E[Ie].el:B;for(;q<=ve;)m(null,E[q]=W?ks(E[q]):Br(E[q]),R,je,U,Q,ne,Y,W),q++}}else if(q>ve)for(;q<=we;)$e(w[q],U,Q,!0),q++;else{const Ie=q,je=q,pt=new Map;for(q=je;q<=ve;q++){const ar=E[q]=W?ks(E[q]):Br(E[q]);ar.key!=null&&pt.set(ar.key,q)}let Rt,nn=0;const Lr=ve-je+1;let Pa=!1,Hb=0;const gc=new Array(Lr);for(q=0;q<Lr;q++)gc[q]=0;for(q=Ie;q<=we;q++){const ar=w[q];if(nn>=Lr){$e(ar,U,Q,!0);continue}let ri;if(ar.key!=null)ri=pt.get(ar.key);else for(Rt=je;Rt<=ve;Rt++)if(gc[Rt-je]===0&&ai(ar,E[Rt])){ri=Rt;break}ri===void 0?$e(ar,U,Q,!0):(gc[ri-je]=q+1,ri>=Hb?Hb=ri:Pa=!0,m(ar,E[ri],R,null,U,Q,ne,Y,W),nn++)}const zb=Pa?CD(gc):nl;for(Rt=zb.length-1,q=Lr-1;q>=0;q--){const ar=je+q,ri=E[ar],jb=ar+1<le?E[ar+1].el:B;gc[q]===0?m(null,ri,R,jb,U,Q,ne,Y,W):Pa&&(Rt<0||q!==zb[Rt]?Ne(ri,R,jb,2):Rt--)}}},Ne=(w,E,R,B,U=null)=>{const{el:Q,type:ne,transition:Y,children:W,shapeFlag:q}=w;if(q&6){Ne(w.component.subTree,E,R,B);return}if(q&128){w.suspense.move(E,R,B);return}if(q&64){ne.move(w,E,R,ae);return}if(ne===se){r(Q,E,R);for(let we=0;we<W.length;we++)Ne(W[we],E,R,B);r(w.anchor,E,R);return}if(ne===Hd){v(w,E,R);return}if(B!==2&&q&1&&Y)if(B===0)Y.beforeEnter(Q),r(Q,E,R),Xn(()=>Y.enter(Q),U);else{const{leave:we,delayLeave:ve,afterLeave:Ie}=Y,je=()=>r(Q,E,R),pt=()=>{we(Q,()=>{je(),Ie&&Ie()})};ve?ve(Q,je,pt):pt()}else r(Q,E,R)},$e=(w,E,R,B=!1,U=!1)=>{const{type:Q,props:ne,ref:Y,children:W,dynamicChildren:q,shapeFlag:le,patchFlag:we,dirs:ve}=w;if(Y!=null&&By(Y,null,R,w,!0),le&256){E.ctx.deactivate(w);return}const Ie=le&1&&ve,je=!Kc(w);let pt;if(je&&(pt=ne&&ne.onVnodeBeforeUnmount)&&ii(pt,E,w),le&6)Bt(w.component,R,B);else{if(le&128){w.suspense.unmount(R,B);return}Ie&&To(w,null,E,"beforeUnmount"),le&64?w.type.remove(w,E,R,U,ae,B):q&&(Q!==se||we>0&&we&64)?vt(q,E,R,!1,!0):(Q===se&&we&384||!U&&le&16)&&vt(W,E,R),B&&ht(w)}(je&&(pt=ne&&ne.onVnodeUnmounted)||Ie)&&Xn(()=>{pt&&ii(pt,E,w),Ie&&To(w,null,E,"unmounted")},R)},ht=w=>{const{type:E,el:R,anchor:B,transition:U}=w;if(E===se){_t(R,B);return}if(E===Hd){I(w);return}const Q=()=>{i(R),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(w.shapeFlag&1&&U&&!U.persisted){const{leave:ne,delayLeave:Y}=U,W=()=>ne(R,Q);Y?Y(w.el,Q,W):W()}else Q()},_t=(w,E)=>{let R;for(;w!==E;)R=d(w),i(w),w=R;i(E)},Bt=(w,E,R)=>{const{bum:B,scope:U,update:Q,subTree:ne,um:Y}=w;B&&Bd(B),U.stop(),Q&&(Q.active=!1,$e(ne,w,E,R)),Y&&Xn(Y,E),Xn(()=>{w.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},vt=(w,E,R,B=!1,U=!1,Q=0)=>{for(let ne=Q;ne<w.length;ne++)$e(w[ne],E,R,B,U)},$=w=>w.shapeFlag&6?$(w.component.subTree):w.shapeFlag&128?w.suspense.next():d(w.anchor||w.el);let ce=!1;const te=(w,E,R)=>{w==null?E._vnode&&$e(E._vnode,null,null,!0):m(E._vnode||null,w,E,null,null,null,R),ce||(ce=!0,eE(),UA(),ce=!1),E._vnode=w},ae={p:m,um:$e,m:Ne,r:ht,mt:M,mc:N,pc:x,pbc:V,n:$,o:t};let Me,qe;return e&&([Me,qe]=e(ae)),{render:te,hydrate:Me,createApp:yD(te,Me)}}function og({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function wo({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function AD(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function l1(t,e,n=!1){const r=t.children,i=e.children;if(Se(r)&&Se(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=ks(i[s]),a.el=o.el),n||l1(o,a)),a.type===Fp&&(a.el=o.el)}}function CD(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function iC(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:iC(e)}const kD=t=>t.__isTeleport,Jc=t=>t&&(t.disabled||t.disabled===""),pE=t=>typeof SVGElement<"u"&&t instanceof SVGElement,mE=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,$y=(t,e)=>{const n=t&&t.to;return Ht(n)?e?e(n):null:n},RD={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:m,createComment:g}}=c,y=Jc(e.props);let{shapeFlag:_,children:v,dynamicChildren:I}=e;if(t==null){const S=e.el=m(""),C=e.anchor=m("");f(S,n,r),f(C,n,r);const F=e.target=$y(e.props,p),N=e.targetAnchor=m("");F&&(f(N,F),o==="svg"||pE(F)?o="svg":(o==="mathml"||mE(F))&&(o="mathml"));const A=(V,z)=>{_&16&&u(v,V,z,i,s,o,a,l)};y?A(n,C):F&&A(F,N)}else{e.el=t.el;const S=e.anchor=t.anchor,C=e.target=t.target,F=e.targetAnchor=t.targetAnchor,N=Jc(t.props),A=N?n:C,V=N?S:F;if(o==="svg"||pE(C)?o="svg":(o==="mathml"||mE(C))&&(o="mathml"),I?(d(t.dynamicChildren,I,A,i,s,o,a),l1(t,e,!0)):l||h(t,e,A,V,i,s,o,a,!1),y)N?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):od(e,n,S,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const z=e.target=$y(e.props,p);z&&od(e,z,null,c,0)}else N&&od(e,C,F,c,1)}sC(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:d}=t;if(h&&s(u),o&&s(c),a&16){const f=o||!Jc(d);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,n,f,!!m.dynamicChildren)}}},move:od,hydrate:OD};function od(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,h=s===2;if(h&&r(o,e,n),(!h||Jc(u))&&l&16)for(let d=0;d<c.length;d++)i(c[d],e,n,2);h&&r(a,e,n)}function OD(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=$y(e.props,l);if(u){const h=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Jc(e.props))e.anchor=c(o(t),e,a(t),n,r,i,s),e.targetAnchor=h;else{e.anchor=o(t);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(h,e,u,n,r,i,s)}sC(e)}return e.anchor&&o(e.anchor)}const ND=RD;function sC(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const se=Symbol.for("v-fgt"),Fp=Symbol.for("v-txt"),tr=Symbol.for("v-cmt"),Hd=Symbol.for("v-stc"),Qc=[];let Or=null;function O(t=!1){Qc.push(Or=t?null:[])}function oC(){Qc.pop(),Or=Qc[Qc.length-1]||null}let Sl=1;function gE(t){Sl+=t}function aC(t){return t.dynamicChildren=Sl>0?Or||nl:null,oC(),Sl>0&&Or&&Or.push(t),t}function L(t,e,n,r,i,s){return aC(b(t,e,n,r,i,s,!0))}function We(t,e,n,r,i){return aC(Ee(t,e,n,r,i,!0))}function Cu(t){return t?t.__v_isVNode===!0:!1}function ai(t,e){return t.type===e.type&&t.key===e.key}const Up="__vInternal",lC=({key:t})=>t??null,zd=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ht(t)||Pt(t)||Pe(t)?{i:Kt,r:t,k:e,f:!!n}:t:null);function b(t,e=null,n=null,r=0,i=null,s=t===se?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&lC(e),ref:e&&zd(e),scopeId:Dp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Kt};return a?(c1(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Ht(n)?8:16),Sl>0&&!o&&Or&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Or.push(l),l}const Ee=MD;function MD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===Ux)&&(t=tr),Cu(t)){const a=to(t,e,!0);return n&&c1(a,n),Sl>0&&!s&&Or&&(a.shapeFlag&6?Or[Or.indexOf(t)]=a:Or.push(a)),a.patchFlag|=-2,a}if(zD(t)&&(t=t.__vccOpts),e){e=PD(e);let{class:a,style:l}=e;a&&!Ht(a)&&(e.class=Mr(a)),yt(l)&&(RA(l)&&!Se(l)&&(l=Zt({},l)),e.style=rr(l))}const o=Ht(t)?1:$x(t)?128:kD(t)?64:yt(t)?4:Pe(t)?2:0;return b(t,e,n,r,i,o,s,!0)}function PD(t){return t?RA(t)||Up in t?Zt({},t):t:null}function to(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?xD(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&lC(a),ref:e&&e.ref?n&&i?Se(i)?i.concat(zd(e)):[i,zd(e)]:zd(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==se?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&to(t.ssContent),ssFallback:t.ssFallback&&to(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function X(t=" ",e=0){return Ee(Fp,null,t,e)}function Bp(t,e){const n=Ee(Hd,null,t);return n.staticCount=e,n}function ue(t="",e=!1){return e?(O(),We(tr,null,t)):Ee(tr,null,t)}function Br(t){return t==null||typeof t=="boolean"?Ee(tr):Se(t)?Ee(se,null,t.slice()):typeof t=="object"?ks(t):Ee(Fp,null,String(t))}function ks(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:to(t)}function c1(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Se(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),c1(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Up in e)?e._ctx=Kt:i===3&&Kt&&(Kt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pe(e)?(e={default:e,_ctx:Kt},n=32):(e=String(e),r&64?(n=16,e=[X(e)]):n=8);t.children=e,t.shapeFlag|=n}function xD(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Mr([e.class,r.class]));else if(i==="style")e.style=rr([e.style,r.style]);else if(Cp(i)){const s=e[i],o=r[i];o&&s!==o&&!(Se(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function ii(t,e,n,r=null){Pr(t,e,7,[n,r])}const DD=XA();let LD=0;function VD(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||DD,s={uid:LD++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new gA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:eC(r,i),emitsOptions:$A(r,i),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:r.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=xx.bind(null,s),t.ce&&t.ce(s),s}let ln=null;const Ia=()=>ln||Kt;let gf,Hy;{const t=dA(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};gf=e("__VUE_INSTANCE_SETTERS__",n=>ln=n),Hy=e("__VUE_SSR_SETTERS__",n=>$p=n)}const oa=t=>{const e=ln;return gf(t),t.scope.on(),()=>{t.scope.off(),gf(e)}},zy=()=>{ln&&ln.scope.off(),gf(null)};function cC(t){return t.vnode.shapeFlag&4}let $p=!1;function FD(t,e=!1){e&&Hy(e);const{props:n,children:r}=t.vnode,i=cC(t);vD(t,n,i,e),TD(t,r);const s=i?UD(t,e):void 0;return e&&Hy(!1),s}function UD(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=dh(new Proxy(t.ctx,uD));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?$D(t):null,s=oa(t);Ta();const o=Ws(r,t,0,[t.props,i]);if(wa(),s(),$v(o)){if(o.then(zy,zy),e)return o.then(a=>{jy(t,a,e)}).catch(a=>{fh(a,t,0)});t.asyncDep=o}else jy(t,o,e)}else uC(t,e)}function jy(t,e,n){Pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:yt(e)&&(t.setupState=PA(e)),uC(t,n)}let yE;function uC(t,e,n){const r=t.type;if(!t.render){if(!e&&yE&&!r.render){const i=r.template||o1(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Zt(Zt({isCustomElement:s,delimiters:a},o),l);r.render=yE(i,c)}}t.render=r.render||Rr}{const i=oa(t);Ta();try{hD(t)}finally{wa(),i()}}}function BD(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return ir(t,"get","$attrs"),e[n]}}))}function $D(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return BD(t)},slots:t.slots,emit:t.emit,expose:e}}function Hp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(PA(dh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Yc)return Yc[n](t)},has(e,n){return n in e||n in Yc}}))}function HD(t,e=!0){return Pe(t)?t.displayName||t.name:t.name||e&&t.__name}function zD(t){return Pe(t)&&"__vccOpts"in t}const ot=(t,e)=>wx(t,e,$p);function Jo(t,e,n){const r=arguments.length;return r===2?yt(e)&&!Se(e)?Cu(e)?Ee(t,null,[e]):Ee(t,e):Ee(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Cu(n)&&(n=[n]),Ee(t,e,n))}const jD="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const WD="http://www.w3.org/2000/svg",qD="http://www.w3.org/1998/Math/MathML",Rs=typeof document<"u"?document:null,_E=Rs&&Rs.createElement("template"),GD={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Rs.createElementNS(WD,t):e==="mathml"?Rs.createElementNS(qD,t):Rs.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Rs.createTextNode(t),createComment:t=>Rs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Rs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{_E.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=_E.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},_s="transition",yc="animation",ku=Symbol("_vtc"),yf=(t,{slots:e})=>Jo(eD,KD(t),e);yf.displayName="Transition";const hC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};yf.props=Zt({},WA,hC);const So=(t,e=[])=>{Se(t)?t.forEach(n=>n(...e)):t&&t(...e)},vE=t=>t?Se(t)?t.some(e=>e.length>1):t.length>1:!1;function KD(t){const e={};for(const H in t)H in hC||(e[H]=t[H]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=YD(i),m=p&&p[0],g=p&&p[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:v,onLeave:I,onLeaveCancelled:S,onBeforeAppear:C=y,onAppear:F=_,onAppearCancelled:N=v}=e,A=(H,Z,M)=>{Io(H,Z?u:a),Io(H,Z?c:o),M&&M()},V=(H,Z)=>{H._isLeaving=!1,Io(H,h),Io(H,f),Io(H,d),Z&&Z()},z=H=>(Z,M)=>{const D=H?F:_,k=()=>A(Z,H,M);So(D,[Z,k]),bE(()=>{Io(Z,H?l:s),vs(Z,H?u:a),vE(D)||EE(Z,r,m,k)})};return Zt(e,{onBeforeEnter(H){So(y,[H]),vs(H,s),vs(H,o)},onBeforeAppear(H){So(C,[H]),vs(H,l),vs(H,c)},onEnter:z(!1),onAppear:z(!0),onLeave(H,Z){H._isLeaving=!0;const M=()=>V(H,Z);vs(H,h),XD(),vs(H,d),bE(()=>{H._isLeaving&&(Io(H,h),vs(H,f),vE(I)||EE(H,r,g,M))}),So(I,[H,M])},onEnterCancelled(H){A(H,!1),So(v,[H])},onAppearCancelled(H){A(H,!0),So(N,[H])},onLeaveCancelled(H){V(H),So(S,[H])}})}function YD(t){if(t==null)return null;if(yt(t))return[ag(t.enter),ag(t.leave)];{const e=ag(t);return[e,e]}}function ag(t){return hA(t)}function vs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ku]||(t[ku]=new Set)).add(e)}function Io(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[ku];n&&(n.delete(e),n.size||(t[ku]=void 0))}function bE(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let JD=0;function EE(t,e,n,r){const i=t._endId=++JD,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=QD(t,e);if(!o)return r();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,d),s()},d=f=>{f.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,d)}function QD(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${_s}Delay`),s=r(`${_s}Duration`),o=TE(i,s),a=r(`${yc}Delay`),l=r(`${yc}Duration`),c=TE(a,l);let u=null,h=0,d=0;e===_s?o>0&&(u=_s,h=o,d=s.length):e===yc?c>0&&(u=yc,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?_s:yc:null,d=u?u===_s?s.length:l.length:0);const f=u===_s&&/\b(transform|all)(,|$)/.test(r(`${_s}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function TE(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>wE(n)+wE(t[r])))}function wE(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function XD(){return document.body.offsetHeight}function ZD(t,e,n){const r=t[ku];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const _f=Symbol("_vod"),dC=Symbol("_vsh"),_c={beforeMount(t,{value:e},{transition:n}){t[_f]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):vc(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),vc(t,!0),r.enter(t)):r.leave(t,()=>{vc(t,!1)}):vc(t,e))},beforeUnmount(t,{value:e}){vc(t,e)}};function vc(t,e){t.style.display=e?t[_f]:"none",t[dC]=!e}const e4=Symbol(""),t4=/(^|;)\s*display\s*:/;function n4(t,e,n){const r=t.style,i=Ht(n);let s=!1;if(n&&!i){if(e)if(Ht(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&jd(r,a,"")}else for(const o in e)n[o]==null&&jd(r,o,"");for(const o in n)o==="display"&&(s=!0),jd(r,o,n[o])}else if(i){if(e!==n){const o=r[e4];o&&(n+=";"+o),r.cssText=n,s=t4.test(n)}}else e&&t.removeAttribute("style");_f in t&&(t[_f]=s?r.display:"",t[dC]&&(r.display="none"))}const SE=/\s*!important$/;function jd(t,e,n){if(Se(n))n.forEach(r=>jd(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=r4(t,e);SE.test(n)?t.setProperty(Ea(r),n.replace(SE,""),"important"):t[r]=n}}const IE=["Webkit","Moz","ms"],lg={};function r4(t,e){const n=lg[e];if(n)return n;let r=Ii(e);if(r!=="filter"&&r in t)return lg[e]=r;r=Op(r);for(let i=0;i<IE.length;i++){const s=IE[i]+r;if(s in t)return lg[e]=s}return e}const AE="http://www.w3.org/1999/xlink";function i4(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(AE,e.slice(6,e.length)):t.setAttributeNS(AE,e,n);else{const s=ex(e);n==null||s&&!fA(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function s4(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=fA(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Mo(t,e,n,r){t.addEventListener(e,n,r)}function o4(t,e,n,r){t.removeEventListener(e,n,r)}const CE=Symbol("_vei");function a4(t,e,n,r,i=null){const s=t[CE]||(t[CE]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=l4(e);if(r){const c=s[e]=h4(r,i);Mo(t,a,c,l)}else o&&(o4(t,a,o,l),s[e]=void 0)}}const kE=/(?:Once|Passive|Capture)$/;function l4(t){let e;if(kE.test(t)){e={};let r;for(;r=t.match(kE);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ea(t.slice(2)),e]}let cg=0;const c4=Promise.resolve(),u4=()=>cg||(c4.then(()=>cg=0),cg=Date.now());function h4(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Pr(d4(r,n.value),e,5,[r])};return n.value=t,n.attached=u4(),n}function d4(t,e){if(Se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const RE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,f4=(t,e,n,r,i,s,o,a,l)=>{const c=i==="svg";e==="class"?ZD(t,r,c):e==="style"?n4(t,n,r):Cp(e)?Uv(e)||a4(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):p4(t,e,r,c))?s4(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),i4(t,e,r,c))};function p4(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&RE(e)&&Pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return RE(e)&&Ht(n)?!1:e in t}const vf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Se(e)?n=>Bd(e,n):e};function m4(t){t.target.composing=!0}function OE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const al=Symbol("_assign"),hr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[al]=vf(i);const s=r||i.props&&i.props.type==="number";Mo(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Cy(a)),t[al](a)}),n&&Mo(t,"change",()=>{t.value=t.value.trim()}),e||(Mo(t,"compositionstart",m4),Mo(t,"compositionend",OE),Mo(t,"change",OE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[al]=vf(s),t.composing)return;const o=i||t.type==="number"?Cy(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},Wy={deep:!0,created(t,e,n){t[al]=vf(n),Mo(t,"change",()=>{const r=t._modelValue,i=g4(t),s=t.checked,o=t[al];if(Se(r)){const a=pA(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(kp(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(fC(t,s))})},mounted:NE,beforeUpdate(t,e,n){t[al]=vf(n),NE(t,e,n)}};function NE(t,{value:e,oldValue:n},r){t._modelValue=e,Se(e)?t.checked=pA(e,r.props.value)>-1:kp(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Np(e,fC(t,!0)))}function g4(t){return"_value"in t?t._value:t.value}function fC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const y4=["ctrl","shift","alt","meta"],_4={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>y4.some(n=>t[`${n}Key`]&&!e.includes(n))},Ge=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=_4[e[o]];if(a&&a(i,e))return}return t(i,...s)})},v4={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Fr=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Ea(i.key);if(e.some(o=>o===s||v4[o]===s))return t(i)})},b4=Zt({patchProp:f4},GD);let ME;function E4(){return ME||(ME=SD(b4))}const T4=(...t)=>{const e=E4().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=S4(r);if(!i)return;const s=e._component;!Pe(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,w4(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function w4(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function S4(t){return Ht(t)?document.querySelector(t):t}var I4=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let pC;const zp=t=>pC=t,mC=Symbol();function qy(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Xc;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Xc||(Xc={}));function A4(){const t=zv(!0),e=t.run(()=>ie({}));let n=[],r=[];const i=dh({install(s){zp(i),i._a=s,s.provide(mC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!I4?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const gC=()=>{};function PE(t,e,n,r=gC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&Mp()&&jv(i),i}function xa(t,...e){t.slice().forEach(n=>{n(...e)})}const C4=t=>t();function Gy(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];qy(i)&&qy(r)&&t.hasOwnProperty(n)&&!Pt(r)&&!Zi(r)?t[n]=Gy(i,r):t[n]=r}return t}const k4=Symbol();function R4(t){return!qy(t)||!t.hasOwnProperty(k4)}const{assign:Ss}=Object;function O4(t){return!!(Pt(t)&&t.effect)}function N4(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const u=Cx(n.state.value[t]);return Ss(u,s,Object.keys(o||{}).reduce((h,d)=>(h[d]=dh(ot(()=>{zp(n);const f=n._s.get(t);return o[d].call(f,f)})),h),{}))}return l=yC(t,c,e,n,r,!0),l}function yC(t,e,n={},r,i,s){let o;const a=Ss({actions:{}},n),l={deep:!0};let c,u,h=[],d=[],f;const p=r.state.value[t];!s&&!p&&(r.state.value[t]={}),ie({});let m;function g(N){let A;c=u=!1,typeof N=="function"?(N(r.state.value[t]),A={type:Xc.patchFunction,storeId:t,events:f}):(Gy(r.state.value[t],N),A={type:Xc.patchObject,payload:N,storeId:t,events:f});const V=m=Symbol();Sa().then(()=>{m===V&&(c=!0)}),u=!0,xa(h,A,r.state.value[t])}const y=s?function(){const{state:A}=n,V=A?A():{};this.$patch(z=>{Ss(z,V)})}:gC;function _(){o.stop(),h=[],d=[],r._s.delete(t)}function v(N,A){return function(){zp(r);const V=Array.from(arguments),z=[],H=[];function Z(k){z.push(k)}function M(k){H.push(k)}xa(d,{args:V,name:N,store:S,after:Z,onError:M});let D;try{D=A.apply(this&&this.$id===t?this:S,V)}catch(k){throw xa(H,k),k}return D instanceof Promise?D.then(k=>(xa(z,k),k)).catch(k=>(xa(H,k),Promise.reject(k))):(xa(z,D),D)}}const I={_p:r,$id:t,$onAction:PE.bind(null,d),$patch:g,$reset:y,$subscribe(N,A={}){const V=PE(h,N,A.detached,()=>z()),z=o.run(()=>_i(()=>r.state.value[t],H=>{(A.flush==="sync"?u:c)&&N({storeId:t,type:Xc.direct,events:f},H)},Ss({},l,A)));return V},$dispose:_},S=Ql(I);r._s.set(t,S);const F=(r._a&&r._a.runWithContext||C4)(()=>r._e.run(()=>(o=zv()).run(e)));for(const N in F){const A=F[N];if(Pt(A)&&!O4(A)||Zi(A))s||(p&&R4(A)&&(Pt(A)?A.value=p[N]:Gy(A,p[N])),r.state.value[t][N]=A);else if(typeof A=="function"){const V=v(N,A);F[N]=V,a.actions[N]=A}}return Ss(S,F),Ss(Xe(S),F),Object.defineProperty(S,"$state",{get:()=>r.state.value[t],set:N=>{g(A=>{Ss(A,N)})}}),r._p.forEach(N=>{Ss(S,o.run(()=>N({store:S,app:r._a,pinia:r,options:a})))}),p&&s&&n.hydrate&&n.hydrate(S.$state,p),c=!0,u=!0,S}function M4(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=_D();return a=a||(c?jn(mC,null):null),a&&zp(a),a=pC,a._s.has(r)||(s?yC(r,e,i,a):N4(r,i,a)),a._s.get(r)}return o.$id=r,o}function P4(t){{t=Xe(t);const e={};for(const n in t){const r=t[n];(Pt(r)||Zi(r))&&(e[n]=DA(t,n))}return e}}var xE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de=function(t,e){if(!t)throw tc(e)},tc=function(t){return new Error("Firebase Database ("+_C.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},x4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},jp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):x4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new D4;const d=s<<2|a>>4;if(r.push(d),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class D4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bC=function(t){const e=vC(t);return jp.encodeByteArray(e,!0)},bf=function(t){return bC(t).replace(/\./g,"")},Ef=function(t){try{return jp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(t){return EC(void 0,t)}function EC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!V4(n)||(t[n]=EC(t[n],e[n]));return t}function V4(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=()=>F4().__FIREBASE_DEFAULTS__,B4=()=>{if(typeof process>"u"||typeof xE>"u")return;const t=xE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ef(t[1]);return e&&JSON.parse(e)},Wp=()=>{try{return U4()||B4()||$4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H4=t=>{var e,n;return(n=(e=Wp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},z4=t=>{const e=H4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},TC=()=>{var t;return(t=Wp())===null||t===void 0?void 0:t.config},j4=t=>{var e;return(e=Wp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bf(JSON.stringify(n)),bf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function u1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function q4(){var t;const e=(t=Wp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function K4(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SC(){return _C.NODE_ADMIN===!0}function Y4(){return!q4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h1(){try{return typeof indexedDB=="object"}catch{return!1}}function J4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="FirebaseError";class Li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Q4,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nc.prototype.create)}}class nc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?X4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Li(i,a,r)}}function X4(t,e){return t.replace(Z4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Z4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t){return JSON.parse(t)}function wn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Ou(Ef(s[0])||""),n=Ou(Ef(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},e3=function(t){const e=IC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},t3=function(t){const e=IC(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Il(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ky(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tf(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Nu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(DE(s)&&DE(o)){if(!Nu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function DE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const d=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function r3(t,e){const n=new i3(t,e);return n.subscribe.bind(n)}class i3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");s3(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ug),i.error===void 0&&(i.error=ug),i.complete===void 0&&(i.complete=ug);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ug(){}function o3(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,de(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t){return t&&t._delegate?t._delegate:t}class Jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ru;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u3(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c3(t){return t===ko?void 0:t}function u3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new l3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ke||(Ke={}));const d3={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},f3=Ke.INFO,p3={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},m3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=p3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mh{constructor(e){this.name=e,this._logLevel=f3,this._logHandler=m3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const g3=(t,e)=>e.some(n=>t instanceof n);let LE,VE;function y3(){return LE||(LE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _3(){return VE||(VE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AC=new WeakMap,Yy=new WeakMap,CC=new WeakMap,hg=new WeakMap,d1=new WeakMap;function v3(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(qs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AC.set(n,t)}).catch(()=>{}),d1.set(e,t),e}function b3(t){if(Yy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Yy.set(t,e)}let Jy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function E3(t){Jy=t(Jy)}function T3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dg(this),e,...n);return CC.set(r,e.sort?e.sort():[e]),qs(r)}:_3().includes(t)?function(...e){return t.apply(dg(this),e),qs(AC.get(this))}:function(...e){return qs(t.apply(dg(this),e))}}function w3(t){return typeof t=="function"?T3(t):(t instanceof IDBTransaction&&b3(t),g3(t,y3())?new Proxy(t,Jy):t)}function qs(t){if(t instanceof IDBRequest)return v3(t);if(hg.has(t))return hg.get(t);const e=w3(t);return e!==t&&(hg.set(t,e),d1.set(e,t)),e}const dg=t=>d1.get(t);function S3(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=qs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(qs(o.result),l.oldVersion,l.newVersion,qs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const I3=["get","getKey","getAll","getAllKeys","count"],A3=["put","add","delete","clear"],fg=new Map;function FE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fg.get(e))return fg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=A3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||I3.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return fg.set(e,s),s}E3(t=>({...t,get:(e,n,r)=>FE(e,n)||t.get(e,n,r),has:(e,n)=>!!FE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(k3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function k3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qy="@firebase/app",UE="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new mh("@firebase/app"),R3="@firebase/app-compat",O3="@firebase/analytics-compat",N3="@firebase/analytics",M3="@firebase/app-check-compat",P3="@firebase/app-check",x3="@firebase/auth",D3="@firebase/auth-compat",L3="@firebase/database",V3="@firebase/database-compat",F3="@firebase/functions",U3="@firebase/functions-compat",B3="@firebase/installations",$3="@firebase/installations-compat",H3="@firebase/messaging",z3="@firebase/messaging-compat",j3="@firebase/performance",W3="@firebase/performance-compat",q3="@firebase/remote-config",G3="@firebase/remote-config-compat",K3="@firebase/storage",Y3="@firebase/storage-compat",J3="@firebase/firestore",Q3="@firebase/firestore-compat",X3="firebase",Z3="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="[DEFAULT]",eL={[Qy]:"fire-core",[R3]:"fire-core-compat",[N3]:"fire-analytics",[O3]:"fire-analytics-compat",[P3]:"fire-app-check",[M3]:"fire-app-check-compat",[x3]:"fire-auth",[D3]:"fire-auth-compat",[L3]:"fire-rtdb",[V3]:"fire-rtdb-compat",[F3]:"fire-fn",[U3]:"fire-fn-compat",[B3]:"fire-iid",[$3]:"fire-iid-compat",[H3]:"fire-fcm",[z3]:"fire-fcm-compat",[j3]:"fire-perf",[W3]:"fire-perf-compat",[q3]:"fire-rc",[G3]:"fire-rc-compat",[K3]:"fire-gcs",[Y3]:"fire-gcs-compat",[J3]:"fire-fst",[Q3]:"fire-fst-compat","fire-js":"fire-js",[X3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new Map,tL=new Map,Zy=new Map;function BE(t,e){try{t.container.addComponent(e)}catch(n){aa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ai(t){const e=t.name;if(Zy.has(e))return aa.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,t);for(const n of wf.values())BE(n,t);for(const n of tL.values())BE(n,t);return!0}function kC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gs=new nc("app","Firebase",nL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=Z3;function RC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xy,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gs.create("bad-app-name",{appName:String(i)});if(n||(n=TC()),!n)throw Gs.create("no-options");const s=wf.get(i);if(s){if(Nu(n,s.options)&&Nu(r,s.config))return s;throw Gs.create("duplicate-app",{appName:i})}const o=new h3(i);for(const l of Zy.values())o.addComponent(l);const a=new rL(n,r,o);return wf.set(i,a),a}function OC(t=Xy){const e=wf.get(t);if(!e&&t===Xy&&TC())return RC();if(!e)throw Gs.create("no-app",{appName:t});return e}function yr(t,e,n){var r;let i=(r=eL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),aa.warn(a.join(" "));return}Ai(new Jr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="firebase-heartbeat-database",sL=1,Mu="firebase-heartbeat-store";let pg=null;function NC(){return pg||(pg=S3(iL,sL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gs.create("idb-open",{originalErrorMessage:t.message})})),pg}async function oL(t){try{const n=(await NC()).transaction(Mu),r=await n.objectStore(Mu).get(MC(t));return await n.done,r}catch(e){if(e instanceof Li)aa.warn(e.message);else{const n=Gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});aa.warn(n.message)}}}async function $E(t,e){try{const r=(await NC()).transaction(Mu,"readwrite");await r.objectStore(Mu).put(e,MC(t)),await r.done}catch(n){if(n instanceof Li)aa.warn(n.message);else{const r=Gs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});aa.warn(r.message)}}}function MC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=1024,lL=30*24*60*60*1e3;class cL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=HE();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=lL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=HE(),{heartbeatsToSend:r,unsentEntries:i}=uL(this._heartbeatsCache.heartbeats),s=bf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function HE(){return new Date().toISOString().substring(0,10)}function uL(t,e=aL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h1()?J4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $E(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $E(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function zE(t){return bf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){Ai(new Jr("platform-logger",e=>new C3(e),"PRIVATE")),Ai(new Jr("heartbeat",e=>new cL(e),"PRIVATE")),yr(Qy,UE,t),yr(Qy,UE,"esm2017"),yr("fire-js","")}dL("");function f1(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function PC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fL=PC,xC=new nc("auth","Firebase",PC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new mh("@firebase/auth");function pL(t,...e){Sf.logLevel<=Ke.WARN&&Sf.warn(`Auth (${ho}): ${t}`,...e)}function Wd(t,...e){Sf.logLevel<=Ke.ERROR&&Sf.error(`Auth (${ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t,...e){throw m1(t,...e)}function Gr(t,...e){return m1(t,...e)}function p1(t,e,n){const r=Object.assign(Object.assign({},fL()),{[e]:n});return new nc("auth","Firebase",r).create(e,{appName:t.name})}function Qo(t){return p1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mL(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ci(t,"argument-error"),p1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function m1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xC.create(t,...e)}function Fe(t,e,...n){if(!t)throw m1(e,...n)}function qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wd(e),new Error(e)}function is(t,e){t||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gL(){return jE()==="http:"||jE()==="https:"}function jE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gL()||G4()||"connection"in navigator)?navigator.onLine:!0}function _L(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.shortDelay=e,this.longDelay=n,is(n>e,"Short delay should be less than long delay!"),this.isMobile=u1()||wC()}get(){return yL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e){is(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=new gh(3e4,6e4);function y1(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ic(t,e,n,r,i={}){return LC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=rc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),DC.fetch()(VC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function LC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},vL),e);try{const i=new TL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ad(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ad(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw ad(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw ad(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw p1(t,u,c);Ci(t,u)}}catch(i){if(i instanceof Li)throw i;Ci(t,"network-request-failed",{message:String(i)})}}async function EL(t,e,n,r,i={}){const s=await ic(t,e,n,r,i);return"mfaPendingCredential"in s&&Ci(t,"multi-factor-auth-required",{_serverResponse:s}),s}function VC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?g1(t.config,i):`${t.config.apiScheme}://${i}`}class TL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gr(this.auth,"network-request-failed")),bL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ad(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(t,e){return ic(t,"POST","/v1/accounts:delete",e)}async function FC(t,e){return ic(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SL(t,e=!1){const n=dn(t),r=await n.getIdToken(e),i=_1(r);Fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zc(mg(i.auth_time)),issuedAtTime:Zc(mg(i.iat)),expirationTime:Zc(mg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function mg(t){return Number(t)*1e3}function _1(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Ef(n);return i?JSON.parse(i):(Wd("Failed to decode base64 JWT payload"),null)}catch(i){return Wd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function WE(t){const e=_1(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Li&&IL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function IL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function If(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Pu(t,FC(n,{idToken:r}));Fe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UC(s.providerUserInfo):[],a=kL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new t_(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function CL(t){const e=dn(t);await If(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UC(t){return t.map(e=>{var{providerId:n}=e,r=f1(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(t,e){const n=await LC(t,{},async()=>{const r=rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=VC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OL(t,e){return ic(t,"POST","/v2/accounts:revokeToken",y1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=WE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await RL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ll;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bs(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=f1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new t_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Pu(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SL(this,e)}reload(){return CL(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await If(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wi(this.auth.app))return Promise.reject(Qo(this.auth));const e=await this.getIdToken();return await Pu(this,wL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:I,isAnonymous:S,providerData:C,stsTokenManager:F}=n;Fe(v&&F,e,"internal-error");const N=ll.fromJSON(this.name,F);Fe(typeof v=="string",e,"internal-error"),bs(h,e.name),bs(d,e.name),Fe(typeof I=="boolean",e,"internal-error"),Fe(typeof S=="boolean",e,"internal-error"),bs(f,e.name),bs(p,e.name),bs(m,e.name),bs(g,e.name),bs(y,e.name),bs(_,e.name);const A=new Gi({uid:v,auth:e,email:d,emailVerified:I,displayName:h,isAnonymous:S,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:N,createdAt:y,lastLoginAt:_});return C&&Array.isArray(C)&&(A.providerData=C.map(V=>Object.assign({},V))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new ll;i.updateFromServerResponse(n);const s=new Gi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await If(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Fe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?UC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new ll;a.updateFromIdToken(r);const l=new Gi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new t_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=new Map;function Ki(t){is(t instanceof Function,"Expected a class definition");let e=qE.get(t);return e?(is(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BC.type="NONE";const GE=BC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e,n){return`firebase:${t}:${e}:${n}`}class cl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=qd(this.userKey,i.apiKey,s),this.fullPersistenceKey=qd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cl(Ki(GE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ki(GE);const o=qd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Gi._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new cl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new cl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($C(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WC(e))return"Blackberry";if(qC(e))return"Webos";if(v1(e))return"Safari";if((e.includes("chrome/")||HC(e))&&!e.includes("edge/"))return"Chrome";if(jC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $C(t=Qt()){return/firefox\//i.test(t)}function v1(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HC(t=Qt()){return/crios\//i.test(t)}function zC(t=Qt()){return/iemobile/i.test(t)}function jC(t=Qt()){return/android/i.test(t)}function WC(t=Qt()){return/blackberry/i.test(t)}function qC(t=Qt()){return/webos/i.test(t)}function Gp(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NL(t=Qt()){var e;return Gp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ML(){return K4()&&document.documentMode===10}function GC(t=Qt()){return Gp(t)||jC(t)||qC(t)||WC(t)||/windows phone/i.test(t)||zC(t)}function PL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t,e=[]){let n;switch(t){case"Browser":n=KE(Qt());break;case"Worker":n=`${KE(Qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DL(t,e={}){return ic(t,"GET","/v2/passwordPolicy",y1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=6;class VL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YE(this),this.idTokenSubscription=new YE(this),this.beforeStateQueue=new xL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ki(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await FC(this,{idToken:e}),r=await Gi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await If(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_L()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wi(this.app))return Promise.reject(Qo(this));const n=e?dn(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wi(this.app)?Promise.reject(Qo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wi(this.app)?Promise.reject(Qo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DL(this),n=new VL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ki(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&pL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function b1(t){return dn(t)}class YE{constructor(e){this.auth=e,this.observer=null,this.addObserver=r3(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UL(t){E1=t}function BL(t){return E1.loadJS(t)}function $L(){return E1.gapiScript}function HL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t,e){const n=kC(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Nu(s,e??{}))return i;Ci(i,"already-initialized")}return n.initialize({options:e})}function jL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ki);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t,e){return EL(t,"POST","/v1/accounts:signInWithIdp",y1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL="http://localhost";class la extends YC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new la(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ci("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=f1(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new la(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ul(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ul(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ul(e,n)}buildRequest(){const e={requestUri:WL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=rc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends T1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends yh{constructor(){super("facebook.com")}static credential(e){return la._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends yh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return la._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zi.credential(n,r)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends yh{constructor(){super("github.com")}static credential(e){return la._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.GITHUB_SIGN_IN_METHOD="github.com";Ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends yh{constructor(){super("twitter.com")}static credential(e,n){return la._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ls.credential(n,r)}catch{return null}}}Ls.TWITTER_SIGN_IN_METHOD="twitter.com";Ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Gi._fromIdTokenResponse(e,r,i),o=JE(r);return new Al({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=JE(r);return new Al({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function JE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends Li{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Af(e,n,r,i)}}function JC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(t,s,e,r):s})}async function qL(t,e,n=!1){const r=await Pu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Al._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t,e,n=!1){const{auth:r}=t;if(Wi(r.app))return Promise.reject(Qo(r));const i="reauthenticate";try{const s=await Pu(t,JC(r,i,e,t),n);Fe(s.idToken,r,"internal-error");const o=_1(s.idToken);Fe(o,r,"internal-error");const{sub:a}=o;return Fe(t.uid===a,r,"user-mismatch"),Al._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ci(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(t,e,n=!1){if(Wi(t.app))return Promise.reject(Qo(t));const r="signIn",i=await JC(t,r,e),s=await Al._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function YL(t,e,n,r){return dn(t).onIdTokenChanged(e,n,r)}function JL(t){return dn(t).signOut()}const Cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(){const t=Qt();return v1(t)||Gp(t)}const XL=1e3,ZL=10;class XC extends QC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=QL()&&PL(),this.fallbackToPolling=GC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);ML()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ZL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},XL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XC.type="LOCAL";const e6=XC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC extends QC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZC.type="SESSION";const ek=ZC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Kp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await t6(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=w1("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function r6(t){vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function i6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function o6(){return tk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="firebaseLocalStorageDb",a6=1,kf="firebaseLocalStorage",rk="fbase_key";class _h{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yp(t,e){return t.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function l6(){const t=indexedDB.deleteDatabase(nk);return new _h(t).toPromise()}function n_(){const t=indexedDB.open(nk,a6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kf,{keyPath:rk})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kf)?e(r):(r.close(),await l6(),e(await n_()))})})}async function QE(t,e,n){const r=Yp(t,!0).put({[rk]:e,value:n});return new _h(r).toPromise()}async function c6(t,e){const n=Yp(t,!1).get(e),r=await new _h(n).toPromise();return r===void 0?null:r.value}function XE(t,e){const n=Yp(t,!0).delete(e);return new _h(n).toPromise()}const u6=800,h6=3;class ik{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await n_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>h6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kp._getInstance(o6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await i6(),!this.activeServiceWorker)return;this.sender=new n6(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||s6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await n_();return await QE(e,Cf,"1"),await XE(e,Cf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>QE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>c6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>XE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Yp(i,!1).getAll();return new _h(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ik.type="LOCAL";const d6=ik;new gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e){return e?Ki(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1 extends YC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ul(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ul(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function f6(t){return KL(t.auth,new S1(t),t.bypassAuthState)}function p6(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),GL(n,new S1(t),t.bypassAuthState)}async function m6(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),qL(n,new S1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f6;case"linkViaPopup":case"linkViaRedirect":return m6;case"reauthViaPopup":case"reauthViaRedirect":return p6;default:Ci(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=new gh(2e3,1e4);async function y6(t,e,n){if(Wi(t.app))return Promise.reject(Gr(t,"operation-not-supported-in-this-environment"));const r=b1(t);mL(t,e,T1);const i=sk(r,n);return new Vo(r,"signInViaPopup",e,i).executeNotNull()}class Vo extends ok{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){is(this.filter.length===1,"Popup operations only handle one event");const e=w1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g6.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="pendingRedirect",Gd=new Map;class v6 extends ok{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Gd.get(this.auth._key());if(!e){try{const r=await b6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gd.set(this.auth._key(),e)}return this.bypassAuthState||Gd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b6(t,e){const n=w6(e),r=T6(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function E6(t,e){Gd.set(t._key(),e)}function T6(t){return Ki(t._redirectPersistence)}function w6(t){return qd(_6,t.config.apiKey,t.name)}async function S6(t,e,n=!1){if(Wi(t.app))return Promise.reject(Qo(t));const r=b1(t),i=sk(r,e),o=await new v6(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=10*60*1e3;class A6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ak(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=I6&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZE(e))}saveEventToCache(e){this.cachedEventUids.add(ZE(e)),this.lastProcessedEventTime=Date.now()}}function ZE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ak({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ak(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k6(t,e={}){return ic(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O6=/^https?/;async function N6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await k6(t);for(const n of e)try{if(M6(n))return}catch{}Ci(t,"unauthorized-domain")}function M6(t){const e=e_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!O6.test(n))return!1;if(R6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6=new gh(3e4,6e4);function eT(){const t=vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function x6(t){return new Promise((e,n)=>{var r,i,s;function o(){eT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eT(),n(Gr(t,"network-request-failed"))},timeout:P6.get()})}if(!((i=(r=vi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vi().gapi)===null||s===void 0)&&s.load)o();else{const a=HL("iframefcb");return vi()[a]=()=>{gapi.load?o():n(Gr(t,"network-request-failed"))},BL(`${$L()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Kd=null,e})}let Kd=null;function D6(t){return Kd=Kd||x6(t),Kd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=new gh(5e3,15e3),V6="__/auth/iframe",F6="emulator/auth/iframe",U6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $6(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?g1(e,F6):`https://${t.config.authDomain}/${V6}`,r={apiKey:e.apiKey,appName:t.name,v:ho},i=B6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${rc(r).slice(1)}`}async function H6(t){const e=await D6(t),n=vi().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:$6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Gr(t,"network-request-failed"),a=vi().setTimeout(()=>{s(o)},L6.get());function l(){vi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j6=500,W6=600,q6="_blank",G6="http://localhost";class tT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K6(t,e,n,r=j6,i=W6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},z6),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Qt().toLowerCase();n&&(a=HC(c)?q6:n),$C(c)&&(e=e||G6,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(NL(c)&&a!=="_self")return Y6(e||"",a),new tT(null);const h=window.open(e||"",a,u);Fe(h,t,"popup-blocked");try{h.focus()}catch{}return new tT(h)}function Y6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="__/auth/handler",Q6="emulator/auth/handler",X6=encodeURIComponent("fac");async function nT(t,e,n,r,i,s){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ho,eventId:i};if(e instanceof T1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ky(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof yh){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${X6}=${encodeURIComponent(l)}`:"";return`${Z6(t)}?${rc(a).slice(1)}${c}`}function Z6({config:t}){return t.emulator?g1(t,Q6):`https://${t.authDomain}/${J6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="webStorageSupport";class e5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ek,this._completeRedirectFn=S6,this._overrideRedirectResult=E6}async _openPopup(e,n,r,i){var s;is((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await nT(e,n,r,e_(),i);return K6(e,o,w1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await nT(e,n,r,e_(),i);return r6(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(is(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H6(e),r=new A6(e);return n.register("authEvent",i=>(Fe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gg,{type:gg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[gg];o!==void 0&&n(!!o),Ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=N6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GC()||v1()||Gp()}}const t5=e5;var rT="@firebase/auth",iT="1.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i5(t){Ai(new Jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KC(t)},c=new FL(r,i,s,l);return jL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ai(new Jr("auth-internal",e=>{const n=b1(e.getProvider("auth").getImmediate());return(r=>new n5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(rT,iT,r5(t)),yr(rT,iT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=5*60;j4("authIdTokenMaxAge");function o5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}UL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Gr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",o5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i5("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=new Map,l5={activated:!1,tokenObservers:[]};function Qr(t){return a5.get(t)||Object.assign({},l5)}const sT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ru,this.pending.promise.catch(n=>{}),await u5(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ru,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function u5(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Rf=new nc("appCheck","AppCheck",h5);function lk(t){if(!Qr(t).activated)throw Rf.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5="firebase-app-check-database",f5=1,r_="firebase-app-check-store";let ld=null;function p5(){return ld||(ld=new Promise((t,e)=>{try{const n=indexedDB.open(d5,f5);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Rf.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(r_,{keyPath:"compositeKey"})}}}catch(n){e(Rf.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),ld)}function m5(t,e){return g5(y5(t),e)}async function g5(t,e){const r=(await p5()).transaction(r_,"readwrite"),s=r.objectStore(r_).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(Rf.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function y5(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=new mh("@firebase/app-check");function oT(t,e){return h1()?m5(t,e).catch(n=>{i_.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5={error:"UNKNOWN_ERROR"};function v5(t){return jp.encodeString(JSON.stringify(t),!1)}async function s_(t,e=!1){const n=t.app;lk(n);const r=Qr(n);let i=r.token,s;if(i&&!Oc(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(Oc(l)?i=l:await oT(n,void 0))}if(!e&&i&&Oc(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Qr(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?i_.warn(l.message):i_.error(l),s=l}let a;return i?s?Oc(i)?a={token:i.token,internalError:s}:a=lT(s):(a={token:i.token},r.token=i,await oT(n,i)):a=lT(s),o&&w5(n,a),a}async function b5(t){const e=t.app;lk(e);const{provider:n}=Qr(e);{const{token:r}=await n.getToken();return{token:r}}}function E5(t,e,n,r){const{app:i}=t,s=Qr(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Oc(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),aT(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>aT(t))}function ck(t,e){const n=Qr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function aT(t){const{app:e}=t,n=Qr(e);let r=n.tokenRefresher;r||(r=T5(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function T5(t){const{app:e}=t;return new c5(async()=>{const n=Qr(e);let r;if(n.token?r=await s_(t,!0):r=await s_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Qr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},sT.RETRIAL_MIN_WAIT,sT.RETRIAL_MAX_WAIT)}function w5(t,e){const n=Qr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Oc(t){return t.expireTimeMillis-Date.now()>0}function lT(t){return{token:v5(_5),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Qr(this.app);for(const n of e)ck(this.app,n.next);return Promise.resolve()}}function I5(t,e){return new S5(t,e)}function A5(t){return{getToken:e=>s_(t,e),getLimitedUseToken:()=>b5(t),addTokenListener:e=>E5(t,"INTERNAL",e),removeTokenListener:e=>ck(t.app,e)}}const C5="@firebase/app-check",k5="0.8.3",R5="app-check",cT="app-check-internal";function O5(){Ai(new Jr(R5,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return I5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(cT).initialize()})),Ai(new Jr(cT,t=>{const e=t.getProvider("app-check").getImmediate();return A5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),yr(C5,k5)}O5();var N5="firebase",M5="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(N5,M5,"app");const uk=Symbol("firebaseApp");function Jp(t){return Ia()&&jn(uk,null)||OC(t)}const ui=()=>{},P5=typeof window<"u";function I1(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function x5(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,a)=>o&&o[a],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function Aa(t){return!!t&&typeof t=="object"}const D5=Object.prototype;function L5(t){return Aa(t)&&Object.getPrototypeOf(t)===D5}function A1(t){return Aa(t)&&t.type==="document"}function V5(t){return Aa(t)&&t.type==="collection"}function F5(t){return A1(t)||V5(t)}function U5(t){return Aa(t)&&t.type==="query"}function B5(t){return Aa(t)&&"ref"in t}function $5(t){return Aa(t)&&typeof t.bucket=="string"}function H5(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const z5=Symbol.for("v-scx");function j5(){return!!jn(z5,0)}const cd=new WeakMap;function W5(t,e){if(!cd.has(t)){const n=zv(!0);cd.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),cd.delete(t)}}return cd.get(t)}const hk=new WeakMap;function q5(t){return hk.get(Jp(t))}const ud=new WeakMap;function dk(t){const e=Jp(t);if(!ud.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{ud.set(e,s),n(s.value)}];ud.set(e,i)}return ud.get(e)}function ni(t){const e=dk(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function G5(t,e){YL(e,n=>{const r=dk();t.value=n,Array.isArray(r)&&r[1](t)})}var uT={};const hT="@firebase/database",dT="1.0.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fk="";function K5(t){fk=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ou(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return fs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Y5(e)}}catch{}return new J5},Fo=pk("localStorage"),o_=pk("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new mh("@firebase/database"),Q5=function(){let t=1;return function(){return t++}}(),mk=function(t){const e=a3(t),n=new n3;n.update(e);const r=n.digest();return jp.encodeByteArray(r)},vh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=vh.apply(null,r):typeof r=="object"?e+=wn(r):e+=r,e+=" "}return e};let Xo=null,fT=!0;const X5=function(t,e){de(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(hl.logLevel=Ke.VERBOSE,Xo=hl.log.bind(hl),e&&o_.set("logging_enabled",!0)):typeof t=="function"?Xo=t:(Xo=null,o_.remove("logging_enabled"))},Nn=function(...t){if(fT===!0&&(fT=!1,Xo===null&&o_.get("logging_enabled")===!0&&X5(!0)),Xo){const e=vh.apply(null,t);Xo(e)}},bh=function(t){return function(...e){Nn(t,...e)}},a_=function(...t){const e="FIREBASE INTERNAL ERROR: "+vh(...t);hl.error(e)},ca=function(...t){const e=`FIREBASE FATAL ERROR: ${vh(...t)}`;throw hl.error(e),new Error(e)},_r=function(...t){const e="FIREBASE WARNING: "+vh(...t);hl.warn(e)},Z5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_r("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},gk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},eV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Cl="[MIN_NAME]",ua="[MAX_NAME]",sc=function(t,e){if(t===e)return 0;if(t===Cl||e===ua)return-1;if(e===Cl||t===ua)return 1;{const n=pT(t),r=pT(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},tV=function(t,e){return t===e?0:t<e?-1:1},bc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wn(e))},C1=function(t){if(typeof t!="object"||t===null)return wn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=wn(e[r]),n+=":",n+=C1(t[e[r]]);return n+="}",n},yk=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Dr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const _k=function(t){de(!gk(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},nV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},rV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},iV=new RegExp("^-?(0*)\\d{1,10}$"),sV=-2147483648,oV=2147483647,pT=function(t){if(iV.test(t)){const e=Number(t);if(e>=sV&&e<=oV)return e}return null},Eh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw _r("Exception was thrown by user callback.",n),e},Math.floor(0))}},aV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},eu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){_r(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_r(e)}}class l_{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}l_.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="5",vk="v",bk="s",Ek="r",Tk="f",wk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Sk="ls",Ik="p",c_="ac",Ak="websocket",Ck="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Fo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function hV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function kk(t,e,n){de(typeof e=="string","typeof type must == string"),de(typeof n=="object","typeof params must == object");let r;if(e===Ak)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ck)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);hV(t)&&(n.ns=t.namespace);const i=[];return Dr(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(){this.counters_={}}incrementCounter(e,n=1){fs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return L4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg={},_g={};function R1(t){const e=t.toString();return yg[e]||(yg[e]=new dV),yg[e]}function fV(t,e){const n=t.toString();return _g[n]||(_g[n]=e()),_g[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Eh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="start",mV="close",gV="pLPCommand",yV="pRTLPCB",Rk="id",Ok="pw",Nk="ser",_V="cb",vV="seg",bV="ts",EV="d",TV="dframe",Mk=1870,Pk=30,wV=Mk-Pk,SV=25e3,IV=3e4;class Ka{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bh(e),this.stats_=R1(n),this.urlFn=l=>(this.appCheckToken&&(l[c_]=this.appCheckToken),kk(n,Ck,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new pV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IV)),eV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new O1((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===mT)this.id=a,this.password=l;else if(o===mV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[mT]="t",r[Nk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[_V]=this.scriptTagHolder.uniqueCallbackIdentifier),r[vk]=k1,this.transportSessionId&&(r[bk]=this.transportSessionId),this.lastSessionId&&(r[Sk]=this.lastSessionId),this.applicationId&&(r[Ik]=this.applicationId),this.appCheckToken&&(r[c_]=this.appCheckToken),typeof location<"u"&&location.hostname&&wk.test(location.hostname)&&(r[Ek]=Tk);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ka.forceAllow_=!0}static forceDisallow(){Ka.forceDisallow_=!0}static isAvailable(){return Ka.forceAllow_?!0:!Ka.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nV()&&!rV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=bC(n),i=yk(r,wV);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[TV]="t",r[Rk]=e,r[Ok]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=wn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class O1{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Q5(),window[gV+this.uniqueCallbackIdentifier]=e,window[yV+this.uniqueCallbackIdentifier]=n,this.myIFrame=O1.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Nn("frame writing exception"),a.stack&&Nn(a.stack),Nn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Nn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Rk]=this.myID,e[Ok]=this.myPW,e[Nk]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Pk+r.length<=Mk;){const o=this.pendingSegs.shift();r=r+"&"+vV+i+"="+o.seg+"&"+bV+i+"="+o.ts+"&"+EV+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(SV)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=16384,CV=45e3;let Of=null;typeof MozWebSocket<"u"?Of=MozWebSocket:typeof WebSocket<"u"&&(Of=WebSocket);class Hr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bh(this.connId),this.stats_=R1(n),this.connURL=Hr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[vk]=k1,typeof location<"u"&&location.hostname&&wk.test(location.hostname)&&(o[Ek]=Tk),n&&(o[bk]=n),r&&(o[Sk]=r),i&&(o[c_]=i),s&&(o[Ik]=s),kk(e,Ak,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fo.set("previous_websocket_failure",!0);try{let r;SC(),this.mySock=new Of(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Hr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Of!==null&&!Hr.forceDisallow_}static previouslyFailed(){return Fo.isInMemoryStorage||Fo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Fo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ou(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(de(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=yk(n,AV);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(CV))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Hr.responsesRequiredToBeHealthy=2;Hr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ka,Hr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Hr&&Hr.isAvailable();let r=n&&!Hr.previouslyFailed();if(e.webSocketOnly&&(n||_r("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Hr];else{const i=this.transports_=[];for(const s of xu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);xu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}xu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=6e4,RV=5e3,OV=10*1024,NV=100*1024,vg="t",gT="d",MV="s",yT="r",PV="e",_T="o",vT="a",bT="n",ET="p",xV="h";class DV{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bh("c:"+this.id+":"),this.transportManager_=new xu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=eu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>NV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>OV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(vg in e){const n=e[vg];n===vT?this.upgradeIfSecondaryHealthy_():n===yT?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_T&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=bc("t",e),r=bc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ET,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:vT,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:bT,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=bc("t",e),r=bc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=bc(vg,e);if(gT in e){const r=e[gT];if(n===xV){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===bT){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===MV?this.onConnectionShutdown_(r):n===yT?this.onReset_(r):n===PV?a_("Server Error: "+r):n===_T?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):a_("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),k1!==r&&_r("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),eu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(kV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):eu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(RV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ET,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dk=class{constructor(e){this.allowedEvents_=e,this.listeners_={},de(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){de(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends Dk{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!u1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Nf}getInitialEvent(e){return de(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=32,wT=768;class kt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function gt(){return new kt("")}function tt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function no(t){return t.pieces_.length-t.pieceNum_}function St(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new kt(t.pieces_,e)}function Lk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function LV(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Vk(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Fk(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new kt(e,0)}function cn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof kt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new kt(n,0)}function Qe(t){return t.pieceNum_>=t.pieces_.length}function Nr(t,e){const n=tt(t),r=tt(e);if(n===null)return e;if(n===r)return Nr(St(t),St(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Uk(t,e){if(no(t)!==no(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function jr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(no(t)>no(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class VV{constructor(e,n){this.errorPrefix_=n,this.parts_=Vk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=qp(this.parts_[r]);Bk(this)}}function FV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=qp(e),Bk(t)}function UV(t){const e=t.parts_.pop();t.byteLength_-=qp(e),t.parts_.length>0&&(t.byteLength_-=1)}function Bk(t){if(t.byteLength_>wT)throw new Error(t.errorPrefix_+"has a key path longer than "+wT+" bytes ("+t.byteLength_+").");if(t.parts_.length>TT)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+TT+") or object contains a cycle "+Ro(t))}function Ro(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1 extends Dk{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new N1}getInitialEvent(e){return de(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=1e3,BV=60*5*1e3,ST=30*1e3,$V=1.3,HV=3e4,zV="server_kill",IT=3;class es extends xk{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=es.nextPersistentConnectionId_++,this.log_=bh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ec,this.maxReconnectDelay_=BV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!SC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");N1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Nf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(wn(s)),de(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Ru,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),de(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;es.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&fs(e,"w")){const r=Il(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();_r(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||t3(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ST)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=e3(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+wn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):a_("Unrecognized action received from server: "+wn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){de(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ec,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ec,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>HV&&(this.reconnectDelay_=Ec),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$V)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+es.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){de(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Nn("getToken() completed but was canceled"):(Nn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new DV(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{_r(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(zV)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&_r(h),l())}}}interrupt(e){Nn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Nn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ky(this.interruptReasons_)&&(this.reconnectDelay_=Ec,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>C1(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new kt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Nn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=IT&&(this.reconnectDelay_=ST,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Nn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=IT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+fk.replace(/\./g,"-")]=1,u1()?e["framework.cordova"]=1:wC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Nf.getInstance().currentlyOnline();return Ky(this.interruptReasons_)&&e}}es.nextPersistentConnectionId_=0;es.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new nt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new nt(Cl,e),i=new nt(Cl,n);return this.compare(r,i)!==0}minPost(){return nt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd;class $k extends Qp{static get __EMPTY_NODE(){return hd}static set __EMPTY_NODE(e){hd=e}compare(e,n){return sc(e.name,n.name)}isDefinedOn(e){throw tc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return nt.MIN}maxPost(){return new nt(ua,hd)}makePost(e,n){return de(typeof e=="string","KeyIndex indexValue must always be a string."),new nt(e,hd)}toString(){return".key"}}const dl=new $k;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dd=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},dr=class Nc{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Nc.RED,this.left=i??hi.EMPTY_NODE,this.right=s??hi.EMPTY_NODE}copy(e,n,r,i,s){return new Nc(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return hi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return hi.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Nc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Nc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};dr.RED=!0;dr.BLACK=!1;class jV{copy(e,n,r,i,s){return this}insert(e,n,r){return new dr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let hi=class Yd{constructor(e,n=Yd.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Yd(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,dr.BLACK,null,null))}remove(e){return new Yd(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new dd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new dd(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new dd(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new dd(this.root_,null,this.comparator_,!0,e)}};hi.EMPTY_NODE=new jV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(t,e){return sc(t.name,e.name)}function M1(t,e){return sc(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u_;function qV(t){u_=t}const Hk=function(t){return typeof t=="number"?"number:"+_k(t):"string:"+t},zk=function(t){if(t.isLeafNode()){const e=t.val();de(typeof e=="string"||typeof e=="number"||typeof e=="object"&&fs(e,".sv"),"Priority must be a string or number.")}else de(t===u_||t.isEmpty(),"priority of unexpected type.");de(t===u_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AT;class sn{constructor(e,n=sn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,de(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),zk(this.priorityNode_)}static set __childrenNodeConstructor(e){AT=e}static get __childrenNodeConstructor(){return AT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new sn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:sn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Qe(e)?this:tt(e)===".priority"?this.priorityNode_:sn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:sn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=tt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(de(r!==".priority"||no(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,sn.__childrenNodeConstructor.EMPTY_NODE.updateChild(St(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Hk(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=_k(this.value_):e+=this.value_,this.lazyHash_=mk(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===sn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof sn.__childrenNodeConstructor?-1:(de(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=sn.VALUE_TYPE_ORDER.indexOf(n),s=sn.VALUE_TYPE_ORDER.indexOf(r);return de(i>=0,"Unknown leaf type: "+n),de(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}sn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jk,Wk;function GV(t){jk=t}function KV(t){Wk=t}class YV extends Qp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?sc(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return nt.MIN}maxPost(){return new nt(ua,new sn("[PRIORITY-POST]",Wk))}makePost(e,n){const r=jk(e);return new nt(n,new sn("[PRIORITY-POST]",r))}toString(){return".priority"}}const Dn=new YV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=Math.log(2);class QV{constructor(e){const n=s=>parseInt(Math.log(s)/JV,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Mf=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new dr(d,h.node,dr.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),m=i(f+1,c);return h=t[f],d=n?n(h):h,new dr(d,h.node,dr.BLACK,p,m)}},s=function(l){let c=null,u=null,h=t.length;const d=function(p,m){const g=h-p,y=h;h-=p;const _=i(g+1,y),v=t[g],I=n?n(v):v;f(new dr(I,v.node,m,null,_))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));m?d(g,dr.BLACK):(d(g,dr.BLACK),d(g,dr.RED))}return u},o=new QV(t.length),a=s(o);return new hi(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bg;const Da={};class Yi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return de(Da&&Dn,"ChildrenNode.ts has not been loaded"),bg=bg||new Yi({".priority":Da},{".priority":Dn}),bg}get(e){const n=Il(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof hi?n:null}hasIndex(e){return fs(this.indexSet_,e.toString())}addIndex(e,n){de(e!==dl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(nt.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Mf(r,e.getCompare()):a=Da;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Yi(u,c)}addToIndexes(e,n){const r=Tf(this.indexes_,(i,s)=>{const o=Il(this.indexSet_,s);if(de(o,"Missing index implementation for "+s),i===Da)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(nt.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Mf(a,o.getCompare())}else return Da;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new nt(e.name,a))),l.insert(e,e.node)}});return new Yi(r,this.indexSet_)}removeFromIndexes(e,n){const r=Tf(this.indexes_,i=>{if(i===Da)return i;{const s=n.get(e.name);return s?i.remove(new nt(e.name,s)):i}});return new Yi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc;class ut{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&zk(this.priorityNode_),this.children_.isEmpty()&&de(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Tc||(Tc=new ut(new hi(M1),null,Yi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Tc}updatePriority(e){return this.children_.isEmpty()?this:new ut(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Tc:n}}getChild(e){const n=tt(e);return n===null?this:this.getImmediateChild(n).getChild(St(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(de(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new nt(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Tc:this.priorityNode_;return new ut(i,o,s)}}updateChild(e,n){const r=tt(e);if(r===null)return n;{de(tt(e)!==".priority"||no(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(St(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Dn,(o,a)=>{n[o]=a.val(e),r++,s&&ut.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Hk(this.getPriority().val())+":"),this.forEachChild(Dn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":mk(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new nt(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new nt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new nt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,nt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,nt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Th?-1:0}withIndex(e){if(e===dl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ut(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===dl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Dn),i=n.getIterator(Dn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===dl?null:this.indexMap_.get(e.toString())}}ut.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class XV extends ut{constructor(){super(new hi(M1),ut.EMPTY_NODE,Yi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ut.EMPTY_NODE}isEmpty(){return!1}}const Th=new XV;Object.defineProperties(nt,{MIN:{value:new nt(Cl,ut.EMPTY_NODE)},MAX:{value:new nt(ua,Th)}});$k.__EMPTY_NODE=ut.EMPTY_NODE;sn.__childrenNodeConstructor=ut;qV(Th);KV(Th);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=!0;function Mn(t,e=null){if(t===null)return ut.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),de(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new sn(n,Mn(e))}if(!(t instanceof Array)&&ZV){const n=[];let r=!1;if(Dr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Mn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new nt(o,l)))}}),n.length===0)return ut.EMPTY_NODE;const s=Mf(n,WV,o=>o.name,M1);if(r){const o=Mf(n,Dn.getCompare());return new ut(s,Mn(e),new Yi({".priority":o},{".priority":Dn}))}else return new ut(s,Mn(e),Yi.Default)}else{let n=ut.EMPTY_NODE;return Dr(t,(r,i)=>{if(fs(t,r)&&r.substring(0,1)!=="."){const s=Mn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Mn(e))}}GV(Mn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9 extends Qp{constructor(e){super(),this.indexPath_=e,de(!Qe(e)&&tt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?sc(e.name,n.name):s}makePost(e,n){const r=Mn(e),i=ut.EMPTY_NODE.updateChild(this.indexPath_,r);return new nt(n,i)}maxPost(){const e=ut.EMPTY_NODE.updateChild(this.indexPath_,Th);return new nt(ua,e)}toString(){return Vk(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9 extends Qp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?sc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return nt.MIN}maxPost(){return nt.MAX}makePost(e,n){const r=Mn(e);return new nt(n,r)}toString(){return".value"}}const n9=new t9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(t){return{type:"value",snapshotNode:t}}function i9(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function s9(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function CT(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function o9(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return de(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return de(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cl}hasEnd(){return this.endSet_}getIndexEndValue(){return de(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return de(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ua}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return de(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dn}copy(){const e=new P1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Dn?n="$priority":t.index_===n9?n="$value":t.index_===dl?n="$key":(de(t.index_ instanceof e9,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=wn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=wn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+wn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=wn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+wn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function RT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Dn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends xk{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=bh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(de(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Pf.getListenId_(e,r),a={};this.listens_[o]=a;const l=kT(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,r),Il(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",i(d,null)}})}unlisten(e,n){const r=Pf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=kT(e._queryParams),r=e._path.toString(),i=new Ru;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rc(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Ou(a.responseText)}catch{_r("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&_r("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(){this.rootNode_=ut.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(){return{value:null,children:new Map}}function qk(t,e,n){if(Qe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=tt(e);t.children.has(r)||t.children.set(r,xf());const i=t.children.get(r);e=St(e),qk(i,e,n)}}function h_(t,e,n){t.value!==null?n(e,t.value):l9(t,(r,i)=>{const s=new kt(e.toString()+"/"+r);h_(i,s,n)})}function l9(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Dr(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=10*1e3,u9=30*1e3,h9=5*60*1e3;class d9{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new c9(e);const r=OT+(u9-OT)*Math.random();eu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Dr(e,(i,s)=>{s>0&&fs(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),eu(this.reportStats_.bind(this),Math.floor(Math.random()*2*h9))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(di||(di={}));function Gk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Kk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Yk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=di.ACK_USER_WRITE,this.source=Gk()}operationForChild(e){if(Qe(this.path)){if(this.affectedTree.value!=null)return de(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new kt(e));return new Df(gt(),n,this.revert)}}else return de(tt(this.path)===e,"operationForChild called for unrelated child."),new Df(St(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=di.OVERWRITE}operationForChild(e){return Qe(this.path)?new ha(this.source,gt(),this.snap.getImmediateChild(e)):new ha(this.source,St(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=di.MERGE}operationForChild(e){if(Qe(this.path)){const n=this.children.subtree(new kt(e));return n.isEmpty()?null:n.value?new ha(this.source,gt(),n.value):new Du(this.source,gt(),n)}else return de(tt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Du(this.source,St(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qe(e))return this.isFullyInitialized()&&!this.filtered_;const n=tt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function f9(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(o9(o.childName,o.snapshotNode))}),wc(t,i,"child_removed",e,r,n),wc(t,i,"child_added",e,r,n),wc(t,i,"child_moved",s,r,n),wc(t,i,"child_changed",e,r,n),wc(t,i,"value",e,r,n),i}function wc(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>m9(t,a,l)),o.forEach(a=>{const l=p9(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function p9(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function m9(t,e,n){if(e.childName==null||n.childName==null)throw tc("Should only compare child_ events.");const r=new nt(e.childName,e.snapshotNode),i=new nt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t,e){return{eventCache:t,serverCache:e}}function tu(t,e,n,r){return Jk(new x1(e,n,r),t.serverCache)}function Qk(t,e,n,r){return Jk(t.eventCache,new x1(e,n,r))}function d_(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function da(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg;const g9=()=>(Eg||(Eg=new hi(tV)),Eg);class Tt{constructor(e,n=g9()){this.value=e,this.children=n}static fromObject(e){let n=new Tt(null);return Dr(e,(r,i)=>{n=n.set(new kt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:gt(),value:this.value};if(Qe(e))return null;{const r=tt(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(St(e),n);return s!=null?{path:cn(new kt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Qe(e))return this;{const n=tt(e),r=this.children.get(n);return r!==null?r.subtree(St(e)):new Tt(null)}}set(e,n){if(Qe(e))return new Tt(n,this.children);{const r=tt(e),s=(this.children.get(r)||new Tt(null)).set(St(e),n),o=this.children.insert(r,s);return new Tt(this.value,o)}}remove(e){if(Qe(e))return this.children.isEmpty()?new Tt(null):new Tt(null,this.children);{const n=tt(e),r=this.children.get(n);if(r){const i=r.remove(St(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Tt(null):new Tt(this.value,s)}else return this}}get(e){if(Qe(e))return this.value;{const n=tt(e),r=this.children.get(n);return r?r.get(St(e)):null}}setTree(e,n){if(Qe(e))return n;{const r=tt(e),s=(this.children.get(r)||new Tt(null)).setTree(St(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Tt(this.value,o)}}fold(e){return this.fold_(gt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(cn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,gt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Qe(e))return null;{const s=tt(e),o=this.children.get(s);return o?o.findOnPath_(St(e),cn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,gt(),n)}foreachOnPath_(e,n,r){if(Qe(e))return this;{this.value&&r(n,this.value);const i=tt(e),s=this.children.get(i);return s?s.foreachOnPath_(St(e),cn(n,i),r):new Tt(null)}}foreach(e){this.foreach_(gt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(cn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.writeTree_=e}static empty(){return new Kr(new Tt(null))}}function nu(t,e,n){if(Qe(e))return new Kr(new Tt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Nr(i,e);return s=s.updateChild(o,n),new Kr(t.writeTree_.set(i,s))}else{const i=new Tt(n),s=t.writeTree_.setTree(e,i);return new Kr(s)}}}function NT(t,e,n){let r=t;return Dr(n,(i,s)=>{r=nu(r,cn(e,i),s)}),r}function MT(t,e){if(Qe(e))return Kr.empty();{const n=t.writeTree_.setTree(e,new Tt(null));return new Kr(n)}}function f_(t,e){return Ca(t,e)!=null}function Ca(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Nr(n.path,e)):null}function PT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Dn,(r,i)=>{e.push(new nt(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new nt(r,i.value))}),e}function Ks(t,e){if(Qe(e))return t;{const n=Ca(t,e);return n!=null?new Kr(new Tt(n)):new Kr(t.writeTree_.subtree(e))}}function p_(t){return t.writeTree_.isEmpty()}function kl(t,e){return Xk(gt(),t.writeTree_,e)}function Xk(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(de(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Xk(cn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(cn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t,e){return iR(e,t)}function y9(t,e,n,r,i){de(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=nu(t.visibleWrites,e,n)),t.lastWriteId=r}function _9(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function v9(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);de(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&b9(a,r.path)?i=!1:jr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return E9(t),!0;if(r.snap)t.visibleWrites=MT(t.visibleWrites,r.path);else{const a=r.children;Dr(a,l=>{t.visibleWrites=MT(t.visibleWrites,cn(r.path,l))})}return!0}else return!1}function b9(t,e){if(t.snap)return jr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&jr(cn(t.path,n),e))return!0;return!1}function E9(t){t.visibleWrites=eR(t.allWrites,T9,gt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function T9(t){return t.visible}function eR(t,e,n){let r=Kr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)jr(n,o)?(a=Nr(n,o),r=nu(r,a,s.snap)):jr(o,n)&&(a=Nr(o,n),r=nu(r,gt(),s.snap.getChild(a)));else if(s.children){if(jr(n,o))a=Nr(n,o),r=NT(r,a,s.children);else if(jr(o,n))if(a=Nr(o,n),Qe(a))r=NT(r,gt(),s.children);else{const l=Il(s.children,tt(a));if(l){const c=l.getChild(St(a));r=nu(r,gt(),c)}}}else throw tc("WriteRecord should have .snap or .children")}}return r}function tR(t,e,n,r,i){if(!r&&!i){const s=Ca(t.visibleWrites,e);if(s!=null)return s;{const o=Ks(t.visibleWrites,e);if(p_(o))return n;if(n==null&&!f_(o,gt()))return null;{const a=n||ut.EMPTY_NODE;return kl(o,a)}}}else{const s=Ks(t.visibleWrites,e);if(!i&&p_(s))return n;if(!i&&n==null&&!f_(s,gt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(jr(c.path,e)||jr(e,c.path))},a=eR(t.allWrites,o,e),l=n||ut.EMPTY_NODE;return kl(a,l)}}}function w9(t,e,n){let r=ut.EMPTY_NODE;const i=Ca(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Dn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ks(t.visibleWrites,e);return n.forEachChild(Dn,(o,a)=>{const l=kl(Ks(s,new kt(o)),a);r=r.updateImmediateChild(o,l)}),PT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Ks(t.visibleWrites,e);return PT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function S9(t,e,n,r,i){de(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=cn(e,n);if(f_(t.visibleWrites,s))return null;{const o=Ks(t.visibleWrites,s);return p_(o)?i.getChild(n):kl(o,i.getChild(n))}}function I9(t,e,n,r){const i=cn(e,n),s=Ca(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Ks(t.visibleWrites,i);return kl(o,r.getNode().getImmediateChild(n))}else return null}function A9(t,e){return Ca(t.visibleWrites,e)}function C9(t,e,n,r,i,s,o){let a;const l=Ks(t.visibleWrites,e),c=Ca(l,gt());if(c!=null)a=c;else if(n!=null)a=kl(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&u.length<i;)h(f,r)!==0&&u.push(f),f=d.getNext();return u}else return[]}function k9(){return{visibleWrites:Kr.empty(),allWrites:[],lastWriteId:-1}}function m_(t,e,n,r){return tR(t.writeTree,t.treePath,e,n,r)}function nR(t,e){return w9(t.writeTree,t.treePath,e)}function xT(t,e,n,r){return S9(t.writeTree,t.treePath,e,n,r)}function Lf(t,e){return A9(t.writeTree,cn(t.treePath,e))}function R9(t,e,n,r,i,s){return C9(t.writeTree,t.treePath,e,n,r,i,s)}function D1(t,e,n){return I9(t.writeTree,t.treePath,e,n)}function rR(t,e){return iR(cn(t.treePath,e),t.writeTree)}function iR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;de(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),de(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,CT(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,s9(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,i9(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,CT(r,e.snapshotNode,i.oldSnap));else throw tc("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const sR=new N9;class L1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new x1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return D1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:da(this.viewCache_),s=R9(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function M9(t,e){de(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),de(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function P9(t,e,n,r,i){const s=new O9;let o,a;if(n.type===di.OVERWRITE){const c=n;c.source.fromUser?o=g_(t,e,c.path,c.snap,r,i,s):(de(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Qe(c.path),o=Vf(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===di.MERGE){const c=n;c.source.fromUser?o=D9(t,e,c.path,c.children,r,i,s):(de(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=y_(t,e,c.path,c.children,r,i,a,s))}else if(n.type===di.ACK_USER_WRITE){const c=n;c.revert?o=F9(t,e,c.path,r,i,s):o=L9(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===di.LISTEN_COMPLETE)o=V9(t,e,n.path,r,s);else throw tc("Unknown operation type: "+n.type);const l=s.getChanges();return x9(e,o,l),{viewCache:o,changes:l}}function x9(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=d_(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(r9(d_(e)))}}function oR(t,e,n,r,i,s){const o=e.eventCache;if(Lf(r,n)!=null)return e;{let a,l;if(Qe(n))if(de(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=da(e),u=c instanceof ut?c:ut.EMPTY_NODE,h=nR(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=m_(r,da(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=tt(n);if(c===".priority"){de(no(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=xT(r,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=St(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=xT(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=D1(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,i,s):a=o.getNode()}}return tu(e,a,o.isFullyInitialized()||Qe(n),t.filter.filtersNodes())}}function Vf(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Qe(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=tt(n);if(!l.isCompleteForPath(n)&&no(n)>1)return e;const p=St(n),g=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),f,g,p,sR,null)}const h=Qk(e,c,l.isFullyInitialized()||Qe(n),u.filtersNodes()),d=new L1(i,h,s);return oR(t,h,n,i,d,a)}function g_(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new L1(i,e,s);if(Qe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=tu(e,c,!0,t.filter.filtersNodes());else{const h=tt(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=tu(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=St(n),f=a.getNode().getImmediateChild(h);let p;if(Qe(d))p=r;else{const m=u.getCompleteChild(h);m!=null?Lk(d)===".priority"&&m.getChild(Fk(d)).isEmpty()?p=m:p=m.updateChild(d,r):p=ut.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=tu(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function DT(t,e){return t.eventCache.isCompleteForChild(e)}function D9(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=cn(n,l);DT(e,tt(u))&&(a=g_(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=cn(n,l);DT(e,tt(u))||(a=g_(t,a,u,c,i,s,o))}),a}function LT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function y_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Qe(n)?c=r:c=new Tt(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=LT(t,f,d);l=Vf(t,l,new kt(h),p,i,s,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),m=LT(t,p,d);l=Vf(t,l,new kt(h),m,i,s,o,a)}}),l}function L9(t,e,n,r,i,s,o){if(Lf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Qe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Vf(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Qe(n)){let c=new Tt(null);return l.getNode().forEachChild(dl,(u,h)=>{c=c.set(new kt(u),h)}),y_(t,e,n,c,i,s,a,o)}else return e}else{let c=new Tt(null);return r.foreach((u,h)=>{const d=cn(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),y_(t,e,n,c,i,s,a,o)}}function V9(t,e,n,r,i){const s=e.serverCache,o=Qk(e,s.getNode(),s.isFullyInitialized()||Qe(n),s.isFiltered());return oR(t,o,n,r,sR,i)}function F9(t,e,n,r,i,s){let o;if(Lf(r,n)!=null)return e;{const a=new L1(r,e,i),l=e.eventCache.getNode();let c;if(Qe(n)||tt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=m_(r,da(e));else{const h=e.serverCache.getNode();de(h instanceof ut,"serverChildren would be complete if leaf node"),u=nR(r,h)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=tt(n);let h=D1(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,St(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,ut.EMPTY_NODE,St(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=m_(r,da(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Lf(r,gt())!=null,tu(e,c,o,t.filter.filtersNodes())}}function U9(t,e){const n=da(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Qe(e)&&!n.getImmediateChild(tt(e)).isEmpty())?n.getChild(e):null}function VT(t,e,n,r){e.type===di.MERGE&&e.source.queryId!==null&&(de(da(t.viewCache_),"We should always have a full cache before handling merges"),de(d_(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=P9(t.processor_,i,e,n,r);return M9(t.processor_,s.viewCache),de(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,B9(t,s.changes,s.viewCache.eventCache.getNode(),null)}function B9(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return f9(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FT;function $9(t){de(!FT,"__referenceConstructor has already been defined"),FT=t}function V1(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return de(s!=null,"SyncTree gave us an op for an invalid query."),VT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(VT(o,e,n,r));return s}}function F1(t,e){let n=null;for(const r of t.views.values())n=n||U9(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UT;function H9(t){de(!UT,"__referenceConstructor has already been defined"),UT=t}class BT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Tt(null),this.pendingWriteTree_=k9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function z9(t,e,n,r,i){return y9(t.pendingWriteTree_,e,n,r,i),i?Zp(t,new ha(Gk(),e,n)):[]}function Ya(t,e,n=!1){const r=_9(t.pendingWriteTree_,e);if(v9(t.pendingWriteTree_,e)){let s=new Tt(null);return r.snap!=null?s=s.set(gt(),!0):Dr(r.children,o=>{s=s.set(new kt(o),!0)}),Zp(t,new Df(r.path,s,n))}else return[]}function Xp(t,e,n){return Zp(t,new ha(Kk(),e,n))}function j9(t,e,n){const r=Tt.fromObject(n);return Zp(t,new Du(Kk(),e,r))}function W9(t,e,n,r){const i=uR(t,r);if(i!=null){const s=hR(i),o=s.path,a=s.queryId,l=Nr(o,e),c=new ha(Yk(a),l,n);return dR(t,o,c)}else return[]}function q9(t,e,n,r){const i=uR(t,r);if(i){const s=hR(i),o=s.path,a=s.queryId,l=Nr(o,e),c=Tt.fromObject(n),u=new Du(Yk(a),l,c);return dR(t,o,u)}else return[]}function aR(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Nr(o,e),c=F1(a,l);if(c)return c});return tR(i,e,s,n,!0)}function Zp(t,e){return lR(e,t.syncPointTree_,null,Zk(t.pendingWriteTree_,gt()))}function lR(t,e,n,r){if(Qe(t.path))return cR(t,e,n,r);{const i=e.get(gt());n==null&&i!=null&&(n=F1(i,gt()));let s=[];const o=tt(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=rR(r,o);s=s.concat(lR(a,l,c,u))}return i&&(s=s.concat(V1(i,t,r,n))),s}}function cR(t,e,n,r){const i=e.get(gt());n==null&&i!=null&&(n=F1(i,gt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=rR(r,o),u=t.operationForChild(o);u&&(s=s.concat(cR(u,a,l,c)))}),i&&(s=s.concat(V1(i,t,r,n))),s}function uR(t,e){return t.tagToQueryMap.get(e)}function hR(t){const e=t.indexOf("$");return de(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new kt(t.substr(0,e))}}function dR(t,e,n){const r=t.syncPointTree_.get(e);de(r,"Missing sync point for query tag that we're tracking");const i=Zk(t.pendingWriteTree_,e);return V1(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new U1(n)}node(){return this.node_}}class B1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=cn(this.path_,e);return new B1(this.syncTree_,n)}node(){return aR(this.syncTree_,this.path_)}}const G9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},$T=function(t,e,n){if(!t||typeof t!="object")return t;if(de(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return K9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Y9(t[".sv"],e);de(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},K9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:de(!1,"Unexpected server value: "+t)}},Y9=function(t,e,n){t.hasOwnProperty("increment")||de(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&de(!1,"Unexpected increment value: "+r);const i=e.node();if(de(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},J9=function(t,e,n,r){return $1(e,new B1(n,t),r)},Q9=function(t,e,n){return $1(t,new U1(e),n)};function $1(t,e,n){const r=t.getPriority().val(),i=$T(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=$T(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new sn(a,Mn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new sn(i))),o.forEachChild(Dn,(a,l)=>{const c=$1(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function z1(t,e){let n=e instanceof kt?e:new kt(e),r=t,i=tt(n);for(;i!==null;){const s=Il(r.node.children,i)||{children:{},childCount:0};r=new H1(i,r,s),n=St(n),i=tt(n)}return r}function oc(t){return t.node.value}function fR(t,e){t.node.value=e,__(t)}function pR(t){return t.node.childCount>0}function X9(t){return oc(t)===void 0&&!pR(t)}function em(t,e){Dr(t.node.children,(n,r)=>{e(new H1(n,t,r))})}function mR(t,e,n,r){n&&!r&&e(t),em(t,i=>{mR(i,e,!0,r)}),n&&r&&e(t)}function Z9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function wh(t){return new kt(t.parent===null?t.name:wh(t.parent)+"/"+t.name)}function __(t){t.parent!==null&&eF(t.parent,t.name,t)}function eF(t,e,n){const r=X9(n),i=fs(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,__(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,__(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=/[\[\].#$\/\u0000-\u001F\u007F]/,nF=/[\[\].#$\u0000-\u001F\u007F]/,Tg=10*1024*1024,gR=function(t){return typeof t=="string"&&t.length!==0&&!tF.test(t)},rF=function(t){return typeof t=="string"&&t.length!==0&&!nF.test(t)},iF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),rF(t)},yR=function(t,e,n){const r=n instanceof kt?new VV(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ro(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ro(r)+" with contents = "+e.toString());if(gk(e))throw new Error(t+"contains "+e.toString()+" "+Ro(r));if(typeof e=="string"&&e.length>Tg/3&&qp(e)>Tg)throw new Error(t+"contains a string greater than "+Tg+" utf8 bytes "+Ro(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Dr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!gR(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ro(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);FV(r,o),yR(t,a,r),UV(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ro(r)+" in addition to actual children.")}},sF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!gR(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!iF(n))throw new Error(o3(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function aF(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Uk(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ka(t,e,n){aF(t,n),lF(t,r=>jr(r,e)||jr(e,r))}function lF(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(cF(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function cF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Xo&&Nn("event: "+n.toString()),Eh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF="repo_interrupt",hF=25;class dF{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xf(),this.transactionQueueTree_=new H1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fF(t,e,n){if(t.stats_=R1(t.repoInfo_),t.forceRestClient_||aV())t.server_=new Pf(t.repoInfo_,(r,i,s,o)=>{HT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>zT(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new es(t.repoInfo_,e,(r,i,s,o)=>{HT(t,r,i,s,o)},r=>{zT(t,r)},r=>{mF(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=fV(t.repoInfo_,()=>new d9(t.stats_,t.server_)),t.infoData_=new a9,t.infoSyncTree_=new BT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Xp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),j1(t,"connected",!1),t.serverSyncTree_=new BT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);ka(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function pF(t){const n=t.infoData_.getNode(new kt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function _R(t){return G9({timestamp:pF(t)})}function HT(t,e,n,r,i){t.dataUpdateCount++;const s=new kt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=Tf(n,c=>Mn(c));o=q9(t.serverSyncTree_,s,l,i)}else{const l=Mn(n);o=W9(t.serverSyncTree_,s,l,i)}else if(r){const l=Tf(n,c=>Mn(c));o=j9(t.serverSyncTree_,s,l)}else{const l=Mn(n);o=Xp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=q1(t,s)),ka(t.eventQueue_,a,o)}function zT(t,e){j1(t,"connected",e),e===!1&&yF(t)}function mF(t,e){Dr(e,(n,r)=>{j1(t,n,r)})}function j1(t,e,n){const r=new kt("/.info/"+e),i=Mn(n);t.infoData_.updateSnapshot(r,i);const s=Xp(t.infoSyncTree_,r,i);ka(t.eventQueue_,r,s)}function gF(t){return t.nextWriteId_++}function yF(t){vR(t,"onDisconnectEvents");const e=_R(t),n=xf();h_(t.onDisconnect_,gt(),(i,s)=>{const o=J9(i,s,t.serverSyncTree_,e);qk(n,i,o)});let r=[];h_(n,gt(),(i,s)=>{r=r.concat(Xp(t.serverSyncTree_,i,s));const o=EF(t,i);q1(t,o)}),t.onDisconnect_=xf(),ka(t.eventQueue_,gt(),r)}function _F(t){t.persistentConnection_&&t.persistentConnection_.interrupt(uF)}function vR(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Nn(n,...e)}function bR(t,e,n){return aR(t.serverSyncTree_,e,n)||ut.EMPTY_NODE}function W1(t,e=t.transactionQueueTree_){if(e||tm(t,e),oc(e)){const n=TR(t,e);de(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&vF(t,wh(e),n)}else pR(e)&&em(e,n=>{W1(t,n)})}function vF(t,e,n){const r=n.map(c=>c.currentWriteId),i=bR(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];de(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Nr(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{vR(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Ya(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();tm(t,z1(t.transactionQueueTree_,e)),W1(t,t.transactionQueueTree_),ka(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)Eh(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{_r("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}q1(t,e)}},o)}function q1(t,e){const n=ER(t,e),r=wh(n),i=TR(t,n);return bF(t,i,r),r}function bF(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Nr(n,l.path);let u=!1,h;if(de(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(Ya(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=hF)u=!0,h="maxretry",i=i.concat(Ya(t.serverSyncTree_,l.currentWriteId,!0));else{const d=bR(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){yR("transaction failed: Data returned ",f,l.path);let p=Mn(f);typeof f=="object"&&f!=null&&fs(f,".priority")||(p=p.updatePriority(d.getPriority()));const g=l.currentWriteId,y=_R(t),_=Q9(p,d,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=_,l.currentWriteId=gF(t),o.splice(o.indexOf(g),1),i=i.concat(z9(t.serverSyncTree_,l.path,_,l.currentWriteId,l.applyLocally)),i=i.concat(Ya(t.serverSyncTree_,g,!0))}else u=!0,h="nodata",i=i.concat(Ya(t.serverSyncTree_,l.currentWriteId,!0))}ka(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}tm(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Eh(r[a]);W1(t,t.transactionQueueTree_)}function ER(t,e){let n,r=t.transactionQueueTree_;for(n=tt(e);n!==null&&oc(r)===void 0;)r=z1(r,n),e=St(e),n=tt(e);return r}function TR(t,e){const n=[];return wR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function wR(t,e,n){const r=oc(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);em(e,i=>{wR(t,i,n)})}function tm(t,e){const n=oc(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,fR(e,n.length>0?n:void 0)}em(e,r=>{tm(t,r)})}function EF(t,e){const n=wh(ER(t,e)),r=z1(t.transactionQueueTree_,e);return Z9(r,i=>{wg(t,i)}),wg(t,r),mR(r,i=>{wg(t,i)}),n}function wg(t,e){const n=oc(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(de(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(de(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ya(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?fR(e,void 0):n.length=s+1,ka(t.eventQueue_,wh(e),i);for(let o=0;o<r.length;o++)Eh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function wF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_r(`Invalid query segment '${n}' in query '${t}'`)}return e}const jT=function(t,e){const n=SF(t),r=n.namespace;n.domain==="firebase.com"&&ca(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ca("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Z5();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new uV(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new kt(n.pathString)}},SF=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=TF(t.substring(u,h)));const d=wF(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Qe(this._path)?null:Lk(this._path)}get ref(){return new ac(this._repo,this._path)}get _queryIdentifier(){const e=RT(this._queryParams),n=C1(e);return n==="{}"?"default":n}get _queryObject(){return RT(this._queryParams)}isEqual(e){if(e=dn(e),!(e instanceof G1))return!1;const n=this._repo===e._repo,r=Uk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+LV(this._path)}}class ac extends G1{constructor(e,n){super(e,n,new P1,!1)}get parent(){const e=Fk(this._path);return e===null?null:new ac(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}$9(ac);H9(ac);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF="FIREBASE_DATABASE_EMULATOR_HOST",v_={};let AF=!1;function CF(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||ca("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=jT(s,i),a=o.repoInfo,l,c;typeof process<"u"&&uT&&(c=uT[IF]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=jT(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new l_(l_.OWNER):new cV(t.name,t.options,e);sF("Invalid Firebase Database URL",o),Qe(o.path)||ca("Database URL must point to the root of a Firebase Database (not including a child path).");const h=RF(a,t,u,new lV(t.name,n));return new OF(h,t)}function kF(t,e){const n=v_[e];(!n||n[t.key]!==t)&&ca(`Database ${e}(${t.repoInfo_}) has already been deleted.`),_F(t),delete n[t.key]}function RF(t,e,n,r){let i=v_[e.name];i||(i={},v_[e.name]=i);let s=i[t.toURLString()];return s&&ca("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new dF(t,AF,n,r),i[t.toURLString()]=s,s}class OF{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(fF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ac(this._repo,gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(kF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ca("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t){K5(ho),Ai(new Jr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return CF(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),yr(hT,dT,t),yr(hT,dT,"esm2017")}es.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};es.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};NF();var MF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe,K1=K1||{},De=MF||self;function nm(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Sh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function PF(t){return Object.prototype.hasOwnProperty.call(t,Sg)&&t[Sg]||(t[Sg]=++xF)}var Sg="closure_uid_"+(1e9*Math.random()>>>0),xF=0;function DF(t,e,n){return t.call.apply(t.bind,arguments)}function LF(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ln(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ln=DF:Ln=LF,Ln.apply(null,arguments)}function fd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function fo(){this.s=this.s,this.o=this.o}var VF=0;fo.prototype.s=!1;fo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),VF!=0)&&PF(this)};fo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Y1(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function WT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(nm(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Vn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Vn.prototype.h=function(){this.defaultPrevented=!0};var FF=function(){if(!De.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};De.addEventListener("test",n,e),De.removeEventListener("test",n,e)}catch{}return t}();function Lu(t){return/^[\s\xa0]*$/.test(t)}function rm(){var t=De.navigator;return t&&(t=t.userAgent)?t:""}function li(t){return rm().indexOf(t)!=-1}function J1(t){return J1[" "](t),t}J1[" "]=function(){};function UF(t,e){var n=NU;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var BF=li("Opera"),Rl=li("Trident")||li("MSIE"),IR=li("Edge"),b_=IR||Rl,AR=li("Gecko")&&!(rm().toLowerCase().indexOf("webkit")!=-1&&!li("Edge"))&&!(li("Trident")||li("MSIE"))&&!li("Edge"),$F=rm().toLowerCase().indexOf("webkit")!=-1&&!li("Edge");function CR(){var t=De.document;return t?t.documentMode:void 0}var E_;e:{var Ig="",Ag=function(){var t=rm();if(AR)return/rv:([^\);]+)(\)|;)/.exec(t);if(IR)return/Edge\/([\d\.]+)/.exec(t);if(Rl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if($F)return/WebKit\/(\S+)/.exec(t);if(BF)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Ag&&(Ig=Ag?Ag[1]:""),Rl){var Cg=CR();if(Cg!=null&&Cg>parseFloat(Ig)){E_=String(Cg);break e}}E_=Ig}var T_;if(De.document&&Rl){var qT=CR();T_=qT||parseInt(E_,10)||void 0}else T_=void 0;var HF=T_;function Vu(t,e){if(Vn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(AR){e:{try{J1(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:zF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Vu.$.h.call(this)}}mn(Vu,Vn);var zF={2:"touch",3:"pen",4:"mouse"};Vu.prototype.h=function(){Vu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Ih="closure_listenable_"+(1e6*Math.random()|0),jF=0;function WF(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++jF,this.fa=this.ia=!1}function im(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Q1(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function qF(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function kR(t){const e={};for(const n in t)e[n]=t[n];return e}const GT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RR(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<GT.length;s++)n=GT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function sm(t){this.src=t,this.g={},this.h=0}sm.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=S_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new WF(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function w_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=SR(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(im(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function S_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var X1="closure_lm_"+(1e6*Math.random()|0),kg={};function OR(t,e,n,r,i){if(r&&r.once)return MR(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)OR(t,e[s],n,r,i);return null}return n=t0(n),t&&t[Ih]?t.O(e,n,Sh(r)?!!r.capture:!!r,i):NR(t,e,n,!1,r,i)}function NR(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Sh(i)?!!i.capture:!!i,a=e0(t);if(a||(t[X1]=a=new sm(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=GF(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)FF||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xR(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function GF(){function t(n){return e.call(t.src,t.listener,n)}const e=KF;return t}function MR(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)MR(t,e[s],n,r,i);return null}return n=t0(n),t&&t[Ih]?t.P(e,n,Sh(r)?!!r.capture:!!r,i):NR(t,e,n,!0,r,i)}function PR(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)PR(t,e[s],n,r,i);else r=Sh(r)?!!r.capture:!!r,n=t0(n),t&&t[Ih]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=S_(s,n,r,i),-1<n&&(im(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=e0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=S_(e,n,r,i)),(n=-1<t?e[t]:null)&&Z1(n))}function Z1(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Ih])w_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xR(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=e0(e))?(w_(n,t),n.h==0&&(n.src=null,e[X1]=null)):im(t)}}}function xR(t){return t in kg?kg[t]:kg[t]="on"+t}function KF(t,e){if(t.fa)t=!0;else{e=new Vu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Z1(t),t=n.call(r,e)}return t}function e0(t){return t=t[X1],t instanceof sm?t:null}var Rg="__closure_events_fn_"+(1e9*Math.random()>>>0);function t0(t){return typeof t=="function"?t:(t[Rg]||(t[Rg]=function(e){return t.handleEvent(e)}),t[Rg])}function fn(){fo.call(this),this.i=new sm(this),this.S=this,this.J=null}mn(fn,fo);fn.prototype[Ih]=!0;fn.prototype.removeEventListener=function(t,e,n,r){PR(this,t,e,n,r)};function In(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Vn(e,t);else if(e instanceof Vn)e.target=e.target||t;else{var i=e;e=new Vn(r,t),RR(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=pd(o,r,!0,e)&&i}if(o=e.g=t,i=pd(o,r,!0,e)&&i,i=pd(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=pd(o,r,!1,e)&&i}fn.prototype.N=function(){if(fn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)im(n[r]);delete t.g[e],t.h--}}this.J=null};fn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};fn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function pd(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&w_(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var n0=De.JSON.stringify;class YF{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function JF(){var t=r0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class QF{constructor(){this.h=this.g=null}add(e,n){const r=DR.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var DR=new YF(()=>new XF,t=>t.reset());class XF{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ZF(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function eU(t){De.setTimeout(()=>{throw t},0)}let Fu,Uu=!1,r0=new QF,LR=()=>{const t=De.Promise.resolve(void 0);Fu=()=>{t.then(tU)}};var tU=()=>{for(var t;t=JF();){try{t.h.call(t.g)}catch(n){eU(n)}var e=DR;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Uu=!1};function om(t,e){fn.call(this),this.h=t||1,this.g=e||De,this.j=Ln(this.qb,this),this.l=Date.now()}mn(om,fn);fe=om.prototype;fe.ga=!1;fe.T=null;fe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),In(this,"tick"),this.ga&&(i0(this),this.start()))}};fe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function i0(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}fe.N=function(){om.$.N.call(this),i0(this),delete this.g};function s0(t,e,n){if(typeof t=="function")n&&(t=Ln(t,n));else if(t&&typeof t.handleEvent=="function")t=Ln(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:De.setTimeout(t,e||0)}function VR(t){t.g=s0(()=>{t.g=null,t.i&&(t.i=!1,VR(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class nU extends fo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:VR(this)}N(){super.N(),this.g&&(De.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bu(t){fo.call(this),this.h=t,this.g={}}mn(Bu,fo);var KT=[];function FR(t,e,n,r){Array.isArray(n)||(n&&(KT[0]=n.toString()),n=KT);for(var i=0;i<n.length;i++){var s=OR(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function UR(t){Q1(t.g,function(e,n){this.g.hasOwnProperty(n)&&Z1(e)},t),t.g={}}Bu.prototype.N=function(){Bu.$.N.call(this),UR(this)};Bu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function am(){this.g=!0}am.prototype.Ea=function(){this.g=!1};function rU(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function iU(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ja(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+oU(t,n)+(r?" "+r:"")})}function sU(t,e){t.info(function(){return"TIMEOUT: "+e})}am.prototype.info=function(){};function oU(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return n0(n)}catch{return e}}var Ra={},YT=null;function lm(){return YT=YT||new fn}Ra.Ta="serverreachability";function BR(t){Vn.call(this,Ra.Ta,t)}mn(BR,Vn);function $u(t){const e=lm();In(e,new BR(e))}Ra.STAT_EVENT="statevent";function $R(t,e){Vn.call(this,Ra.STAT_EVENT,t),this.stat=e}mn($R,Vn);function Hn(t){const e=lm();In(e,new $R(e,t))}Ra.Ua="timingevent";function HR(t,e){Vn.call(this,Ra.Ua,t),this.size=e}mn(HR,Vn);function Ah(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return De.setTimeout(function(){t()},e)}var cm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},zR={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function o0(){}o0.prototype.h=null;function JT(t){return t.h||(t.h=t.i())}function jR(){}var Ch={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function a0(){Vn.call(this,"d")}mn(a0,Vn);function l0(){Vn.call(this,"c")}mn(l0,Vn);var I_;function um(){}mn(um,o0);um.prototype.g=function(){return new XMLHttpRequest};um.prototype.i=function(){return{}};I_=new um;function kh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Bu(this),this.P=aU,t=b_?125:void 0,this.V=new om(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new WR}function WR(){this.i=null,this.g="",this.h=!1}var aU=45e3,qR={},A_={};fe=kh.prototype;fe.setTimeout=function(t){this.P=t};function C_(t,e,n){t.L=1,t.A=dm(ss(e)),t.u=n,t.S=!0,GR(t,null)}function GR(t,e){t.G=Date.now(),Rh(t),t.B=ss(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),t2(n.i,"t",r),t.o=0,n=t.l.J,t.h=new WR,t.g=T2(t.l,n?e:null,!t.u),0<t.O&&(t.M=new nU(Ln(t.Pa,t,t.g),t.O)),FR(t.U,t.g,"readystatechange",t.nb),e=t.I?kR(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),$u(),rU(t.j,t.v,t.B,t.m,t.W,t.u)}fe.nb=function(t){t=t.target;const e=this.M;e&&fi(t)==3?e.l():this.Pa(t)};fe.Pa=function(t){try{if(t==this.g)e:{const u=fi(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||b_||this.g&&(this.h.h||this.g.ja()||ew(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?$u(3):$u(2)),hm(this);var n=this.g.da();this.ca=n;t:if(KR(this)){var r=ew(this.g);t="";var i=r.length,s=fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Uo(this),ru(this);var o="";break t}this.h.i=new De.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,iU(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lu(a)){var c=a;break t}}c=null}if(n=c)Ja(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,k_(this,n);else{this.i=!1,this.s=3,Hn(12),Uo(this),ru(this);break e}}this.S?(YR(this,u,o),b_&&this.i&&u==3&&(FR(this.U,this.V,"tick",this.mb),this.V.start())):(Ja(this.j,this.m,o,null),k_(this,o)),u==4&&Uo(this),this.i&&!this.J&&(u==4?_2(this.l,this):(this.i=!1,Rh(this)))}else kU(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Hn(12)):(this.s=0,Hn(13)),Uo(this),ru(this)}}}catch{}finally{}};function KR(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function YR(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=lU(t,n),i==A_){e==4&&(t.s=4,Hn(14),r=!1),Ja(t.j,t.m,null,"[Incomplete Response]");break}else if(i==qR){t.s=4,Hn(15),Ja(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ja(t.j,t.m,i,null),k_(t,i);KR(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Hn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),p0(e),e.M=!0,Hn(11))):(Ja(t.j,t.m,n,"[Invalid Chunked Response]"),Uo(t),ru(t))}fe.mb=function(){if(this.g){var t=fi(this.g),e=this.g.ja();this.o<e.length&&(hm(this),YR(this,t,e),this.i&&t!=4&&Rh(this))}};function lU(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?A_:(n=Number(e.substring(n,r)),isNaN(n)?qR:(r+=1,r+n>e.length?A_:(e=e.slice(r,r+n),t.o=r+n,e)))}fe.cancel=function(){this.J=!0,Uo(this)};function Rh(t){t.Y=Date.now()+t.P,JR(t,t.P)}function JR(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ah(Ln(t.lb,t),e)}function hm(t){t.C&&(De.clearTimeout(t.C),t.C=null)}fe.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(sU(this.j,this.B),this.L!=2&&($u(),Hn(17)),Uo(this),this.s=2,ru(this)):JR(this,this.Y-t)};function ru(t){t.l.H==0||t.J||_2(t.l,t)}function Uo(t){hm(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,i0(t.V),UR(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function k_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||R_(n.i,t))){if(!t.K&&R_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Bf(n),gm(n);else break e;f0(n),Hn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ah(Ln(n.ib,n),6e3));if(1>=i2(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Bo(n,11)}else if((t.K||n.g==t)&&Bf(n),!Lu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(c0(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,At(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=E2(r,r.J?r.pa:null,r.Y),o.K){s2(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(hm(a),Rh(a)),r.g=o}else g2(r);0<n.j.length&&ym(n)}else c[0]!="stop"&&c[0]!="close"||Bo(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Bo(n,7):d0(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}$u(4)}catch{}}function cU(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(nm(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function uU(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(nm(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function QR(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(nm(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=uU(t),r=cU(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var XR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hU(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Zo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Zo){this.h=t.h,Ff(this,t.j),this.s=t.s,this.g=t.g,Uf(this,t.m),this.l=t.l;var e=t.i,n=new Hu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),QT(this,n),this.o=t.o}else t&&(e=String(t).match(XR))?(this.h=!1,Ff(this,e[1]||"",!0),this.s=Mc(e[2]||""),this.g=Mc(e[3]||"",!0),Uf(this,e[4]),this.l=Mc(e[5]||"",!0),QT(this,e[6]||"",!0),this.o=Mc(e[7]||"")):(this.h=!1,this.i=new Hu(null,this.h))}Zo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Pc(e,XT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Pc(e,XT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Pc(n,n.charAt(0)=="/"?pU:fU,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Pc(n,gU)),t.join("")};function ss(t){return new Zo(t)}function Ff(t,e,n){t.j=n?Mc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Uf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function QT(t,e,n){e instanceof Hu?(t.i=e,yU(t.i,t.h)):(n||(e=Pc(e,mU)),t.i=new Hu(e,t.h))}function At(t,e,n){t.i.set(e,n)}function dm(t){return At(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Mc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,dU),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function dU(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var XT=/[#\/\?@]/g,fU=/[#\?:]/g,pU=/[#\?]/g,mU=/[#\?@]/g,gU=/#/g;function Hu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function po(t){t.g||(t.g=new Map,t.h=0,t.i&&hU(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}fe=Hu.prototype;fe.add=function(t,e){po(this),this.i=null,t=lc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function ZR(t,e){po(t),e=lc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function e2(t,e){return po(t),e=lc(t,e),t.g.has(e)}fe.forEach=function(t,e){po(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};fe.ta=function(){po(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};fe.Z=function(t){po(this);let e=[];if(typeof t=="string")e2(this,t)&&(e=e.concat(this.g.get(lc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};fe.set=function(t,e){return po(this),this.i=null,t=lc(this,t),e2(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};fe.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function t2(t,e,n){ZR(t,e),0<n.length&&(t.i=null,t.g.set(lc(t,e),Y1(n)),t.h+=n.length)}fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function lc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function yU(t,e){e&&!t.j&&(po(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(ZR(this,r),t2(this,i,n))},t)),t.j=e}var _U=class{constructor(t,e){this.g=t,this.map=e}};function n2(t){this.l=t||vU,De.PerformanceNavigationTiming?(t=De.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(De.g&&De.g.Ka&&De.g.Ka()&&De.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vU=10;function r2(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function i2(t){return t.h?1:t.g?t.g.size:0}function R_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function c0(t,e){t.g?t.g.add(e):t.h=e}function s2(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}n2.prototype.cancel=function(){if(this.i=o2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function o2(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Y1(t.i)}var bU=class{stringify(t){return De.JSON.stringify(t,void 0)}parse(t){return De.JSON.parse(t,void 0)}};function EU(){this.g=new bU}function TU(t,e,n){const r=n||"";try{QR(t,function(i,s){let o=i;Sh(i)&&(o=n0(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wU(t,e){const n=new am;if(De.Image){const r=new Image;r.onload=fd(md,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fd(md,n,r,"TestLoadImage: error",!1,e),r.onabort=fd(md,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fd(md,n,r,"TestLoadImage: timeout",!1,e),De.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function md(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function fm(t){this.l=t.ec||null,this.j=t.ob||!1}mn(fm,o0);fm.prototype.g=function(){return new pm(this.l,this.j)};fm.prototype.i=function(t){return function(){return t}}({});function pm(t,e){fn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=u0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mn(pm,fn);var u0=0;fe=pm.prototype;fe.open=function(t,e){if(this.readyState!=u0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,zu(this)};fe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||De).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oh(this)),this.readyState=u0};fe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,zu(this)),this.g&&(this.readyState=3,zu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof De.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;a2(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function a2(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}fe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Oh(this):zu(this),this.readyState==3&&a2(this)}};fe.Za=function(t){this.g&&(this.response=this.responseText=t,Oh(this))};fe.Ya=function(t){this.g&&(this.response=t,Oh(this))};fe.ka=function(){this.g&&Oh(this)};function Oh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,zu(t)}fe.setRequestHeader=function(t,e){this.v.append(t,e)};fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function zu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(pm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var SU=De.JSON.parse;function Ft(t){fn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=l2,this.L=this.M=!1}mn(Ft,fn);var l2="",IU=/^https?$/i,AU=["POST","PUT"];fe=Ft.prototype;fe.Oa=function(t){this.M=t};fe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():I_.g(),this.C=this.u?JT(this.u):JT(I_),this.g.onreadystatechange=Ln(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){ZT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=De.FormData&&t instanceof De.FormData,!(0<=SR(AU,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{h2(this),0<this.B&&((this.L=CU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ln(this.ua,this)):this.A=s0(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){ZT(this,s)}};function CU(t){return Rl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}fe.ua=function(){typeof K1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,In(this,"timeout"),this.abort(8))};function ZT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,c2(t),mm(t)}function c2(t){t.F||(t.F=!0,In(t,"complete"),In(t,"error"))}fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,In(this,"complete"),In(this,"abort"),mm(this))};fe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mm(this,!0)),Ft.$.N.call(this)};fe.La=function(){this.s||(this.G||this.v||this.l?u2(this):this.kb())};fe.kb=function(){u2(this)};function u2(t){if(t.h&&typeof K1<"u"&&(!t.C[1]||fi(t)!=4||t.da()!=2)){if(t.v&&fi(t)==4)s0(t.La,0,t);else if(In(t,"readystatechange"),fi(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(XR)[1]||null;!i&&De.self&&De.self.location&&(i=De.self.location.protocol.slice(0,-1)),r=!IU.test(i?i.toLowerCase():"")}n=r}if(n)In(t,"complete"),In(t,"success");else{t.m=6;try{var s=2<fi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",c2(t)}}finally{mm(t)}}}}function mm(t,e){if(t.g){h2(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||In(t,"ready");try{n.onreadystatechange=r}catch{}}}function h2(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(De.clearTimeout(t.A),t.A=null)}fe.isActive=function(){return!!this.g};function fi(t){return t.g?t.g.readyState:0}fe.da=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}};fe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};fe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),SU(e)}};function ew(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case l2:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function kU(t){const e={};t=(t.g&&2<=fi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Lu(t[r]))continue;var n=ZF(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}qF(e,function(r){return r.join(", ")})}fe.Ia=function(){return this.m};fe.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function d2(t){let e="";return Q1(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function h0(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=d2(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):At(t,e,n))}function Sc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function f2(t){this.Ga=0,this.j=[],this.l=new am,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Sc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Sc("baseRetryDelayMs",5e3,t),this.hb=Sc("retryDelaySeedMs",1e4,t),this.eb=Sc("forwardChannelMaxRetries",2,t),this.xa=Sc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new n2(t&&t.concurrentRequestLimit),this.Ja=new EU,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}fe=f2.prototype;fe.ra=8;fe.H=1;function d0(t){if(p2(t),t.H==3){var e=t.W++,n=ss(t.I);if(At(n,"SID",t.K),At(n,"RID",e),At(n,"TYPE","terminate"),Nh(t,n),e=new kh(t,t.l,e),e.L=2,e.A=dm(ss(n)),n=!1,De.navigator&&De.navigator.sendBeacon)try{n=De.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&De.Image&&(new Image().src=e.A,n=!0),n||(e.g=T2(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Rh(e)}b2(t)}function gm(t){t.g&&(p0(t),t.g.cancel(),t.g=null)}function p2(t){gm(t),t.u&&(De.clearTimeout(t.u),t.u=null),Bf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&De.clearTimeout(t.m),t.m=null)}function ym(t){if(!r2(t.i)&&!t.m){t.m=!0;var e=t.Na;Fu||LR(),Uu||(Fu(),Uu=!0),r0.add(e,t),t.C=0}}function RU(t,e){return i2(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ah(Ln(t.Na,t,e),v2(t,t.C)),t.C++,!0)}fe.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new kh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=kR(s),RR(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=m2(this,i,e),n=ss(this.I),At(n,"RID",t),At(n,"CVER",22),this.F&&At(n,"X-HTTP-Session-Id",this.F),Nh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(d2(s)))+"&"+e:this.o&&h0(n,this.o,s)),c0(this.i,i),this.bb&&At(n,"TYPE","init"),this.P?(At(n,"$req",e),At(n,"SID","null"),i.aa=!0,C_(i,n,null)):C_(i,n,e),this.H=2}}else this.H==3&&(t?tw(this,t):this.j.length==0||r2(this.i)||tw(this))};function tw(t,e){var n;e?n=e.m:n=t.W++;const r=ss(t.I);At(r,"SID",t.K),At(r,"RID",n),At(r,"AID",t.V),Nh(t,r),t.o&&t.s&&h0(r,t.o,t.s),n=new kh(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=m2(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),c0(t.i,n),C_(n,r,e)}function Nh(t,e){t.na&&Q1(t.na,function(n,r){At(e,r,n)}),t.h&&QR({},function(n,r){At(e,r,n)})}function m2(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ln(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{TU(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function g2(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Fu||LR(),Uu||(Fu(),Uu=!0),r0.add(e,t),t.A=0}}function f0(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ah(Ln(t.Ma,t),v2(t,t.A)),t.A++,!0)}fe.Ma=function(){if(this.u=null,y2(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ah(Ln(this.jb,this),t)}};fe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hn(10),gm(this),y2(this))};function p0(t){t.B!=null&&(De.clearTimeout(t.B),t.B=null)}function y2(t){t.g=new kh(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ss(t.wa);At(e,"RID","rpc"),At(e,"SID",t.K),At(e,"AID",t.V),At(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&At(e,"TO",t.qa),At(e,"TYPE","xmlhttp"),Nh(t,e),t.o&&t.s&&h0(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=dm(ss(e)),n.u=null,n.S=!0,GR(n,t)}fe.ib=function(){this.v!=null&&(this.v=null,gm(this),f0(this),Hn(19))};function Bf(t){t.v!=null&&(De.clearTimeout(t.v),t.v=null)}function _2(t,e){var n=null;if(t.g==e){Bf(t),p0(t),t.g=null;var r=2}else if(R_(t.i,e))n=e.F,s2(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=lm(),In(r,new HR(r,n)),ym(t)}else g2(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&RU(t,e)||r==2&&f0(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Bo(t,5);break;case 4:Bo(t,10);break;case 3:Bo(t,6);break;default:Bo(t,2)}}}function v2(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Bo(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ln(t.pb,t);n||(n=new Zo("//www.google.com/images/cleardot.gif"),De.location&&De.location.protocol=="http"||Ff(n,"https"),dm(n)),wU(n.toString(),r)}else Hn(2);t.H=0,t.h&&t.h.za(e),b2(t),p2(t)}fe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Hn(2)):(this.l.info("Failed to ping google.com"),Hn(1))};function b2(t){if(t.H=0,t.ma=[],t.h){const e=o2(t.i);(e.length!=0||t.j.length!=0)&&(WT(t.ma,e),WT(t.ma,t.j),t.i.i.length=0,Y1(t.j),t.j.length=0),t.h.ya()}}function E2(t,e,n){var r=n instanceof Zo?ss(n):new Zo(n);if(r.g!="")e&&(r.g=e+"."+r.g),Uf(r,r.m);else{var i=De.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Zo(null);r&&Ff(s,r),e&&(s.g=e),i&&Uf(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&At(r,n,e),At(r,"VER",t.ra),Nh(t,r),r}function T2(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ft(new fm({ob:n})):new Ft(t.va),e.Oa(t.J),e}fe.isActive=function(){return!!this.h&&this.h.isActive(this)};function w2(){}fe=w2.prototype;fe.Ba=function(){};fe.Aa=function(){};fe.za=function(){};fe.ya=function(){};fe.isActive=function(){return!0};fe.Va=function(){};function $f(){if(Rl&&!(10<=Number(HF)))throw Error("Environmental error: no available transport.")}$f.prototype.g=function(t,e){return new Er(t,e)};function Er(t,e){fn.call(this),this.g=new f2(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Lu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Lu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new cc(this)}mn(Er,fn);Er.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Hn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=E2(t,null,t.Y),ym(t)};Er.prototype.close=function(){d0(this.g)};Er.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=n0(t),t=n);e.j.push(new _U(e.fb++,t)),e.H==3&&ym(e)};Er.prototype.N=function(){this.g.h=null,delete this.j,d0(this.g),delete this.g,Er.$.N.call(this)};function S2(t){a0.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mn(S2,a0);function I2(){l0.call(this),this.status=1}mn(I2,l0);function cc(t){this.g=t}mn(cc,w2);cc.prototype.Ba=function(){In(this.g,"a")};cc.prototype.Aa=function(t){In(this.g,new S2(t))};cc.prototype.za=function(t){In(this.g,new I2)};cc.prototype.ya=function(){In(this.g,"b")};function OU(){this.blockSize=-1}function Xr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}mn(Xr,OU);Xr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Og(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Xr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Og(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Og(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Og(this,r),i=0;break}}this.h=i,this.i+=e};Xr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ft(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var NU={};function m0(t){return-128<=t&&128>t?UF(t,function(e){return new ft([e|0],0>e?-1:0)}):new ft([t|0],0>t?-1:0)}function pi(t){if(isNaN(t)||!isFinite(t))return fl;if(0>t)return bn(pi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=O_;return new ft(e,0)}function A2(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return bn(A2(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=pi(Math.pow(e,8)),r=fl,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=pi(Math.pow(e,s)),r=r.R(s).add(pi(o))):(r=r.R(n),r=r.add(pi(o)))}return r}var O_=4294967296,fl=m0(0),N_=m0(1),nw=m0(16777216);fe=ft.prototype;fe.ea=function(){if(kr(this))return-bn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:O_+r)*e,e*=O_}return t};fe.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ji(this))return"0";if(kr(this))return"-"+bn(this).toString(t);for(var e=pi(Math.pow(t,6)),n=this,r="";;){var i=zf(n,e).g;n=Hf(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Ji(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};fe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ji(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function kr(t){return t.h==-1}fe.X=function(t){return t=Hf(this,t),kr(t)?-1:Ji(t)?0:1};function bn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ft(n,~t.h).add(N_)}fe.abs=function(){return kr(this)?bn(this):this};fe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ft(n,n[n.length-1]&-2147483648?-1:0)};function Hf(t,e){return t.add(bn(e))}fe.R=function(t){if(Ji(this)||Ji(t))return fl;if(kr(this))return kr(t)?bn(this).R(bn(t)):bn(bn(this).R(t));if(kr(t))return bn(this.R(bn(t)));if(0>this.X(nw)&&0>t.X(nw))return pi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,gd(n,2*r+2*i),n[2*r+2*i+1]+=s*l,gd(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,gd(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,gd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ft(n,0)};function gd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ic(t,e){this.g=t,this.h=e}function zf(t,e){if(Ji(e))throw Error("division by zero");if(Ji(t))return new Ic(fl,fl);if(kr(t))return e=zf(bn(t),e),new Ic(bn(e.g),bn(e.h));if(kr(e))return e=zf(t,bn(e)),new Ic(bn(e.g),e.h);if(30<t.g.length){if(kr(t)||kr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=N_,r=e;0>=r.X(t);)n=rw(n),r=rw(r);var i=La(n,1),s=La(r,1);for(r=La(r,2),n=La(n,2);!Ji(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=La(r,1),n=La(n,1)}return e=Hf(t,i.R(e)),new Ic(i,e)}for(i=fl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=pi(n),o=s.R(e);kr(o)||0<o.X(t);)n-=r,s=pi(n),o=s.R(e);Ji(s)&&(s=N_),i=i.add(s),t=Hf(t,o)}return new Ic(i,t)}fe.gb=function(t){return zf(this,t).h};fe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ft(n,this.h&t.h)};fe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ft(n,this.h|t.h)};fe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ft(n,this.h^t.h)};function rw(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ft(n,t.h)}function La(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ft(i,t.h)}$f.prototype.createWebChannel=$f.prototype.g;Er.prototype.send=Er.prototype.u;Er.prototype.open=Er.prototype.m;Er.prototype.close=Er.prototype.close;cm.NO_ERROR=0;cm.TIMEOUT=8;cm.HTTP_ERROR=6;zR.COMPLETE="complete";jR.EventType=Ch;Ch.OPEN="a";Ch.CLOSE="b";Ch.ERROR="c";Ch.MESSAGE="d";fn.prototype.listen=fn.prototype.O;Ft.prototype.listenOnce=Ft.prototype.P;Ft.prototype.getLastError=Ft.prototype.Sa;Ft.prototype.getLastErrorCode=Ft.prototype.Ia;Ft.prototype.getStatus=Ft.prototype.da;Ft.prototype.getResponseJson=Ft.prototype.Wa;Ft.prototype.getResponseText=Ft.prototype.ja;Ft.prototype.send=Ft.prototype.ha;Ft.prototype.setWithCredentials=Ft.prototype.Oa;Xr.prototype.digest=Xr.prototype.l;Xr.prototype.reset=Xr.prototype.reset;Xr.prototype.update=Xr.prototype.j;ft.prototype.add=ft.prototype.add;ft.prototype.multiply=ft.prototype.R;ft.prototype.modulo=ft.prototype.gb;ft.prototype.compare=ft.prototype.X;ft.prototype.toNumber=ft.prototype.ea;ft.prototype.toString=ft.prototype.toString;ft.prototype.getBits=ft.prototype.D;ft.fromNumber=pi;ft.fromString=A2;var MU=function(){return new $f},PU=function(){return lm()},Ng=cm,xU=zR,DU=Ra,iw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},yd=jR,LU=Ft,VU=Xr,pl=ft;const sw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new mh("@firebase/firestore");function Ac(){return fa.logLevel}function he(t,...e){if(fa.logLevel<=Ke.DEBUG){const n=e.map(g0);fa.debug(`Firestore (${uc}): ${t}`,...n)}}function ki(t,...e){if(fa.logLevel<=Ke.ERROR){const n=e.map(g0);fa.error(`Firestore (${uc}): ${t}`,...n)}}function Ol(t,...e){if(fa.logLevel<=Ke.WARN){const n=e.map(g0);fa.warn(`Firestore (${uc}): ${t}`,...n)}}function g0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t="Unexpected state"){const e=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: `+t;throw ki(e),new Error(e)}function Et(t,e){t||xe()}function Be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(On.UNAUTHENTICATED))}shutdown(){}}class UU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BU{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string"),new C2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string"),new On(e)}}class $U{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HU{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $U(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(On.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Et(typeof n.token=="string"),this.R=n.token,new zU(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=WU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function lt(t,e){return t<e?-1:t>e?1:0}function Nl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new be(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Jt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new Jt(0,0))}static max(){return new Ve(new Jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(),r===void 0?r=e.length-n:r>e.length-n&&xe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ju.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ju?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Nt extends ju{construct(e,n,r){return new Nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const qU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends ju{construct(e,n,r){return new Sn(e,n,r)}static isValidIdentifier(e){return qU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Sn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new be(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new be(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new be(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new be(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(n)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(Nt.fromString(e))}static fromName(e){return new Ae(Nt.fromString(e).popFirst(5))}static empty(){return new Ae(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new Nt(e.slice()))}}function GU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new Jt(n+1,0):new Jt(n,r));return new ro(i,Ae.empty(),e)}function KU(t){return new ro(t.readTime,t.key,-1)}class ro{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ro(Ve.min(),Ae.empty(),-1)}static max(){return new ro(Ve.max(),Ae.empty(),-1)}}function YU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ae.comparator(t.documentKey,e.documentKey),n!==0?n:lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==JU)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(i=>i?G.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new G((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new G((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new bi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new iu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=_0(r.target.error);this.V.reject(new iu(e,i))}}static open(e,n,r,i){try{return new y0(n,e.transaction(i,r))}catch(s){throw new iu(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(he("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new ZU(n)}}class $o{constructor(e,n,r){this.name=e,this.version=n,this.p=r,$o.S(Qt())===12.2&&ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return he("SimpleDb","Removing database:",e),Po(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!h1())return!1;if($o.C())return!0;const e=Qt(),n=$o.S(e),r=0<n&&n<10,i=$o.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(he("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new iu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new be(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new be(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new iu(e,o))},i.onupgradeneeded=s=>{he("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{he("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=y0.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),G.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(he("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class XU{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Po(this.k.delete())}}class iu extends be{constructor(e,n){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ph(t){return t.name==="IndexedDbTransactionError"}class ZU{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(he("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(he("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Po(r)}add(e){return he("SimpleDb","ADD",this.store.name,e,e),Po(this.store.add(e))}get(e){return Po(this.store.get(e)).next(n=>(n===void 0&&(n=null),he("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return he("SimpleDb","DELETE",this.store.name,e),Po(this.store.delete(e))}count(){return he("SimpleDb","COUNT",this.store.name),Po(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new G((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new G((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){he("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new G((r,i)=>{n.onerror=s=>{const o=_0(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new G((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new XU(a),c=n(a.primaryKey,a.value,l);if(c instanceof G){const u=c.catch(h=>(l.done(),G.reject(h)));r.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>G.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Po(t){return new G((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=_0(r.target.error);n(i)}})}let ow=!1;function _0(t){const e=$o.S(Qt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new be("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ow||(ow=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}v0._e=-1;function _m(t){return t==null}function jf(t){return t===0&&1/t==-1/0}function eB(t){return typeof t=="number"&&Number.isInteger(t)&&!jf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function R2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||vn.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _d(this.root,e,this.comparator,!1)}getReverseIterator(){return new _d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _d(this.root,e,this.comparator,!0)}}class _d{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??vn.RED,this.left=i??vn.EMPTY,this.right=s??vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new vn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return vn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lw(this.data.getIterator())}getIteratorFrom(e){return new lw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new An(this.comparator);return n.data=e,n}}class lw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new mr([])}unionWith(e){let n=new An(Sn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Nl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new O2("Invalid base64 string: "+s):s}}(e);return new Fn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const tB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(t){if(Et(!!t),typeof t=="string"){let e=0;const n=tB.exec(t);if(Et(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wt(t.seconds),nanos:Wt(t.nanos)}}function Wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pa(t){return typeof t=="string"?Fn.fromBase64String(t):Fn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function E0(t){const e=t.mapValue.fields.__previous_value__;return b0(e)?E0(e):e}function Wu(t){const e=io(t.mapValue.fields.__local_write_time__.timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class qu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new qu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?b0(t)?4:rB(t)?9007199254740991:10:xe()}function Ri(t,e){if(t===e)return!0;const n=ma(t);if(n!==ma(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=io(i.timestampValue),a=io(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return pa(i.bytesValue).isEqual(pa(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Wt(i.geoPointValue.latitude)===Wt(s.geoPointValue.latitude)&&Wt(i.geoPointValue.longitude)===Wt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Wt(i.integerValue)===Wt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Wt(i.doubleValue),a=Wt(s.doubleValue);return o===a?jf(o)===jf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Nl(t.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(aw(o)!==aw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ri(o[l],a[l])))return!1;return!0}(t,e);default:return xe()}}function Gu(t,e){return(t.values||[]).find(n=>Ri(n,e))!==void 0}function Ml(t,e){if(t===e)return 0;const n=ma(t),r=ma(e);if(n!==r)return lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Wt(s.integerValue||s.doubleValue),l=Wt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return cw(t.timestampValue,e.timestampValue);case 4:return cw(Wu(t),Wu(e));case 5:return lt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=pa(s),l=pa(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=lt(a[c],l[c]);if(u!==0)return u}return lt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=lt(Wt(s.latitude),Wt(o.latitude));return a!==0?a:lt(Wt(s.longitude),Wt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Ml(a[c],l[c]);if(u)return u}return lt(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===vd.mapValue&&o===vd.mapValue)return 0;if(s===vd.mapValue)return 1;if(o===vd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=lt(l[h],u[h]);if(d!==0)return d;const f=Ml(a[l[h]],c[u[h]]);if(f!==0)return f}return lt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw xe()}}function cw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return lt(t,e);const n=io(t),r=io(e),i=lt(n.seconds,r.seconds);return i!==0?i:lt(n.nanos,r.nanos)}function Pl(t){return M_(t)}function M_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=io(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return pa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=M_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${M_(n.fields[o])}`;return i+"}"}(t.mapValue):xe()}function P_(t){return!!t&&"integerValue"in t}function T0(t){return!!t&&"arrayValue"in t}function uw(t){return!!t&&"nullValue"in t}function hw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jd(t){return!!t&&"mapValue"in t}function su(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Oa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=su(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=su(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(n)}setAll(e){let n=Sn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=su(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Jd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Jd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Oa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zn(su(this.value))}}function N2(t){const e=[];return Oa(t.fields,(n,r)=>{const i=new Sn([n]);if(Jd(r)){const s=N2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Pn(e,0,Ve.min(),Ve.min(),Ve.min(),Zn.empty(),0)}static newFoundDocument(e,n,r,i){return new Pn(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new Pn(e,2,n,Ve.min(),Ve.min(),Zn.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Ve.min(),Ve.min(),Zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n){this.position=e,this.inclusive=n}}function dw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Ae.comparator(Ae.fromName(o.referenceValue),n.key):r=Ml(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ri(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n="asc"){this.field=e,this.dir=n}}function iB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{}class Xt extends M2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new oB(e,n,r):n==="array-contains"?new cB(e,r):n==="in"?new uB(e,r):n==="not-in"?new hB(e,r):n==="array-contains-any"?new dB(e,r):new Xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aB(e,r):new lB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ml(n,this.value)):n!==null&&ma(this.value)===ma(n)&&this.matchesComparison(Ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oi extends M2{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Oi(e,n)}matches(e){return P2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function P2(t){return t.op==="and"}function x2(t){return sB(t)&&P2(t)}function sB(t){for(const e of t.filters)if(e instanceof Oi)return!1;return!0}function x_(t){if(t instanceof Xt)return t.field.canonicalString()+t.op.toString()+Pl(t.value);if(x2(t))return t.filters.map(e=>x_(e)).join(",");{const e=t.filters.map(n=>x_(n)).join(",");return`${t.op}(${e})`}}function D2(t,e){return t instanceof Xt?function(r,i){return i instanceof Xt&&r.op===i.op&&r.field.isEqual(i.field)&&Ri(r.value,i.value)}(t,e):t instanceof Oi?function(r,i){return i instanceof Oi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&D2(o,i.filters[a]),!0):!1}(t,e):void xe()}function L2(t){return t instanceof Xt?function(n){return`${n.field.canonicalString()} ${n.op} ${Pl(n.value)}`}(t):t instanceof Oi?function(n){return n.op.toString()+" {"+n.getFilters().map(L2).join(" ,")+"}"}(t):"Filter"}class oB extends Xt{constructor(e,n,r){super(e,n,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const n=Ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class aB extends Xt{constructor(e,n){super(e,"in",n),this.keys=V2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lB extends Xt{constructor(e,n){super(e,"not-in",n),this.keys=V2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function V2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ae.fromName(r.referenceValue))}class cB extends Xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return T0(n)&&Gu(n.arrayValue,this.value)}}class uB extends Xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gu(this.value.arrayValue,n)}}class hB extends Xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gu(this.value.arrayValue,n)}}class dB extends Xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!T0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function pw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new fB(t,e,n,r,i,s,o)}function w0(t){const e=Be(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>x_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_m(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Pl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Pl(r)).join(",")),e.ce=n}return e.ce}function S0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!D2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fw(t.startAt,e.startAt)&&fw(t.endAt,e.endAt)}function D_(t){return Ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function pB(t,e,n,r,i,s,o,a){return new vm(t,e,n,r,i,s,o,a)}function bm(t){return new vm(t)}function mw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mB(t){return t.collectionGroup!==null}function ou(t){const e=Be(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new An(Sn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new qf(s,r))}),n.has(Sn.keyField().canonicalString())||e.le.push(new qf(Sn.keyField(),r))}return e.le}function Ei(t){const e=Be(t);return e.he||(e.he=gB(e,ou(t))),e.he}function gB(t,e){if(t.limitType==="F")return pw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new qf(i.field,s)});const n=t.endAt?new Wf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wf(t.startAt.position,t.startAt.inclusive):null;return pw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function L_(t,e,n){return new vm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Em(t,e){return S0(Ei(t),Ei(e))&&t.limitType===e.limitType}function F2(t){return`${w0(Ei(t))}|lt:${t.limitType}`}function $a(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>L2(i)).join(", ")}]`),_m(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Pl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Pl(i)).join(",")),`Target(${r})`}(Ei(t))}; limitType=${t.limitType})`}function Tm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ou(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=dw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ou(r),i)||r.endAt&&!function(o,a,l){const c=dw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ou(r),i))}(t,e)}function yB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function U2(t){return(e,n)=>{let r=!1;for(const i of ou(t)){const s=_B(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _B(t,e,n){const r=t.field.isKeyField()?Ae.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ml(l,c):xe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return R2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vB=new xt(Ae.comparator);function as(){return vB}const B2=new xt(Ae.comparator);function xc(...t){let e=B2;for(const n of t)e=e.insert(n.key,n);return e}function $2(t){let e=B2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ho(){return au()}function H2(){return au()}function au(){return new hc(t=>t.toString(),(t,e)=>t.isEqual(e))}const bB=new xt(Ae.comparator),EB=new An(Ae.comparator);function Je(...t){let e=EB;for(const n of t)e=e.add(n);return e}const TB=new An(lt);function wB(){return TB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jf(e)?"-0":e}}function j2(t){return{integerValue:""+t}}function SB(t,e){return eB(e)?j2(e):z2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this._=void 0}}function IB(t,e,n){return t instanceof Gf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&b0(s)&&(s=E0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof xl?q2(t,e):t instanceof Ku?G2(t,e):function(i,s){const o=W2(i,s),a=gw(o)+gw(i.Ie);return P_(o)&&P_(i.Ie)?j2(a):z2(i.serializer,a)}(t,e)}function AB(t,e,n){return t instanceof xl?q2(t,e):t instanceof Ku?G2(t,e):n}function W2(t,e){return t instanceof Kf?function(r){return P_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Gf extends wm{}class xl extends wm{constructor(e){super(),this.elements=e}}function q2(t,e){const n=K2(e);for(const r of t.elements)n.some(i=>Ri(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ku extends wm{constructor(e){super(),this.elements=e}}function G2(t,e){let n=K2(e);for(const r of t.elements)n=n.filter(i=>!Ri(i,r));return{arrayValue:{values:n}}}class Kf extends wm{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function gw(t){return Wt(t.integerValue||t.doubleValue)}function K2(t){return T0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e,n){this.field=e,this.transform=n}}function kB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof xl&&i instanceof xl||r instanceof Ku&&i instanceof Ku?Nl(r.elements,i.elements,Ri):r instanceof Kf&&i instanceof Kf?Ri(r.Ie,i.Ie):r instanceof Gf&&i instanceof Gf}(t.transform,e.transform)}class RB{constructor(e,n){this.version=e,this.transformResults=n}}class vr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sm{}function Y2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new I0(t.key,vr.none()):new xh(t.key,t.data,vr.none());{const n=t.data,r=Zn.empty();let i=new An(Sn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new mo(t.key,r,new mr(i.toArray()),vr.none())}}function OB(t,e,n){t instanceof xh?function(i,s,o){const a=i.value.clone(),l=_w(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof mo?function(i,s,o){if(!Qd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_w(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(J2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function lu(t,e,n,r){return t instanceof xh?function(s,o,a,l){if(!Qd(s.precondition,o))return a;const c=s.value.clone(),u=vw(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof mo?function(s,o,a,l){if(!Qd(s.precondition,o))return a;const c=vw(s.fieldTransforms,l,o),u=o.data;return u.setAll(J2(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Qd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function NB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=W2(r.transform,i||null);s!=null&&(n===null&&(n=Zn.empty()),n.set(r.field,s))}return n||null}function yw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Nl(r,i,(s,o)=>kB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xh extends Sm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class mo extends Sm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function J2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _w(t,e,n){const r=new Map;Et(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,AB(o,a,n[i]))}return r}function vw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,IB(s,o,e))}return r}class I0 extends Sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MB extends Sm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&OB(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=H2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Y2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&Nl(this.mutations,e.mutations,(n,r)=>yw(n,r))&&Nl(this.baseMutations,e.baseMutations,(n,r)=>yw(n,r))}}class A0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Et(e.mutations.length===r.length);let i=function(){return bB}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new A0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,et;function LB(t){switch(t){default:return xe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function Q2(t){if(t===void 0)return ki("GRPC error has no .code"),K.UNKNOWN;switch(t){case zt.OK:return K.OK;case zt.CANCELLED:return K.CANCELLED;case zt.UNKNOWN:return K.UNKNOWN;case zt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case zt.INTERNAL:return K.INTERNAL;case zt.UNAVAILABLE:return K.UNAVAILABLE;case zt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case zt.NOT_FOUND:return K.NOT_FOUND;case zt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case zt.ABORTED:return K.ABORTED;case zt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case zt.DATA_LOSS:return K.DATA_LOSS;default:return xe()}}(et=zt||(zt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=new pl([4294967295,4294967295],0);function bw(t){const e=VB().encode(t),n=new VU;return n.update(e),new Uint8Array(n.digest())}function Ew(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new pl([n,r],0),new pl([i,s],0)]}class C0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dc(`Invalid padding: ${n}`);if(r<0)throw new Dc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Dc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=pl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(pl.fromNumber(r)));return i.compare(FB)===1&&(i=new pl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=bw(e),[r,i]=Ew(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new C0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=bw(e),[r,i]=Ew(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Dh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Im(Ve.min(),i,new xt(lt),as(),Je())}}class Dh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Dh(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class X2{constructor(e,n){this.targetId=e,this.fe=n}}class Z2{constructor(e,n,r=Fn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Tw{constructor(){this.ge=0,this.pe=Sw(),this.ye=Fn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Je(),n=Je(),r=Je();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:xe()}}),new Dh(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Sw()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Et(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class UB{constructor(e){this.Be=e,this.ke=new Map,this.qe=as(),this.Qe=ww(),this.Ke=new xt(lt)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:xe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(D_(s))if(r===0){const o=new Ae(s.path);this.We(n,o,Pn.newNoDocument(o,Ve.min()))}else Et(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=pa(r).toUint8Array()}catch(l){if(l instanceof O2)return Ol("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new C0(o,i,s)}catch(l){return Ol(l instanceof Dc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&D_(a.target)){const l=new Ae(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Pn.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Je();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Im(e,n,this.Ke,this.qe,r);return this.qe=as(),this.Qe=ww(),this.Ke=new xt(lt),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Tw,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new An(lt),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Tw),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function ww(){return new xt(Ae.comparator)}function Sw(){return new xt(Ae.comparator)}const BB={asc:"ASCENDING",desc:"DESCENDING"},$B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HB={and:"AND",or:"OR"};class zB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function V_(t,e){return t.useProto3Json||_m(e)?e:{value:e}}function Yf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jB(t,e){return Yf(t,e.toTimestamp())}function Ti(t){return Et(!!t),Ve.fromTimestamp(function(n){const r=io(n);return new Jt(r.seconds,r.nanos)}(t))}function k0(t,e){return F_(t,e).canonicalString()}function F_(t,e){const n=function(i){return new Nt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tO(t){const e=Nt.fromString(t);return Et(oO(e)),e}function U_(t,e){return k0(t.databaseId,e.path)}function Mg(t,e){const n=tO(e);if(n.get(1)!==t.databaseId.projectId)throw new be(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ae(rO(n))}function nO(t,e){return k0(t.databaseId,e)}function WB(t){const e=tO(t);return e.length===4?Nt.emptyPath():rO(e)}function B_(t){return new Nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rO(t){return Et(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Iw(t,e,n){return{name:U_(t,e),fields:n.value.mapValue.fields}}function qB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:xe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Et(u===void 0||typeof u=="string"),Fn.fromBase64String(u||"")):(Et(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Fn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?K.UNKNOWN:Q2(c.code);return new be(u,c.message||"")}(o);n=new Z2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Mg(t,r.document.name),s=Ti(r.document.updateTime),o=r.document.createTime?Ti(r.document.createTime):Ve.min(),a=new Zn({mapValue:{fields:r.document.fields}}),l=Pn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Xd(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Mg(t,r.document),s=r.readTime?Ti(r.readTime):Ve.min(),o=Pn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Xd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Mg(t,r.document),s=r.removedTargetIds||[];n=new Xd([],s,i,null)}else{if(!("filter"in e))return xe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new DB(i,s),a=r.targetId;n=new X2(a,o)}}return n}function GB(t,e){let n;if(e instanceof xh)n={update:Iw(t,e.key,e.value)};else if(e instanceof I0)n={delete:U_(t,e.key)};else if(e instanceof mo)n={update:Iw(t,e.key,e.data),updateMask:n8(e.fieldMask)};else{if(!(e instanceof MB))return xe();n={verify:U_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Gf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ku)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw xe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:jB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xe()}(t,e.precondition)),n}function KB(t,e){return t&&t.length>0?(Et(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ti(i.updateTime):Ti(s);return o.isEqual(Ve.min())&&(o=Ti(s)),new RB(o,i.transformResults||[])}(n,e))):[]}function YB(t,e){return{documents:[nO(t,e.path)]}}function JB(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nO(t,i);const s=function(c){if(c.length!==0)return sO(Oi.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Ha(d.field),direction:ZB(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=V_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function QB(t){let e=WB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Et(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=iO(h);return d instanceof Oi&&x2(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new qf(za(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,_m(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new Wf(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new Wf(f,d)}(n.endAt)),pB(e,i,o,s,a,"F",l,c)}function XB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=za(n.unaryFilter.field);return Xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=za(n.unaryFilter.field);return Xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=za(n.unaryFilter.field);return Xt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=za(n.unaryFilter.field);return Xt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(t):t.fieldFilter!==void 0?function(n){return Xt.create(za(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Oi.create(n.compositeFilter.filters.map(r=>iO(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe()}}(n.compositeFilter.op))}(t):xe()}function ZB(t){return BB[t]}function e8(t){return $B[t]}function t8(t){return HB[t]}function Ha(t){return{fieldPath:t.canonicalString()}}function za(t){return Sn.fromServerFormat(t.fieldPath)}function sO(t){return t instanceof Xt?function(n){if(n.op==="=="){if(hw(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NAN"}};if(uw(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hw(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NAN"}};if(uw(n.value))return{unaryFilter:{field:Ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(n.field),op:e8(n.op),value:n.value}}}(t):t instanceof Oi?function(n){const r=n.getFilters().map(i=>sO(i));return r.length===1?r[0]:{compositeFilter:{op:t8(n.op),filters:r}}}(t):xe()}function n8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r,i,s=Ve.min(),o=Ve.min(),a=Fn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.ct=e}}function i8(t){const e=QB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?L_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(){this._n=new o8}addToCollectionParentIndex(e,n){return this._n.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ro.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class o8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new An(Nt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new An(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Dl(0)}static Ln(){return new Dl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(){this.changes=new hc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lu(r.mutation,i,mr.empty(),Jt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const i=Ho();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=xc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ho();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=as();const o=au(),a=function(){return au()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof mo)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),lu(u.mutation,c,u.mutation.getFieldMask(),Jt.now())):o.set(c.key,mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new l8(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=au();let i=new xt((o,a)=>o-a),s=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||mr.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Je()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=H2();u.forEach(d=>{if(!s.has(d)){const f=Y2(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mB(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):G.resolve(Ho());let a=-1,l=s;return o.next(c=>G.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?G.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Je())).next(u=>({batchId:a,changes:$2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ae(n)).next(r=>{let i=xc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=xc();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,l=>{const c=function(h,d){return new vm(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Pn.newInvalidDocument(u)))});let a=xc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&lu(u.mutation,c,mr.empty(),Jt.now()),Tm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return G.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ti(i.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:i8(i.bundledQuery),readTime:Ti(i.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(){this.overlays=new xt(Ae.comparator),this.hr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ho();return G.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const i=Ho(),s=n.length+1,o=new Ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return G.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Ho(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ho(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return G.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xB(n,r));let s=this.hr.get(n);s===void 0&&(s=Je(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.Pr=new An(on.Ir),this.Tr=new An(on.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new on(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new on(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new Ae(new Nt([])),r=new on(n,e),i=new on(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Ae(new Nt([])),r=new on(n,e),i=new on(n,e+1);let s=Je();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new on(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Ae.comparator(e.key,n.key)||lt(e.pr,n.pr)}static Er(e,n){return lt(e.pr,n.pr)||Ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new An(on.Ir)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new PB(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new on(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new on(n,0),i=new on(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new An(lt);return n.forEach(i=>{const s=new on(i,0),o=new on(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),G.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Ae.isDocumentKey(s)||(s=s.child(""));const o=new on(new Ae(s),0);let a=new An(lt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),G.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Et(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return G.forEach(n.mutations,i=>{const s=new on(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new on(n,0),i=this.wr.firstAfterOrEqual(r);return G.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.vr=e,this.docs=function(){return new xt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let r=as();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pn.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=as();const o=n.path,a=new Ae(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||YU(KU(u),r)<=0||(i.has(u.key)||Tm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,n,r,i){xe()}Fr(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new p8(this)}getSize(e){return G.resolve(this.size)}}class p8 extends a8{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e){this.persistence=e,this.Mr=new hc(n=>w0(n),S0),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.Or=0,this.Nr=new R0,this.targetCount=0,this.Lr=Dl.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),G.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new Dl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.qn(n),G.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n){this.Br={},this.overlays={},this.kr=new v0(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new m8(this),this.indexManager=new s8,this.remoteDocumentCache=function(i){return new f8(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new r8(n),this.$r=new u8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new d8(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const i=new y8(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return G.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class y8 extends QU{constructor(e){super(),this.currentSequenceNumber=e}}class O0{constructor(e){this.persistence=e,this.zr=new R0,this.jr=null}static Hr(e){return new O0(e)}get Jr(){if(this.jr)return this.jr;throw xe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),G.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Jr,r=>{const i=Ae.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Ve.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return G.or([()=>G.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Je(),i=Je();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new N0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Y4()?8:$o.v(Qt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new _8;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Ac()<=Ke.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",$a(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),G.resolve()):(Ac()<=Ke.DEBUG&&he("QueryEngine","Query:",$a(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ac()<=Ke.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",$a(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(n))):G.resolve())}ji(e,n){if(mw(n))return G.resolve(null);let r=Ei(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=L_(n,null,"F"),r=Ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Je(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,L_(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return mw(n)||i.isEqual(Ve.min())?G.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?G.resolve(null):(Ac()<=Ke.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$a(n)),this.es(e,o,n,GU(i,-1)).next(a=>a))})}Zi(e,n){let r=new An(U2(e));return n.forEach((i,s)=>{Tm(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Ac()<=Ke.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",$a(n)),this.zi.getDocumentsMatchingQuery(e,n,ro.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new xt(lt),this.rs=new hc(s=>w0(s),S0),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c8(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function E8(t,e,n,r){return new b8(t,e,n,r)}async function aO(t,e){const n=Be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Je();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function T8(t,e){const n=Be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=G.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(m=>{const g=c.docVersions.get(p);Et(g!==null),m.version.compareTo(g)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Je();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lO(t){const e=Be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function w8(t,e){const n=Be(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Fn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let l=as(),c=Je();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(S8(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(Ve.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function S8(t,e,n){let r=Je(),i=Je();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=as();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ve.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function I8(t,e){const n=Be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function A8(t,e){const n=Be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Us(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function $_(t,e,n){const r=Be(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ph(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Aw(t,e,n){const r=Be(t);let i=Ve.min(),s=Je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Be(l),d=h.rs.get(u);return d!==void 0?G.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,Ei(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Ve.min(),n?s:Je())).next(a=>(C8(r,yB(e),a),{documents:a,hs:s})))}function C8(t,e,n){let r=t.ss.get(e)||Ve.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class Cw{constructor(){this.activeTargetIds=wB()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k8{constructor(){this.no=new Cw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Cw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd=null;function Pg(){return bd===null?bd=function(){return 268435456+Math.round(2147483648*Math.random())}():bd++,"0x"+bd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class M8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=Pg(),l=this.bo(n,r.toUriEncodedString());he("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,i).then(u=>(he("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Ol("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=O8[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=Pg();return new Promise((o,a)=>{const l=new LU;l.setWithCredentials(!0),l.listenOnce(xU.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ng.NO_ERROR:const u=l.getResponseJson();he(Cn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Ng.TIMEOUT:he(Cn,`RPC '${e}' ${s} timed out`),a(new be(K.DEADLINE_EXCEEDED,"Request time out"));break;case Ng.HTTP_ERROR:const h=l.getStatus();if(he(Cn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(y)>=0?y:K.UNKNOWN}(f.status);a(new be(p,f.message))}else a(new be(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new be(K.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{he(Cn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);he(Cn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=Pg(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=MU(),a=PU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");he(Cn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new N8({lo:g=>{f?he(Cn,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(d||(he(Cn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),he(Cn,`RPC '${e}' stream ${i} sending:`,g),h.send(g))},ho:()=>h.close()}),m=(g,y,_)=>{g.listen(y,v=>{try{_(v)}catch(I){setTimeout(()=>{throw I},0)}})};return m(h,yd.EventType.OPEN,()=>{f||he(Cn,`RPC '${e}' stream ${i} transport opened.`)}),m(h,yd.EventType.CLOSE,()=>{f||(f=!0,he(Cn,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(h,yd.EventType.ERROR,g=>{f||(f=!0,Ol(Cn,`RPC '${e}' stream ${i} transport errored:`,g),p.Vo(new be(K.UNAVAILABLE,"The operation could not be completed")))}),m(h,yd.EventType.MESSAGE,g=>{var y;if(!f){const _=g.data[0];Et(!!_);const v=_,I=v.error||((y=v[0])===null||y===void 0?void 0:y.error);if(I){he(Cn,`RPC '${e}' stream ${i} received error:`,I);const S=I.status;let C=function(A){const V=zt[A];if(V!==void 0)return Q2(V)}(S),F=I.message;C===void 0&&(C=K.INTERNAL,F="Unknown error status: "+S+" with message "+I.message),f=!0,p.Vo(new be(C,F)),h.close()}else he(Cn,`RPC '${e}' stream ${i} received:`,_),p.mo(_)}}),m(a,DU.STAT_EVENT,g=>{g.stat===iw.PROXY?he(Cn,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===iw.NOPROXY&&he(Cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function xg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t){return new zB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new cO(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(ki(n.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new be(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P8 extends uO{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=qB(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ve.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ve.min():o.readTime?Ti(o.readTime):Ve.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=B_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=D_(l)?{documents:YB(s,l)}:{query:JB(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=eO(s,o.resumeToken);const c=V_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ve.min())>0){a.readTime=Yf(s,o.snapshotVersion.toTimestamp());const c=V_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=XB(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=B_(this.serializer),n.removeTarget=e,this.t_(n)}}class x8 extends uO{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=KB(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.T_(r,n)}return Et(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=B_(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GB(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new be(K.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,F_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new be(K.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,F_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new be(K.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class L8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ki(n),this.g_=!1):he("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{Na(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Be(l);c.v_.add(4),await Lh(c),c.x_.set("Unknown"),c.v_.delete(4),await Cm(c)}(this))})}),this.x_=new L8(r,i)}}async function Cm(t){if(Na(t))for(const e of t.F_)await e(!0)}async function Lh(t){for(const e of t.F_)await e(!1)}function hO(t,e){const n=Be(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),D0(n)?x0(n):dc(n).Jo()&&P0(n,e))}function M0(t,e){const n=Be(t),r=dc(n);n.C_.delete(e),r.Jo()&&dO(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Na(n)&&n.x_.set("Unknown"))}function P0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dc(t).c_(e)}function dO(t,e){t.O_.Oe(e),dc(t).l_(e)}function x0(t){t.O_=new UB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),dc(t).start(),t.x_.p_()}function D0(t){return Na(t)&&!dc(t).Ho()&&t.C_.size>0}function Na(t){return Be(t).v_.size===0}function fO(t){t.O_=void 0}async function F8(t){t.C_.forEach((e,n)=>{P0(t,e)})}async function U8(t,e){fO(t),D0(t)?(t.x_.S_(e),x0(t)):t.x_.set("Unknown")}async function B8(t,e,n){if(t.x_.set("Online"),e instanceof Z2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jf(t,r)}else if(e instanceof Xd?t.O_.$e(e):e instanceof X2?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Ve.min()))try{const r=await lO(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(Fn.EMPTY_BYTE_STRING,u.snapshotVersion)),dO(s,l);const h=new Us(u.target,l,c,u.sequenceNumber);P0(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){he("RemoteStore","Failed to raise snapshot:",r),await Jf(t,r)}}async function Jf(t,e,n){if(!Ph(e))throw e;t.v_.add(1),await Lh(t),t.x_.set("Offline"),n||(n=()=>lO(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await Cm(t)})}function pO(t,e){return e().catch(n=>Jf(t,n,e))}async function km(t){const e=Be(t),n=so(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;$8(e);)try{const i=await I8(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,H8(e,i)}catch(i){await Jf(e,i)}mO(e)&&gO(e)}function $8(t){return Na(t)&&t.D_.length<10}function H8(t,e){t.D_.push(e);const n=so(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function mO(t){return Na(t)&&!so(t).Ho()&&t.D_.length>0}function gO(t){so(t).start()}async function z8(t){so(t).d_()}async function j8(t){const e=so(t);for(const n of t.D_)e.I_(n.mutations)}async function W8(t,e,n){const r=t.D_.shift(),i=A0.from(r,e,n);await pO(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await km(t)}async function q8(t,e){e&&so(t).P_&&await async function(r,i){if(function(o){return LB(o)&&o!==K.ABORTED}(i.code)){const s=r.D_.shift();so(r).Zo(),await pO(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await km(r)}}(t,e),mO(t)&&gO(t)}async function Rw(t,e){const n=Be(t);n.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=Na(n);n.v_.add(3),await Lh(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await Cm(n)}async function G8(t,e){const n=Be(t);e?(n.v_.delete(2),await Cm(n)):e||(n.v_.add(2),await Lh(n),n.x_.set("Unknown"))}function dc(t){return t.N_||(t.N_=function(n,r,i){const s=Be(n);return s.R_(),new P8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:F8.bind(null,t),To:U8.bind(null,t),u_:B8.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),D0(t)?x0(t):t.x_.set("Unknown")):(await t.N_.stop(),fO(t))})),t.N_}function so(t){return t.L_||(t.L_=function(n,r,i){const s=Be(n);return s.R_(),new x8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:z8.bind(null,t),To:q8.bind(null,t),E_:j8.bind(null,t),T_:W8.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await km(t)):(await t.L_.stop(),t.D_.length>0&&(he("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new L0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function V0(t,e){if(ki("AsyncQueue",`${e}: ${t}`),Ph(t))return new be(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ae.comparator(n.key,r.key):(n,r)=>Ae.comparator(n.key,r.key),this.keyedMap=xc(),this.sortedSet=new xt(this.comparator)}static emptySet(e){return new ml(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.B_=new xt(Ae.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):xe():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ll{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ll(e,n,ml.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class Y8{constructor(){this.queries=new hc(e=>F2(e),Em),this.onlineState="Unknown",this.W_=new Set}}async function F0(t,e){const n=Be(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new K8,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=V0(o,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&B0(n)}async function U0(t,e){const n=Be(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function J8(t,e){const n=Be(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&B0(n)}function Q8(t,e,n){const r=Be(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function B0(t){t.W_.forEach(e=>{e.next()})}var H_,Nw;(Nw=H_||(H_={})).j_="default",Nw.Cache="cache";class $0{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ll(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==H_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.key=e}}class _O{constructor(e){this.key=e}}class X8{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Je(),this.mutatedKeys=Je(),this.ha=U2(e),this.Pa=new ml(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new Ow,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=Tm(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),g=!0):this.da(d,f)||(r.track({type:2,doc:f}),g=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),g=!0):d&&!f&&(r.track({type:1,doc:d}),g=!0,(l||c)&&(a=!0)),g&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(f,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return m(f)-m(p)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new Ll(this.query,e.Pa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Ow,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Je(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new _O(r))}),this.la.forEach(r=>{e.has(r)||n.push(new yO(r))}),n}fa(e){this.ua=e.hs,this.la=Je();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return Ll.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class Z8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class e7{constructor(e){this.key=e,this.pa=!1}}class t7{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new hc(a=>F2(a),Em),this.Sa=new Map,this.ba=new Set,this.Da=new xt(Ae.comparator),this.Ca=new Map,this.va=new R0,this.Fa={},this.Ma=new Map,this.xa=Dl.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function n7(t,e,n=!0){const r=SO(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await vO(r,e,n,!0),i}async function r7(t,e){const n=SO(t);await vO(n,e,!0,!1)}async function vO(t,e,n,r){const i=await A8(t.localStore,Ei(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await i7(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&hO(t.remoteStore,i),a}async function i7(t,e,n,r,i){t.Na=(h,d,f)=>async function(m,g,y,_){let v=g.view.Ta(y);v.Xi&&(v=await Aw(m.localStore,g.query,!1).then(({documents:F})=>g.view.Ta(F,v)));const I=_&&_.targetChanges.get(g.targetId),S=_&&_.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(v,m.isPrimaryClient,I,S);return Pw(m,g.targetId,C.Va),C.snapshot}(t,h,d,f);const s=await Aw(t.localStore,e,!0),o=new X8(e,s.hs),a=o.Ta(s.documents),l=Dh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Pw(t,n,c.Va);const u=new Z8(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function s7(t,e,n){const r=Be(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!Em(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&M0(r.remoteStore,i.targetId),z_(r,i.targetId)}).catch(Mh)):(z_(r,i.targetId),await $_(r.localStore,i.targetId,!0))}async function o7(t,e){const n=Be(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),M0(n.remoteStore,r.targetId))}async function a7(t,e,n){const r=p7(t);try{const i=await function(o,a){const l=Be(o),c=Jt.now(),u=a.reduce((f,p)=>f.add(p.key),Je());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=as(),m=Je();return l.os.getEntries(f,u).next(g=>{p=g,p.forEach((y,_)=>{_.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(g=>{h=g;const y=[];for(const _ of a){const v=NB(_,h.get(_.key).overlayedDocument);v!=null&&y.push(new mo(_.key,v,N2(v.value.mapValue),vr.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:$2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new xt(lt)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Vh(r,i.changes),await km(r.remoteStore)}catch(i){const s=V0(i,"Failed to persist write");n.reject(s)}}async function bO(t,e){const n=Be(t);try{const r=await w8(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?Et(o.pa):i.removedDocuments.size>0&&(Et(o.pa),o.pa=!1))}),await Vh(n,r,e)}catch(r){await Mh(r)}}function Mw(t,e,n){const r=Be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Be(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&B0(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function l7(t,e,n){const r=Be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new xt(Ae.comparator);o=o.insert(s,Pn.newNoDocument(s,Ve.min()));const a=Je().add(s),l=new Im(Ve.min(),new Map,new xt(lt),o,a);await bO(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),H0(r)}else await $_(r.localStore,e,!1).then(()=>z_(r,e,n)).catch(Mh)}async function c7(t,e){const n=Be(t),r=e.batch.batchId;try{const i=await T8(n.localStore,e);TO(n,r,null),EO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vh(n,i)}catch(i){await Mh(i)}}async function u7(t,e,n){const r=Be(t);try{const i=await function(o,a){const l=Be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Et(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);TO(r,e,n),EO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vh(r,i)}catch(i){await Mh(i)}}function EO(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function TO(t,e,n){const r=Be(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function z_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||wO(t,r)})}function wO(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(M0(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),H0(t))}function Pw(t,e,n){for(const r of n)r instanceof yO?(t.va.addReference(r.key,e),h7(t,r)):r instanceof _O?(he("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||wO(t,r.key)):xe()}function h7(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(he("SyncEngine","New document in limbo: "+n),t.ba.add(r),H0(t))}function H0(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new Ae(Nt.fromString(e)),r=t.xa.next();t.Ca.set(r,new e7(n)),t.Da=t.Da.insert(n,r),hO(t.remoteStore,new Us(Ei(bm(n.path)),r,"TargetPurposeLimboResolution",v0._e))}}async function Vh(t,e,n){const r=Be(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=N0.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,c){const u=Be(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>G.forEach(c,d=>G.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>G.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Ph(h))throw h;he("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(d,m)}}}(r.localStore,s))}async function d7(t,e){const n=Be(t);if(!n.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=await aO(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new be(K.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vh(n,r.us)}}function f7(t,e){const n=Be(t),r=n.Ca.get(e);if(r&&r.pa)return Je().add(r.key);{let i=Je();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function SO(t){const e=Be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l7.bind(null,e),e.ya.u_=J8.bind(null,e.eventManager),e.ya.La=Q8.bind(null,e.eventManager),e}function p7(t){const e=Be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u7.bind(null,e),e}class xw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Am(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return E8(this.persistence,new v8,e.initialUser,this.serializer)}createPersistence(e){return new g8(O0.Hr,this.serializer)}createSharedClientState(e){return new k8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class m7{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Mw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=d7.bind(null,this.syncEngine),await G8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Y8}()}createDatastore(e){const n=Am(e.databaseInfo.databaseId),r=function(s){return new M8(s)}(e.databaseInfo);return function(s,o,a,l){return new D8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new V8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Mw(this.syncEngine,n,0),function(){return kw.D()?new kw:new R8}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new t7(i,s,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=Be(r);he("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await Lh(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=On.UNAUTHENTICATED,this.clientId=k2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{he("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(he("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new be(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=V0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dg(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await aO(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Dw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _7(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Rw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Rw(e.remoteStore,i)),t._onlineComponents=e}function y7(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function _7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await Dg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!y7(n))throw n;Ol("Error using user provided cache. Falling back to memory cache: "+n),await Dg(t,new xw)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await Dg(t,new xw);return t._offlineComponents}async function IO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await Dw(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await Dw(t,new m7))),t._onlineComponents}function v7(t){return IO(t).then(e=>e.syncEngine)}async function Qf(t){const e=await IO(t),n=e.eventManager;return n.onListen=n7.bind(null,e.syncEngine),n.onUnlisten=s7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=r7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=o7.bind(null,e.syncEngine),n}function b7(t,e,n={}){const r=new bi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new z0({next:d=>{o.enqueueAndForget(()=>U0(s,h));const f=d.docs.has(a);!f&&d.fromCache?c.reject(new be(K.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?c.reject(new be(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new $0(bm(a.path),u,{includeMetadataChanges:!0,ta:!0});return F0(s,h)}(await Qf(t),t.asyncQueue,e,n,r)),r.promise}function E7(t,e,n={}){const r=new bi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new z0({next:d=>{o.enqueueAndForget(()=>U0(s,h)),d.fromCache&&l.source==="server"?c.reject(new be(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new $0(a,u,{includeMetadataChanges:!0,ta:!0});return F0(s,h)}(await Qf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t,e,n){if(!n)throw new be(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function T7(t,e,n,r){if(e===!0&&r===!0)throw new be(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Vw(t){if(!Ae.isDocumentKey(t))throw new be(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Fw(t){if(Ae.isDocumentKey(t))throw new be(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function j0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe()}function br(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=j0(t);throw new be(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new be(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new be(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new be(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new be(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new be(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new be(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FU;switch(r.type){case"firstParty":return new HU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Lw.get(n);r&&(he("ComponentProvider","Removing Datastore"),Lw.delete(n),r.terminate())}(this),Promise.resolve()}}function w7(t,e,n,r={}){var i;const s=(t=br(t,Rm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=On.MOCK_USER;else{a=W4(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new be(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new On(c)}t._authCredentials=new UU(new C2(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fh(this.firestore,e,this._query)}}class Wn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class Ys extends Fh{constructor(e,n,r){super(e,n,bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new Ae(e))}withConverter(e){return new Ys(this.firestore,e,this._path)}}function er(t,e,...n){if(t=dn(t),CO("collection","path",e),t instanceof Rm){const r=Nt.fromString(e,...n);return Fw(r),new Ys(t,null,r)}{if(!(t instanceof Wn||t instanceof Ys))throw new be(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Nt.fromString(e,...n));return Fw(r),new Ys(t.firestore,null,r)}}function Ye(t,e,...n){if(t=dn(t),arguments.length===1&&(e=k2.newId()),CO("doc","path",e),t instanceof Rm){const r=Nt.fromString(e,...n);return Vw(r),new Wn(t,null,new Ae(r))}{if(!(t instanceof Wn||t instanceof Ys))throw new be(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Nt.fromString(e,...n));return Vw(r),new Wn(t.firestore,t instanceof Ys?t.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new cO(this,"async_queue_retry"),this.cu=()=>{const n=xg();n&&he("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=xg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=xg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new bi;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Ph(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ki("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=L0.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&xe()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function Bw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class oo extends Rm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new S7}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||kO(this),this._firestoreClient.terminate()}}function I7(t,e){const n=typeof t=="object"?t:OC(),r=typeof t=="string"?t:e||"(default)",i=kC(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=z4("firestore");s&&w7(i,...s)}return i}function Uh(t){return t._firestoreClient||kO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function kO(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new nB(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,AO(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new g7(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vl(Fn.fromBase64String(e))}catch(n){throw new be(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vl(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A7=/^__.*__$/;class C7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mo(e,this.data,this.fieldMask,n,this.fieldTransforms):new xh(e,this.data,n,this.fieldTransforms)}}class RO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function OO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class Mm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Mm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Xf(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(OO(this.Vu)&&A7.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class k7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Am(e)}Cu(e,n,r,i=!1){return new Mm({Vu:e,methodName:n,Du:r,path:Sn.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function W0(t){const e=t._freezeSettings(),n=Am(t._databaseId);return new k7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function NO(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);G0("Data must be an object, but it was:",o,r);const a=xO(r,o);let l,c;if(s.merge)l=new mr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=j_(e,h,n);if(!o.contains(d))throw new be(K.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);LO(u,d)||u.push(d)}l=new mr(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new C7(new Zn(a),l,c)}class Pm extends Om{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pm}}function R7(t,e,n){return new Mm({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class q0 extends Om{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=R7(this,e,!0),r=this.vu.map(s=>$h(s,n)),i=new xl(r);return new CB(e.path,i)}isEqual(e){return e instanceof q0&&Nu(this.vu,e.vu)}}function MO(t,e,n,r){const i=t.Cu(1,e,n);G0("Data must be an object, but it was:",i,r);const s=[],o=Zn.empty();Oa(r,(l,c)=>{const u=K0(e,l,n);c=dn(c);const h=i.yu(u);if(c instanceof Pm)s.push(u);else{const d=$h(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new mr(s);return new RO(o,a,i.fieldTransforms)}function PO(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[j_(e,r,n)],l=[i];if(s.length%2!=0)throw new be(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(j_(e,s[d])),l.push(s[d+1]);const c=[],u=Zn.empty();for(let d=a.length-1;d>=0;--d)if(!LO(c,a[d])){const f=a[d];let p=l[d];p=dn(p);const m=o.yu(f);if(p instanceof Pm)c.push(f);else{const g=$h(p,m);g!=null&&(c.push(f),u.set(f,g))}}const h=new mr(c);return new RO(u,h,o.fieldTransforms)}function $h(t,e){if(DO(t=dn(t)))return G0("Unsupported field value:",e,t),xO(t,e);if(t instanceof Om)return function(r,i){if(!OO(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=$h(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Jt.fromDate(r);return{timestampValue:Yf(i.serializer,s)}}if(r instanceof Jt){const s=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yf(i.serializer,s)}}if(r instanceof Nm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vl)return{bytesValue:eO(i.serializer,r._byteString)};if(r instanceof Wn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:k0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${j0(r)}`)}(t,e)}function xO(t,e){const n={};return R2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oa(t,(r,i)=>{const s=$h(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function DO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Jt||t instanceof Nm||t instanceof Vl||t instanceof Wn||t instanceof Om)}function G0(t,e,n){if(!DO(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=j0(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function j_(t,e,n){if((e=dn(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return K0(t,e);throw Xf("Field path arguments must be of type string or ",t,!1,void 0,n)}const O7=new RegExp("[~\\*/\\[\\]]");function K0(t,e,n){if(e.search(O7)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bh(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new be(K.INVALID_ARGUMENT,a+t+l)}function LO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(FO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N7 extends VO{data(){return super.data()}}function FO(t,e){return typeof e=="string"?K0(t,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class M7{convertValue(e,n="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw xe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Oa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Nm(Wt(e.latitude),Wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=E0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=io(e);return new Jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Nt.fromString(e);Et(oO(r));const i=new qu(r.get(1),r.get(3)),s=new Ae(r.popFirst(5));return i.isEqual(n)||ki(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $O extends VO{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(FO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Zd extends $O{data(e={}){return super.data(e)}}class HO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Lc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zd(this._firestore,this._userDataWriter,r.key,r,new Lc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Zd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Zd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Lc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:P7(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function P7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t){t=br(t,Wn);const e=br(t.firestore,oo);return b7(Uh(e),t._key).then(n=>zO(e,t,n))}class Y0 extends M7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,n)}}function W_(t){t=br(t,Fh);const e=br(t.firestore,oo),n=Uh(e),r=new Y0(e);return UO(t._query),E7(n,t._query).then(i=>new HO(e,r,t,i))}function $w(t,e,n){t=br(t,Wn);const r=br(t.firestore,oo),i=BO(t.converter,e,n);return Q0(r,[NO(W0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vr.none())])}function ts(t,e,n,...r){t=br(t,Wn);const i=br(t.firestore,oo),s=W0(i);let o;return o=typeof(e=dn(e))=="string"||e instanceof Bh?PO(s,"updateDoc",t._key,e,n,r):MO(s,"updateDoc",t._key,e),Q0(i,[o.toMutation(t._key,vr.exists(!0))])}function J0(t,...e){var n,r,i;t=dn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Bw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Bw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof Wn)c=br(t.firestore,oo),u=bm(t._key.path),l={next:h=>{e[o]&&e[o](zO(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=br(t,Fh);c=br(h.firestore,oo),u=h._query;const d=new Y0(c);l={next:f=>{e[o]&&e[o](new HO(c,d,h,f))},error:e[o+1],complete:e[o+2]},UO(t._query)}return function(d,f,p,m){const g=new z0(m),y=new $0(f,g,p);return d.asyncQueue.enqueueAndForget(async()=>F0(await Qf(d),y)),()=>{g.Qa(),d.asyncQueue.enqueueAndForget(async()=>U0(await Qf(d),y))}}(Uh(c),u,a,l)}function Q0(t,e){return function(r,i){const s=new bi;return r.asyncQueue.enqueueAndForget(async()=>a7(await v7(r),i,s)),s.promise}(Uh(t),e)}function zO(t,e,n){const r=n.docs.get(e._key),i=new Y0(t);return new $O(t,i,e._key,r,new Lc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=W0(e)}set(e,n,r){this._verifyNotCommitted();const i=Lg(e,this._firestore),s=BO(i.converter,n,r),o=NO(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,vr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Lg(e,this._firestore);let o;return o=typeof(n=dn(n))=="string"||n instanceof Bh?PO(this._dataReader,"WriteBatch.update",s._key,n,r,i):MO(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Lg(e,this._firestore);return this._mutations=this._mutations.concat(new I0(n._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new be(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lg(t,e){if((t=dn(t)).firestore!==e)throw new be(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function jO(...t){return new q0("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){return Uh(t=br(t,oo)),new x7(t,e=>Q0(t,e))}(function(e,n=!0){(function(i){uc=i})(ho),Ai(new Jr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new oo(new BU(r.getProvider("auth-internal")),new jU(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new be(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),yr(sw,"4.6.0",e),yr(sw,"4.6.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="firebasestorage.googleapis.com",D7="storageBucket",L7=2*60*1e3,V7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Li{constructor(e,n,r=0){super(Vg(e),`Firebase Storage: ${n} (${Vg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ni;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ni||(Ni={}));function Vg(t){return"storage/"+t}function F7(){const t="An unknown error occurred, please check the error payload for server response.";return new Vi(Ni.UNKNOWN,t)}function U7(){return new Vi(Ni.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function B7(){return new Vi(Ni.CANCELED,"User canceled the upload/download.")}function $7(t){return new Vi(Ni.INVALID_URL,"Invalid URL '"+t+"'.")}function H7(t){return new Vi(Ni.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Hw(t){return new Vi(Ni.INVALID_ARGUMENT,t)}function qO(){return new Vi(Ni.APP_DELETED,"The Firebase app was deleted.")}function z7(t){return new Vi(Ni.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Wr.makeFromUrl(e,n)}catch{return new Wr(e,"")}if(r.path==="")return r;throw H7(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===WO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:y,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<v.length;I++){const S=v[I],C=S.regex.exec(e);if(C){const F=C[S.indices.bucket];let N=C[S.indices.path];N||(N=""),r=new Wr(F,N),S.postModify(r);break}}if(r==null)throw $7(e);return r}}class j7{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function h(g){i=setTimeout(()=>{i=null,t(f,l())},g)}function d(){s&&clearTimeout(s)}function f(g,...y){if(c){d();return}if(g){d(),u.call(null,g,...y);return}if(l()||o){d(),u.call(null,g,...y);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,h(v)}let p=!1;function m(g){p||(p=!0,d(),!c&&(i!==null?(g||(a=2),clearTimeout(i),h(0)):g||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function q7(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(t){return t!==void 0}function zw(t,e,n,r){if(r<e)throw Hw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hw(`Invalid value for '${t}'. Expected ${n} or less.`)}function K7(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Zf||(Zf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y7(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e,n,r,i,s,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ed(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Zf.NO_ERROR,l=s.getStatus();if(!a||Y7(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Zf.ABORT;r(!1,new Ed(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ed(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());G7(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=F7();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?qO():B7();o(l)}else{const l=U7();o(l)}};this.canceled_?n(!1,new Ed(!1,null,!0)):this.backoffId_=W7(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&q7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ed{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Q7(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function X7(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Z7(t,e){e&&(t["X-Firebase-GMPID"]=e)}function e$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function t$(t,e,n,r,i,s,o=!0){const a=K7(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Z7(c,e),Q7(c,n),X7(c,s),e$(c,r),new J7(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function r$(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this._service=e,n instanceof Wr?this._location=n:this._location=Wr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ep(e,n)}get root(){const e=new Wr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return r$(this._location.path)}get storage(){return this._service}get parent(){const e=n$(this._location.path);if(e===null)return null;const n=new Wr(this._location.bucket,e);return new ep(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw z7(e)}}function jw(t,e){const n=e==null?void 0:e[D7];return n==null?null:Wr.makeFromBucketSpec(n,t)}class i${constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=WO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=L7,this._maxUploadRetryTime=V7,this._requests=new Set,i!=null?this._bucket=Wr.makeFromBucketSpec(i,this._host):this._bucket=jw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wr.makeFromBucketSpec(this._url,e):this._bucket=jw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ep(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new j7(qO());{const o=t$(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Ww="@firebase/storage",qw="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$="storage";function o$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new i$(n,r,i,e,ho)}function a$(){Ai(new Jr(s$,o$,"PUBLIC").setMultipleInstances(!0)),yr(Ww,qw,""),yr(Ww,qw,"esm2017")}a$();const Fg=new WeakMap;function GO(t,e){return Fg.has(e)||Fg.set(e,t||{f:{},r:{},s:{},u:{}}),Fg.get(e)}function l$(t,e,n,r){if(!t)return n;const[i,s]=KO(t);if(!i)return n;const o=GO(void 0,r)[i]||{},a=e||s;return a&&a in o?o[a]:n}function c$(t,e,n,r){if(!t)return;const[i,s]=KO(t);if(!i)return;const o=GO(void 0,r)[i],a=e||s;if(a)return n.then(l=>{o[a]=l}).catch(ui),a}function KO(t){return F5(t)||U5(t)?["f",t.path]:B5(t)?["r",t.toString()]:$5(t)?["s",t.toString()]:[]}const Ug=new WeakMap;function u$(t,e,n){const r=Jp();Ug.has(r)||Ug.set(r,new Map);const i=Ug.get(r),s=c$(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):ui}const h$={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function q_(t,e,n,r){if(!L5(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((a,l)=>{const c=n[l];return a[c.path]=c.data(),a},{});function o(a,l,c,u){l=l||{};const[h,d]=u;Object.getOwnPropertyNames(a).forEach(f=>{const p=Object.getOwnPropertyDescriptor(a,f);p&&!p.enumerable&&Object.defineProperty(h,f,p)});for(const f in a){const p=a[f];if(p==null||p instanceof Date||p instanceof Jt||p instanceof Nm)h[f]=p;else if(A1(p)){const m=c+f;h[f]=m in n?l[f]:p.path,d[m]=p.converter?p:p.withConverter(r.converter)}else if(Array.isArray(p)){h[f]=Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];g&&g.path in s&&(h[f][m]=s[g.path])}o(p,l[f]||h[f],c+f+".",[h[f],d])}else Aa(p)?(h[f]={},o(p,l[f],c+f+".",[h[f],d])):h[f]=p}}return o(t,e,"",i),i}const X0={reset:!1,wait:!0,maxRefDepth:2,converter:h$,snapshotOptions:{serverTimestamps:"estimate"}};function tp(t){for(const e in t)t[e].unsub()}function G_(t,e,n,r,i,s,o,a,l){const[c,u]=q_(r.data(t.snapshotOptions),I1(e,n),i,t);s.set(e,n,c),K_(t,e,n,i,u,s,o,a,l)}function d$({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},a){const l=Object.create(null);let c=ui;return a.once?Zr(t).then(u=>{u.exists()?G_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())}).catch(s):c=J0(t,u=>{u.exists()?G_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())},s),()=>{c(),tp(l)}}function K_(t,e,n,r,i,s,o,a,l){const c=Object.keys(i);if(Object.keys(r).filter(m=>c.indexOf(m)<0).forEach(m=>{r[m].unsub(),delete r[m]}),!c.length||++o>t.maxRefDepth)return a(n);let h=0;const d=c.length,f=Object.create(null);function p(m){m in f&&++h>=d&&a(n)}c.forEach(m=>{const g=r[m],y=i[m],_=`${n}.${m}`;if(f[_]=!0,g)if(g.path!==y.path)g.unsub();else return;r[m]={data:()=>I1(e,_),unsub:d$({ref:y,target:e,path:_,depth:o,ops:s,resolve:p.bind(null,_),reject:l},t),path:y.path}})}function f$(t,e,n,r,i,s){const o=Object.assign({},X0,s),{snapshotListenOptions:a,snapshotOptions:l,wait:c,once:u}=o,h="value";let d=ie(c?[]:t.value);c||n.set(t,h,[]);const f=r;let p,m=ui;const g=[],y={added:({newIndex:v,doc:I})=>{g.splice(v,0,Object.create(null));const S=g[v],[C,F]=q_(I.data(l),void 0,S,o);n.add($i(d),v,C),K_(o,d,`${h}.${v}`,S,F,n,0,r.bind(null,I),i)},modified:({oldIndex:v,newIndex:I,doc:S})=>{const C=$i(d),F=g[v],N=C[v],[A,V]=q_(S.data(l),N,F,o);g.splice(I,0,F),n.remove(C,v),n.add(C,I,A),K_(o,d,`${h}.${I}`,F,V,n,0,r,i)},removed:({oldIndex:v})=>{const I=$i(d);n.remove(I,v),tp(g.splice(v,1)[0])}};function _(v){const I=v.docChanges(a);if(!p&&I.length){p=!0;let S=0;const C=I.length,F=Object.create(null);for(let N=0;N<C;N++)F[I[N].doc.id]=!0;r=N=>{N&&N.id in F&&++S>=C&&(c&&(n.set(t,h,$i(d)),d=t),f($i(d)),r=ui)}}I.forEach(S=>{y[S.type](S)}),I.length||(c&&(n.set(t,h,$i(d)),d=t),r($i(d)))}return u?W_(e).then(_).catch(i):m=J0(e,_,i),v=>{if(m(),v){const I=typeof v=="function"?v():[];n.set(t,h,I)}g.forEach(tp)}}function p$(t,e,n,r,i,s){const o=Object.assign({},X0,s),a="value",l=Object.create(null);r=H5(r,()=>I1(t,a));let c=ui;function u(h){h.exists()?G_(o,t,a,h,l,n,0,r,i):(n.set(t,a,null),r(null))}return o.once?Zr(e).then(u).catch(i):c=J0(e,u,i),h=>{if(c(),h){const d=typeof h=="function"?h():null;n.set(t,a,d)}tp(l)}}const Gw=Symbol();function YO(t,e){let n=ui;const r=Object.assign({},X0,e),i=$i(t),s=r.target||ie();j5()&&(r.once=!0);const o=l$(i,r.ssrKey,Gw,Jp()),a=o!==Gw;a&&(s.value=o);let l=!a;const c=ie(!1),u=ie(),h=NA(),d=Mp();let f=ui;function p(){let y=$i(t);const _=new Promise((v,I)=>{if(n(r.reset),!y)return n=ui,v(null);c.value=l,l=!0,y.converter||(y=y.withConverter(r.converter)),n=(A1(y)?p$:f$)(s,y,m$,v,I,r)}).catch(v=>(h.value===_&&(u.value=v),Promise.reject(v))).finally(()=>{h.value===_&&(c.value=!1)});h.value=_}let m=ui;(Pt(t)||typeof t=="function")&&(m=_i(t,p)),p(),i&&(f=u$(h.value,i,r.ssrKey)),Ia()&&YA(()=>h.value),d&&jv(g);function g(y=r.reset){m(),f(),n(y)}return Object.defineProperties(s,{error:{get:()=>u},data:{get:()=>s},pending:{get:()=>c},promise:{get:()=>h},stop:{get:()=>g}})}const m$={set:(t,e,n)=>x5(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function wi(t,e){return YO(t,{target:ie([]),...e})}function Ma(t,e){return YO(t,e)}function g$(t){return y$({initialUser:t,dependencies:{popupRedirectResolver:t5,persistence:[d6,e6,ek]}})}const JO=Symbol("VueFireAuth");function y$({dependencies:t,initialUser:e}){return(n,r)=>{const[i,s]=_$(n,r,e,t);G5(i,s)}}function _$(t,e,n,r,i=zL(t,r)){const s=W5(t,e).run(()=>ie(n));return hk.set(t,s),e.provide(JO,i),[s,i]}function v$(t){return P5?jn(JO):null}function b$(t,{firebaseApp:e,modules:n=[]}){t.provide(uk,e);for(const r of n)r(e,t)}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ja=typeof document<"u";function E$(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const dt=Object.assign;function Bg(t,e){const n={};for(const r in e){const i=e[r];n[r]=ei(i)?i.map(t):t(i)}return n}const cu=()=>{},ei=Array.isArray,QO=/#/g,T$=/&/g,w$=/\//g,S$=/=/g,I$=/\?/g,XO=/\+/g,A$=/%5B/g,C$=/%5D/g,ZO=/%5E/g,k$=/%60/g,eN=/%7B/g,R$=/%7C/g,tN=/%7D/g,O$=/%20/g;function Z0(t){return encodeURI(""+t).replace(R$,"|").replace(A$,"[").replace(C$,"]")}function N$(t){return Z0(t).replace(eN,"{").replace(tN,"}").replace(ZO,"^")}function Y_(t){return Z0(t).replace(XO,"%2B").replace(O$,"+").replace(QO,"%23").replace(T$,"%26").replace(k$,"`").replace(eN,"{").replace(tN,"}").replace(ZO,"^")}function M$(t){return Y_(t).replace(S$,"%3D")}function P$(t){return Z0(t).replace(QO,"%23").replace(I$,"%3F")}function x$(t){return t==null?"":P$(t).replace(w$,"%2F")}function Yu(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const D$=/\/$/,L$=t=>t.replace(D$,"");function $g(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=B$(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Yu(o)}}function V$(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Kw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function F$(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Fl(e.matched[r],n.matched[i])&&nN(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Fl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function nN(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!U$(t[n],e[n]))return!1;return!0}function U$(t,e){return ei(t)?Yw(t,e):ei(e)?Yw(e,t):t===e}function Yw(t,e){return ei(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function B$(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}var Ju;(function(t){t.pop="pop",t.push="push"})(Ju||(Ju={}));var uu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(uu||(uu={}));function $$(t){if(!t)if(ja){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),L$(t)}const H$=/^[^#]+#/;function z$(t,e){return t.replace(H$,"#")+e}function j$(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const xm=()=>({left:window.scrollX,top:window.scrollY});function W$(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=j$(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Jw(t,e){return(history.state?history.state.position-e:-1)+t}const J_=new Map;function q$(t,e){J_.set(t,e)}function G$(t){const e=J_.get(t);return J_.delete(t),e}let K$=()=>location.protocol+"//"+location.host;function rN(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Kw(l,"")}return Kw(n,t)+r+i}function Y$(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=rN(t,location),p=n.value,m=e.value;let g=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}g=m?d.position-m.position:0}else r(f);i.forEach(y=>{y(n.value,p,{delta:g,type:Ju.pop,direction:g?g>0?uu.forward:uu.back:uu.unknown})})};function l(){o=n.value}function c(d){i.push(d);const f=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(dt({},d.state,{scroll:xm()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Qw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?xm():null}}function J$(t){const{history:e,location:n}=window,r={value:rN(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:K$()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=dt({},e.state,Qw(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=dt({},i.value,e.state,{forward:l,scroll:xm()});s(u.current,u,!0);const h=dt({},Qw(r.value,l,null),{position:u.position+1},c);s(l,h,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function Q$(t){t=$$(t);const e=J$(t),n=Y$(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=dt({location:"",base:t,go:r,createHref:z$.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function X$(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),Q$(t)}function Z$(t){return typeof t=="string"||t&&typeof t=="object"}function iN(t){return typeof t=="string"||typeof t=="symbol"}const Es={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},sN=Symbol("");var Xw;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Xw||(Xw={}));function Ul(t,e){return dt(new Error,{type:t,[sN]:!0},e)}function Ui(t,e){return t instanceof Error&&sN in t&&(e==null||!!(t.type&e))}const Zw="[^/]+?",eH={sensitive:!1,strict:!1,start:!0,end:!0},tH=/[.+*?^${}()[\]/\\]/g;function nH(t,e){const n=dt({},eH,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(tH,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:g,regexp:y}=d;s.push({name:p,repeatable:m,optional:g});const _=y||Zw;if(_!==Zw){f+=10;try{new RegExp(`(${_})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+I.message)}}let v=m?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;h||(v=g&&c.length<2?`(?:/${v})`:"/"+v),g&&(v+="?"),i+=v,f+=20,g&&(f+=-8),m&&(f+=-20),_===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=s[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:g}=f,y=p in c?c[p]:"";if(ei(y)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=ei(y)?y.join("/"):y;if(!_)if(g)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=_}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function rH(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function iH(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=rH(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(eS(r))return 1;if(eS(i))return-1}return i.length-r.length}function eS(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const sH={type:0,value:""},oH=/[a-zA-Z0-9_]/;function aH(t){if(!t)return[[]];if(t==="/")return[[sH]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:oH.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}function lH(t,e,n){const r=nH(aH(t.path),n),i=dt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function cH(t,e){const n=[],r=new Map;e=rS({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,h,d){const f=!d,p=uH(u);p.aliasOf=d&&d.record;const m=rS(e,u),g=[p];if("alias"in u){const v=typeof u.alias=="string"?[u.alias]:u.alias;for(const I of v)g.push(dt({},p,{components:d?d.record.components:p.components,path:I,aliasOf:d?d.record:p}))}let y,_;for(const v of g){const{path:I}=v;if(h&&I[0]!=="/"){const S=h.record.path,C=S[S.length-1]==="/"?"":"/";v.path=h.record.path+(I&&C+I)}if(y=lH(v,h,m),d?d.alias.push(y):(_=_||y,_!==y&&_.alias.push(y),f&&u.name&&!nS(y)&&o(u.name)),p.children){const S=p.children;for(let C=0;C<S.length;C++)s(S[C],y,d&&d.children[C])}d=d||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return _?()=>{o(_)}:cu}function o(u){if(iN(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&iH(u,n[h])>=0&&(u.record.path!==n[h].record.path||!oN(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!nS(u)&&r.set(u.record.name,u)}function c(u,h){let d,f={},p,m;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Ul(1,{location:u});m=d.record.name,f=dt(tS(h.params,d.keys.filter(_=>!_.optional).concat(d.parent?d.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),u.params&&tS(u.params,d.keys.map(_=>_.name))),p=d.stringify(f)}else if(u.path!=null)p=u.path,d=n.find(_=>_.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=h.name?r.get(h.name):n.find(_=>_.re.test(h.path)),!d)throw Ul(1,{location:u,currentLocation:h});m=d.record.name,f=dt({},h.params,u.params),p=d.stringify(f)}const g=[];let y=d;for(;y;)g.unshift(y.record),y=y.parent;return{name:m,path:p,params:f,matched:g,meta:dH(g)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function tS(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function uH(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:hH(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function hH(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function nS(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function dH(t){return t.reduce((e,n)=>dt(e,n.meta),{})}function rS(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function oN(t,e){return e.children.some(n=>n===t||oN(t,n))}function fH(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(XO," "),o=s.indexOf("="),a=Yu(o<0?s:s.slice(0,o)),l=o<0?null:Yu(s.slice(o+1));if(a in e){let c=e[a];ei(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function iS(t){let e="";for(let n in t){const r=t[n];if(n=M$(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(ei(r)?r.map(s=>s&&Y_(s)):[r&&Y_(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function pH(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=ei(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const mH=Symbol(""),sS=Symbol(""),Dm=Symbol(""),eb=Symbol(""),Q_=Symbol("");function Cc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Os(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Ul(4,{from:n,to:e})):d instanceof Error?l(d):Z$(d)?l(Ul(2,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=s(()=>t.call(r&&r.instances[i],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function Hg(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(gH(l)){const u=(l.__vccOpts||l)[e];u&&s.push(Os(u,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=E$(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&Os(f,n,r,o,a,i)()}))}}return s}function gH(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function oS(t){const e=jn(Dm),n=jn(eb),r=ot(()=>e.resolve(j(t.to))),i=ot(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Fl.bind(null,u));if(d>-1)return d;const f=aS(l[c-2]);return c>1&&aS(u)===f&&h[h.length-1].path!==f?h.findIndex(Fl.bind(null,l[c-2])):d}),s=ot(()=>i.value>-1&&bH(n.params,r.value.params)),o=ot(()=>i.value>-1&&i.value===n.matched.length-1&&nN(n.params,r.value.params));function a(l={}){return vH(l)?e[j(t.replace)?"replace":"push"](j(t.to)).catch(cu):Promise.resolve()}return{route:r,href:ot(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const yH=Ut({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:oS,setup(t,{slots:e}){const n=Ql(oS(t)),{options:r}=jn(Dm),i=ot(()=>({[lS(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[lS(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Jo("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),_H=yH;function vH(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function bH(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!ei(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function aS(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const lS=(t,e,n)=>t??e??n,EH=Ut({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=jn(Q_),i=ot(()=>t.route||r.value),s=jn(sS,0),o=ot(()=>{let c=j(s);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=ot(()=>i.value.matched[o.value]);$d(sS,ot(()=>o.value+1)),$d(mH,a),$d(Q_,i);const l=ie();return _i(()=>[l.value,a.value,t.name],([c,u,h],[d,f,p])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Fl(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return cS(n.default,{Component:d,route:c});const f=h.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,g=Jo(d,dt({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return cS(n.default,{Component:g,route:c})||g}}});function cS(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const TH=EH;function wH(t){const e=cH(t.routes,t),n=t.parseQuery||fH,r=t.stringifyQuery||iS,i=t.history,s=Cc(),o=Cc(),a=Cc(),l=NA(Es);let c=Es;ja&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Bg.bind(null,$=>""+$),h=Bg.bind(null,x$),d=Bg.bind(null,Yu);function f($,ce){let te,ae;return iN($)?(te=e.getRecordMatcher($),ae=ce):ae=$,e.addRoute(ae,te)}function p($){const ce=e.getRecordMatcher($);ce&&e.removeRoute(ce)}function m(){return e.getRoutes().map($=>$.record)}function g($){return!!e.getRecordMatcher($)}function y($,ce){if(ce=dt({},ce||l.value),typeof $=="string"){const E=$g(n,$,ce.path),R=e.resolve({path:E.path},ce),B=i.createHref(E.fullPath);return dt(E,R,{params:d(R.params),hash:Yu(E.hash),redirectedFrom:void 0,href:B})}let te;if($.path!=null)te=dt({},$,{path:$g(n,$.path,ce.path).path});else{const E=dt({},$.params);for(const R in E)E[R]==null&&delete E[R];te=dt({},$,{params:h(E)}),ce.params=h(ce.params)}const ae=e.resolve(te,ce),Me=$.hash||"";ae.params=u(d(ae.params));const qe=V$(r,dt({},$,{hash:N$(Me),path:ae.path})),w=i.createHref(qe);return dt({fullPath:qe,hash:Me,query:r===iS?pH($.query):$.query||{}},ae,{redirectedFrom:void 0,href:w})}function _($){return typeof $=="string"?$g(n,$,l.value.path):dt({},$)}function v($,ce){if(c!==$)return Ul(8,{from:ce,to:$})}function I($){return F($)}function S($){return I(dt(_($),{replace:!0}))}function C($){const ce=$.matched[$.matched.length-1];if(ce&&ce.redirect){const{redirect:te}=ce;let ae=typeof te=="function"?te($):te;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=_(ae):{path:ae},ae.params={}),dt({query:$.query,hash:$.hash,params:ae.path!=null?{}:$.params},ae)}}function F($,ce){const te=c=y($),ae=l.value,Me=$.state,qe=$.force,w=$.replace===!0,E=C(te);if(E)return F(dt(_(E),{state:typeof E=="object"?dt({},Me,E.state):Me,force:qe,replace:w}),ce||te);const R=te;R.redirectedFrom=ce;let B;return!qe&&F$(r,ae,te)&&(B=Ul(16,{to:R,from:ae}),Ne(ae,ae,!0,!1)),(B?Promise.resolve(B):V(R,ae)).catch(U=>Ui(U)?Ui(U,2)?U:_e(U):x(U,R,ae)).then(U=>{if(U){if(Ui(U,2))return F(dt({replace:w},_(U.to),{state:typeof U.to=="object"?dt({},Me,U.to.state):Me,force:qe}),ce||R)}else U=H(R,ae,!0,w,Me);return z(R,ae,U),U})}function N($,ce){const te=v($,ce);return te?Promise.reject(te):Promise.resolve()}function A($){const ce=_t.values().next().value;return ce&&typeof ce.runWithContext=="function"?ce.runWithContext($):$()}function V($,ce){let te;const[ae,Me,qe]=SH($,ce);te=Hg(ae.reverse(),"beforeRouteLeave",$,ce);for(const E of ae)E.leaveGuards.forEach(R=>{te.push(Os(R,$,ce))});const w=N.bind(null,$,ce);return te.push(w),vt(te).then(()=>{te=[];for(const E of s.list())te.push(Os(E,$,ce));return te.push(w),vt(te)}).then(()=>{te=Hg(Me,"beforeRouteUpdate",$,ce);for(const E of Me)E.updateGuards.forEach(R=>{te.push(Os(R,$,ce))});return te.push(w),vt(te)}).then(()=>{te=[];for(const E of qe)if(E.beforeEnter)if(ei(E.beforeEnter))for(const R of E.beforeEnter)te.push(Os(R,$,ce));else te.push(Os(E.beforeEnter,$,ce));return te.push(w),vt(te)}).then(()=>($.matched.forEach(E=>E.enterCallbacks={}),te=Hg(qe,"beforeRouteEnter",$,ce,A),te.push(w),vt(te))).then(()=>{te=[];for(const E of o.list())te.push(Os(E,$,ce));return te.push(w),vt(te)}).catch(E=>Ui(E,8)?E:Promise.reject(E))}function z($,ce,te){a.list().forEach(ae=>A(()=>ae($,ce,te)))}function H($,ce,te,ae,Me){const qe=v($,ce);if(qe)return qe;const w=ce===Es,E=ja?history.state:{};te&&(ae||w?i.replace($.fullPath,dt({scroll:w&&E&&E.scroll},Me)):i.push($.fullPath,Me)),l.value=$,Ne($,ce,te,w),_e()}let Z;function M(){Z||(Z=i.listen(($,ce,te)=>{if(!Bt.listening)return;const ae=y($),Me=C(ae);if(Me){F(dt(Me,{replace:!0}),ae).catch(cu);return}c=ae;const qe=l.value;ja&&q$(Jw(qe.fullPath,te.delta),xm()),V(ae,qe).catch(w=>Ui(w,12)?w:Ui(w,2)?(F(w.to,ae).then(E=>{Ui(E,20)&&!te.delta&&te.type===Ju.pop&&i.go(-1,!1)}).catch(cu),Promise.reject()):(te.delta&&i.go(-te.delta,!1),x(w,ae,qe))).then(w=>{w=w||H(ae,qe,!1),w&&(te.delta&&!Ui(w,8)?i.go(-te.delta,!1):te.type===Ju.pop&&Ui(w,20)&&i.go(-1,!1)),z(ae,qe,w)}).catch(cu)}))}let D=Cc(),k=Cc(),P;function x($,ce,te){_e($);const ae=k.list();return ae.length?ae.forEach(Me=>Me($,ce,te)):console.error($),Promise.reject($)}function re(){return P&&l.value!==Es?Promise.resolve():new Promise(($,ce)=>{D.add([$,ce])})}function _e($){return P||(P=!$,M(),D.list().forEach(([ce,te])=>$?te($):ce()),D.reset()),$}function Ne($,ce,te,ae){const{scrollBehavior:Me}=t;if(!ja||!Me)return Promise.resolve();const qe=!te&&G$(Jw($.fullPath,0))||(ae||!te)&&history.state&&history.state.scroll||null;return Sa().then(()=>Me($,ce,qe)).then(w=>w&&W$(w)).catch(w=>x(w,$,ce))}const $e=$=>i.go($);let ht;const _t=new Set,Bt={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:g,getRoutes:m,resolve:y,options:t,push:I,replace:S,go:$e,back:()=>$e(-1),forward:()=>$e(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:k.add,isReady:re,install($){const ce=this;$.component("RouterLink",_H),$.component("RouterView",TH),$.config.globalProperties.$router=ce,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>j(l)}),ja&&!ht&&l.value===Es&&(ht=!0,I(i.location).catch(Me=>{}));const te={};for(const Me in Es)Object.defineProperty(te,Me,{get:()=>l.value[Me],enumerable:!0});$.provide(Dm,ce),$.provide(eb,kA(te)),$.provide(Q_,l);const ae=$.unmount;_t.add($),$.unmount=function(){_t.delete($),_t.size<1&&(c=Es,Z&&Z(),Z=null,l.value=Es,ht=!1,P=!1),ae()}}};function vt($){return $.reduce((ce,te)=>ce.then(()=>A(te)),Promise.resolve())}return Bt}function SH(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Fl(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Fl(c,l))||i.push(l))}return[n,r,i]}function aN(){return jn(Dm)}function go(){return jn(eb)}const uS=M4("WebsitePreferences",()=>{const t=ie("light_mode"),e=localStorage.getItem("theme");e&&(t.value=e);function n(){t.value=t.value=="light_mode"?"dark_mode":"light_mode",localStorage.setItem("theme",t.value)}return{colorScheme:t,switchColorSceme:n}}),IH=["current","innerHTML"],AH=["src"],CH=Ut({__name:"menuBar.vapor",async setup(t){let e,n;const r=go(),i=([e,n]=qn(()=>ni()),e=await e,n(),e),s=P4(uS()),o=ie(s.colorScheme),a=()=>uS().switchColorSceme();return(l,c)=>{const u=sr("router-link");return O(),L("header",null,[b("nav",null,[Ee(u,{to:{name:"Home"},class:"btn",icon:"",current:j(r).name=="Home"},{default:ct(()=>[X(" home ")]),_:1},8,["current"]),Ee(u,{to:{name:"Boards"},class:"btn",icon:"",current:j(r).name=="Boards"},{default:ct(()=>[X(" apps ")]),_:1},8,["current"]),b("a",{icon:"",onClick:Ge(a,["prevent"]),current:j(r).name=="loginScreen",class:Mr(["btn",o.value]),innerHTML:o.value},null,10,IH),Ee(u,{to:{name:"loginScreen"},current:j(r).name=="loginScreen",class:"btn"},{default:ct(()=>[X(" account ")]),_:1},8,["current"]),Ee(u,{to:{name:"loginScreen"},current:j(r).name=="loginScreen",class:"imgbtn"},{default:ct(()=>{var h,d;return[(h=j(i))!=null&&h.photoURL?(O(),L("img",{key:0,class:"bobble",src:(d=j(i))==null?void 0:d.photoURL},null,8,AH)):ue("",!0)]}),_:1},8,["current"])])])}}}),Fi=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},kH=Fi(CH,[["__scopeId","data-v-cb86afeb"]]),RH=Ut({__name:"App",setup(t){const e=go();return(n,r)=>{const i=sr("RouterView");return O(),L(se,null,[(O(),We(rE,null,{default:ct(()=>[Ee(kH)]),_:1})),(O(),We(rE,null,{default:ct(()=>[(O(),We(i,{key:j(e).fullPath}))]),_:1}))],64)}}}),lN=RC({apiKey:"AIzaSyAnOiG77O1ukT9C2x8u1VbMLw7For9C_3w",authDomain:"auth.odinn.nl",databaseURL:"https://bingo-50cec-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bingo-50cec",storageBucket:"bingo-50cec.appspot.com",messagingSenderId:"866066986693",appId:"1:866066986693:web:de513df8434d232b0562ac",measurementId:"G-8F3EECYHQ0"}),ke=I7(lN);function cN(t){return Mp()?(jv(t),!0):!1}function Qu(t){return typeof t=="function"?t():j(t)}const uN=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const OH=t=>t!=null,NH=()=>{};function hN(t){return t||Ia()}function MH(...t){if(t.length!==1)return DA(...t);const e=t[0];return typeof e=="function"?Jv(xA(()=>({get:e,set:NH}))):ie(e)}function PH(t,e){hN(e)&&ph(t,e)}function xH(t,e=!0,n){hN()?ec(t,n):e?t():Sa(t)}function dN(t){var e;const n=Qu(t);return(e=n==null?void 0:n.$el)!=null?e:n}const DH=uN?window:void 0,fN=uN?window.document:void 0;function LH(){const t=ie(!1),e=Ia();return e&&ec(()=>{t.value=!0},e),t}function VH(t){const e=LH();return ot(()=>(e.value,!!t()))}function FH(t,e,n={}){const{window:r=DH,...i}=n;let s;const o=VH(()=>r&&"MutationObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},l=ot(()=>{const d=Qu(t),f=(Array.isArray(d)?d:[d]).map(dN).filter(OH);return new Set(f)}),c=_i(()=>l.value,d=>{a(),o.value&&r&&d.size&&(s=new MutationObserver(e),d.forEach(f=>s.observe(f,i)))},{immediate:!0,flush:"post"}),u=()=>s==null?void 0:s.takeRecords(),h=()=>{a(),c()};return cN(h),{isSupported:o,stop:h,takeRecords:u}}function fc(t=null,e={}){var n,r,i;const{document:s=fN,restoreOnUnmount:o=h=>h}=e,a=(n=s==null?void 0:s.title)!=null?n:"",l=MH((r=t??(s==null?void 0:s.title))!=null?r:null),c=t&&typeof t=="function";function u(h){if(!("titleTemplate"in e))return h;const d=e.titleTemplate||"%s";return typeof d=="function"?d(h):Qu(d).replace(/%s/g,h)}return _i(l,(h,d)=>{h!==d&&s&&(s.title=u(typeof h=="string"?h:""))},{immediate:!0}),e.observe&&!e.titleTemplate&&s&&!c&&FH((i=s.head)==null?void 0:i.querySelector("title"),()=>{s&&s.title!==l.value&&(l.value=u(s.title))},{childList:!0}),PH(()=>{if(o){const h=o(a,l.value||"");h!=null&&s&&(s.title=h)}}),l}const UH=b("h1",{class:"font-size-H"},[X("Bingo "),b("em",null,"Bongo")],-1),BH=b("h2",{class:"font-size-L"},"Simplifying OSRS Clan Bingos",-1),$H={class:"col-2"},HH={class:"ghost-board"},zH=b("h2",null,"No more spreadsheets",-1),jH=b("p",null," You know how annoying it is to keep track of scores during clan bingos, right? Yeah, it's a pain. ",-1),WH=b("p",null," No more dealing with spreadsheets or scribbling down scores - Bingo Bongo has got my back on that front. It's like having a reliable sidekick for our clan events, making everything run smoothly and keeping the stress levels down. ",-1),qH=b("div",null,null,-1),GH=Ut({__name:"home.vapor",setup(t){const e=fc();e.value="Bingo Bongo - an osrs bingo app";const n=ie(40963),r=new Set,i=s=>{for(;r.size<3;)r.add(Math.floor(Math.random()*9)+1);return r.has(s)?"var(--secondary)":"var(--primary)"};return(s,o)=>{const a=sr("router-link");return O(),L(se,null,[UH,BH,b("div",$H,[b("div",HH,[(O(),L(se,null,st(9,l=>b("div",{class:"tile",key:l+"tile",style:rr({"--rotate":Math.random()*6-3+"deg",backgroundColor:i(l)})},null,4)),64))]),b("div",null,[zH,jH,WH,$t(b("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>n.value=l)},null,512),[[hr,n.value]]),Ee(a,{class:"btn",big:"",submit:"",to:{name:"viewBoard",params:{boardUUID:n.value}}},{default:ct(()=>[X(" Go to the event! ")]),_:1},8,["to"])])]),qH],64)}}});var pN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(pN,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var D=["th","st","nd","rd"],k=M%100;return"["+M+(D[(k-20)%10]||D[k]||D[0])+"]"}},v=function(M,D,k){var P=String(M);return!P||P.length>=D?M:""+Array(D+1-P.length).join(k)+M},I={s:v,z:function(M){var D=-M.utcOffset(),k=Math.abs(D),P=Math.floor(k/60),x=k%60;return(D<=0?"+":"-")+v(P,2,"0")+":"+v(x,2,"0")},m:function M(D,k){if(D.date()<k.date())return-M(k,D);var P=12*(k.year()-D.year())+(k.month()-D.month()),x=D.clone().add(P,h),re=k-x<0,_e=D.clone().add(P+(re?-1:1),h);return+(-(P+(k-x)/(re?x-_e:_e-x))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:h,y:f,w:u,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},S="en",C={};C[S]=_;var F="$isDayjsObject",N=function(M){return M instanceof H||!(!M||!M[F])},A=function M(D,k,P){var x;if(!D)return S;if(typeof D=="string"){var re=D.toLowerCase();C[re]&&(x=re),k&&(C[re]=k,x=re);var _e=D.split("-");if(!x&&_e.length>1)return M(_e[0])}else{var Ne=D.name;C[Ne]=D,x=Ne}return!P&&x&&(S=x),x||!P&&S},V=function(M,D){if(N(M))return M.clone();var k=typeof D=="object"?D:{};return k.date=M,k.args=arguments,new H(k)},z=I;z.l=A,z.i=N,z.w=function(M,D){return V(M,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var H=function(){function M(k){this.$L=A(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[F]=!0}var D=M.prototype;return D.parse=function(k){this.$d=function(P){var x=P.date,re=P.utc;if(x===null)return new Date(NaN);if(z.u(x))return new Date;if(x instanceof Date)return new Date(x);if(typeof x=="string"&&!/Z$/i.test(x)){var _e=x.match(g);if(_e){var Ne=_e[2]-1||0,$e=(_e[7]||"0").substring(0,3);return re?new Date(Date.UTC(_e[1],Ne,_e[3]||1,_e[4]||0,_e[5]||0,_e[6]||0,$e)):new Date(_e[1],Ne,_e[3]||1,_e[4]||0,_e[5]||0,_e[6]||0,$e)}}return new Date(x)}(k),this.init()},D.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},D.$utils=function(){return z},D.isValid=function(){return this.$d.toString()!==m},D.isSame=function(k,P){var x=V(k);return this.startOf(P)<=x&&x<=this.endOf(P)},D.isAfter=function(k,P){return V(k)<this.startOf(P)},D.isBefore=function(k,P){return this.endOf(P)<V(k)},D.$g=function(k,P,x){return z.u(k)?this[P]:this.set(x,k)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(k,P){var x=this,re=!!z.u(P)||P,_e=z.p(k),Ne=function(te,ae){var Me=z.w(x.$u?Date.UTC(x.$y,ae,te):new Date(x.$y,ae,te),x);return re?Me:Me.endOf(c)},$e=function(te,ae){return z.w(x.toDate()[te].apply(x.toDate("s"),(re?[0,0,0,0]:[23,59,59,999]).slice(ae)),x)},ht=this.$W,_t=this.$M,Bt=this.$D,vt="set"+(this.$u?"UTC":"");switch(_e){case f:return re?Ne(1,0):Ne(31,11);case h:return re?Ne(1,_t):Ne(0,_t+1);case u:var $=this.$locale().weekStart||0,ce=(ht<$?ht+7:ht)-$;return Ne(re?Bt-ce:Bt+(6-ce),_t);case c:case p:return $e(vt+"Hours",0);case l:return $e(vt+"Minutes",1);case a:return $e(vt+"Seconds",2);case o:return $e(vt+"Milliseconds",3);default:return this.clone()}},D.endOf=function(k){return this.startOf(k,!1)},D.$set=function(k,P){var x,re=z.p(k),_e="set"+(this.$u?"UTC":""),Ne=(x={},x[c]=_e+"Date",x[p]=_e+"Date",x[h]=_e+"Month",x[f]=_e+"FullYear",x[l]=_e+"Hours",x[a]=_e+"Minutes",x[o]=_e+"Seconds",x[s]=_e+"Milliseconds",x)[re],$e=re===c?this.$D+(P-this.$W):P;if(re===h||re===f){var ht=this.clone().set(p,1);ht.$d[Ne]($e),ht.init(),this.$d=ht.set(p,Math.min(this.$D,ht.daysInMonth())).$d}else Ne&&this.$d[Ne]($e);return this.init(),this},D.set=function(k,P){return this.clone().$set(k,P)},D.get=function(k){return this[z.p(k)]()},D.add=function(k,P){var x,re=this;k=Number(k);var _e=z.p(P),Ne=function(_t){var Bt=V(re);return z.w(Bt.date(Bt.date()+Math.round(_t*k)),re)};if(_e===h)return this.set(h,this.$M+k);if(_e===f)return this.set(f,this.$y+k);if(_e===c)return Ne(1);if(_e===u)return Ne(7);var $e=(x={},x[a]=r,x[l]=i,x[o]=n,x)[_e]||1,ht=this.$d.getTime()+k*$e;return z.w(ht,this)},D.subtract=function(k,P){return this.add(-1*k,P)},D.format=function(k){var P=this,x=this.$locale();if(!this.isValid())return x.invalidDate||m;var re=k||"YYYY-MM-DDTHH:mm:ssZ",_e=z.z(this),Ne=this.$H,$e=this.$m,ht=this.$M,_t=x.weekdays,Bt=x.months,vt=x.meridiem,$=function(ae,Me,qe,w){return ae&&(ae[Me]||ae(P,re))||qe[Me].slice(0,w)},ce=function(ae){return z.s(Ne%12||12,ae,"0")},te=vt||function(ae,Me,qe){var w=ae<12?"AM":"PM";return qe?w.toLowerCase():w};return re.replace(y,function(ae,Me){return Me||function(qe){switch(qe){case"YY":return String(P.$y).slice(-2);case"YYYY":return z.s(P.$y,4,"0");case"M":return ht+1;case"MM":return z.s(ht+1,2,"0");case"MMM":return $(x.monthsShort,ht,Bt,3);case"MMMM":return $(Bt,ht);case"D":return P.$D;case"DD":return z.s(P.$D,2,"0");case"d":return String(P.$W);case"dd":return $(x.weekdaysMin,P.$W,_t,2);case"ddd":return $(x.weekdaysShort,P.$W,_t,3);case"dddd":return _t[P.$W];case"H":return String(Ne);case"HH":return z.s(Ne,2,"0");case"h":return ce(1);case"hh":return ce(2);case"a":return te(Ne,$e,!0);case"A":return te(Ne,$e,!1);case"m":return String($e);case"mm":return z.s($e,2,"0");case"s":return String(P.$s);case"ss":return z.s(P.$s,2,"0");case"SSS":return z.s(P.$ms,3,"0");case"Z":return _e}return null}(ae)||_e.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(k,P,x){var re,_e=this,Ne=z.p(P),$e=V(k),ht=($e.utcOffset()-this.utcOffset())*r,_t=this-$e,Bt=function(){return z.m(_e,$e)};switch(Ne){case f:re=Bt()/12;break;case h:re=Bt();break;case d:re=Bt()/3;break;case u:re=(_t-ht)/6048e5;break;case c:re=(_t-ht)/864e5;break;case l:re=_t/i;break;case a:re=_t/r;break;case o:re=_t/n;break;default:re=_t}return x?re:z.a(re)},D.daysInMonth=function(){return this.endOf(h).$D},D.$locale=function(){return C[this.$L]},D.locale=function(k,P){if(!k)return this.$L;var x=this.clone(),re=A(k,P,!0);return re&&(x.$L=re),x},D.clone=function(){return z.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},M}(),Z=H.prototype;return V.prototype=Z,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",p]].forEach(function(M){Z[M[1]]=function(D){return this.$g(D,M[0],M[1])}}),V.extend=function(M,D){return M.$i||(M(D,H,V),M.$i=!0),V},V.locale=A,V.isDayjs=N,V.unix=function(M){return V(1e3*M)},V.en=C[S],V.Ls=C,V.p={},V})})(gN);var KH=gN.exports;const yN=mN(KH);var _N={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(pN,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(m){return(m=+m)+(m>68?1900:2e3)},c=function(m){return function(g){this[m]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),_=60*y[1]+(+y[2]||0);return _===0?0:y[0]==="+"?-_:_}(m)}],h=function(m){var g=a[m];return g&&(g.indexOf?g:g.s.concat(g.f))},d=function(m,g){var y,_=a.meridiem;if(_){for(var v=1;v<=24;v+=1)if(m.indexOf(_(v,0,g))>-1){y=v>12;break}}else y=m===(g?"pm":"PM");return y},f={A:[o,function(m){this.afternoon=d(m,!1)}],a:[o,function(m){this.afternoon=d(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[i,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[i,c("day")],Do:[o,function(m){var g=a.ordinal,y=m.match(/\d+/);if(this.day=y[0],g)for(var _=1;_<=31;_+=1)g(_).replace(/\[|\]/g,"")===m&&(this.day=_)}],M:[s,c("month")],MM:[i,c("month")],MMM:[o,function(m){var g=h("months"),y=(h("monthsShort")||g.map(function(_){return _.slice(0,3)})).indexOf(m)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(m){var g=h("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(m){this.year=l(m)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function p(m){var g,y;g=m,y=a&&a.formats;for(var _=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,V,z){var H=z&&z.toUpperCase();return V||y[z]||n[z]||y[H].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Z,M,D){return M||D.slice(1)})})).match(r),v=_.length,I=0;I<v;I+=1){var S=_[I],C=f[S],F=C&&C[0],N=C&&C[1];_[I]=N?{regex:F,parser:N}:S.replace(/^\[|\]$/g,"")}return function(A){for(var V={},z=0,H=0;z<v;z+=1){var Z=_[z];if(typeof Z=="string")H+=Z.length;else{var M=Z.regex,D=Z.parser,k=A.slice(H),P=M.exec(k)[0];D.call(V,P),A=A.replace(P,"")}}return function(x){var re=x.afternoon;if(re!==void 0){var _e=x.hours;re?_e<12&&(x.hours+=12):_e===12&&(x.hours=0),delete x.afternoon}}(V),V}}return function(m,g,y){y.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var _=g.prototype,v=_.parse;_.parse=function(I){var S=I.date,C=I.utc,F=I.args;this.$u=C;var N=F[1];if(typeof N=="string"){var A=F[2]===!0,V=F[3]===!0,z=A||V,H=F[2];V&&(H=F[2]),a=this.$locale(),!A&&H&&(a=y.Ls[H]),this.$d=function(k,P,x){try{if(["x","X"].indexOf(P)>-1)return new Date((P==="X"?1e3:1)*k);var re=p(P)(k),_e=re.year,Ne=re.month,$e=re.day,ht=re.hours,_t=re.minutes,Bt=re.seconds,vt=re.milliseconds,$=re.zone,ce=new Date,te=$e||(_e||Ne?1:ce.getDate()),ae=_e||ce.getFullYear(),Me=0;_e&&!Ne||(Me=Ne>0?Ne-1:ce.getMonth());var qe=ht||0,w=_t||0,E=Bt||0,R=vt||0;return $?new Date(Date.UTC(ae,Me,te,qe,w,E,R+60*$.offset*1e3)):x?new Date(Date.UTC(ae,Me,te,qe,w,E,R)):new Date(ae,Me,te,qe,w,E,R)}catch{return new Date("")}}(S,N,C),this.init(),H&&H!==!0&&(this.$L=this.locale(H).$L),z&&S!=this.format(N)&&(this.$d=new Date("")),a={}}else if(N instanceof Array)for(var Z=N.length,M=1;M<=Z;M+=1){F[1]=N[M-1];var D=y.apply(this,F);if(D.isValid()){this.$d=D.$d,this.$L=D.$L,this.init();break}M===Z&&(this.$d=new Date(""))}else v.call(this,I)}}})})(_N);var YH=_N.exports;const JH=mN(YH);var QH={},hS={defaultUserAgent:`WiseOldMan JS Client v${QH.npm_package_version}`,baseAPIUrl:"https://api.wiseoldman.net/v2"};function XH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Ts(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}yN.extend(JH);function X_(t,e){return Array.isArray(t)?t.map(n=>X_(n,e)):t!==null&&typeof t=="object"?Object.fromEntries(Object.keys(t).map(n=>[n,X_(t[n],e)])):e(t)}function ZH(t){return!t||typeof t!="string"?!1:t.endsWith("Z")&&yN(t.slice(0,-1),"YYYY-MM-DDTHH:mm:ss.SSS",!0).isValid()}function ez(t){return X_(t,e=>ZH(e)?new Date(e):e)}function dS(t,e,n){if(n){if(t===400)throw new tz(e,n.message,n.data);if(t===403)throw new nz(e,n.message);if(t===404)throw new rz(e,n.message);if(t===429)throw new iz(e,n.message);if(t===500)throw new sz(e,n.message)}}class tz extends Error{constructor(e,n,r){super(n),this.name="BadRequestError",this.resource=e,this.statusCode=400,this.data=r}}class nz extends Error{constructor(e,n){super(n),this.name="ForbiddenError",this.resource=e,this.statusCode=403}}class rz extends Error{constructor(e,n){super(n),this.name="NotFoundError",this.resource=e,this.statusCode=404}}class iz extends Error{constructor(e,n){super(n),this.name="RateLimitError",this.resource=e,this.statusCode=429}}class sz extends Error{constructor(e,n){super(n),this.name="InternalServerError",this.resource=e,this.statusCode=500}}class yo{constructor(e,n){this.baseUrl=n,this.headers=Object.assign({Accept:"application/json","Content-Type":"application/json"},e)}buildParams(e){var n=XH(e,[]);const r=new URLSearchParams;Object.keys(n).filter(s=>n[s]!==void 0).forEach(s=>r.set(s,n[s]));const i=r.toString();return i?`?${i}`:""}fetch({method:e,path:n,body:r,params:i}){return Ts(this,void 0,void 0,function*(){const s={method:e,body:void 0,headers:this.headers};let o="";return r&&(s.body=JSON.stringify(r)),i&&(o=this.buildParams(i)),yield fetch(this.baseUrl+n+o,s)})}request({method:e,path:n,body:r,params:i}){return Ts(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.json();if(s.ok)return ez(o);dS(s.status,n,o)})}requestText({method:e,path:n,body:r,params:i}){return Ts(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.text();if(s.ok)return o;dS(s.status,n,JSON.parse(o))})}postRequest(e,n){return Ts(this,void 0,void 0,function*(){return yield this.request({method:"POST",path:e,body:n||{}})})}putRequest(e,n){return Ts(this,void 0,void 0,function*(){return yield this.request({method:"PUT",path:e,body:n||{}})})}deleteRequest(e,n){return Ts(this,void 0,void 0,function*(){return yield this.request({method:"DELETE",path:e,body:n||{}})})}getRequest(e,n){return Ts(this,void 0,void 0,function*(){return yield this.request({method:"GET",path:e,params:n})})}getText(e,n){return Ts(this,void 0,void 0,function*(){return yield this.requestText({method:"GET",path:e,params:n})})}}class oz extends yo{getDeltaLeaderboard(e){return this.getRequest("/deltas/leaderboard",e)}}class az extends yo{searchGroups(e,n){return this.getRequest("/groups",Object.assign({name:e},n))}getGroupDetails(e){return this.getRequest(`/groups/${e}`)}createGroup(e){return this.postRequest("/groups",e)}editGroup(e,n,r){return this.putRequest(`/groups/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteGroup(e,n){return this.deleteRequest(`/groups/${e}`,{verificationCode:n})}addMembers(e,n,r){return this.postRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}removeMembers(e,n,r){return this.deleteRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}changeRole(e,n,r){return this.putRequest(`/groups/${e}/role`,Object.assign(Object.assign({},n),{verificationCode:r}))}updateAll(e,n){return this.postRequest(`/groups/${e}/update-all`,{verificationCode:n})}getGroupCompetitions(e,n){return this.getRequest(`/groups/${e}/competitions`,Object.assign({},n))}getGroupGains(e,n,r){return this.getRequest(`/groups/${e}/gained`,Object.assign(Object.assign({},r),n))}getGroupAchievements(e,n){return this.getRequest(`/groups/${e}/achievements`,Object.assign({},n))}getGroupRecords(e,n,r){return this.getRequest(`/groups/${e}/records`,Object.assign(Object.assign({},r),n))}getGroupHiscores(e,n,r){return this.getRequest(`/groups/${e}/hiscores`,Object.assign(Object.assign({},r),{metric:n}))}getGroupNameChanges(e,n){return this.getRequest(`/groups/${e}/name-changes`,Object.assign({},n))}getGroupStatistics(e){return this.getRequest(`/groups/${e}/statistics`)}getGroupActivity(e,n){return this.getRequest(`/groups/${e}/activity`,Object.assign({},n))}getMembersCSV(e){return this.getText(`/groups/${e}/csv`)}}class lz extends yo{searchPlayers(e,n){return this.getRequest("/players/search",Object.assign({username:e},n))}updatePlayer(e){return this.postRequest(`/players/${e}`)}assertPlayerType(e){return this.postRequest(`/players/${e}/assert-type`)}getPlayerDetails(e){return this.getRequest(`/players/${e}`)}getPlayerDetailsById(e){return this.getRequest(`/players/id/${e}`)}getPlayerAchievements(e){return this.getRequest(`/players/${e}/achievements`)}getPlayerAchievementProgress(e){return this.getRequest(`/players/${e}/achievements/progress`)}getPlayerCompetitions(e,n,r){return this.getRequest(`/players/${e}/competitions`,Object.assign(Object.assign({},n),r))}getPlayerCompetitionStandings(e,n){return this.getRequest(`/players/${e}/competitions/standings`,n)}getPlayerGroups(e,n){return this.getRequest(`/players/${e}/groups`,n)}getPlayerGains(e,n){return this.getRequest(`/players/${e}/gained`,n)}getPlayerGainsAsArray(e,n){return this.getRequest(`/players/${e}/gained`,Object.assign(Object.assign({},n),{formatting:"array"}))}getPlayerRecords(e,n){return this.getRequest(`/players/${e}/records`,n)}getPlayerSnapshots(e,n,r){return this.getRequest(`/players/${e}/snapshots`,Object.assign(Object.assign({},n),r))}getPlayerSnapshotTimeline(e,n,r){return this.getRequest(`/players/${e}/snapshots/timeline`,Object.assign(Object.assign({},r),{metric:n}))}getPlayerNames(e){return this.getRequest(`/players/${e}/names`)}getPlayerArchives(e){return this.getRequest(`/players/${e}/archives`)}}class cz extends yo{getRecordLeaderboard(e){return this.getRequest("/records/leaderboard",e)}}const bt={OVERALL:"overall",ATTACK:"attack",DEFENCE:"defence",STRENGTH:"strength",HITPOINTS:"hitpoints",RANGED:"ranged",PRAYER:"prayer",MAGIC:"magic",COOKING:"cooking",WOODCUTTING:"woodcutting",FLETCHING:"fletching",FISHING:"fishing",FIREMAKING:"firemaking",CRAFTING:"crafting",SMITHING:"smithing",MINING:"mining",HERBLORE:"herblore",AGILITY:"agility",THIEVING:"thieving",SLAYER:"slayer",FARMING:"farming",RUNECRAFTING:"runecrafting",HUNTER:"hunter",CONSTRUCTION:"construction"},gn={LEAGUE_POINTS:"league_points",BOUNTY_HUNTER_HUNTER:"bounty_hunter_hunter",BOUNTY_HUNTER_ROGUE:"bounty_hunter_rogue",CLUE_SCROLLS_ALL:"clue_scrolls_all",CLUE_SCROLLS_BEGINNER:"clue_scrolls_beginner",CLUE_SCROLLS_EASY:"clue_scrolls_easy",CLUE_SCROLLS_MEDIUM:"clue_scrolls_medium",CLUE_SCROLLS_HARD:"clue_scrolls_hard",CLUE_SCROLLS_ELITE:"clue_scrolls_elite",CLUE_SCROLLS_MASTER:"clue_scrolls_master",LAST_MAN_STANDING:"last_man_standing",PVP_ARENA:"pvp_arena",SOUL_WARS_ZEAL:"soul_wars_zeal",GUARDIANS_OF_THE_RIFT:"guardians_of_the_rift",COLOSSEUM_GLORY:"colosseum_glory"},ge={ABYSSAL_SIRE:"abyssal_sire",ALCHEMICAL_HYDRA:"alchemical_hydra",ARTIO:"artio",BARROWS_CHESTS:"barrows_chests",BRYOPHYTA:"bryophyta",CALLISTO:"callisto",CALVARION:"calvarion",CERBERUS:"cerberus",CHAMBERS_OF_XERIC:"chambers_of_xeric",CHAMBERS_OF_XERIC_CM:"chambers_of_xeric_challenge_mode",CHAOS_ELEMENTAL:"chaos_elemental",CHAOS_FANATIC:"chaos_fanatic",COMMANDER_ZILYANA:"commander_zilyana",CORPOREAL_BEAST:"corporeal_beast",CRAZY_ARCHAEOLOGIST:"crazy_archaeologist",DAGANNOTH_PRIME:"dagannoth_prime",DAGANNOTH_REX:"dagannoth_rex",DAGANNOTH_SUPREME:"dagannoth_supreme",DERANGED_ARCHAEOLOGIST:"deranged_archaeologist",DUKE_SUCELLUS:"duke_sucellus",GENERAL_GRAARDOR:"general_graardor",GIANT_MOLE:"giant_mole",GROTESQUE_GUARDIANS:"grotesque_guardians",HESPORI:"hespori",KALPHITE_QUEEN:"kalphite_queen",KING_BLACK_DRAGON:"king_black_dragon",KRAKEN:"kraken",KREEARRA:"kreearra",KRIL_TSUTSAROTH:"kril_tsutsaroth",LUNAR_CHESTS:"lunar_chests",MIMIC:"mimic",NEX:"nex",NIGHTMARE:"nightmare",PHOSANIS_NIGHTMARE:"phosanis_nightmare",OBOR:"obor",PHANTOM_MUSPAH:"phantom_muspah",SARACHNIS:"sarachnis",SCORPIA:"scorpia",SCURRIUS:"scurrius",SKOTIZO:"skotizo",SOL_HEREDIT:"sol_heredit",SPINDEL:"spindel",TEMPOROSS:"tempoross",THE_GAUNTLET:"the_gauntlet",THE_CORRUPTED_GAUNTLET:"the_corrupted_gauntlet",THE_LEVIATHAN:"the_leviathan",THE_WHISPERER:"the_whisperer",THEATRE_OF_BLOOD:"theatre_of_blood",THEATRE_OF_BLOOD_HARD_MODE:"theatre_of_blood_hard_mode",THERMONUCLEAR_SMOKE_DEVIL:"thermonuclear_smoke_devil",TOMBS_OF_AMASCUT:"tombs_of_amascut",TOMBS_OF_AMASCUT_EXPERT:"tombs_of_amascut_expert",TZKAL_ZUK:"tzkal_zuk",TZTOK_JAD:"tztok_jad",VARDORVIS:"vardorvis",VENENATIS:"venenatis",VETION:"vetion",VORKATH:"vorkath",WINTERTODT:"wintertodt",ZALCANO:"zalcano",ZULRAH:"zulrah"},np={EHP:"ehp",EHB:"ehb"},Z_=Object.assign(Object.assign(Object.assign(Object.assign({},bt),gn),ge),np),T={ACHIEVER:"achiever",ADAMANT:"adamant",ADEPT:"adept",ADMINISTRATOR:"administrator",ADMIRAL:"admiral",ADVENTURER:"adventurer",AIR:"air",ANCHOR:"anchor",APOTHECARY:"apothecary",ARCHER:"archer",ARMADYLEAN:"armadylean",ARTILLERY:"artillery",ARTISAN:"artisan",ASGARNIAN:"asgarnian",ASSASSIN:"assassin",ASSISTANT:"assistant",ASTRAL:"astral",ATHLETE:"athlete",ATTACKER:"attacker",BANDIT:"bandit",BANDOSIAN:"bandosian",BARBARIAN:"barbarian",BATTLEMAGE:"battlemage",BEAST:"beast",BERSERKER:"berserker",BLISTERWOOD:"blisterwood",BLOOD:"blood",BLUE:"blue",BOB:"bob",BODY:"body",BRASSICAN:"brassican",BRAWLER:"brawler",BRIGADIER:"brigadier",BRIGAND:"brigand",BRONZE:"bronze",BRUISER:"bruiser",BULWARK:"bulwark",BURGLAR:"burglar",BURNT:"burnt",CADET:"cadet",CAPTAIN:"captain",CARRY:"carry",CHAMPION:"champion",CHAOS:"chaos",CLERIC:"cleric",COLLECTOR:"collector",COLONEL:"colonel",COMMANDER:"commander",COMPETITOR:"competitor",COMPLETIONIST:"completionist",CONSTRUCTOR:"constructor",COOK:"cook",COORDINATOR:"coordinator",CORPORAL:"corporal",COSMIC:"cosmic",COUNCILLOR:"councillor",CRAFTER:"crafter",CREW:"crew",CRUSADER:"crusader",CUTPURSE:"cutpurse",DEATH:"death",DEFENDER:"defender",DEFILER:"defiler",DEPUTY_OWNER:"deputy_owner",DESTROYER:"destroyer",DIAMOND:"diamond",DISEASED:"diseased",DOCTOR:"doctor",DOGSBODY:"dogsbody",DRAGON:"dragon",DRAGONSTONE:"dragonstone",DRUID:"druid",DUELLIST:"duellist",EARTH:"earth",ELITE:"elite",EMERALD:"emerald",ENFORCER:"enforcer",EPIC:"epic",EXECUTIVE:"executive",EXPERT:"expert",EXPLORER:"explorer",FARMER:"farmer",FEEDER:"feeder",FIGHTER:"fighter",FIRE:"fire",FIREMAKER:"firemaker",FIRESTARTER:"firestarter",FISHER:"fisher",FLETCHER:"fletcher",FORAGER:"forager",FREMENNIK:"fremennik",GAMER:"gamer",GATHERER:"gatherer",GENERAL:"general",GNOME_CHILD:"gnome_child",GNOME_ELDER:"gnome_elder",GOBLIN:"goblin",GOLD:"gold",GOON:"goon",GREEN:"green",GREY:"grey",GUARDIAN:"guardian",GUTHIXIAN:"guthixian",HARPOON:"harpoon",HEALER:"healer",HELLCAT:"hellcat",HELPER:"helper",HERBOLOGIST:"herbologist",HERO:"hero",HOLY:"holy",HOARDER:"hoarder",HUNTER:"hunter",IGNITOR:"ignitor",ILLUSIONIST:"illusionist",IMP:"imp",INFANTRY:"infantry",INQUISITOR:"inquisitor",IRON:"iron",JADE:"jade",JUSTICIAR:"justiciar",KANDARIN:"kandarin",KARAMJAN:"karamjan",KHARIDIAN:"kharidian",KITTEN:"kitten",KNIGHT:"knight",LABOURER:"labourer",LAW:"law",LEADER:"leader",LEARNER:"learner",LEGACY:"legacy",LEGEND:"legend",LEGIONNAIRE:"legionnaire",LIEUTENANT:"lieutenant",LOOTER:"looter",LUMBERJACK:"lumberjack",MAGIC:"magic",MAGICIAN:"magician",MAJOR:"major",MAPLE:"maple",MARSHAL:"marshal",MASTER:"master",MAXED:"maxed",MEDIATOR:"mediator",MEDIC:"medic",MENTOR:"mentor",MEMBER:"member",MERCHANT:"merchant",MIND:"mind",MINER:"miner",MINION:"minion",MISTHALINIAN:"misthalinian",MITHRIL:"mithril",MODERATOR:"moderator",MONARCH:"monarch",MORYTANIAN:"morytanian",MYSTIC:"mystic",MYTH:"myth",NATURAL:"natural",NATURE:"nature",NECROMANCER:"necromancer",NINJA:"ninja",NOBLE:"noble",NOVICE:"novice",NURSE:"nurse",OAK:"oak",OFFICER:"officer",ONYX:"onyx",OPAL:"opal",ORACLE:"oracle",ORANGE:"orange",OWNER:"owner",PAGE:"page",PALADIN:"paladin",PAWN:"pawn",PILGRIM:"pilgrim",PINE:"pine",PINK:"pink",PREFECT:"prefect",PRIEST:"priest",PRIVATE:"private",PRODIGY:"prodigy",PROSELYTE:"proselyte",PROSPECTOR:"prospector",PROTECTOR:"protector",PURE:"pure",PURPLE:"purple",PYROMANCER:"pyromancer",QUESTER:"quester",RACER:"racer",RAIDER:"raider",RANGER:"ranger",RECORD_CHASER:"record_chaser",RECRUIT:"recruit",RECRUITER:"recruiter",RED_TOPAZ:"red_topaz",RED:"red",ROGUE:"rogue",RUBY:"ruby",RUNE:"rune",RUNECRAFTER:"runecrafter",SAGE:"sage",SAPPHIRE:"sapphire",SARADOMINIST:"saradominist",SAVIOUR:"saviour",SCAVENGER:"scavenger",SCHOLAR:"scholar",SCOURGE:"scourge",SCOUT:"scout",SCRIBE:"scribe",SEER:"seer",SENATOR:"senator",SENTRY:"sentry",SERENIST:"serenist",SERGEANT:"sergeant",SHAMAN:"shaman",SHERIFF:"sheriff",SHORT_GREEN_GUY:"short_green_guy",SKILLER:"skiller",SKULLED:"skulled",SLAYER:"slayer",SMITER:"smiter",SMITH:"smith",SMUGGLER:"smuggler",SNIPER:"sniper",SOUL:"soul",SPECIALIST:"specialist",SPEED_RUNNER:"speed_runner",SPELLCASTER:"spellcaster",SQUIRE:"squire",STAFF:"staff",STEEL:"steel",STRIDER:"strider",STRIKER:"striker",SUMMONER:"summoner",SUPERIOR:"superior",SUPERVISOR:"supervisor",TEACHER:"teacher",TEMPLAR:"templar",THERAPIST:"therapist",THIEF:"thief",TIRANNIAN:"tirannian",TRIALIST:"trialist",TRICKSTER:"trickster",TZKAL:"tzkal",TZTOK:"tztok",UNHOLY:"unholy",VAGRANT:"vagrant",VANGUARD:"vanguard",WALKER:"walker",WANDERER:"wanderer",WARDEN:"warden",WARLOCK:"warlock",WARRIOR:"warrior",WATER:"water",WILD:"wild",WILLOW:"willow",WILY:"wily",WINTUMBER:"wintumber",WITCH:"witch",WIZARD:"wizard",WORKER:"worker",WRATH:"wrath",XERICIAN:"xerician",YELLOW:"yellow",YEW:"yew",ZAMORAKIAN:"zamorakian",ZAROSIAN:"zarosian",ZEALOT:"zealot",ZENYTE:"zenyte"};var gl;(function(t){t.UPCOMING="upcoming",t.ONGOING="ongoing",t.FINISHED="finished"})(gl||(gl={}));var fS;(function(t){t.TEAM="team",t.TEAMS="teams",t.PARTICIPANTS="participants"})(fS||(fS={}));gl.UPCOMING+"",gl.ONGOING+"",gl.FINISHED+"";Object.values(gl);function Hh(t,e){const n={};return Object.keys(t).forEach(r=>{const i=r;n[i]=e(t[i],i,t)}),n}const uz=[T.ADMINISTRATOR,T.OWNER,T.LEADER,T.DEPUTY_OWNER,T.MODERATOR];Hh({[T.ACHIEVER]:{name:"Achiever"},[T.ADAMANT]:{name:"Adamant"},[T.ADEPT]:{name:"Adept"},[T.ADMINISTRATOR]:{name:"Administrator"},[T.ADMIRAL]:{name:"Admiral"},[T.ADVENTURER]:{name:"Adventurer"},[T.AIR]:{name:"Air"},[T.ANCHOR]:{name:"Anchor"},[T.APOTHECARY]:{name:"Apothecary"},[T.ARCHER]:{name:"Archer"},[T.ARMADYLEAN]:{name:"Armadylean"},[T.ARTILLERY]:{name:"Artillery"},[T.ARTISAN]:{name:"Artisan"},[T.ASGARNIAN]:{name:"Asgarnian"},[T.ASSASSIN]:{name:"Assassin"},[T.ASSISTANT]:{name:"Assistant"},[T.ASTRAL]:{name:"Astral"},[T.ATHLETE]:{name:"Athlete"},[T.ATTACKER]:{name:"Attacker"},[T.BANDIT]:{name:"Bandit"},[T.BANDOSIAN]:{name:"Bandosian"},[T.BARBARIAN]:{name:"Barbarian"},[T.BATTLEMAGE]:{name:"Battlemage"},[T.BEAST]:{name:"Beast"},[T.BERSERKER]:{name:"Berserker"},[T.BLISTERWOOD]:{name:"Blisterwood"},[T.BLOOD]:{name:"Blood"},[T.BLUE]:{name:"Blue"},[T.BOB]:{name:"Bob"},[T.BODY]:{name:"Body"},[T.BRASSICAN]:{name:"Brassican"},[T.BRAWLER]:{name:"Brawler"},[T.BRIGADIER]:{name:"Brigadier"},[T.BRIGAND]:{name:"Brigand"},[T.BRONZE]:{name:"Bronze"},[T.BRUISER]:{name:"Bruiser"},[T.BULWARK]:{name:"Bulwark"},[T.BURGLAR]:{name:"Burglar"},[T.BURNT]:{name:"Burnt"},[T.CADET]:{name:"Cadet"},[T.CAPTAIN]:{name:"Captain"},[T.CARRY]:{name:"Carry"},[T.CHAMPION]:{name:"Champion"},[T.CHAOS]:{name:"Chaos"},[T.CLERIC]:{name:"Cleric"},[T.COLLECTOR]:{name:"Collector"},[T.COLONEL]:{name:"Colonel"},[T.COMMANDER]:{name:"Commander"},[T.COMPETITOR]:{name:"Competitor"},[T.COMPLETIONIST]:{name:"Completionist"},[T.CONSTRUCTOR]:{name:"Constructor"},[T.COOK]:{name:"Cook"},[T.COORDINATOR]:{name:"Coordinator"},[T.CORPORAL]:{name:"Corporal"},[T.COSMIC]:{name:"Cosmic"},[T.COUNCILLOR]:{name:"Councillor"},[T.CRAFTER]:{name:"Crafter"},[T.CREW]:{name:"Crew"},[T.CRUSADER]:{name:"Crusader"},[T.CUTPURSE]:{name:"Cutpurse"},[T.DEATH]:{name:"Death"},[T.DEFENDER]:{name:"Defender"},[T.DEFILER]:{name:"Defiler"},[T.DEPUTY_OWNER]:{name:"Deputy Owner"},[T.DESTROYER]:{name:"Destroyer"},[T.DIAMOND]:{name:"Diamond"},[T.DISEASED]:{name:"Diseased"},[T.DOCTOR]:{name:"Doctor"},[T.DOGSBODY]:{name:"Dogsbody"},[T.DRAGON]:{name:"Dragon"},[T.DRAGONSTONE]:{name:"Dragonstone"},[T.DRUID]:{name:"Druid"},[T.DUELLIST]:{name:"Duellist"},[T.EARTH]:{name:"Earth"},[T.ELITE]:{name:"Elite"},[T.EMERALD]:{name:"Emerald"},[T.ENFORCER]:{name:"Enforcer"},[T.EPIC]:{name:"Epic"},[T.EXECUTIVE]:{name:"Executive"},[T.EXPERT]:{name:"Expert"},[T.EXPLORER]:{name:"Explorer"},[T.FARMER]:{name:"Farmer"},[T.FEEDER]:{name:"Feeder"},[T.FIGHTER]:{name:"Fighter"},[T.FIRE]:{name:"Fire"},[T.FIREMAKER]:{name:"Firemaker"},[T.FIRESTARTER]:{name:"Firestarter"},[T.FISHER]:{name:"Fisher"},[T.FLETCHER]:{name:"Fletcher"},[T.FORAGER]:{name:"Forager"},[T.FREMENNIK]:{name:"Fremennik"},[T.GAMER]:{name:"Gamer"},[T.GATHERER]:{name:"Gatherer"},[T.GENERAL]:{name:"General"},[T.GNOME_CHILD]:{name:"Gnome Child"},[T.GNOME_ELDER]:{name:"Gnome Elder"},[T.GOBLIN]:{name:"Goblin"},[T.GOLD]:{name:"Gold"},[T.GOON]:{name:"Goon"},[T.GREEN]:{name:"Green"},[T.GREY]:{name:"Grey"},[T.GUARDIAN]:{name:"Guardian"},[T.GUTHIXIAN]:{name:"Guthixian"},[T.HARPOON]:{name:"Harpoon"},[T.HEALER]:{name:"Healer"},[T.HELLCAT]:{name:"Hellcat"},[T.HELPER]:{name:"Helper"},[T.HERBOLOGIST]:{name:"Herbologist"},[T.HERO]:{name:"Hero"},[T.HOLY]:{name:"Holy"},[T.HOARDER]:{name:"Hoarder"},[T.HUNTER]:{name:"Hunter"},[T.IGNITOR]:{name:"Ignitor"},[T.ILLUSIONIST]:{name:"Illusionist"},[T.IMP]:{name:"Imp"},[T.INFANTRY]:{name:"Infantry"},[T.INQUISITOR]:{name:"Inquisitor"},[T.IRON]:{name:"Iron"},[T.JADE]:{name:"Jade"},[T.JUSTICIAR]:{name:"Justiciar"},[T.KANDARIN]:{name:"Kandarin"},[T.KARAMJAN]:{name:"Karamjan"},[T.KHARIDIAN]:{name:"Kharidian"},[T.KITTEN]:{name:"Kitten"},[T.KNIGHT]:{name:"Knight"},[T.LABOURER]:{name:"Labourer"},[T.LAW]:{name:"Law"},[T.LEADER]:{name:"Leader"},[T.LEARNER]:{name:"Learner"},[T.LEGACY]:{name:"Legacy"},[T.LEGEND]:{name:"Legend"},[T.LEGIONNAIRE]:{name:"Legionnaire"},[T.LIEUTENANT]:{name:"Lieutenant"},[T.LOOTER]:{name:"Looter"},[T.LUMBERJACK]:{name:"Lumberjack"},[T.MAGIC]:{name:"Magic"},[T.MAGICIAN]:{name:"Magician"},[T.MAJOR]:{name:"Major"},[T.MAPLE]:{name:"Maple"},[T.MARSHAL]:{name:"Marshal"},[T.MASTER]:{name:"Master"},[T.MAXED]:{name:"Maxed"},[T.MEDIATOR]:{name:"Mediator"},[T.MEDIC]:{name:"Medic"},[T.MENTOR]:{name:"Mentor"},[T.MEMBER]:{name:"Member"},[T.MERCHANT]:{name:"Merchant"},[T.MIND]:{name:"Mind"},[T.MINER]:{name:"Miner"},[T.MINION]:{name:"Minion"},[T.MISTHALINIAN]:{name:"Misthalinian"},[T.MITHRIL]:{name:"Mithril"},[T.MODERATOR]:{name:"Moderator"},[T.MONARCH]:{name:"Monarch"},[T.MORYTANIAN]:{name:"Morytanian"},[T.MYSTIC]:{name:"Mystic"},[T.MYTH]:{name:"Myth"},[T.NATURAL]:{name:"Natural"},[T.NATURE]:{name:"Nature"},[T.NECROMANCER]:{name:"Necromancer"},[T.NINJA]:{name:"Ninja"},[T.NOBLE]:{name:"Noble"},[T.NOVICE]:{name:"Novice"},[T.NURSE]:{name:"Nurse"},[T.OAK]:{name:"Oak"},[T.OFFICER]:{name:"Officer"},[T.ONYX]:{name:"Onyx"},[T.OPAL]:{name:"Opal"},[T.ORACLE]:{name:"Oracle"},[T.ORANGE]:{name:"Orange"},[T.OWNER]:{name:"Owner"},[T.PAGE]:{name:"Page"},[T.PALADIN]:{name:"Paladin"},[T.PAWN]:{name:"Pawn"},[T.PILGRIM]:{name:"Pilgrim"},[T.PINE]:{name:"Pine"},[T.PINK]:{name:"Pink"},[T.PREFECT]:{name:"Prefect"},[T.PRIEST]:{name:"Priest"},[T.PRIVATE]:{name:"Private"},[T.PRODIGY]:{name:"Prodigy"},[T.PROSELYTE]:{name:"Proselyte"},[T.PROSPECTOR]:{name:"Prospector"},[T.PROTECTOR]:{name:"Protector"},[T.PURE]:{name:"Pure"},[T.PURPLE]:{name:"Purple"},[T.PYROMANCER]:{name:"Pyromancer"},[T.QUESTER]:{name:"Quester"},[T.RACER]:{name:"Racer"},[T.RAIDER]:{name:"Raider"},[T.RANGER]:{name:"Ranger"},[T.RECORD_CHASER]:{name:"Record-Chaser"},[T.RECRUIT]:{name:"Recruit"},[T.RECRUITER]:{name:"Recruiter"},[T.RED_TOPAZ]:{name:"Red Topaz"},[T.RED]:{name:"Red"},[T.ROGUE]:{name:"Rogue"},[T.RUBY]:{name:"Ruby"},[T.RUNE]:{name:"Rune"},[T.RUNECRAFTER]:{name:"Runecrafter"},[T.SAGE]:{name:"Sage"},[T.SAPPHIRE]:{name:"Sapphire"},[T.SARADOMINIST]:{name:"Saradominist"},[T.SAVIOUR]:{name:"Saviour"},[T.SCAVENGER]:{name:"Scavenger"},[T.SCHOLAR]:{name:"Scholar"},[T.SCOURGE]:{name:"Scourge"},[T.SCOUT]:{name:"Scout"},[T.SCRIBE]:{name:"Scribe"},[T.SEER]:{name:"Seer"},[T.SENATOR]:{name:"Senator"},[T.SENTRY]:{name:"Sentry"},[T.SERENIST]:{name:"Serenist"},[T.SERGEANT]:{name:"Sergeant"},[T.SHAMAN]:{name:"Shaman"},[T.SHERIFF]:{name:"Sheriff"},[T.SHORT_GREEN_GUY]:{name:"Short Green Guy"},[T.SKILLER]:{name:"Skiller"},[T.SKULLED]:{name:"Skulled"},[T.SLAYER]:{name:"Slayer"},[T.SMITER]:{name:"Smiter"},[T.SMITH]:{name:"Smith"},[T.SMUGGLER]:{name:"Smuggler"},[T.SNIPER]:{name:"Sniper"},[T.SOUL]:{name:"Soul"},[T.SPECIALIST]:{name:"Specialist"},[T.SPEED_RUNNER]:{name:"Speed-Runner"},[T.SPELLCASTER]:{name:"Spellcaster"},[T.SQUIRE]:{name:"Squire"},[T.STAFF]:{name:"Staff"},[T.STEEL]:{name:"Steel"},[T.STRIDER]:{name:"Strider"},[T.STRIKER]:{name:"Striker"},[T.SUMMONER]:{name:"Summoner"},[T.SUPERIOR]:{name:"Superior"},[T.SUPERVISOR]:{name:"Supervisor"},[T.TEACHER]:{name:"Teacher"},[T.TEMPLAR]:{name:"Templar"},[T.THERAPIST]:{name:"Therapist"},[T.THIEF]:{name:"Thief"},[T.TIRANNIAN]:{name:"Tirannian"},[T.TRIALIST]:{name:"Trialist"},[T.TRICKSTER]:{name:"Trickster"},[T.TZKAL]:{name:"TzKal"},[T.TZTOK]:{name:"TzTok"},[T.UNHOLY]:{name:"Unholy"},[T.VAGRANT]:{name:"Vagrant"},[T.VANGUARD]:{name:"Vanguard"},[T.WALKER]:{name:"Walker"},[T.WANDERER]:{name:"Wanderer"},[T.WARDEN]:{name:"Warden"},[T.WARLOCK]:{name:"Warlock"},[T.WARRIOR]:{name:"Warrior"},[T.WATER]:{name:"Water"},[T.WILD]:{name:"Wild"},[T.WILLOW]:{name:"Willow"},[T.WILY]:{name:"Wily"},[T.WINTUMBER]:{name:"Wintumber"},[T.WITCH]:{name:"Witch"},[T.WIZARD]:{name:"Wizard"},[T.WORKER]:{name:"Worker"},[T.WRATH]:{name:"Wrath"},[T.XERICIAN]:{name:"Xerician"},[T.YELLOW]:{name:"Yellow"},[T.YEW]:{name:"Yew"},[T.ZAMORAKIAN]:{name:"Zamorakian"},[T.ZAROSIAN]:{name:"Zarosian"},[T.ZEALOT]:{name:"Zealot"},[T.ZENYTE]:{name:"Zenyte"}},(t,e)=>Object.assign(Object.assign({},t),{isPriveleged:uz.includes(e)}));var Bl;(function(t){t.SKILL="skill",t.BOSS="boss",t.ACTIVITY="activity",t.COMPUTED="computed"})(Bl||(Bl={}));var $l;(function(t){t.EXPERIENCE="experience",t.KILLS="kills",t.SCORE="score",t.VALUE="value"})($l||($l={}));const hz=Hh({[bt.OVERALL]:{name:"Overall"},[bt.ATTACK]:{name:"Attack",isCombat:!0},[bt.DEFENCE]:{name:"Defence",isCombat:!0},[bt.STRENGTH]:{name:"Strength",isCombat:!0},[bt.HITPOINTS]:{name:"Hitpoints",isCombat:!0},[bt.RANGED]:{name:"Ranged",isCombat:!0},[bt.PRAYER]:{name:"Prayer",isCombat:!0},[bt.MAGIC]:{name:"Magic",isCombat:!0},[bt.COOKING]:{name:"Cooking"},[bt.WOODCUTTING]:{name:"Woodcutting"},[bt.FLETCHING]:{name:"Fletching",isMembers:!0},[bt.FISHING]:{name:"Fishing"},[bt.FIREMAKING]:{name:"Firemaking"},[bt.CRAFTING]:{name:"Crafting"},[bt.SMITHING]:{name:"Smithing"},[bt.MINING]:{name:"Mining"},[bt.HERBLORE]:{name:"Herblore",isMembers:!0},[bt.AGILITY]:{name:"Agility",isMembers:!0},[bt.THIEVING]:{name:"Thieving",isMembers:!0},[bt.SLAYER]:{name:"Slayer",isMembers:!0},[bt.FARMING]:{name:"Farming",isMembers:!0},[bt.RUNECRAFTING]:{name:"Runecrafting"},[bt.HUNTER]:{name:"Hunter",isMembers:!0},[bt.CONSTRUCTION]:{name:"Construction",isMembers:!0}},t=>Object.assign(Object.assign({},t),{type:Bl.SKILL,measure:$l.EXPERIENCE,isCombat:"isCombat"in t?t.isCombat:!1,isMembers:"isMembers"in t?t.isMembers:!1})),dz=Hh({[ge.ABYSSAL_SIRE]:{name:"Abyssal Sire"},[ge.ALCHEMICAL_HYDRA]:{name:"Alchemical Hydra"},[ge.ARTIO]:{name:"Artio"},[ge.BARROWS_CHESTS]:{name:"Barrows Chests"},[ge.BRYOPHYTA]:{name:"Bryophyta",isMembers:!1},[ge.CALLISTO]:{name:"Callisto"},[ge.CALVARION]:{name:"Calvar'ion"},[ge.CERBERUS]:{name:"Cerberus"},[ge.CHAMBERS_OF_XERIC]:{name:"Chambers Of Xeric"},[ge.CHAMBERS_OF_XERIC_CM]:{name:"Chambers Of Xeric (CM)"},[ge.CHAOS_ELEMENTAL]:{name:"Chaos Elemental"},[ge.CHAOS_FANATIC]:{name:"Chaos Fanatic"},[ge.COMMANDER_ZILYANA]:{name:"Commander Zilyana"},[ge.CORPOREAL_BEAST]:{name:"Corporeal Beast"},[ge.CRAZY_ARCHAEOLOGIST]:{name:"Crazy Archaeologist"},[ge.DAGANNOTH_PRIME]:{name:"Dagannoth Prime"},[ge.DAGANNOTH_REX]:{name:"Dagannoth Rex"},[ge.DAGANNOTH_SUPREME]:{name:"Dagannoth Supreme"},[ge.DERANGED_ARCHAEOLOGIST]:{name:"Deranged Archaeologist"},[ge.DUKE_SUCELLUS]:{name:"Duke Sucellus"},[ge.GENERAL_GRAARDOR]:{name:"General Graardor"},[ge.GIANT_MOLE]:{name:"Giant Mole"},[ge.GROTESQUE_GUARDIANS]:{name:"Grotesque Guardians"},[ge.HESPORI]:{name:"Hespori"},[ge.KALPHITE_QUEEN]:{name:"Kalphite Queen"},[ge.KING_BLACK_DRAGON]:{name:"King Black Dragon"},[ge.KRAKEN]:{name:"Kraken"},[ge.KREEARRA]:{name:"Kree'Arra"},[ge.KRIL_TSUTSAROTH]:{name:"K'ril Tsutsaroth"},[ge.LUNAR_CHESTS]:{name:"Lunar Chests"},[ge.MIMIC]:{name:"Mimic",minimumValue:1},[ge.NEX]:{name:"Nex"},[ge.NIGHTMARE]:{name:"Nightmare"},[ge.PHOSANIS_NIGHTMARE]:{name:"Phosani's Nightmare"},[ge.OBOR]:{name:"Obor",isMembers:!1},[ge.PHANTOM_MUSPAH]:{name:"Phantom Muspah"},[ge.SARACHNIS]:{name:"Sarachnis"},[ge.SCORPIA]:{name:"Scorpia"},[ge.SCURRIUS]:{name:"Scurrius"},[ge.SKOTIZO]:{name:"Skotizo"},[ge.SOL_HEREDIT]:{name:"Sol Heredit"},[ge.SPINDEL]:{name:"Spindel"},[ge.TEMPOROSS]:{name:"Tempoross"},[ge.THE_GAUNTLET]:{name:"The Gauntlet"},[ge.THE_CORRUPTED_GAUNTLET]:{name:"The Corrupted Gauntlet"},[ge.THE_LEVIATHAN]:{name:"The Leviathan"},[ge.THE_WHISPERER]:{name:"The Whisperer"},[ge.THEATRE_OF_BLOOD]:{name:"Theatre Of Blood"},[ge.THEATRE_OF_BLOOD_HARD_MODE]:{name:"Theatre Of Blood (HM)"},[ge.THERMONUCLEAR_SMOKE_DEVIL]:{name:"Thermonuclear Smoke Devil"},[ge.TOMBS_OF_AMASCUT]:{name:"Tombs of Amascut"},[ge.TOMBS_OF_AMASCUT_EXPERT]:{name:"Tombs of Amascut (Expert Mode)"},[ge.TZKAL_ZUK]:{name:"TzKal-Zuk",minimumValue:1},[ge.TZTOK_JAD]:{name:"TzTok-Jad"},[ge.VARDORVIS]:{name:"Vardorvis"},[ge.VENENATIS]:{name:"Venenatis"},[ge.VETION]:{name:"Vet'ion"},[ge.VORKATH]:{name:"Vorkath"},[ge.WINTERTODT]:{name:"Wintertodt"},[ge.ZALCANO]:{name:"Zalcano"},[ge.ZULRAH]:{name:"Zulrah"}},t=>Object.assign(Object.assign({},t),{type:Bl.BOSS,measure:$l.KILLS,isMembers:"isMembers"in t?t.isMembers:!0,minimumValue:"minimumValue"in t?t.minimumValue:5})),fz=Hh({[gn.LEAGUE_POINTS]:{name:"League Points",minimumValue:100},[gn.BOUNTY_HUNTER_HUNTER]:{name:"Bounty Hunter (Hunter)",minimumValue:2},[gn.BOUNTY_HUNTER_ROGUE]:{name:"Bounty Hunter (Rogue)",minimumValue:2},[gn.CLUE_SCROLLS_ALL]:{name:"Clue Scrolls (All)"},[gn.CLUE_SCROLLS_BEGINNER]:{name:"Clue Scrolls (Beginner)"},[gn.CLUE_SCROLLS_EASY]:{name:"Clue Scrolls (Easy)"},[gn.CLUE_SCROLLS_MEDIUM]:{name:"Clue Scrolls (Medium)"},[gn.CLUE_SCROLLS_HARD]:{name:"Clue Scrolls (Hard)"},[gn.CLUE_SCROLLS_ELITE]:{name:"Clue Scrolls (Elite)"},[gn.CLUE_SCROLLS_MASTER]:{name:"Clue Scrolls (Master)"},[gn.LAST_MAN_STANDING]:{name:"Last Man Standing",minimumValue:500},[gn.PVP_ARENA]:{name:"PvP Arena",minimumValue:2525},[gn.SOUL_WARS_ZEAL]:{name:"Soul Wars Zeal",minimumValue:200},[gn.GUARDIANS_OF_THE_RIFT]:{name:"Guardians of the Rift",minimumValue:2},[gn.COLOSSEUM_GLORY]:{name:"Colosseum Glory",minimumValue:300}},t=>Object.assign(Object.assign({},t),{type:Bl.ACTIVITY,measure:$l.SCORE,minimumValue:"minimumValue"in t?t.minimumValue:1})),pz=Hh({[np.EHP]:{name:"EHP"},[np.EHB]:{name:"EHB"}},t=>Object.assign(Object.assign({},t),{type:Bl.COMPUTED,measure:$l.VALUE})),tb=Object.assign(Object.assign(Object.assign(Object.assign({},hz),dz),fz),pz),mz=Object.values(Z_),zh=Object.values(bt),nb=Object.values(ge),vN=Object.values(gn);Object.values(np);zh.filter(t=>t!==bt.OVERALL);nb.filter(t=>!tb[t].isMembers);zh.filter(t=>tb[t].isMembers);zh.filter(t=>tb[t].isCombat);[...zh,...nb,...vN];var pS;(function(t){t.MAIN="main",t.IRONMAN="ironman",t.ULTIMATE="ultimate",t.LVL3="lvl3",t.F2P="f2p",t.F2P_LVL3="f2p_lvl3",t.F2P_IRONMAN="f2p_ironman",t.F2P_LVL3_IRONMAN="f2p_lvl3_ironman"})(pS||(pS={}));var mS;(function(t){t[t.TEMPLE_OSRS=0]="TEMPLE_OSRS",t[t.CRYSTAL_MATH_LABS=1]="CRYSTAL_MATH_LABS"})(mS||(mS={}));class gz extends yo{getEfficiencyLeaderboards(e,n){return this.getRequest("/efficiency/leaderboard",Object.assign(Object.assign({},e),n))}getEHPRates(e){return this.getRequest("/efficiency/rates",{metric:Z_.EHP,type:e})}getEHBRates(e){return this.getRequest("/efficiency/rates",{metric:Z_.EHB,type:e})}}class yz extends yo{searchNameChanges(e,n){return this.getRequest("/names",Object.assign(Object.assign({},e),n))}submitNameChange(e,n){return this.postRequest("/names",{oldName:e,newName:n})}}class _z extends yo{searchCompetitions(e,n){return this.getRequest("/competitions",Object.assign(Object.assign({},e),n))}getCompetitionDetails(e,n){return this.getRequest(`/competitions/${e}`,{metric:n})}getCompetitionDetailsCSV(e,n){return this.getText(`/competitions/${e}/csv`,Object.assign({metric:n.previewMetric},n))}getCompetitionTopHistory(e,n){return this.getRequest(`/competitions/${e}/top-history`,{metric:n})}createCompetition(e){return this.postRequest("/competitions",e)}editCompetition(e,n,r){return this.putRequest(`/competitions/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteCompetition(e,n){return this.deleteRequest(`/competitions/${e}`,{verificationCode:n})}addParticipants(e,n,r){return this.postRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}removeParticipants(e,n,r){return this.deleteRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}addTeams(e,n,r){return this.postRequest(`/competitions/${e}/teams`,{verificationCode:r,teams:n})}removeTeams(e,n,r){return this.deleteRequest(`/competitions/${e}/teams`,{verificationCode:r,teamNames:n})}updateAll(e,n){return this.postRequest(`/competitions/${e}/update-all`,{verificationCode:n})}}class rb extends yo{constructor(e){const n=(e==null?void 0:e.baseAPIUrl)||hS.baseAPIUrl,r={"x-user-agent":(e==null?void 0:e.userAgent)||hS.defaultUserAgent};e!=null&&e.apiKey&&(r["x-api-key"]=e.apiKey),super(r,n),this.deltas=new oz(r,n),this.groups=new az(r,n),this.players=new lz(r,n),this.records=new cz(r,n),this.efficiency=new gz(r,n),this.nameChanges=new yz(r,n),this.competitions=new _z(r,n)}}const vz={key:0},bz=b("h1",null,"Create new Bingo",-1),Ez={key:0},Tz={key:2},wz=Ut({__name:"newBoard.vapor",async setup(t){let e,n;const r=aN(),i=([e,n]=qn(()=>ni()),e=await e,n(),e),s=ie(!1),o=ie(40963),a=ie(),l=new rb({apiKey:"zpyy03zybxt0oiznjw6e1mz2",userAgent:"_Odinh"}),c=ie({}),u=ie({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),h=ie({}),d=async()=>{!o.value||o.value<=0||isNaN(o.value)||await l.competitions.getCompetitionDetails(o.value).then(async m=>{if(m!=null&&m.message)throw new Error("Error creating bingo: "+m.message);if((m==null?void 0:m.metric)!="overall")throw new Error("Error creating bingo: Metric should be set to `Overall`");if((m==null?void 0:m.type)!="team")throw new Error("Error creating bingo: Type should be set to `Team`");if(!(m!=null&&m.participations))throw new Error("Error creating bingo: No participants found");if(new Date>m.endsAt)throw new Error("Error creating bingo: Competition has already ended");const g=Ye(ke,"Boards",o.value.toString());if((await Zr(g)).exists())throw new Error("Error creating bingo: Board already exists");h.value={name:m.title,start:m.startsAt,end:m.endsAt,published:!1},c.value=f(m),s.value=!0}).catch(m=>{a.value=m.message})},f=m=>{var _;const g=ie(),y=ie({});return g.value=m.participations,(_=g.value)==null||_.map(v=>{y.value[v.teamName]={teamName:v.teamName,players:[],stats:null}}),g.value.map(v=>{delete v.player.ehb,delete v.player.exp,delete v.player.ehp,y.value[v.teamName].players=[...y.value[v.teamName].players,y.value[v.teamName].players[v.player.username]={...v.player}]}),y.value},p=async()=>{const m=Ye(ke,"Boards",o.value.toString());i&&await $w(m,{ownerID:i.uid}).then(()=>{const g=Ye(ke,"Users",i.uid);for(let y in c.value){const _=Ye(er(ke,"Boards",m.id,"Groups")),v=c.value[y];$w(Ye(ke,_.path),{teamName:v.teamName,teamId:_.id,players:c.value[y].players,stats:null})}ts(m,{name:h.value.name,start:h.value.start,end:h.value.end}),ts(g,{boards:jO(m.id)})}).then(()=>{r.push({name:"editBoard",params:{boardUUID:m.id}})}).catch(g=>{a.value=g.message}),s.value=!1};return(m,g)=>{var y,_;return j(i)?(O(),L("div",vz,[bz,a.value?(O(),L("p",Ez,ee(a.value),1)):ue("",!0),$t(b("input",{type:"number","onUpdate:modelValue":g[0]||(g[0]=v=>o.value=v),placeholder:"12345 WOM Team competition code",min:"0",onFocusin:g[1]||(g[1]=()=>{a.value=""})},null,544),[[hr,o.value]]),b("button",{onClick:g[2]||(g[2]=v=>d())},"Create new Bingo"),s.value?(O(),L("button",{key:1,onClick:g[3]||(g[3]=v=>p())},"finish setup")):ue("",!0),c.value!==null&&s.value?(O(),L("div",Tz,[b("h1",null,ee(h.value.name),1),h.value.start?(O(),L(se,{key:0},[b("p",null," Starts: "+ee(h.value.start.toLocaleDateString(void 0,u.value)),1),b("code",null,"<t:"+ee(((y=h.value.start)==null?void 0:y.valueOf())/1e3)+":F>",1)],64)):ue("",!0),h.value.end?(O(),L(se,{key:1},[b("p",null," Ends: "+ee(h.value.end.toLocaleDateString(void 0,u.value)),1),b("code",null,"<t:"+ee(((_=h.value.end)==null?void 0:_.valueOf())/1e3)+":F>",1)],64)):ue("",!0),(O(!0),L(se,null,st(c.value,v=>(O(),L("div",{key:v.teamName},[X(ee(v)+" ",1),b("h2",null,ee(v.teamName),1),(O(!0),L(se,null,st(v.players,I=>(O(),L("div",{key:I.username},[b("div",null,ee(I.username),1)]))),128))]))),128))])):ue("",!0)])):ue("",!0)}}}),Sz=Ut({__name:"userBoardListItems.vapor",props:{boardID:{}},async setup(t){let e,n;const r=t,{data:i,promise:s}=Ma(Ye(ke,"Boards",r.boardID));[e,n]=qn(()=>Promise.all([s.value])),await e,n();const o=()=>{var a;if((a=i.value)!=null&&a.published){i.value.published=!i.value.published,ts(Ye(ke,"Boards",r.boardID),{published:i.value.published});return}ts(Ye(ke,"Boards",r.boardID),{published:!0})};return(a,l)=>{var u,h,d,f;const c=sr("router-link");return O(),L(se,null,[j(i)?(O(),L("label",{key:(u=j(i))==null?void 0:u.id},[X(ee((h=j(i))==null?void 0:h.name)+" ",1),Ee(c,{to:{name:"editBoard",params:{boardUUID:(d=j(i))==null?void 0:d.id}},class:"btn",icon:""},{default:ct(()=>[X(" edit ")]),_:1},8,["to"])])):ue("",!0),Ee(c,{to:{name:"viewBoard",params:{boardUUID:(f=j(i))==null?void 0:f.id}},class:"btn",icon:""},{default:ct(()=>[X(" visibility ")]),_:1},8,["to"]),$t(b("input",{type:"checkbox",onClick:o,toggle:"","onUpdate:modelValue":l[0]||(l[0]=p=>j(i).published=p)},null,512),[[Wy,j(i).published]])],64)}}}),Iz={key:0},Az=b("h1",null,"Log in",-1),Cz=b("p",null,"you need to be signed in to edit, create and moderate a board",-1),kz=b("h1",null,"User details",-1),Rz=b("h2",null,"Boards",-1),Oz=Ut({__name:"loginView.vapor",async setup(t){let e,n;const r=aN(),i=new zi,s=v$(),o=q5(),a=ie();if(o.value){const{data:d,promise:f}=Ma(Ye(ke,"Users",o.value.uid));[e,n]=qn(()=>f.value.then(()=>{var p;a.value=(p=d.value)==null?void 0:p.boards})),await e,n()}const l=fc(),c=()=>o.value?"User details":"log in";l.value=c()+" - Bingo Bongo";const u=()=>{y6(s,i).then(()=>{r.push({name:"Home"})}).catch(d=>{const f=d.message;console.error(f)})},h=()=>{JL(s).then(()=>r.push({name:"Home"}))};return(d,f)=>j(o)?(O(),L(se,{key:1},[b("div",null,[kz,b("p",null,[X(" uid: "),b("code",null,ee(j(o).uid),1)]),b("button",{class:"btn",onClick:Ge(h,["prevent"])},"Log out")]),b("div",null,[Rz,b("ul",null,[(O(!0),L(se,null,st(a.value,p=>(O(),L("li",null,[(O(),We(Sz,{boardID:p,key:p},null,8,["boardID"]))]))),256))])])],64)):(O(),L("div",Iz,[Az,Cz,j(o)?ue("",!0):(O(),L("button",{key:0,class:"btn",onClick:Ge(u,["prevent"])},"Log in with Google"))]))}});/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function gS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gS(Object(n),!0).forEach(function(r){Nz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ef(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ef=function(e){return typeof e}:ef=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function Nz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ls(){return ls=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ls.apply(this,arguments)}function Mz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Pz(t,e){if(t==null)return{};var n=Mz(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var xz="1.15.2";function ns(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var ps=ns(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),jh=ns(/Edge/i),yS=ns(/firefox/i),hu=ns(/safari/i)&&!ns(/chrome/i)&&!ns(/android/i),bN=ns(/iP(ad|od|hone)/i),EN=ns(/chrome/i)&&ns(/android/i),TN={capture:!1,passive:!1};function at(t,e,n){t.addEventListener(e,n,!ps&&TN)}function rt(t,e,n){t.removeEventListener(e,n,!ps&&TN)}function rp(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Dz(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ur(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&rp(t,e):rp(t,e))||r&&t===n)return t;if(t===n)break}while(t=Dz(t))}return null}var _S=/\s+/g;function lr(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(_S," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(_S," ")}}function Re(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function yl(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Re(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function wN(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Si(){var t=document.scrollingElement;return t||document.documentElement}function qt(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,u,h;if(t!==window&&t.parentNode&&t!==Si()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!ps))do if(i&&i.getBoundingClientRect&&(Re(i,"transform")!=="none"||n&&Re(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(Re(i,"border-top-width")),a-=d.left+parseInt(Re(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var f=yl(i||t),p=f&&f.a,m=f&&f.d;f&&(o/=m,a/=p,h/=p,u/=m,l=o+u,c=a+h)}return{top:o,left:a,bottom:l,right:c,width:h,height:u}}}function vS(t,e,n){for(var r=Bs(t,!0),i=qt(t)[e];r;){var s=qt(r)[n],o=void 0;if(n==="top"||n==="left"?o=i>=s:o=i<=s,!o)return r;if(r===Si())break;r=Bs(r,!1)}return!1}function Hl(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Oe.ghost&&(r||o[s]!==Oe.dragged)&&Ur(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function ib(t,e){for(var n=t.lastElementChild;n&&(n===Oe.ghost||Re(n,"display")==="none"||e&&!rp(n,e));)n=n.previousElementSibling;return n||null}function Ar(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Oe.clone&&(!e||rp(t,e))&&n++;return n}function bS(t){var e=0,n=0,r=Si();if(t)do{var i=yl(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function Lz(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Bs(t,e){if(!t||!t.getBoundingClientRect)return Si();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Re(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Si();if(r||e)return n;r=!0}}while(n=n.parentNode);return Si()}function Vz(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function zg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var du;function SN(t,e){return function(){if(!du){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),du=setTimeout(function(){du=void 0},e)}}}function Fz(){clearTimeout(du),du=void 0}function IN(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function AN(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function CN(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var s,o,a,l;if(!(!Ur(i,e.draggable,t,!1)||i.animated||i===n)){var c=qt(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var fr="Sortable"+new Date().getTime();function Uz(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Re(i,"display")==="none"||i===Oe.ghost)){t.push({target:i,rect:qt(i)});var s=Mi({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=yl(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(Lz(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=qt(c),d=c.prevFromRect,f=c.prevToRect,p=a.rect,m=yl(c,!0);m&&(h.top-=m.f,h.left-=m.e),c.toRect=h,c.thisAnimationDuration&&zg(d,h)&&!zg(u,h)&&(p.top-h.top)/(p.left-h.left)===(u.top-h.top)/(u.left-h.left)&&(l=$z(p,d,f,i.options)),zg(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=i.options.animation),i.animate(c,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){Re(r,"transition",""),Re(r,"transform","");var a=yl(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-s.left)/(l||1),h=(i.top-s.top)/(c||1);r.animatingX=!!u,r.animatingY=!!h,Re(r,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=Bz(r),Re(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Re(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Re(r,"transition",""),Re(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function Bz(t){return t.offsetWidth}function $z(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Va=[],jg={initializeByDefault:!0},Wh={mount:function(e){for(var n in jg)jg.hasOwnProperty(n)&&!(n in e)&&(e[n]=jg[n]);Va.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Va.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Va.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Mi({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Mi({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Va.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,ls(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Va.forEach(function(i){typeof i.eventProperties=="function"&&ls(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Va.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Hz(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[fr],!!e){var m,g=e.options,y="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ps&&!jh?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||n,m.from=a||n,m.item=i||n,m.clone=s,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=d,m.pullMode=f?f.lastPutMode:void 0;var _=Mi(Mi({},p),Wh.getEventProperties(r,e));for(var v in _)m[v]=_[v];n&&n.dispatchEvent(m),g[y]&&g[y].call(e,m)}}var zz=["evt"],Jn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=Pz(r,zz);Wh.pluginEvent.bind(Oe)(e,n,Mi({dragEl:oe,parentEl:Dt,ghostEl:Le,rootEl:Ot,nextEl:Oo,lastDownEl:tf,cloneEl:Mt,cloneHidden:Vs,dragStarted:Fc,putSortable:yn,activeSortable:Oe.active,originalEvent:i,oldIndex:Qa,oldDraggableIndex:fu,newIndex:cr,newDraggableIndex:Ns,hideGhostForTarget:NN,unhideGhostForTarget:MN,cloneNowHidden:function(){Vs=!0},cloneNowShown:function(){Vs=!1},dispatchSortableEvent:function(a){$n({sortable:n,name:a,originalEvent:i})}},s))};function $n(t){Hz(Mi({putSortable:yn,cloneEl:Mt,targetEl:oe,rootEl:Ot,oldIndex:Qa,oldDraggableIndex:fu,newIndex:cr,newDraggableIndex:Ns},t))}var oe,Dt,Le,Ot,Oo,tf,Mt,Vs,Qa,cr,fu,Ns,Td,yn,Wa=!1,ip=!1,sp=[],Ao,Vr,Wg,qg,ES,TS,Fc,Fa,pu,mu=!1,wd=!1,nf,kn,Gg=[],ev=!1,op=[],Lm=typeof document<"u",Sd=bN,wS=jh||ps?"cssFloat":"float",jz=Lm&&!EN&&!bN&&"draggable"in document.createElement("div"),kN=function(){if(Lm){if(ps)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),RN=function(e,n){var r=Re(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Hl(e,0,n),o=Hl(e,1,n),a=s&&Re(s),l=o&&Re(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+qt(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+qt(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[wS]==="none"||o&&r[wS]==="none"&&c+u>i)?"vertical":"horizontal"},Wz=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},qz=function(e,n){var r;return sp.some(function(i){var s=i[fr].options.emptyInsertThreshold;if(!(!s||ib(i))){var o=qt(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},ON=function(e){function n(s,o){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,u),o)(a,l,c,u);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},i=e.group;(!i||ef(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},NN=function(){!kN&&Le&&Re(Le,"display","none")},MN=function(){!kN&&Le&&Re(Le,"display","")};Lm&&!EN&&document.addEventListener("click",function(t){if(ip)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ip=!1,!1},!0);var Co=function(e){if(oe){e=e.touches?e.touches[0]:e;var n=qz(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[fr]._onDragOver(r)}}},Gz=function(e){oe&&oe.parentNode[fr]._isOutsideThisEl(e.target)};function Oe(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ls({},e),t[fr]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return RN(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Oe.supportPointer!==!1&&"PointerEvent"in window&&!hu,emptyInsertThreshold:5};Wh.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);ON(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:jz,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?at(t,"pointerdown",this._onTapStart):(at(t,"mousedown",this._onTapStart),at(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(at(t,"dragover",this),at(t,"dragenter",this)),sp.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ls(this,Uz())}Oe.prototype={constructor:Oe,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Fa=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,oe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(tj(r),!oe&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&hu&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ur(l,i.draggable,r,!1),!(l&&l.animated)&&tf!==l)){if(Qa=Ar(l),fu=Ar(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){$n({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Jn("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=Ur(c,h.trim(),r,!1),h)return $n({sortable:n,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),Jn("filter",n,{evt:e}),!0}),u)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Ur(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!oe&&r.parentNode===s){var c=qt(r);if(Ot=s,oe=r,Dt=oe.parentNode,Oo=oe.nextSibling,tf=r,Td=o.group,Oe.dragged=oe,Ao={target:oe,clientX:(n||e).clientX,clientY:(n||e).clientY},ES=Ao.clientX-c.left,TS=Ao.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,oe.style["will-change"]="all",l=function(){if(Jn("delayEnded",i,{evt:e}),Oe.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!yS&&i.nativeDraggable&&(oe.draggable=!0),i._triggerDragStart(e,n),$n({sortable:i,name:"choose",originalEvent:e}),lr(oe,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){wN(oe,u.trim(),Kg)}),at(a,"dragover",Co),at(a,"mousemove",Co),at(a,"touchmove",Co),at(a,"mouseup",i._onDrop),at(a,"touchend",i._onDrop),at(a,"touchcancel",i._onDrop),yS&&this.nativeDraggable&&(this.options.touchStartThreshold=4,oe.draggable=!0),Jn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(jh||ps))){if(Oe.eventCanceled){this._onDrop();return}at(a,"mouseup",i._disableDelayedDrag),at(a,"touchend",i._disableDelayedDrag),at(a,"touchcancel",i._disableDelayedDrag),at(a,"mousemove",i._delayedDragTouchMoveHandler),at(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&at(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){oe&&Kg(oe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;rt(e,"mouseup",this._disableDelayedDrag),rt(e,"touchend",this._disableDelayedDrag),rt(e,"touchcancel",this._disableDelayedDrag),rt(e,"mousemove",this._delayedDragTouchMoveHandler),rt(e,"touchmove",this._delayedDragTouchMoveHandler),rt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?at(document,"pointermove",this._onTouchMove):n?at(document,"touchmove",this._onTouchMove):at(document,"mousemove",this._onTouchMove):(at(oe,"dragend",this),at(Ot,"dragstart",this._onDragStart));try{document.selection?rf(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Wa=!1,Ot&&oe){Jn("dragStarted",this,{evt:n}),this.nativeDraggable&&at(document,"dragover",Gz);var r=this.options;!e&&lr(oe,r.dragClass,!1),lr(oe,r.ghostClass,!0),Oe.active=this,e&&this._appendGhost(),$n({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Vr){this._lastX=Vr.clientX,this._lastY=Vr.clientY,NN();for(var e=document.elementFromPoint(Vr.clientX,Vr.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Vr.clientX,Vr.clientY),e!==n);)n=e;if(oe.parentNode[fr]._isOutsideThisEl(e),n)do{if(n[fr]){var r=void 0;if(r=n[fr]._onDragOver({clientX:Vr.clientX,clientY:Vr.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);MN()}},_onTouchMove:function(e){if(Ao){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Le&&yl(Le,!0),a=Le&&o&&o.a,l=Le&&o&&o.d,c=Sd&&kn&&bS(kn),u=(s.clientX-Ao.clientX+i.x)/(a||1)+(c?c[0]-Gg[0]:0)/(a||1),h=(s.clientY-Ao.clientY+i.y)/(l||1)+(c?c[1]-Gg[1]:0)/(l||1);if(!Oe.active&&!Wa){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Le){o?(o.e+=u-(Wg||0),o.f+=h-(qg||0)):o={a:1,b:0,c:0,d:1,e:u,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Re(Le,"webkitTransform",d),Re(Le,"mozTransform",d),Re(Le,"msTransform",d),Re(Le,"transform",d),Wg=u,qg=h,Vr=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Le){var e=this.options.fallbackOnBody?document.body:Ot,n=qt(oe,!0,Sd,!0,e),r=this.options;if(Sd){for(kn=e;Re(kn,"position")==="static"&&Re(kn,"transform")==="none"&&kn!==document;)kn=kn.parentNode;kn!==document.body&&kn!==document.documentElement?(kn===document&&(kn=Si()),n.top+=kn.scrollTop,n.left+=kn.scrollLeft):kn=Si(),Gg=bS(kn)}Le=oe.cloneNode(!0),lr(Le,r.ghostClass,!1),lr(Le,r.fallbackClass,!0),lr(Le,r.dragClass,!0),Re(Le,"transition",""),Re(Le,"transform",""),Re(Le,"box-sizing","border-box"),Re(Le,"margin",0),Re(Le,"top",n.top),Re(Le,"left",n.left),Re(Le,"width",n.width),Re(Le,"height",n.height),Re(Le,"opacity","0.8"),Re(Le,"position",Sd?"absolute":"fixed"),Re(Le,"zIndex","100000"),Re(Le,"pointerEvents","none"),Oe.ghost=Le,e.appendChild(Le),Re(Le,"transform-origin",ES/parseInt(Le.style.width)*100+"% "+TS/parseInt(Le.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Jn("dragStart",this,{evt:e}),Oe.eventCanceled){this._onDrop();return}Jn("setupClone",this),Oe.eventCanceled||(Mt=AN(oe),Mt.removeAttribute("id"),Mt.draggable=!1,Mt.style["will-change"]="",this._hideClone(),lr(Mt,this.options.chosenClass,!1),Oe.clone=Mt),r.cloneId=rf(function(){Jn("clone",r),!Oe.eventCanceled&&(r.options.removeCloneOnHide||Ot.insertBefore(Mt,oe),r._hideClone(),$n({sortable:r,name:"clone"}))}),!n&&lr(oe,s.dragClass,!0),n?(ip=!0,r._loopId=setInterval(r._emulateDragOver,50)):(rt(document,"mouseup",r._onDrop),rt(document,"touchend",r._onDrop),rt(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,oe)),at(document,"drop",r),Re(oe,"transform","translateZ(0)")),Wa=!0,r._dragStartId=rf(r._dragStarted.bind(r,n,e)),at(document,"selectstart",r),Fc=!0,hu&&Re(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Oe.active,u=Td===l,h=a.sort,d=yn||c,f,p=this,m=!1;if(ev)return;function g(x,re){Jn(x,p,Mi({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:d,target:r,completed:_,onMove:function(Ne,$e){return Id(Ot,n,oe,i,Ne,qt(Ne),e,$e)},changed:v},re))}function y(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _(x){return g("dragOverCompleted",{insertion:x}),x&&(u?c._hideClone():c._showClone(p),p!==d&&(lr(oe,yn?yn.options.ghostClass:c.options.ghostClass,!1),lr(oe,a.ghostClass,!0)),yn!==p&&p!==Oe.active?yn=p:p===Oe.active&&yn&&(yn=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===oe&&!oe.animated||r===n&&!r.animated)&&(Fa=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(oe.parentNode[fr]._isOutsideThisEl(e.target),!x&&Co(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function v(){cr=Ar(oe),Ns=Ar(oe,a.draggable),$n({sortable:p,name:"change",toEl:n,newIndex:cr,newDraggableIndex:Ns,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Ur(r,a.draggable,n,!0),g("dragOver"),Oe.eventCanceled)return m;if(oe.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return _(!1);if(ip=!1,c&&!a.disabled&&(u?h||(o=Dt!==Ot):yn===this||(this.lastPutMode=Td.checkPull(this,c,oe,e))&&l.checkPut(this,c,oe,e))){if(f=this._getDirection(e,r)==="vertical",i=qt(oe),g("dragOverValid"),Oe.eventCanceled)return m;if(o)return Dt=Ot,y(),this._hideClone(),g("revert"),Oe.eventCanceled||(Oo?Ot.insertBefore(oe,Oo):Ot.appendChild(oe)),_(!0);var I=ib(n,a.draggable);if(!I||Qz(e,f,this)&&!I.animated){if(I===oe)return _(!1);if(I&&n===e.target&&(r=I),r&&(s=qt(r)),Id(Ot,n,oe,i,r,s,e,!!r)!==!1)return y(),I&&I.nextSibling?n.insertBefore(oe,I.nextSibling):n.appendChild(oe),Dt=n,v(),_(!0)}else if(I&&Jz(e,f,this)){var S=Hl(n,0,a,!0);if(S===oe)return _(!1);if(r=S,s=qt(r),Id(Ot,n,oe,i,r,s,e,!1)!==!1)return y(),n.insertBefore(oe,S),Dt=n,v(),_(!0)}else if(r.parentNode===n){s=qt(r);var C=0,F,N=oe.parentNode!==n,A=!Wz(oe.animated&&oe.toRect||i,r.animated&&r.toRect||s,f),V=f?"top":"left",z=vS(r,"top","top")||vS(oe,"top","top"),H=z?z.scrollTop:void 0;Fa!==r&&(F=s[V],mu=!1,wd=!A&&a.invertSwap||N),C=Xz(e,r,s,f,A?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,wd,Fa===r);var Z;if(C!==0){var M=Ar(oe);do M-=C,Z=Dt.children[M];while(Z&&(Re(Z,"display")==="none"||Z===Le))}if(C===0||Z===r)return _(!1);Fa=r,pu=C;var D=r.nextElementSibling,k=!1;k=C===1;var P=Id(Ot,n,oe,i,r,s,e,k);if(P!==!1)return(P===1||P===-1)&&(k=P===1),ev=!0,setTimeout(Yz,30),y(),k&&!D?n.appendChild(oe):r.parentNode.insertBefore(oe,k?D:r),z&&IN(z,0,H-z.scrollTop),Dt=oe.parentNode,F!==void 0&&!wd&&(nf=Math.abs(F-qt(r)[V])),v(),_(!0)}if(n.contains(oe))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){rt(document,"mousemove",this._onTouchMove),rt(document,"touchmove",this._onTouchMove),rt(document,"pointermove",this._onTouchMove),rt(document,"dragover",Co),rt(document,"mousemove",Co),rt(document,"touchmove",Co)},_offUpEvents:function(){var e=this.el.ownerDocument;rt(e,"mouseup",this._onDrop),rt(e,"touchend",this._onDrop),rt(e,"pointerup",this._onDrop),rt(e,"touchcancel",this._onDrop),rt(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(cr=Ar(oe),Ns=Ar(oe,r.draggable),Jn("drop",this,{evt:e}),Dt=oe&&oe.parentNode,cr=Ar(oe),Ns=Ar(oe,r.draggable),Oe.eventCanceled){this._nulling();return}Wa=!1,wd=!1,mu=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),tv(this.cloneId),tv(this._dragStartId),this.nativeDraggable&&(rt(document,"drop",this),rt(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),hu&&Re(document.body,"user-select",""),Re(oe,"transform",""),e&&(Fc&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Le&&Le.parentNode&&Le.parentNode.removeChild(Le),(Ot===Dt||yn&&yn.lastPutMode!=="clone")&&Mt&&Mt.parentNode&&Mt.parentNode.removeChild(Mt),oe&&(this.nativeDraggable&&rt(oe,"dragend",this),Kg(oe),oe.style["will-change"]="",Fc&&!Wa&&lr(oe,yn?yn.options.ghostClass:this.options.ghostClass,!1),lr(oe,this.options.chosenClass,!1),$n({sortable:this,name:"unchoose",toEl:Dt,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ot!==Dt?(cr>=0&&($n({rootEl:Dt,name:"add",toEl:Dt,fromEl:Ot,originalEvent:e}),$n({sortable:this,name:"remove",toEl:Dt,originalEvent:e}),$n({rootEl:Dt,name:"sort",toEl:Dt,fromEl:Ot,originalEvent:e}),$n({sortable:this,name:"sort",toEl:Dt,originalEvent:e})),yn&&yn.save()):cr!==Qa&&cr>=0&&($n({sortable:this,name:"update",toEl:Dt,originalEvent:e}),$n({sortable:this,name:"sort",toEl:Dt,originalEvent:e})),Oe.active&&((cr==null||cr===-1)&&(cr=Qa,Ns=fu),$n({sortable:this,name:"end",toEl:Dt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Jn("nulling",this),Ot=oe=Dt=Le=Oo=Mt=tf=Vs=Ao=Vr=Fc=cr=Ns=Qa=fu=Fa=pu=yn=Td=Oe.dragged=Oe.ghost=Oe.clone=Oe.active=null,op.forEach(function(e){e.checked=!0}),op.length=Wg=qg=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":oe&&(this._onDragOver(e),Kz(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Ur(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||ej(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Ur(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Ur(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Wh.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&ON(r)},destroy:function(){Jn("destroy",this);var e=this.el;e[fr]=null,rt(e,"mousedown",this._onTapStart),rt(e,"touchstart",this._onTapStart),rt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(rt(e,"dragover",this),rt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sp.splice(sp.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Vs){if(Jn("hideClone",this),Oe.eventCanceled)return;Re(Mt,"display","none"),this.options.removeCloneOnHide&&Mt.parentNode&&Mt.parentNode.removeChild(Mt),Vs=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Vs){if(Jn("showClone",this),Oe.eventCanceled)return;oe.parentNode==Ot&&!this.options.group.revertClone?Ot.insertBefore(Mt,oe):Oo?Ot.insertBefore(Mt,Oo):Ot.appendChild(Mt),this.options.group.revertClone&&this.animate(oe,Mt),Re(Mt,"display",""),Vs=!1}}};function Kz(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Id(t,e,n,r,i,s,o,a){var l,c=t[fr],u=c.options.onMove,h;return window.CustomEvent&&!ps&&!jh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||qt(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),u&&(h=u.call(c,l,o)),h}function Kg(t){t.draggable=!1}function Yz(){ev=!1}function Jz(t,e,n){var r=qt(Hl(n.el,0,n.options,!0)),i=CN(n.el,n.options,Le),s=10;return e?t.clientX<i.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-s||t.clientY<r.bottom&&t.clientX<r.left}function Qz(t,e,n){var r=qt(ib(n.el,n.options.draggable)),i=CN(n.el,n.options,Le),s=10;return e?t.clientX>i.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+s||t.clientX>r.right&&t.clientY>r.top}function Xz(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,h=r?n.bottom:n.right,d=!1;if(!o){if(a&&nf<c*i){if(!mu&&(pu===1?l>u+c*s/2:l<h-c*s/2)&&(mu=!0),mu)d=!0;else if(pu===1?l<u+nf:l>h-nf)return-pu}else if(l>u+c*(1-i)/2&&l<h-c*(1-i)/2)return Zz(e)}return d=d||o,d&&(l<u+c*s/2||l>h-c*s/2)?l>u+c/2?1:-1:0}function Zz(t){return Ar(oe)<Ar(t)?1:-1}function ej(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function tj(t){op.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&op.push(r)}}function rf(t){return setTimeout(t,0)}function tv(t){return clearTimeout(t)}Lm&&at(document,"touchmove",function(t){(Oe.active||Wa)&&t.cancelable&&t.preventDefault()});Oe.utils={on:at,off:rt,css:Re,find:wN,is:function(e,n){return!!Ur(e,n,e,!1)},extend:Vz,throttle:SN,closest:Ur,toggleClass:lr,clone:AN,index:Ar,nextTick:rf,cancelNextTick:tv,detectDirection:RN,getChild:Hl};Oe.get=function(t){return t[fr]};Oe.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Oe.utils=Mi(Mi({},Oe.utils),r.utils)),Wh.mount(r)})};Oe.create=function(t,e){return new Oe(t,e)};Oe.version=xz;var jt=[],Uc,nv,rv=!1,Yg,Jg,ap,Bc;function nj(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?at(document,"dragover",this._handleAutoScroll):this.options.supportPointer?at(document,"pointermove",this._handleFallbackAutoScroll):r.touches?at(document,"touchmove",this._handleFallbackAutoScroll):at(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?rt(document,"dragover",this._handleAutoScroll):(rt(document,"pointermove",this._handleFallbackAutoScroll),rt(document,"touchmove",this._handleFallbackAutoScroll),rt(document,"mousemove",this._handleFallbackAutoScroll)),SS(),sf(),Fz()},nulling:function(){ap=nv=Uc=rv=Bc=Yg=Jg=null,jt.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(ap=n,r||this.options.forceAutoScrollFallback||jh||ps||hu){Qg(n,this.options,a,r);var l=Bs(a,!0);rv&&(!Bc||s!==Yg||o!==Jg)&&(Bc&&SS(),Bc=setInterval(function(){var c=Bs(document.elementFromPoint(s,o),!0);c!==l&&(l=c,sf()),Qg(n,i.options,c,r)},10),Yg=s,Jg=o)}else{if(!this.options.bubbleScroll||Bs(a,!0)===Si()){sf();return}Qg(n,this.options,Bs(a,!1),!1)}}},ls(t,{pluginName:"scroll",initializeByDefault:!0})}function sf(){jt.forEach(function(t){clearInterval(t.pid)}),jt=[]}function SS(){clearInterval(Bc)}var Qg=SN(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Si(),c=!1,u;nv!==n&&(nv=n,sf(),Uc=e.scroll,u=e.scrollFn,Uc===!0&&(Uc=Bs(n,!0)));var h=0,d=Uc;do{var f=d,p=qt(f),m=p.top,g=p.bottom,y=p.left,_=p.right,v=p.width,I=p.height,S=void 0,C=void 0,F=f.scrollWidth,N=f.scrollHeight,A=Re(f),V=f.scrollLeft,z=f.scrollTop;f===l?(S=v<F&&(A.overflowX==="auto"||A.overflowX==="scroll"||A.overflowX==="visible"),C=I<N&&(A.overflowY==="auto"||A.overflowY==="scroll"||A.overflowY==="visible")):(S=v<F&&(A.overflowX==="auto"||A.overflowX==="scroll"),C=I<N&&(A.overflowY==="auto"||A.overflowY==="scroll"));var H=S&&(Math.abs(_-i)<=o&&V+v<F)-(Math.abs(y-i)<=o&&!!V),Z=C&&(Math.abs(g-s)<=o&&z+I<N)-(Math.abs(m-s)<=o&&!!z);if(!jt[h])for(var M=0;M<=h;M++)jt[M]||(jt[M]={});(jt[h].vx!=H||jt[h].vy!=Z||jt[h].el!==f)&&(jt[h].el=f,jt[h].vx=H,jt[h].vy=Z,clearInterval(jt[h].pid),(H!=0||Z!=0)&&(c=!0,jt[h].pid=setInterval((function(){r&&this.layer===0&&Oe.active._onTouchMove(ap);var D=jt[this.layer].vy?jt[this.layer].vy*a:0,k=jt[this.layer].vx?jt[this.layer].vx*a:0;typeof u=="function"&&u.call(Oe.dragged.parentNode[fr],k,D,t,ap,jt[this.layer].el)!=="continue"||IN(jt[this.layer].el,k,D)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=Bs(d,!1)));rv=c}},30),PN=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function sb(){}sb.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Hl(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:PN};ls(sb,{pluginName:"revertOnSpill"});function ob(){}ob.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:PN};ls(ob,{pluginName:"removeOnSpill"});Oe.mount(new nj);Oe.mount(ob,sb);function rj(t,e,n={}){let r;const{document:i=fN,...s}=n,o={onUpdate:u=>{xN(e,u.oldIndex,u.newIndex)}},a=()=>{const u=typeof t=="string"?i==null?void 0:i.querySelector(t):dN(t);!u||r!==void 0||(r=new Oe(u,{...o,...s}))},l=()=>{r==null||r.destroy(),r=void 0},c=(u,h)=>{if(h!==void 0)r==null||r.option(u,h);else return r==null?void 0:r.option(u)};return xH(a),cN(l),{stop:l,start:a,option:c}}function xN(t,e,n){const r=Pt(t),i=r?[...Qu(t)]:Qu(t);if(n>=0&&n<i.length){const s=i.splice(e,1)[0];Sa(()=>{i.splice(n,0,s),r&&(t.value=i)})}}function ij(){let t=["Bal","Bar","Dal","Dar","Den","Dok","Jar","Jik","Lar","Rak","Ral","Ril","Sig","Tal","Thor","Ton"],e=["dar","dor","dur","kal","kar","kir","kur","lah","lak","lim","lor","rak","tin","ton","tor","vald"],n=["Rockcrusher","Spinewielder","Skullbearer","Drpare"];return t[Math.floor(Math.random()*t.length)]+e[Math.floor(Math.random()*e.length)]+" "+n[Math.floor(Math.random()*n.length)]}function iv(t=4){let e=t,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}const sj={class:"header"},oj={class:"body"},aj={class:"controls"},lj=Ut({__name:"Modal.vapor",setup(t,{expose:e}){const n=ie();return e({showModal:()=>{n.value&&n.value.showModal()},closeModal:()=>{n.value&&n.value.close()}}),(s,o)=>(O(),L("dialog",{ref_key:"dialog",ref:n,class:"danger"},[b("div",sj,[rn(s.$slots,"header")]),b("div",oj,[rn(s.$slots,"body")]),b("div",aj,[rn(s.$slots,"controls")])],512))}});function _n(t){this.content=t}_n.prototype={constructor:_n,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new _n(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new _n(n)},addToStart:function(t,e){return new _n([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new _n(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new _n(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=_n.from(t),t.size?new _n(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=_n.from(t),t.size?new _n(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=_n.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};_n.from=function(t){if(t instanceof _n)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new _n(e)};function DN(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=DN(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function LN(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=LN(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class J{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new J(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new J(r,i)}cutByIndex(e,n){return e==n?J.empty:e==0&&n==this.content.length?this:new J(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new J(i,s)}addToStart(e){return new J([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new J(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return DN(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return LN(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Ad(0,e);if(e==this.size)return Ad(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?Ad(r+1,o):Ad(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return J.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new J(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return J.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new J(n||e,r)}static from(e){if(!e)return J.empty;if(e instanceof J)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new J([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}J.empty=new J([],0);const Xg={index:0,offset:0};function Ad(t,e){return Xg.index=t,Xg.offset=e,Xg}function lp(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!lp(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!lp(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let mt=class sv{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&lp(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return sv.none;if(e instanceof sv)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};mt.none=[];class cp extends Error{}class pe{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=FN(this.content,e+this.openStart,n);return r&&new pe(r,this.openStart,this.openEnd)}removeBetween(e,n){return new pe(VN(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return pe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new pe(J.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new pe(e,r,i)}}pe.empty=new pe(J.empty,0,0);function VN(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(VN(s.content,e-i-1,n-i-1)))}function FN(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=FN(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function cj(t,e,n){if(n.openStart>t.depth)throw new cp("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new cp("Inconsistent open depths");return UN(t,e,n,0)}function UN(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=UN(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return ta(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=uj(n,t);return ta(s,$N(t,o,a,e,r))}else return ta(s,up(t,e,r))}function BN(t,e){if(!e.type.compatibleContent(t.type))throw new cp("Cannot join "+e.type.name+" onto "+t.type.name)}function ov(t,e,n){let r=t.node(n);return BN(r,e.node(n)),r}function ea(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function gu(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(ea(t.nodeAfter,r),s++));for(let a=s;a<o;a++)ea(i.child(a),r);e&&e.depth==n&&e.textOffset&&ea(e.nodeBefore,r)}function ta(t,e){return t.type.checkContent(e),t.copy(e)}function $N(t,e,n,r,i){let s=t.depth>i&&ov(t,e,i+1),o=r.depth>i&&ov(n,r,i+1),a=[];return gu(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(BN(s,o),ea(ta(s,$N(t,e,n,r,i+1)),a)):(s&&ea(ta(s,up(t,e,i+1)),a),gu(e,n,i,a),o&&ea(ta(o,up(n,r,i+1)),a)),gu(r,null,i,a),new J(a)}function up(t,e,n){let r=[];if(gu(null,t,n,r),t.depth>n){let i=ov(t,e,n+1);ea(ta(i,up(t,e,n+1)),r)}return gu(e,null,n,r),new J(r)}function uj(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(J.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Xu{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return mt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new hp(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Xu(n,r,s)}static resolveCached(e,n){for(let i=0;i<Zg.length;i++){let s=Zg[i];if(s.pos==n&&s.doc==e)return s}let r=Zg[ey]=Xu.resolve(e,n);return ey=(ey+1)%hj,r}}let Zg=[],ey=0,hj=12;class hp{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const dj=Object.create(null);let na=class av{constructor(e,n,r,i=mt.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||J.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&lp(this.attrs,n||e.defaultAttrs||dj)&&mt.sameSet(this.marks,r||mt.none)}copy(e=null){return e==this.content?this:new av(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new av(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return pe.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new pe(c,i.depth-o,s.depth-o)}replace(e,n,r){return cj(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Xu.resolveCached(this,e)}resolveNoCache(e){return Xu.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),HN(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=J.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=mt.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!mt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=J.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};na.prototype.text=void 0;class dp extends na{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):HN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new dp(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new dp(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function HN(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ga{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new fj(e,n);if(r.next==null)return ga.empty;let i=zN(r);r.next&&r.err("Unexpected trailing text");let s=bj(vj(i));return Ej(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return J.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let d=s(h,a.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ga.empty=new ga(!0);class fj{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function zN(t){let e=[];do e.push(pj(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function pj(t){let e=[];do e.push(mj(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function mj(t){let e=_j(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=gj(t,e);else break;return e}function IS(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function gj(t,e){let n=IS(t),r=n;return t.eat(",")&&(t.next!="}"?r=IS(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function yj(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function _j(t){if(t.eat("(")){let e=zN(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=yj(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function vj(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function jN(t,e){return e-t}function AS(t,e){let n=[];return r(e),n.sort(jN);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function bj(t){let e=Object.create(null);return n(AS(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);AS(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new ga(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(jN);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function Ej(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function WN(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function qN(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function GN(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new Tj(t[n]);return e}let CS=class KN{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=GN(r.attrs),this.defaultAttrs=WN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ga.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:qN(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new na(this,this.computeAttrs(e),J.from(n),mt.setFrom(r))}createChecked(e=null,n,r){return n=J.from(n),this.checkContent(n),new na(this,this.computeAttrs(e),n,mt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=J.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(J.empty,!0);return s?new na(this,e,n.append(s),mt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:mt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new KN(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class Tj{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Vm{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=GN(i.attrs),this.excluded=null;let s=WN(this.attrs);this.instance=s?new mt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new mt(this,qN(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Vm(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class wj{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=_n.from(e.nodes),n.marks=_n.from(e.marks||{}),this.nodes=CS.compile(this.spec.nodes,this),this.marks=Vm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=ga.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?kS(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:kS(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof CS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new dp(r,r.defaultAttrs,e,mt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return na.fromJSON(this,e)}markFromJSON(e){return mt.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function kS(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Sj(t){return t.tag!=null}function Ij(t){return t.style!=null}class zl{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{Sj(r)?this.tags.push(r):Ij(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new OS(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new OS(this,n,!0);return r.addAll(e,n.from,n.to),pe.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(kj(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=NS(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=NS(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new zl(e,zl.schemaRules(e)))}}const YN={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Aj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},JN={ol:!0,ul:!0},fp=1,pp=2,yu=4;function RS(t,e,n){return e!=null?(e?fp:0)|(e==="full"?pp:0):t&&t.whitespace=="pre"?fp|pp:n&~yu}class Cd{constructor(e,n,r,i,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=mt.none,this.stashMarks=[],this.match=o||(a&yu?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(J.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&fp)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=J.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(J.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):Oj(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!YN.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class OS{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=RS(null,n.preserveWhitespace,0)|(r?yu:0);i?s=new Cd(i.type,i.attrs,mt.none,mt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Cd(null,null,mt.none,mt.none,!0,null,o):s=new Cd(e.schema.topNodeType,null,mt.none,mt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(Rj(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&pp||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&fp)r.options&pp?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;JN.hasOwnProperty(r)&&this.parser.normalizeLists&&Cj(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:Aj.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(YN.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=mt.none,r=mt.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=RS(e,i,s.options);s.options&yu&&s.content.length==0&&(o|=yu),this.nodes.push(new Cd(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=Nj(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function Cj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&JN.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function kj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Rj(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function NS(t){let e={};for(let n in t)e[n]=t[n];return e}function Oj(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function Nj(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class mi{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=ty(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=mi.renderSpec(ty(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&mi.renderSpec(ty(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let h=u.indexOf(" ");h>0?a.setAttributeNS(u.slice(0,h),u.slice(h+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let h=n[u];if(h===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:f}=mi.renderSpec(e,h,r);if(a.appendChild(d),f){if(o)throw new RangeError("Multiple content holes");o=f}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new mi(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=MS(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return MS(e.marks)}}function MS(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ty(t){return t.document||window.document}const QN=65535,XN=Math.pow(2,16);function Mj(t,e){return t+e*XN}function PS(t){return t&QN}function Pj(t){return(t-(t&QN))/XN}const ZN=1,eM=2,of=4,tM=8;class lv{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&tM)>0}get deletedBefore(){return(this.delInfo&(ZN|of))>0}get deletedAfter(){return(this.delInfo&(eM|of))>0}get deletedAcross(){return(this.delInfo&of)>0}}class pr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&pr.empty)return pr.empty}recover(e){let n=0,r=PS(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Pj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(e<=h){let d=c?e==l?-1:e==h?1:n:n,f=l+i+(d<0?0:u);if(r)return f;let p=e==(n<0?l:h)?null:Mj(a/3,e-l),m=e==l?eM:e==h?ZN:of;return(n<0?e!=l:e!=h)&&(m|=tM),new lv(f,m,p)}i+=u-c}return r?e+i:new lv(e+i,0,null)}touches(e,n){let r=0,i=PS(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new pr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?pr.empty:new pr(e<0?[0,-e,0]:[0,0,e])}}pr.empty=new pr([]);class _l{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new _l(this.maps,this.mirror,e,n)}copy(){return new _l(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new _l;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new lv(e,i,null)}}const ny=Object.create(null);class Un{getMap(){return pr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ny[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in ny)throw new RangeError("Duplicate use of step JSON ID "+e);return ny[e]=n,n.prototype.jsonID=e,n}}class Yt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Yt(e,null)}static fail(e){return new Yt(null,e)}static fromReplace(e,n,r,i){try{return Yt.ok(e.replace(n,r,i))}catch(s){if(s instanceof cp)return Yt.fail(s.message);throw s}}}function ab(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(ab(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return J.fromArray(r)}class $s extends Un{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new pe(ab(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Yt.fromReplace(e,this.from,this.to,s)}invert(){return new gi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new $s(n.pos,r.pos,this.mark)}merge(e){return e instanceof $s&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new $s(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new $s(n.from,n.to,e.markFromJSON(n.mark))}}Un.jsonID("addMark",$s);class gi extends Un{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new pe(ab(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Yt.fromReplace(e,this.from,this.to,r)}invert(){return new $s(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new gi(n.pos,r.pos,this.mark)}merge(e){return e instanceof gi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new gi(n.from,n.to,e.markFromJSON(n.mark))}}Un.jsonID("removeMark",gi);class Hs extends Un{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Yt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Yt.fromReplace(e,this.pos,this.pos+1,new pe(J.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Hs(this.pos,n.marks[i]);return new Hs(this.pos,this.mark)}}return new jl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Hs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Hs(n.pos,e.markFromJSON(n.mark))}}Un.jsonID("addNodeMark",Hs);class jl extends Un{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Yt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Yt.fromReplace(e,this.pos,this.pos+1,new pe(J.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Hs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new jl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new jl(n.pos,e.markFromJSON(n.mark))}}Un.jsonID("removeNodeMark",jl);class an extends Un{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&cv(e,this.from,this.to)?Yt.fail("Structure replace would overwrite content"):Yt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new pr([this.from,this.to-this.from,this.slice.size])}invert(e){return new an(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new an(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof an)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?pe.empty:new pe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new an(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?pe.empty:new pe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new an(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new an(n.from,n.to,pe.fromJSON(e,n.slice),!!n.structure)}}Un.jsonID("replace",an);class un extends Un{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(cv(e,this.from,this.gapFrom)||cv(e,this.gapTo,this.to)))return Yt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Yt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Yt.fromReplace(e,this.from,this.to,r):Yt.fail("Content does not fit in gap")}getMap(){return new pr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new un(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new un(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new un(n.from,n.to,n.gapFrom,n.gapTo,pe.fromJSON(e,n.slice),n.insert,!!n.structure)}}Un.jsonID("replaceAround",un);function cv(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function xj(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[m])?o.to=f:i.push(o=new gi(d,f,h[m])));a&&a.to==d?a.to=f:s.push(a=new $s(d,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Dj(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Vm){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let h=l[u],d;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&h.eq(i[f].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new gi(o.from,o.to,o.style)))}function Lj(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new an(o,c,pe.empty));else{r=u;for(let h=0;h<l.marks.length;h++)n.allowsMarkType(l.marks[h].type)||t.step(new gi(o,c,l.marks[h]));if(l.isText&&!n.spec.code){let h,d=/\r?\n|\r/g,f;for(;h=d.exec(l.text);)f||(f=new pe(J.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new an(o+h.index,o+h.index+h[0].length,f))}}o=c}if(!r.validEnd){let a=r.fillBefore(J.empty,!0);t.replace(o,o,new pe(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function Vj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function pc(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!Vj(i,s,o))break}return null}function Fj(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=J.empty,h=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=J.from(r.node(p).copy(u)),h++):l--;let d=J.empty,f=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=J.from(i.node(p).copy(d)),f++):c++;t.step(new un(l,c,o,a,new pe(u.append(d),h,f),u.size-h,!0))}function lb(t,e,n=null,r=t){let i=Uj(t,e),s=i&&Bj(r,e);return s?i.map(xS).concat({type:e,attrs:n}).concat(s.map(xS)):null}function xS(t){return{type:t,attrs:null}}function Uj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function Bj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function $j(t,e,n){let r=J.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=J.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new un(i,s,i,s,new pe(r,0,0),n.length,!0))}function Hj(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&zj(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return t.step(new un(c,u,c+1,u-1,new pe(J.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function zj(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function jj(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new un(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new pe(J.from(o),0,0),1,!0))}function vl(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let h=i.node(c),d=i.index(c);if(h.type.spec.isolating)return!1;let f=h.content.cutByIndex(d,h.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||h;if(!h.canReplace(d+1,h.childCount)||!m.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function Wj(t,e,n=1,r){let i=t.doc.resolve(e),s=J.empty,o=J.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=J.from(i.node(a).copy(s));let u=r&&r[c];o=J.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new an(e,e,new pe(s.append(o),n,n),!0))}function _o(t,e){let n=t.resolve(e),r=n.index();return nM(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function nM(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function Fm(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&nM(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function qj(t,e,n){let r=new an(e-n,e+n,pe.empty,!0);t.step(r)}function Gj(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function rM(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Um(t,e,n=e,r=pe.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return iM(i,s,r)?new an(e,n,r):new Kj(i,s,r).fit()}function iM(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Kj{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=J.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=J.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new pe(s,o,a);return e>-1?new un(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new an(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=ry(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(n==1&&(o?c.matchType(o.type)||(h=c.fillBefore(J.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:h};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ry(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new pe(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ry(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new pe($c(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new pe($c(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:h,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));h=h.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=h.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(h=g,u.push(sM(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Hc(this.placed,n,J.from(u)),this.frontier[n].match=h,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<f;m++){let y=g.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),g=y.content}this.unplaced=p?e==0?pe.empty:new pe($c(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new pe($c(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!iy(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=iy(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=iy(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Hc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Hc(this.placed,this.depth,J.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(J.empty,!0);n.childCount&&(this.placed=Hc(this.placed,this.frontier.length,n))}}function $c(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy($c(t.firstChild.content,e-1,n)))}function Hc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Hc(t.lastChild.content,e-1,n)))}function ry(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function sM(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,sM(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(J.empty,!0)))),t.copy(r)}function iy(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Yj(n,s.content,o)?a:null}function Yj(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Jj(t){return t.spec.defining||t.spec.definingForContent}function Qj(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(iM(i,s,r))return t.step(new an(e,n,r));let o=aM(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let d=i.depth,f=i.pos-1;d>0;d--,f--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:i.before(d)==f&&o.splice(1,0,-d)}let l=o.indexOf(a),c=[],u=r.openStart;for(let d=r.content,f=0;;f++){let p=d.firstChild;if(c.push(p),f==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let f=c[d],p=Jj(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=d;else if(p||!f.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let f=(d+u+1)%(r.openStart+1),p=c[f];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],y=!0;g<0&&(y=!1,g=-g);let _=i.node(g-1),v=i.index(g-1);if(_.canReplaceWith(v,v,p.type,p.marks))return t.replace(i.before(g),y?s.after(g):n,new pe(oM(r.content,0,r.openStart,f),f,r.openEnd))}}let h=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>h));d--){let f=o[d];f<0||(e=i.before(f),n=s.after(f))}}function oM(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(oM(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(J.empty,!0))}return t}function Xj(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Gj(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new pe(J.from(r),0,0))}function Zj(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=aM(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function aM(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class bl extends Un{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Yt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Yt.fromReplace(e,this.pos,this.pos+1,new pe(J.from(i),0,n.isLeaf?0:1))}getMap(){return pr.empty}invert(e){return new bl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new bl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new bl(n.pos,n.attr,n.value)}}Un.jsonID("attr",bl);class Zu extends Un{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Yt.ok(r)}getMap(){return pr.empty}invert(e){return new Zu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Zu(n.attr,n.value)}}Un.jsonID("docAttr",Zu);let Wl=class extends Error{};Wl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Wl.prototype=Object.create(Error.prototype);Wl.prototype.constructor=Wl;Wl.prototype.name="TransformError";class eW{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new _l}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Wl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=pe.empty){let i=Um(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new pe(J.from(r),0,0))}delete(e,n){return this.replace(e,n,pe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Qj(this,e,n,r),this}replaceRangeWith(e,n,r){return Xj(this,e,n,r),this}deleteRange(e,n){return Zj(this,e,n),this}lift(e,n){return Fj(this,e,n),this}join(e,n=1){return qj(this,e,n),this}wrap(e,n){return $j(this,e,n),this}setBlockType(e,n=e,r,i=null){return Hj(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return jj(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new bl(e,n,r)),this}setDocAttribute(e,n){return this.step(new Zu(e,n)),this}addNodeMark(e,n){return this.step(new Hs(e,n)),this}removeNodeMark(e,n){if(!(n instanceof mt)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new jl(e,n)),this}split(e,n=1,r){return Wj(this,e,n,r),this}addMark(e,n,r){return xj(this,e,n,r),this}removeMark(e,n,r){return Dj(this,e,n,r),this}clearIncompatible(e,n,r){return Lj(this,e,n,r),this}}const sy=Object.create(null);class ze{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new tW(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=pe.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?pe.empty:n),a==0&&VS(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),VS(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Ue(e):qa(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?qa(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):qa(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Yr(e.node(0))}static atStart(e){return qa(e,e,0,0,1)||new Yr(e)}static atEnd(e){return qa(e,e,e.content.size,e.childCount,-1)||new Yr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=sy[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in sy)throw new RangeError("Duplicate use of selection JSON ID "+e);return sy[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ue.between(this.$anchor,this.$head).getBookmark()}}ze.prototype.visible=!0;class tW{constructor(e,n){this.$from=e,this.$to=n}}let DS=!1;function LS(t){!DS&&!t.parent.inlineContent&&(DS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ue extends ze{constructor(e,n=e){LS(e),LS(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ze.near(r);let i=e.resolve(n.map(this.anchor));return new Ue(i.parent.inlineContent?i:r,r)}replace(e,n=pe.empty){if(super.replace(e,n),n==pe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ue&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Bm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ue(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=ze.findFrom(n,r,!0)||ze.findFrom(n,-r,!0);if(s)n=s.$head;else return ze.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(ze.findFrom(e,-r,!0)||ze.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ue(e,n)}}ze.jsonID("text",Ue);class Bm{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Bm(e.map(this.anchor),e.map(this.head))}resolve(e){return Ue.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ce extends ze{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?ze.near(s):new Ce(s)}content(){return new pe(J.from(this.node),0,0)}eq(e){return e instanceof Ce&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new cb(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ce(e.resolve(n.anchor))}static create(e,n){return new Ce(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ce.prototype.visible=!1;ze.jsonID("node",Ce);class cb{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Bm(r,r):new cb(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ce.isSelectable(r)?new Ce(n):ze.near(n)}}class Yr extends ze{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=pe.empty){if(n==pe.empty){e.delete(0,e.doc.content.size);let r=ze.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Yr(e)}map(e){return new Yr(e)}eq(e){return e instanceof Yr}getBookmark(){return nW}}ze.jsonID("all",Yr);const nW={map(){return this},resolve(t){return new Yr(t)}};function qa(t,e,n,r,i,s=!1){if(e.inlineContent)return Ue.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Ce.isSelectable(a))return Ce.create(t,n-(i<0?a.nodeSize:0))}else{let l=qa(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function VS(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof an||i instanceof un))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(ze.near(t.doc.resolve(o),n))}const FS=1,kd=2,US=4;class rW extends eW{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|FS)&~kd,this.storedMarks=null,this}get selectionSet(){return(this.updated&FS)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=kd,this}ensureMarks(e){return mt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&kd)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~kd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||mt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(ze.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=US,this}get scrolledIntoView(){return(this.updated&US)>0}}function BS(t,e){return!e||!t?t:t.bind(e)}class zc{constructor(e,n,r){this.name=e,this.init=BS(n.init,r),this.apply=BS(n.apply,r)}}const iW=[new zc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new zc("selection",{init(t,e){return t.selection||ze.atStart(e.doc)},apply(t){return t.selection}}),new zc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new zc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class oy{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=iW.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new zc(r.key,r.spec.state,r))})}}class Xa{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Xa(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new rW(this)}static create(e){let n=new oy(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Xa(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new oy(this.schema,e.plugins),r=n.fields,i=new Xa(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new oy(e.schema,e.plugins),s=new Xa(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=na.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=ze.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function lM(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=lM(i,e,{})),n[r]=i}return n}class Tr{constructor(e){this.spec=e,this.props={},e.props&&lM(e.props,this,this.props),this.key=e.key?e.key.key:cM("plugin")}getState(e){return e[this.key]}}const ay=Object.create(null);function cM(t){return t in ay?t+"$"+ ++ay[t]:(ay[t]=0,t+"$")}class ms{constructor(e="key"){this.key=cM(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const En=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},eh=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let uv=null;const Hi=function(t,e,n){let r=uv||(uv=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},sW=function(){uv=null},ya=function(t,e,n,r){return n&&($S(t,e,n,r,-1)||$S(t,e,n,r,1))},oW=/^(img|br|input|textarea|hr)$/i;function $S(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:ci(t))){let s=t.parentNode;if(!s||s.nodeType!=1||qh(t)||oW.test(t.nodeName)||t.contentEditable=="false")return!1;e=En(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?ci(t):0}else return!1}}function ci(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function aW(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ci(t)}else if(t.parentNode&&!qh(t))e=En(t),t=t.parentNode;else return null}}function lW(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!qh(t))e=En(t)+1,t=t.parentNode;else return null}}function cW(t,e,n){for(let r=e==0,i=e==ci(t);r||i;){if(t==n)return!0;let s=En(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==ci(t)}}function qh(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const $m=function(t){return t.focusNode&&ya(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function xo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function uW(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function hW(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const Pi=typeof navigator<"u"?navigator:null,HS=typeof document<"u"?document:null,vo=Pi&&Pi.userAgent||"",hv=/Edge\/(\d+)/.exec(vo),uM=/MSIE \d/.exec(vo),dv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(vo),nr=!!(uM||dv||hv),Js=uM?document.documentMode:dv?+dv[1]:hv?+hv[1]:0,ti=!nr&&/gecko\/(\d+)/i.test(vo);ti&&+(/Firefox\/(\d+)/.exec(vo)||[0,0])[1];const fv=!nr&&/Chrome\/(\d+)/.exec(vo),zn=!!fv,dW=fv?+fv[1]:0,Gn=!nr&&!!Pi&&/Apple Computer/.test(Pi.vendor),ql=Gn&&(/Mobile\/\w+/.test(vo)||!!Pi&&Pi.maxTouchPoints>2),Cr=ql||(Pi?/Mac/.test(Pi.platform):!1),fW=Pi?/Win/.test(Pi.platform):!1,$r=/Android \d/.test(vo),Gh=!!HS&&"webkitFontSmoothing"in HS.documentElement.style,pW=Gh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function mW(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Bi(t,e){return typeof t=="number"?t:t[e]}function gW(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function zS(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=eh(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?mW(s):gW(a),u=0,h=0;if(e.top<c.top+Bi(r,"top")?h=-(c.top-e.top+Bi(i,"top")):e.bottom>c.bottom-Bi(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+Bi(i,"top")-c.top:e.bottom-c.bottom+Bi(i,"bottom")),e.left<c.left+Bi(r,"left")?u=-(c.left-e.left+Bi(i,"left")):e.right>c.right-Bi(r,"right")&&(u=e.right-c.right+Bi(i,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let d=a.scrollLeft,f=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let p=a.scrollLeft-d,m=a.scrollTop-f;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function yW(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:hM(t.dom)}}function hM(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=eh(r));return e}function _W({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;dM(n,r==0?0:r-e)}function dM(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ua=null;function vW(t){if(t.setActive)return t.setActive();if(Ua)return t.focus(Ua);let e=hM(t);t.focus(Ua==null?{get preventScroll(){return Ua={preventScroll:!0},!0}}:void 0),Ua||(Ua=!1,dM(e,0))}function fM(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Hi(u).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?bW(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:fM(n,i)}function bW(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Is(r,1);if(s.top!=s.bottom&&ub(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function ub(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function EW(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function TW(t,e,n){let{node:r,offset:i}=fM(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function wW(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function pM(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(ub(e,c))return pM(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function SW(t,e){let n=t.dom.ownerDocument,r,i=0,s=hW(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!ub(e,c)||(o=pM(t.dom,e,c),!o))return null}if(Gn)for(let c=o;r&&c;c=eh(c))c.draggable&&(r=void 0);if(o=EW(o,e),r){if(ti&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;Gh&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=wW(t,r,i,e))}a==null&&(a=TW(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function jS(t){return t.top<t.bottom||t.left<t.right}function Is(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(jS(r))return r}return Array.prototype.find.call(n,jS)||t.getBoundingClientRect()}const IW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function mM(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Gh||ti;if(r.nodeType==3)if(o&&(IW.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Is(Hi(r,i,i),n);if(ti&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Is(Hi(r,i-1,i-1),-1);if(c.top==l.top){let u=Is(Hi(r,i,i+1),-1);if(u.top!=l.top)return kc(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,kc(Is(Hi(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ci(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return ly(l.getBoundingClientRect(),!1)}if(s==null&&i<ci(r)){let l=r.childNodes[i];if(l.nodeType==1)return ly(l.getBoundingClientRect(),!0)}return ly(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ci(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Hi(l,ci(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return kc(Is(c,1),!1)}if(s==null&&i<ci(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Hi(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return kc(Is(c,-1),!0)}return kc(Is(r.nodeType==3?Hi(r):r,-n),n>=0)}function kc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function ly(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function gM(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function AW(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return gM(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=mM(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Hi(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const CW=/[\u0590-\u08ac]/;function kW(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return!CW.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:gM(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),g})}let WS=null,qS=null,GS=!1;function RW(t,e,n){return WS==e&&qS==n?GS:(WS=e,qS=n,GS=n=="up"||n=="down"?AW(t,e,n):kW(t,e,n))}const xr=0,KS=1,zo=2,xi=3;class Kh{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=xr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>En(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof _M){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof yM&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?En(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?En(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let h=a;h>0;h--){let d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=En(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=En(h.dom);break}n+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let d=0,f=0;d<this.children.length;d++){let p=this.children[d],m=f+p.size;if(s>f&&o<m)return p.setSelection(e-f-p.border,n-f-p.border,r,i);f=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((ti||Gn)&&e==n){let{node:d,offset:f}=a;if(d.nodeType==3){if(u=!!(f&&d.nodeValue[f-1]==`
`),u&&f==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:En(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=d.childNodes[f-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(ti&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&Gn)&&ya(a.node,a.offset,c.anchorNode,c.anchorOffset)&&ya(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let f=a;a=l,l=f}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?zo:KS,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=xi:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?zo:xi}r=o}this.dirty=zo}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?zo:KS;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class yM extends Kh{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==xr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class OW extends Kh{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class _a extends Kh{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=mi.renderSpec(document,n.type.spec.toDOM(n,r))),new _a(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&xi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=xi&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=xr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=xr}}slice(e,n,r){let i=_a.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=gv(s,n,o,r)),e>0&&(s=gv(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class Qs extends Kh{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,h=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=mi.renderSpec(document,n.type.spec.toDOM(n)));!h&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=EM(u,r,n),c?l=new NW(e,n,r,i,u,h||null,d,c,s,o+1):n.isText?new Hm(e,n,r,i,u,d,s):new Qs(e,n,r,i,u,h||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>J.empty)}return e}matchesNode(e,n,r){return this.dirty==xr&&e.eq(this.node)&&mv(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new PW(this,o&&o.node,e);LW(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?mt.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,h,d)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,h,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,f,e)||l.updateNextNode(c,u,h,e,d,i)||l.addNode(c,u,h,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==zo)&&(o&&this.protectLocalComposition(e,o),vM(this.contentDOM,this.children,e),ql&&VW(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ue)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=FW(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new OW(this,s,n,i);e.input.compositionNodes.push(o),this.children=gv(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==xi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=xr}updateOuterDeco(e){if(mv(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=bM(this.dom,this.nodeDOM,pv(this.outerDeco,this.node,n),pv(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function YS(t,e,n,r,i){EM(r,e,t);let s=new Qs(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Hm extends Qs{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==xi||this.dirty!=xr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=xr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=xr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Hm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=xi)}get domAtom(){return!1}isText(e){return this.node.text==e}}class _M extends Kh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==xr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class NW extends Qs{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==xi)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function vM(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=JS(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof _a){let l=r?r.previousSibling:t.lastChild;vM(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=JS(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const _u=function(t){t&&(this.nodeName=t)};_u.prototype=Object.create(null);const jo=[new _u];function pv(t,e,n){if(t.length==0)return jo;let r=n?jo[0]:new _u,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new _u(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new _u(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function bM(t,e,n,r){if(n==jo&&r==jo)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=jo[0]),i=l}MW(i,a||jo[0],o)}return i}function MW(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function EM(t,e,n){return bM(t,t,jo,pv(e,n,t.nodeType!=1))}function mv(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function JS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class PW{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=xW(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=xr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=_a.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==xi&&o.dom==o.contentDOM&&(o.dirty=zo),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Qs){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,h,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=xi&&mv(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(l,e,n,r,i,o)))return this.top.children[this.index]=h,h.contentDOM&&(h.dirty=zo,h.updateChildren(i,o+1),h.dirty=xr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=Qs.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Qs.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new yM(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof _a;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Hm)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Gn||zn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new _M(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function xW(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof _a)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function DW(t,e){return t.type.side-e.type.side}function LW(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(u?(h||(h=[u])).push(g):u=g)}if(u)if(h){h.sort(DW);for(let g=0;g<h.length;g++)n(h[g],c,!!l)}else n(u,c,!!l);let d,f;if(l)f=-1,d=l,l=null;else if(c<t.childCount)f=c,d=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<p&&(l=d.cut(g-s),d=d.cut(0,g-s),p=g,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();r(d,m,e.forChild(s,d),f),s=p}}function VW(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function FW(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function gv(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function hb(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if($m(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&Ce.isSelectable(u)&&i.parent&&!(u.isInline&&cW(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new Ce(o==h?a:r.resolve(h))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=db(t,l,a,u)}return c}function TM(t){return t.editable?t.hasFocus():SM(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function rs(t,e=!1){let n=t.state.selection;if(wM(t,n),!!TM(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&zn){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ya(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)BW(t);else{let{anchor:r,head:i}=n,s,o;QS&&!(n instanceof Ue)&&(n.$from.parent.inlineContent||(s=XS(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=XS(t,n.to))),t.docView.setSelection(r,i,t.root,e),QS&&(s&&ZS(s),o&&ZS(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&UW(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const QS=Gn||zn&&dW<63;function XS(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Gn&&i&&i.contentEditable=="false")return cy(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return cy(i);if(s)return cy(s)}}function cy(t){return t.contentEditable="true",Gn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ZS(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function UW(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!TM(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function BW(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,En(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&nr&&Js<=11&&(r.disabled=!0,r.disabled=!1)}function wM(t,e){if(e instanceof Ce){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(eI(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else eI(t)}function eI(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function db(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Ue.between(e,n,r)}function tI(t){return t.editable&&!t.hasFocus()?!1:SM(t)}function SM(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function $W(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ya(e.node,e.offset,n.anchorNode,n.anchorOffset)}function yv(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&ze.findFrom(s,e)}function Ms(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function nI(t,e,n){let r=t.state.selection;if(r instanceof Ue)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Ms(t,new Ue(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=yv(t.state,e);return i&&i instanceof Ce?Ms(t,i):!1}else if(!(Cr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Ce.isSelectable(s)?Ms(t,new Ce(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Gh?Ms(t,new Ue(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ce&&r.node.isInline)return Ms(t,new Ue(e>0?r.$to:r.$from));{let i=yv(t.state,e);return i?Ms(t,i):!1}}}function mp(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function vu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ba(t,e){return e<0?HW(t):zW(t)}function HW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(ti&&n.nodeType==1&&r<mp(n)&&vu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(vu(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(IM(n))break;{let a=n.previousSibling;for(;a&&vu(a,-1);)i=n.parentNode,s=En(a),a=a.previousSibling;if(a)n=a,r=mp(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?_v(t,n,r):i&&_v(t,i,s)}function zW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=mp(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(vu(a,1))s=n,o=++r;else break}else{if(IM(n))break;{let a=n.nextSibling;for(;a&&vu(a,1);)s=a.parentNode,o=En(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=mp(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&_v(t,s,o)}function IM(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function jW(t,e){for(;t&&e==t.childNodes.length&&!qh(t);)e=En(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function WW(t,e){for(;t&&!e&&!qh(t);)e=En(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function _v(t,e,n){if(e.nodeType!=3){let s,o;(o=jW(e,n))?(e=o,n=0):(s=WW(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if($m(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&rs(t)},50)}function rI(t,e){let n=t.state.doc.resolve(e);if(!(zn||fW)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function iI(t,e,n){let r=t.state.selection;if(r instanceof Ue&&!r.empty||n.indexOf("s")>-1||Cr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=yv(t.state,e);if(o&&o instanceof Ce)return Ms(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Yr?ze.near(o,e):ze.findFrom(o,e);return a?Ms(t,a):!1}return!1}function sI(t,e){if(!(t.state.selection instanceof Ue))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function oI(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function qW(t){if(!Gn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;oI(t,r,"true"),setTimeout(()=>oI(t,r,"false"),20)}return!1}function GW(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function KW(t,e){let n=e.keyCode,r=GW(e);if(n==8||Cr&&n==72&&r=="c")return sI(t,-1)||Ba(t,-1);if(n==46&&!e.shiftKey||Cr&&n==68&&r=="c")return sI(t,1)||Ba(t,1);if(n==13||n==27)return!0;if(n==37||Cr&&n==66&&r=="c"){let i=n==37?rI(t,t.state.selection.from)=="ltr"?-1:1:-1;return nI(t,i,r)||Ba(t,i)}else if(n==39||Cr&&n==70&&r=="c"){let i=n==39?rI(t,t.state.selection.from)=="ltr"?1:-1:1;return nI(t,i,r)||Ba(t,i)}else{if(n==38||Cr&&n==80&&r=="c")return iI(t,-1,r)||Ba(t,-1);if(n==40||Cr&&n==78&&r=="c")return qW(t)||iI(t,1,r)||Ba(t,1);if(r==(Cr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function AM(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||mi.fromSchema(t.state.schema),a=MM(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=NM[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d}}function CM(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new pe(J.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):pe.empty;let h=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(h)a=h;else{let d=i.marks(),{schema:f}=t.state,p=mi.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(f.text(m,d)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=QW(n),Gh&&XW(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||zl.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!YW.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=ZW(aI(a,+u[1],+u[2]),u[4]);else if(a=pe.maxOpen(JW(a.content,i),!0),a.openStart||a.openEnd){let h=0,d=0;for(let f=a.content.firstChild;h<a.openStart&&!f.type.spec.isolating;h++,f=f.firstChild);for(let f=a.content.lastChild;d<a.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);a=aI(a,h,d)}return t.someProp("transformPasted",h=>{a=h(a,t)}),a}const YW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function JW(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&RM(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=OM(o[o.length-1],s.length));let u=kM(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return J.from(o)}return t}function kM(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,J.from(t));return t}function RM(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=RM(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(J.from(kM(n,t,i+1))))}}function OM(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,OM(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(J.empty,!0);return t.copy(n.append(r))}function vv(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=vv(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(J.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function aI(t,e,n){return e<t.openStart&&(t=new pe(vv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new pe(vv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const NM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let lI=null;function MM(){return lI||(lI=document.implementation.createHTMLDocument("title"))}function QW(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=MM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&NM[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function XW(t){let e=t.querySelectorAll(zn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function ZW(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=J.from(l.create(r[a+1],i)),s++,o++}return new pe(i,s,o)}const Kn={},Yn={},eq={touchstart:!0,touchmove:!0};class tq{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function nq(t){for(let e in Kn){let n=Kn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{iq(t,r)&&!fb(t,r)&&(t.editable||!(r.type in Yn))&&n(t,r)},eq[e]?{passive:!0}:void 0)}Gn&&t.dom.addEventListener("input",()=>null),bv(t)}function zs(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function rq(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function bv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>fb(t,r))})}function fb(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function iq(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function sq(t,e){!fb(t,e)&&Kn[e.type]&&(t.editable||!(e.type in Yn))&&Kn[e.type](t,e)}Yn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!xM(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!($r&&zn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ql&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,xo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||KW(t,n)?n.preventDefault():zs(t,"key")};Yn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Yn.keypress=(t,e)=>{let n=e;if(xM(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Cr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ue)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function zm(t){return{left:t.clientX,top:t.clientY}}function oq(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function pb(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function El(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function aq(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ce.isSelectable(r)?(El(t,new Ce(n),"pointer"),!0):!1}function lq(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Ce&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Ce.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(El(t,Ce.create(t.state.doc,i),"pointer"),!0):!1}function cq(t,e,n,r,i){return pb(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?lq(t,n):aq(t,n))}function uq(t,e,n,r){return pb(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function hq(t,e,n,r){return pb(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||dq(t,n,r)}function dq(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(El(t,Ue.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)El(t,Ue.create(r,a+1,a+1+o.content.size),"pointer");else if(Ce.isSelectable(o))El(t,Ce.create(r,a),"pointer");else continue;return!0}}function mb(t){return gp(t)}const PM=Cr?"metaKey":"ctrlKey";Kn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=mb(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&oq(n,t.input.lastClick)&&!n[PM]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(zm(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new fq(t,o,n,!!r)):(s=="doubleClick"?uq:hq)(t,o.pos,o.inside,n)?n.preventDefault():zs(t,"pointer"))};class fq{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[PM],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Ce&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ti&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),zs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>rs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(zm(e))),this.updateAllowDefault(e),this.allowDefault||!n?zs(this.view,"pointer"):cq(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Gn&&this.mightDrag&&!this.mightDrag.node.isAtom||zn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(El(this.view,ze.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):zs(this.view,"pointer")}move(e){this.updateAllowDefault(e),zs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Kn.touchstart=t=>{t.input.lastTouch=Date.now(),mb(t),zs(t,"pointer")};Kn.touchmove=t=>{t.input.lastTouch=Date.now(),zs(t,"pointer")};Kn.contextmenu=t=>mb(t);function xM(t,e){return t.composing?!0:Gn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const pq=$r?5e3:-1;Yn.compositionstart=Yn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),gp(t,!0),t.markCursor=null;else if(gp(t),ti&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}DM(t,pq)};Yn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,DM(t,20))};function DM(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>gp(t),e))}function LM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=gq());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function mq(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=aW(e.focusNode,e.focusOffset),r=lW(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n}function gq(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function gp(t,e=!1){if(!($r&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),LM(t),e||t.docView&&t.docView.dirty){let n=hb(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function yq(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const th=nr&&Js<15||ql&&pW<604;Kn.copy=Yn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=th?null:n.clipboardData,o=r.content(),{dom:a,text:l}=AM(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):yq(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function _q(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function vq(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?nh(t,r.value,null,i,e):nh(t,r.textContent,r.innerHTML,i,e)},50)}function nh(t,e,n,r,i){let s=CM(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||pe.empty)))return!0;if(!s)return!1;let o=_q(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function VM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Yn.paste=(t,e)=>{let n=e;if(t.composing&&!$r)return;let r=th?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&nh(t,VM(r),r.getData("text/html"),i,n)?n.preventDefault():vq(t,n)};class FM{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const UM=Cr?"altKey":"ctrlKey";Kn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(zm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ce?i.to-1:i.to))){if(r&&r.mightDrag)o=Ce.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(o=Ce.create(t.state.doc,u.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c}=AM(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(th?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",th||n.dataTransfer.setData("text/plain",c),t.dragging=new FM(a,!n[UM],o)};Kn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Yn.dragover=Yn.dragenter=(t,e)=>e.preventDefault();Yn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(zm(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=CM(t,VM(n.dataTransfer),th?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[UM]);if(t.someProp("handleDrop",p=>p(t,n,o||pe.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?rM(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let f=c.doc.resolve(u);if(h&&Ce.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Ce(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,y,_)=>p=_),c.setSelection(db(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Kn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&rs(t)},20))};Kn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Kn.beforeinput=(t,e)=>{if(zn&&$r&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,xo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Yn)Kn[t]=Yn[t];function rh(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class yp{constructor(e,n){this.toDOM=e,this.spec=n||ra,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new gr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof yp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&rh(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Xs{constructor(e,n){this.attrs=e,this.spec=n||ra}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new gr(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Xs&&rh(this.attrs,e.attrs)&&rh(this.spec,e.spec)}static is(e){return e.type instanceof Xs}destroy(){}}class gb{constructor(e,n){this.attrs=e,this.spec=n||ra}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new gr(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof gb&&rh(this.attrs,e.attrs)&&rh(this.spec,e.spec)}destroy(){}}class gr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new gr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new gr(e,e,new yp(n,r))}static inline(e,n,r,i){return new gr(e,n,new Xs(r,i))}static node(e,n,r,i){return new gr(e,n,new gb(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xs}get widget(){return this.type instanceof yp}}const Ga=[],ra={};class Gt{constructor(e,n){this.local=e.length?e:Ga,this.children=n.length?n:Ga}static create(e,n){return n.length?_p(n,e,0,ra):Rn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Rn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ra)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?bq(this.children,o||[],e,n,r,i,s):o?new Gt(o.sort(ia),Ga):Rn}add(e,n){return n.length?this==Rn?Gt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=$M(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,_p(u,a,c+1,ra)),s+=3}});let o=BM(s?HM(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Gt(o.length?this.local.concat(o).sort(ia):this.local,i||this.children)}remove(e){return e.length==0||this==Rn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Rn?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Gt(i,r):Rn}forChild(e,n){if(this==Rn)return this;if(n.isLeaf)return Gt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Xs){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new Gt(i.sort(ia),Ga);return r?new Fs([a,r]):a}return r||Rn}eq(e){if(this==e)return!0;if(!(e instanceof Gt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return yb(this.localsInner(e))}localsInner(e){if(this==Rn)return Ga;if(e.inlineContent||!this.local.some(Xs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Xs||n.push(this.local[r]);return n}}Gt.empty=new Gt([],[]);Gt.removeOverlap=yb;const Rn=Gt.empty;class Fs{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ra));return Fs.from(r)}forChild(e,n){if(n.isLeaf)return Gt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Rn&&(s instanceof Fs?r=r.concat(s.members):r.push(s))}return Fs.from(r)}eq(e){if(!(e instanceof Fs)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?yb(r?n:n.sort(ia)):Ga}static from(e){switch(e.length){case 0:return Rn;case 1:return e[0];default:return new Fs(e.every(n=>n instanceof Gt)?e:e.reduce((n,r)=>n.concat(r instanceof Gt?r:r.members),[]))}}}function bq(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let h=0;n.maps[c].forEach((d,f,p,m)=>{let g=m-p-(f-d);for(let y=0;y<a.length;y+=3){let _=a[y+1];if(_<0||d>_+u-h)continue;let v=a[y]+u-h;f>=v?a[y+1]=d<=v?-2:-1:d>=u&&g&&(a[y]+=g,a[y+1]+=g)}h+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),h=u-i;if(h<0||h>=r.content.size){l=!0;continue}let d=n.map(t[c+1]+s,-1),f=d-i,{index:p,offset:m}=r.content.findIndex(h),g=r.maybeChild(p);if(g&&m==h&&m+g.nodeSize==f){let y=a[c+2].mapInner(n,g,u+1,t[c]+s+1,o);y!=Rn?(a[c]=h,a[c+1]=f,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Eq(a,t,e,n,i,s,o),u=_p(c,r,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,d=0;h<u.children.length;h+=3){let f=u.children[h];for(;d<a.length&&a[d]<f;)d+=3;a.splice(d,0,u.children[h],u.children[h+1],u.children[h+2])}}return new Gt(e.sort(ia),a)}function BM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new gr(i.from+e,i.to+e,i.type))}return n}function Eq(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(r,i,c);h?n.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function $M(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function HM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function _p(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=$M(t,a,l+n);if(c){s=!0;let u=_p(c,a,n+l+1,r);u!=Rn&&i.push(l,l+a.nodeSize,u)}});let o=BM(s?HM(t):t,-n).sort(ia);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Gt(o,i):Rn}function ia(t,e){return t.from-e.from||t.to-e.to}function yb(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),cI(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),cI(e,i,r.copy(s.from,r.to)));break}}}return e}function cI(t,e,n){for(;e<t.length&&ia(n,t[e])>0;)e++;t.splice(e,0,n)}function uy(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Rn&&e.push(r)}),t.cursorWrapper&&e.push(Gt.create(t.state.doc,[t.cursorWrapper.deco])),Fs.from(e)}const Tq={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},wq=nr&&Js<=11;class Sq{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Iq{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Sq,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);nr&&Js<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),wq&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Tq)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(tI(this.view)){if(this.suppressingSelectionUpdates)return rs(this.view);if(nr&&Js<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ya(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=eh(s))n.add(s);for(let s=e.anchorNode;s;s=eh(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&tI(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let h=this.registerMutation(n[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(ti&&l.length>1){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let h=u[0],d=u[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&$m(r)&&(c=hb(e))&&c.eq(ze.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,rs(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),Aq(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||rs(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(nr&&Js<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:d}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?En(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?En(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let uI=new WeakMap,hI=!1;function Aq(t){if(!uI.has(t)&&(uI.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ti,hI)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),hI=!0}}function dI(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return ya(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Cq(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return dI(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?dI(t,n):null}function kq(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],$m(l)||c.push({node:l.focusNode,offset:l.focusOffset})),zn&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let y=r.childNodes[g-1],_=y.pmViewDesc;if(y.nodeName=="BR"&&!_){s=g;break}if(!_||_.size)break}let h=t.state.doc,d=t.someProp("domParser")||zl.fromSchema(t.state.schema),f=h.resolve(o),p=null,m=d.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Rq,context:f});if(c&&c[0].pos!=null){let g=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=g),p={anchor:g+o,head:y+o}}return{doc:m,sel:p,from:o,to:a}}function Rq(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Gn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Gn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Oq=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Nq(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let A=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,V=hb(t,A);if(V&&!t.state.selection.eq(V)){if(zn&&$r&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",H=>H(t,xo(13,"Enter"))))return;let z=t.state.tr.setSelection(V);A=="pointer"?z.setMeta("pointer",!0):A=="key"&&z.scrollIntoView(),s&&z.setMeta("composition",s),t.dispatch(z)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=kq(t,e,n),u=t.state.doc,h=u.slice(c.from,c.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=xq(h.content,c.doc.content,c.from,d,f);if((ql&&t.input.lastIOSEnter>Date.now()-225||$r)&&i.some(A=>A.nodeType==1&&!Oq.test(A.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",A=>A(t,xo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Ue&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let A=fI(t,t.state.doc,c.sel);if(A&&!A.eq(t.state.selection)){let V=t.state.tr.setSelection(A);s&&V.setMeta("composition",s),t.dispatch(V)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Ue&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),nr&&Js<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),y=u.resolve(p.start),_=m.sameParent(g)&&m.parent.inlineContent&&y.end()>=p.endA,v;if((ql&&t.input.lastIOSEnter>Date.now()-225&&(!_||i.some(A=>A.nodeName=="DIV"||A.nodeName=="P"))||!_&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(v=ze.findFrom(c.doc.resolve(m.pos+1),1,!0))&&v.head==g.pos)&&t.someProp("handleKeyDown",A=>A(t,xo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&Pq(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",A=>A(t,xo(8,"Backspace")))){$r&&zn&&t.domObserver.suppressSelectionUpdates();return}zn&&$r&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),$r&&!_&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(A){return A(t,xo(13,"Enter"))})},20));let I=p.start,S=p.endA,C,F,N;if(_){if(m.pos==g.pos)nr&&Js<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>rs(t),20)),C=t.state.tr.delete(I,S),F=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(N=Mq(m.parent.content.cut(m.parentOffset,g.parentOffset),y.parent.content.cut(y.parentOffset,p.endA-y.start()))))C=t.state.tr,N.type=="add"?C.addMark(I,S,N.mark):C.removeMark(I,S,N.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let A=m.parent.textBetween(m.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",V=>V(t,I,S,A)))return;C=t.state.tr.insertText(A,I,S)}}if(C||(C=t.state.tr.replace(I,S,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let A=fI(t,C.doc,c.sel);A&&!(zn&&$r&&t.composing&&A.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(A.head==I||A.head==C.mapping.map(S)-1)||nr&&A.empty&&A.head==I)&&C.setSelection(A)}F&&C.ensureMarks(F),s&&C.setMeta("composition",s),t.dispatch(C.scrollIntoView())}function fI(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:db(t,e.resolve(n.anchor),e.resolve(n.head))}function Mq(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(J.from(c).eq(t))return{mark:a,type:o}}function Pq(t,e,n,r,i){if(n-e<=i.pos-r.pos||hy(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(hy(s,!0,!0));return!o.parent.isTextblock||o.pos>n||hy(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function hy(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function xq(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&pI(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&pI(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function pI(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Dq{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new tq,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(vI),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=yI(this),gI(this),this.nodeViews=_I(this),this.docView=YS(this.state.doc,mI(this),uy(this),this.dom,this),this.domObserver=new Iq(this,(r,i,s,o)=>Nq(this,r,i,s,o)),this.domObserver.start(),nq(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&bv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(vI),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(LM(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=_I(this);Vq(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&bv(this),this.editable=yI(this),gI(this);let l=uy(this),c=mI(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&yW(this);if(o){this.domObserver.stop();let f=h&&(nr||zn)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Lq(i.selection,e.selection);if(h){let p=zn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=mq(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=YS(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$W(this))?rs(this,f):(wM(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&_W(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ce){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&zS(this,n.getBoundingClientRect(),e)}else zS(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new FM(e.slice,e.move,i<0?void 0:Ce.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(nr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&vW(this.dom),rs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return SW(this,e)}coordsAtPos(e,n=1){return mM(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return RW(this,n||this.state,e)}pasteHTML(e,n){return nh(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return nh(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(rq(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],uy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,sW())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return sq(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return Gn&&this.root.nodeType===11&&uW(this.dom.ownerDocument)==this.dom&&Cq(this,e)||e}domSelection(){return this.root.getSelection()}}function mI(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[gr.node(0,t.state.doc.content.size,e)]}function gI(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:gr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function yI(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Lq(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function _I(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Vq(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function vI(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ao={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},vp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Fq=typeof navigator<"u"&&/Mac/.test(navigator.platform),Uq=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Tn=0;Tn<10;Tn++)ao[48+Tn]=ao[96+Tn]=String(Tn);for(var Tn=1;Tn<=24;Tn++)ao[Tn+111]="F"+Tn;for(var Tn=65;Tn<=90;Tn++)ao[Tn]=String.fromCharCode(Tn+32),vp[Tn]=String.fromCharCode(Tn);for(var dy in ao)vp.hasOwnProperty(dy)||(vp[dy]=ao[dy]);function Bq(t){var e=Fq&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Uq&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?vp:ao)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const $q=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Hq(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))$q?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function zq(t){let e=Object.create(null);for(let n in t)e[Hq(n)]=t[n];return e}function fy(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function jq(t){return new Tr({props:{handleKeyDown:zM(t)}})}function zM(t){let e=zq(t);return function(n,r){let i=Bq(r),s,o=e[fy(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[fy(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=ao[r.keyCode])&&s!=i){let a=e[fy(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const Wq=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function jM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const qq=(t,e,n)=>{let r=jM(t,n);if(!r)return!1;let i=_b(r);if(!i){let o=r.blockRange(),a=o&&pc(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&KM(t,i,e))return!0;if(r.parent.content.size==0&&(Gl(s,"end")||Ce.isSelectable(s))){let o=Um(t.doc,r.before(),r.after(),pe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Gl(s,"end")?ze.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Ce.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Gq=(t,e,n)=>{let r=jM(t,n);if(!r)return!1;let i=_b(r);return i?WM(t,i,e):!1},Kq=(t,e,n)=>{let r=qM(t,n);if(!r)return!1;let i=vb(r);return i?WM(t,i,e):!1};function WM(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Um(t.doc,s,l,pe.empty);if(!c||c.from!=s||c instanceof an&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Ue.create(u.doc,s)),n(u.scrollIntoView())}return!0}function Gl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Yq=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=_b(r)}let o=s&&s.nodeBefore;return!o||!Ce.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ce.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function _b(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function qM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Jq=(t,e,n)=>{let r=qM(t,n);if(!r)return!1;let i=vb(r);if(!i)return!1;let s=i.nodeAfter;if(KM(t,i,e))return!0;if(r.parent.content.size==0&&(Gl(s,"start")||Ce.isSelectable(s))){let o=Um(t.doc,r.before(),r.after(),pe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Gl(s,"start")?ze.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Ce.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},Qq=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=vb(r)}let o=s&&s.nodeAfter;return!o||!Ce.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Ce.create(t.doc,s.pos)).scrollIntoView()),!0)};function vb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Xq=(t,e)=>{let n=t.selection,r=n instanceof Ce,i;if(r){if(n.node.isTextblock||!_o(t.doc,n.from))return!1;i=n.from}else if(i=Fm(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Ce.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Zq=(t,e)=>{let n=t.selection,r;if(n instanceof Ce){if(n.node.isTextblock||!_o(t.doc,n.to))return!1;r=n.to}else if(r=Fm(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},eG=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&pc(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},tG=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function GM(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const nG=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=GM(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(ze.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},rG=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Yr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=GM(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Ue.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},iG=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(vl(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&pc(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},sG=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Ce.create(t.doc,i))),!0)};function oG(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||_o(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function KM(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(oG(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,d=J.empty;for(let m=s.length-1;m>=0;m--)d=J.from(s[m].create(null,d));d=J.from(r.copy(d));let f=t.tr.step(new un(e.pos-1,h,e.pos,h,new pe(d,1,0),s.length,!0)),p=h+2*s.length;_o(f.doc,p)&&f.join(p),n(f.scrollIntoView())}return!0}let l=ze.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&pc(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&Gl(i,"start",!0)&&Gl(r,"end")){let h=r,d=[];for(;d.push(h),!h.isTextblock;)h=h.lastChild;let f=i,p=1;for(;!f.isTextblock;f=f.firstChild)p++;if(h.canReplace(h.childCount,h.childCount,f.content)){if(n){let m=J.empty;for(let y=d.length-1;y>=0;y--)m=J.from(d[y].copy(m));let g=t.tr.step(new un(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new pe(m,d.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function YM(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Ue.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const aG=YM(-1),lG=YM(1);function cG(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&lb(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function bI(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function uG(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);l=new hp(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new hp(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=lb(l,t,e,o);return c?(r&&r(hG(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function hG(t,e,n,r,i){let s=J.empty;for(let u=n.length-1;u>=0;u--)s=J.from(n[u].type.create(n[u].attrs,s));t.step(new un(e.start-(r?2:0),e.end,e.start,e.end,new pe(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,h=e.endIndex,d=!0;u<h;u++,d=!1)!d&&vl(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function dG(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?fG(e,n,t,s):pG(e,n,s):!0:!1}}function fG(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new un(s-1,o,s,o,new pe(J.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new hp(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=pc(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return _o(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function pG(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?J.empty:J.from(i))))return!1;let h=s.pos,d=h+o.nodeSize;return r.step(new un(h-(a?1:0),d+(l?1:0),h+1,d-1,new pe((a?J.empty:J.from(i.copy(J.empty))).append(l?J.empty:J.from(i.copy(J.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function mG(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=J.from(c?t.create():null),h=new pe(J.from(t.create(null,J.from(a.type.create(null,u)))),c?3:1,0),d=s.start,f=s.end;n(e.tr.step(new un(d-(c?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}function jm(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class Wm{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const h=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),h={...Object.fromEntries(Object.entries(r).map(([d,f])=>[d,(...m)=>{const g=this.buildProps(c,n),y=f(...m)(g);return a.push(y),h}])),run:u};return h}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:jm({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class gG{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function ye(t,e,n){return t.config[e]===void 0&&t.parent?ye(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ye(t.parent,e,n):null}):t.config[e]}function qm(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function JM(t){const e=[],{nodeExtensions:n,markExtensions:r}=qm(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=ye(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([d,f])=>{e.push({type:h,name:d,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=ye(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const d={...s,...h};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function pn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function en(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function Ev(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>en(n,r),{})}function QM(t){return typeof t=="function"}function He(t,e=void 0,...n){return QM(t)?e?t.bind(e)(...n):t(...n):t}function yG(t={}){return Object.keys(t).length===0&&t.constructor===Object}function _G(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function EI(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):_G(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function TI(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&yG(n)?!1:n!=null))}function vG(t,e){var n;const r=JM(t),{nodeExtensions:i,markExtensions:s}=qm(t),o=(n=i.find(c=>ye(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((y,_)=>{const v=ye(_,"extendNodeSchema",h);return{...y,...v?v(c):{}}},{}),f=TI({...d,content:He(ye(c,"content",h)),marks:He(ye(c,"marks",h)),group:He(ye(c,"group",h)),inline:He(ye(c,"inline",h)),atom:He(ye(c,"atom",h)),selectable:He(ye(c,"selectable",h)),draggable:He(ye(c,"draggable",h)),code:He(ye(c,"code",h)),defining:He(ye(c,"defining",h)),isolating:He(ye(c,"isolating",h)),attrs:Object.fromEntries(u.map(y=>{var _;return[y.name,{default:(_=y==null?void 0:y.attribute)===null||_===void 0?void 0:_.default}]}))}),p=He(ye(c,"parseHTML",h));p&&(f.parseDOM=p.map(y=>EI(y,u)));const m=ye(c,"renderHTML",h);m&&(f.toDOM=y=>m({node:y,HTMLAttributes:Ev(y,u)}));const g=ye(c,"renderText",h);return g&&(f.toText=g),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,y)=>{const _=ye(y,"extendMarkSchema",h);return{...g,..._?_(c):{}}},{}),f=TI({...d,inclusive:He(ye(c,"inclusive",h)),excludes:He(ye(c,"excludes",h)),group:He(ye(c,"group",h)),spanning:He(ye(c,"spanning",h)),code:He(ye(c,"code",h)),attrs:Object.fromEntries(u.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=He(ye(c,"parseHTML",h));p&&(f.parseDOM=p.map(g=>EI(g,u)));const m=ye(c,"renderHTML",h);return m&&(f.toDOM=g=>m({mark:g,HTMLAttributes:Ev(g,u)})),[c.name,f]}));return new wj({topNode:o,nodes:a,marks:l})}function py(t,e){return e.nodes[t]||e.marks[t]||null}function wI(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const bG=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function bb(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Gm{constructor(e){this.find=e.find,this.handler=e.handler}}const EG=(t,e)=>{if(bb(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Rd(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const h=bG(c)+s;return o.forEach(d=>{if(u)return;const f=EG(h,d.find);if(!f)return;const p=l.state.tr,m=jm({state:l.state,transaction:p}),g={from:r-(f[0].length-s.length),to:i},{commands:y,chain:_,can:v}=new Wm({editor:n,state:m});d.handler({state:m,range:g,match:f,commands:y,chain:_,can:v})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function TG(t){const{editor:e,rules:n}=t,r=new Tr({state:{init(){return null},apply(i,s){const o=i.getMeta(r);if(o)return o;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{const{from:c,text:u}=a,h=c+u.length;Rd({editor:e,from:c,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return Rd({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Rd({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Rd({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function wG(t){return typeof t=="number"}class SG{constructor(e){this.find=e.find,this.handler=e.handler}}const IG=(t,e,n)=>{if(bb(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function AG(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Wm({editor:e,state:n}),h=[];return n.doc.nodesBetween(r,i,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(r,p),g=Math.min(i,p+f.content.size),y=f.textBetween(m-p,g-p,void 0,"");IG(y,s.find,o).forEach(v=>{if(v.index===void 0)return;const I=m+v.index+1,S=I+v[0].length,C={from:n.tr.mapping.map(I),to:n.tr.mapping.map(S)},F=s.handler({state:n,range:C,match:v,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});h.push(F)})}),h.every(f=>f!==null)}const CG=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function kG(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;const l=({state:u,from:h,to:d,rule:f,pasteEvt:p})=>{const m=u.tr,g=jm({state:u,transaction:m});if(!(!AG({editor:e,state:g,from:Math.max(h-1,0),to:d.b-1,rule:f,pasteEvent:p,dropEvent:a})||!m.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m};return n.map(u=>new Tr({view(h){const d=f=>{var p;r=!((p=h.dom.parentElement)===null||p===void 0)&&p.contains(f.target)?h.dom.parentElement:null};return window.addEventListener("dragstart",d),{destroy(){window.removeEventListener("dragstart",d)}}},props:{handleDOMEvents:{drop:(h,d)=>(s=r===h.dom.parentElement,a=d,!1),paste:(h,d)=>{var f;const p=(f=d.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return o=d,i=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(h,d,f)=>{const p=h[0],m=p.getMeta("uiEvent")==="paste"&&!i,g=p.getMeta("uiEvent")==="drop"&&!s,y=p.getMeta("applyPasteRules"),_=!!y;if(!m&&!g&&!_)return;if(_){const{from:S,text:C}=y,F=S+C.length,N=CG(C);return l({rule:u,state:f,from:S,to:{b:F},pasteEvt:N})}const v=d.doc.content.findDiffStart(f.doc.content),I=d.doc.content.findDiffEnd(f.doc.content);if(!(!wG(v)||!I||v===I.b))return l({rule:u,state:f,from:v,to:I,pasteEvt:o})}}))}function RG(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Za{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Za.resolve(e),this.schema=vG(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:py(r.name,this.schema)};r.type==="mark"&&(!((i=He(ye(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=ye(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=ye(r,"onCreate",s);a&&this.editor.on("create",a);const l=ye(r,"onUpdate",s);l&&this.editor.on("update",l);const c=ye(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=ye(r,"onTransaction",s);u&&this.editor.on("transaction",u);const h=ye(r,"onFocus",s);h&&this.editor.on("focus",h);const d=ye(r,"onBlur",s);d&&this.editor.on("blur",d);const f=ye(r,"onDestroy",s);f&&this.editor.on("destroy",f)})}static resolve(e){const n=Za.sort(Za.flatten(e)),r=RG(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=ye(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=ye(r,"priority")||100,o=ye(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:py(n.name,this.schema)},i=ye(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Za.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:py(o.name,this.schema)},l=[],c=ye(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>Di.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,y])=>[g,()=>y({editor:e})]));u={...u,...m}}const h=jq(u);l.push(h);const d=ye(o,"addInputRules",a);wI(o,e.options.enableInputRules)&&d&&r.push(...d());const f=ye(o,"addPasteRules",a);wI(o,e.options.enablePasteRules)&&f&&i.push(...f());const p=ye(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[TG({editor:e,rules:r}),...kG({editor:e,rules:i}),...s]}get attributes(){return JM(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=qm(this.extensions);return Object.fromEntries(n.filter(r=>!!ye(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:pn(r.name,this.schema)},o=ye(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,h)=>{const d=Ev(l,i);return o()({editor:e,node:l,getPos:u,decorations:h,HTMLAttributes:d,extension:r})};return[r.name,a]}))}}function OG(t){return Object.prototype.toString.call(t).slice(8,-1)}function my(t){return OG(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Km(t,e){const n={...t};return my(t)&&my(e)&&Object.keys(e).forEach(r=>{my(e[r])?r in t?n[r]=Km(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class or{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=He(ye(this,"addOptions",{name:this.name}))),this.storage=He(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new or(e)}configure(e={}){const n=this.extend();return n.options=Km(this.options,e),n.storage=He(ye(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new or({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=He(ye(n,"addOptions",{name:n.name})),n.storage=He(ye(n,"addStorage",{name:n.name,options:n.options})),n}}function XM(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,u,h,d)=>{var f;const p=o==null?void 0:o[c.type.name];if(p)return c.isBlock&&!l&&(a+=s,l=!0),h&&(a+=p({node:c,pos:u,parent:h,index:d,range:e})),!1;c.isText?(a+=(f=c==null?void 0:c.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function ZM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const NG=or.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Tr({key:new ms("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=ZM(n);return XM(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),MG=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),PG=(t=!1)=>({commands:e})=>e.setContent("",t),xG=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,h=c.resolve(u.map(l)),d=c.resolve(u.map(l+a.nodeSize)),f=h.blockRange(d);if(!f)return;const p=pc(f);if(a.type.isTextblock){const{defaultType:m}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(f.start,m)}(p||p===0)&&e.lift(f,p)})}),!0},DG=t=>e=>t(e),LG=()=>({state:t,dispatch:e})=>rG(t,e),VG=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Ue(r.doc.resolve(o-1))),!0},FG=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},UG=t=>({tr:e,state:n,dispatch:r})=>{const i=pn(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},BG=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},$G=()=>({state:t,dispatch:e})=>Wq(t,e),HG=()=>({commands:t})=>t.keyboardShortcut("Enter"),zG=()=>({state:t,dispatch:e})=>nG(t,e);function bp(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:bb(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Tv(t,e,n={}){return t.find(r=>r.type===e&&bp(r.attrs,n))}function jG(t,e,n={}){return!!Tv(t,e,n)}function Eb(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=Tv([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(Tv([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&jG([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function bo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const WG=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=bo(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const h=Eb(l,s,e);if(h&&h.from<=c&&h.to>=u){const d=Ue.create(o,h.from,h.to);n.setSelection(d)}}return!0},qG=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function eP(t){return t instanceof Ue}function Wo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function tP(t,e=null){if(!e)return null;const n=ze.atStart(t),r=ze.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Ue.create(t,Wo(0,i,s),Wo(t.content.size,i,s)):Ue.create(t,Wo(e,i,s),Wo(e,i,s))}function Tb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const GG=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{Tb()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!eP(n.state.selection))return o(),!0;const a=tP(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},KG=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),YG=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),nP=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&nP(r)}return t};function SI(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return nP(n)}function Ep(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?J.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),Ep("",e,n)}if(typeof t=="string"){const r=zl.fromSchema(e);return n.slice?r.parseSlice(SI(t),n.parseOptions).content:r.parse(SI(t),n.parseOptions)}return Ep("",e,n)}function JG(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof an||i instanceof un))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(ze.near(t.doc.resolve(o),n))}const QG=t=>t.toString().startsWith("<"),XG=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};const o=Ep(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,u=!0;if((QG(o)?o:[o]).forEach(f=>{f.check(),c=c?f.isText&&f.marks.length===0:!1,u=u?f.isBlock:!1}),a===l&&u){const{parent:f}=r.doc.resolve(a);f.isTextblock&&!f.type.spec.code&&!f.childCount&&(a-=1,l+=1)}let d;c?(Array.isArray(e)?d=e.map(f=>f.text||"").join(""):typeof e=="object"&&e&&e.text?d=e.text:d=e,r.insertText(d,a,l)):(d=o,r.replaceWith(a,l,d)),n.updateSelection&&JG(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:a,text:d}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:a,text:d})}return!0},ZG=()=>({state:t,dispatch:e})=>Xq(t,e),eK=()=>({state:t,dispatch:e})=>Zq(t,e),tK=()=>({state:t,dispatch:e})=>qq(t,e),nK=()=>({state:t,dispatch:e})=>Jq(t,e),rK=()=>({tr:t,state:e,dispatch:n})=>{try{const r=Fm(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},iK=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Fm(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},sK=()=>({state:t,dispatch:e})=>Gq(t,e),oK=()=>({state:t,dispatch:e})=>Kq(t,e);function wb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function aK(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Tb()||wb()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const lK=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=aK(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function ih(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?pn(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(h,d)=>{if(h.isText)return;const f=Math.max(r,d),p=Math.min(i,d+h.nodeSize);a.push({node:h,from:f,to:p})});const l=i-r,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>bp(h.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((h,d)=>h+d.to-d.from,0)>=l}const cK=(t,e={})=>({state:n,dispatch:r})=>{const i=pn(t,n.schema);return ih(n,i,e)?eG(n,r):!1},uK=()=>({state:t,dispatch:e})=>iG(t,e),hK=t=>({state:e,dispatch:n})=>{const r=pn(t,e.schema);return dG(r)(e,n)},dK=()=>({state:t,dispatch:e})=>tG(t,e);function Ym(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function II(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const fK=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Ym(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=pn(t,r.schema)),a==="mark"&&(o=bo(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,II(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&n.addMark(u,u+c.nodeSize,o.create(II(h.attrs,e)))})})}),!0):!1},pK=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),mK=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),gK=()=>({state:t,dispatch:e})=>Yq(t,e),yK=()=>({state:t,dispatch:e})=>Qq(t,e),_K=()=>({state:t,dispatch:e})=>sG(t,e),vK=()=>({state:t,dispatch:e})=>lG(t,e),bK=()=>({state:t,dispatch:e})=>aG(t,e);function rP(t,e,n={}){return Ep(t,e,{slice:!1,parseOptions:n})}const EK=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=rP(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Jm(t,e){const n=bo(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function TK(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function wK(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Sb(t){return e=>wK(e.$from,t)}function SK(t,e){const n=mi.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function IK(t,e){const n={from:0,to:t.content.size};return XM(t,n,e)}function AK(t,e){const n=pn(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function CK(t,e){const n=Ym(typeof e=="string"?e:e.name,t.schema);return n==="node"?AK(t,e):n==="mark"?Jm(t,e):{}}function iP(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=Eb(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function af(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function wv(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?bo(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>bp(h.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:d})=>{const f=h.pos,p=d.pos;t.doc.nodesBetween(f,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const y=Math.max(f,g),_=Math.min(p,g+m.nodeSize),v=_-y;o+=v,a.push(...m.marks.map(I=>({mark:I,from:y,to:_})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>bp(h.mark.attrs,n,{strict:!1})).reduce((h,d)=>h+d.to-d.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,d)=>h+d.to-d.from,0);return(l>0?l+c:l)>=o}function kK(t,e,n={}){if(!e)return ih(t,null,n)||wv(t,null,n);const r=Ym(e,t.schema);return r==="node"?ih(t,e,n):r==="mark"?wv(t,e,n):!1}function AI(t,e){const{nodeExtensions:n}=qm(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=He(ye(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function RK(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function OK(t,e,n){var r;const{selection:i}=e;let s=null;if(eP(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,h,d)=>{if(c)return!1;if(u.isInline){const f=!d||d.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=f&&p}return!c}),c})}const NK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=bo(t,r.schema);if(i)if(o){const c=Jm(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;r.doc.nodesBetween(u,h,(d,f)=>{const p=Math.max(f,u),m=Math.min(f+d.nodeSize,h);d.marks.find(y=>y.type===l)?d.marks.forEach(y=>{l===y.type&&n.addMark(p,m,l.create({...y.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return OK(r,n,l)},MK=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),PK=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=pn(t,n.schema);return s.isTextblock?i().command(({commands:o})=>bI(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>bI(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},xK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Wo(t,0,r.content.size),s=Ce.create(r,i);e.setSelection(s)}return!0},DK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Ue.atStart(r).from,a=Ue.atEnd(r).to,l=Wo(i,o,a),c=Wo(s,o,a),u=Ue.create(r,l,c);e.setSelection(u)}return!0},LK=t=>({state:e,dispatch:n})=>{const r=pn(t,e.schema);return mG(r)(e,n)};function CI(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const VK=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=af(c,a.node().type.name,a.node().attrs);if(s instanceof Ce&&s.node.isBlock)return!a.parentOffset||!vl(o,a.pos)?!1:(r&&(t&&CI(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const h=l.parentOffset===l.parent.content.size;s instanceof Ue&&e.deleteSelection();const d=a.depth===0?void 0:TK(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=h&&d?[{type:d,attrs:u}]:void 0,p=vl(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&vl(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,f=d?[{type:d,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,f),d&&!h&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&CI(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},FK=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=pn(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const h=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=J.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let F=a.depth-y;F>=a.depth-3;F-=1)g=J.from(a.node(F).copy(g));const _=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,v=af(h,a.node().type.name,a.node().attrs),I=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(v))||void 0;g=g.append(J.from(o.createAndFill(null,I)||void 0));const S=a.before(a.depth-(y-1));e.replace(S,a.after(-_),new pe(g,4-y,0));let C=-1;e.doc.nodesBetween(S,e.doc.content.size,(F,N)=>{if(C>-1)return!1;F.isTextblock&&F.content.size===0&&(C=N+1)}),C>-1&&e.setSelection(Ue.near(e.doc.resolve(C))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,f=af(h,u.type.name,u.attrs),p=af(h,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:o,attrs:f},{type:d,attrs:p}]:[{type:o,attrs:f}];if(!vl(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:y}=n,{splittableMarks:_}=i.extensionManager,v=y||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!v||!r)return!0;const I=v.filter(S=>_.includes(S.type.name));e.ensureMarks(I)}return!0},gy=(t,e)=>{const n=Sb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&_o(t.doc,n.pos)&&t.join(n.pos),!0},yy=(t,e)=>{const n=Sb(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&_o(t.doc,r)&&t.join(r),!0},UK=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:h,splittableMarks:d}=i.extensionManager,f=pn(t,o.schema),p=pn(e,o.schema),{selection:m,storedMarks:g}=o,{$from:y,$to:_}=m,v=y.blockRange(_),I=g||m.$to.parentOffset&&m.$from.marks();if(!v)return!1;const S=Sb(C=>AI(C.type.name,h))(m);if(v.depth>=1&&S&&v.depth-S.depth<=1){if(S.node.type===f)return c.liftListItem(p);if(AI(S.node.type.name,h)&&f.validContent(S.node.content)&&a)return l().command(()=>(s.setNodeMarkup(S.pos,f),!0)).command(()=>gy(s,f)).command(()=>yy(s,f)).run()}return!n||!I||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>gy(s,f)).command(()=>yy(s,f)).run():l().command(()=>{const C=u().wrapInList(f,r),F=I.filter(N=>d.includes(N.type.name));return s.ensureMarks(F),C?!0:c.clearNodes()}).wrapInList(f,r).command(()=>gy(s,f)).command(()=>yy(s,f)).run()},BK=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=bo(t,r.schema);return wv(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},$K=(t,e,n={})=>({state:r,commands:i})=>{const s=pn(t,r.schema),o=pn(e,r.schema);return ih(r,s,n)?i.setNode(o):i.setNode(s,n)},HK=(t,e={})=>({state:n,commands:r})=>{const i=pn(t,n.schema);return ih(n,i,e)?r.lift(i):r.wrapIn(i,e)},zK=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},jK=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},WK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=bo(t,r.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&o){let{from:d,to:f}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=Eb(c,l,p);m&&(d=m.from,f=m.to),n.removeMark(d,f,l)}else h.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},qK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=Ym(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=pn(t,r.schema)),a==="mark"&&(o=bo(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(h,d)=>{s&&s===h.type&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(f=>{if(o===f.type){const p=Math.max(d,c),m=Math.min(d+h.nodeSize,u);n.addMark(p,m,o.create({...f.attrs,...e}))}})})}),!0):!1},GK=(t,e={})=>({state:n,dispatch:r})=>{const i=pn(t,n.schema);return cG(i,e)(n,r)},KK=(t,e={})=>({state:n,dispatch:r})=>{const i=pn(t,n.schema);return uG(i,e)(n,r)};var YK=Object.freeze({__proto__:null,blur:MG,clearContent:PG,clearNodes:xG,command:DG,createParagraphNear:LG,cut:VG,deleteCurrentNode:FG,deleteNode:UG,deleteRange:BG,deleteSelection:$G,enter:HG,exitCode:zG,extendMarkRange:WG,first:qG,focus:GG,forEach:KG,insertContent:YG,insertContentAt:XG,joinUp:ZG,joinDown:eK,joinBackward:tK,joinForward:nK,joinItemBackward:rK,joinItemForward:iK,joinTextblockBackward:sK,joinTextblockForward:oK,keyboardShortcut:lK,lift:cK,liftEmptyBlock:uK,liftListItem:hK,newlineInCode:dK,resetAttributes:fK,scrollIntoView:pK,selectAll:mK,selectNodeBackward:gK,selectNodeForward:yK,selectParentNode:_K,selectTextblockEnd:vK,selectTextblockStart:bK,setContent:EK,setMark:NK,setMeta:MK,setNode:PK,setNodeSelection:xK,setTextSelection:DK,sinkListItem:LK,splitBlock:VK,splitListItem:FK,toggleList:UK,toggleMark:BK,toggleNode:$K,toggleWrap:HK,undoInputRule:zK,unsetAllMarks:jK,unsetMark:WK,updateAttributes:qK,wrapIn:GK,wrapInList:KK});const JK=or.create({name:"commands",addCommands(){return{...YK}}}),QK=or.create({name:"editable",addProseMirrorPlugins(){return[new Tr({key:new ms("editable"),props:{editable:()=>this.editor.options.editable}})]}}),XK=or.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Tr({key:new ms("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),ZK=or.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:d,parent:f}=h,p=h.parent.isTextblock&&d>0?a.doc.resolve(d-1):h,m=p.parent.type.spec.isolating,g=h.pos-h.parentOffset,y=m&&p.parent.childCount===1?g===h.pos:ze.atStart(c).from===d;return!u||!y||!f.type.isTextblock||f.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Tb()||wb()?s:i},addProseMirrorPlugins(){return[new Tr({key:new ms("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=ze.atStart(e.doc).from,l=ze.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const h=n.tr,d=jm({state:n,transaction:h}),{commands:f}=new Wm({editor:this.editor,state:d});if(f.clearNodes(),!!h.steps.length)return h}})]}}),eY=or.create({name:"tabindex",addProseMirrorPlugins(){return[new Tr({key:new ms("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Do{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Do(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Do(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Do(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+1,o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new Do(o,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Do(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];return!this.children||this.children.length===0||this.children.forEach(s=>{if(s.node.type.name===e){if(Object.keys(n).length>0){const o=s.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(o[c]!==n[c])return}}if(i.push(s),r)return}i=i.concat(s.querySelectorAll(e))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const tY=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function nY(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let rY=class extends gG{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=nY(tY,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=QM(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[QK,NG.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),JK,XK,ZK,eY]:[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Za(i,this)}createCommandManager(){this.commandManager=new Wm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=rP(this.options.content,this.schema,this.options.parseOptions),n=tP(e,this.options.autofocus);this.view=new Dq(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:Xa.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return CK(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return kK(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return SK(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return IK(this.state.doc,{blockSeparator:n,textSerializers:{...ZM(this.schema),...r}})}get isEmpty(){return RK(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Do(n,this)}get $doc(){return this.$pos(0)}};function Kl(t){return new Gm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=He(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(iP(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(m=>m===t.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const d=n.from+l+o.length;s.addMark(n.from+l,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function iY(t){return new Gm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=He(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const h=r[0][r[0].length-1];s.insertText(h,o+r[0].length-1),s.replaceWith(u,a,l)}else r[0]&&s.insert(o-1,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}})}function Sv(t){return new Gm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=He(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function sh(t){return new Gm({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=He(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&lb(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:d}=e,{splittableMarks:f}=t.editor.extensionManager,p=d||h.$to.parentOffset&&h.$from.marks();if(p){const m=p.filter(g=>f.includes(g.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&_o(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class Di{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=He(ye(this,"addOptions",{name:this.name}))),this.storage=He(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Di(e)}configure(e={}){const n=this.extend();return n.options=Km(this.options,e),n.storage=He(ye(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Di({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=He(ye(n,"addOptions",{name:n.name})),n.storage=He(ye(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}let wr=class Iv{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=He(ye(this,"addOptions",{name:this.name}))),this.storage=He(ye(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Iv(e)}configure(e={}){const n=this.extend();return n.options=Km(this.options,e),n.storage=He(ye(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Iv({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=He(ye(n,"addOptions",{name:n.name})),n.storage=He(ye(n,"addStorage",{name:n.name,options:n.options})),n}};function Yl(t){return new SG({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=He(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),h=n.from+l.indexOf(a),d=h+a.length;if(iP(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>h).length)return null;d<n.to&&o.delete(d,n.to),h>n.from&&o.delete(n.from+u,h),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const sY=/^\s*>\s$/,oY=wr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",en(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[sh({find:sY,type:this.type})]}}),aY=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,lY=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,cY=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,uY=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,hY=Di.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",en(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Kl({find:aY,type:this.type}),Kl({find:cY,type:this.type})]},addPasteRules(){return[Yl({find:lY,type:this.type}),Yl({find:uY,type:this.type})]}}),dY=wr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",en(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),kI=Di.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",en(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Jm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),RI=/^\s*([-+*])\s$/,fY=wr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",en(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(dY.name,this.editor.getAttributes(kI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=sh({find:RI,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=sh({find:RI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(kI.name),editor:this.editor})),[t]}}),pY=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,mY=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,gY=Di.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",en(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Kl({find:pY,type:this.type})]},addPasteRules(){return[Yl({find:mY,type:this.type})]}}),yY=/^```([a-z]+)?[\s\n]$/,_Y=/^~~~([a-z]+)?[\s\n]$/,vY=wr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",en(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[Sv({find:yY,type:this.type,getAttributes:t=>({language:t[1]})}),Sv({find:_Y,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Tr({key:new ms("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o}=t.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(Ue.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),bY=wr.create({name:"doc",topNode:!0,content:"block+"});function EY(t={}){return new Tr({view(e){return new TY(e,t)}})}class TY{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),h=a?u.bottom:u.top;a&&l&&(h=(h+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:h-this.width/2,bottom:h+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=rM(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const wY=or.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[EY(this.options)]}});class Lt extends ze{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Lt.valid(r)?new Lt(r):ze.near(r)}content(){return pe.empty}eq(e){return e instanceof Lt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Lt(e.resolve(n.pos))}getBookmark(){return new Ib(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!SY(e)||!IY(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Lt.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Lt.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Ce.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Lt.valid(a))return a}return null}}}Lt.prototype.visible=!1;Lt.findFrom=Lt.findGapCursorFrom;ze.jsonID("gapcursor",Lt);class Ib{constructor(e){this.pos=e}map(e){return new Ib(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Lt.valid(n)?new Lt(n):ze.near(n)}}function SY(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function IY(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function AY(){return new Tr({props:{decorations:OY,createSelectionBetween(t,e,n){return e.pos==n.pos&&Lt.valid(n)?new Lt(n):null},handleClick:kY,handleKeyDown:CY,handleDOMEvents:{beforeinput:RY}}})}const CY=zM({ArrowLeft:Od("horiz",-1),ArrowRight:Od("horiz",1),ArrowUp:Od("vert",-1),ArrowDown:Od("vert",1)});function Od(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Ue){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Lt.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Lt(c))),!0):!1}}function kY(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Lt.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Ce.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Lt(r))),!0)}function RY(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Lt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=J.empty;for(let o=r.length-1;o>=0;o--)i=J.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new pe(i,0,0));return s.setSelection(Ue.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function OY(t){if(!(t.selection instanceof Lt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Gt.create(t.doc,[gr.widget(t.selection.head,e,{key:"gapcursor"})])}const NY=or.create({name:"gapCursor",addProseMirrorPlugins(){return[AY()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=He(ye(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),MY=wr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",en(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(d=>a.includes(d.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),PY=wr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,en(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Sv({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Tp=200,hn=function(){};hn.prototype.append=function(e){return e.length?(e=hn.from(e),!this.length&&e||e.length<Tp&&this.leafAppend(e)||this.length<Tp&&e.leafPrepend(this)||this.appendInner(e)):this};hn.prototype.prepend=function(e){return e.length?hn.from(e).append(this):this};hn.prototype.appendInner=function(e){return new xY(this,e)};hn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?hn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};hn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};hn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};hn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};hn.from=function(e){return e instanceof hn?e:e&&e.length?new sP(e):hn.empty};var sP=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Tp)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Tp)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(hn);hn.empty=new sP([]);var xY=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(hn);const DY=500;class zr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((h,d)=>{if(!h.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new si(h.map));let f=h.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new si(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new zr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),d=new si(e.mapping.maps[u],h,n),f;(f=l&&l.merge(d))&&(d=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(d),n&&(o++,n=void 0),i||(l=d)}let c=o-r.depth;return c>VY&&(a=LY(a,c),o-=c),new zr(a.append(s),o)}remapping(e,n){let r=new _l;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new zr(this.items.append(e.map(n=>new si(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(d.step){let m=e.steps[f].invert(e.docs[f]),g=d.selection&&d.selection.map(s.slice(l+1,f));g&&a++,r.push(new si(p,m,g))}else r.push(new si(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new si(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),h=new zr(u,a);return h.emptyItemCount()>DY&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let h=new si(c.invert(),l,u),d,f=i.length-1;(d=i.length&&i[f].merge(h))?i[f]=d:i.push(h)}}else o.map&&r--},this.items.length,0),new zr(hn.from(i.reverse()),s)}}zr.empty=new zr(hn.empty,0);function LY(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class si{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new si(n.getMap().invert(),n,this.selection)}}}class Ps{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const VY=20;function FY(t,e,n,r){let i=n.getMeta(sa),s;if(i)return i.historyState;n.getMeta($Y)&&(t=new Ps(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(sa))return o.getMeta(sa).redo?new Ps(t.done.addTransform(n,void 0,r,lf(e)),t.undone,OI(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new Ps(t.done,t.undone.addTransform(n,void 0,r,lf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!UY(n,t.prevRanges)),c=o?_y(t.prevRanges,n.mapping):OI(n.mapping.maps[n.steps.length-1]);return new Ps(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,lf(e)),zr.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Ps(t.done.rebased(n,s),t.undone.rebased(n,s),_y(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ps(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),_y(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function UY(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function OI(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function _y(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function BY(t,e,n){let r=lf(e),i=sa.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Ps(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(sa,{redo:n,historyState:l})}let vy=!1,NI=null;function lf(t){let e=t.plugins;if(NI!=e){vy=!1,NI=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){vy=!0;break}}return vy}const sa=new ms("history"),$Y=new ms("closeHistory");function HY(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Tr({key:sa,state:{init(){return new Ps(zr.empty,zr.empty,null,0,-1)},apply(e,n,r){return FY(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?aP:r=="historyRedo"?lP:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function oP(t,e){return(n,r)=>{let i=sa.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=BY(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const aP=oP(!1,!0),lP=oP(!0,!0),zY=or.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>aP(t,e),redo:()=>({state:t,dispatch:e})=>lP(t,e)}},addProseMirrorPlugins(){return[HY(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),jY=wr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",en(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){const{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(Ue.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(Ce.create(i.doc,a.pos)):i.setSelection(Ue.create(i.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(i.insert(l,c),i.setSelection(Ue.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[iY({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),WY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,qY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,GY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,KY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,YY=Di.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",en(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Kl({find:WY,type:this.type}),Kl({find:GY,type:this.type})]},addPasteRules(){return[Yl({find:qY,type:this.type}),Yl({find:KY,type:this.type})]}}),JY=wr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",en(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),QY=wr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",en(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),MI=Di.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",en(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Jm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),PI=/^(\d+)\.\s$/,XY=wr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",en(this.options.HTMLAttributes,n),0]:["ol",en(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(QY.name,this.editor.getAttributes(MI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=sh({find:PI,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=sh({find:PI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(MI.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),ZY=wr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",en(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),eJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,tJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,nJ=Di.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",en(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){const t={};return wb()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[Kl({find:eJ,type:this.type})]},addPasteRules(){return[Yl({find:tJ,type:this.type})]}}),rJ=wr.create({name:"text",group:"inline"}),iJ=or.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,h,d,f,p,m,g,y;const _=[];return this.options.blockquote!==!1&&_.push(oY.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&_.push(hY.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&_.push(fY.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&_.push(gY.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&_.push(vY.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&_.push(bY.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&_.push(wY.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&_.push(NY.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&_.push(MY.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&_.push(PY.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&_.push(zY.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&_.push(jY.configure((h=this.options)===null||h===void 0?void 0:h.horizontalRule)),this.options.italic!==!1&&_.push(YY.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&_.push(JY.configure((f=this.options)===null||f===void 0?void 0:f.listItem)),this.options.orderedList!==!1&&_.push(XY.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&_.push(ZY.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&_.push(nJ.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&_.push(rJ.configure((y=this.options)===null||y===void 0?void 0:y.text)),_}}),sJ=or.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,considerAnyAsEmpty:!1,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Tr({key:new ms("placeholder"),props:{decorations:({doc:t,selection:e})=>{var n;const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=e,s=[];if(!r)return null;const{firstChild:o}=t.content,a=o&&o.type.isLeaf,l=o&&o.isAtom,c=this.options.considerAnyAsEmpty?!0:o&&o.type.name===((n=t.type.contentMatch.defaultType)===null||n===void 0?void 0:n.name),u=t.content.childCount<=1&&o&&c&&o.nodeSize<=2&&(!a||!l);return t.descendants((h,d)=>{const f=i>=d&&i<=d+h.nodeSize,p=!h.isLeaf&&!h.childCount;if((f||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];u&&m.push(this.options.emptyEditorClass);const g=gr.node(d,d+h.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:h,pos:d,hasAnchor:f}):this.options.placeholder});s.push(g)}return this.options.includeChildren}),Gt.create(t,s)}}})]}});function xI(t){return xA((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class oJ extends rY{constructor(e={}){return super(e),this.vueRenderers=Ql(new Map),this.contentComponent=null,this.reactiveState=xI(this.view.state),this.reactiveExtensionStorage=xI(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),dh(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const aJ=Ut({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=ie(),n=Ia();return zA(()=>{const r=t.editor;r&&r.options.element&&e.value&&Sa(()=>{if(!e.value||!r.options.element.firstChild)return;const i=j(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),ph(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=Jo(ND,{to:e.teleportElement,key:e.id},Jo(e.component,{ref:e.id,...e.props}));t.push(n)}),Jo("div",{ref:e=>{this.rootEl=e}},...t)}}),lJ={class:"editor"},cJ={class:"controlls"},uJ=Ut({__name:"tiptapEditor.vapor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=ie();return _i(()=>n.modelValue,s=>{var a,l;((a=i.value)==null?void 0:a.getHTML())!==s&&((l=i.value)==null||l.commands.setContent(s,!1))}),ec(()=>{i.value=new oJ({extensions:[iJ,sJ.configure({placeholder:"Write something "})],content:n.modelValue,onUpdate:()=>{var s;r("update:modelValue",(s=i.value)==null?void 0:s.getHTML())}})}),ph(()=>{var s;(s=i.value)==null||s.destroy()}),(s,o)=>(O(),L("div",lJ,[b("div",cJ,[i.value?(O(),L(se,{key:0},[b("button",{icon:"",big:"",onClick:o[0]||(o[0]=a=>i.value.chain().focus().toggleBold().run())}," format_bold "),b("button",{icon:"",big:"",onClick:o[1]||(o[1]=a=>i.value.chain().focus().toggleItalic().run())}," format_italic "),b("button",{icon:"",big:"",onClick:o[2]||(o[2]=a=>i.value.chain().focus().toggleBulletList().run())}," format_list_bulleted "),b("button",{icon:"",big:"",onClick:o[3]||(o[3]=a=>i.value.chain().focus().toggleOrderedList().run())}," format_list_numbered ")],64)):ue("",!0)]),Ee(j(aJ),{editor:i.value,class:"editor-content",placeholder:"bla"},null,8,["editor"])]))}}),cP=Fi(uJ,[["__scopeId","data-v-9ecefcbc"]]);function by(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function hJ(t){return(...e)=>!t(...e)}function dJ(t,e){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(e.trim())!==-1}function uP(t,e,n,r){return e?t.filter(i=>dJ(r(i,n),e)).sort((i,s)=>r(i,n).length-r(s,n).length):t}function fJ(t){return t.filter(e=>!e.$isLabel)}function Ey(t,e){return n=>n.reduce((r,i)=>i[t]&&i[t].length?(r.push({$groupLabel:i[e],$isLabel:!0}),r.concat(i[t])):r,[])}function pJ(t,e,n,r,i){return s=>s.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const a=uP(o[n],t,e,i);return a.length?{[r]:o[r],[n]:a}:[]})}const DI=(...t)=>e=>t.reduce((n,r)=>r(n),e);var mJ={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,e){return by(t)?"":e?t[e]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",e=t.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,e,this.label):uP(n,e,this.label,this.customLabel):n=this.groupValues?Ey(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(hJ(this.isSelected)):n,this.taggable&&e.length&&!this.isExistingOption(e)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:t}):n.unshift({isTag:!0,label:t})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,e,n){return DI(pJ(e,n,this.groupValues,this.groupLabel,this.customLabel),Ey(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return DI(Ey(this.groupValues,this.groupLabel),fJ)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const e=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(e)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(by(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const e=this.customLabel(t,this.label);return by(e)?"":e},select(t,e){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(e)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(e==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){e!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const e=this.options.find(n=>n[this.groupLabel]===t.$groupLabel);if(e){if(this.wholeGroupSelected(e)){this.$emit("remove",e[this.groupValues],this.id);const n=this.trackBy?e[this.groupValues].map(i=>i[this.trackBy]):e[this.groupValues],r=this.internalValue.filter(i=>n.indexOf(this.trackBy?i[this.trackBy]:i)===-1);this.$emit("update:modelValue",r)}else{let n=e[this.groupValues].filter(r=>!(this.isOptionDisabled(r)||this.isSelected(r)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,e=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const r=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",r)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&e&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const t=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},gJ={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,e){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight(t,e){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":e.$isLabel}];const n=this.options.find(r=>r[this.groupLabel]===e.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},Qi={name:"vue-multiselect",mixins:[mJ,gJ],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const yJ={ref:"tags",class:"multiselect__tags"},_J={class:"multiselect__tags-wrap"},vJ={class:"multiselect__spinner"},bJ={key:0},EJ={class:"multiselect__option"},TJ={class:"multiselect__option"},wJ=X("No elements found. Consider changing the search query."),SJ={class:"multiselect__option"},IJ=X("List is empty.");function AJ(t,e,n,r,i,s){return O(),We("div",{tabindex:t.searchable?-1:n.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":s.isAbove,"multiselect--has-options-group":s.hasOptionGroup},"multiselect"],onFocus:e[14]||(e[14]=o=>t.activate()),onBlur:e[15]||(e[15]=o=>t.searchable?!1:t.deactivate()),onKeydown:[e[16]||(e[16]=Fr(Ge(o=>t.pointerForward(),["self","prevent"]),["down"])),e[17]||(e[17]=Fr(Ge(o=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:e[18]||(e[18]=Fr(Ge(o=>t.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:e[19]||(e[19]=Fr(o=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[rn(t.$slots,"caret",{toggle:t.toggle},()=>[Ee("div",{onMousedown:e[1]||(e[1]=Ge(o=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),rn(t.$slots,"clear",{search:t.search}),Ee("div",yJ,[rn(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:s.visibleValues,isOpen:t.isOpen},()=>[$t(Ee("div",_J,[(O(!0),We(se,null,st(s.visibleValues,(o,a)=>rn(t.$slots,"tag",{option:o,search:t.search,remove:t.removeElement},()=>[(O(),We("span",{class:"multiselect__tag",key:a},[Ee("span",{textContent:ee(t.getOptionLabel(o))},null,8,["textContent"]),Ee("i",{tabindex:"1",onKeypress:Fr(Ge(l=>t.removeElement(o),["prevent"]),["enter"]),onMousedown:Ge(l=>t.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[_c,s.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>n.limit?rn(t.$slots,"limit",{key:0},()=>[Ee("strong",{class:"multiselect__strong",textContent:ee(n.limitText(t.internalValue.length-n.limit))},null,8,["textContent"])]):ue("v-if",!0)]),Ee(yf,{name:"multiselect__loading"},{default:ct(()=>[rn(t.$slots,"loading",{},()=>[$t(Ee("div",vJ,null,512),[[_c,n.loading]])])]),_:3}),t.searchable?(O(),We("input",{key:0,ref:"search",name:n.name,id:t.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:t.placeholder,style:s.inputStyle,value:t.search,disabled:n.disabled,tabindex:n.tabindex,onInput:e[2]||(e[2]=o=>t.updateSearch(o.target.value)),onFocus:e[3]||(e[3]=Ge(o=>t.activate(),["prevent"])),onBlur:e[4]||(e[4]=Ge(o=>t.deactivate(),["prevent"])),onKeyup:e[5]||(e[5]=Fr(o=>t.deactivate(),["esc"])),onKeydown:[e[6]||(e[6]=Fr(Ge(o=>t.pointerForward(),["prevent"]),["down"])),e[7]||(e[7]=Fr(Ge(o=>t.pointerBackward(),["prevent"]),["up"])),e[9]||(e[9]=Fr(Ge(o=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:e[8]||(e[8]=Fr(Ge(o=>t.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):ue("v-if",!0),s.isSingleLabelVisible?(O(),We("span",{key:1,class:"multiselect__single",onMousedown:e[10]||(e[10]=Ge((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[rn(t.$slots,"singleLabel",{option:s.singleValue},()=>[X(ee(t.currentOptionLabel),1)])],32)):ue("v-if",!0),s.isPlaceholderVisible?(O(),We("span",{key:2,class:"multiselect__placeholder",onMousedown:e[11]||(e[11]=Ge((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[rn(t.$slots,"placeholder",{},()=>[X(ee(t.placeholder),1)])],32)):ue("v-if",!0)],512),Ee(yf,{name:"multiselect"},{default:ct(()=>[$t(Ee("div",{class:"multiselect__content-wrapper",onFocus:e[12]||(e[12]=(...o)=>t.activate&&t.activate(...o)),tabindex:"-1",onMousedown:e[13]||(e[13]=Ge(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[Ee("ul",{class:"multiselect__content",style:s.contentStyle,role:"listbox",id:"listbox-"+t.id},[rn(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(O(),We("li",bJ,[Ee("span",EJ,[rn(t.$slots,"maxElements",{},()=>[X("Maximum of "+ee(t.max)+" options selected. First remove a selected option to select another.",1)])])])):ue("v-if",!0),!t.max||t.internalValue.length<t.max?(O(!0),We(se,{key:1},st(t.filteredOptions,(o,a)=>(O(),We("li",{class:"multiselect__element",key:a,id:t.id+"-"+a,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?ue("v-if",!0):(O(),We("span",{key:0,class:[t.optionHighlight(a,o),"multiselect__option"],onClick:Ge(l=>t.select(o),["stop"]),onMouseenter:Ge(l=>t.pointerSet(a),["self"]),"data-select":o&&o.isTag?t.tagPlaceholder:s.selectLabelText,"data-selected":s.selectedLabelText,"data-deselect":s.deselectLabelText},[rn(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Ee("span",null,ee(t.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(O(),We("span",{key:1,"data-select":t.groupSelect&&s.selectGroupLabelText,"data-deselect":t.groupSelect&&s.deselectGroupLabelText,class:[t.groupHighlight(a,o),"multiselect__option"],onMouseenter:Ge(l=>t.groupSelect&&t.pointerSet(a),["self"]),onMousedown:Ge(l=>t.selectGroup(o),["prevent"])},[rn(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Ee("span",null,ee(t.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):ue("v-if",!0)],8,["id","role"]))),128)):ue("v-if",!0),$t(Ee("li",null,[Ee("span",TJ,[rn(t.$slots,"noResult",{search:t.search},()=>[wJ])])],512),[[_c,n.showNoResults&&t.filteredOptions.length===0&&t.search&&!n.loading]]),$t(Ee("li",null,[Ee("span",SJ,[rn(t.$slots,"noOptions",{},()=>[IJ])])],512),[[_c,n.showNoOptions&&(t.options.length===0||s.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!n.loading]]),rn(t.$slots,"afterList")],12,["id"])],36),[[_c,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}Qi.render=AJ;const jc=t=>{const e=ie(t),n=["k","m"];for(let r=n.length-1;r>=0;r--){const i=1e3**(r+1);if(e.value>=i){let o=(e.value/i).toFixed(2).replace(/\.?0+$/,"");return o.length>4&&(o=o.slice(0,4)),o+n[r]}}return e.value.toString()},bu=(t,e)=>{function n(r){var s;const i=(s=t.value)==null?void 0:s.getBoundingClientRect();i&&(i.top<=r.clientY&&r.clientY<=i.top+i.height&&i.left<=r.clientX&&r.clientX<=i.left+i.width||e())}ec(()=>{document.addEventListener("mousedown",n)}),s1(()=>{document.removeEventListener("mousedown",n)})},Eo=t=>(Xl("data-v-b707477f"),t=t(),Zl(),t),CJ={key:0},kJ={class:"left-column"},RJ={class:"img-container"},OJ=["src"],NJ=Eo(()=>b("h3",{class:"fs-4"},"Points",-1)),MJ=Eo(()=>b("p",null,"the points the competitors will get when they complete the tile",-1)),PJ={class:"right-column"},xJ={icon:"",class:"pen fs-4"},DJ=Eo(()=>b("h3",{class:"fs-4"},"Tile type",-1)),LJ={key:0},VJ={class:"fs-4"},FJ={class:"drop-list-input"},UJ={key:1},BJ=Eo(()=>b("h3",{class:"fs-4"},"Drops",-1)),$J=Eo(()=>b("p",null,[X(" Add drops to the list of valid drops and configure the required amount."),b("br"),b("em",null,"if none are set it defaults to target count")],-1)),HJ={key:0,class:"drop-list-input"},zJ={key:0},jJ={class:"drop-list"},WJ={class:"drop-row"},qJ={class:"drop-list-input"},GJ={style:{"margin-left":"0","margin-right":"auto","font-weight":"bold"}},KJ={key:0},YJ={key:1},JJ=["onClick"],QJ={class:"drop-list-input"},XJ={key:0,class:"drop-list-input"},ZJ={class:"drop-list-input"},eQ={class:"drop-list-input"},tQ=Eo(()=>b("h3",{class:"fs-4"},"Metric",-1)),nQ=Eo(()=>b("p",null,"Search and select the metric you want to associate with this tile.",-1)),rQ={key:2},iQ=Eo(()=>b("p",null,[b("em",null,"these are example values in edit mode, in view mode it will be with actual data")],-1)),sQ={class:"spread"},oQ=["value","max"],aQ=Ut({__name:"EditTileModal.vapor",props:{localTileData:{}},emits:["save","cancel","delete"],setup(t,{expose:e,emit:n}){const r=t,i=ie(!1),s=ie();bu(s,()=>{y()});const o=ie({name:"",count:0,min:0,max:0}),a=ot(()=>{var I;return((I=r.localTileData)==null?void 0:I.type)=="drop"?"Total Count":"Required "+r.localTileData.type}),l=ot(()=>{var I;return((I=r.localTileData)==null?void 0:I.type)=="drop"?"Drop Count":"Required "+r.localTileData.type}),c=()=>{r.localTileData&&![void 0,""].includes(o.value.name)&&(r.localTileData.drops?r.localTileData.drops.push({id:iv(),...o.value}):r.localTileData.drops=[{id:iv(),...o.value}],o.value.count=0,o.value.min=0,o.value.max=0)},u=I=>{r.localTileData&&r.localTileData.drops&&r.localTileData.drops.indexOf(I)>-1&&r.localTileData.drops.splice(r.localTileData.drops.indexOf(I),1)},h=ie(["ehb","ehp","league_points","overall"]),d=ie(vN.filter(I=>!h.value.includes(I))),f=ie(zh.filter(I=>!["overall"].includes(I))),p=ie(mz.filter(I=>!h.value.includes(I))),m=ie([...nb,...d.value]),g=()=>{s.value&&s.value.showModal()},y=()=>{s.value&&(o.value.name="",s.value.close())};e({showModal:g,closeModal:y});const _=I=>{document.querySelector(I).focus()},v=I=>{[void 0,""].includes(I.target.innerHTML)&&(I.target.innerHTML="Please enter a title..."),r.localTileData.title=I.target.innerHTML};return(I,S)=>{var F,N,A,V,z,H,Z,M,D;const C=sr("font-awesome-icon");return O(),L("dialog",{class:"modal",ref_key:"dialog",ref:s},[r.localTileData?(O(),L("div",CJ,[b("div",kJ,[b("div",RJ,[b("img",{src:r.localTileData.image},null,8,OJ),$t(b("input",{required:"",type:"url","onUpdate:modelValue":S[0]||(S[0]=k=>r.localTileData.image=k)},null,512),[[hr,r.localTileData.image]])]),Ee(cP,{class:"editable",modelValue:r.localTileData.description,"onUpdate:modelValue":S[1]||(S[1]=k=>r.localTileData.description=k)},null,8,["modelValue"]),b("div",null,[NJ,MJ,b("label",null,[X("points value: "),$t(b("input",{type:"number",min:"0","onUpdate:modelValue":S[2]||(S[2]=k=>r.localTileData.points=k)},null,512),[[hr,r.localTileData.points]])]),b("label",null,[X("Repeatable "),$t(b("input",{toggle:"",type:"checkbox","onUpdate:modelValue":S[3]||(S[3]=k=>r.localTileData.repeatable=k)},null,512),[[Wy,r.localTileData.repeatable]]),X(" "+ee(r.localTileData.repeatable),1)])])]),b("div",PJ,[b("h2",{onClick:S[7]||(S[7]=k=>_("#title")),class:"fs-1 title"},[b("span",{ref:"props.localTileData.title",contenteditable:"",class:"editable",spellcheck:"false",onFocus:S[4]||(S[4]=k=>i.value=!0),onKeydown:S[5]||(S[5]=Fr(Ge(k=>{i.value=!1,v(k)},["prevent"]),["enter"])),onBlur:S[6]||(S[6]=Ge(k=>{i.value=!1,v(k)},["prevent"])),name:"title",id:"title"},ee(r.localTileData.title),545),b("span",xJ,[Ee(C,{icon:["fas","pen"]})])]),b("button",{submit:"",onClick:S[8]||(S[8]=k=>I.$emit("save"))},"Save changes"),b("button",{cancel:"",onClick:S[9]||(S[9]=k=>I.$emit("cancel"))},"Cancel"),b("button",{icon:"",onClick:S[10]||(S[10]=k=>I.$emit("delete"))},"delete"),b("small",null,[X(" tile id: "),b("code",null,ee((F=r.localTileData)==null?void 0:F.id),1)]),b("div",null,[DJ,Ee(j(Qi),{modelValue:r.localTileData.type,"onUpdate:modelValue":S[11]||(S[11]=k=>r.localTileData.type=k),options:["drop","exp","kc"],"close-on-select":!0,"clear-on-select":!1,"allow-empty":!1},null,8,["modelValue"])]),["kc","exp"].includes((N=r.localTileData)==null?void 0:N.type)?(O(),L("div",LJ,[b("h3",VJ,ee(l.value),1),b("p",null," The required "+ee(r.localTileData.type)+" per metric the competitors need to complete the tile ",1),b("div",null,[b("label",FJ,[X(ee(a.value)+": ",1),$t(b("input",{type:"number",min:"0","onUpdate:modelValue":S[12]||(S[12]=k=>r.localTileData.count=k)},null,512),[[hr,r.localTileData.count]])])])])):ue("",!0),((A=r.localTileData)==null?void 0:A.type)=="drop"?(O(),L("div",UJ,[BJ,$J,b("div",null,[b("label",null,[X(" Individual amount "),$t(b("input",{type:"checkbox",toggle:"",choice:"","onUpdate:modelValue":S[13]||(S[13]=k=>r.localTileData.needAny=k)},null,512),[[Wy,r.localTileData.needAny]]),X(" Total amount ")])]),b("div",null,[(V=r.localTileData)!=null&&V.needAny?(O(),L("label",HJ,[X(" Required amount: "),$t(b("input",{type:"number",min:"0","onUpdate:modelValue":S[14]||(S[14]=k=>r.localTileData.count=k)},null,512),[[hr,r.localTileData.count]])])):ue("",!0)]),(z=r.localTileData)!=null&&z.drops&&((H=r.localTileData)==null?void 0:H.drops.length)>0?(O(),L("hr",zJ)):ue("",!0),b("ul",jJ,[(O(!0),L(se,null,st(r.localTileData.drops,k=>(O(),L("li",null,[b("div",WJ,[b("div",qJ,[b("p",GJ,ee(k.name),1),(k.min||k.max)&&r.localTileData.needAny?(O(),L("small",KJ,[k.min?(O(),L(se,{key:0},[X("min: "+ee(k.min),1)],64)):ue("",!0),k.min&&k.max?(O(),L(se,{key:1},[X(" / ")],64)):ue("",!0),k.max?(O(),L(se,{key:2},[X("max: "+ee(k.max),1)],64)):ue("",!0)])):ue("",!0),r.localTileData.needAny?ue("",!0):(O(),L("div",YJ,ee(k.count)+"x",1)),b("button",{icon:"",outline:"",onClick:P=>u(k)}," delete ",8,JJ)])])]))),256)),b("li",null,[b("div",QJ,[X(" Drop: "),$t(b("input",{type:"text","onUpdate:modelValue":S[15]||(S[15]=k=>o.value.name=k),placeholder:"Bandos tassets"},null,512),[[hr,o.value.name]])]),r.localTileData.needAny?r.localTileData.needAny?(O(),L(se,{key:1},[b("div",ZJ,[X(" Minimum needed: "),$t(b("input",{type:"number",placeholder:"unset","onUpdate:modelValue":S[17]||(S[17]=k=>o.value.min=k)},null,512),[[hr,o.value.min]])]),b("div",eQ,[X(" Maximum allowed: "),$t(b("input",{type:"number",placeholder:"unset","onUpdate:modelValue":S[18]||(S[18]=k=>o.value.max=k)},null,512),[[hr,o.value.max]])])],64)):ue("",!0):(O(),L("div",XJ,[X(" Required ammount: "),$t(b("input",{type:"number","onUpdate:modelValue":S[16]||(S[16]=k=>o.value.count=k)},null,512),[[hr,o.value.count]])])),b("button",{onClick:c},"Add Drop")])])])):ue("",!0),b("div",null,[tQ,nQ,((Z=r.localTileData)==null?void 0:Z.type)=="drop"?(O(),We(j(Qi),{key:0,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":S[19]||(S[19]=k=>r.localTileData.metric=k),options:p.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):ue("",!0),((M=r.localTileData)==null?void 0:M.type)=="kc"?(O(),We(j(Qi),{key:1,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":S[20]||(S[20]=k=>r.localTileData.metric=k),options:m.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):ue("",!0),((D=r.localTileData)==null?void 0:D.type)=="exp"?(O(),We(j(Qi),{key:2,max:4,modelValue:r.localTileData.metric,"onUpdate:modelValue":S[21]||(S[21]=k=>r.localTileData.metric=k),options:f.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):ue("",!0)]),["kc","exp"].includes(r.localTileData.type)&&r.localTileData.metric?(O(),L("div",rQ,[(O(!0),L(se,null,st(r.localTileData.metric,k=>(O(),L(se,null,[b("h3",null,ee(k.replace("_"," ")),1),iQ,b("div",sQ,[b("progress",{min:"0",value:Math.random()*r.localTileData.count,max:r.localTileData.count},null,8,oQ),b("p",null,ee(j(jc)(Math.floor(Math.random()*r.localTileData.count))),1)])],64))),256))])):ue("",!0)])])):ue("",!0)],512)}}}),lQ=Fi(aQ,[["__scopeId","data-v-b707477f"]]),Ab=t=>(Xl("data-v-f98a7a3e"),t=t(),Zl(),t),cQ=Ab(()=>b("span",{icon:""},"sync",-1)),uQ=Ab(()=>b("span",{icon:""},"manage_accounts",-1)),hQ={id:"board-info"},dQ={key:0,class:"fs-2"},fQ={key:0,id:"controlls-are-editing"},pQ={key:1,id:"controlls-are-viewing"},mQ=["src","onClick"],gQ=Ab(()=>b("h2",null,"Permissions",-1)),yQ=["onClick"],_Q=Ut({__name:"editBoard.vapor",async setup(t){var qe,w;let e,n;const r=fc();r.value="Edit board - Bingo Bongo";const i=([e,n]=qn(()=>ni()),e=await e,n(),e),s=go(),o=ie({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),a=ie(),l=ie(),c=ie(),u=ie(null),h=ie(),d=()=>{var E;return(E=c.value)==null?void 0:E.showModal()},f=()=>{var E;return(E=c.value)==null?void 0:E.close()},p=ie(""),m=ie(!1),g=ie(!1),y=ie(!1),_=ie(),v=ie(null),I=ie(0),S=ie([]);let C=[];const F=new rb({apiKey:"zpyy03zybxt0oiznjw6e1mz2",userAgent:"_Odinh"}),N=ie(parseInt(s.params.boardUUID));window.addEventListener("keydown",E=>{switch(E.key){case"Escape":a.value&&a.value.closeModal&&l.value&&l.value.closeModal&&(a.value.closeModal(),l.value.closeModal(),f(),_.value=null,v.value=null,g.value=!1,g.value=!1);break}});const{data:A,promise:V}=Ma(Ye(ke,"Boards",s.params.boardUUID)),{data:z,promise:H}=wi(er(ke,"Boards",s.params.boardUUID,"Tiles"));[e,n]=qn(()=>Promise.all([V.value,H.value])),await e,n();const Z=ie(((qe=A.value)==null?void 0:qe.boardWidth)||5),M=ie(z.value),D=()=>{y.value=!0,k()},k=()=>{a.value&&a.value.showModal&&y.value&&a.value.showModal(),l.value&&l.value.showModal&&g.value&&l.value.showModal()},P=()=>{a.value&&a.value.closeModal&&y.value&&a.value.closeModal(),l.value&&l.value.closeModal&&g.value&&!y.value&&l.value.closeModal()};S.value=(w=A.value)!=null&&w.orderOfList?A.value.orderOfList:M.value.map(E=>E.id);const x=ot(()=>M.value===void 0?[]:M.value.toSorted((E,R)=>S.value.indexOf(E.id)-S.value.indexOf(R.id)));rj(u,x,{inverted:!0,handle:".handle",ghostClass:"blue-background-class",animation:200,onUpdate:E=>{xN(x.value,E.oldIndex,E.newIndex),Sa(()=>{S.value=x.value.map(R=>R.id)})}});const re=E=>{var R;E==="add"?Z.value=Math.min(Z.value+1,12):E==="remove"&&(Z.value=Math.max(Z.value-1,3)),(R=u.value)==null||R.style.setProperty("--width",Z.value.toString())},_e=async()=>{m.value=!1;try{const E=Ye(ke,"Boards",s.params.boardUUID),R=er(E,"Tiles"),B=Vc(ke),U=ie(new Set);M.value.forEach(q=>{var le;(le=q.metric)==null||le.forEach(we=>{U.value.add(we)})}),B.update(E,{orderOfList:S.value,boardWidth:Z.value,trackingMetrics:[...U.value]});const Q=await W_(R),ne={};Q.forEach(q=>{const le=q.id;ne[le]=!0;const we=q.data(),ve=M.value.find(Ie=>Ie.id===le);if(ve){if(JSON.stringify(ve)!==JSON.stringify(we)){const Ie=Ye(R,le);B.update(Ie,ve)}}else{const Ie=Ye(R,le);B.delete(Ie)}}),M.value.forEach(q=>{if(!ne[q.id]){const le=Ye(R,q.id);B.set(le,q)}}),await B.commit();const{data:Y,promise:W}=wi(er(ke,"Boards",s.params.boardUUID,"Tiles"),{once:!0});await W.value,M.value=Y.value}catch(E){console.error("Error synchronizing tiles:",E)}},Ne=async()=>{M.value=z.value,Z.value=I.value,m.value=!1,S.value=C},$e=()=>{const E=[...z.value];M.value=E,C=S.value,I.value=Z.value,m.value=!0},ht=async()=>{var B;const E=Ye(ke,"Boards",s.params.boardUUID,"Tiles",v.value.id),R=Ye(ke,"Boards",s.params.boardUUID);try{const U=Vc(ke);(await Zr(E)).data()?U.update(E,v.value):U.set(E,v.value);const Y=((B=(await Zr(R)).data())==null?void 0:B.orderOfList)||[];Y.includes(v.value.id)||(Y.push(v.value.id),U.update(R,{orderOfList:Y})),await U.commit(),g.value=!1,l.value&&l.value.closeModal&&l.value.closeModal(),_.value=v.value;const W=er(ke,"Boards",s.params.boardUUID,"Tiles"),q=await W_(W);M.value=q.docs.map(ve=>ve.data());const le=new Set;M.value.forEach(ve=>{var Ie;(Ie=ve.metric)==null||Ie.forEach(je=>{le.add(je)})});const we=Vc(ke);we.update(R,{boardWidth:Z.value,trackingMetrics:Array.from(le)}),await we.commit()}catch(U){console.error("Error saving tile:",U)}},_t=()=>{l.value&&l.value.closeModal&&(g.value=!1,v.value=null,_.value=null,l.value.closeModal())},Bt=()=>{const E={..._.value};v.value=E,g.value=!0,l.value.showModal()},vt=()=>{const E=iv(),R=ij();M.value.push({id:E,title:R,description:"a sample description",image:"https://oldschool.runescape.wiki/images/Frog_%28Ruins_of_Camdozaal%29.png?6ae5e",type:"drop",needAny:!1,points:0,count:0,repeatable:!1}),S.value.push(E)},$=()=>{_.value&&(M.value=M.value.filter(E=>E.id!==_.value.id),S.value=x.value.map(E=>E.id),a.value.closeModal(),l.value.closeModal(),_e())},ce=async()=>{var R;const E=Date.now();if(A.value&&(A.value.trackingMetrics=ie([...A.value.trackingMetrics,"overall","hitpoints"]),A.value.trackingMetrics.forEach(B=>{})),(R=A.value)!=null&&R.lastUpdate&&E-A.value.lastUpdate<36e5)return console.log("no need to update"),null;{const B=Vc(ke);A.value.lastUpdate=E,B.update(Ye(ke,"Boards",s.params.boardUUID),{lastUpdate:A.value.lastUpdate}),A.value.trackingMetrics.push("overall"),A.value.trackingMetrics.push("hitpoints"),await Promise.all(A.value.trackingMetrics.map(async U=>{const Q=Ye(ke,"Boards",s.params.boardUUID,"Metrics",U);await F.competitions.getCompetitionDetails(N.value,U).then(ne=>{const Y=te(ne,E),W="t-"+E,q=Y[W];B.set(Q,{[E]:q,metric:U,timestamp:E},{merge:!0})}).catch(ne=>{console.error("Error fetching competition details:",ne)})})),await B.commit()}},te=(E,R)=>{const B={},U="t-"+R;return B[U]={},E.participations.forEach(Q=>{const ne=Q.player.username,Y=Q.progress.gained;B[U][ne]={name:ne,gained:Y,teamName:Q.teamName}}),B},ae=()=>{ts(Ye(ke,"Boards",s.params.boardUUID),{moderators:jO(p.value)})},Me=E=>{var R,B;(R=A==null?void 0:A.value)==null||R.moderators.splice(A.value.moderators.indexOf(E),1),ts(Ye(ke,"Boards",s.params.boardUUID),{moderators:(B=A==null?void 0:A.value)==null?void 0:B.moderators})};return(E,R)=>{var U,Q,ne,Y;const B=sr("router-link");return O(),L(se,null,[b("section",null,[b("a",{class:"btn",onClick:Ge(ce,["prevent"])},[X(" Update all metrics"),cQ]),b("a",{class:"btn",onClick:R[0]||(R[0]=Ge(W=>d(),["prevent"]))},[X(" Edit permissions"),uQ]),Ee(B,{icon:"",class:"btn",to:{name:"viewBoard",params:{boardUUID:j(s).params.boardUUID}}},{default:ct(()=>[X("visibility")]),_:1},8,["to"]),Ee(B,{icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:j(s).params.boardUUID}}},{default:ct(()=>[X(" library_add_check ")]),_:1},8,["to"]),Ee(B,{icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:j(s).params.boardUUID}}},{default:ct(()=>[X("group")]),_:1},8,["to"])]),b("section",hQ,[j(A)?(O(),L("h1",dQ,ee(j(A).name),1)):ue("",!0),X(" Board ID: "),b("code",null,ee(j(s).params.boardUUID),1),(U=j(A))!=null&&U.start?(O(),L(se,{key:1},[b("p",null," Starts: "+ee(new Date(j(A).start.seconds*1e3).toLocaleDateString(void 0,o.value)),1),b("code",null,"<t:"+ee(j(A).start.seconds)+":F>",1)],64)):ue("",!0),(Q=j(A))!=null&&Q.end?(O(),L(se,{key:2},[b("p",null," Ends: "+ee(new Date(j(A).end.seconds*1e3).toLocaleDateString(void 0,o.value)),1),b("code",null,"<t:"+ee(j(A).end.seconds)+":F>",1)],64)):ue("",!0)]),m.value?(O(),L("section",fQ,[b("button",{onClick:R[1]||(R[1]=W=>re("remove"))},"-"),$t(b("input",{id:"widthInputElement",ref_key:"widthInputForm",ref:h,class:"widthInput","onUpdate:modelValue":R[2]||(R[2]=W=>Z.value=W),type:"number",min:"3",max:"12",onBlur:R[3]||(R[3]=()=>{Z.value=Math.min(Z.value,12),Z.value=Math.max(Z.value,3)})},null,544),[[hr,Z.value]]),b("button",{onClick:R[4]||(R[4]=W=>re("add"))},"+"),b("button",{submit:"",onClick:R[5]||(R[5]=W=>_e())},"save"),b("button",{outline:"",onClick:R[6]||(R[6]=W=>Ne())},"cancel")])):(O(),L("section",pQ,[b("button",{class:"startEditing",onClick:R[7]||(R[7]=W=>$e())},"reorder / edit board")])),b("section",{ref_key:"el",ref:u,class:"board",style:rr({"--width":Z.value,position:"relative"})},[(O(!0),L(se,null,st(x.value,W=>(O(),L("div",{class:Mr(["tile",{handle:m.value}]),key:W.id},[b("img",{class:"tile--image",src:W.image,onClick:()=>{g.value=!0,_.value=W,Bt()}},null,8,mQ)],2))),128)),M.value.length<100&&m.value?(O(),L("button",{key:0,class:"add_tile",icon:"",onClick:R[8]||(R[8]=W=>vt()),style:rr({order:x.value.length+1})}," add_box ",4)):ue("",!0)],4),Ee(lj,{ref_key:"modalEle",ref:a},{header:ct(()=>{var W;return[X(" Delete tile: "+ee((W=_.value)==null?void 0:W.title),1)]}),body:ct(()=>{var W;return[X(" are you sure you want to delete the tile "+ee((W=_.value)==null?void 0:W.title),1)]}),controls:ct(()=>[b("button",{submit:"",onClick:$},"REMOVE"),b("button",{outline:"",onClick:R[9]||(R[9]=W=>P())},"Cancel")]),_:1},512),Ee(lQ,{ref_key:"asideModalEle",ref:l,selectedTile:_.value,localTileData:v.value,onSave:ht,onCancel:_t,onDelete:D},null,8,["selectedTile","localTileData"]),b("dialog",{ref_key:"permisionsModalEle",ref:c},[gQ,X(" "+ee((ne=j(i))==null?void 0:ne.uid)+" ",1),b("ul",null,[b("li",null,[X(" Owner: "),b("code",null,ee((Y=j(A))==null?void 0:Y.ownerID),1)]),j(A)&&j(A).moderators?(O(!0),L(se,{key:0},st(j(A).moderators,W=>(O(),L("li",null,[X(ee(W),1),b("button",{icon:"",onClick:Ge(q=>Me(W),["prevent"])},"delete",8,yQ)]))),256)):ue("",!0),b("li",null,[X(" new moderator: "),$t(b("input",{type:"text","onUpdate:modelValue":R[10]||(R[10]=W=>p.value=W)},null,512),[[hr,p.value]]),b("button",{onClick:Ge(ae,["prevent"])}," add ")])]),b("button",{onClick:R[11]||(R[11]=W=>f())},"close")],512)],64)}}}),vQ=Fi(_Q,[["__scopeId","data-v-f98a7a3e"]]),hP=t=>(Xl("data-v-bdf9890d"),t=t(),Zl(),t),bQ={key:0},EQ={class:"left-column"},TQ={class:"img-container"},wQ=["src"],SQ={class:"verifyTile"},IQ={key:0,icon:""},AQ=["innerHTML"],CQ={key:0},kQ=hP(()=>b("em",null,"This tile is repeatable",-1)),RQ=[kQ],OQ={class:"right-column"},NQ={class:"fs-1 title",style:{"margin-bottom":"var(--size-4)"}},MQ={key:0},PQ={key:0,class:"fs-4"},xQ={key:1,class:"fs-4"},DQ=hP(()=>b("div",null,null,-1)),LQ={key:0},VQ={key:1},FQ={key:0,class:"fs-4"},UQ={key:0,class:"metric-item"},BQ={class:"spread"},$Q=["value","max"],HQ={key:1,class:"metric-item"},zQ={class:"spread"},jQ=["value","max"],WQ={class:"totals"},qQ=Ut({__name:"ViewTileModal.vapor",props:{selectedTile:{},latestData:{},teams:{}},emits:["close"],setup(t,{expose:e}){const n=t,r=ie();bu(r,()=>{f()});const i=ot(()=>{var p,m;return((m=(p=n.selectedTile)==null?void 0:p.verified)==null?void 0:m.map(g=>g.teamName))||[]}),s=p=>{const m={};for(const y in p){const _=p[y],v=_.teamName,I=_.gained||0;m[v]?m[v]+=I:m[v]=I}return Object.keys(m).map(y=>{var _;return{teamName:y,icon:(_=n.teams.filter(v=>v.teamName==y)[0])==null?void 0:_.icon,total:m[y]}})},o=p=>{const m=ie(n.latestData[p]);if(!m)return console.error(`Metric ${p} not found`),null;const g=m.value.data;if(g==null)return null;const y=s(g).toSorted((_,v)=>_.teamName<v.teamName?-1:_.teamName>v.teamName?1:0);return{...m.value,totals:y}},a=p=>{const m=ie(0),g=o(p);if(!g||!g.totals||g.totals.length===0)return m.value;const y=g.totals.sort((_,v)=>v.total-_.total);return m.value=y[0].total,m.value},l=ot(()=>{const p={};return n.teams.forEach(m=>{var g,y;p[m.teamName]=((y=(g=n.selectedTile)==null?void 0:g.collected)==null?void 0:y.filter(_=>_.teamName===m.teamName))||[]}),p}),c=(p,m)=>{var y,_;return`${((_=(y=l.value[p])==null?void 0:y.filter(v=>v.id===m.id))==null?void 0:_.length)||0} `},u=(p,m)=>{var y,_;const g=((_=(y=l.value[p])==null?void 0:y.filter(v=>v.id===m.id))==null?void 0:_.length)||0;return{completed:g>=m.count,notStarted:g===0}};function h(p){return p.toLowerCase().split(" ").map(function(m){return m.charAt(0).toUpperCase()+m.slice(1)}).join(" ")}const d=()=>{r.value&&r.value.showModal()},f=()=>{r.value&&r.value.close()};return e({showModal:d,closeModal:f}),(p,m)=>{var y,_;const g=sr("font-awesome-icon");return O(),L("dialog",{class:"modal",ref_key:"dialog",ref:r},[n.selectedTile?(O(),L("div",bQ,[b("div",EQ,[b("div",TQ,[b("img",{src:n.selectedTile.image},null,8,wQ)]),b("button",{onClick:m[0]||(m[0]=Ge(v=>p.$emit("close"),["prevent"]))},"close"),b("div",SQ,[(O(!0),L(se,null,st(p.teams,v=>(O(),L("div",{key:v.teamName},[v!=null&&v.icon?(O(),We(g,{key:0,title:v.teamName,class:Mr(["verify-icon",{verified:i.value&&i.value.includes(v.teamName)}]),icon:["fas",v.icon]},null,8,["title","class","icon"])):(O(),L(se,{key:1},[i.value&&i.value.includes(v.teamName)?(O(),L("span",IQ," check ")):ue("",!0),X(" "+ee(v.teamName),1)],64))]))),128))]),b("div",{innerHTML:n.selectedTile.description},null,8,AQ),b("small",null," tile id: "+ee((y=n.selectedTile)==null?void 0:y.id),1),b("div",null,"Points: "+ee(n.selectedTile.points),1),n.selectedTile.repeatable?(O(),L("div",CQ,RQ)):ue("",!0)]),b("div",OQ,[b("h2",NQ,ee(n.selectedTile.title),1),((_=n.selectedTile)==null?void 0:_.type)=="drop"?(O(),L("div",MQ,[n.selectedTile.needAny===!1?(O(),L("h2",PQ," Get the following items: ")):(O(),L("h2",xQ," Get a total of "+ee(n.selectedTile.count)+" items: ",1)),b("div",{class:"drop-table",style:rr({"--_width":p.teams.length})},[DQ,(O(!0),L(se,null,st(p.teams,v=>(O(),L("div",null,[v!=null&&v.icon?(O(),We(g,{key:0,icon:["fas",v.icon]},null,8,["icon"])):ue("",!0),b("template",null,[X(ee(v.teamName),1)])]))),256)),(O(!0),L(se,null,st(n.selectedTile.drops,v=>(O(),L(se,null,[b("div",null,[X(ee(v.name)+" ",1),v.min!==v.max?(O(),L("small",LQ,[n.selectedTile.needAny&&v.min&&v.min?(O(),L(se,{key:0},[X("min: "+ee(v.min),1)],64)):ue("",!0),n.selectedTile.needAny&&v.max&&v.max>0?(O(),L(se,{key:1},[X(" max: "+ee(v.max),1)],64)):ue("",!0)])):ue("",!0),v.min==v.max&&v.min!=0?(O(),L("small",VQ," exactly: "+ee(v.min),1)):ue("",!0)]),(O(!0),L(se,null,st(p.teams,I=>(O(),L("div",{class:Mr(u(I.teamName,v))},[b("span",null,ee(c(I.teamName,v)),1),n.selectedTile.needAny===!1?(O(),L(se,{key:0},[X("/ "+ee(v.count),1)],64)):ue("",!0)],2))),256))],64))),256))],4)])):ue("",!0),b("div",null,[["kc","exp"].includes(n.selectedTile.type)?ue("",!0):(O(),L("h3",FQ," Metric "))]),b("div",null,[(O(!0),L(se,null,st(n.selectedTile.metric,v=>{var I,S;return O(),L(se,null,[b("h3",{class:"metric-list",onClick:m[1]||(m[1]=Ge(C=>{const F=C.target;console.log(F.classList.toggle("open-list"))},["prevent"]))},[["kc","exp"].includes(n.selectedTile.type)?(O(),L(se,{key:0},[X(ee(j(jc)(n.selectedTile.count)),1)],64)):ue("",!0),X(" "+ee(h(v.replaceAll("_"," ")))+" ",1),["kc","exp"].includes(n.selectedTile.type)?(O(),L(se,{key:1},[X(ee(h(n.selectedTile.type)),1)],64)):ue("",!0)]),["kc","exp"].includes(n.selectedTile.type)?(O(),L("div",UQ,[(O(!0),L(se,null,st((I=o(v))==null?void 0:I.totals,C=>(O(),L("div",null,[b("div",BQ,[C!=null&&C.icon?(O(),We(g,{key:0,icon:["fas",C.icon],title:C.teamName},null,8,["icon","title"])):(O(),L(se,{key:1},[X(ee(C.teamName),1)],64)),b("progress",{min:"0",value:C.total,max:n.selectedTile.count},null,8,$Q),b("p",{class:Mr(["totals",{completed:C.total>=n.selectedTile.count,notStarted:C.total==0}])},ee(C.total>=n.selectedTile.count?j(jc)(n.selectedTile.count)+"+":j(jc)(C.total))+ee(" "+h(n.selectedTile.type)),3)])]))),256))])):(O(),L("div",HQ,[(O(!0),L(se,null,st((S=o(v))==null?void 0:S.totals,C=>(O(),L("div",null,[b("div",zQ,[C!=null&&C.icon?(O(),We(g,{key:0,icon:["fas",C.icon],title:C.teamName},null,8,["icon","title"])):(O(),L(se,{key:1},[X(ee(C.teamName),1)],64)),b("progress",{min:"0",value:C.total!=0?C.total+a(v)*.05:0,max:a(v)+a(v)*.1},null,8,jQ),b("p",WQ,ee(j(jc)(C.total)),1)])]))),256))]))],64)}),256))])])])):ue("",!0)],512)}}}),GQ=Fi(qQ,[["__scopeId","data-v-bdf9890d"]]),KQ={class:"fs-2"},YQ={style:{display:"flex","flex-direction":"row",gap:"var(--gap)","font-size":"var(--fs-4)"}},JQ=["onClick"],QQ=["src"],XQ={class:"verifyTile"},ZQ=Ut({__name:"viewBoard.vapor",async setup(t){var F;let e,n;const r=([e,n]=qn(()=>ni()),e=await e,n(),e),i=go(),s=fc(),{data:o,promise:a}=Ma(Ye(ke,"Boards",i.params.boardUUID)),l=N=>{var A;return((A=N.verified)==null?void 0:A.map(V=>V.teamName))||[]},{data:c,promise:u}=wi(er(ke,"Boards",i.params.boardUUID,"Metrics"));(F=o.value)!=null&&F.name&&(s.value=o.value.name+" - Bingo Bongo");const{data:h,promise:d}=wi(er(ke,"Boards",i.params.boardUUID,"Tiles")),{data:f,promise:p}=wi(er(ke,"Boards",i.params.boardUUID,"Groups"));[e,n]=qn(()=>Promise.all([a.value,u.value,p.value,d.value])),await e,n();const m=ie(h.value),g=ot(()=>{const N={};return f.value&&h.value&&(f.value.forEach(A=>{N[A.teamName]=0}),h.value.forEach(A=>{A.verified&&A.verified.forEach(V=>{f.value.some(z=>z.teamName===V.teamName)&&(N[V.teamName]+=A.points)})})),N}),y=ot(()=>{if(m.value===void 0)return[];if(!o.value||!o.value.orderOfList)return m.value.map(A=>A);const N=o.value.orderOfList;return m.value.toSorted((A,V)=>N.indexOf(A.id)-N.indexOf(V.id))});window.addEventListener("keydown",N=>{switch(N.key){case"Escape":v.value&&v.value.closeModal&&(_.value={},S());break}});const _=ie(null),v=ie(void 0),I=()=>{var N;(N=v.value)==null||N.showModal()},S=()=>{var N;_.value=null,(N=v.value)==null||N.closeModal()};function C(N){const A={};return N.forEach(V=>{A[V.metric]={metric:V.metric,data:V[V.timestamp]}}),A}return(N,A)=>{var H,Z,M,D,k,P;const V=sr("router-link"),z=sr("font-awesome-icon");return j(o)?(O(),L(se,{key:0},[b("section",null,[((H=j(r))==null?void 0:H.uid)==((Z=j(o))==null?void 0:Z.ownerID)?(O(),We(V,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:j(i).params.boardUUID}}},{default:ct(()=>[X("edit")]),_:1},8,["to"])):ue("",!0),((M=j(r))==null?void 0:M.uid)==((D=j(o))==null?void 0:D.ownerID)?(O(),We(V,{key:1,icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:j(i).params.boardUUID}}},{default:ct(()=>[X(" library_add_check ")]),_:1},8,["to"])):ue("",!0),((k=j(r))==null?void 0:k.uid)==((P=j(o))==null?void 0:P.ownerID)?(O(),We(V,{key:2,icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:j(i).params.boardUUID}}},{default:ct(()=>[X("group")]),_:1},8,["to"])):ue("",!0)]),b("h1",KQ,ee(j(o).name),1),b("div",YQ,[(O(!0),L(se,null,st(j(f),x=>(O(),L("div",null,[x!=null&&x.icon?(O(),We(z,{key:0,icon:["fas",x.icon],title:x.teamName},null,8,["icon","title"])):(O(),L(se,{key:1},[X(ee(x.teamName),1)],64)),X(": "+ee(g.value[x.teamName]),1)]))),256))]),b("section",{ref:"el",class:"board",style:rr({"--width":j(o).boardWidth,position:"relative"})},[(O(!0),L(se,null,st(y.value,x=>(O(),L("div",{class:"tile",key:x.id,onClick:Ge(()=>{_.value=x,I()},["prevent"])},[b("img",{class:"tile--image",src:x.image},null,8,QQ),b("div",XQ,[(O(!0),L(se,null,st(j(f),re=>(O(),L("div",{key:re.teamName},[re!=null&&re.icon?(O(),We(z,{key:0,titie:re.teamName,class:Mr(["verify-icon",{verified:l(x)&&l(x).includes(re.teamName)}]),icon:["fas",re.icon]},null,8,["titie","class","icon"])):ue("",!0)]))),128))])],8,JQ))),128))],4),Ee(GQ,{ref_key:"asideModalEle",ref:v,onClose:S,selectedTile:_.value,latestData:C(j(c)),teams:j(f)},null,8,["selectedTile","latestData","teams"])],64)):ue("",!0)}}}),eX=Fi(ZQ,[["__scopeId","data-v-e0020737"]]),Cb=t=>(Xl("data-v-a2279517"),t=t(),Zl(),t),tX={class:"fs-2"},nX={ref:"el"},rX=Cb(()=>b("h3",null,"Description:",-1)),iX=["innerHTML"],sX=Cb(()=>b("h3",null,"Drops:",-1)),oX=Cb(()=>b("h3",null,"Metrics:",-1)),aX=Ut({__name:"viewBoardList.vapor",async setup(t){var m;let e,n;const r=([e,n]=qn(()=>ni()),e=await e,n(),e),i=go(),s=fc(),{data:o,promise:a}=Ma(Ye(ke,"Boards",i.params.boardUUID));(m=o.value)!=null&&m.name&&(s.value=o.value.name+" - Bingo Bongo");const{data:l,promise:c}=wi(er(ke,"Boards",i.params.boardUUID,"Tiles"));[e,n]=qn(()=>Promise.all([a.value,c.value])),await e,n();const u=ie(l.value),h=ot(()=>{if(u.value===void 0)return[];if(!o.value||!o.value.orderOfList)return u.value.map(y=>y);const g=o.value.orderOfList;return u.value.toSorted((y,_)=>g.indexOf(y.id)-g.indexOf(_.id))});window.addEventListener("keydown",g=>{switch(g.key){case"Escape":f.value&&f.value.closeModal&&(d.value={},p());break}});const d=ie(null),f=ie(void 0),p=()=>{var g;d.value=null,(g=f.value)==null||g.closeModal()};return(g,y)=>{var v,I,S,C,F,N;const _=sr("router-link");return j(o)?(O(),L(se,{key:0},[b("section",null,[((v=j(r))==null?void 0:v.uid)==((I=j(o))==null?void 0:I.ownerID)?(O(),We(_,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:j(i).params.boardUUID}}},{default:ct(()=>[X("edit")]),_:1},8,["to"])):ue("",!0),((S=j(r))==null?void 0:S.uid)==((C=j(o))==null?void 0:C.ownerID)?(O(),We(_,{key:1,icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:j(i).params.boardUUID}}},{default:ct(()=>[X(" library_add_check ")]),_:1},8,["to"])):ue("",!0),((F=j(r))==null?void 0:F.uid)==((N=j(o))==null?void 0:N.ownerID)?(O(),We(_,{key:2,icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:j(i).params.boardUUID}}},{default:ct(()=>[X("group")]),_:1},8,["to"])):ue("",!0)]),b("h1",tX,ee(j(o).name),1),b("section",nX,[(O(!0),L(se,null,st(h.value,A=>(O(),L("div",{style:rr({"--_image":`url('${A.image}')`}),key:A.id},[b("h2",null,ee(A.title),1),rX,b("div",{innerHTML:A.description},null,8,iX),sX,(O(!0),L(se,null,st(A.drops,V=>(O(),L("div",null,ee(V.name),1))),256)),oX,(O(!0),L(se,null,st(A.metric,V=>(O(),L("div",null,ee(V),1))),256))],4))),128))],512)],64)):ue("",!0)}}}),lX=Fi(aX,[["__scopeId","data-v-a2279517"]]),cX=Bp('<h1 class="fs-4">Typography</h1><hr><h1 class="fs-3">Heading level 1</h1><h2 class="fs-2">Heading level 2</h2><h3 class="fs-1">Heading level 3</h3><h4>Heading level 4</h4><h5>Heading level 5</h5><h2>Paragraph</h2><p> Lorem ipsum dolor sit amet, <strong>consectetur</strong> adipiscing elit. In id risus quis purus mollis lobortis vel ac tellus. Nam pharetra lorem quis dui commodo dapibus. Curabitur aliquet sapien vitae ligula pretium sollicitudin. Sed sed magna eu risus placerat gravida non sit amet augue. Morbi volutpat lobortis imperdiet. Sed elit purus, commodo a mi in, condimentum sagittis urna. Etiam condimentum pharetra cursus. Aliquam erat volutpat. In vel diam nulla. Praesent faucibus augue quis dui vehicula, a consequat est fringilla. Sed nec nisi fermentum, maximus nunc ac, hendrerit lorem. Proin mollis metus in erat dictum egestas. Proin nec ipsum viverra, scelerisque nisi in, faucibus nulla. </p><p> Aliquam erat volutpat. Donec sagittis libero ac justo suscipit laoreet. Suspendisse ut sem vel augue vulputate sodales blandit sit amet metus. Quisque porta consectetur efficitur. Duis venenatis nisl in mollis convallis. Pellentesque quis accumsan orci. Nulla porta arcu quis laoreet sagittis. Aliquam erat volutpat. Suspendisse sagittis, turpis vel posuere suscipit, dolor nunc sodales est, quis cursus dui elit vel nisl. </p><p> Nunc accumsan molestie nisl non malesuada. In egestas tellus lectus, nec venenatis tellus pulvinar vel. Fusce consectetur sodales ante, sed vehicula mauris pulvinar non. Cras tempor ante nec nibh iaculis aliquet. In quis velit non dui dapibus tempus quis sed velit. Morbi a ornare sem. Maecenas ornare molestie ex, sed maximus lorem viverra at. In tincidunt vel purus et suscipit. Aenean aliquam neque et ipsum volutpat, eu laoreet justo vestibulum. Maecenas quam turpis, convallis id nibh efficitur, interdum volutpat elit. Suspendisse potenti. Nulla in vulputate massa. </p><p> Quisque laoreet tincidunt massa, non pulvinar eros euismod sit amet. Maecenas non lorem vitae lorem condimentum posuere. Maecenas ac lectus elit. Nullam feugiat scelerisque interdum. Nullam volutpat tincidunt viverra. Suspendisse egestas venenatis orci. Nunc vehicula ut dolor aliquet finibus. </p><p> Donec tempus vestibulum odio vel consectetur. Donec sed feugiat tortor. Mauris iaculis nunc in orci suscipit, vel egestas orci pulvinar. In dapibus tortor ornare, eleifend eros eu, suscipit neque. Morbi quis pellentesque turpis, sit amet imperdiet augue. Mauris porttitor congue imperdiet. Quisque aliquet id quam a placerat. Fusce maximus in nibh vel ultricies. </p><p> Normal, <abbr title="Abbreviations">abbr</abbr>, <del>del</del>, <dfn>dfn</dfn>, <em>em</em>, <ins>ins</ins>, <mark>mark</mark>, <s>strike through</s>, <small>small</small>, <strong>strong</strong>, <sub>sub</sub>, <sup>sup</sup>, <u>u</u></p><h2>Links</h2>',15),uX=b("p",null,[X(" These are links: "),b("a",{href:"?2017-06-2703%3A30%3A17",target:"_blank",onclick:"return false;"},"never visited link (just don't click or it will becomes visited)"),X(", "),b("a",{href:"."},"visited link"),X(". Mouse hover to see effects. ")],-1),hX=Bp("<h2>Lists</h2><h3>Unordered list</h3><ul><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ul><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ul></li><li>List item</li><li>List item</li><li>List item</li></ul><h3>Ordered list</h3><ol><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ol><li>Nested List Item</li><li>Nested List Item</li><li>Nested List Item</li></ol></li><li>List item</li><li>List item</li><li>List item</li></ol><h3>Mixed</h3><ul><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ol><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ol></li><li>List item</li><li>List item</li><li>List item</li></ul><ol><li>List item with a much longer description or more content.</li><li>List item</li><li> List item <ul><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ol><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ol><li>Nested List Item</li><li>Nested List Item</li><li> Nested List Item <ul><li>Nested list item</li><li>Nested list item</li><li>Nested list item</li></ul></li></ol></li></ol></li><li>Nested List Item</li><li>Nested List Item</li></ul></li><li>List item</li><li>List item</li><li>List item</li></ol><h3>Definition list</h3><dl><dt>Definition list</dt><dd> Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </dd><dt>Lorem ipsum dolor sit amet</dt><dd> Consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </dd></dl><h3>Details &amp; Summary</h3>",11),dX=b("details",null,[b("summary",null,"Question 1"),b("p",null,[b("strong",null,"Pellentesque habitant morbi tristique"),X(" senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. "),b("em",null,"Aenean ultricies mi vitae est."),X(" Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, "),b("code",null,"commodo vitae"),X(", ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. "),b("a",{href:"#",target:"_blank",onclick:"return false;"},"Donec non enim"),X(" in turpis pulvinar facilisis. Ut felis. ")]),b("details",null,[b("summary",null,"Related documents"),b("ul",null,[b("li",null,[b("a",{href:"#",onclick:"return false;"},"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.")]),b("li",null,[b("a",{href:"#",onclick:"return false;"},"Aliquam tincidunt mauris eu risus.")]),b("li",null,[b("a",{href:"#",onclick:"return false;"},"Lorem ipsum dolor sit amet, consectetuer adipiscing elit.")]),b("li",null,[b("a",{href:"#",onclick:"return false;"},"Aliquam tincidunt mauris eu risus.")])])])],-1),fX=Bp(`<details><summary>Question 2</summary><p> Duis consequat metus et eros rutrum, interdum facilisis urna interdum. Etiam facilisis diam in libero varius ultricies id id est. Sed lacinia pellentesque sem vel sagittis. </p></details><h2>Blockquote</h2><blockquote> Those people who think they know everything are a great annoyance to those of us who do.<cite>Isaac Asimov</cite></blockquote><h2>Code</h2><p> This is inline code <code>&lt;div&gt;div element&lt;/div&gt;</code>. This is sample output <samp>sample</samp> And below is block code. </p><pre>&lt;div&gt;
    div element
    &lt;p&gt;paragraph&lt;/p&gt;
&lt;/div&gt;</pre><p> The input keyboard <kbd>Ctrl</kbd>+<kbd>S</kbd>. This is variable: <var>y</var> = <var>m</var><var>x</var> + <var>b</var></p><h2>Table</h2><table><thead><tr><th>Table heading</th><th>Table heading</th></tr></thead><tfoot><tr><th>Table footer</th><th>Table footer</th></tr></tfoot><tbody><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr><tr><td>Table data</td><td>Table data</td></tr></tbody></table><h2>Form elements</h2>`,10),pX=b("legend",null,"Input types",-1),mX=b("p",null,[b("label",{for:"input-type-color"},"Input Color"),b("br"),b("input",{id:"input-type-color",type:"color"})],-1),gX=b("p",null,[b("label",{for:"input-type-number"},"Input Number"),b("br"),b("input",{id:"input-type-number",type:"number"})],-1),yX=b("label",{for:"input-type-range"},"Input Range",-1),_X=b("br",null,null,-1),vX=b("label",{for:"input-type-range"},"Progress",-1),bX=b("br",null,null,-1),EX=["value"],TX=b("p",null,[b("label",{for:"input-type-text"},"Input Text"),b("br"),b("input",{id:"input-type-text",type:"text"})],-1),wX=b("p",null,[b("label",{for:"input-type-url"},"Input Url"),b("br"),b("input",{id:"input-type-url",type:"url"})],-1),SX=Bp('<p><label><input type="radio" name="input-radio" value="1"> Input radio option 1</label><br><label><input type="radio" name="input-radio" value="2"> Input radio option 2</label></p><p><label><input type="radio" name="input-radio-disabled" value="1" disabled> Input radio option 1</label><br><label><input type="radio" name="input-radio-disabled" value="2" disabled> Input radio option 2</label></p><p><label><input type="checkbox"> Input checkbox 1</label><br><label><input type="checkbox"> Input checkbox 2</label></p>',3),IX=b("p",null,[b("label",null,[b("input",{type:"checkbox",toggle:""}),X(" Input checkbox 1")]),b("br"),b("label",null,[b("input",{type:"checkbox",toggle:""}),X(" Input checkbox 2")])],-1),AX=b("p",null,[b("label",null,[b("input",{type:"checkbox",disabled:""}),X(" Input checkbox 1")]),b("br"),b("label",null,[b("input",{type:"checkbox",disabled:""}),X(" Input checkbox 2")])],-1),CX=b("label",{for:"input-textarea"},"Textarea",-1),kX=b("br",null,null,-1),RX=b("label",{for:"input-select"},"Select box",-1),OX=b("br",null,null,-1),NX=b("label",{for:"input-select-multiple"},"Select multiple",-1),MX=b("br",null,null,-1),PX=b("p",null,[b("label",{for:"input-select-disabled"},"Select disabled"),b("br"),b("select",{id:"input-select-disabled",disabled:""},[b("option",null,"1"),b("option",null,"2"),b("option",null,"3")])],-1),xX=b("p",null,[b("button",null,"Normal button"),b("button",{submit:"",onclick:"return false;"},"Submit button"),b("button",{reset:"",onclick:"return false;"},"Reset button"),b("button",{disabled:""},"Disabled button")],-1),DX=b("p",null,[b("input",{type:"button",value:"Input normal button"}),b("input",{type:"button",submit:"",value:"Input submit button",onclick:"return false;"}),b("input",{type:"button",reset:"",value:"Input reset button",onclick:"return false;"}),b("input",{type:"button",disabled:"",value:"Input disabled button"})],-1),LX=b("p",null,[b("a",{class:"button",href:"#",onclick:"return false;"},"Anchor button"),b("a",{class:"button",submit:"",href:"#",onclick:"return false;"},"Anchor disabled button"),b("a",{class:"button",reset:"",href:"#",onclick:"return false;"},"Anchor disabled button"),b("a",{class:"button",disabled:"",href:"#",onclick:"return false;"},"Anchor disabled button")],-1),VX=b("p",null,[X("Thanks to "),b("a",{href:"http://rundiz.com"},"rundiz.com")],-1),FX=Ut({__name:"colorPallete.vapor",setup(t){const e=ie(),n=ie(),r=ie(),i=ie(10),s=ie(["option 1","option 2","option 3"]);return(o,a)=>(O(),L(se,null,[cX,uX,hX,dX,fX,b("form",null,[b("fieldset",null,[pX,mX,gX,b("p",null,[yX,_X,$t(b("input",{id:"input-type-range",type:"range","onUpdate:modelValue":a[0]||(a[0]=l=>i.value=l)},null,512),[[hr,i.value]])]),b("p",null,[vX,bX,b("progress",{id:"progress",max:"100",value:i.value},null,8,EX)]),TX,wX]),SX,IX,AX,b("p",null,[CX,kX,Ee(cP,{modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value=l)},null,8,["modelValue"])]),b("p",null,[RX,OX,Ee(j(Qi),{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=l=>n.value=l),options:s.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])]),b("p",null,[NX,MX,Ee(j(Qi),{max:3,modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=l=>r.value=l),options:s.value,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])]),PX,xX,DX,LX]),VX],64))}}),dP=t=>(Xl("data-v-8810900f"),t=t(),Zl(),t),UX=dP(()=>b("div",null,[b("h1",null,"teams")],-1)),BX=dP(()=>b("span",{icon:""},"sync",-1)),$X=Ut({__name:"teamViewer.vapor",async setup(t){let e,n;const r=go(),i=([e,n]=qn(()=>ni()),e=await e,n(),e),{data:s,promise:o}=Ma(Ye(ke,"Boards",r.params.boardUUID)),{data:a,promise:l}=wi(er(ke,"Boards",r.params.boardUUID,"Groups")),c=f=>"https://oldschool.runescape.wiki/images/"+(f.charAt(0).toUpperCase()+f.slice(1))+"_chat_badge.png";[e,n]=qn(()=>Promise.all([l.value,o.value])),await e,n();const u=new rb({apiKey:"zpyy03zybxt0oiznjw6e1mz2",userAgent:"_Odinh"}),h=async()=>{const f=Vc(ke);try{const p=await u.competitions.getCompetitionDetails(parseInt(r.params.boardUUID)),m=d(p);a.value.forEach(g=>{Object.keys(m).findIndex(_=>_===g.teamName)!==-1?f.update(Ye(ke,"Boards",r.params.boardUUID,"Groups",g.id),{...m[g.teamName]}):f.delete(Ye(ke,"Boards",r.params.boardUUID,"Groups",g.id))}),Object.values(m).forEach(g=>{if(a.value.findIndex(_=>_.teamName===g.teamName)===-1){const _=Ye(er(ke,"Boards",r.params.boardUUID,"Groups"));f.set(_,g)}}),await f.commit()}catch(p){console.error("Error synchronizing data:",p)}},d=f=>{var g;const p=ie(),m=ie({});return p.value=f.participations,(g=p.value)==null||g.map(y=>{m.value[y.teamName]={teamName:y.teamName,players:[],stats:null}}),p.value.map(y=>{delete y.player.ehb,delete y.player.exp,delete y.player.ehp,m.value[y.teamName].players=[...m.value[y.teamName].players,m.value[y.teamName].players[y.player.username]={...y.player}]}),m.value};return(f,p)=>{var g,y,_,v;const m=sr("router-link");return O(),L(se,null,[b("section",null,[((g=j(i))==null?void 0:g.uid)==((y=j(s))==null?void 0:y.ownerID)?(O(),We(m,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:j(r).params.boardUUID}}},{default:ct(()=>[X("edit")]),_:1},8,["to"])):ue("",!0),((_=j(i))==null?void 0:_.uid)==((v=j(s))==null?void 0:v.ownerID)?(O(),We(m,{key:1,icon:"",class:"btn",to:{name:"moderateBoard",params:{boardUUID:j(r).params.boardUUID}}},{default:ct(()=>[X(" library_add_check ")]),_:1},8,["to"])):ue("",!0),Ee(m,{icon:"",class:"btn",to:{name:"viewBoard",params:{boardUUID:j(r).params.boardUUID}}},{default:ct(()=>[X("visibility")]),_:1},8,["to"])]),UX,b("button",{onClick:Ge(h,["prevent"])},[X("synch teams"),BX]),b("div",{class:"teams",style:rr({"--width":j(a).length})},[(O(!0),L(se,null,st(j(a),I=>(O(),L("div",{key:I.id},[b("h2",null,ee(I.teamName),1),b("ul",null,[(O(!0),L(se,null,st(I.players,S=>(O(),L("li",{key:S.id,class:Mr({hasHelmet:S.type!=="regular"}),style:rr({"--marker":"url('"+c(S.type)+"')   "})},ee(S.displayName),7))),128))])]))),128))],4)],64)}}}),HX=Fi($X,[["__scopeId","data-v-8810900f"]]),kb=t=>(Xl("data-v-71358022"),t=t(),Zl(),t),zX={key:0},jX={class:"left-column"},WX={class:"img-container"},qX=["src"],GX={class:"verifyTile"},KX={key:0,icon:""},YX=["onClick"],JX=["innerHTML"],QX={key:0},XX=kb(()=>b("em",null,"This tile is repeatable",-1)),ZX=[XX],eZ={class:"right-column"},tZ={class:"fs-1 title",style:{"margin-bottom":"var(--size-4)"}},nZ={key:0},rZ={key:0,class:"fs-4"},iZ={key:1,class:"fs-4"},sZ=kb(()=>b("div",null,null,-1)),oZ=["onClick"],aZ={class:"fs-2"},lZ={class:"controls"},cZ={class:"mini__team-list"},uZ={class:"mini__team-header"},hZ={class:"mini__team-icon"},dZ={class:"mini__team-total"},fZ={class:"mini__team-player-entry"},pZ=["onClick"],mZ=kb(()=>b("h2",null,"Add a drop:",-1)),gZ=Ut({__name:"verifyTileModal.vapor",props:{selectedTile:{},teams:{}},emits:["close"],setup(t,{expose:e,emit:n}){const r=t,i=ie(),s=go(),o=ie();bu(o,()=>{o.value.close()});const a=ie();bu(a,()=>{m()});const l=ie();bu(l,()=>{y()});const c=ie(null),u=ie(null),h=ie({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),d=()=>{var M;return(M=o.value)==null?void 0:M.showModal()},f=()=>{var M;return(M=o.value)==null?void 0:M.close()},p=M=>{var D;Z.value=M,(D=a.value)==null||D.showModal()},m=()=>{var M;return(M=a.value)==null?void 0:M.close()},g=()=>{var M;return(M=l.value)==null?void 0:M.showModal()},y=()=>{var M;return(M=l.value)==null?void 0:M.close()},_=ot(()=>c.value?c.value.players.map(M=>M.displayName):[]),v=async()=>{var P;const M=ie(new Date);if((P=i.value)!=null&&P.value&&(M.value=new Date(i.value.value)),!r.selectedTile||!c.value||!u.value||!Z.value)return;const D={playerName:u.value,timestamp:M.value,teamName:c.value.teamName,id:Z.value.id},k=r.selectedTile.collected?{...r.selectedTile,collected:[...r.selectedTile.collected,D]}:{...r.selectedTile,collected:[D]};await ts(Ye(ke,"Boards",s.params.boardUUID,"Tiles",r.selectedTile.id),k),c.value=null,u.value=null},I=async M=>{var P;if(!r.selectedTile)return;const D=((P=r.selectedTile.collected)==null?void 0:P.filter(x=>x!==M))||[],k={...r.selectedTile,collected:D};await ts(Ye(ke,"Boards",s.params.boardUUID,"Tiles",r.selectedTile.id),k)},S=ot(()=>{const M={};return r.teams.forEach(D=>{var k,P;M[D.teamName]=((P=(k=r.selectedTile)==null?void 0:k.collected)==null?void 0:P.filter(x=>x.teamName===D.teamName))||[]}),M}),C=ot(()=>{var M,D;return((D=(M=r.selectedTile)==null?void 0:M.verified)==null?void 0:D.map(k=>k.teamName))||[]}),F=async({teamName:M})=>{if(!r.selectedTile)return;const k=C.value.includes(M)?(r.selectedTile.verified||[]).filter(P=>P.teamName!==M):[...r.selectedTile.verified||[],{teamName:M,timestamp:new Date}];await ts(Ye(ke,"Boards",s.params.boardUUID,"Tiles",r.selectedTile.id),{...r.selectedTile,verified:k})},N=M=>new Date(M*1e3).toLocaleDateString(void 0,h.value),A=(M,D)=>{var P,x;const k=((x=(P=S.value[M.teamName])==null?void 0:P.filter(re=>re.id===D.id))==null?void 0:x.length)||0;return{completed:k>=D.count,notStarted:k===0}},V=(M,D)=>{var P,x;return`${((x=(P=S.value[M.teamName])==null?void 0:P.filter(re=>re.id===D.id))==null?void 0:x.length)||0}`},z=M=>{var D;return((D=S.value[M.teamName])==null?void 0:D.length)||0},H=M=>S.value[M.teamName]||[],Z=ie(null);return e({showModal:d,closeModal:f}),(M,D)=>{const k=sr("font-awesome-icon");return O(),L(se,null,[b("dialog",{class:"modal",ref_key:"dialog",ref:o},[r.selectedTile?(O(),L("div",zX,[b("div",jX,[b("div",WX,[b("img",{src:r.selectedTile.image},null,8,qX)]),b("div",GX,[(O(!0),L(se,null,st(M.teams,P=>(O(),L("div",{key:P.teamName},[P!=null&&P.icon?(O(),We(k,{key:0,titie:P.teamName,class:Mr(["verify-icon",{verified:C.value&&C.value.includes(P.teamName)}]),icon:["fas",P.icon],onClick:x=>F({teamName:P.teamName})},null,8,["titie","class","icon","onClick"])):(O(),L(se,{key:1},[C.value&&C.value.includes(P.teamName)?(O(),L("span",KX," check ")):ue("",!0),X(" "+ee(P.teamName)+" ",1),b("button",{onClick:x=>F({teamName:P.teamName})},"verify",8,YX)],64))]))),128))]),b("button",{onClick:D[0]||(D[0]=Ge(P=>M.$emit("close"),["prevent"]))},"close"),b("div",{innerHTML:r.selectedTile.description},null,8,JX),b("small",null," tile id: "+ee(r.selectedTile.id),1),b("div",null,"Points: "+ee(r.selectedTile.points),1),r.selectedTile.repeatable?(O(),L("div",QX,ZX)):ue("",!0)]),b("div",eZ,[b("h2",tZ,ee(r.selectedTile.title),1),r.selectedTile.type=="drop"?(O(),L("div",nZ,[r.selectedTile.needAny===!1?(O(),L("h2",rZ," Get the following items: ")):(O(),L("h2",iZ," Get a total of "+ee(r.selectedTile.count)+" items: ",1)),b("div",{class:"drop-table",style:rr({"--_width":M.teams.length})},[sZ,(O(!0),L(se,null,st(M.teams,P=>(O(),L("div",null,ee(P.teamName),1))),256)),(O(!0),L(se,null,st(r.selectedTile.drops,P=>(O(),L(se,null,[b("div",null,[b("button",{icon:"",onClick:Ge(x=>p(P),["prevent"])}," playlist_add",8,oZ),X(ee(P.name),1)]),(O(!0),L(se,null,st(M.teams,x=>(O(),L("div",{class:Mr(A(x,P))},[b("span",null,ee(V(x,P)),1),r.selectedTile.needAny===!1?(O(),L(se,{key:0},[X("/ "+ee(P.count),1)],64)):ue("",!0)],2))),256))],64))),256))],4)])):ue("",!0)])])):ue("",!0)],512),b("dialog",{ref_key:"mini",ref:a,class:"mini"},[Z.value?(O(),L(se,{key:0},[b("h2",aZ,ee(Z.value.name)+":",1),b("div",lZ,[b("button",{onClick:D[1]||(D[1]=Ge(P=>g(),["prevent"]))},"Add drop"),b("button",{onClick:D[2]||(D[2]=P=>m())},"Close")]),(O(!0),L(se,null,st(M.teams,P=>{var x;return O(),L("div",cZ,[b("div",uZ,[b("div",hZ,ee(P.teamName),1),b("div",dZ,[X(ee(z(P))+" ",1),(x=r.selectedTile)!=null&&x.needAny?ue("",!0):(O(),L(se,{key:0},[X("/ "+ee(Z.value.count),1)],64))])]),(O(!0),L(se,null,st(H(P),re=>(O(),L("div",fZ,[X(ee(re.playerName)+": "+ee(N(re.timestamp.seconds))+" ",1),b("div",{icon:"",class:"mini__team-player-remove",onClick:_e=>I(re)}," delete ",8,pZ)]))),256))])}),256))],64)):ue("",!0)],512),b("dialog",{ref_key:"micro",ref:l,class:"micro"},[mZ,Ee(j(Qi),{modelValue:c.value,"onUpdate:modelValue":D[3]||(D[3]=P=>c.value=P),options:M.teams,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,label:"teamName",placeholder:"Choose a team"},null,8,["modelValue","options"]),Ee(j(Qi),{modelValue:u.value,"onUpdate:modelValue":D[4]||(D[4]=P=>u.value=P),options:_.value,multiple:!1,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"allow-empty":!0,placeholder:"Choose a team"},null,8,["modelValue","options"]),b("input",{type:"datetime-local",ref_key:"dateTime",ref:i},null,512),b("button",{onClick:D[5]||(D[5]=P=>v())},"add"),b("button",{onClick:D[6]||(D[6]=P=>y())},"close")],512)],64)}}}),yZ=Fi(gZ,[["__scopeId","data-v-71358022"]]),_Z={class:"fs-2"},vZ=["onClick"],bZ=["src"],EZ=Ut({__name:"moderateBoard.vapor",async setup(t){var _;let e,n;const r=([e,n]=qn(()=>ni()),e=await e,n(),e),i=go(),s=fc(),{data:o,promise:a}=Ma(Ye(ke,"Boards",i.params.boardUUID));(_=o.value)!=null&&_.name&&(s.value=o.value.name+" - Bingo Bongo");const{data:l,promise:c}=wi(er(ke,"Boards",i.params.boardUUID,"Tiles")),{data:u,promise:h}=wi(er(ke,"Boards",i.params.boardUUID,"Groups"));[e,n]=qn(()=>Promise.all([a.value,h.value,c.value])),await e,n();const d=ie(l.value),f=ot(()=>{if(d.value===void 0)return[];if(!o.value||!o.value.orderOfList)return d.value.map(I=>I);const v=ie(o.value.orderOfList);return d.value.toSorted((I,S)=>v.value.indexOf(I.id)-v.value.indexOf(S.id))}),p=ie(null);zA(()=>{var S;const v=(S=p.value)==null?void 0:S.id,I=d.value.find(C=>C.id===v);I&&(p.value=I)});const m=ie(void 0),g=()=>{var v;(v=m.value)==null||v.showModal()},y=()=>{var v;p.value=null,(v=m.value)==null||v.closeModal()};return(v,I)=>{var C,F,N,A,V,z;const S=sr("router-link");return j(o)?(O(),L(se,{key:0},[b("section",null,[((C=j(r))==null?void 0:C.uid)==((F=j(o))==null?void 0:F.ownerID)?(O(),We(S,{key:0,icon:"",class:"btn",to:{name:"editBoard",params:{boardUUID:j(i).params.boardUUID}}},{default:ct(()=>[X("edit")]),_:1},8,["to"])):ue("",!0),((N=j(r))==null?void 0:N.uid)==((A=j(o))==null?void 0:A.ownerID)?(O(),We(S,{key:1,icon:"",class:"btn",to:{name:"viewBoard",params:{boardUUID:j(i).params.boardUUID}}},{default:ct(()=>[X("visibility")]),_:1},8,["to"])):ue("",!0),((V=j(r))==null?void 0:V.uid)==((z=j(o))==null?void 0:z.ownerID)?(O(),We(S,{key:2,icon:"",class:"btn",to:{name:"teamViewer",params:{boardUUID:j(i).params.boardUUID}}},{default:ct(()=>[X("group")]),_:1},8,["to"])):ue("",!0)]),b("h1",_Z,ee(j(o).name),1),b("section",{ref:"el",class:"board",style:rr({"--width":j(o).boardWidth,position:"relative"})},[(O(!0),L(se,null,st(f.value,H=>(O(),L("div",{class:"tile",style:rr({"--_image":`url('${H.image}')`}),key:H.id,onClick:Ge(()=>{p.value=H,g()},["prevent"])},[b("img",{class:"tile--image",src:H.image},null,8,bZ)],12,vZ))),128))],4),Ee(yZ,{ref_key:"asideModalEle",ref:m,onClose:y,selectedTile:p.value,teams:j(u)},null,8,["selectedTile","teams"])],64)):ue("",!0)}}}),TZ=Fi(EZ,[["__scopeId","data-v-ecca50ab"]]),wZ=b("h1",{class:"font-size-H"},"List all boards",-1),SZ=b("h2",null,"Published boards:",-1),IZ={key:0},AZ={key:0},CZ=Ut({__name:"allPublishedBoards.vapor",async setup(t){let e,n;const{data:r,promise:i}=wi(er(ke,"Boards"));return[e,n]=qn(()=>i.value),await e,n(),(s,o)=>{const a=sr("router-link");return O(),L(se,null,[wZ,SZ,j(r)?(O(),L("div",IZ,[j(r)?(O(!0),L(se,{key:0},st(j(r),l=>(O(),L("div",null,[l.published?(O(),L("div",AZ,[X(ee(l.name)+" ",1),Ee(a,{to:{name:"viewBoard",params:{boardUUID:l.id}},class:"btn",icon:""},{default:ct(()=>[X(" visibility ")]),_:2},1032,["to"])])):ue("",!0)]))),256)):ue("",!0)])):ue("",!0)],64)}}}),fP=wH({history:X$(),routes:[{path:"/new",name:"createNewBingo",component:wz},{path:"/boards",name:"Boards",component:CZ},{path:"/login",name:"loginScreen",component:Oz},{path:"/view/:boardUUID",name:"viewBoard",component:eX},{path:"/list/:boardUUID",name:"viewBoardList",component:lX},{path:"/edit/:boardUUID",name:"editBoard",component:vQ},{path:"/verify/:boardUUID",name:"moderateBoard",component:TZ},{path:"/teams/:boardUUID",name:"teamViewer",component:HX},{path:"/color/",name:"color",component:FX},{path:"/",name:"Home",component:GH}]});fP.beforeEach(async t=>{if(["editBoard","teamViewer","moderateBoard"].includes(t.name)&&!(await OZ(t.params.boardUUID)||kZ()))return{name:"loginScreen"};if(t.name=="createNewBingo"&&!await RZ())return{name:"loginScreen"};if(t.name=="viewBoard"&&!await NZ(t.params.boardUUID))return{name:"loginScreen"}});const kZ=async()=>{const t=await ni();if(t){const n=(await Zr(Ye(ke,"Users",t.uid))).data();if(n&&n.type=="Admin")return!0}return!1},RZ=async()=>{const t=await ni();if(t){const n=(await Zr(Ye(ke,"Users",t.uid))).data();if(n&&n.banned)return!1}return!!(t!=null&&t.uid)},OZ=async t=>{var i;const e=await ni();if(e){const o=(await Zr(Ye(ke,"Users",e.uid))).data();if(o&&o.banned)return!1}const r=(await Zr(Ye(ke,"Boards",t))).data();return r&&r.ownerID===(e==null?void 0:e.uid)||r&&((i=r.moderators)==null?void 0:i.includes(e==null?void 0:e.uid))},NZ=async t=>{const e=await ni();if(e){const s=(await Zr(Ye(ke,"Users",e.uid))).data();if(s&&s.banned)return!1}const r=(await Zr(Ye(ke,"Boards",t))).data();return r&&r.ownerID===(e==null?void 0:e.uid)||r&&r.published};function LI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LI(Object(n),!0).forEach(function(r){tn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function MZ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function PZ(t,e,n){return e&&VI(t.prototype,e),n&&VI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function tn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rb(t,e){return DZ(t)||VZ(t,e)||pP(t,e)||UZ()}function Yh(t){return xZ(t)||LZ(t)||pP(t)||FZ()}function xZ(t){if(Array.isArray(t))return Av(t)}function DZ(t){if(Array.isArray(t))return t}function LZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VZ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function pP(t,e){if(t){if(typeof t=="string")return Av(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Av(t,e)}}function Av(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var FI=function(){},Ob={},mP={},gP=null,yP={mark:FI,measure:FI};try{typeof window<"u"&&(Ob=window),typeof document<"u"&&(mP=document),typeof MutationObserver<"u"&&(gP=MutationObserver),typeof performance<"u"&&(yP=performance)}catch{}var BZ=Ob.navigator||{},UI=BZ.userAgent,BI=UI===void 0?"":UI,lo=Ob,Ct=mP,$I=gP,Nd=yP;lo.document;var gs=!!Ct.documentElement&&!!Ct.head&&typeof Ct.addEventListener=="function"&&typeof Ct.createElement=="function",_P=~BI.indexOf("MSIE")||~BI.indexOf("Trident/"),Md,Pd,xd,Dd,Ld,cs="___FONT_AWESOME___",Cv=16,vP="fa",bP="svg-inline--fa",va="data-fa-i2svg",kv="data-fa-pseudo-element",$Z="data-fa-pseudo-element-pending",Nb="data-prefix",Mb="data-icon",HI="fontawesome-i2svg",HZ="async",zZ=["HTML","HEAD","STYLE","SCRIPT"],EP=function(){try{return!0}catch{return!1}}(),It="classic",Vt="sharp",Pb=[It,Vt];function Jh(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[It]}})}var oh=Jh((Md={},tn(Md,It,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),tn(Md,Vt,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Md)),ah=Jh((Pd={},tn(Pd,It,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),tn(Pd,Vt,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Pd)),lh=Jh((xd={},tn(xd,It,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),tn(xd,Vt,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),xd)),jZ=Jh((Dd={},tn(Dd,It,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),tn(Dd,Vt,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Dd)),WZ=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,TP="fa-layers-text",qZ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,GZ=Jh((Ld={},tn(Ld,It,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),tn(Ld,Vt,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),Ld)),wP=[1,2,3,4,5,6,7,8,9,10],KZ=wP.concat([11,12,13,14,15,16,17,18,19,20]),YZ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],qo={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},ch=new Set;Object.keys(ah[It]).map(ch.add.bind(ch));Object.keys(ah[Vt]).map(ch.add.bind(ch));var JZ=[].concat(Pb,Yh(ch),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",qo.GROUP,qo.SWAP_OPACITY,qo.PRIMARY,qo.SECONDARY]).concat(wP.map(function(t){return"".concat(t,"x")})).concat(KZ.map(function(t){return"w-".concat(t)})),Eu=lo.FontAwesomeConfig||{};function QZ(t){var e=Ct.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function XZ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Ct&&typeof Ct.querySelector=="function"){var ZZ=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];ZZ.forEach(function(t){var e=Rb(t,2),n=e[0],r=e[1],i=XZ(QZ(n));i!=null&&(Eu[r]=i)})}var SP={styleDefault:"solid",familyDefault:"classic",cssPrefix:vP,replacementClass:bP,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Eu.familyPrefix&&(Eu.cssPrefix=Eu.familyPrefix);var Jl=me(me({},SP),Eu);Jl.autoReplaceSvg||(Jl.observeMutations=!1);var Te={};Object.keys(SP).forEach(function(t){Object.defineProperty(Te,t,{enumerable:!0,set:function(n){Jl[t]=n,Tu.forEach(function(r){return r(Te)})},get:function(){return Jl[t]}})});Object.defineProperty(Te,"familyPrefix",{enumerable:!0,set:function(e){Jl.cssPrefix=e,Tu.forEach(function(n){return n(Te)})},get:function(){return Jl.cssPrefix}});lo.FontAwesomeConfig=Te;var Tu=[];function eee(t){return Tu.push(t),function(){Tu.splice(Tu.indexOf(t),1)}}var ws=Cv,yi={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function tee(t){if(!(!t||!gs)){var e=Ct.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Ct.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Ct.head.insertBefore(e,r),t}}var nee="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function uh(){for(var t=12,e="";t-- >0;)e+=nee[Math.random()*62|0];return e}function mc(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function xb(t){return t.classList?mc(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function IP(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ree(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(IP(t[n]),'" ')},"").trim()}function Qm(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function Db(t){return t.size!==yi.size||t.x!==yi.x||t.y!==yi.y||t.rotate!==yi.rotate||t.flipX||t.flipY}function iee(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function see(t){var e=t.transform,n=t.width,r=n===void 0?Cv:n,i=t.height,s=i===void 0?Cv:i,o=t.startCentered,a=o===void 0?!1:o,l="";return a&&_P?l+="translate(".concat(e.x/ws-r/2,"em, ").concat(e.y/ws-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/ws,"em), calc(-50% + ").concat(e.y/ws,"em)) "):l+="translate(".concat(e.x/ws,"em, ").concat(e.y/ws,"em) "),l+="scale(".concat(e.size/ws*(e.flipX?-1:1),", ").concat(e.size/ws*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var oee=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function AP(){var t=vP,e=bP,n=Te.cssPrefix,r=Te.replacementClass,i=oee;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var zI=!1;function Ty(){Te.autoAddCss&&!zI&&(tee(AP()),zI=!0)}var aee={mixout:function(){return{dom:{css:AP,insertCss:Ty}}},hooks:function(){return{beforeDOMElementCreation:function(){Ty()},beforeI2svg:function(){Ty()}}}},us=lo||{};us[cs]||(us[cs]={});us[cs].styles||(us[cs].styles={});us[cs].hooks||(us[cs].hooks={});us[cs].shims||(us[cs].shims=[]);var qr=us[cs],CP=[],lee=function t(){Ct.removeEventListener("DOMContentLoaded",t),Sp=1,CP.map(function(e){return e()})},Sp=!1;gs&&(Sp=(Ct.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ct.readyState),Sp||Ct.addEventListener("DOMContentLoaded",lee));function cee(t){gs&&(Sp?setTimeout(t,0):CP.push(t))}function Qh(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?IP(t):"<".concat(e," ").concat(ree(r),">").concat(s.map(Qh).join(""),"</").concat(e,">")}function jI(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var uee=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},wy=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?uee(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function hee(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function Rv(t){var e=hee(t);return e.length===1?e[0].toString(16):null}function dee(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function WI(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function Ov(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=WI(e);typeof qr.hooks.addPack=="function"&&!i?qr.hooks.addPack(t,WI(e)):qr.styles[t]=me(me({},qr.styles[t]||{}),s),t==="fas"&&Ov("fa",e)}var Vd,Fd,Ud,el=qr.styles,fee=qr.shims,pee=(Vd={},tn(Vd,It,Object.values(lh[It])),tn(Vd,Vt,Object.values(lh[Vt])),Vd),Lb=null,kP={},RP={},OP={},NP={},MP={},mee=(Fd={},tn(Fd,It,Object.keys(oh[It])),tn(Fd,Vt,Object.keys(oh[Vt])),Fd);function gee(t){return~JZ.indexOf(t)}function yee(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!gee(i)?i:null}var PP=function(){var e=function(s){return wy(el,function(o,a,l){return o[l]=wy(a,s,{}),o},{})};kP=e(function(i,s,o){if(s[3]&&(i[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){i[l.toString(16)]=o})}return i}),RP=e(function(i,s,o){if(i[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){i[l]=o})}return i}),MP=e(function(i,s,o){var a=s[2];return i[o]=o,a.forEach(function(l){i[l]=o}),i});var n="far"in el||Te.autoFetchSvg,r=wy(fee,function(i,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!n&&(a="fas"),typeof o=="string"&&(i.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:a,iconName:l}),i},{names:{},unicodes:{}});OP=r.names,NP=r.unicodes,Lb=Xm(Te.styleDefault,{family:Te.familyDefault})};eee(function(t){Lb=Xm(t.styleDefault,{family:Te.familyDefault})});PP();function Vb(t,e){return(kP[t]||{})[e]}function _ee(t,e){return(RP[t]||{})[e]}function Go(t,e){return(MP[t]||{})[e]}function xP(t){return OP[t]||{prefix:null,iconName:null}}function vee(t){var e=NP[t],n=Vb("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function co(){return Lb}var Fb=function(){return{prefix:null,iconName:null,rest:[]}};function Xm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?It:n,i=oh[r][t],s=ah[r][t]||ah[r][i],o=t in qr.styles?t:null;return s||o||null}var qI=(Ud={},tn(Ud,It,Object.keys(lh[It])),tn(Ud,Vt,Object.keys(lh[Vt])),Ud);function Zm(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,s=(e={},tn(e,It,"".concat(Te.cssPrefix,"-").concat(It)),tn(e,Vt,"".concat(Te.cssPrefix,"-").concat(Vt)),e),o=null,a=It;(t.includes(s[It])||t.some(function(c){return qI[It].includes(c)}))&&(a=It),(t.includes(s[Vt])||t.some(function(c){return qI[Vt].includes(c)}))&&(a=Vt);var l=t.reduce(function(c,u){var h=yee(Te.cssPrefix,u);if(el[u]?(u=pee[a].includes(u)?jZ[a][u]:u,o=u,c.prefix=u):mee[a].indexOf(u)>-1?(o=u,c.prefix=Xm(u,{family:a})):h?c.iconName=h:u!==Te.replacementClass&&u!==s[It]&&u!==s[Vt]&&c.rest.push(u),!i&&c.prefix&&c.iconName){var d=o==="fa"?xP(c.iconName):{},f=Go(c.prefix,c.iconName);d.prefix&&(o=null),c.iconName=d.iconName||f||c.iconName,c.prefix=d.prefix||c.prefix,c.prefix==="far"&&!el.far&&el.fas&&!Te.autoFetchSvg&&(c.prefix="fas")}return c},Fb());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===Vt&&(el.fass||Te.autoFetchSvg)&&(l.prefix="fass",l.iconName=Go(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||o==="fa")&&(l.prefix=co()||"fas"),l}var bee=function(){function t(){MZ(this,t),this.definitions={}}return PZ(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){n.definitions[a]=me(me({},n.definitions[a]||{}),o[a]),Ov(a,o[a]);var l=lh[It][a];l&&Ov(l,o[a]),PP()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var o=i[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];n[a]||(n[a]={}),u.length>0&&u.forEach(function(h){typeof h=="string"&&(n[a][h]=c)}),n[a][l]=c}),n}}]),t}(),GI=[],tl={},Tl={},Eee=Object.keys(Tl);function Tee(t,e){var n=e.mixoutsTo;return GI=t,tl={},Object.keys(Tl).forEach(function(r){Eee.indexOf(r)===-1&&delete Tl[r]}),GI.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),wp(i[o])==="object"&&Object.keys(i[o]).forEach(function(a){n[o]||(n[o]={}),n[o][a]=i[o][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(o){tl[o]||(tl[o]=[]),tl[o].push(s[o])})}r.provides&&r.provides(Tl)}),n}function Nv(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=tl[t]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function ba(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=tl[t]||[];i.forEach(function(s){s.apply(null,n)})}function hs(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Tl[t]?Tl[t].apply(null,e):void 0}function Mv(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||co();if(e)return e=Go(n,e)||e,jI(DP.definitions,n,e)||jI(qr.styles,n,e)}var DP=new bee,wee=function(){Te.autoReplaceSvg=!1,Te.observeMutations=!1,ba("noAuto")},See={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return gs?(ba("beforeI2svg",e),hs("pseudoElements2svg",e),hs("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;Te.autoReplaceSvg===!1&&(Te.autoReplaceSvg=!0),Te.observeMutations=!0,cee(function(){Aee({autoReplaceSvgRoot:n}),ba("watch",e)})}},Iee={icon:function(e){if(e===null)return null;if(wp(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Go(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=Xm(e[0]);return{prefix:r,iconName:Go(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(Te.cssPrefix,"-"))>-1||e.match(WZ))){var i=Zm(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||co(),iconName:Go(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=co();return{prefix:s,iconName:Go(s,e)||e}}}},Sr={noAuto:wee,config:Te,dom:See,parse:Iee,library:DP,findIconDefinition:Mv,toHtml:Qh},Aee=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?Ct:n;(Object.keys(qr.styles).length>0||Te.autoFetchSvg)&&gs&&Te.autoReplaceSvg&&Sr.dom.i2svg({node:r})};function eg(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return Qh(r)})}}),Object.defineProperty(t,"node",{get:function(){if(gs){var r=Ct.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function Cee(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,o=t.transform;if(Db(o)&&n.found&&!r.found){var a=n.width,l=n.height,c={x:a/l/2,y:.5};i.style=Qm(me(me({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function kee(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,o=s===!0?"".concat(e,"-").concat(Te.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:me(me({},i),{},{id:o}),children:r}]}]}function Ub(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,o=t.transform,a=t.symbol,l=t.title,c=t.maskId,u=t.titleId,h=t.extra,d=t.watchable,f=d===void 0?!1:d,p=r.found?r:n,m=p.width,g=p.height,y=i==="fak",_=[Te.replacementClass,s?"".concat(Te.cssPrefix,"-").concat(s):""].filter(function(A){return h.classes.indexOf(A)===-1}).filter(function(A){return A!==""||!!A}).concat(h.classes).join(" "),v={children:[],attributes:me(me({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:_,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},I=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(v.attributes[va]=""),l&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(u||uh())},children:[l]}),delete v.attributes.title);var S=me(me({},v),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:me(me({},I),h.styles)}),C=r.found&&n.found?hs("generateAbstractMask",S)||{children:[],attributes:{}}:hs("generateAbstractIcon",S)||{children:[],attributes:{}},F=C.children,N=C.attributes;return S.children=F,S.attributes=N,a?kee(S):Cee(S)}function KI(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,o=t.extra,a=t.watchable,l=a===void 0?!1:a,c=me(me(me({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[va]="");var u=me({},o.styles);Db(i)&&(u.transform=see({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=Qm(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function Ree(t){var e=t.content,n=t.title,r=t.extra,i=me(me(me({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=Qm(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var Sy=qr.styles;function Pv(t){var e=t[0],n=t[1],r=t.slice(4),i=Rb(r,1),s=i[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(Te.cssPrefix,"-").concat(qo.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Te.cssPrefix,"-").concat(qo.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Te.cssPrefix,"-").concat(qo.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:o}}var Oee={found:!1,width:512,height:512};function Nee(t,e){!EP&&!Te.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function xv(t,e){var n=e;return e==="fa"&&Te.styleDefault!==null&&(e=co()),new Promise(function(r,i){if(hs("missingIconAbstract"),n==="fa"){var s=xP(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Sy[e]&&Sy[e][t]){var o=Sy[e][t];return r(Pv(o))}Nee(t,e),r(me(me({},Oee),{},{icon:Te.showMissingIcons&&t?hs("missingIconAbstract")||{}:{}}))})}var YI=function(){},Dv=Te.measurePerformance&&Nd&&Nd.mark&&Nd.measure?Nd:{mark:YI,measure:YI},Wc='FA "6.5.2"',Mee=function(e){return Dv.mark("".concat(Wc," ").concat(e," begins")),function(){return LP(e)}},LP=function(e){Dv.mark("".concat(Wc," ").concat(e," ends")),Dv.measure("".concat(Wc," ").concat(e),"".concat(Wc," ").concat(e," begins"),"".concat(Wc," ").concat(e," ends"))},Bb={begin:Mee,end:LP},cf=function(){};function JI(t){var e=t.getAttribute?t.getAttribute(va):null;return typeof e=="string"}function Pee(t){var e=t.getAttribute?t.getAttribute(Nb):null,n=t.getAttribute?t.getAttribute(Mb):null;return e&&n}function xee(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Te.replacementClass)}function Dee(){if(Te.autoReplaceSvg===!0)return uf.replace;var t=uf[Te.autoReplaceSvg];return t||uf.replace}function Lee(t){return Ct.createElementNS("http://www.w3.org/2000/svg",t)}function Vee(t){return Ct.createElement(t)}function VP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?Lee:Vee:n;if(typeof t=="string")return Ct.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var s=t.children||[];return s.forEach(function(o){i.appendChild(VP(o,{ceFn:r}))}),i}function Fee(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var uf={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(VP(i),n)}),n.getAttribute(va)===null&&Te.keepOriginalSource){var r=Ct.createComment(Fee(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~xb(n).indexOf(Te.replacementClass))return uf.replace(e);var i=new RegExp("".concat(Te.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,l){return l===Te.replacementClass||l.match(i)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var o=r.map(function(a){return Qh(a)}).join(`
`);n.setAttribute(va,""),n.innerHTML=o}};function QI(t){t()}function FP(t,e){var n=typeof e=="function"?e:cf;if(t.length===0)n();else{var r=QI;Te.mutateApproach===HZ&&(r=lo.requestAnimationFrame||QI),r(function(){var i=Dee(),s=Bb.begin("mutate");t.map(i),s(),n()})}}var $b=!1;function UP(){$b=!0}function Lv(){$b=!1}var Ip=null;function XI(t){if($I&&Te.observeMutations){var e=t.treeCallback,n=e===void 0?cf:e,r=t.nodeCallback,i=r===void 0?cf:r,s=t.pseudoElementsCallback,o=s===void 0?cf:s,a=t.observeMutationsRoot,l=a===void 0?Ct:a;Ip=new $I(function(c){if(!$b){var u=co();mc(c).forEach(function(h){if(h.type==="childList"&&h.addedNodes.length>0&&!JI(h.addedNodes[0])&&(Te.searchPseudoElements&&o(h.target),n(h.target)),h.type==="attributes"&&h.target.parentNode&&Te.searchPseudoElements&&o(h.target.parentNode),h.type==="attributes"&&JI(h.target)&&~YZ.indexOf(h.attributeName))if(h.attributeName==="class"&&Pee(h.target)){var d=Zm(xb(h.target)),f=d.prefix,p=d.iconName;h.target.setAttribute(Nb,f||u),p&&h.target.setAttribute(Mb,p)}else xee(h.target)&&i(h.target)})}}),gs&&Ip.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function Uee(){Ip&&Ip.disconnect()}function Bee(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function $ee(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=Zm(xb(t));return i.prefix||(i.prefix=co()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=_ee(i.prefix,t.innerText)||Vb(i.prefix,Rv(t.innerText))),!i.iconName&&Te.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function Hee(t){var e=mc(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Te.autoA11y&&(n?e["aria-labelledby"]="".concat(Te.replacementClass,"-title-").concat(r||uh()):(e["aria-hidden"]="true",e.focusable="false")),e}function zee(){return{iconName:null,title:null,titleId:null,prefix:null,transform:yi,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function ZI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=$ee(t),r=n.iconName,i=n.prefix,s=n.rest,o=Hee(t),a=Nv("parseNodeAttributes",{},t),l=e.styleParser?Bee(t):[];return me({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:yi,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var jee=qr.styles;function BP(t){var e=Te.autoReplaceSvg==="nest"?ZI(t,{styleParser:!1}):ZI(t);return~e.extra.classes.indexOf(TP)?hs("generateLayersText",t,e):hs("generateSvgReplacementMutation",t,e)}var uo=new Set;Pb.map(function(t){uo.add("fa-".concat(t))});Object.keys(oh[It]).map(uo.add.bind(uo));Object.keys(oh[Vt]).map(uo.add.bind(uo));uo=Yh(uo);function eA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!gs)return Promise.resolve();var n=Ct.documentElement.classList,r=function(h){return n.add("".concat(HI,"-").concat(h))},i=function(h){return n.remove("".concat(HI,"-").concat(h))},s=Te.autoFetchSvg?uo:Pb.map(function(u){return"fa-".concat(u)}).concat(Object.keys(jee));s.includes("fa")||s.push("fa");var o=[".".concat(TP,":not([").concat(va,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(va,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=mc(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();var l=Bb.begin("onTree"),c=a.reduce(function(u,h){try{var d=BP(h);d&&u.push(d)}catch(f){EP||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise(function(u,h){Promise.all(c).then(function(d){FP(d,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(d){l(),h(d)})})}function Wee(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;BP(t).then(function(n){n&&FP([n],e)})}function qee(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:Mv(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:Mv(i||{})),t(r,me(me({},n),{},{mask:i}))}}var Gee=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?yi:r,s=n.symbol,o=s===void 0?!1:s,a=n.mask,l=a===void 0?null:a,c=n.maskId,u=c===void 0?null:c,h=n.title,d=h===void 0?null:h,f=n.titleId,p=f===void 0?null:f,m=n.classes,g=m===void 0?[]:m,y=n.attributes,_=y===void 0?{}:y,v=n.styles,I=v===void 0?{}:v;if(e){var S=e.prefix,C=e.iconName,F=e.icon;return eg(me({type:"icon"},e),function(){return ba("beforeDOMElementCreation",{iconDefinition:e,params:n}),Te.autoA11y&&(d?_["aria-labelledby"]="".concat(Te.replacementClass,"-title-").concat(p||uh()):(_["aria-hidden"]="true",_.focusable="false")),Ub({icons:{main:Pv(F),mask:l?Pv(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:S,iconName:C,transform:me(me({},yi),i),symbol:o,title:d,maskId:u,titleId:p,extra:{attributes:_,styles:I,classes:g}})})}},Kee={mixout:function(){return{icon:qee(Gee)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=eA,n.nodeCallback=Wee,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?Ct:r,s=n.callback,o=s===void 0?function(){}:s;return eA(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,o=r.titleId,a=r.prefix,l=r.transform,c=r.symbol,u=r.mask,h=r.maskId,d=r.extra;return new Promise(function(f,p){Promise.all([xv(i,a),u.iconName?xv(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=Rb(m,2),y=g[0],_=g[1];f([n,Ub({icons:{main:y,mask:_},prefix:a,iconName:i,transform:l,symbol:c,maskId:h,title:s,titleId:o,extra:d,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.transform,a=n.styles,l=Qm(a);l.length>0&&(i.style=l);var c;return Db(o)&&(c=hs("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),r.push(c||s.icon),{children:r,attributes:i}}}},Yee={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return eg({type:"layer"},function(){ba("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(Te.cssPrefix,"-layers")].concat(Yh(s)).join(" ")},children:o}]})}}}},Jee={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,o=r.classes,a=o===void 0?[]:o,l=r.attributes,c=l===void 0?{}:l,u=r.styles,h=u===void 0?{}:u;return eg({type:"counter",content:n},function(){return ba("beforeDOMElementCreation",{content:n,params:r}),Ree({content:n.toString(),title:s,extra:{attributes:c,styles:h,classes:["".concat(Te.cssPrefix,"-layers-counter")].concat(Yh(a))}})})}}}},Qee={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?yi:i,o=r.title,a=o===void 0?null:o,l=r.classes,c=l===void 0?[]:l,u=r.attributes,h=u===void 0?{}:u,d=r.styles,f=d===void 0?{}:d;return eg({type:"text",content:n},function(){return ba("beforeDOMElementCreation",{content:n,params:r}),KI({content:n,transform:me(me({},yi),s),title:a,extra:{attributes:h,styles:f,classes:["".concat(Te.cssPrefix,"-layers-text")].concat(Yh(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,o=r.extra,a=null,l=null;if(_P){var c=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();a=u.width/c,l=u.height/c}return Te.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([n,KI({content:n.innerHTML,width:a,height:l,transform:s,title:i,extra:o,watchable:!0})])}}},Xee=new RegExp('"',"ug"),tA=[1105920,1112319];function Zee(t){var e=t.replace(Xee,""),n=dee(e,0),r=n>=tA[0]&&n<=tA[1],i=e.length===2?e[0]===e[1]:!1;return{value:Rv(i?e[0]:e),isSecondary:r||i}}function nA(t,e){var n="".concat($Z).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=mc(t.children),o=s.filter(function(F){return F.getAttribute(kv)===e})[0],a=lo.getComputedStyle(t,e),l=a.getPropertyValue("font-family").match(qZ),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return t.removeChild(o),r();if(l&&u!=="none"&&u!==""){var h=a.getPropertyValue("content"),d=~["Sharp"].indexOf(l[2])?Vt:It,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?ah[d][l[2].toLowerCase()]:GZ[d][c],p=Zee(h),m=p.value,g=p.isSecondary,y=l[0].startsWith("FontAwesome"),_=Vb(f,m),v=_;if(y){var I=vee(m);I.iconName&&I.prefix&&(_=I.iconName,f=I.prefix)}if(_&&!g&&(!o||o.getAttribute(Nb)!==f||o.getAttribute(Mb)!==v)){t.setAttribute(n,v),o&&t.removeChild(o);var S=zee(),C=S.extra;C.attributes[kv]=e,xv(_,f).then(function(F){var N=Ub(me(me({},S),{},{icons:{main:F,mask:Fb()},prefix:f,iconName:v,extra:C,watchable:!0})),A=Ct.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(A,t.firstChild):t.appendChild(A),A.outerHTML=N.map(function(V){return Qh(V)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function ete(t){return Promise.all([nA(t,"::before"),nA(t,"::after")])}function tte(t){return t.parentNode!==document.head&&!~zZ.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(kv)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function rA(t){if(gs)return new Promise(function(e,n){var r=mc(t.querySelectorAll("*")).filter(tte).map(ete),i=Bb.begin("searchPseudoElements");UP(),Promise.all(r).then(function(){i(),Lv(),e()}).catch(function(){i(),Lv(),n()})})}var nte={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=rA,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?Ct:r;Te.searchPseudoElements&&rA(i)}}},iA=!1,rte={mixout:function(){return{dom:{unwatch:function(){UP(),iA=!0}}}},hooks:function(){return{bootstrap:function(){XI(Nv("mutationObserverCallbacks",{}))},noAuto:function(){Uee()},watch:function(n){var r=n.observeMutationsRoot;iA?Lv():XI(Nv("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},sA=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return r.flipX=!0,r;if(o&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(o){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},ite={mixout:function(){return{parse:{transform:function(n){return sA(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=sA(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,o=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),c="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),h={transform:"".concat(l," ").concat(c," ").concat(u)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:h,path:d};return{tag:"g",attributes:me({},f.outer),children:[{tag:"g",attributes:me({},f.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:me(me({},r.icon.attributes),f.path)}]}]}}}},Iy={x:0,y:0,width:"100%",height:"100%"};function oA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function ste(t){return t.tag==="g"?t.children:[t]}var ote={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?Zm(i.split(" ").map(function(o){return o.trim()})):Fb();return s.prefix||(s.prefix=co()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.mask,a=n.maskId,l=n.transform,c=s.width,u=s.icon,h=o.width,d=o.icon,f=iee({transform:l,containerWidth:h,iconWidth:c}),p={tag:"rect",attributes:me(me({},Iy),{},{fill:"white"})},m=u.children?{children:u.children.map(oA)}:{},g={tag:"g",attributes:me({},f.inner),children:[oA(me({tag:u.tag,attributes:me(me({},u.attributes),f.path)},m))]},y={tag:"g",attributes:me({},f.outer),children:[g]},_="mask-".concat(a||uh()),v="clip-".concat(a||uh()),I={tag:"mask",attributes:me(me({},Iy),{},{id:_,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},S={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:ste(d)},I]};return r.push(S,{tag:"rect",attributes:me({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(_,")")},Iy)}),{children:r,attributes:i}}}},ate={provides:function(e){var n=!1;lo.matchMedia&&(n=lo.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:me(me({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=me(me({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:me(me({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:me(me({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:me(me({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:me(me({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:me(me({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:me(me({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:me(me({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},lte={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},cte=[aee,Kee,Yee,Jee,Qee,nte,rte,ite,ote,ate,lte];Tee(cte,{mixoutsTo:Sr});Sr.noAuto;Sr.config;var Ze=Sr.library;Sr.dom;var Vv=Sr.parse;Sr.findIconDefinition;Sr.toHtml;var ute=Sr.icon;Sr.layer;Sr.text;Sr.counter;var hte={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},dte={prefix:"fas",iconName:"users-rectangle",icon:[640,512,[],"e594","M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H544c53 0 96-43 96-96V96c0-53-43-96-96-96H96zM64 96c0-17.7 14.3-32 32-32H544c17.7 0 32 14.3 32 32V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V96zm159.8 80a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM96 309.3c0 14.7 11.9 26.7 26.7 26.7h56.1c8-34.1 32.8-61.7 65.2-73.6c-7.5-4.1-16.2-6.4-25.3-6.4H149.3C119.9 256 96 279.9 96 309.3zM461.2 336h56.1c14.7 0 26.7-11.9 26.7-26.7c0-29.5-23.9-53.3-53.3-53.3H421.3c-9.2 0-17.8 2.3-25.3 6.4c32.4 11.9 57.2 39.5 65.2 73.6zM372 289c-3.9-.7-7.9-1-12-1H280c-4.1 0-8.1 .3-12 1c-26 4.4-47.3 22.7-55.9 47c-2.7 7.5-4.1 15.6-4.1 24c0 13.3 10.7 24 24 24H408c13.3 0 24-10.7 24-24c0-8.4-1.4-16.5-4.1-24c-8.6-24.3-29.9-42.6-55.9-47zM512 176a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM320 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},fte={prefix:"fas",iconName:"spaghetti-monster-flying",icon:[640,512,["pastafarianism"],"f67b","M208 64a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 0c0 16.2-6 31.1-16 42.3l15.6 31.2c18.7-6 39.9-9.5 64.4-9.5s45.8 3.5 64.4 9.5L400 106.3C390 95.1 384 80.2 384 64c0-35.3 28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64c-1.7 0-3.4-.1-5.1-.2L427.8 158c21.1 13.6 37.7 30.2 51.4 46.4c7.1 8.3 13.5 16.6 19.3 24l1.4 1.8c6.3 8.1 11.6 14.8 16.7 20.4C527.3 262.3 532.7 264 536 264c2.5 0 4.3-.6 7.1-3.3c3.7-3.5 7.1-8.8 12.5-17.4l.6-.9c4.6-7.4 11-17.6 19.4-25.7c9.7-9.3 22.9-16.7 40.4-16.7c13.3 0 24 10.7 24 24s-10.7 24-24 24c-2.5 0-4.3 .6-7.1 3.3c-3.7 3.5-7.1 8.8-12.5 17.4l-.6 .9c-4.6 7.4-11 17.6-19.4 25.7c-9.7 9.3-22.9 16.7-40.4 16.7c-18.5 0-32.9-8.5-44.3-18.6c-3.1 4-6.6 8.3-10.5 12.7c1.4 4.3 2.8 8.5 4 12.5c.9 3 1.8 5.8 2.6 8.6c3 9.8 5.5 18.2 8.6 25.9c3.9 9.8 7.4 15.4 10.8 18.5c2.6 2.4 5.9 4.3 12.8 4.3c8.7 0 16.9-4.2 33.7-13.2c15-8 35.7-18.8 62.3-18.8c13.3 0 24 10.7 24 24s-10.7 24-24 24c-13.4 0-24.7 5.2-39.7 13.2c-1 .6-2.1 1.1-3.2 1.7C559.9 414 541.4 424 520 424c-18.4 0-33.6-6.1-45.5-17.2c-11.1-10.3-17.9-23.7-22.7-36c-3.6-9-6.7-19.1-9.5-28.5c-16.4 12.3-36.1 23.6-58.9 31.3c3.6 10.8 8.4 23.5 14.4 36.2c7.5 15.9 16.2 30.4 25.8 40.5C433 460.5 441.2 464 448 464c13.3 0 24 10.7 24 24s-10.7 24-24 24c-25.2 0-45-13.5-59.5-28.8c-14.5-15.4-25.7-34.9-34.2-53c-8-17-14.1-33.8-18.3-46.9c-5.2 .4-10.6 .6-16 .6s-10.8-.2-16-.6c-4.2 13-10.3 29.9-18.3 46.9c-8.5 18.1-19.8 37.6-34.2 53C237 498.5 217.2 512 192 512c-13.3 0-24-10.7-24-24s10.7-24 24-24c6.8 0 15-3.5 24.5-13.7c9.5-10.1 18.3-24.6 25.8-40.5c5.9-12.6 10.7-25.4 14.4-36.2c-22.8-7.7-42.5-19-58.9-31.3c-2.9 9.4-6 19.5-9.5 28.5c-4.8 12.2-11.6 25.6-22.7 36C153.6 417.9 138.4 424 120 424c-21.4 0-39.9-10-53.1-17.1l0 0c-1.1-.6-2.2-1.2-3.2-1.7c-15-8-26.3-13.2-39.7-13.2c-13.3 0-24-10.7-24-24s10.7-24 24-24c26.6 0 47.3 10.8 62.3 18.8c16.8 9 25 13.2 33.7 13.2c6.8 0 10.2-1.9 12.8-4.3c3.4-3.2 7-8.8 10.8-18.5c3-7.7 5.6-16.1 8.6-25.9c.8-2.7 1.7-5.6 2.6-8.6c1.2-4 2.6-8.2 4-12.5c-3.9-4.5-7.4-8.8-10.5-12.7C136.9 303.5 122.5 312 104 312c-17.5 0-30.7-7.4-40.4-16.7c-8.4-8.1-14.8-18.3-19.4-25.7l-.6-.9c-5.4-8.6-8.8-13.9-12.5-17.4c-2.8-2.7-4.6-3.3-7.1-3.3c-13.3 0-24-10.7-24-24s10.7-24 24-24c17.5 0 30.7 7.4 40.4 16.7c8.4 8.1 14.8 18.3 19.4 25.7l.6 .9c5.4 8.6 8.8 13.9 12.5 17.4c2.8 2.7 4.6 3.3 7.1 3.3c3.3 0 8.7-1.7 19.4-13.4c5.1-5.6 10.4-12.3 16.7-20.4l1.4-1.8c5.8-7.4 12.2-15.7 19.3-24c13.8-16.2 30.3-32.8 51.4-46.4l-15.1-30.2c-1.7 .1-3.4 .2-5.1 .2c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm208 0a16 16 0 1 0 -32 0 16 16 0 1 0 32 0z"]},pte={prefix:"fas",iconName:"spoon",icon:[512,512,[129348,61873,"utensil-spoon"],"f2e5","M245.8 220.9c-14.5-17.6-21.8-39.2-21.8-60.8C224 80 320 0 416 0c53 0 96 43 96 96c0 96-80 192-160.2 192c-21.6 0-43.2-7.3-60.8-21.8L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L245.8 220.9z"]},mte={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},gte={prefix:"fas",iconName:"paw",icon:[512,512,[],"f1b0","M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z"]},yte={prefix:"fas",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},_te={prefix:"fas",iconName:"ghost",icon:[384,512,[128123],"f6e2","M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9C8 480 0 472 0 462.2V192C0 86 86 0 192 0S384 86 384 192V462.2c0 9.8-8 17.8-17.8 17.8c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-13.4-10.7-32.8-9-44.1 3.9L269.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6l-26.6-30.5c-12.7-14.6-35.4-14.6-48.2 0L141.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6L84.2 471c-11.3-12.9-30.7-14.6-44.1-3.9zM160 192a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},vte={prefix:"fas",iconName:"tree",icon:[448,512,[127794],"f1bb","M210.6 5.9L62 169.4c-3.9 4.2-6 9.8-6 15.5C56 197.7 66.3 208 79.1 208H104L30.6 281.4c-4.2 4.2-6.6 10-6.6 16C24 309.9 34.1 320 46.6 320H80L5.4 409.5C1.9 413.7 0 419 0 424.5c0 13 10.5 23.5 23.5 23.5H192v32c0 17.7 14.3 32 32 32s32-14.3 32-32V448H424.5c13 0 23.5-10.5 23.5-23.5c0-5.5-1.9-10.8-5.4-15L368 320h33.4c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16L344 208h24.9c12.7 0 23.1-10.3 23.1-23.1c0-5.7-2.1-11.3-6-15.5L237.4 5.9C234 2.1 229.1 0 224 0s-10 2.1-13.4 5.9z"]},bte={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},Ete={prefix:"fas",iconName:"shapes",icon:[512,512,["triangle-circle-square"],"f61f","M315.4 15.5C309.7 5.9 299.2 0 288 0s-21.7 5.9-27.4 15.5l-96 160c-5.9 9.9-6.1 22.2-.4 32.2s16.3 16.2 27.8 16.2H384c11.5 0 22.2-6.2 27.8-16.2s5.5-22.3-.4-32.2l-96-160zM288 312V456c0 22.1 17.9 40 40 40H472c22.1 0 40-17.9 40-40V312c0-22.1-17.9-40-40-40H328c-22.1 0-40 17.9-40 40zM128 512a128 128 0 1 0 0-256 128 128 0 1 0 0 256z"]},Tte={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},wte={prefix:"fas",iconName:"user-group",icon:[640,512,[128101,"user-friends"],"f500","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM609.3 512H471.4c5.4-9.4 8.6-20.3 8.6-32v-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2h61.4C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"]},Ste={prefix:"fas",iconName:"fire",icon:[448,512,[128293],"f06d","M159.3 5.4c7.8-7.3 19.9-7.2 27.7 .1c27.6 25.9 53.5 53.8 77.7 84c11-14.4 23.5-30.1 37-42.9c7.9-7.4 20.1-7.4 28 .1c34.6 33 63.9 76.6 84.5 118c20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512C98.4 512 0 404.1 0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3 0 47.7-7 68.8-21c42.1-29.4 53.4-88.2 28.1-134.4c-4.5-9-16-9.6-22.5-2l-25.2 29.3c-6.6 7.6-18.5 7.4-24.7-.5c-16.5-21-46-58.5-62.8-79.8c-6.3-8-18.3-8.1-24.7-.1c-33.8 42.5-50.8 69.3-50.8 99.4C112 375.4 162.6 416 225.7 416z"]},Ite={prefix:"fas",iconName:"eye-low-vision",icon:[640,512,["low-vision"],"f2a8","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223 149.5c48.6-44.3 123-50.8 179.3-11.7c60.8 42.4 78.9 123.2 44.2 186.9L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3L223 149.5zm-139.9 12c-11 14.4-20.5 28.7-28.4 42.2l339 265.7c18.7-5.5 36.2-13 52.6-21.8L83.1 161.5zm-50 86.3c-1.8 6.8-1.3 14 1.4 20.5c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c3.1 0 6.1-.1 9.2-.2L33.1 247.8z"]},Ate={prefix:"fas",iconName:"crow",icon:[640,512,[],"f520","M456 0c-48.6 0-88 39.4-88 88v29.2L12.5 390.6c-14 10.8-16.6 30.9-5.9 44.9s30.9 16.6 44.9 5.9L126.1 384H259.2l46.6 113.1c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3L311.1 384H352c1.1 0 2.1 0 3.2 0l46.6 113.2c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3l-42-102C484.9 354.1 544 280 544 192V128v-8l80.5-20.1c8.6-2.1 13.8-10.8 11.6-19.4C629 52 603.4 32 574 32H523.9C507.7 12.5 483.3 0 456 0zm0 64a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},Cte={prefix:"fas",iconName:"frog",icon:[576,512,[],"f52e","M368 32c41.7 0 75.9 31.8 79.7 72.5l85.6 26.3c25.4 7.8 42.8 31.3 42.8 57.9c0 21.8-11.7 41.9-30.7 52.7L400.8 323.5 493.3 416H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H480c-8.5 0-16.6-3.4-22.6-9.4L346.9 360.2c11.7-36 3.2-77.1-25.4-105.7c-40.6-40.6-106.3-40.6-146.9-.1L101 324.4c-6.4 6.1-6.7 16.2-.6 22.6s16.2 6.6 22.6 .6l73.8-70.2 .1-.1 .1-.1c3.5-3.5 7.3-6.6 11.3-9.2c27.9-18.5 65.9-15.4 90.5 9.2c24.7 24.7 27.7 62.9 9 90.9c-2.6 3.8-5.6 7.5-9 10.9L261.8 416H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-35.3 0-64-28.7-64-64C0 249.6 127 112.9 289.3 97.5C296.2 60.2 328.8 32 368 32zm0 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},kte={prefix:"fas",iconName:"feather-pointed",icon:[512,512,["feather-alt"],"f56b","M278.5 215.6L23 471c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l74.8-74.8c7.4 4.6 15.3 8.2 23.8 10.5C200.3 452.8 270 454.5 338 409.4c12.2-8.1 5.8-25.4-8.8-25.4l-16.1 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l97.7-29.3c3.4-1 6.4-3.1 8.4-6.1c4.4-6.4 8.6-12.9 12.6-19.6c6.2-10.3-1.5-23-13.5-23l-38.6 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l80.9-24.3c4.6-1.4 8.4-4.8 10.2-9.3C494.5 163 507.8 86.1 511.9 36.8c.8-9.9-3-19.6-10-26.6s-16.7-10.8-26.6-10C391.5 7 228.5 40.5 137.4 131.6C57.3 211.7 56.7 302.3 71.3 356.4c2.1 7.9 12 9.6 17.8 3.8L253.6 195.8c6.2-6.2 16.4-6.2 22.6 0c5.4 5.4 6.1 13.6 2.2 19.8z"]},Rte={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},Ote={prefix:"fas",iconName:"hat-cowboy",icon:[640,512,[],"f8c0","M320 64c14.4 0 22.3-7 30.8-14.4C360.4 41.1 370.7 32 392 32c49.3 0 84.4 152.2 97.9 221.9C447.8 272.1 390.9 288 320 288s-127.8-15.9-169.9-34.1C163.6 184.2 198.7 32 248 32c21.3 0 31.6 9.1 41.2 17.6C297.7 57 305.6 64 320 64zM111.1 270.7c47.2 24.5 117.5 49.3 209 49.3s161.8-24.8 208.9-49.3c24.8-12.9 49.8-28.3 70.1-47.7c7.9-7.9 20.2-9.2 29.6-3.3c9.5 5.9 13.5 17.9 9.9 28.5c-13.5 37.7-38.4 72.3-66.1 100.6C523.7 398.9 443.6 448 320 448s-203.6-49.1-252.5-99.2C39.8 320.4 14.9 285.8 1.4 248.1c-3.6-10.6 .4-22.6 9.9-28.5c9.5-5.9 21.7-4.5 29.6 3.3c20.4 19.4 45.3 34.8 70.1 47.7z"]},Nte={prefix:"fas",iconName:"cat",icon:[576,512,[128008],"f6be","M320 192h17.1c22.1 38.3 63.5 64 110.9 64c11 0 21.8-1.4 32-4v4 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V339.2L280 448h56c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-53 0-96-43-96-96V192.5c0-16.1-12-29.8-28-31.8l-7.9-1c-17.5-2.2-30-18.2-27.8-35.7s18.2-30 35.7-27.8l7.9 1c48 6 84.1 46.8 84.1 95.3v85.3c34.4-51.7 93.2-85.8 160-85.8zm160 26.5v0c-10 3.5-20.8 5.5-32 5.5c-28.4 0-54-12.4-71.6-32h0c-3.7-4.1-7-8.5-9.9-13.2C357.3 164 352 146.6 352 128v0V32 12 10.7C352 4.8 356.7 .1 362.6 0h.2c3.3 0 6.4 1.6 8.4 4.2l0 .1L384 21.3l27.2 36.3L416 64h64l4.8-6.4L512 21.3 524.8 4.3l0-.1c2-2.6 5.1-4.2 8.4-4.2h.2C539.3 .1 544 4.8 544 10.7V12 32v96c0 17.3-4.6 33.6-12.6 47.6c-11.3 19.8-29.6 35.2-51.4 42.9zM432 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},Mte={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},Pte={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},xte={prefix:"fas",iconName:"hat-wizard",icon:[512,512,[],"f6e8","M64 416L168.6 180.7c15.3-34.4 40.3-63.5 72-83.7l146.9-94c3-1.9 6.5-2.9 10-2.9C407.7 0 416 8.3 416 18.6v1.6c0 2.6-.5 5.1-1.4 7.5L354.8 176.9c-1.9 4.7-2.8 9.7-2.8 14.7c0 5.5 1.2 11 3.4 16.1L448 416H240.9l11.8-35.4 40.4-13.5c6.5-2.2 10.9-8.3 10.9-15.2s-4.4-13-10.9-15.2l-40.4-13.5-13.5-40.4C237 276.4 230.9 272 224 272s-13 4.4-15.2 10.9l-13.5 40.4-40.4 13.5C148.4 339 144 345.1 144 352s4.4 13 10.9 15.2l40.4 13.5L207.1 416H64zM279.6 141.5c-1.1-3.3-4.1-5.5-7.6-5.5s-6.5 2.2-7.6 5.5l-6.7 20.2-20.2 6.7c-3.3 1.1-5.5 4.1-5.5 7.6s2.2 6.5 5.5 7.6l20.2 6.7 6.7 20.2c1.1 3.3 4.1 5.5 7.6 5.5s6.5-2.2 7.6-5.5l6.7-20.2 20.2-6.7c3.3-1.1 5.5-4.1 5.5-7.6s-2.2-6.5-5.5-7.6l-20.2-6.7-6.7-20.2zM32 448H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Dte={prefix:"fas",iconName:"table-cells-large",icon:[512,512,["th-large"],"f009","M448 96V224H288V96H448zm0 192V416H288V288H448zM224 224H64V96H224V224zM64 288H224V416H64V288zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},Lte={prefix:"fas",iconName:"dove",icon:[512,512,[128330],"f4ba","M160.8 96.5c14 17 31 30.9 49.5 42.2c25.9 15.8 53.7 25.9 77.7 31.6V138.8C265.8 108.5 250 71.5 248.6 28c-.4-11.3-7.5-21.5-18.4-24.4c-7.6-2-15.8-.2-21 5.8c-13.3 15.4-32.7 44.6-48.4 87.2zM320 144v30.6l0 0v1.3l0 0 0 32.1c-60.8-5.1-185-43.8-219.3-157.2C97.4 40 87.9 32 76.6 32c-7.9 0-15.3 3.9-18.8 11C46.8 65.9 32 112.1 32 176c0 116.9 80.1 180.5 118.4 202.8L11.8 416.6C6.7 418 2.6 421.8 .9 426.8s-.8 10.6 2.3 14.8C21.7 466.2 77.3 512 160 512c3.6 0 7.2-1.2 10-3.5L245.6 448H320c88.4 0 160-71.6 160-160V128l29.9-44.9c1.3-2 2.1-4.4 2.1-6.8c0-6.8-5.5-12.3-12.3-12.3H400c-44.2 0-80 35.8-80 80zm80-16a16 16 0 1 1 0 32 16 16 0 1 1 0-32z"]},Vte={prefix:"fas",iconName:"list-ul",icon:[512,512,["list-dots"],"f0ca","M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"]},Fte={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Ute={prefix:"fas",iconName:"users-line",icon:[640,512,[],"e592","M211.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM32 256c0 17.7 14.3 32 32 32h85.6c10.1-39.4 38.6-71.5 75.8-86.6c-9.7-6-21.2-9.4-33.4-9.4H96c-35.3 0-64 28.7-64 64zm461.6 32H576c17.7 0 32-14.3 32-32c0-35.3-28.7-64-64-64H448c-11.7 0-22.7 3.1-32.1 8.6c38.1 14.8 67.4 47.3 77.7 87.4zM391.2 226.4c-6.9-1.6-14.2-2.4-21.6-2.4h-96c-8.5 0-16.7 1.1-24.5 3.1c-30.8 8.1-55.6 31.1-66.1 60.9c-3.5 10-5.5 20.8-5.5 32c0 17.7 14.3 32 32 32h224c17.7 0 32-14.3 32-32c0-11.2-1.9-22-5.5-32c-10.8-30.7-36.8-54.2-68.9-61.6zM563.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM321.6 192a80 80 0 1 0 0-160 80 80 0 1 0 0 160zM32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32H608c17.7 0 32-14.3 32-32s-14.3-32-32-32H32z"]},Bte={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2v82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9V380.8c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},$te={prefix:"fas",iconName:"disease",icon:[512,512,[],"f7fa","M236.4 61.4L227 75.5c-21.3 32-59.4 48.5-97.3 42.1l-59.6-9.9C33.4 101.6 0 129.9 .1 167.1c0 15.9 6.4 31.2 17.6 42.5l29.2 29.2c11 11 17.2 25.9 17.2 41.5c0 15.8-6.4 30.9-17.7 42L33.3 335.1C22.2 345.9 16 360.7 16 376.2c0 36.8 34.1 64.2 70.1 56.2l62.3-13.8c7.7-1.7 15.7-2.6 23.6-2.6h10c27.2 0 53.7 9.3 75 26.3L287.8 467c10.5 8.4 23.6 13 37 13c32.7 0 59.3-26.5 59.3-59.3l0-25.2c0-34.9 21.4-66.2 53.9-78.8l36.9-14.3c22.4-8.7 37.2-30.3 37.2-54.3c0-28.1-20.1-52.3-47.8-57.3l-28-5.1c-36.5-6.7-65.4-34.5-73.6-70.7l-7.1-31.5C348.9 53.4 322.1 32 291.3 32c-22 0-42.6 11-54.9 29.4zM160 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 16a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zm0 80a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},Hte={prefix:"fas",iconName:"shield",icon:[512,512,[128737,"shield-blank"],"f132","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0z"]},zte={prefix:"fas",iconName:"hippo",icon:[640,512,[129435],"f6ed","M407 47c9.4-9.4 24.6-9.4 33.9 0l17.2 17.2c1.9-.1 3.9-.2 5.8-.2h32c11.2 0 21.9 2.3 31.6 6.5L543 55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L564 101.9c7.6 12.2 12 26.7 12 42.1c0 10.2 7.4 18.8 16.7 23c27.9 12.5 47.3 40.5 47.3 73c0 26.2-12.6 49.4-32 64v32c0 8.8-7.2 16-16 16H560c-8.8 0-16-7.2-16-16V320H480v16c0 8.8-7.2 16-16 16H432c-8.8 0-16-7.2-16-16V318.4c-11.8-2.4-22.7-7.4-32-14.4c-1.5-1.1-2.9-2.3-4.3-3.5c-17-14.7-27.7-36.4-27.7-60.5c0-8.8-7.2-16-16-16s-16 7.2-16 16c0 44.7 26.2 83.2 64 101.2V352c0 17.7 14.3 32 32 32h32v64c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V372c-19.8 7.7-41.4 12-64 12s-44.2-4.3-64-12v76c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V329.1L45.9 369.7c-5.4 12.1-19.6 17.6-31.7 12.2S-3.3 362.4 2.1 350.3L24 300.9c5.3-11.9 8-24.7 8-37.7C32 155.7 117.2 68 223.8 64.1l.2-.1h7.2H256h32c41.7 0 83.4 12.1 117.2 25.7c1.7-1.8 3.5-3.6 5.3-5.2L407 81c-9.4-9.4-9.4-24.6 0-33.9zm73 185a24 24 0 1 0 -48 0 24 24 0 1 0 48 0zm88 24a24 24 0 1 0 0-48 24 24 0 1 0 0 48zM480 144a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},jte={prefix:"fas",iconName:"hand-fist",icon:[448,512,[9994,"fist-raised"],"f6de","M192 0c17.7 0 32 14.3 32 32V144H160V32c0-17.7 14.3-32 32-32zM64 64c0-17.7 14.3-32 32-32s32 14.3 32 32v80H64V64zm192 0c0-17.7 14.3-32 32-32s32 14.3 32 32v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V64zm96 64c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V128zm-96 88l0-.6c9.4 5.4 20.3 8.6 32 8.6c13.2 0 25.4-4 35.6-10.8c8.7 24.9 32.5 42.8 60.4 42.8c11.7 0 22.6-3.1 32-8.6V256c0 52.3-25.1 98.8-64 128v96c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V401.6c-17.3-7.9-33.2-18.8-46.9-32.5L69.5 357.5C45.5 333.5 32 300.9 32 267V240c0-35.3 28.7-64 64-64h88c22.1 0 40 17.9 40 40s-17.9 40-40 40H128c-8.8 0-16 7.2-16 16s7.2 16 16 16h56c39.8 0 72-32.2 72-72z"]},Wte={prefix:"fas",iconName:"users-gear",icon:[640,512,["users-cog"],"f509","M144 160A80 80 0 1 0 144 0a80 80 0 1 0 0 160zm368 0A80 80 0 1 0 512 0a80 80 0 1 0 0 160zM0 298.7C0 310.4 9.6 320 21.3 320H234.7c.2 0 .4 0 .7 0c-26.6-23.5-43.3-57.8-43.3-96c0-7.6 .7-15 1.9-22.3c-13.6-6.3-28.7-9.7-44.6-9.7H106.7C47.8 192 0 239.8 0 298.7zM320 320c24 0 45.9-8.8 62.7-23.3c2.5-3.7 5.2-7.3 8-10.7c2.7-3.3 5.7-6.1 9-8.3C410 262.3 416 243.9 416 224c0-53-43-96-96-96s-96 43-96 96s43 96 96 96zm65.4 60.2c-10.3-5.9-18.1-16.2-20.8-28.2H261.3C187.7 352 128 411.7 128 485.3c0 14.7 11.9 26.7 26.7 26.7H455.2c-2.1-5.2-3.2-10.9-3.2-16.4v-3c-1.3-.7-2.7-1.5-4-2.3l-2.6 1.5c-16.8 9.7-40.5 8-54.7-9.7c-4.5-5.6-8.6-11.5-12.4-17.6l-.1-.2-.1-.2-2.4-4.1-.1-.2-.1-.2c-3.4-6.2-6.4-12.6-9-19.3c-8.2-21.2 2.2-42.6 19-52.3l2.7-1.5c0-.8 0-1.5 0-2.3s0-1.5 0-2.3l-2.7-1.5zM533.3 192H490.7c-15.9 0-31 3.5-44.6 9.7c1.3 7.2 1.9 14.7 1.9 22.3c0 17.4-3.5 33.9-9.7 49c2.5 .9 4.9 2 7.1 3.3l2.6 1.5c1.3-.8 2.6-1.6 4-2.3v-3c0-19.4 13.3-39.1 35.8-42.6c7.9-1.2 16-1.9 24.2-1.9s16.3 .6 24.2 1.9c22.5 3.5 35.8 23.2 35.8 42.6v3c1.3 .7 2.7 1.5 4 2.3l2.6-1.5c16.8-9.7 40.5-8 54.7 9.7c2.3 2.8 4.5 5.8 6.6 8.7c-2.1-57.1-49-102.7-106.6-102.7zm91.3 163.9c6.3-3.6 9.5-11.1 6.8-18c-2.1-5.5-4.6-10.8-7.4-15.9l-2.3-4c-3.1-5.1-6.5-9.9-10.2-14.5c-4.6-5.7-12.7-6.7-19-3l-2.9 1.7c-9.2 5.3-20.4 4-29.6-1.3s-16.1-14.5-16.1-25.1v-3.4c0-7.3-4.9-13.8-12.1-14.9c-6.5-1-13.1-1.5-19.9-1.5s-13.4 .5-19.9 1.5c-7.2 1.1-12.1 7.6-12.1 14.9v3.4c0 10.6-6.9 19.8-16.1 25.1s-20.4 6.6-29.6 1.3l-2.9-1.7c-6.3-3.6-14.4-2.6-19 3c-3.7 4.6-7.1 9.5-10.2 14.6l-2.3 3.9c-2.8 5.1-5.3 10.4-7.4 15.9c-2.6 6.8 .5 14.3 6.8 17.9l2.9 1.7c9.2 5.3 13.7 15.8 13.7 26.4s-4.5 21.1-13.7 26.4l-3 1.7c-6.3 3.6-9.5 11.1-6.8 17.9c2.1 5.5 4.6 10.7 7.4 15.8l2.4 4.1c3 5.1 6.4 9.9 10.1 14.5c4.6 5.7 12.7 6.7 19 3l2.9-1.7c9.2-5.3 20.4-4 29.6 1.3s16.1 14.5 16.1 25.1v3.4c0 7.3 4.9 13.8 12.1 14.9c6.5 1 13.1 1.5 19.9 1.5s13.4-.5 19.9-1.5c7.2-1.1 12.1-7.6 12.1-14.9v-3.4c0-10.6 6.9-19.8 16.1-25.1s20.4-6.6 29.6-1.3l2.9 1.7c6.3 3.6 14.4 2.6 19-3c3.7-4.6 7.1-9.4 10.1-14.5l2.4-4.2c2.8-5.1 5.3-10.3 7.4-15.8c2.6-6.8-.5-14.3-6.8-17.9l-3-1.7c-9.2-5.3-13.7-15.8-13.7-26.4s4.5-21.1 13.7-26.4l3-1.7zM472 384a40 40 0 1 1 80 0 40 40 0 1 1 -80 0z"]};function aA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ji(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aA(Object(n),!0).forEach(function(r){Qn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function Qn(t,e,n){return e=Yte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qte(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Gte(t,e){if(t==null)return{};var n=qte(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kte(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yte(t){var e=Kte(t,"string");return typeof e=="symbol"?e:String(e)}var Jte=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$P={exports:{}};(function(t){(function(e){var n=function(y,_,v){if(!c(_)||h(_)||d(_)||f(_)||l(_))return _;var I,S=0,C=0;if(u(_))for(I=[],C=_.length;S<C;S++)I.push(n(y,_[S],v));else{I={};for(var F in _)Object.prototype.hasOwnProperty.call(_,F)&&(I[y(F,v)]=n(y,_[F],v))}return I},r=function(y,_){_=_||{};var v=_.separator||"_",I=_.split||/(?=[A-Z])/;return y.split(I).join(v)},i=function(y){return p(y)?y:(y=y.replace(/[\-_\s]+(.)?/g,function(_,v){return v?v.toUpperCase():""}),y.substr(0,1).toLowerCase()+y.substr(1))},s=function(y){var _=i(y);return _.substr(0,1).toUpperCase()+_.substr(1)},o=function(y,_){return r(y,_).toLowerCase()},a=Object.prototype.toString,l=function(y){return typeof y=="function"},c=function(y){return y===Object(y)},u=function(y){return a.call(y)=="[object Array]"},h=function(y){return a.call(y)=="[object Date]"},d=function(y){return a.call(y)=="[object RegExp]"},f=function(y){return a.call(y)=="[object Boolean]"},p=function(y){return y=y-0,y===y},m=function(y,_){var v=_&&"process"in _?_.process:_;return typeof v!="function"?y:function(I,S){return v(I,y,S)}},g={camelize:i,decamelize:o,pascalize:s,depascalize:o,camelizeKeys:function(y,_){return n(m(i,_),y)},decamelizeKeys:function(y,_){return n(m(o,_),y,_)},pascalizeKeys:function(y,_){return n(m(s,_),y)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=g:e.humps=g})(Jte)})($P);var Qte=$P.exports,Xte=["class","style"];function Zte(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=Qte.camelize(n.slice(0,r)),s=n.slice(r+1).trim();return e[i]=s,e},{})}function ene(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function HP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(l){return HP(l)}),i=Object.keys(t.attributes||{}).reduce(function(l,c){var u=t.attributes[c];switch(c){case"class":l.class=ene(u);break;case"style":l.style=Zte(u);break;default:l.attrs[c]=u}return l},{attrs:{},class:{},style:{}});n.class;var s=n.style,o=s===void 0?{}:s,a=Gte(n,Xte);return Jo(t.tag,ji(ji(ji({},e),{},{class:i.class,style:ji(ji({},i.style),o)},i.attrs),a),r)}var zP=!1;try{zP=!0}catch{}function tne(){if(!zP&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function Ay(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Qn({},t,e):{}}function nne(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},Qn(e,"fa-".concat(t.size),t.size!==null),Qn(e,"fa-rotate-".concat(t.rotation),t.rotation!==null),Qn(e,"fa-pull-".concat(t.pull),t.pull!==null),Qn(e,"fa-swap-opacity",t.swapOpacity),Qn(e,"fa-bounce",t.bounce),Qn(e,"fa-shake",t.shake),Qn(e,"fa-beat",t.beat),Qn(e,"fa-fade",t.fade),Qn(e,"fa-beat-fade",t.beatFade),Qn(e,"fa-flash",t.flash),Qn(e,"fa-spin-pulse",t.spinPulse),Qn(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function lA(t){if(t&&Ap(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(Vv.icon)return Vv.icon(t);if(t===null)return null;if(Ap(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var rne=Ut({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,i=ot(function(){return lA(e.icon)}),s=ot(function(){return Ay("classes",nne(e))}),o=ot(function(){return Ay("transform",typeof e.transform=="string"?Vv.transform(e.transform):e.transform)}),a=ot(function(){return Ay("mask",lA(e.mask))}),l=ot(function(){return ute(i.value,ji(ji(ji(ji({},s.value),o.value),a.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});_i(l,function(u){if(!u)return tne("Could not find one or more icon(s)",i.value,a.value)},{immediate:!0});var c=ot(function(){return l.value?HP(l.value.abstract[0],{},r):null});return function(){return c.value}}});Ze.add(wte);Ze.add(Pte);Ze.add(bte);Ze.add(Mte);Ze.add(Ite);Ze.add(Vte);Ze.add(Tte);Ze.add(hte);Ze.add(dte);Ze.add(yte);Ze.add(Dte);Ze.add(Ete);Ze.add(Ute);Ze.add(Wte);Ze.add(Fte);Ze.add(mte);Ze.add(Hte);Ze.add(Bte);Ze.add(fte);Ze.add(gte);Ze.add(zte);Ze.add(Ate);Ze.add(Cte);Ze.add(kte);Ze.add($te);Ze.add(Nte);Ze.add(Lte);Ze.add(pte);Ze.add(_te);Ze.add(Rte);Ze.add(jte);Ze.add(xte);Ze.add(Ote);Ze.add(vte);Ze.add(Ste);const Xh=T4(RH);Xh.use(A4());Xh.use(b$,{firebaseApp:lN,modules:[g$()]});Xh.use(fP);Xh.component("FontAwesomeIcon",rne);Xh.mount("#app");
