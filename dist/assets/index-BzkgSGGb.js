(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function bv(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const _t={},Ua=[],br=()=>{},fP=()=>!1,hp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ev=t=>t.startsWith("onUpdate:"),Gt=Object.assign,Tv=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},pP=Object.prototype.hasOwnProperty,Xe=(t,e)=>pP.call(t,e),ye=Array.isArray,$a=t=>Wu(t)==="[object Map]",dp=t=>Wu(t)==="[object Set]",Tb=t=>Wu(t)==="[object Date]",Ce=t=>typeof t=="function",xt=t=>typeof t=="string",Fs=t=>typeof t=="symbol",ft=t=>t!==null&&typeof t=="object",wv=t=>(ft(t)||Ce(t))&&Ce(t.then)&&Ce(t.catch),FI=Object.prototype.toString,Wu=t=>FI.call(t),mP=t=>Wu(t).slice(8,-1),BI=t=>Wu(t)==="[object Object]",Sv=t=>xt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ac=bv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},gP=/-(\w)/g,pi=fp(t=>t.replace(gP,(e,n)=>n?n.toUpperCase():"")),yP=/\B([A-Z])/g,aa=fp(t=>t.replace(yP,"-$1").toLowerCase()),pp=fp(t=>t.charAt(0).toUpperCase()+t.slice(1)),Um=fp(t=>t?`on${pp(t)}`:""),Bs=(t,e)=>!Object.is(t,e),Td=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Kd=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},py=t=>{const e=parseFloat(t);return isNaN(e)?t:e},UI=t=>{const e=xt(t)?Number(t):NaN;return isNaN(e)?t:e};let wb;const $I=()=>wb||(wb=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bi(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=xt(r)?EP(r):Bi(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(xt(t)||ft(t))return t}const _P=/;(?![^(]*\))/g,vP=/:([^]+)/,bP=/\/\*[^]*?\*\//g;function EP(t){const e={};return t.replace(bP,"").split(_P).forEach(n=>{if(n){const r=n.split(vP);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function mp(t){let e="";if(xt(t))e=t;else if(ye(t))for(let n=0;n<t.length;n++){const r=mp(t[n]);r&&(e+=r+" ")}else if(ft(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const TP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wP=bv(TP);function HI(t){return!!t||t===""}function SP(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=gp(t[r],e[r]);return n}function gp(t,e){if(t===e)return!0;let n=Tb(t),r=Tb(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Fs(t),r=Fs(e),n||r)return t===e;if(n=ye(t),r=ye(e),n||r)return n&&r?SP(t,e):!1;if(n=ft(t),r=ft(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!gp(t[o],e[o]))return!1}}return String(t)===String(e)}function zI(t,e){return t.findIndex(n=>gp(n,e))}const We=t=>xt(t)?t:t==null?"":ye(t)||ft(t)&&(t.toString===FI||!Ce(t.toString))?JSON.stringify(t,jI,2):String(t),jI=(t,e)=>e&&e.__v_isRef?jI(t,e.value):$a(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[$m(r,s)+" =>"]=i,n),{})}:dp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>$m(n))}:Fs(e)?$m(e):ft(e)&&!ye(e)&&!BI(e)?String(e):e,$m=(t,e="")=>{var n;return Fs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rr;class WI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=rr,!e&&rr&&(this.index=(rr.scopes||(rr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=rr;try{return rr=this,e()}finally{rr=n}}}on(){rr=this}off(){rr=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function GI(t){return new WI(t)}function IP(t,e=rr){e&&e.active&&e.effects.push(t)}function Iv(){return rr}function qI(t){rr&&rr.cleanups.push(t)}let Po;class Av{constructor(e,n,r,i){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,IP(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,la();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(AP(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ca()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=ks,n=Po;try{return ks=!0,Po=this,this._runnings++,Sb(this),this.fn()}finally{Ib(this),this._runnings--,Po=n,ks=e}}stop(){var e;this.active&&(Sb(this),Ib(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function AP(t){return t.value}function Sb(t){t._trackId++,t._depsLength=0}function Ib(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)KI(t.deps[e],t);t.deps.length=t._depsLength}}function KI(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let ks=!0,my=0;const YI=[];function la(){YI.push(ks),ks=!1}function ca(){const t=YI.pop();ks=t===void 0?!0:t}function Cv(){my++}function Rv(){for(my--;!my&&gy.length;)gy.shift()()}function JI(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&KI(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const gy=[];function QI(t,e,n){Cv();for(const r of t.keys()){let i;r._dirtyLevel<e&&(i??(i=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(i??(i=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&gy.push(r.scheduler)))}Rv()}const XI=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Yd=new WeakMap,xo=Symbol(""),yy=Symbol("");function Zn(t,e,n){if(ks&&Po){let r=Yd.get(t);r||Yd.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=XI(()=>r.delete(n))),JI(Po,i)}}function Ui(t,e,n,r,i,s){const o=Yd.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ye(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!Fs(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ye(t)?Sv(n)&&a.push(o.get("length")):(a.push(o.get(xo)),$a(t)&&a.push(o.get(yy)));break;case"delete":ye(t)||(a.push(o.get(xo)),$a(t)&&a.push(o.get(yy)));break;case"set":$a(t)&&a.push(o.get(xo));break}Cv();for(const l of a)l&&QI(l,4);Rv()}function CP(t,e){var n;return(n=Yd.get(t))==null?void 0:n.get(e)}const RP=bv("__proto__,__v_isRef,__isVue"),ZI=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Fs)),Ab=kP();function kP(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=et(this);for(let s=0,o=this.length;s<o;s++)Zn(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(et)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){la(),Cv();const r=et(this)[e].apply(this,n);return Rv(),ca(),r}}),t}function OP(t){const e=et(this);return Zn(e,"has",t),e.hasOwnProperty(t)}class eA{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?zP:iA:s?rA:nA).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ye(e);if(!i){if(o&&Xe(Ab,n))return Reflect.get(Ab,n,r);if(n==="hasOwnProperty")return OP}const a=Reflect.get(e,n,r);return(Fs(n)?ZI.has(n):RP(n))||(i||Zn(e,"get",n),s)?a:sn(a)?o&&Sv(n)?a:a.value:ft(a)?i?Nv(a):Gu(a):a}}class tA extends eA{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=ol(s);if(!Jd(r)&&!ol(r)&&(s=et(s),r=et(r)),!ye(e)&&sn(s)&&!sn(r))return l?!1:(s.value=r,!0)}const o=ye(e)&&Sv(n)?Number(n)<e.length:Xe(e,n),a=Reflect.set(e,n,r,i);return e===et(i)&&(o?Bs(r,s)&&Ui(e,"set",n,r):Ui(e,"add",n,r)),a}deleteProperty(e,n){const r=Xe(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ui(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Fs(n)||!ZI.has(n))&&Zn(e,"has",n),r}ownKeys(e){return Zn(e,"iterate",ye(e)?"length":xo),Reflect.ownKeys(e)}}class NP extends eA{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const MP=new tA,PP=new NP,xP=new tA(!0),kv=t=>t,yp=t=>Reflect.getPrototypeOf(t);function Lh(t,e,n=!1,r=!1){t=t.__v_raw;const i=et(t),s=et(e);n||(Bs(e,s)&&Zn(i,"get",e),Zn(i,"get",s));const{has:o}=yp(i),a=r?kv:n?Pv:nu;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Vh(t,e=!1){const n=this.__v_raw,r=et(n),i=et(t);return e||(Bs(t,i)&&Zn(r,"has",t),Zn(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Fh(t,e=!1){return t=t.__v_raw,!e&&Zn(et(t),"iterate",xo),Reflect.get(t,"size",t)}function Cb(t){t=et(t);const e=et(this);return yp(e).has.call(e,t)||(e.add(t),Ui(e,"add",t,t)),this}function Rb(t,e){e=et(e);const n=et(this),{has:r,get:i}=yp(n);let s=r.call(n,t);s||(t=et(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Bs(e,o)&&Ui(n,"set",t,e):Ui(n,"add",t,e),this}function kb(t){const e=et(this),{has:n,get:r}=yp(e);let i=n.call(e,t);i||(t=et(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&Ui(e,"delete",t,void 0),s}function Ob(){const t=et(this),e=t.size!==0,n=t.clear();return e&&Ui(t,"clear",void 0,void 0),n}function Bh(t,e){return function(r,i){const s=this,o=s.__v_raw,a=et(o),l=e?kv:t?Pv:nu;return!t&&Zn(a,"iterate",xo),o.forEach((c,u)=>r.call(i,l(c),l(u),s))}}function Uh(t,e,n){return function(...r){const i=this.__v_raw,s=et(i),o=$a(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),u=n?kv:e?Pv:nu;return!e&&Zn(s,"iterate",l?yy:xo),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function ns(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function DP(){const t={get(s){return Lh(this,s)},get size(){return Fh(this)},has:Vh,add:Cb,set:Rb,delete:kb,clear:Ob,forEach:Bh(!1,!1)},e={get(s){return Lh(this,s,!1,!0)},get size(){return Fh(this)},has:Vh,add:Cb,set:Rb,delete:kb,clear:Ob,forEach:Bh(!1,!0)},n={get(s){return Lh(this,s,!0)},get size(){return Fh(this,!0)},has(s){return Vh.call(this,s,!0)},add:ns("add"),set:ns("set"),delete:ns("delete"),clear:ns("clear"),forEach:Bh(!0,!1)},r={get(s){return Lh(this,s,!0,!0)},get size(){return Fh(this,!0)},has(s){return Vh.call(this,s,!0)},add:ns("add"),set:ns("set"),delete:ns("delete"),clear:ns("clear"),forEach:Bh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Uh(s,!1,!1),n[s]=Uh(s,!0,!1),e[s]=Uh(s,!1,!0),r[s]=Uh(s,!0,!0)}),[t,n,e,r]}const[LP,VP,FP,BP]=DP();function Ov(t,e){const n=e?t?BP:FP:t?VP:LP;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Xe(n,i)&&i in r?n:r,i,s)}const UP={get:Ov(!1,!1)},$P={get:Ov(!1,!0)},HP={get:Ov(!0,!1)},nA=new WeakMap,rA=new WeakMap,iA=new WeakMap,zP=new WeakMap;function jP(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function WP(t){return t.__v_skip||!Object.isExtensible(t)?0:jP(mP(t))}function Gu(t){return ol(t)?t:Mv(t,!1,MP,UP,nA)}function sA(t){return Mv(t,!1,xP,$P,rA)}function Nv(t){return Mv(t,!0,PP,HP,iA)}function Mv(t,e,n,r,i){if(!ft(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=WP(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Ha(t){return ol(t)?Ha(t.__v_raw):!!(t&&t.__v_isReactive)}function ol(t){return!!(t&&t.__v_isReadonly)}function Jd(t){return!!(t&&t.__v_isShallow)}function oA(t){return Ha(t)||ol(t)}function et(t){const e=t&&t.__v_raw;return e?et(e):t}function _p(t){return Object.isExtensible(t)&&Kd(t,"__v_skip",!0),t}const nu=t=>ft(t)?Gu(t):t,Pv=t=>ft(t)?Nv(t):t;class aA{constructor(e,n,r,i){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Av(()=>e(this._value),()=>Cc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=et(this);return(!e._cacheable||e.effect.dirty)&&Bs(e._value,e._value=e.effect.run())&&Cc(e,4),xv(e),e.effect._dirtyLevel>=2&&Cc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function GP(t,e,n=!1){let r,i;const s=Ce(t);return s?(r=t,i=br):(r=t.get,i=t.set),new aA(r,i,s||!i,n)}function xv(t){var e;ks&&Po&&(t=et(t),JI(Po,(e=t.dep)!=null?e:t.dep=XI(()=>t.dep=void 0,t instanceof aA?t:void 0)))}function Cc(t,e=4,n){t=et(t);const r=t.dep;r&&QI(r,e)}function sn(t){return!!(t&&t.__v_isRef===!0)}function Ve(t){return cA(t,!1)}function lA(t){return cA(t,!0)}function cA(t,e){return sn(t)?t:new qP(t,e)}class qP{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:et(e),this._value=n?e:nu(e)}get value(){return xv(this),this._value}set value(e){const n=this.__v_isShallow||Jd(e)||ol(e);e=n?e:et(e),Bs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:nu(e),Cc(this,4))}}function ze(t){return sn(t)?t.value:t}function Ni(t){return Ce(t)?t():ze(t)}const KP={get:(t,e,n)=>ze(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return sn(i)&&!sn(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function uA(t){return Ha(t)?t:new Proxy(t,KP)}class YP{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:n,set:r}=e(()=>xv(this),()=>Cc(this));this._get=n,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function hA(t){return new YP(t)}class JP{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return CP(et(this._object),this._key)}}class QP{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function XP(t,e,n){return sn(t)?t:Ce(t)?new QP(t):ft(t)&&arguments.length>1?ZP(t,e,n):Ve(t)}function ZP(t,e,n){const r=t[e];return sn(r)?r:new JP(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Os(t,e,n,r){try{return r?t(...r):t()}catch(i){qu(i,e,n)}}function Sr(t,e,n,r){if(Ce(t)){const s=Os(t,e,n,r);return s&&wv(s)&&s.catch(o=>{qu(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(Sr(t[s],e,n,r));return i}function qu(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Os(l,null,10,[t,o,a]);return}}ex(t,n,i,r)}function ex(t,e,n,r=!0){console.error(t)}let ru=!1,_y=!1;const Mn=[];let Jr=0;const za=[];let hs=null,go=0;const dA=Promise.resolve();let Dv=null;function Ll(t){const e=Dv||dA;return t?e.then(this?t.bind(this):t):e}function tx(t){let e=Jr+1,n=Mn.length;for(;e<n;){const r=e+n>>>1,i=Mn[r],s=iu(i);s<t||s===t&&i.pre?e=r+1:n=r}return e}function Lv(t){(!Mn.length||!Mn.includes(t,ru&&t.allowRecurse?Jr+1:Jr))&&(t.id==null?Mn.push(t):Mn.splice(tx(t.id),0,t),fA())}function fA(){!ru&&!_y&&(_y=!0,Dv=dA.then(mA))}function nx(t){const e=Mn.indexOf(t);e>Jr&&Mn.splice(e,1)}function vy(t){ye(t)?za.push(...t):(!hs||!hs.includes(t,t.allowRecurse?go+1:go))&&za.push(t),fA()}function Nb(t,e,n=ru?Jr+1:0){for(;n<Mn.length;n++){const r=Mn[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Mn.splice(n,1),n--,r()}}}function pA(t){if(za.length){const e=[...new Set(za)].sort((n,r)=>iu(n)-iu(r));if(za.length=0,hs){hs.push(...e);return}for(hs=e,go=0;go<hs.length;go++)hs[go]();hs=null,go=0}}const iu=t=>t.id==null?1/0:t.id,rx=(t,e)=>{const n=iu(t)-iu(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function mA(t){_y=!1,ru=!0,Mn.sort(rx);try{for(Jr=0;Jr<Mn.length;Jr++){const e=Mn[Jr];e&&e.active!==!1&&Os(e,null,14)}}finally{Jr=0,Mn.length=0,pA(),ru=!1,Dv=null,(Mn.length||za.length)&&mA()}}function ix(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||_t;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=r[u]||_t;d&&(i=n.map(f=>xt(f)?f.trim():f)),h&&(i=n.map(py))}let a,l=r[a=Um(e)]||r[a=Um(pi(e))];!l&&s&&(l=r[a=Um(aa(e))]),l&&Sr(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Sr(c,t,6,i)}}function gA(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Ce(t)){const l=c=>{const u=gA(c,e,!0);u&&(a=!0,Gt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(ft(t)&&r.set(t,null),null):(ye(s)?s.forEach(l=>o[l]=null):Gt(o,s),ft(t)&&r.set(t,o),o)}function vp(t,e){return!t||!hp(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xe(t,e[0].toLowerCase()+e.slice(1))||Xe(t,aa(e))||Xe(t,e))}let Wt=null,bp=null;function Qd(t){const e=Wt;return Wt=t,bp=t&&t.type.__scopeId||null,e}function Ku(t){bp=t}function Yu(){bp=null}function Do(t,e=Wt,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Gb(-1);const s=Qd(e);let o;try{o=t(...i)}finally{Qd(s),r._d&&Gb(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Hm(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:m}=t;let g,_;const v=Qd(t);try{if(n.shapeFlag&4){const I=i||r,A=I;g=Mr(u.call(A,I,h,s,f,d,p)),_=l}else{const I=e;g=Mr(I.length>1?I(s,{attrs:l,slots:a,emit:c}):I(s,null)),_=e.props?l:ox(l)}}catch(I){Mc.length=0,qu(I,t,1),g=Ue(Qn)}let T=g;if(_&&m!==!1){const I=Object.keys(_),{shapeFlag:A}=T;I.length&&A&7&&(o&&I.some(Ev)&&(_=ax(_,o)),T=Us(T,_))}return n.dirs&&(T=Us(T),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),g=T,Qd(v),g}function sx(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(ou(i)){if(i.type!==Qn||i.children==="v-if"){if(n)return;n=i}}else return}return n}const ox=t=>{let e;for(const n in t)(n==="class"||n==="style"||hp(n))&&((e||(e={}))[n]=t[n]);return e},ax=(t,e)=>{const n={};for(const r in t)(!Ev(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function lx(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Mb(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==r[d]&&!vp(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Mb(r,o,c):!0:!!o;return!1}function Mb(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!vp(n,s))return!0}return!1}function Vv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const yA="components";function cx(t,e){return hx(yA,t,!0,e)||t}const ux=Symbol.for("v-ndc");function hx(t,e,n=!0,r=!1){const i=Wt||_n;if(i){const s=i.type;if(t===yA){const a=mD(s,!1);if(a&&(a===e||a===pi(e)||a===pp(pi(e))))return s}const o=Pb(i[t]||s[t],e)||Pb(i.appContext[t],e);return!o&&r?s:o}}function Pb(t,e){return t&&(t[e]||t[pi(e)]||t[pp(pi(e))])}const dx=t=>t.__isSuspense;let by=0;const fx={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)mx(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}gx(t,e,n,r,i,o,a,l,c)}},hydrate:yx,create:Fv,normalize:_x},px=fx;function su(t,e){const n=t.props&&t.props[e];Ce(n)&&n()}function mx(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:u}}=l,h=u("div"),d=t.suspense=Fv(t,i,r,e,h,n,s,o,a,l);c(null,d.pendingBranch=t.ssContent,h,null,r,d,s,o),d.deps>0?(su(t,"onPending"),su(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),ja(d,t.ssFallback)):d.resolve(!1,!0)}function gx(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const d=e.ssContent,f=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:_}=h;if(m)h.pendingBranch=d,Qr(d,m)?(l(m,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():g&&(_||(l(p,f,n,r,i,null,s,o,a),ja(h,f)))):(h.pendingId=by++,_?(h.isHydrating=!1,h.activeBranch=m):c(m,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),g?(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():(l(p,f,n,r,i,null,s,o,a),ja(h,f))):p&&Qr(d,p)?(l(p,d,n,r,i,h,s,o,a),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0&&h.resolve()));else if(p&&Qr(d,p))l(p,d,n,r,i,h,s,o,a),ja(h,d);else if(su(e,"onPending"),h.pendingBranch=d,d.shapeFlag&512?h.pendingId=d.component.suspenseId:h.pendingId=by++,l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0)h.resolve();else{const{timeout:v,pendingId:T}=h;v>0?setTimeout(()=>{h.pendingId===T&&h.fallback(f)},v):v===0&&h.fallback(f)}}function Fv(t,e,n,r,i,s,o,a,l,c,u=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:m,remove:g}}=c;let _;const v=bx(t);v&&e!=null&&e.pendingBranch&&(_=e.pendingId,e.deps++);const T=t.props?UI(t.props.timeout):void 0,I=s,A={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:by++,timeout:typeof T=="number"?T:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(w=!1,O=!1){const{vnode:M,activeBranch:k,pendingBranch:U,pendingId:F,effects:$,parentComponent:pe,container:q}=A;let z=!1;A.isHydrating?A.isHydrating=!1:w||(z=k&&U.transition&&U.transition.mode==="out-in",z&&(k.transition.afterLeave=()=>{F===A.pendingId&&(d(U,q,s===I?p(k):s,0),vy($))}),k&&(m(k.el)!==A.hiddenContainer&&(s=p(k)),f(k,pe,A,!0)),z||d(U,q,s,0)),ja(A,U),A.pendingBranch=null,A.isInFallback=!1;let N=A.parent,B=!1;for(;N;){if(N.pendingBranch){N.effects.push(...$),B=!0;break}N=N.parent}!B&&!z&&vy($),A.effects=[],v&&e&&e.pendingBranch&&_===e.pendingId&&(e.deps--,e.deps===0&&!O&&e.resolve()),su(M,"onResolve")},fallback(w){if(!A.pendingBranch)return;const{vnode:O,activeBranch:M,parentComponent:k,container:U,namespace:F}=A;su(O,"onFallback");const $=p(M),pe=()=>{A.isInFallback&&(h(null,w,U,$,k,null,F,a,l),ja(A,w))},q=w.transition&&w.transition.mode==="out-in";q&&(M.transition.afterLeave=pe),A.isInFallback=!0,f(M,k,null,!0),q||pe()},move(w,O,M){A.activeBranch&&d(A.activeBranch,w,O,M),A.container=w},next(){return A.activeBranch&&p(A.activeBranch)},registerDep(w,O){const M=!!A.pendingBranch;M&&A.deps++;const k=w.vnode.el;w.asyncDep.catch(U=>{qu(U,w,0)}).then(U=>{if(w.isUnmounted||A.isUnmounted||A.pendingId!==w.suspenseId)return;w.asyncResolved=!0;const{vnode:F}=w;Ny(w,U,!1),k&&(F.el=k);const $=!k&&w.subTree.el;O(w,F,m(k||w.subTree.el),k?null:p(w.subTree),A,o,l),$&&g($),Vv(w,F.el),M&&--A.deps===0&&A.resolve()})},unmount(w,O){A.isUnmounted=!0,A.activeBranch&&f(A.activeBranch,n,w,O),A.pendingBranch&&f(A.pendingBranch,n,w,O)}};return A}function yx(t,e,n,r,i,s,o,a,l){const c=e.suspense=Fv(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),u}function _x(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=xb(r?n.default:n),t.ssFallback=r?xb(n.fallback):Ue(Qn)}function xb(t){let e;if(Ce(t)){const n=ll&&t._c;n&&(t._d=!1,se()),t=t(),n&&(t._d=!0,e=Er,DA())}return ye(t)&&(t=sx(t)),t=Mr(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function vx(t,e){e&&e.pendingBranch?ye(t)?e.effects.push(...t):e.effects.push(t):vy(t)}function ja(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Vv(r,i))}function bx(t){var e;return((e=t.props)==null?void 0:e.suspensible)!=null&&t.props.suspensible!==!1}const Ex=Symbol.for("v-scx"),Tx=()=>Jn(Ex);function wx(t,e){return Bv(t,null,e)}const $h={};function $i(t,e,n){return Bv(t,e,n)}function Bv(t,e,{immediate:n,deep:r,flush:i,once:s,onTrack:o,onTrigger:a}=_t){if(e&&s){const w=e;e=(...O)=>{w(...O),A()}}const l=_n,c=w=>r===!0?w:Eo(w,r===!1?1:void 0);let u,h=!1,d=!1;if(sn(t)?(u=()=>t.value,h=Jd(t)):Ha(t)?(u=()=>c(t),h=!0):ye(t)?(d=!0,h=t.some(w=>Ha(w)||Jd(w)),u=()=>t.map(w=>{if(sn(w))return w.value;if(Ha(w))return c(w);if(Ce(w))return Os(w,l,2)})):Ce(t)?e?u=()=>Os(t,l,2):u=()=>(f&&f(),Sr(t,l,3,[p])):u=br,e&&r){const w=u;u=()=>Eo(w())}let f,p=w=>{f=T.onStop=()=>{Os(w,l,4),f=T.onStop=void 0}},m;if(Ip)if(p=br,e?n&&Sr(e,l,3,[u(),d?[]:void 0,p]):u(),i==="sync"){const w=Tx();m=w.__watcherHandles||(w.__watcherHandles=[])}else return br;let g=d?new Array(t.length).fill($h):$h;const _=()=>{if(!(!T.active||!T.dirty))if(e){const w=T.run();(r||h||(d?w.some((O,M)=>Bs(O,g[M])):Bs(w,g)))&&(f&&f(),Sr(e,l,3,[w,g===$h?void 0:d&&g[0]===$h?[]:g,p]),g=w)}else T.run()};_.allowRecurse=!!e;let v;i==="sync"?v=_:i==="post"?v=()=>Kn(_,l&&l.suspense):(_.pre=!0,l&&(_.id=l.uid),v=()=>Lv(_));const T=new Av(u,br,v),I=Iv(),A=()=>{T.stop(),I&&Tv(I.effects,T)};return e?n?_():g=T.run():i==="post"?Kn(T.run.bind(T),l&&l.suspense):T.run(),m&&m.push(A),A}function Sx(t,e,n){const r=this.proxy,i=xt(t)?t.includes(".")?_A(r,t):()=>r[t]:t.bind(r,r);let s;Ce(e)?s=e:(s=e.handler,n=e);const o=Go(this),a=Bv(i,s.bind(r),n);return o(),a}function _A(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Eo(t,e,n=0,r){if(!ft(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),sn(t))Eo(t.value,e,n,r);else if(ye(t))for(let i=0;i<t.length;i++)Eo(t[i],e,n,r);else if(dp(t)||$a(t))t.forEach(i=>{Eo(i,e,n,r)});else if(BI(t))for(const i in t)Eo(t[i],e,n,r);return t}function In(t,e){if(Wt===null)return t;const n=Ap(Wt)||Wt.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=_t]=e[i];s&&(Ce(s)&&(s={mounted:s,updated:s}),s.deep&&Eo(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function oo(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(la(),Sr(l,n,8,[t.el,a,t,e]),ca())}}const ds=Symbol("_leaveCb"),Hh=Symbol("_enterCb");function Ix(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ju(()=>{t.isMounted=!0}),Qu(()=>{t.isUnmounting=!0}),t}const gr=[Function,Array],vA={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:gr,onEnter:gr,onAfterEnter:gr,onEnterCancelled:gr,onBeforeLeave:gr,onLeave:gr,onAfterLeave:gr,onLeaveCancelled:gr,onBeforeAppear:gr,onAppear:gr,onAfterAppear:gr,onAppearCancelled:gr},Ax={name:"BaseTransition",props:vA,setup(t,{slots:e}){const n=ua(),r=Ix();return()=>{const i=e.default&&EA(e.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const d of i)if(d.type!==Qn){s=d;break}}const o=et(t),{mode:a}=o;if(r.isLeaving)return zm(s);const l=Db(s);if(!l)return zm(s);const c=Ey(l,o,r,n);Ty(l,c);const u=n.subTree,h=u&&Db(u);if(h&&h.type!==Qn&&!Qr(l,h)){const d=Ey(h,o,r,n);if(Ty(h,d),a==="out-in")return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},zm(s);a==="in-out"&&l.type!==Qn&&(d.delayLeave=(f,p,m)=>{const g=bA(r,h);g[String(h.key)]=h,f[ds]=()=>{p(),f[ds]=void 0,delete c.delayedLeave},c.delayedLeave=m})}return s}}},Cx=Ax;function bA(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ey(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:_,onAppearCancelled:v}=e,T=String(t.key),I=bA(n,t),A=(M,k)=>{M&&Sr(M,r,9,k)},w=(M,k)=>{const U=k[1];A(M,k),ye(M)?M.every(F=>F.length<=1)&&U():M.length<=1&&U()},O={mode:s,persisted:o,beforeEnter(M){let k=a;if(!n.isMounted)if(i)k=m||a;else return;M[ds]&&M[ds](!0);const U=I[T];U&&Qr(t,U)&&U.el[ds]&&U.el[ds](),A(k,[M])},enter(M){let k=l,U=c,F=u;if(!n.isMounted)if(i)k=g||l,U=_||c,F=v||u;else return;let $=!1;const pe=M[Hh]=q=>{$||($=!0,q?A(F,[M]):A(U,[M]),O.delayedLeave&&O.delayedLeave(),M[Hh]=void 0)};k?w(k,[M,pe]):pe()},leave(M,k){const U=String(t.key);if(M[Hh]&&M[Hh](!0),n.isUnmounting)return k();A(h,[M]);let F=!1;const $=M[ds]=pe=>{F||(F=!0,k(),pe?A(p,[M]):A(f,[M]),M[ds]=void 0,I[U]===t&&delete I[U])};I[U]=t,d?w(d,[M,$]):$()},clone(M){return Ey(M,e,n,r)}};return O}function zm(t){if(Ep(t))return t=Us(t),t.children=null,t}function Db(t){return Ep(t)?t.children?t.children[0]:void 0:t}function Ty(t,e){t.shapeFlag&6&&t.component?Ty(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function EA(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===it?(o.patchFlag&128&&i++,r=r.concat(EA(o.children,e,a))):(e||o.type!==Qn)&&r.push(a!=null?Us(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Cr(t,e){return Ce(t)?Gt({name:t.name},e,{setup:t}):t}const Rc=t=>!!t.type.__asyncLoader,Ep=t=>t.type.__isKeepAlive;function Rx(t,e){TA(t,"a",e)}function kx(t,e){TA(t,"da",e)}function TA(t,e,n=_n){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Tp(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Ep(i.parent.vnode)&&Ox(r,e,n,i),i=i.parent}}function Ox(t,e,n,r){const i=Tp(e,t,r,!0);wA(()=>{Tv(r[e],i)},n)}function Tp(t,e,n=_n,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;la();const a=Go(n),l=Sr(e,n,t,o);return a(),ca(),l});return r?i.unshift(s):i.push(s),s}}const Xi=t=>(e,n=_n)=>(!Ip||t==="sp")&&Tp(t,(...r)=>e(...r),n),Nx=Xi("bm"),Ju=Xi("m"),Mx=Xi("bu"),Px=Xi("u"),Qu=Xi("bum"),wA=Xi("um"),SA=Xi("sp"),xx=Xi("rtg"),Dx=Xi("rtc");function Lx(t,e=_n){Tp("ec",t,e)}function mi(t,e,n,r){let i;const s=n&&n[r];if(ye(t)||xt(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(ft(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function Jt(t,e,n={},r,i){if(Wt.isCE||Wt.parent&&Rc(Wt.parent)&&Wt.parent.isCE)return e!=="default"&&(n.name=e),Ue("slot",n,r&&r());let s=t[e];s&&s._c&&(s._d=!1),se();const o=s&&IA(s(n)),a=fn(it,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function IA(t){return t.some(e=>ou(e)?!(e.type===Qn||e.type===it&&!IA(e.children)):!0)?t:null}const wy=t=>t?FA(t)?Ap(t)||t.proxy:wy(t.parent):null,kc=Gt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>wy(t.parent),$root:t=>wy(t.root),$emit:t=>t.emit,$options:t=>Uv(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Lv(t.update)}),$nextTick:t=>t.n||(t.n=Ll.bind(t.proxy)),$watch:t=>Sx.bind(t)}),jm=(t,e)=>t!==_t&&!t.__isScriptSetup&&Xe(t,e),Vx={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(jm(r,e))return o[e]=1,r[e];if(i!==_t&&Xe(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Xe(c,e))return o[e]=3,s[e];if(n!==_t&&Xe(n,e))return o[e]=4,n[e];Sy&&(o[e]=0)}}const u=kc[e];let h,d;if(u)return e==="$attrs"&&Zn(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==_t&&Xe(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,Xe(d,e))return d[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return jm(i,e)?(i[e]=n,!0):r!==_t&&Xe(r,e)?(r[e]=n,!0):Xe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==_t&&Xe(t,o)||jm(e,o)||(a=s[0])&&Xe(a,o)||Xe(r,o)||Xe(kc,o)||Xe(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Xe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Lb(t){return ye(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function al(t){const e=ua();let n=t();return Oy(),wv(n)&&(n=n.catch(r=>{throw Go(e),r})),[n,()=>Go(e)]}let Sy=!0;function Fx(t){const e=Uv(t),n=t.proxy,r=t.ctx;Sy=!1,e.beforeCreate&&Vb(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:g,beforeDestroy:_,beforeUnmount:v,destroyed:T,unmounted:I,render:A,renderTracked:w,renderTriggered:O,errorCaptured:M,serverPrefetch:k,expose:U,inheritAttrs:F,components:$,directives:pe,filters:q}=e;if(c&&Bx(c,r,null),o)for(const B in o){const D=o[B];Ce(D)&&(r[B]=D.bind(n))}if(i){const B=i.call(n,n);ft(B)&&(t.data=Gu(B))}if(Sy=!0,s)for(const B in s){const D=s[B],oe=Ce(D)?D.bind(n,n):Ce(D.get)?D.get.bind(n,n):br,de=!Ce(D)&&Ce(D.set)?D.set.bind(n):br,Ae=Pt({get:oe,set:de});Object.defineProperty(r,B,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:De=>Ae.value=De})}if(a)for(const B in a)AA(a[B],r,n,B);if(l){const B=Ce(l)?l.call(n):l;Reflect.ownKeys(B).forEach(D=>{wd(D,B[D])})}u&&Vb(u,t,"c");function N(B,D){ye(D)?D.forEach(oe=>B(oe.bind(n))):D&&B(D.bind(n))}if(N(Nx,h),N(Ju,d),N(Mx,f),N(Px,p),N(Rx,m),N(kx,g),N(Lx,M),N(Dx,w),N(xx,O),N(Qu,v),N(wA,I),N(SA,k),ye(U))if(U.length){const B=t.exposed||(t.exposed={});U.forEach(D=>{Object.defineProperty(B,D,{get:()=>n[D],set:oe=>n[D]=oe})})}else t.exposed||(t.exposed={});A&&t.render===br&&(t.render=A),F!=null&&(t.inheritAttrs=F),$&&(t.components=$),pe&&(t.directives=pe)}function Bx(t,e,n=br){ye(t)&&(t=Iy(t));for(const r in t){const i=t[r];let s;ft(i)?"default"in i?s=Jn(i.from||r,i.default,!0):s=Jn(i.from||r):s=Jn(i),sn(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Vb(t,e,n){Sr(ye(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function AA(t,e,n,r){const i=r.includes(".")?_A(n,r):()=>n[r];if(xt(t)){const s=e[t];Ce(s)&&$i(i,s)}else if(Ce(t))$i(i,t.bind(n));else if(ft(t))if(ye(t))t.forEach(s=>AA(s,e,n,r));else{const s=Ce(t.handler)?t.handler.bind(n):e[t.handler];Ce(s)&&$i(i,s,t)}}function Uv(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Xd(l,c,o,!0)),Xd(l,e,o)),ft(e)&&s.set(e,l),l}function Xd(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Xd(t,s,n,!0),i&&i.forEach(o=>Xd(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=Ux[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Ux={data:Fb,props:Bb,emits:Bb,methods:hc,computed:hc,beforeCreate:Fn,created:Fn,beforeMount:Fn,mounted:Fn,beforeUpdate:Fn,updated:Fn,beforeDestroy:Fn,beforeUnmount:Fn,destroyed:Fn,unmounted:Fn,activated:Fn,deactivated:Fn,errorCaptured:Fn,serverPrefetch:Fn,components:hc,directives:hc,watch:Hx,provide:Fb,inject:$x};function Fb(t,e){return e?t?function(){return Gt(Ce(t)?t.call(this,this):t,Ce(e)?e.call(this,this):e)}:e:t}function $x(t,e){return hc(Iy(t),Iy(e))}function Iy(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Fn(t,e){return t?[...new Set([].concat(t,e))]:e}function hc(t,e){return t?Gt(Object.create(null),t,e):e}function Bb(t,e){return t?ye(t)&&ye(e)?[...new Set([...t,...e])]:Gt(Object.create(null),Lb(t),Lb(e??{})):e}function Hx(t,e){if(!t)return e;if(!e)return t;const n=Gt(Object.create(null),t);for(const r in e)n[r]=Fn(t[r],e[r]);return n}function CA(){return{app:null,config:{isNativeTag:fP,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zx=0;function jx(t,e){return function(r,i=null){Ce(r)||(r=Gt({},r)),i!=null&&!ft(i)&&(i=null);const s=CA(),o=new WeakSet;let a=!1;const l=s.app={_uid:zx++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:yD,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Ce(c.install)?(o.add(c),c.install(l,...u)):Ce(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=Ue(r,i);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Ap(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Oc;Oc=l;try{return c()}finally{Oc=u}}};return l}}let Oc=null;function wd(t,e){if(_n){let n=_n.provides;const r=_n.parent&&_n.parent.provides;r===n&&(n=_n.provides=Object.create(r)),n[t]=e}}function Jn(t,e,n=!1){const r=_n||Wt;if(r||Oc){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Oc._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ce(e)?e.call(r&&r.proxy):e}}function Wx(t,e,n,r=!1){const i={},s={};Kd(s,Sp,1),t.propsDefaults=Object.create(null),RA(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:sA(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function Gx(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=et(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(vp(t.emitsOptions,d))continue;const f=e[d];if(l)if(Xe(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const p=pi(d);i[p]=Ay(l,a,p,f,t,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{RA(t,e,i,s)&&(c=!0);let u;for(const h in a)(!e||!Xe(e,h)&&((u=aa(h))===h||!Xe(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=Ay(l,a,h,void 0,t,!0)):delete i[h]);if(s!==a)for(const h in s)(!e||!Xe(e,h))&&(delete s[h],c=!0)}c&&Ui(t,"set","$attrs")}function RA(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ac(l))continue;const c=e[l];let u;i&&Xe(i,u=pi(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:vp(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=et(n),c=a||_t;for(let u=0;u<s.length;u++){const h=s[u];n[h]=Ay(i,l,h,c[h],t,!Xe(c,h))}}return o}function Ay(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Xe(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ce(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const u=Go(i);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===aa(n))&&(r=!0))}return r}function kA(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Ce(t)){const u=h=>{l=!0;const[d,f]=kA(h,e,!0);Gt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return ft(t)&&r.set(t,Ua),Ua;if(ye(s))for(let u=0;u<s.length;u++){const h=pi(s[u]);Ub(h)&&(o[h]=_t)}else if(s)for(const u in s){const h=pi(u);if(Ub(h)){const d=s[u],f=o[h]=ye(d)||Ce(d)?{type:d}:Gt({},d);if(f){const p=zb(Boolean,f.type),m=zb(String,f.type);f[0]=p>-1,f[1]=m<0||p<m,(p>-1||Xe(f,"default"))&&a.push(h)}}}const c=[o,a];return ft(t)&&r.set(t,c),c}function Ub(t){return t[0]!=="$"&&!Ac(t)}function $b(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Hb(t,e){return $b(t)===$b(e)}function zb(t,e){return ye(e)?e.findIndex(n=>Hb(n,t)):Ce(e)&&Hb(e,t)?0:-1}const OA=t=>t[0]==="_"||t==="$stable",$v=t=>ye(t)?t.map(Mr):[Mr(t)],qx=(t,e,n)=>{if(e._n)return e;const r=Do((...i)=>$v(e(...i)),n);return r._c=!1,r},NA=(t,e,n)=>{const r=t._ctx;for(const i in t){if(OA(i))continue;const s=t[i];if(Ce(s))e[i]=qx(i,s,r);else if(s!=null){const o=$v(s);e[i]=()=>o}}},MA=(t,e)=>{const n=$v(e);t.slots.default=()=>n},Kx=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=et(e),Kd(e,"_",n)):NA(e,t.slots={})}else t.slots={},e&&MA(t,e);Kd(t.slots,Sp,1)},Yx=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=_t;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Gt(i,e),!n&&a===1&&delete i._):(s=!e.$stable,NA(e,i)),o=e}else e&&(MA(t,e),o={default:1});if(s)for(const a in i)!OA(a)&&o[a]==null&&delete i[a]};function Cy(t,e,n,r,i=!1){if(ye(t)){t.forEach((d,f)=>Cy(d,e&&(ye(e)?e[f]:e),n,r,i));return}if(Rc(r)&&!i)return;const s=r.shapeFlag&4?Ap(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===_t?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(xt(c)?(u[c]=null,Xe(h,c)&&(h[c]=null)):sn(c)&&(c.value=null)),Ce(l))Os(l,a,12,[o,u]);else{const d=xt(l),f=sn(l);if(d||f){const p=()=>{if(t.f){const m=d?Xe(h,l)?h[l]:u[l]:l.value;i?ye(m)&&Tv(m,s):ye(m)?m.includes(s)||m.push(s):d?(u[l]=[s],Xe(h,l)&&(h[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,Xe(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Kn(p,n)):p()}}}const Kn=vx;function Jx(t){return Qx(t)}function Qx(t,e){const n=$I();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=br,insertStaticContent:p}=t,m=(y,E,C,x=null,P=null,Y=null,re=void 0,K=null,Z=!!E.dynamicChildren)=>{if(y===E)return;y&&!Qr(y,E)&&(x=R(y),De(y,P,Y,!0),y=null),E.patchFlag===-2&&(Z=!1,E.dynamicChildren=null);const{type:j,ref:le,shapeFlag:Ee}=E;switch(j){case wp:g(y,E,C,x);break;case Qn:_(y,E,C,x);break;case Sd:y==null&&v(E,C,x,re);break;case it:$(y,E,C,x,P,Y,re,K,Z);break;default:Ee&1?A(y,E,C,x,P,Y,re,K,Z):Ee&6?pe(y,E,C,x,P,Y,re,K,Z):(Ee&64||Ee&128)&&j.process(y,E,C,x,P,Y,re,K,Z,J)}le!=null&&P&&Cy(le,y&&y.ref,Y,E||y,!E)},g=(y,E,C,x)=>{if(y==null)r(E.el=a(E.children),C,x);else{const P=E.el=y.el;E.children!==y.children&&c(P,E.children)}},_=(y,E,C,x)=>{y==null?r(E.el=l(E.children||""),C,x):E.el=y.el},v=(y,E,C,x)=>{[y.el,y.anchor]=p(y.children,E,C,x,y.el,y.anchor)},T=({el:y,anchor:E},C,x)=>{let P;for(;y&&y!==E;)P=d(y),r(y,C,x),y=P;r(E,C,x)},I=({el:y,anchor:E})=>{let C;for(;y&&y!==E;)C=d(y),i(y),y=C;i(E)},A=(y,E,C,x,P,Y,re,K,Z)=>{E.type==="svg"?re="svg":E.type==="math"&&(re="mathml"),y==null?w(E,C,x,P,Y,re,K,Z):k(y,E,P,Y,re,K,Z)},w=(y,E,C,x,P,Y,re,K)=>{let Z,j;const{props:le,shapeFlag:Ee,transition:ge,dirs:Oe}=y;if(Z=y.el=o(y.type,Y,le&&le.is,le),Ee&8?u(Z,y.children):Ee&16&&M(y.children,Z,null,x,P,Wm(y,Y),re,K),Oe&&oo(y,null,x,"created"),O(Z,y,y.scopeId,re,x),le){for(const ct in le)ct!=="value"&&!Ac(ct)&&s(Z,ct,null,le[ct],Y,y.children,x,P,G);"value"in le&&s(Z,"value",null,le.value,Y),(j=le.onVnodeBeforeMount)&&qr(j,x,y)}Oe&&oo(y,null,x,"beforeMount");const $e=Xx(P,ge);$e&&ge.beforeEnter(Z),r(Z,E,C),((j=le&&le.onVnodeMounted)||$e||Oe)&&Kn(()=>{j&&qr(j,x,y),$e&&ge.enter(Z),Oe&&oo(y,null,x,"mounted")},P)},O=(y,E,C,x,P)=>{if(C&&f(y,C),x)for(let Y=0;Y<x.length;Y++)f(y,x[Y]);if(P){let Y=P.subTree;if(E===Y){const re=P.vnode;O(y,re,re.scopeId,re.slotScopeIds,P.parent)}}},M=(y,E,C,x,P,Y,re,K,Z=0)=>{for(let j=Z;j<y.length;j++){const le=y[j]=K?fs(y[j]):Mr(y[j]);m(null,le,E,C,x,P,Y,re,K)}},k=(y,E,C,x,P,Y,re)=>{const K=E.el=y.el;let{patchFlag:Z,dynamicChildren:j,dirs:le}=E;Z|=y.patchFlag&16;const Ee=y.props||_t,ge=E.props||_t;let Oe;if(C&&ao(C,!1),(Oe=ge.onVnodeBeforeUpdate)&&qr(Oe,C,E,y),le&&oo(E,y,C,"beforeUpdate"),C&&ao(C,!0),j?U(y.dynamicChildren,j,K,C,x,Wm(E,P),Y):re||D(y,E,K,null,C,x,Wm(E,P),Y,!1),Z>0){if(Z&16)F(K,E,Ee,ge,C,x,P);else if(Z&2&&Ee.class!==ge.class&&s(K,"class",null,ge.class,P),Z&4&&s(K,"style",Ee.style,ge.style,P),Z&8){const $e=E.dynamicProps;for(let ct=0;ct<$e.length;ct++){const St=$e[ct],Yt=Ee[St],kr=ge[St];(kr!==Yt||St==="value")&&s(K,St,Yt,kr,P,y.children,C,x,G)}}Z&1&&y.children!==E.children&&u(K,E.children)}else!re&&j==null&&F(K,E,Ee,ge,C,x,P);((Oe=ge.onVnodeUpdated)||le)&&Kn(()=>{Oe&&qr(Oe,C,E,y),le&&oo(E,y,C,"updated")},x)},U=(y,E,C,x,P,Y,re)=>{for(let K=0;K<E.length;K++){const Z=y[K],j=E[K],le=Z.el&&(Z.type===it||!Qr(Z,j)||Z.shapeFlag&70)?h(Z.el):C;m(Z,j,le,null,x,P,Y,re,!0)}},F=(y,E,C,x,P,Y,re)=>{if(C!==x){if(C!==_t)for(const K in C)!Ac(K)&&!(K in x)&&s(y,K,C[K],null,re,E.children,P,Y,G);for(const K in x){if(Ac(K))continue;const Z=x[K],j=C[K];Z!==j&&K!=="value"&&s(y,K,j,Z,re,E.children,P,Y,G)}"value"in x&&s(y,"value",C.value,x.value,re)}},$=(y,E,C,x,P,Y,re,K,Z)=>{const j=E.el=y?y.el:a(""),le=E.anchor=y?y.anchor:a("");let{patchFlag:Ee,dynamicChildren:ge,slotScopeIds:Oe}=E;Oe&&(K=K?K.concat(Oe):Oe),y==null?(r(j,C,x),r(le,C,x),M(E.children||[],C,le,P,Y,re,K,Z)):Ee>0&&Ee&64&&ge&&y.dynamicChildren?(U(y.dynamicChildren,ge,C,P,Y,re,K),(E.key!=null||P&&E===P.subTree)&&Hv(y,E,!0)):D(y,E,C,le,P,Y,re,K,Z)},pe=(y,E,C,x,P,Y,re,K,Z)=>{E.slotScopeIds=K,y==null?E.shapeFlag&512?P.ctx.activate(E,C,x,re,Z):q(E,C,x,P,Y,re,Z):z(y,E,Z)},q=(y,E,C,x,P,Y,re)=>{const K=y.component=uD(y,x,P);if(Ep(y)&&(K.ctx.renderer=J),hD(K),K.asyncDep){if(P&&P.registerDep(K,N),!y.el){const Z=K.subTree=Ue(Qn);_(null,Z,E,C)}}else N(K,y,E,C,P,Y,re)},z=(y,E,C)=>{const x=E.component=y.component;if(lx(y,E,C))if(x.asyncDep&&!x.asyncResolved){B(x,E,C);return}else x.next=E,nx(x.update),x.effect.dirty=!0,x.update();else E.el=y.el,x.vnode=E},N=(y,E,C,x,P,Y,re)=>{const K=()=>{if(y.isMounted){let{next:le,bu:Ee,u:ge,parent:Oe,vnode:$e}=y;{const ya=PA(y);if(ya){le&&(le.el=$e.el,B(y,le,re)),ya.asyncDep.then(()=>{y.isUnmounted||K()});return}}let ct=le,St;ao(y,!1),le?(le.el=$e.el,B(y,le,re)):le=$e,Ee&&Td(Ee),(St=le.props&&le.props.onVnodeBeforeUpdate)&&qr(St,Oe,le,$e),ao(y,!0);const Yt=Hm(y),kr=y.subTree;y.subTree=Yt,m(kr,Yt,h(kr.el),R(kr),y,P,Y),le.el=Yt.el,ct===null&&Vv(y,Yt.el),ge&&Kn(ge,P),(St=le.props&&le.props.onVnodeUpdated)&&Kn(()=>qr(St,Oe,le,$e),P)}else{let le;const{el:Ee,props:ge}=E,{bm:Oe,m:$e,parent:ct}=y,St=Rc(E);if(ao(y,!1),Oe&&Td(Oe),!St&&(le=ge&&ge.onVnodeBeforeMount)&&qr(le,ct,E),ao(y,!0),Ee&&be){const Yt=()=>{y.subTree=Hm(y),be(Ee,y.subTree,y,P,null)};St?E.type.__asyncLoader().then(()=>!y.isUnmounted&&Yt()):Yt()}else{const Yt=y.subTree=Hm(y);m(null,Yt,C,x,y,P,Y),E.el=Yt.el}if($e&&Kn($e,P),!St&&(le=ge&&ge.onVnodeMounted)){const Yt=E;Kn(()=>qr(le,ct,Yt),P)}(E.shapeFlag&256||ct&&Rc(ct.vnode)&&ct.vnode.shapeFlag&256)&&y.a&&Kn(y.a,P),y.isMounted=!0,E=C=x=null}},Z=y.effect=new Av(K,br,()=>Lv(j),y.scope),j=y.update=()=>{Z.dirty&&Z.run()};j.id=y.uid,ao(y,!0),j()},B=(y,E,C)=>{E.component=y;const x=y.vnode.props;y.vnode=E,y.next=null,Gx(y,E.props,x,C),Yx(y,E.children,C),la(),Nb(y),ca()},D=(y,E,C,x,P,Y,re,K,Z=!1)=>{const j=y&&y.children,le=y?y.shapeFlag:0,Ee=E.children,{patchFlag:ge,shapeFlag:Oe}=E;if(ge>0){if(ge&128){de(j,Ee,C,x,P,Y,re,K,Z);return}else if(ge&256){oe(j,Ee,C,x,P,Y,re,K,Z);return}}Oe&8?(le&16&&G(j,P,Y),Ee!==j&&u(C,Ee)):le&16?Oe&16?de(j,Ee,C,x,P,Y,re,K,Z):G(j,P,Y,!0):(le&8&&u(C,""),Oe&16&&M(Ee,C,x,P,Y,re,K,Z))},oe=(y,E,C,x,P,Y,re,K,Z)=>{y=y||Ua,E=E||Ua;const j=y.length,le=E.length,Ee=Math.min(j,le);let ge;for(ge=0;ge<Ee;ge++){const Oe=E[ge]=Z?fs(E[ge]):Mr(E[ge]);m(y[ge],Oe,C,null,P,Y,re,K,Z)}j>le?G(y,P,Y,!0,!1,Ee):M(E,C,x,P,Y,re,K,Z,Ee)},de=(y,E,C,x,P,Y,re,K,Z)=>{let j=0;const le=E.length;let Ee=y.length-1,ge=le-1;for(;j<=Ee&&j<=ge;){const Oe=y[j],$e=E[j]=Z?fs(E[j]):Mr(E[j]);if(Qr(Oe,$e))m(Oe,$e,C,null,P,Y,re,K,Z);else break;j++}for(;j<=Ee&&j<=ge;){const Oe=y[Ee],$e=E[ge]=Z?fs(E[ge]):Mr(E[ge]);if(Qr(Oe,$e))m(Oe,$e,C,null,P,Y,re,K,Z);else break;Ee--,ge--}if(j>Ee){if(j<=ge){const Oe=ge+1,$e=Oe<le?E[Oe].el:x;for(;j<=ge;)m(null,E[j]=Z?fs(E[j]):Mr(E[j]),C,$e,P,Y,re,K,Z),j++}}else if(j>ge)for(;j<=Ee;)De(y[j],P,Y,!0),j++;else{const Oe=j,$e=j,ct=new Map;for(j=$e;j<=ge;j++){const er=E[j]=Z?fs(E[j]):Mr(E[j]);er.key!=null&&ct.set(er.key,j)}let St,Yt=0;const kr=ge-$e+1;let ya=!1,vb=0;const Xl=new Array(kr);for(j=0;j<kr;j++)Xl[j]=0;for(j=Oe;j<=Ee;j++){const er=y[j];if(Yt>=kr){De(er,P,Y,!0);continue}let Gr;if(er.key!=null)Gr=ct.get(er.key);else for(St=$e;St<=ge;St++)if(Xl[St-$e]===0&&Qr(er,E[St])){Gr=St;break}Gr===void 0?De(er,P,Y,!0):(Xl[Gr-$e]=j+1,Gr>=vb?vb=Gr:ya=!0,m(er,E[Gr],C,null,P,Y,re,K,Z),Yt++)}const bb=ya?Zx(Xl):Ua;for(St=bb.length-1,j=kr-1;j>=0;j--){const er=$e+j,Gr=E[er],Eb=er+1<le?E[er+1].el:x;Xl[j]===0?m(null,Gr,C,Eb,P,Y,re,K,Z):ya&&(St<0||j!==bb[St]?Ae(Gr,C,Eb,2):St--)}}},Ae=(y,E,C,x,P=null)=>{const{el:Y,type:re,transition:K,children:Z,shapeFlag:j}=y;if(j&6){Ae(y.component.subTree,E,C,x);return}if(j&128){y.suspense.move(E,C,x);return}if(j&64){re.move(y,E,C,J);return}if(re===it){r(Y,E,C);for(let Ee=0;Ee<Z.length;Ee++)Ae(Z[Ee],E,C,x);r(y.anchor,E,C);return}if(re===Sd){T(y,E,C);return}if(x!==2&&j&1&&K)if(x===0)K.beforeEnter(Y),r(Y,E,C),Kn(()=>K.enter(Y),P);else{const{leave:Ee,delayLeave:ge,afterLeave:Oe}=K,$e=()=>r(Y,E,C),ct=()=>{Ee(Y,()=>{$e(),Oe&&Oe()})};ge?ge(Y,$e,ct):ct()}else r(Y,E,C)},De=(y,E,C,x=!1,P=!1)=>{const{type:Y,props:re,ref:K,children:Z,dynamicChildren:j,shapeFlag:le,patchFlag:Ee,dirs:ge}=y;if(K!=null&&Cy(K,null,C,y,!0),le&256){E.ctx.deactivate(y);return}const Oe=le&1&&ge,$e=!Rc(y);let ct;if($e&&(ct=re&&re.onVnodeBeforeUnmount)&&qr(ct,E,y),le&6)me(y.component,C,x);else{if(le&128){y.suspense.unmount(C,x);return}Oe&&oo(y,null,E,"beforeUnmount"),le&64?y.type.remove(y,E,C,P,J,x):j&&(Y!==it||Ee>0&&Ee&64)?G(j,E,C,!1,!0):(Y===it&&Ee&384||!P&&le&16)&&G(Z,E,C),x&&rt(y)}($e&&(ct=re&&re.onVnodeUnmounted)||Oe)&&Kn(()=>{ct&&qr(ct,E,y),Oe&&oo(y,null,E,"unmounted")},C)},rt=y=>{const{type:E,el:C,anchor:x,transition:P}=y;if(E===it){lt(C,x);return}if(E===Sd){I(y);return}const Y=()=>{i(C),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(y.shapeFlag&1&&P&&!P.persisted){const{leave:re,delayLeave:K}=P,Z=()=>re(C,Y);K?K(y.el,Y,Z):Z()}else Y()},lt=(y,E)=>{let C;for(;y!==E;)C=d(y),i(y),y=C;i(E)},me=(y,E,C)=>{const{bum:x,scope:P,update:Y,subTree:re,um:K}=y;x&&Td(x),P.stop(),Y&&(Y.active=!1,De(re,y,E,C)),K&&Kn(K,E),Kn(()=>{y.isUnmounted=!0},E),E&&E.pendingBranch&&!E.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===E.pendingId&&(E.deps--,E.deps===0&&E.resolve())},G=(y,E,C,x=!1,P=!1,Y=0)=>{for(let re=Y;re<y.length;re++)De(y[re],E,C,x,P)},R=y=>y.shapeFlag&6?R(y.component.subTree):y.shapeFlag&128?y.suspense.next():d(y.anchor||y.el);let X=!1;const W=(y,E,C)=>{y==null?E._vnode&&De(E._vnode,null,null,!0):m(E._vnode||null,y,E,null,null,null,C),X||(X=!0,Nb(),pA(),X=!1),E._vnode=y},J={p:m,um:De,m:Ae,r:rt,mt:q,mc:M,pc:D,pbc:U,n:R,o:t};let we,be;return e&&([we,be]=e(J)),{render:W,hydrate:we,createApp:jx(W,we)}}function Wm({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ao({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Xx(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Hv(t,e,n=!1){const r=t.children,i=e.children;if(ye(r)&&ye(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=fs(i[s]),a.el=o.el),n||Hv(o,a)),a.type===wp&&(a.el=o.el)}}function Zx(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function PA(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:PA(e)}const eD=t=>t.__isTeleport,Nc=t=>t&&(t.disabled||t.disabled===""),jb=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Wb=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ry=(t,e)=>{const n=t&&t.to;return xt(n)?e?e(n):null:n},tD={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:m,createComment:g}}=c,_=Nc(e.props);let{shapeFlag:v,children:T,dynamicChildren:I}=e;if(t==null){const A=e.el=m(""),w=e.anchor=m("");f(A,n,r),f(w,n,r);const O=e.target=Ry(e.props,p),M=e.targetAnchor=m("");O&&(f(M,O),o==="svg"||jb(O)?o="svg":(o==="mathml"||Wb(O))&&(o="mathml"));const k=(U,F)=>{v&16&&u(T,U,F,i,s,o,a,l)};_?k(n,w):O&&k(O,M)}else{e.el=t.el;const A=e.anchor=t.anchor,w=e.target=t.target,O=e.targetAnchor=t.targetAnchor,M=Nc(t.props),k=M?n:w,U=M?A:O;if(o==="svg"||jb(w)?o="svg":(o==="mathml"||Wb(w))&&(o="mathml"),I?(d(t.dynamicChildren,I,k,i,s,o,a),Hv(t,e,!0)):l||h(t,e,k,U,i,s,o,a,!1),_)M?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):zh(e,n,A,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const F=e.target=Ry(e.props,p);F&&zh(e,F,null,c,0)}else M&&zh(e,w,O,c,1)}xA(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:d}=t;if(h&&s(u),o&&s(c),a&16){const f=o||!Nc(d);for(let p=0;p<l.length;p++){const m=l[p];i(m,e,n,f,!!m.dynamicChildren)}}},move:zh,hydrate:nD};function zh(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,h=s===2;if(h&&r(o,e,n),(!h||Nc(u))&&l&16)for(let d=0;d<c.length;d++)i(c[d],e,n,2);h&&r(a,e,n)}function nD(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=Ry(e.props,l);if(u){const h=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Nc(e.props))e.anchor=c(o(t),e,a(t),n,r,i,s),e.targetAnchor=h;else{e.anchor=o(t);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){e.targetAnchor=d,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(h,e,u,n,r,i,s)}xA(e)}return e.anchor&&o(e.anchor)}const rD=tD;function xA(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const it=Symbol.for("v-fgt"),wp=Symbol.for("v-txt"),Qn=Symbol.for("v-cmt"),Sd=Symbol.for("v-stc"),Mc=[];let Er=null;function se(t=!1){Mc.push(Er=t?null:[])}function DA(){Mc.pop(),Er=Mc[Mc.length-1]||null}let ll=1;function Gb(t){ll+=t}function LA(t){return t.dynamicChildren=ll>0?Er||Ua:null,DA(),ll>0&&Er&&Er.push(t),t}function _e(t,e,n,r,i,s){return LA(S(t,e,n,r,i,s,!0))}function fn(t,e,n,r,i){return LA(Ue(t,e,n,r,i,!0))}function ou(t){return t?t.__v_isVNode===!0:!1}function Qr(t,e){return t.type===e.type&&t.key===e.key}const Sp="__vInternal",VA=({key:t})=>t??null,Id=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?xt(t)||sn(t)||Ce(t)?{i:Wt,r:t,k:e,f:!!n}:t:null);function S(t,e=null,n=null,r=0,i=null,s=t===it?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&VA(e),ref:e&&Id(e),scopeId:bp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Wt};return a?(zv(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=xt(n)?8:16),ll>0&&!o&&Er&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Er.push(l),l}const Ue=iD;function iD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===ux)&&(t=Qn),ou(t)){const a=Us(t,e,!0);return n&&zv(a,n),ll>0&&!s&&Er&&(a.shapeFlag&6?Er[Er.indexOf(t)]=a:Er.push(a)),a.patchFlag|=-2,a}if(gD(t)&&(t=t.__vccOpts),e){e=sD(e);let{class:a,style:l}=e;a&&!xt(a)&&(e.class=mp(a)),ft(l)&&(oA(l)&&!ye(l)&&(l=Gt({},l)),e.style=Bi(l))}const o=xt(t)?1:dx(t)?128:eD(t)?64:ft(t)?4:Ce(t)?2:0;return S(t,e,n,r,i,o,s,!0)}function sD(t){return t?oA(t)||Sp in t?Gt({},t):t:null}function Us(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?aD(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&VA(a),ref:e&&e.ref?n&&i?ye(i)?i.concat(Id(e)):[i,Id(e)]:Id(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==it?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Us(t.ssContent),ssFallback:t.ssFallback&&Us(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function mt(t=" ",e=0){return Ue(wp,null,t,e)}function oD(t,e){const n=Ue(Sd,null,t);return n.staticCount=e,n}function Ze(t="",e=!1){return e?(se(),fn(Qn,null,t)):Ue(Qn,null,t)}function Mr(t){return t==null||typeof t=="boolean"?Ue(Qn):ye(t)?Ue(it,null,t.slice()):typeof t=="object"?fs(t):Ue(wp,null,String(t))}function fs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Us(t)}function zv(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ye(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),zv(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Sp in e)?e._ctx=Wt:i===3&&Wt&&(Wt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ce(e)?(e={default:e,_ctx:Wt},n=32):(e=String(e),r&64?(n=16,e=[mt(e)]):n=8);t.children=e,t.shapeFlag|=n}function aD(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=mp([e.class,r.class]));else if(i==="style")e.style=Bi([e.style,r.style]);else if(hp(i)){const s=e[i],o=r[i];o&&s!==o&&!(ye(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function qr(t,e,n,r=null){Sr(t,e,7,[n,r])}const lD=CA();let cD=0;function uD(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||lD,s={uid:cD++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new WI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kA(r,i),emitsOptions:gA(r,i),emit:null,emitted:null,propsDefaults:_t,inheritAttrs:r.inheritAttrs,ctx:_t,data:_t,props:_t,attrs:_t,slots:_t,refs:_t,setupState:_t,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ix.bind(null,s),t.ce&&t.ce(s),s}let _n=null;const ua=()=>_n||Wt;let Zd,ky;{const t=$I(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Zd=e("__VUE_INSTANCE_SETTERS__",n=>_n=n),ky=e("__VUE_SSR_SETTERS__",n=>Ip=n)}const Go=t=>{const e=_n;return Zd(t),t.scope.on(),()=>{t.scope.off(),Zd(e)}},Oy=()=>{_n&&_n.scope.off(),Zd(null)};function FA(t){return t.vnode.shapeFlag&4}let Ip=!1;function hD(t,e=!1){e&&ky(e);const{props:n,children:r}=t.vnode,i=FA(t);Wx(t,n,i,e),Kx(t,r);const s=i?dD(t,e):void 0;return e&&ky(!1),s}function dD(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=_p(new Proxy(t.ctx,Vx));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?pD(t):null,s=Go(t);la();const o=Os(r,t,0,[t.props,i]);if(ca(),s(),wv(o)){if(o.then(Oy,Oy),e)return o.then(a=>{Ny(t,a,e)}).catch(a=>{qu(a,t,0)});t.asyncDep=o}else Ny(t,o,e)}else BA(t,e)}function Ny(t,e,n){Ce(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ft(e)&&(t.setupState=uA(e)),BA(t,n)}let qb;function BA(t,e,n){const r=t.type;if(!t.render){if(!e&&qb&&!r.render){const i=r.template||Uv(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Gt(Gt({isCustomElement:s,delimiters:a},o),l);r.render=qb(i,c)}}t.render=r.render||br}{const i=Go(t);la();try{Fx(t)}finally{ca(),i()}}}function fD(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Zn(t,"get","$attrs"),e[n]}}))}function pD(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return fD(t)},slots:t.slots,emit:t.emit,expose:e}}function Ap(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(uA(_p(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in kc)return kc[n](t)},has(e,n){return n in e||n in kc}}))}function mD(t,e=!0){return Ce(t)?t.displayName||t.name:t.name||e&&t.__name}function gD(t){return Ce(t)&&"__vccOpts"in t}const Pt=(t,e)=>GP(t,e,Ip);function Lo(t,e,n){const r=arguments.length;return r===2?ft(e)&&!ye(e)?ou(e)?Ue(t,null,[e]):Ue(t,e):Ue(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ou(n)&&(n=[n]),Ue(t,e,n))}const yD="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const _D="http://www.w3.org/2000/svg",vD="http://www.w3.org/1998/Math/MathML",ps=typeof document<"u"?document:null,Kb=ps&&ps.createElement("template"),bD={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?ps.createElementNS(_D,t):e==="mathml"?ps.createElementNS(vD,t):ps.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ps.createTextNode(t),createComment:t=>ps.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ps.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Kb.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=Kb.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},rs="transition",Zl="animation",au=Symbol("_vtc"),ef=(t,{slots:e})=>Lo(Cx,ED(t),e);ef.displayName="Transition";const UA={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ef.props=Gt({},vA,UA);const lo=(t,e=[])=>{ye(t)?t.forEach(n=>n(...e)):t&&t(...e)},Yb=t=>t?ye(t)?t.some(e=>e.length>1):t.length>1:!1;function ED(t){const e={};for(const $ in t)$ in UA||(e[$]=t[$]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=TD(i),m=p&&p[0],g=p&&p[1],{onBeforeEnter:_,onEnter:v,onEnterCancelled:T,onLeave:I,onLeaveCancelled:A,onBeforeAppear:w=_,onAppear:O=v,onAppearCancelled:M=T}=e,k=($,pe,q)=>{co($,pe?u:a),co($,pe?c:o),q&&q()},U=($,pe)=>{$._isLeaving=!1,co($,h),co($,f),co($,d),pe&&pe()},F=$=>(pe,q)=>{const z=$?O:v,N=()=>k(pe,$,q);lo(z,[pe,N]),Jb(()=>{co(pe,$?l:s),is(pe,$?u:a),Yb(z)||Qb(pe,r,m,N)})};return Gt(e,{onBeforeEnter($){lo(_,[$]),is($,s),is($,o)},onBeforeAppear($){lo(w,[$]),is($,l),is($,c)},onEnter:F(!1),onAppear:F(!0),onLeave($,pe){$._isLeaving=!0;const q=()=>U($,pe);is($,h),ID(),is($,d),Jb(()=>{$._isLeaving&&(co($,h),is($,f),Yb(I)||Qb($,r,g,q))}),lo(I,[$,q])},onEnterCancelled($){k($,!1),lo(T,[$])},onAppearCancelled($){k($,!0),lo(M,[$])},onLeaveCancelled($){U($),lo(A,[$])}})}function TD(t){if(t==null)return null;if(ft(t))return[Gm(t.enter),Gm(t.leave)];{const e=Gm(t);return[e,e]}}function Gm(t){return UI(t)}function is(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[au]||(t[au]=new Set)).add(e)}function co(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[au];n&&(n.delete(e),n.size||(t[au]=void 0))}function Jb(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let wD=0;function Qb(t,e,n,r){const i=t._endId=++wD,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=SD(t,e);if(!o)return r();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,d),s()},d=f=>{f.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,d)}function SD(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${rs}Delay`),s=r(`${rs}Duration`),o=Xb(i,s),a=r(`${Zl}Delay`),l=r(`${Zl}Duration`),c=Xb(a,l);let u=null,h=0,d=0;e===rs?o>0&&(u=rs,h=o,d=s.length):e===Zl?c>0&&(u=Zl,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?rs:Zl:null,d=u?u===rs?s.length:l.length:0);const f=u===rs&&/\b(transform|all)(,|$)/.test(r(`${rs}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function Xb(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Zb(n)+Zb(t[r])))}function Zb(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ID(){return document.body.offsetHeight}function AD(t,e,n){const r=t[au];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const tf=Symbol("_vod"),$A=Symbol("_vsh"),ec={beforeMount(t,{value:e},{transition:n}){t[tf]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):tc(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),tc(t,!0),r.enter(t)):r.leave(t,()=>{tc(t,!1)}):tc(t,e))},beforeUnmount(t,{value:e}){tc(t,e)}};function tc(t,e){t.style.display=e?t[tf]:"none",t[$A]=!e}const CD=Symbol(""),RD=/(^|;)\s*display\s*:/;function kD(t,e,n){const r=t.style,i=xt(n);let s=!1;if(n&&!i){if(e)if(xt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ad(r,a,"")}else for(const o in e)n[o]==null&&Ad(r,o,"");for(const o in n)o==="display"&&(s=!0),Ad(r,o,n[o])}else if(i){if(e!==n){const o=r[CD];o&&(n+=";"+o),r.cssText=n,s=RD.test(n)}}else e&&t.removeAttribute("style");tf in t&&(t[tf]=s?r.display:"",t[$A]&&(r.display="none"))}const eE=/\s*!important$/;function Ad(t,e,n){if(ye(n))n.forEach(r=>Ad(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=OD(t,e);eE.test(n)?t.setProperty(aa(r),n.replace(eE,""),"important"):t[r]=n}}const tE=["Webkit","Moz","ms"],qm={};function OD(t,e){const n=qm[e];if(n)return n;let r=pi(e);if(r!=="filter"&&r in t)return qm[e]=r;r=pp(r);for(let i=0;i<tE.length;i++){const s=tE[i]+r;if(s in t)return qm[e]=s}return e}const nE="http://www.w3.org/1999/xlink";function ND(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(nE,e.slice(6,e.length)):t.setAttributeNS(nE,e,n);else{const s=wP(e);n==null||s&&!HI(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function MD(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=HI(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function yo(t,e,n,r){t.addEventListener(e,n,r)}function PD(t,e,n,r){t.removeEventListener(e,n,r)}const rE=Symbol("_vei");function xD(t,e,n,r,i=null){const s=t[rE]||(t[rE]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=DD(e);if(r){const c=s[e]=FD(r,i);yo(t,a,c,l)}else o&&(PD(t,a,o,l),s[e]=void 0)}}const iE=/(?:Once|Passive|Capture)$/;function DD(t){let e;if(iE.test(t)){e={};let r;for(;r=t.match(iE);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):aa(t.slice(2)),e]}let Km=0;const LD=Promise.resolve(),VD=()=>Km||(LD.then(()=>Km=0),Km=Date.now());function FD(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Sr(BD(r,n.value),e,5,[r])};return n.value=t,n.attached=VD(),n}function BD(t,e){if(ye(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const sE=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,UD=(t,e,n,r,i,s,o,a,l)=>{const c=i==="svg";e==="class"?AD(t,r,c):e==="style"?kD(t,n,r):hp(e)?Ev(e)||xD(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$D(t,e,r,c))?MD(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),ND(t,e,r,c))};function $D(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&sE(e)&&Ce(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return sE(e)&&xt(n)?!1:e in t}const nf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ye(e)?n=>Td(e,n):e};function HD(t){t.target.composing=!0}function oE(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Wa=Symbol("_assign"),Oi={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Wa]=nf(i);const s=r||i.props&&i.props.type==="number";yo(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=py(a)),t[Wa](a)}),n&&yo(t,"change",()=>{t.value=t.value.trim()}),e||(yo(t,"compositionstart",HD),yo(t,"compositionend",oE),yo(t,"change",oE))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t[Wa]=nf(s),t.composing)return;const o=i||t.type==="number"?py(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},aE={deep:!0,created(t,e,n){t[Wa]=nf(n),yo(t,"change",()=>{const r=t._modelValue,i=zD(t),s=t.checked,o=t[Wa];if(ye(r)){const a=zI(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(dp(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(HA(t,s))})},mounted:lE,beforeUpdate(t,e,n){t[Wa]=nf(n),lE(t,e,n)}};function lE(t,{value:e,oldValue:n},r){t._modelValue=e,ye(e)?t.checked=zI(e,r.props.value)>-1:dp(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=gp(e,HA(t,!0)))}function zD(t){return"_value"in t?t._value:t.value}function HA(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const jD=["ctrl","shift","alt","meta"],WD={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>jD.some(n=>t[`${n}Key`]&&!e.includes(n))},ut=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=WD[e[o]];if(a&&a(i,e))return}return t(i,...s)})},GD={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Kr=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=aa(i.key);if(e.some(o=>o===s||GD[o]===s))return t(i)})},qD=Gt({patchProp:UD},bD);let cE;function KD(){return cE||(cE=Jx(qD))}const YD=(...t)=>{const e=KD().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=QD(r);if(!i)return;const s=e._component;!Ce(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,JD(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function JD(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function QD(t){return xt(t)?document.querySelector(t):t}var XD=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */const ZD=Symbol();var uE;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(uE||(uE={}));function e4(){const t=GI(!0),e=t.run(()=>Ve({}));let n=[],r=[];const i=_p({install(s){i._a=s,s.provide(ZD,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!XD?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}var hE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te=function(t,e){if(!t)throw Vl(e)},Vl=function(t){return new Error("Firebase Database ("+zA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},t4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Cp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),r.push(n[u],n[h],n[d],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):t4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new n4;const d=s<<2|a>>4;if(r.push(d),c!==64){const f=a<<4&240|c>>2;if(r.push(f),h!==64){const p=c<<6&192|h;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class n4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WA=function(t){const e=jA(t);return Cp.encodeByteArray(e,!0)},rf=function(t){return WA(t).replace(/\./g,"")},sf=function(t){try{return Cp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t){return GA(void 0,t)}function GA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!i4(n)||(t[n]=GA(t[n],e[n]));return t}function i4(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=()=>s4().__FIREBASE_DEFAULTS__,a4=()=>{if(typeof process>"u"||typeof hE>"u")return;const t=hE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},l4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sf(t[1]);return e&&JSON.parse(e)},Rp=()=>{try{return o4()||a4()||l4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},c4=t=>{var e,n;return(n=(e=Rp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},u4=t=>{const e=c4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qA=()=>{var t;return(t=Rp())===null||t===void 0?void 0:t.config},h4=t=>{var e;return(e=Rp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rf(JSON.stringify(n)),rf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function f4(){var t;const e=(t=Rp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function p4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function KA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function m4(){const t=Ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function YA(){return zA.NODE_ADMIN===!0}function g4(){return!f4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wv(){try{return typeof indexedDB=="object"}catch{return!1}}function y4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="FirebaseError";class Ai extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_4,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fl.prototype.create)}}class Fl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?v4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ai(i,a,r)}}function v4(t,e){return t.replace(b4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const b4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){return JSON.parse(t)}function vn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=cu(sf(s[0])||""),n=cu(sf(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},E4=function(t){const e=JA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},T4=function(t){const e=JA(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function cl(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function My(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function of(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function uu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(dE(s)&&dE(o)){if(!uu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function dE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):h<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const d=(i<<5|i>>>27)+c+l+u+r[h]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function S4(t,e){const n=new I4(t,e);return n.subscribe.bind(n)}class I4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");A4(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ym),i.error===void 0&&(i.error=Ym),i.complete===void 0&&(i.complete=Ym);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function A4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ym(){}function C4(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,te(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},kp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return t&&t._delegate?t._delegate:t}class $r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N4(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:O4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O4(t){return t===fo?void 0:t}function N4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new k4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const P4={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},x4=He.INFO,D4={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},L4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=D4[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xu{constructor(e){this.name=e,this._logLevel=x4,this._logHandler=L4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const V4=(t,e)=>e.some(n=>t instanceof n);let fE,pE;function F4(){return fE||(fE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B4(){return pE||(pE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QA=new WeakMap,Py=new WeakMap,XA=new WeakMap,Jm=new WeakMap,Gv=new WeakMap;function U4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ns(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&QA.set(n,t)}).catch(()=>{}),Gv.set(e,t),e}function $4(t){if(Py.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Py.set(t,e)}let xy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Py.get(t);if(e==="objectStoreNames")return t.objectStoreNames||XA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function H4(t){xy=t(xy)}function z4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qm(this),e,...n);return XA.set(r,e.sort?e.sort():[e]),Ns(r)}:B4().includes(t)?function(...e){return t.apply(Qm(this),e),Ns(QA.get(this))}:function(...e){return Ns(t.apply(Qm(this),e))}}function j4(t){return typeof t=="function"?z4(t):(t instanceof IDBTransaction&&$4(t),V4(t,F4())?new Proxy(t,xy):t)}function Ns(t){if(t instanceof IDBRequest)return U4(t);if(Jm.has(t))return Jm.get(t);const e=j4(t);return e!==t&&(Jm.set(t,e),Gv.set(e,t)),e}const Qm=t=>Gv.get(t);function W4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ns(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ns(o.result),l.oldVersion,l.newVersion,Ns(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const G4=["get","getKey","getAll","getAllKeys","count"],q4=["put","add","delete","clear"],Xm=new Map;function mE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xm.get(e))return Xm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=q4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||G4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Xm.set(e,s),s}H4(t=>({...t,get:(e,n,r)=>mE(e,n)||t.get(e,n,r),has:(e,n)=>!!mE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Y4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dy="@firebase/app",gE="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo=new Xu("@firebase/app"),J4="@firebase/app-compat",Q4="@firebase/analytics-compat",X4="@firebase/analytics",Z4="@firebase/app-check-compat",e3="@firebase/app-check",t3="@firebase/auth",n3="@firebase/auth-compat",r3="@firebase/database",i3="@firebase/database-compat",s3="@firebase/functions",o3="@firebase/functions-compat",a3="@firebase/installations",l3="@firebase/installations-compat",c3="@firebase/messaging",u3="@firebase/messaging-compat",h3="@firebase/performance",d3="@firebase/performance-compat",f3="@firebase/remote-config",p3="@firebase/remote-config-compat",m3="@firebase/storage",g3="@firebase/storage-compat",y3="@firebase/firestore",_3="@firebase/firestore-compat",v3="firebase",b3="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="[DEFAULT]",E3={[Dy]:"fire-core",[J4]:"fire-core-compat",[X4]:"fire-analytics",[Q4]:"fire-analytics-compat",[e3]:"fire-app-check",[Z4]:"fire-app-check-compat",[t3]:"fire-auth",[n3]:"fire-auth-compat",[r3]:"fire-rtdb",[i3]:"fire-rtdb-compat",[s3]:"fire-fn",[o3]:"fire-fn-compat",[a3]:"fire-iid",[l3]:"fire-iid-compat",[c3]:"fire-fcm",[u3]:"fire-fcm-compat",[h3]:"fire-perf",[d3]:"fire-perf-compat",[f3]:"fire-rc",[p3]:"fire-rc-compat",[m3]:"fire-gcs",[g3]:"fire-gcs-compat",[y3]:"fire-fst",[_3]:"fire-fst-compat","fire-js":"fire-js",[v3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new Map,Vy=new Map;function T3(t,e){try{t.container.addComponent(e)}catch(n){qo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gi(t){const e=t.name;if(Vy.has(e))return qo.debug(`There were multiple attempts to register component ${e}.`),!1;Vy.set(e,t);for(const n of af.values())T3(n,t);return!0}function ZA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ms=new Fl("app","Firebase",w3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=b3;function eC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ly,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ms.create("bad-app-name",{appName:String(i)});if(n||(n=qA()),!n)throw Ms.create("no-options");const s=af.get(i);if(s){if(uu(n,s.options)&&uu(r,s.config))return s;throw Ms.create("duplicate-app",{appName:i})}const o=new M4(i);for(const l of Vy.values())o.addComponent(l);const a=new S3(n,r,o);return af.set(i,a),a}function tC(t=Ly){const e=af.get(t);if(!e&&t===Ly&&qA())return eC();if(!e)throw Ms.create("no-app",{appName:t});return e}function lr(t,e,n){var r;let i=(r=E3[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qo.warn(a.join(" "));return}gi(new $r(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="firebase-heartbeat-database",A3=1,hu="firebase-heartbeat-store";let Zm=null;function nC(){return Zm||(Zm=W4(I3,A3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ms.create("idb-open",{originalErrorMessage:t.message})})),Zm}async function C3(t){try{const n=(await nC()).transaction(hu),r=await n.objectStore(hu).get(rC(t));return await n.done,r}catch(e){if(e instanceof Ai)qo.warn(e.message);else{const n=Ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qo.warn(n.message)}}}async function yE(t,e){try{const r=(await nC()).transaction(hu,"readwrite");await r.objectStore(hu).put(e,rC(t)),await r.done}catch(n){if(n instanceof Ai)qo.warn(n.message);else{const r=Ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qo.warn(r.message)}}}function rC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=1024,k3=30*24*60*60*1e3;class O3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_E();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=k3}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_E(),{heartbeatsToSend:r,unsentEntries:i}=N3(this._heartbeatsCache.heartbeats),s=rf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function _E(){return new Date().toISOString().substring(0,10)}function N3(t,e=R3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wv()?y4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vE(t){return rf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){gi(new $r("platform-logger",e=>new K4(e),"PRIVATE")),gi(new $r("heartbeat",e=>new O3(e),"PRIVATE")),lr(Dy,gE,t),lr(Dy,gE,"esm2017"),lr("fire-js","")}P3("");function qv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const x3=iC,sC=new Fl("auth","Firebase",iC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new Xu("@firebase/auth");function D3(t,...e){lf.logLevel<=He.WARN&&lf.warn(`Auth (${Js}): ${t}`,...e)}function Cd(t,...e){lf.logLevel<=He.ERROR&&lf.error(`Auth (${Js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,...e){throw Kv(t,...e)}function li(t,...e){return Kv(t,...e)}function oC(t,e,n){const r=Object.assign(Object.assign({},x3()),{[e]:n});return new Fl("auth","Firebase",r).create(e,{appName:t.name})}function L3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&yi(t,"argument-error"),oC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sC.create(t,...e)}function Le(t,e,...n){if(!t)throw Kv(e,...n)}function Di(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cd(e),new Error(e)}function Wi(t,e){t||Di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function V3(){return bE()==="http:"||bE()==="https:"}function bE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V3()||p4()||"connection"in navigator)?navigator.onLine:!0}function B3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wi(n>e,"Short delay should be less than long delay!"),this.isMobile=jv()||KA()}get(){return F3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t,e){Wi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=new Zu(3e4,6e4);function Jv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ul(t,e,n,r,i={}){return lC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Bl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),aC.fetch()(cC(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function lC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},U3),e);try{const i=new z3(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw jh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw jh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw jh(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw oC(t,u,c);yi(t,u)}}catch(i){if(i instanceof Ai)throw i;yi(t,"network-request-failed",{message:String(i)})}}async function H3(t,e,n,r,i={}){const s=await Ul(t,e,n,r,i);return"mfaPendingCredential"in s&&yi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function cC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Yv(t.config,i):`${t.config.apiScheme}://${i}`}class z3{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(li(this.auth,"network-request-failed")),$3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=li(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(t,e){return Ul(t,"POST","/v1/accounts:delete",e)}async function W3(t,e){return Ul(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G3(t,e=!1){const n=on(t),r=await n.getIdToken(e),i=Qv(r);Le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pc(eg(i.auth_time)),issuedAtTime:Pc(eg(i.iat)),expirationTime:Pc(eg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function eg(t){return Number(t)*1e3}function Qv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cd("JWT malformed, contained fewer than 3 sections"),null;try{const i=sf(n);return i?JSON.parse(i):(Cd("Failed to decode base64 JWT payload"),null)}catch(i){return Cd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function q3(t){const e=Qv(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ai&&K3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function K3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await du(t,W3(n,{idToken:r}));Le(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?X3(s.providerUserInfo):[],a=Q3(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new uC(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function J3(t){const e=on(t);await cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q3(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function X3(t){return t.map(e=>{var{providerId:n}=e,r=qv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z3(t,e){const n=await lC(t,{},async()=>{const r=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=cC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",aC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eL(t,e){return Ul(t,"POST","/v2/accounts:revokeToken",Jv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Le(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Z3(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new fu;return r&&(Le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fu,this.toJSON())}_performRefresh(){return Di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=qv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uC(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await du(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return G3(this,e)}reload(){return J3(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await du(this,j3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:I,isAnonymous:A,providerData:w,stsTokenManager:O}=n;Le(T&&O,e,"internal-error");const M=fu.fromJSON(this.name,O);Le(typeof T=="string",e,"internal-error"),ss(h,e.name),ss(d,e.name),Le(typeof I=="boolean",e,"internal-error"),Le(typeof A=="boolean",e,"internal-error"),ss(f,e.name),ss(p,e.name),ss(m,e.name),ss(g,e.name),ss(_,e.name),ss(v,e.name);const k=new Vo({uid:T,auth:e,email:d,emailVerified:I,displayName:h,isAnonymous:A,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:M,createdAt:_,lastLoginAt:v});return w&&Array.isArray(w)&&(k.providerData=w.map(U=>Object.assign({},U))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new fu;i.updateFromServerResponse(n);const s=new Vo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await cf(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;function Li(t){Wi(t instanceof Function,"Expected a class definition");let e=EE.get(t);return e?(Wi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,EE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}hC.type="NONE";const TE=hC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t,e,n){return`firebase:${t}:${e}:${n}`}class Ga{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Rd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Rd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ga(Li(TE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Li(TE);const o=Rd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Vo._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ga(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ga(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gC(e))return"Blackberry";if(yC(e))return"Webos";if(Xv(e))return"Safari";if((e.includes("chrome/")||fC(e))&&!e.includes("edge/"))return"Chrome";if(mC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dC(t=Ht()){return/firefox\//i.test(t)}function Xv(t=Ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fC(t=Ht()){return/crios\//i.test(t)}function pC(t=Ht()){return/iemobile/i.test(t)}function mC(t=Ht()){return/android/i.test(t)}function gC(t=Ht()){return/blackberry/i.test(t)}function yC(t=Ht()){return/webos/i.test(t)}function Op(t=Ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tL(t=Ht()){var e;return Op(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nL(){return m4()&&document.documentMode===10}function _C(t=Ht()){return Op(t)||mC(t)||yC(t)||gC(t)||/windows phone/i.test(t)||pC(t)}function rL(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t,e=[]){let n;switch(t){case"Browser":n=wE(Ht());break;case"Worker":n=`${wE(Ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e={}){return Ul(t,"GET","/v2/passwordPolicy",Jv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=6;class aL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:oL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SE(this),this.idTokenSubscription=new SE(this),this.beforeStateQueue=new iL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Li(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ga.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?on(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sL(this),n=new aL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Li(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await Ga.create(this,[Li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&D3(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Zv(t){return on(t)}class SE{constructor(e){this.auth=e,this.observer=null,this.addObserver=S4(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cL(t){e1=t}function uL(t){return e1.loadJS(t)}function hL(){return e1.gapiScript}function dL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t,e){const n=ZA(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(uu(s,e??{}))return i;yi(i,"already-initialized")}return n.initialize({options:e})}function pL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Li);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Di("not implemented")}_getIdTokenResponse(e){return Di("not implemented")}_linkToIdToken(e,n){return Di("not implemented")}_getReauthenticationResolver(e){return Di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(t,e){return H3(t,"POST","/v1/accounts:signInWithIdp",Jv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL="http://localhost";class Ko extends bC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=qv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ko(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qa(e,n)}buildRequest(){const e={requestUri:mL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends t1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends eh{constructor(){super("facebook.com")}static credential(e){return Ko._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ko._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Pi.credential(n,r)}catch{return null}}}Pi.GOOGLE_SIGN_IN_METHOD="google.com";Pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends eh{constructor(){super("github.com")}static credential(e){return Ko._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com";bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends eh{constructor(){super("twitter.com")}static credential(e,n){return Ko._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Es.credential(n,r)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Vo._fromIdTokenResponse(e,r,i),o=IE(r);return new ul({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=IE(r);return new ul({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function IE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends Ai{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,uf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new uf(e,n,r,i)}}function EC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?uf._fromErrorAndOperation(t,s,e,r):s})}async function gL(t,e,n=!1){const r=await du(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ul._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await du(t,EC(r,i,e,t),n);Le(s.idToken,r,"internal-error");const o=Qv(s.idToken);Le(o,r,"internal-error");const{sub:a}=o;return Le(t.uid===a,r,"user-mismatch"),ul._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(t,e,n=!1){const r="signIn",i=await EC(t,r,e),s=await ul._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function vL(t,e,n,r){return on(t).onIdTokenChanged(e,n,r)}function bL(t){return on(t).signOut()}const hf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hf,"1"),this.storage.removeItem(hf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(){const t=Ht();return Xv(t)||Op(t)}const TL=1e3,wL=10;class wC extends TC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=EL()&&rL(),this.fallbackToPolling=_C(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);nL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,wL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wC.type="LOCAL";const SL=wC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC extends TC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SC.type="SESSION";const IC=SC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Np(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await IL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Np.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=n1("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return window}function CL(t){ci().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}async function RL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function OL(){return AC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="firebaseLocalStorageDb",NL=1,df="firebaseLocalStorage",RC="fbase_key";class th{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mp(t,e){return t.transaction([df],e?"readwrite":"readonly").objectStore(df)}function ML(){const t=indexedDB.deleteDatabase(CC);return new th(t).toPromise()}function By(){const t=indexedDB.open(CC,NL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(df,{keyPath:RC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(df)?e(r):(r.close(),await ML(),e(await By()))})})}async function AE(t,e,n){const r=Mp(t,!0).put({[RC]:e,value:n});return new th(r).toPromise()}async function PL(t,e){const n=Mp(t,!1).get(e),r=await new th(n).toPromise();return r===void 0?null:r.value}function CE(t,e){const n=Mp(t,!0).delete(e);return new th(n).toPromise()}const xL=800,DL=3;class kC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await By(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>DL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Np._getInstance(OL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RL(),!this.activeServiceWorker)return;this.sender=new AL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await By();return await AE(e,hf,"1"),await CE(e,hf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>AE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>PL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Mp(i,!1).getAll();return new th(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kC.type="LOCAL";const LL=kC;new Zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t,e){return e?Li(e):(Le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1 extends bC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VL(t){return _L(t.auth,new r1(t),t.bypassAuthState)}function FL(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),yL(n,new r1(t),t.bypassAuthState)}async function BL(t){const{auth:e,user:n}=t;return Le(n,e,"internal-error"),gL(n,new r1(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VL;case"linkViaPopup":case"linkViaRedirect":return BL;case"reauthViaPopup":case"reauthViaRedirect":return FL;default:yi(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new Zu(2e3,1e4);async function $L(t,e,n){const r=Zv(t);L3(t,e,t1);const i=OC(r,n);return new To(r,"signInViaPopup",e,i).executeNotNull()}class To extends NC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=n1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UL.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="pendingRedirect",kd=new Map;class zL extends NC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kd.get(this.auth._key());if(!e){try{const r=await jL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kd.set(this.auth._key(),e)}return this.bypassAuthState||kd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jL(t,e){const n=qL(e),r=GL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function WL(t,e){kd.set(t._key(),e)}function GL(t){return Li(t._redirectPersistence)}function qL(t){return Rd(HL,t.config.apiKey,t.name)}async function KL(t,e,n=!1){const r=Zv(t),i=OC(r,e),o=await new zL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=10*60*1e3;class JL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!MC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(li(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YL&&this.cachedEventUids.clear(),this.cachedEventUids.has(RE(e))}saveEventToCache(e){this.cachedEventUids.add(RE(e)),this.lastProcessedEventTime=Date.now()}}function RE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(t,e={}){return Ul(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e6=/^https?/;async function t6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XL(t);for(const n of e)try{if(n6(n))return}catch{}yi(t,"unauthorized-domain")}function n6(t){const e=Fy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!e6.test(n))return!1;if(ZL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new Zu(3e4,6e4);function kE(){const t=ci().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function i6(t){return new Promise((e,n)=>{var r,i,s;function o(){kE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kE(),n(li(t,"network-request-failed"))},timeout:r6.get()})}if(!((i=(r=ci().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ci().gapi)===null||s===void 0)&&s.load)o();else{const a=dL("iframefcb");return ci()[a]=()=>{gapi.load?o():n(li(t,"network-request-failed"))},uL(`${hL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Od=null,e})}let Od=null;function s6(t){return Od=Od||i6(t),Od}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=new Zu(5e3,15e3),a6="__/auth/iframe",l6="emulator/auth/iframe",c6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h6(t){const e=t.config;Le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yv(e,l6):`https://${t.config.authDomain}/${a6}`,r={apiKey:e.apiKey,appName:t.name,v:Js},i=u6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Bl(r).slice(1)}`}async function d6(t){const e=await s6(t),n=ci().gapi;return Le(n,t,"internal-error"),e.open({where:document.body,url:h6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=li(t,"network-request-failed"),a=ci().setTimeout(()=>{s(o)},o6.get());function l(){ci().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p6=500,m6=600,g6="_blank",y6="http://localhost";class OE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _6(t,e,n,r=p6,i=m6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},f6),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ht().toLowerCase();n&&(a=fC(c)?g6:n),dC(c)&&(e=e||y6,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(tL(c)&&a!=="_self")return v6(e||"",a),new OE(null);const h=window.open(e||"",a,u);Le(h,t,"popup-blocked");try{h.focus()}catch{}return new OE(h)}function v6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6="__/auth/handler",E6="emulator/auth/handler",T6=encodeURIComponent("fac");async function NE(t,e,n,r,i,s){Le(t.config.authDomain,t,"auth-domain-config-required"),Le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Js,eventId:i};if(e instanceof t1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",My(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof eh){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${T6}=${encodeURIComponent(l)}`:"";return`${w6(t)}?${Bl(a).slice(1)}${c}`}function w6({config:t}){return t.emulator?Yv(t,E6):`https://${t.authDomain}/${b6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="webStorageSupport";class S6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IC,this._completeRedirectFn=KL,this._overrideRedirectResult=WL}async _openPopup(e,n,r,i){var s;Wi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await NE(e,n,r,Fy(),i);return _6(e,o,n1())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await NE(e,n,r,Fy(),i);return CL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Wi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await d6(e),r=new JL(e);return n.register("authEvent",i=>(Le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tg,{type:tg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[tg];o!==void 0&&n(!!o),yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _C()||Xv()||Op()}}const I6=S6;var ME="@firebase/auth",PE="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R6(t){gi(new $r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vC(t)},c=new lL(r,i,s,l);return pL(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gi(new $r("auth-internal",e=>{const n=Zv(e.getProvider("auth").getImmediate());return(r=>new A6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),lr(ME,PE,C6(t)),lr(ME,PE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6=5*60;h4("authIdTokenMaxAge");function O6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=li("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",O6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R6("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6=new Map,M6={activated:!1,tokenObservers:[]};function Hr(t){return N6.get(t)||Object.assign({},M6)}const xE={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new lu,this.pending.promise.catch(n=>{}),await x6(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new lu,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function x6(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ff=new Fl("appCheck","AppCheck",D6);function PC(t){if(!Hr(t).activated)throw ff.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6="firebase-app-check-database",V6=1,Uy="firebase-app-check-store";let Wh=null;function F6(){return Wh||(Wh=new Promise((t,e)=>{try{const n=indexedDB.open(L6,V6);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(ff.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Uy,{keyPath:"compositeKey"})}}}catch(n){e(ff.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Wh)}function B6(t,e){return U6($6(t),e)}async function U6(t,e){const r=(await F6()).transaction(Uy,"readwrite"),s=r.objectStore(Uy).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(ff.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function $6(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=new Xu("@firebase/app-check");function DE(t,e){return Wv()?B6(t,e).catch(n=>{$y.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6={error:"UNKNOWN_ERROR"};function z6(t){return Cp.encodeString(JSON.stringify(t),!1)}async function Hy(t,e=!1){const n=t.app;PC(n);const r=Hr(n);let i=r.token,s;if(i&&!dc(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(dc(l)?i=l:await DE(n,void 0))}if(!e&&i&&dc(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Hr(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?$y.warn(l.message):$y.error(l),s=l}let a;return i?s?dc(i)?a={token:i.token,internalError:s}:a=VE(s):(a={token:i.token},r.token=i,await DE(n,i)):a=VE(s),o&&q6(n,a),a}async function j6(t){const e=t.app;PC(e);const{provider:n}=Hr(e);{const{token:r}=await n.getToken();return{token:r}}}function W6(t,e,n,r){const{app:i}=t,s=Hr(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&dc(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),LE(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>LE(t))}function xC(t,e){const n=Hr(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function LE(t){const{app:e}=t,n=Hr(e);let r=n.tokenRefresher;r||(r=G6(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function G6(t){const{app:e}=t;return new P6(async()=>{const n=Hr(e);let r;if(n.token?r=await Hy(t,!0):r=await Hy(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Hr(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xE.RETRIAL_MIN_WAIT,xE.RETRIAL_MAX_WAIT)}function q6(t,e){const n=Hr(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function dc(t){return t.expireTimeMillis-Date.now()>0}function VE(t){return{token:z6(H6),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Hr(this.app);for(const n of e)xC(this.app,n.next);return Promise.resolve()}}function Y6(t,e){return new K6(t,e)}function J6(t){return{getToken:e=>Hy(t,e),getLimitedUseToken:()=>j6(t),addTokenListener:e=>W6(t,"INTERNAL",e),removeTokenListener:e=>xC(t.app,e)}}const Q6="@firebase/app-check",X6="0.8.2",Z6="app-check",FE="app-check-internal";function e5(){gi(new $r(Z6,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Y6(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(FE).initialize()})),gi(new $r(FE,t=>{const e=t.getProvider("app-check").getImmediate();return J6(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),lr(Q6,X6)}e5();var t5="firebase",n5="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(t5,n5,"app");const DC=Symbol("firebaseApp");function Pp(t){return ua()&&Jn(DC,null)||tC(t)}const ei=()=>{},r5=typeof window<"u";function i1(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function i5(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,a)=>o&&o[a],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function ha(t){return!!t&&typeof t=="object"}const s5=Object.prototype;function o5(t){return ha(t)&&Object.getPrototypeOf(t)===s5}function s1(t){return ha(t)&&t.type==="document"}function a5(t){return ha(t)&&t.type==="collection"}function l5(t){return s1(t)||a5(t)}function c5(t){return ha(t)&&t.type==="query"}function u5(t){return ha(t)&&"ref"in t}function h5(t){return ha(t)&&typeof t.bucket=="string"}function d5(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const f5=Symbol.for("v-scx");function p5(){return!!Jn(f5,0)}const Gh=new WeakMap;function m5(t,e){if(!Gh.has(t)){const n=GI(!0);Gh.set(t,n);const{unmount:r}=e;e.unmount=()=>{r.call(e),n.stop(),Gh.delete(t)}}return Gh.get(t)}const LC=new WeakMap;function VC(t){return LC.get(Pp(t))}const qh=new WeakMap;function FC(t){const e=Pp(t);if(!qh.has(e)){let n;const i=[new Promise(s=>{n=s}),s=>{qh.set(e,s),n(s.value)}];qh.set(e,i)}return qh.get(e)}function o1(t){const e=FC(t);return Array.isArray(e)?e[0]:Promise.resolve(e.value)}function g5(t,e){vL(e,n=>{const r=FC();t.value=n,Array.isArray(r)&&r[1](t)})}var BE={};const UE="@firebase/database",$E="1.0.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BC="";function y5(t){BC=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:cu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Zi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _5(e)}}catch{}return new v5},wo=UC("localStorage"),zy=UC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new Xu("@firebase/database"),b5=function(){let t=1;return function(){return t++}}(),$C=function(t){const e=R4(t),n=new w4;n.update(e);const r=n.digest();return Cp.encodeByteArray(r)},nh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=nh.apply(null,r):typeof r=="object"?e+=vn(r):e+=r,e+=" "}return e};let Fo=null,HE=!0;const E5=function(t,e){te(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ka.logLevel=He.VERBOSE,Fo=Ka.log.bind(Ka),e&&zy.set("logging_enabled",!0)):typeof t=="function"?Fo=t:(Fo=null,zy.remove("logging_enabled"))},Rn=function(...t){if(HE===!0&&(HE=!1,Fo===null&&zy.get("logging_enabled")===!0&&E5(!0)),Fo){const e=nh.apply(null,t);Fo(e)}},rh=function(t){return function(...e){Rn(t,...e)}},jy=function(...t){const e="FIREBASE INTERNAL ERROR: "+nh(...t);Ka.error(e)},Yo=function(...t){const e=`FIREBASE FATAL ERROR: ${nh(...t)}`;throw Ka.error(e),new Error(e)},cr=function(...t){const e="FIREBASE WARNING: "+nh(...t);Ka.warn(e)},T5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&cr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},HC=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},w5=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},hl="[MIN_NAME]",Jo="[MAX_NAME]",$l=function(t,e){if(t===e)return 0;if(t===hl||e===Jo)return-1;if(e===hl||t===Jo)return 1;{const n=zE(t),r=zE(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},S5=function(t,e){return t===e?0:t<e?-1:1},nc=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+vn(e))},a1=function(t){if(typeof t!="object"||t===null)return vn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=vn(e[r]),n+=":",n+=a1(t[e[r]]);return n+="}",n},zC=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ar(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const jC=function(t){te(!HC(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},I5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},A5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},C5=new RegExp("^-?(0*)\\d{1,10}$"),R5=-2147483648,k5=2147483647,zE=function(t){if(C5.test(t)){const e=Number(t);if(e>=R5&&e<=k5)return e}return null},ih=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw cr("Exception was thrown by user callback.",n),e},Math.floor(0))}},O5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xc=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){cr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',cr(e)}}class Wy{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Wy.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="5",WC="v",GC="s",qC="r",KC="f",YC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,JC="ls",QC="p",Gy="ac",XC="websocket",ZC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function x5(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function eR(t,e,n){te(typeof e=="string","typeof type must == string"),te(typeof n=="object","typeof params must == object");let r;if(e===XC)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ZC)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);x5(t)&&(n.ns=t.namespace);const i=[];return Ar(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.counters_={}}incrementCounter(e,n=1){Zi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return r4(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng={},rg={};function c1(t){const e=t.toString();return ng[e]||(ng[e]=new D5),ng[e]}function L5(t,e){const n=t.toString();return rg[n]||(rg[n]=e()),rg[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ih(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="start",F5="close",B5="pLPCommand",U5="pRTLPCB",tR="id",nR="pw",rR="ser",$5="cb",H5="seg",z5="ts",j5="d",W5="dframe",iR=1870,sR=30,G5=iR-sR,q5=25e3,K5=3e4;class Na{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rh(e),this.stats_=c1(n),this.urlFn=l=>(this.appCheckToken&&(l[Gy]=this.appCheckToken),eR(n,ZC,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new V5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(K5)),w5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new u1((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===jE)this.id=a,this.password=l;else if(o===F5)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[jE]="t",r[rR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[WC]=l1,this.transportSessionId&&(r[GC]=this.transportSessionId),this.lastSessionId&&(r[JC]=this.lastSessionId),this.applicationId&&(r[QC]=this.applicationId),this.appCheckToken&&(r[Gy]=this.appCheckToken),typeof location<"u"&&location.hostname&&YC.test(location.hostname)&&(r[qC]=KC);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Na.forceAllow_=!0}static forceDisallow(){Na.forceDisallow_=!0}static isAvailable(){return Na.forceAllow_?!0:!Na.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!I5()&&!A5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=vn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=WA(n),i=zC(r,G5);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[W5]="t",r[tR]=e,r[nR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=vn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class u1{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=b5(),window[B5+this.uniqueCallbackIdentifier]=e,window[U5+this.uniqueCallbackIdentifier]=n,this.myIFrame=u1.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Rn("frame writing exception"),a.stack&&Rn(a.stack),Rn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Rn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[tR]=this.myID,e[nR]=this.myPW,e[rR]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+sR+r.length<=iR;){const o=this.pendingSegs.shift();r=r+"&"+H5+i+"="+o.seg+"&"+z5+i+"="+o.ts+"&"+j5+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(q5)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Rn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=16384,J5=45e3;let pf=null;typeof MozWebSocket<"u"?pf=MozWebSocket:typeof WebSocket<"u"&&(pf=WebSocket);class xr{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rh(this.connId),this.stats_=c1(n),this.connURL=xr.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[WC]=l1,typeof location<"u"&&location.hostname&&YC.test(location.hostname)&&(o[qC]=KC),n&&(o[GC]=n),r&&(o[JC]=r),i&&(o[Gy]=i),s&&(o[QC]=s),eR(e,XC,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wo.set("previous_websocket_failure",!0);try{let r;YA(),this.mySock=new pf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){xr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&pf!==null&&!xr.forceDisallow_}static previouslyFailed(){return wo.isInMemoryStorage||wo.get("previous_websocket_failure")===!0}markConnectionHealthy(){wo.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=cu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(te(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=vn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=zC(n,Y5);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(J5))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}xr.responsesRequiredToBeHealthy=2;xr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Na,xr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=xr&&xr.isAvailable();let r=n&&!xr.previouslyFailed();if(e.webSocketOnly&&(n||cr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[xr];else{const i=this.transports_=[];for(const s of pu.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);pu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}pu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=6e4,X5=5e3,Z5=10*1024,eV=100*1024,ig="t",WE="d",tV="s",GE="r",nV="e",qE="o",KE="a",YE="n",JE="p",rV="h";class iV{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rh("c:"+this.id+":"),this.transportManager_=new pu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>eV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Z5?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ig in e){const n=e[ig];n===KE?this.upgradeIfSecondaryHealthy_():n===GE?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===qE&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=nc("t",e),r=nc("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:JE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:KE,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:YE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=nc("t",e),r=nc("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=nc(ig,e);if(WE in e){const r=e[WE];if(n===rV){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===YE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===tV?this.onConnectionShutdown_(r):n===GE?this.onReset_(r):n===nV?jy("Server Error: "+r):n===qE?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jy("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),l1!==r&&cr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),xc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Q5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(X5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:JE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aR=class{constructor(e){this.allowedEvents_=e,this.listeners_={},te(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){te(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends aR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!jv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mf}getInitialEvent(e){return te(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=32,XE=768;class wt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function dt(){return new wt("")}function Ye(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $s(t){return t.pieces_.length-t.pieceNum_}function vt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new wt(t.pieces_,e)}function lR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function sV(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function cR(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function uR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new wt(e,0)}function tn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof wt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new wt(n,0)}function Ge(t){return t.pieceNum_>=t.pieces_.length}function Tr(t,e){const n=Ye(t),r=Ye(e);if(n===null)return e;if(n===r)return Tr(vt(t),vt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function hR(t,e){if($s(t)!==$s(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Lr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if($s(t)>$s(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class oV{constructor(e,n){this.errorPrefix_=n,this.parts_=cR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=kp(this.parts_[r]);dR(this)}}function aV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=kp(e),dR(t)}function lV(t){const e=t.parts_.pop();t.byteLength_-=kp(e),t.parts_.length>0&&(t.byteLength_-=1)}function dR(t){if(t.byteLength_>XE)throw new Error(t.errorPrefix_+"has a key path longer than "+XE+" bytes ("+t.byteLength_+").");if(t.parts_.length>QE)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+QE+") or object contains a cycle "+po(t))}function po(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1 extends aR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new h1}getInitialEvent(e){return te(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=1e3,cV=60*5*1e3,ZE=30*1e3,uV=1.3,hV=3e4,dV="server_kill",eT=3;class Hi extends oR{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=Hi.nextPersistentConnectionId_++,this.log_=rh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rc,this.maxReconnectDelay_=cV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!YA())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");h1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&mf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(vn(s)),te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new lu,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),te(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;Hi.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Zi(e,"w")){const r=cl(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();cr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||T4(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ZE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=E4(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+vn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):jy("Unrecognized action received from server: "+vn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=rc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hV&&(this.reconnectDelay_=rc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*uV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Hi.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(h){te(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Rn("getToken() completed but was canceled"):(Rn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new iV(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{cr(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(dV)},s))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&cr(h),l())}}}interrupt(e){Rn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Rn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],My(this.interruptReasons_)&&(this.reconnectDelay_=rc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>a1(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new wt(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Rn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=eT&&(this.reconnectDelay_=ZE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Rn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=eT&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+BC.replace(/\./g,"-")]=1,jv()?e["framework.cordova"]=1:KA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=mf.getInstance().currentlyOnline();return My(this.interruptReasons_)&&e}}Hi.nextPersistentConnectionId_=0;Hi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Je(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Je(hl,e),i=new Je(hl,n);return this.compare(r,i)!==0}minPost(){return Je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh;class fR extends xp{static get __EMPTY_NODE(){return Kh}static set __EMPTY_NODE(e){Kh=e}compare(e,n){return $l(e.name,n.name)}isDefinedOn(e){throw Vl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Je.MIN}maxPost(){return new Je(Jo,Kh)}makePost(e,n){return te(typeof e=="string","KeyIndex indexValue must always be a string."),new Je(e,Kh)}toString(){return".key"}}const Ya=new fR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yh=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ir=class fc{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??fc.RED,this.left=i??ti.EMPTY_NODE,this.right=s??ti.EMPTY_NODE}copy(e,n,r,i,s){return new fc(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return ti.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ti.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,fc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,fc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};ir.RED=!0;ir.BLACK=!1;class fV{copy(e,n,r,i,s){return this}insert(e,n,r){return new ir(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ti=class Nd{constructor(e,n=Nd.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Nd(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ir.BLACK,null,null))}remove(e){return new Nd(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ir.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Yh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Yh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Yh(this.root_,null,this.comparator_,!0,e)}};ti.EMPTY_NODE=new fV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t,e){return $l(t.name,e.name)}function d1(t,e){return $l(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy;function mV(t){qy=t}const pR=function(t){return typeof t=="number"?"number:"+jC(t):"string:"+t},mR=function(t){if(t.isLeafNode()){const e=t.val();te(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Zi(e,".sv"),"Priority must be a string or number.")}else te(t===qy||t.isEmpty(),"priority of unexpected type.");te(t===qy||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tT;class Qt{constructor(e,n=Qt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,te(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),mR(this.priorityNode_)}static set __childrenNodeConstructor(e){tT=e}static get __childrenNodeConstructor(){return tT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Qt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Qt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ge(e)?this:Ye(e)===".priority"?this.priorityNode_:Qt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Qt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ye(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(te(r!==".priority"||$s(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Qt.__childrenNodeConstructor.EMPTY_NODE.updateChild(vt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+pR(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=jC(this.value_):e+=this.value_,this.lazyHash_=$C(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Qt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Qt.__childrenNodeConstructor?-1:(te(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Qt.VALUE_TYPE_ORDER.indexOf(n),s=Qt.VALUE_TYPE_ORDER.indexOf(r);return te(i>=0,"Unknown leaf type: "+n),te(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Qt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gR,yR;function gV(t){gR=t}function yV(t){yR=t}class _V extends xp{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?$l(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Je.MIN}maxPost(){return new Je(Jo,new Qt("[PRIORITY-POST]",yR))}makePost(e,n){const r=gR(e);return new Je(n,new Qt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Pn=new _V;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=Math.log(2);class bV{constructor(e){const n=s=>parseInt(Math.log(s)/vV,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gf=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new ir(d,h.node,ir.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=i(l,f),m=i(f+1,c);return h=t[f],d=n?n(h):h,new ir(d,h.node,ir.BLACK,p,m)}},s=function(l){let c=null,u=null,h=t.length;const d=function(p,m){const g=h-p,_=h;h-=p;const v=i(g+1,_),T=t[g],I=n?n(T):T;f(new ir(I,T.node,m,null,v))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));m?d(g,ir.BLACK):(d(g,ir.BLACK),d(g,ir.RED))}return u},o=new bV(t.length),a=s(o);return new ti(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg;const _a={};class Vi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return te(_a&&Pn,"ChildrenNode.ts has not been loaded"),sg=sg||new Vi({".priority":_a},{".priority":Pn}),sg}get(e){const n=cl(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ti?n:null}hasIndex(e){return Zi(this.indexSet_,e.toString())}addIndex(e,n){te(e!==Ya,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Je.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=gf(r,e.getCompare()):a=_a;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new Vi(u,c)}addToIndexes(e,n){const r=of(this.indexes_,(i,s)=>{const o=cl(this.indexSet_,s);if(te(o,"Missing index implementation for "+s),i===_a)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Je.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),gf(a,o.getCompare())}else return _a;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Je(e.name,a))),l.insert(e,e.node)}});return new Vi(r,this.indexSet_)}removeFromIndexes(e,n){const r=of(this.indexes_,i=>{if(i===_a)return i;{const s=n.get(e.name);return s?i.remove(new Je(e.name,s)):i}});return new Vi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic;class st{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&mR(this.priorityNode_),this.children_.isEmpty()&&te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ic||(ic=new st(new ti(d1),null,Vi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ic}updatePriority(e){return this.children_.isEmpty()?this:new st(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ic:n}}getChild(e){const n=Ye(e);return n===null?this:this.getImmediateChild(n).getChild(vt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(te(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Je(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?ic:this.priorityNode_;return new st(i,o,s)}}updateChild(e,n){const r=Ye(e);if(r===null)return n;{te(Ye(e)!==".priority"||$s(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(vt(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(Pn,(o,a)=>{n[o]=a.val(e),r++,s&&st.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+pR(this.getPriority().val())+":"),this.forEachChild(Pn,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":$C(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Je(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Je(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Je(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===sh?-1:0}withIndex(e){if(e===Ya||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new st(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ya||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Pn),i=n.getIterator(Pn);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ya?null:this.indexMap_.get(e.toString())}}st.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class EV extends st{constructor(){super(new ti(d1),st.EMPTY_NODE,Vi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return st.EMPTY_NODE}isEmpty(){return!1}}const sh=new EV;Object.defineProperties(Je,{MIN:{value:new Je(hl,st.EMPTY_NODE)},MAX:{value:new Je(Jo,sh)}});fR.__EMPTY_NODE=st.EMPTY_NODE;Qt.__childrenNodeConstructor=st;mV(sh);yV(sh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=!0;function kn(t,e=null){if(t===null)return st.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),te(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Qt(n,kn(e))}if(!(t instanceof Array)&&TV){const n=[];let r=!1;if(Ar(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=kn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Je(o,l)))}}),n.length===0)return st.EMPTY_NODE;const s=gf(n,pV,o=>o.name,d1);if(r){const o=gf(n,Pn.getCompare());return new st(s,kn(e),new Vi({".priority":o},{".priority":Pn}))}else return new st(s,kn(e),Vi.Default)}else{let n=st.EMPTY_NODE;return Ar(t,(r,i)=>{if(Zi(t,r)&&r.substring(0,1)!=="."){const s=kn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(kn(e))}}gV(kn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV extends xp{constructor(e){super(),this.indexPath_=e,te(!Ge(e)&&Ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?$l(e.name,n.name):s}makePost(e,n){const r=kn(e),i=st.EMPTY_NODE.updateChild(this.indexPath_,r);return new Je(n,i)}maxPost(){const e=st.EMPTY_NODE.updateChild(this.indexPath_,sh);return new Je(Jo,e)}toString(){return cR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV extends xp{compare(e,n){const r=e.node.compareTo(n.node);return r===0?$l(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Je.MIN}maxPost(){return Je.MAX}makePost(e,n){const r=kn(e);return new Je(n,r)}toString(){return".value"}}const IV=new SV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t){return{type:"value",snapshotNode:t}}function CV(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function RV(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function nT(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function kV(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hl}hasEnd(){return this.endSet_}getIndexEndValue(){return te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pn}copy(){const e=new f1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rT(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Pn?n="$priority":t.index_===IV?n="$value":t.index_===Ya?n="$key":(te(t.index_ instanceof wV,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=vn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=vn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+vn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=vn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+vn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function iT(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Pn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends oR{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=rh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(te(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=yf.getListenId_(e,r),a={};this.listens_[o]=a;const l=rT(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(s,h,!1,r),cl(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",i(d,null)}})}unlisten(e,n){const r=yf.getListenId_(e,n);delete this.listens_[r]}get(e){const n=rT(e._queryParams),r=e._path.toString(),i=new lu;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Bl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=cu(a.responseText)}catch{cr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&cr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this.rootNode_=st.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(){return{value:null,children:new Map}}function _R(t,e,n){if(Ge(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ye(e);t.children.has(r)||t.children.set(r,_f());const i=t.children.get(r);e=vt(e),_R(i,e,n)}}function Ky(t,e,n){t.value!==null?n(e,t.value):NV(t,(r,i)=>{const s=new wt(e.toString()+"/"+r);Ky(i,s,n)})}function NV(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ar(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=10*1e3,PV=30*1e3,xV=5*60*1e3;class DV{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new MV(e);const r=sT+(PV-sT)*Math.random();xc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ar(e,(i,s)=>{s>0&&Zi(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),xc(this.reportStats_.bind(this),Math.floor(Math.random()*2*xV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ni||(ni={}));function vR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ER(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ni.ACK_USER_WRITE,this.source=vR()}operationForChild(e){if(Ge(this.path)){if(this.affectedTree.value!=null)return te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new wt(e));return new vf(dt(),n,this.revert)}}else return te(Ye(this.path)===e,"operationForChild called for unrelated child."),new vf(vt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ni.OVERWRITE}operationForChild(e){return Ge(this.path)?new Qo(this.source,dt(),this.snap.getImmediateChild(e)):new Qo(this.source,vt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ni.MERGE}operationForChild(e){if(Ge(this.path)){const n=this.children.subtree(new wt(e));return n.isEmpty()?null:n.value?new Qo(this.source,dt(),n.value):new mu(this.source,dt(),n)}else return te(Ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new mu(this.source,vt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ge(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ye(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function LV(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(kV(o.childName,o.snapshotNode))}),sc(t,i,"child_removed",e,r,n),sc(t,i,"child_added",e,r,n),sc(t,i,"child_moved",s,r,n),sc(t,i,"child_changed",e,r,n),sc(t,i,"value",e,r,n),i}function sc(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>FV(t,a,l)),o.forEach(a=>{const l=VV(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function VV(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function FV(t,e,n){if(e.childName==null||n.childName==null)throw Vl("Should only compare child_ events.");const r=new Je(e.childName,e.snapshotNode),i=new Je(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e){return{eventCache:t,serverCache:e}}function Dc(t,e,n,r){return TR(new p1(e,n,r),t.serverCache)}function wR(t,e,n,r){return TR(t.eventCache,new p1(e,n,r))}function Yy(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Xo(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og;const BV=()=>(og||(og=new ti(S5)),og);class yt{constructor(e,n=BV()){this.value=e,this.children=n}static fromObject(e){let n=new yt(null);return Ar(e,(r,i)=>{n=n.set(new wt(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:dt(),value:this.value};if(Ge(e))return null;{const r=Ye(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(vt(e),n);return s!=null?{path:tn(new wt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ge(e))return this;{const n=Ye(e),r=this.children.get(n);return r!==null?r.subtree(vt(e)):new yt(null)}}set(e,n){if(Ge(e))return new yt(n,this.children);{const r=Ye(e),s=(this.children.get(r)||new yt(null)).set(vt(e),n),o=this.children.insert(r,s);return new yt(this.value,o)}}remove(e){if(Ge(e))return this.children.isEmpty()?new yt(null):new yt(null,this.children);{const n=Ye(e),r=this.children.get(n);if(r){const i=r.remove(vt(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new yt(null):new yt(this.value,s)}else return this}}get(e){if(Ge(e))return this.value;{const n=Ye(e),r=this.children.get(n);return r?r.get(vt(e)):null}}setTree(e,n){if(Ge(e))return n;{const r=Ye(e),s=(this.children.get(r)||new yt(null)).setTree(vt(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new yt(this.value,o)}}fold(e){return this.fold_(dt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(tn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,dt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Ge(e))return null;{const s=Ye(e),o=this.children.get(s);return o?o.findOnPath_(vt(e),tn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,dt(),n)}foreachOnPath_(e,n,r){if(Ge(e))return this;{this.value&&r(n,this.value);const i=Ye(e),s=this.children.get(i);return s?s.foreachOnPath_(vt(e),tn(n,i),r):new yt(null)}}foreach(e){this.foreach_(dt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(tn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.writeTree_=e}static empty(){return new Br(new yt(null))}}function Lc(t,e,n){if(Ge(e))return new Br(new yt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Tr(i,e);return s=s.updateChild(o,n),new Br(t.writeTree_.set(i,s))}else{const i=new yt(n),s=t.writeTree_.setTree(e,i);return new Br(s)}}}function oT(t,e,n){let r=t;return Ar(n,(i,s)=>{r=Lc(r,tn(e,i),s)}),r}function aT(t,e){if(Ge(e))return Br.empty();{const n=t.writeTree_.setTree(e,new yt(null));return new Br(n)}}function Jy(t,e){return da(t,e)!=null}function da(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Tr(n.path,e)):null}function lT(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Pn,(r,i)=>{e.push(new Je(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Je(r,i.value))}),e}function Ps(t,e){if(Ge(e))return t;{const n=da(t,e);return n!=null?new Br(new yt(n)):new Br(t.writeTree_.subtree(e))}}function Qy(t){return t.writeTree_.isEmpty()}function dl(t,e){return SR(dt(),t.writeTree_,e)}function SR(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(te(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=SR(tn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(tn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t,e){return OR(e,t)}function UV(t,e,n,r,i){te(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Lc(t.visibleWrites,e,n)),t.lastWriteId=r}function $V(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function HV(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);te(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&zV(a,r.path)?i=!1:Lr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return jV(t),!0;if(r.snap)t.visibleWrites=aT(t.visibleWrites,r.path);else{const a=r.children;Ar(a,l=>{t.visibleWrites=aT(t.visibleWrites,tn(r.path,l))})}return!0}else return!1}function zV(t,e){if(t.snap)return Lr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Lr(tn(t.path,n),e))return!0;return!1}function jV(t){t.visibleWrites=AR(t.allWrites,WV,dt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function WV(t){return t.visible}function AR(t,e,n){let r=Br.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Lr(n,o)?(a=Tr(n,o),r=Lc(r,a,s.snap)):Lr(o,n)&&(a=Tr(o,n),r=Lc(r,dt(),s.snap.getChild(a)));else if(s.children){if(Lr(n,o))a=Tr(n,o),r=oT(r,a,s.children);else if(Lr(o,n))if(a=Tr(o,n),Ge(a))r=oT(r,dt(),s.children);else{const l=cl(s.children,Ye(a));if(l){const c=l.getChild(vt(a));r=Lc(r,dt(),c)}}}else throw Vl("WriteRecord should have .snap or .children")}}return r}function CR(t,e,n,r,i){if(!r&&!i){const s=da(t.visibleWrites,e);if(s!=null)return s;{const o=Ps(t.visibleWrites,e);if(Qy(o))return n;if(n==null&&!Jy(o,dt()))return null;{const a=n||st.EMPTY_NODE;return dl(o,a)}}}else{const s=Ps(t.visibleWrites,e);if(!i&&Qy(s))return n;if(!i&&n==null&&!Jy(s,dt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Lr(c.path,e)||Lr(e,c.path))},a=AR(t.allWrites,o,e),l=n||st.EMPTY_NODE;return dl(a,l)}}}function GV(t,e,n){let r=st.EMPTY_NODE;const i=da(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Pn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ps(t.visibleWrites,e);return n.forEachChild(Pn,(o,a)=>{const l=dl(Ps(s,new wt(o)),a);r=r.updateImmediateChild(o,l)}),lT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Ps(t.visibleWrites,e);return lT(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function qV(t,e,n,r,i){te(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=tn(e,n);if(Jy(t.visibleWrites,s))return null;{const o=Ps(t.visibleWrites,s);return Qy(o)?i.getChild(n):dl(o,i.getChild(n))}}function KV(t,e,n,r){const i=tn(e,n),s=da(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Ps(t.visibleWrites,i);return dl(o,r.getNode().getImmediateChild(n))}else return null}function YV(t,e){return da(t.visibleWrites,e)}function JV(t,e,n,r,i,s,o){let a;const l=Ps(t.visibleWrites,e),c=da(l,dt());if(c!=null)a=c;else if(n!=null)a=dl(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=d.getNext();for(;f&&u.length<i;)h(f,r)!==0&&u.push(f),f=d.getNext();return u}else return[]}function QV(){return{visibleWrites:Br.empty(),allWrites:[],lastWriteId:-1}}function Xy(t,e,n,r){return CR(t.writeTree,t.treePath,e,n,r)}function RR(t,e){return GV(t.writeTree,t.treePath,e)}function cT(t,e,n,r){return qV(t.writeTree,t.treePath,e,n,r)}function bf(t,e){return YV(t.writeTree,tn(t.treePath,e))}function XV(t,e,n,r,i,s){return JV(t.writeTree,t.treePath,e,n,r,i,s)}function m1(t,e,n){return KV(t.writeTree,t.treePath,e,n)}function kR(t,e){return OR(tn(t.treePath,e),t.writeTree)}function OR(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;te(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),te(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,nT(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,RV(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,CV(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,nT(r,e.snapshotNode,i.oldSnap));else throw Vl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const NR=new e9;class g1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new p1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return m1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Xo(this.viewCache_),s=XV(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function t9(t,e){te(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),te(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function n9(t,e,n,r,i){const s=new ZV;let o,a;if(n.type===ni.OVERWRITE){const c=n;c.source.fromUser?o=Zy(t,e,c.path,c.snap,r,i,s):(te(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ge(c.path),o=Ef(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===ni.MERGE){const c=n;c.source.fromUser?o=i9(t,e,c.path,c.children,r,i,s):(te(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=e_(t,e,c.path,c.children,r,i,a,s))}else if(n.type===ni.ACK_USER_WRITE){const c=n;c.revert?o=a9(t,e,c.path,r,i,s):o=s9(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===ni.LISTEN_COMPLETE)o=o9(t,e,n.path,r,s);else throw Vl("Unknown operation type: "+n.type);const l=s.getChanges();return r9(e,o,l),{viewCache:o,changes:l}}function r9(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Yy(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(AV(Yy(e)))}}function MR(t,e,n,r,i,s){const o=e.eventCache;if(bf(r,n)!=null)return e;{let a,l;if(Ge(n))if(te(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Xo(e),u=c instanceof st?c:st.EMPTY_NODE,h=RR(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=Xy(r,Xo(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ye(n);if(c===".priority"){te($s(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=cT(r,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=vt(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=cT(r,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=m1(r,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,i,s):a=o.getNode()}}return Dc(e,a,o.isFullyInitialized()||Ge(n),t.filter.filtersNodes())}}function Ef(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Ge(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Ye(n);if(!l.isCompleteForPath(n)&&$s(n)>1)return e;const p=vt(n),g=l.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),f,g,p,NR,null)}const h=wR(e,c,l.isFullyInitialized()||Ge(n),u.filtersNodes()),d=new g1(i,h,s);return MR(t,h,n,i,d,a)}function Zy(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new g1(i,e,s);if(Ge(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Dc(e,c,!0,t.filter.filtersNodes());else{const h=Ye(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=Dc(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=vt(n),f=a.getNode().getImmediateChild(h);let p;if(Ge(d))p=r;else{const m=u.getCompleteChild(h);m!=null?lR(d)===".priority"&&m.getChild(uR(d)).isEmpty()?p=m:p=m.updateChild(d,r):p=st.EMPTY_NODE}if(f.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=Dc(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function uT(t,e){return t.eventCache.isCompleteForChild(e)}function i9(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=tn(n,l);uT(e,Ye(u))&&(a=Zy(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=tn(n,l);uT(e,Ye(u))||(a=Zy(t,a,u,c,i,s,o))}),a}function hT(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function e_(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Ge(n)?c=r:c=new yt(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=hT(t,f,d);l=Ef(t,l,new wt(h),p,i,s,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),m=hT(t,p,d);l=Ef(t,l,new wt(h),m,i,s,o,a)}}),l}function s9(t,e,n,r,i,s,o){if(bf(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ge(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Ef(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Ge(n)){let c=new yt(null);return l.getNode().forEachChild(Ya,(u,h)=>{c=c.set(new wt(u),h)}),e_(t,e,n,c,i,s,a,o)}else return e}else{let c=new yt(null);return r.foreach((u,h)=>{const d=tn(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),e_(t,e,n,c,i,s,a,o)}}function o9(t,e,n,r,i){const s=e.serverCache,o=wR(e,s.getNode(),s.isFullyInitialized()||Ge(n),s.isFiltered());return MR(t,o,n,r,NR,i)}function a9(t,e,n,r,i,s){let o;if(bf(r,n)!=null)return e;{const a=new g1(r,e,i),l=e.eventCache.getNode();let c;if(Ge(n)||Ye(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Xy(r,Xo(e));else{const h=e.serverCache.getNode();te(h instanceof st,"serverChildren would be complete if leaf node"),u=RR(r,h)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Ye(n);let h=m1(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,vt(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,st.EMPTY_NODE,vt(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Xy(r,Xo(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||bf(r,dt())!=null,Dc(e,c,o,t.filter.filtersNodes())}}function l9(t,e){const n=Xo(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ge(e)&&!n.getImmediateChild(Ye(e)).isEmpty())?n.getChild(e):null}function dT(t,e,n,r){e.type===ni.MERGE&&e.source.queryId!==null&&(te(Xo(t.viewCache_),"We should always have a full cache before handling merges"),te(Yy(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=n9(t.processor_,i,e,n,r);return t9(t.processor_,s.viewCache),te(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,c9(t,s.changes,s.viewCache.eventCache.getNode(),null)}function c9(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return LV(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fT;function u9(t){te(!fT,"__referenceConstructor has already been defined"),fT=t}function y1(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return te(s!=null,"SyncTree gave us an op for an invalid query."),dT(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(dT(o,e,n,r));return s}}function _1(t,e){let n=null;for(const r of t.views.values())n=n||l9(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pT;function h9(t){te(!pT,"__referenceConstructor has already been defined"),pT=t}class mT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yt(null),this.pendingWriteTree_=QV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function d9(t,e,n,r,i){return UV(t.pendingWriteTree_,e,n,r,i),i?Lp(t,new Qo(vR(),e,n)):[]}function Ma(t,e,n=!1){const r=$V(t.pendingWriteTree_,e);if(HV(t.pendingWriteTree_,e)){let s=new yt(null);return r.snap!=null?s=s.set(dt(),!0):Ar(r.children,o=>{s=s.set(new wt(o),!0)}),Lp(t,new vf(r.path,s,n))}else return[]}function Dp(t,e,n){return Lp(t,new Qo(bR(),e,n))}function f9(t,e,n){const r=yt.fromObject(n);return Lp(t,new mu(bR(),e,r))}function p9(t,e,n,r){const i=LR(t,r);if(i!=null){const s=VR(i),o=s.path,a=s.queryId,l=Tr(o,e),c=new Qo(ER(a),l,n);return FR(t,o,c)}else return[]}function m9(t,e,n,r){const i=LR(t,r);if(i){const s=VR(i),o=s.path,a=s.queryId,l=Tr(o,e),c=yt.fromObject(n),u=new mu(ER(a),l,c);return FR(t,o,u)}else return[]}function PR(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Tr(o,e),c=_1(a,l);if(c)return c});return CR(i,e,s,n,!0)}function Lp(t,e){return xR(e,t.syncPointTree_,null,IR(t.pendingWriteTree_,dt()))}function xR(t,e,n,r){if(Ge(t.path))return DR(t,e,n,r);{const i=e.get(dt());n==null&&i!=null&&(n=_1(i,dt()));let s=[];const o=Ye(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=kR(r,o);s=s.concat(xR(a,l,c,u))}return i&&(s=s.concat(y1(i,t,r,n))),s}}function DR(t,e,n,r){const i=e.get(dt());n==null&&i!=null&&(n=_1(i,dt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=kR(r,o),u=t.operationForChild(o);u&&(s=s.concat(DR(u,a,l,c)))}),i&&(s=s.concat(y1(i,t,r,n))),s}function LR(t,e){return t.tagToQueryMap.get(e)}function VR(t){const e=t.indexOf("$");return te(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new wt(t.substr(0,e))}}function FR(t,e,n){const r=t.syncPointTree_.get(e);te(r,"Missing sync point for query tag that we're tracking");const i=IR(t.pendingWriteTree_,e);return y1(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new v1(n)}node(){return this.node_}}class b1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=tn(this.path_,e);return new b1(this.syncTree_,n)}node(){return PR(this.syncTree_,this.path_)}}const g9=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gT=function(t,e,n){if(!t||typeof t!="object")return t;if(te(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return y9(t[".sv"],e,n);if(typeof t[".sv"]=="object")return _9(t[".sv"],e);te(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},y9=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:te(!1,"Unexpected server value: "+t)}},_9=function(t,e,n){t.hasOwnProperty("increment")||te(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&te(!1,"Unexpected increment value: "+r);const i=e.node();if(te(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},v9=function(t,e,n,r){return E1(e,new b1(n,t),r)},b9=function(t,e,n){return E1(t,new v1(e),n)};function E1(t,e,n){const r=t.getPriority().val(),i=gT(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=gT(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Qt(a,kn(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Qt(i))),o.forEachChild(Pn,(a,l)=>{const c=E1(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function w1(t,e){let n=e instanceof wt?e:new wt(e),r=t,i=Ye(n);for(;i!==null;){const s=cl(r.node.children,i)||{children:{},childCount:0};r=new T1(i,r,s),n=vt(n),i=Ye(n)}return r}function Hl(t){return t.node.value}function BR(t,e){t.node.value=e,t_(t)}function UR(t){return t.node.childCount>0}function E9(t){return Hl(t)===void 0&&!UR(t)}function Vp(t,e){Ar(t.node.children,(n,r)=>{e(new T1(n,t,r))})}function $R(t,e,n,r){n&&!r&&e(t),Vp(t,i=>{$R(i,e,!0,r)}),n&&r&&e(t)}function T9(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function oh(t){return new wt(t.parent===null?t.name:oh(t.parent)+"/"+t.name)}function t_(t){t.parent!==null&&w9(t.parent,t.name,t)}function w9(t,e,n){const r=E9(n),i=Zi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,t_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,t_(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9=/[\[\].#$\/\u0000-\u001F\u007F]/,I9=/[\[\].#$\u0000-\u001F\u007F]/,ag=10*1024*1024,HR=function(t){return typeof t=="string"&&t.length!==0&&!S9.test(t)},A9=function(t){return typeof t=="string"&&t.length!==0&&!I9.test(t)},C9=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),A9(t)},zR=function(t,e,n){const r=n instanceof wt?new oV(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+po(r));if(typeof e=="function")throw new Error(t+"contains a function "+po(r)+" with contents = "+e.toString());if(HC(e))throw new Error(t+"contains "+e.toString()+" "+po(r));if(typeof e=="string"&&e.length>ag/3&&kp(e)>ag)throw new Error(t+"contains a string greater than "+ag+" utf8 bytes "+po(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ar(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!HR(o)))throw new Error(t+" contains an invalid key ("+o+") "+po(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);aV(r,o),zR(t,a,r),lV(r)}),i&&s)throw new Error(t+' contains ".value" child '+po(r)+" in addition to actual children.")}},R9=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!HR(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!C9(n))throw new Error(C4(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function O9(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!hR(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function fa(t,e,n){O9(t,n),N9(t,r=>Lr(r,e)||Lr(e,r))}function N9(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(M9(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function M9(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Fo&&Rn("event: "+n.toString()),ih(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9="repo_interrupt",x9=25;class D9{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new k9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_f(),this.transactionQueueTree_=new T1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function L9(t,e,n){if(t.stats_=c1(t.repoInfo_),t.forceRestClient_||O5())t.server_=new yf(t.repoInfo_,(r,i,s,o)=>{yT(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>_T(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Hi(t.repoInfo_,e,(r,i,s,o)=>{yT(t,r,i,s,o)},r=>{_T(t,r)},r=>{F9(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=L5(t.repoInfo_,()=>new DV(t.stats_,t.server_)),t.infoData_=new OV,t.infoSyncTree_=new mT({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=Dp(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),S1(t,"connected",!1),t.serverSyncTree_=new mT({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);fa(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function V9(t){const n=t.infoData_.getNode(new wt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function jR(t){return g9({timestamp:V9(t)})}function yT(t,e,n,r,i){t.dataUpdateCount++;const s=new wt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=of(n,c=>kn(c));o=m9(t.serverSyncTree_,s,l,i)}else{const l=kn(n);o=p9(t.serverSyncTree_,s,l,i)}else if(r){const l=of(n,c=>kn(c));o=f9(t.serverSyncTree_,s,l)}else{const l=kn(n);o=Dp(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=A1(t,s)),fa(t.eventQueue_,a,o)}function _T(t,e){S1(t,"connected",e),e===!1&&U9(t)}function F9(t,e){Ar(e,(n,r)=>{S1(t,n,r)})}function S1(t,e,n){const r=new wt("/.info/"+e),i=kn(n);t.infoData_.updateSnapshot(r,i);const s=Dp(t.infoSyncTree_,r,i);fa(t.eventQueue_,r,s)}function B9(t){return t.nextWriteId_++}function U9(t){WR(t,"onDisconnectEvents");const e=jR(t),n=_f();Ky(t.onDisconnect_,dt(),(i,s)=>{const o=v9(i,s,t.serverSyncTree_,e);_R(n,i,o)});let r=[];Ky(n,dt(),(i,s)=>{r=r.concat(Dp(t.serverSyncTree_,i,s));const o=j9(t,i);A1(t,o)}),t.onDisconnect_=_f(),fa(t.eventQueue_,dt(),r)}function $9(t){t.persistentConnection_&&t.persistentConnection_.interrupt(P9)}function WR(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Rn(n,...e)}function GR(t,e,n){return PR(t.serverSyncTree_,e,n)||st.EMPTY_NODE}function I1(t,e=t.transactionQueueTree_){if(e||Fp(t,e),Hl(e)){const n=KR(t,e);te(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&H9(t,oh(e),n)}else UR(e)&&Vp(e,n=>{I1(t,n)})}function H9(t,e,n){const r=n.map(c=>c.currentWriteId),i=GR(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];te(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=Tr(e,u.path);s=s.updateChild(h,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{WR(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Ma(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Fp(t,w1(t.transactionQueueTree_,e)),I1(t,t.transactionQueueTree_),fa(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)ih(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{cr("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}A1(t,e)}},o)}function A1(t,e){const n=qR(t,e),r=oh(n),i=KR(t,n);return z9(t,i,r),r}function z9(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Tr(n,l.path);let u=!1,h;if(te(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(Ma(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=x9)u=!0,h="maxretry",i=i.concat(Ma(t.serverSyncTree_,l.currentWriteId,!0));else{const d=GR(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){zR("transaction failed: Data returned ",f,l.path);let p=kn(f);typeof f=="object"&&f!=null&&Zi(f,".priority")||(p=p.updatePriority(d.getPriority()));const g=l.currentWriteId,_=jR(t),v=b9(p,d,_);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=v,l.currentWriteId=B9(t),o.splice(o.indexOf(g),1),i=i.concat(d9(t.serverSyncTree_,l.path,v,l.currentWriteId,l.applyLocally)),i=i.concat(Ma(t.serverSyncTree_,g,!0))}else u=!0,h="nodata",i=i.concat(Ma(t.serverSyncTree_,l.currentWriteId,!0))}fa(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}Fp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ih(r[a]);I1(t,t.transactionQueueTree_)}function qR(t,e){let n,r=t.transactionQueueTree_;for(n=Ye(e);n!==null&&Hl(r)===void 0;)r=w1(r,n),e=vt(e),n=Ye(e);return r}function KR(t,e){const n=[];return YR(t,e,n),n.sort((r,i)=>r.order-i.order),n}function YR(t,e,n){const r=Hl(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Vp(e,i=>{YR(t,i,n)})}function Fp(t,e){const n=Hl(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,BR(e,n.length>0?n:void 0)}Vp(e,r=>{Fp(t,r)})}function j9(t,e){const n=oh(qR(t,e)),r=w1(t.transactionQueueTree_,e);return T9(r,i=>{lg(t,i)}),lg(t,r),$R(r,i=>{lg(t,i)}),n}function lg(t,e){const n=Hl(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(te(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(te(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ma(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?BR(e,void 0):n.length=s+1,fa(t.eventQueue_,oh(e),i);for(let o=0;o<r.length;o++)ih(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function G9(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):cr(`Invalid query segment '${n}' in query '${t}'`)}return e}const vT=function(t,e){const n=q9(t),r=n.namespace;n.domain==="firebase.com"&&Yo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Yo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||T5();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new P5(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new wt(n.pathString)}},q9=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=W9(t.substring(u,h)));const d=G9(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ge(this._path)?null:lR(this._path)}get ref(){return new zl(this._repo,this._path)}get _queryIdentifier(){const e=iT(this._queryParams),n=a1(e);return n==="{}"?"default":n}get _queryObject(){return iT(this._queryParams)}isEqual(e){if(e=on(e),!(e instanceof C1))return!1;const n=this._repo===e._repo,r=hR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+sV(this._path)}}class zl extends C1{constructor(e,n){super(e,n,new f1,!1)}get parent(){const e=uR(this._path);return e===null?null:new zl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}u9(zl);h9(zl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="FIREBASE_DATABASE_EMULATOR_HOST",n_={};let Y9=!1;function J9(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Yo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rn("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=vT(s,i),a=o.repoInfo,l,c;typeof process<"u"&&BE&&(c=BE[K9]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=vT(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new Wy(Wy.OWNER):new M5(t.name,t.options,e);R9("Invalid Firebase Database URL",o),Ge(o.path)||Yo("Database URL must point to the root of a Firebase Database (not including a child path).");const h=X9(a,t,u,new N5(t.name,n));return new Z9(h,t)}function Q9(t,e){const n=n_[e];(!n||n[t.key]!==t)&&Yo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$9(t),delete n[t.key]}function X9(t,e,n,r){let i=n_[e.name];i||(i={},n_[e.name]=i);let s=i[t.toURLString()];return s&&Yo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new D9(t,Y9,n,r),i[t.toURLString()]=s,s}class Z9{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(L9(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zl(this._repo,dt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Q9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Yo("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){y5(Js),gi(new $r("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return J9(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),lr(UE,$E,t),lr(UE,$E,"esm2017")}Hi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Hi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};eF();var tF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ne,R1=R1||{},ke=tF||self;function Bp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ah(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function nF(t){return Object.prototype.hasOwnProperty.call(t,cg)&&t[cg]||(t[cg]=++rF)}var cg="closure_uid_"+(1e9*Math.random()>>>0),rF=0;function iF(t,e,n){return t.call.apply(t.bind,arguments)}function sF(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function xn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xn=iF:xn=sF,xn.apply(null,arguments)}function Jh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function cn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Qs(){this.s=this.s,this.o=this.o}var oF=0;Qs.prototype.s=!1;Qs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),oF!=0)&&nF(this)};Qs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const JR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function k1(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function bT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Bp(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Dn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Dn.prototype.h=function(){this.defaultPrevented=!0};var aF=function(){if(!ke.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};ke.addEventListener("test",n,e),ke.removeEventListener("test",n,e)}catch{}return t}();function gu(t){return/^[\s\xa0]*$/.test(t)}function Up(){var t=ke.navigator;return t&&(t=t.userAgent)?t:""}function Xr(t){return Up().indexOf(t)!=-1}function O1(t){return O1[" "](t),t}O1[" "]=function(){};function lF(t,e){var n=e7;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var cF=Xr("Opera"),fl=Xr("Trident")||Xr("MSIE"),QR=Xr("Edge"),r_=QR||fl,XR=Xr("Gecko")&&!(Up().toLowerCase().indexOf("webkit")!=-1&&!Xr("Edge"))&&!(Xr("Trident")||Xr("MSIE"))&&!Xr("Edge"),uF=Up().toLowerCase().indexOf("webkit")!=-1&&!Xr("Edge");function ZR(){var t=ke.document;return t?t.documentMode:void 0}var i_;e:{var ug="",hg=function(){var t=Up();if(XR)return/rv:([^\);]+)(\)|;)/.exec(t);if(QR)return/Edge\/([\d\.]+)/.exec(t);if(fl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(uF)return/WebKit\/(\S+)/.exec(t);if(cF)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(hg&&(ug=hg?hg[1]:""),fl){var dg=ZR();if(dg!=null&&dg>parseFloat(ug)){i_=String(dg);break e}}i_=ug}var s_;if(ke.document&&fl){var ET=ZR();s_=ET||parseInt(i_,10)||void 0}else s_=void 0;var hF=s_;function yu(t,e){if(Dn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(XR){e:{try{O1(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:dF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&yu.$.h.call(this)}}cn(yu,Dn);var dF={2:"touch",3:"pen",4:"mouse"};yu.prototype.h=function(){yu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var lh="closure_listenable_"+(1e6*Math.random()|0),fF=0;function pF(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++fF,this.fa=this.ia=!1}function $p(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function N1(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function mF(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function ek(t){const e={};for(const n in t)e[n]=t[n];return e}const TT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tk(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<TT.length;s++)n=TT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Hp(t){this.src=t,this.g={},this.h=0}Hp.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=a_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new pF(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function o_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=JR(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&($p(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function a_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var M1="closure_lm_"+(1e6*Math.random()|0),fg={};function nk(t,e,n,r,i){if(r&&r.once)return ik(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)nk(t,e[s],n,r,i);return null}return n=D1(n),t&&t[lh]?t.O(e,n,ah(r)?!!r.capture:!!r,i):rk(t,e,n,!1,r,i)}function rk(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ah(i)?!!i.capture:!!i,a=x1(t);if(a||(t[M1]=a=new Hp(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=gF(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)aF||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ok(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function gF(){function t(n){return e.call(t.src,t.listener,n)}const e=yF;return t}function ik(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ik(t,e[s],n,r,i);return null}return n=D1(n),t&&t[lh]?t.P(e,n,ah(r)?!!r.capture:!!r,i):rk(t,e,n,!0,r,i)}function sk(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)sk(t,e[s],n,r,i);else r=ah(r)?!!r.capture:!!r,n=D1(n),t&&t[lh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=a_(s,n,r,i),-1<n&&($p(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=x1(t))&&(e=t.g[e.toString()],t=-1,e&&(t=a_(e,n,r,i)),(n=-1<t?e[t]:null)&&P1(n))}function P1(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[lh])o_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ok(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=x1(e))?(o_(n,t),n.h==0&&(n.src=null,e[M1]=null)):$p(t)}}}function ok(t){return t in fg?fg[t]:fg[t]="on"+t}function yF(t,e){if(t.fa)t=!0;else{e=new yu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&P1(t),t=n.call(r,e)}return t}function x1(t){return t=t[M1],t instanceof Hp?t:null}var pg="__closure_events_fn_"+(1e9*Math.random()>>>0);function D1(t){return typeof t=="function"?t:(t[pg]||(t[pg]=function(e){return t.handleEvent(e)}),t[pg])}function an(){Qs.call(this),this.i=new Hp(this),this.S=this,this.J=null}cn(an,Qs);an.prototype[lh]=!0;an.prototype.removeEventListener=function(t,e,n,r){sk(this,t,e,n,r)};function En(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Dn(e,t);else if(e instanceof Dn)e.target=e.target||t;else{var i=e;e=new Dn(r,t),tk(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Qh(o,r,!0,e)&&i}if(o=e.g=t,i=Qh(o,r,!0,e)&&i,i=Qh(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Qh(o,r,!1,e)&&i}an.prototype.N=function(){if(an.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$p(n[r]);delete t.g[e],t.h--}}this.J=null};an.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};an.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Qh(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&o_(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var L1=ke.JSON.stringify;class _F{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function vF(){var t=V1;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class bF{constructor(){this.h=this.g=null}add(e,n){const r=ak.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ak=new _F(()=>new EF,t=>t.reset());class EF{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function TF(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function wF(t){ke.setTimeout(()=>{throw t},0)}let _u,vu=!1,V1=new bF,lk=()=>{const t=ke.Promise.resolve(void 0);_u=()=>{t.then(SF)}};var SF=()=>{for(var t;t=vF();){try{t.h.call(t.g)}catch(n){wF(n)}var e=ak;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}vu=!1};function zp(t,e){an.call(this),this.h=t||1,this.g=e||ke,this.j=xn(this.qb,this),this.l=Date.now()}cn(zp,an);ne=zp.prototype;ne.ga=!1;ne.T=null;ne.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),En(this,"tick"),this.ga&&(F1(this),this.start()))}};ne.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function F1(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ne.N=function(){zp.$.N.call(this),F1(this),delete this.g};function B1(t,e,n){if(typeof t=="function")n&&(t=xn(t,n));else if(t&&typeof t.handleEvent=="function")t=xn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ke.setTimeout(t,e||0)}function ck(t){t.g=B1(()=>{t.g=null,t.i&&(t.i=!1,ck(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class IF extends Qs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ck(this)}N(){super.N(),this.g&&(ke.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bu(t){Qs.call(this),this.h=t,this.g={}}cn(bu,Qs);var wT=[];function uk(t,e,n,r){Array.isArray(n)||(n&&(wT[0]=n.toString()),n=wT);for(var i=0;i<n.length;i++){var s=nk(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function hk(t){N1(t.g,function(e,n){this.g.hasOwnProperty(n)&&P1(e)},t),t.g={}}bu.prototype.N=function(){bu.$.N.call(this),hk(this)};bu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function jp(){this.g=!0}jp.prototype.Ea=function(){this.g=!1};function AF(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function CF(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Pa(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kF(t,n)+(r?" "+r:"")})}function RF(t,e){t.info(function(){return"TIMEOUT: "+e})}jp.prototype.info=function(){};function kF(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return L1(n)}catch{return e}}var pa={},ST=null;function Wp(){return ST=ST||new an}pa.Ta="serverreachability";function dk(t){Dn.call(this,pa.Ta,t)}cn(dk,Dn);function Eu(t){const e=Wp();En(e,new dk(e))}pa.STAT_EVENT="statevent";function fk(t,e){Dn.call(this,pa.STAT_EVENT,t),this.stat=e}cn(fk,Dn);function Un(t){const e=Wp();En(e,new fk(e,t))}pa.Ua="timingevent";function pk(t,e){Dn.call(this,pa.Ua,t),this.size=e}cn(pk,Dn);function ch(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ke.setTimeout(function(){t()},e)}var Gp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function U1(){}U1.prototype.h=null;function IT(t){return t.h||(t.h=t.i())}function gk(){}var uh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $1(){Dn.call(this,"d")}cn($1,Dn);function H1(){Dn.call(this,"c")}cn(H1,Dn);var l_;function qp(){}cn(qp,U1);qp.prototype.g=function(){return new XMLHttpRequest};qp.prototype.i=function(){return{}};l_=new qp;function hh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new bu(this),this.P=OF,t=r_?125:void 0,this.V=new zp(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new yk}function yk(){this.i=null,this.g="",this.h=!1}var OF=45e3,_k={},c_={};ne=hh.prototype;ne.setTimeout=function(t){this.P=t};function u_(t,e,n){t.L=1,t.A=Yp(Gi(e)),t.u=n,t.S=!0,vk(t,null)}function vk(t,e){t.G=Date.now(),dh(t),t.B=Gi(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Ck(n.i,"t",r),t.o=0,n=t.l.J,t.h=new yk,t.g=Kk(t.l,n?e:null,!t.u),0<t.O&&(t.M=new IF(xn(t.Pa,t,t.g),t.O)),uk(t.U,t.g,"readystatechange",t.nb),e=t.I?ek(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Eu(),AF(t.j,t.v,t.B,t.m,t.W,t.u)}ne.nb=function(t){t=t.target;const e=this.M;e&&ri(t)==3?e.l():this.Pa(t)};ne.Pa=function(t){try{if(t==this.g)e:{const u=ri(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||r_||this.g&&(this.h.h||this.g.ja()||kT(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Eu(3):Eu(2)),Kp(this);var n=this.g.da();this.ca=n;t:if(bk(this)){var r=kT(this.g);t="";var i=r.length,s=ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){So(this),Vc(this);var o="";break t}this.h.i=new ke.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,CF(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gu(a)){var c=a;break t}}c=null}if(n=c)Pa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,h_(this,n);else{this.i=!1,this.s=3,Un(12),So(this),Vc(this);break e}}this.S?(Ek(this,u,o),r_&&this.i&&u==3&&(uk(this.U,this.V,"tick",this.mb),this.V.start())):(Pa(this.j,this.m,o,null),h_(this,o)),u==4&&So(this),this.i&&!this.J&&(u==4?jk(this.l,this):(this.i=!1,dh(this)))}else QF(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Un(12)):(this.s=0,Un(13)),So(this),Vc(this)}}}catch{}finally{}};function bk(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Ek(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=NF(t,n),i==c_){e==4&&(t.s=4,Un(14),r=!1),Pa(t.j,t.m,null,"[Incomplete Response]");break}else if(i==_k){t.s=4,Un(15),Pa(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Pa(t.j,t.m,i,null),h_(t,i);bk(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Un(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),K1(e),e.M=!0,Un(11))):(Pa(t.j,t.m,n,"[Invalid Chunked Response]"),So(t),Vc(t))}ne.mb=function(){if(this.g){var t=ri(this.g),e=this.g.ja();this.o<e.length&&(Kp(this),Ek(this,t,e),this.i&&t!=4&&dh(this))}};function NF(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?c_:(n=Number(e.substring(n,r)),isNaN(n)?_k:(r+=1,r+n>e.length?c_:(e=e.slice(r,r+n),t.o=r+n,e)))}ne.cancel=function(){this.J=!0,So(this)};function dh(t){t.Y=Date.now()+t.P,Tk(t,t.P)}function Tk(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ch(xn(t.lb,t),e)}function Kp(t){t.C&&(ke.clearTimeout(t.C),t.C=null)}ne.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(RF(this.j,this.B),this.L!=2&&(Eu(),Un(17)),So(this),this.s=2,Vc(this)):Tk(this,this.Y-t)};function Vc(t){t.l.H==0||t.J||jk(t.l,t)}function So(t){Kp(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,F1(t.V),hk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function h_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||d_(n.i,t))){if(!t.K&&d_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Sf(n),Zp(n);else break e;q1(n),Un(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=ch(xn(n.ib,n),6e3));if(1>=Ok(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Io(n,11)}else if((t.K||n.g==t)&&Sf(n),!gu(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(r=1.5*d,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(z1(s,s.h),s.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,Et(r.I,r.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=qk(r,r.J?r.pa:null,r.Y),o.K){Nk(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Kp(a),dh(a)),r.g=o}else Hk(r);0<n.j.length&&em(n)}else c[0]!="stop"&&c[0]!="close"||Io(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Io(n,7):G1(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Eu(4)}catch{}}function MF(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Bp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function PF(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Bp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function wk(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Bp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=PF(t),r=MF(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Sk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xF(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Bo(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Bo){this.h=t.h,Tf(this,t.j),this.s=t.s,this.g=t.g,wf(this,t.m),this.l=t.l;var e=t.i,n=new Tu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),AT(this,n),this.o=t.o}else t&&(e=String(t).match(Sk))?(this.h=!1,Tf(this,e[1]||"",!0),this.s=pc(e[2]||""),this.g=pc(e[3]||"",!0),wf(this,e[4]),this.l=pc(e[5]||"",!0),AT(this,e[6]||"",!0),this.o=pc(e[7]||"")):(this.h=!1,this.i=new Tu(null,this.h))}Bo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(mc(e,CT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(mc(e,CT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(mc(n,n.charAt(0)=="/"?VF:LF,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",mc(n,BF)),t.join("")};function Gi(t){return new Bo(t)}function Tf(t,e,n){t.j=n?pc(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function AT(t,e,n){e instanceof Tu?(t.i=e,UF(t.i,t.h)):(n||(e=mc(e,FF)),t.i=new Tu(e,t.h))}function Et(t,e,n){t.i.set(e,n)}function Yp(t){return Et(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function pc(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function mc(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,DF),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function DF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var CT=/[#\/\?@]/g,LF=/[#\?:]/g,VF=/[#\?]/g,FF=/[#\?@]/g,BF=/#/g;function Tu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xs(t){t.g||(t.g=new Map,t.h=0,t.i&&xF(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ne=Tu.prototype;ne.add=function(t,e){Xs(this),this.i=null,t=jl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Ik(t,e){Xs(t),e=jl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ak(t,e){return Xs(t),e=jl(t,e),t.g.has(e)}ne.forEach=function(t,e){Xs(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ne.ta=function(){Xs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};ne.Z=function(t){Xs(this);let e=[];if(typeof t=="string")Ak(this,t)&&(e=e.concat(this.g.get(jl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ne.set=function(t,e){return Xs(this),this.i=null,t=jl(this,t),Ak(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ne.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Ck(t,e,n){Ik(t,e),0<n.length&&(t.i=null,t.g.set(jl(t,e),k1(n)),t.h+=n.length)}ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function jl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function UF(t,e){e&&!t.j&&(Xs(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Ik(this,r),Ck(this,i,n))},t)),t.j=e}var $F=class{constructor(t,e){this.g=t,this.map=e}};function Rk(t){this.l=t||HF,ke.PerformanceNavigationTiming?(t=ke.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ke.g&&ke.g.Ka&&ke.g.Ka()&&ke.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var HF=10;function kk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Ok(t){return t.h?1:t.g?t.g.size:0}function d_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function z1(t,e){t.g?t.g.add(e):t.h=e}function Nk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Rk.prototype.cancel=function(){if(this.i=Mk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Mk(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return k1(t.i)}var zF=class{stringify(t){return ke.JSON.stringify(t,void 0)}parse(t){return ke.JSON.parse(t,void 0)}};function jF(){this.g=new zF}function WF(t,e,n){const r=n||"";try{wk(t,function(i,s){let o=i;ah(i)&&(o=L1(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function GF(t,e){const n=new jp;if(ke.Image){const r=new Image;r.onload=Jh(Xh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Jh(Xh,n,r,"TestLoadImage: error",!1,e),r.onabort=Jh(Xh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jh(Xh,n,r,"TestLoadImage: timeout",!1,e),ke.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Xh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Jp(t){this.l=t.ec||null,this.j=t.ob||!1}cn(Jp,U1);Jp.prototype.g=function(){return new Qp(this.l,this.j)};Jp.prototype.i=function(t){return function(){return t}}({});function Qp(t,e){an.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=j1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cn(Qp,an);var j1=0;ne=Qp.prototype;ne.open=function(t,e){if(this.readyState!=j1)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,wu(this)};ne.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ke).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fh(this)),this.readyState=j1};ne.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,wu(this)),this.g&&(this.readyState=3,wu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ke.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Pk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ne.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fh(this):wu(this),this.readyState==3&&Pk(this)}};ne.Za=function(t){this.g&&(this.response=this.responseText=t,fh(this))};ne.Ya=function(t){this.g&&(this.response=t,fh(this))};ne.ka=function(){this.g&&fh(this)};function fh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,wu(t)}ne.setRequestHeader=function(t,e){this.v.append(t,e)};ne.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ne.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function wu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Qp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var qF=ke.JSON.parse;function Mt(t){an.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=xk,this.L=this.M=!1}cn(Mt,an);var xk="",KF=/^https?$/i,YF=["POST","PUT"];ne=Mt.prototype;ne.Oa=function(t){this.M=t};ne.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():l_.g(),this.C=this.u?IT(this.u):IT(l_),this.g.onreadystatechange=xn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){RT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ke.FormData&&t instanceof ke.FormData,!(0<=JR(YF,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Vk(this),0<this.B&&((this.L=JF(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xn(this.ua,this)):this.A=B1(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){RT(this,s)}};function JF(t){return fl&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ne.ua=function(){typeof R1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,En(this,"timeout"),this.abort(8))};function RT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Dk(t),Xp(t)}function Dk(t){t.F||(t.F=!0,En(t,"complete"),En(t,"error"))}ne.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,En(this,"complete"),En(this,"abort"),Xp(this))};ne.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xp(this,!0)),Mt.$.N.call(this)};ne.La=function(){this.s||(this.G||this.v||this.l?Lk(this):this.kb())};ne.kb=function(){Lk(this)};function Lk(t){if(t.h&&typeof R1<"u"&&(!t.C[1]||ri(t)!=4||t.da()!=2)){if(t.v&&ri(t)==4)B1(t.La,0,t);else if(En(t,"readystatechange"),ri(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Sk)[1]||null;!i&&ke.self&&ke.self.location&&(i=ke.self.location.protocol.slice(0,-1)),r=!KF.test(i?i.toLowerCase():"")}n=r}if(n)En(t,"complete"),En(t,"success");else{t.m=6;try{var s=2<ri(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Dk(t)}}finally{Xp(t)}}}}function Xp(t,e){if(t.g){Vk(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||En(t,"ready");try{n.onreadystatechange=r}catch{}}}function Vk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ke.clearTimeout(t.A),t.A=null)}ne.isActive=function(){return!!this.g};function ri(t){return t.g?t.g.readyState:0}ne.da=function(){try{return 2<ri(this)?this.g.status:-1}catch{return-1}};ne.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ne.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),qF(e)}};function kT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case xk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function QF(t){const e={};t=(t.g&&2<=ri(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(gu(t[r]))continue;var n=TF(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}mF(e,function(r){return r.join(", ")})}ne.Ia=function(){return this.m};ne.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Fk(t){let e="";return N1(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function W1(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Fk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Et(t,e,n))}function oc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Bk(t){this.Ga=0,this.j=[],this.l=new jp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=oc("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=oc("baseRetryDelayMs",5e3,t),this.hb=oc("retryDelaySeedMs",1e4,t),this.eb=oc("forwardChannelMaxRetries",2,t),this.xa=oc("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Rk(t&&t.concurrentRequestLimit),this.Ja=new jF,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ne=Bk.prototype;ne.ra=8;ne.H=1;function G1(t){if(Uk(t),t.H==3){var e=t.W++,n=Gi(t.I);if(Et(n,"SID",t.K),Et(n,"RID",e),Et(n,"TYPE","terminate"),ph(t,n),e=new hh(t,t.l,e),e.L=2,e.A=Yp(Gi(n)),n=!1,ke.navigator&&ke.navigator.sendBeacon)try{n=ke.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ke.Image&&(new Image().src=e.A,n=!0),n||(e.g=Kk(e.l,null),e.g.ha(e.A)),e.G=Date.now(),dh(e)}Gk(t)}function Zp(t){t.g&&(K1(t),t.g.cancel(),t.g=null)}function Uk(t){Zp(t),t.u&&(ke.clearTimeout(t.u),t.u=null),Sf(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ke.clearTimeout(t.m),t.m=null)}function em(t){if(!kk(t.i)&&!t.m){t.m=!0;var e=t.Na;_u||lk(),vu||(_u(),vu=!0),V1.add(e,t),t.C=0}}function XF(t,e){return Ok(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ch(xn(t.Na,t,e),Wk(t,t.C)),t.C++,!0)}ne.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new hh(this,this.l,t);let s=this.s;if(this.U&&(s?(s=ek(s),tk(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$k(this,i,e),n=Gi(this.I),Et(n,"RID",t),Et(n,"CVER",22),this.F&&Et(n,"X-HTTP-Session-Id",this.F),ph(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Fk(s)))+"&"+e:this.o&&W1(n,this.o,s)),z1(this.i,i),this.bb&&Et(n,"TYPE","init"),this.P?(Et(n,"$req",e),Et(n,"SID","null"),i.aa=!0,u_(i,n,null)):u_(i,n,e),this.H=2}}else this.H==3&&(t?OT(this,t):this.j.length==0||kk(this.i)||OT(this))};function OT(t,e){var n;e?n=e.m:n=t.W++;const r=Gi(t.I);Et(r,"SID",t.K),Et(r,"RID",n),Et(r,"AID",t.V),ph(t,r),t.o&&t.s&&W1(r,t.o,t.s),n=new hh(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=$k(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),z1(t.i,n),u_(n,r,e)}function ph(t,e){t.na&&N1(t.na,function(n,r){Et(e,r,n)}),t.h&&wk({},function(n,r){Et(e,r,n)})}function $k(t,e,n){n=Math.min(t.j.length,n);var r=t.h?xn(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{WF(u,o,"req"+c+"_")}catch{r&&r(u)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Hk(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;_u||lk(),vu||(_u(),vu=!0),V1.add(e,t),t.A=0}}function q1(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ch(xn(t.Ma,t),Wk(t,t.A)),t.A++,!0)}ne.Ma=function(){if(this.u=null,zk(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ch(xn(this.jb,this),t)}};ne.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Un(10),Zp(this),zk(this))};function K1(t){t.B!=null&&(ke.clearTimeout(t.B),t.B=null)}function zk(t){t.g=new hh(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Gi(t.wa);Et(e,"RID","rpc"),Et(e,"SID",t.K),Et(e,"AID",t.V),Et(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Et(e,"TO",t.qa),Et(e,"TYPE","xmlhttp"),ph(t,e),t.o&&t.s&&W1(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Yp(Gi(e)),n.u=null,n.S=!0,vk(n,t)}ne.ib=function(){this.v!=null&&(this.v=null,Zp(this),q1(this),Un(19))};function Sf(t){t.v!=null&&(ke.clearTimeout(t.v),t.v=null)}function jk(t,e){var n=null;if(t.g==e){Sf(t),K1(t),t.g=null;var r=2}else if(d_(t.i,e))n=e.F,Nk(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Wp(),En(r,new pk(r,n)),em(t)}else Hk(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&XF(t,e)||r==2&&q1(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Io(t,5);break;case 4:Io(t,10);break;case 3:Io(t,6);break;default:Io(t,2)}}}function Wk(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Io(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=xn(t.pb,t);n||(n=new Bo("//www.google.com/images/cleardot.gif"),ke.location&&ke.location.protocol=="http"||Tf(n,"https"),Yp(n)),GF(n.toString(),r)}else Un(2);t.H=0,t.h&&t.h.za(e),Gk(t),Uk(t)}ne.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Un(2)):(this.l.info("Failed to ping google.com"),Un(1))};function Gk(t){if(t.H=0,t.ma=[],t.h){const e=Mk(t.i);(e.length!=0||t.j.length!=0)&&(bT(t.ma,e),bT(t.ma,t.j),t.i.i.length=0,k1(t.j),t.j.length=0),t.h.ya()}}function qk(t,e,n){var r=n instanceof Bo?Gi(n):new Bo(n);if(r.g!="")e&&(r.g=e+"."+r.g),wf(r,r.m);else{var i=ke.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Bo(null);r&&Tf(s,r),e&&(s.g=e),i&&wf(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Et(r,n,e),Et(r,"VER",t.ra),ph(t,r),r}function Kk(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Mt(new Jp({ob:n})):new Mt(t.va),e.Oa(t.J),e}ne.isActive=function(){return!!this.h&&this.h.isActive(this)};function Yk(){}ne=Yk.prototype;ne.Ba=function(){};ne.Aa=function(){};ne.za=function(){};ne.ya=function(){};ne.isActive=function(){return!0};ne.Va=function(){};function If(){if(fl&&!(10<=Number(hF)))throw Error("Environmental error: no available transport.")}If.prototype.g=function(t,e){return new dr(t,e)};function dr(t,e){an.call(this),this.g=new Bk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!gu(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gu(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Wl(this)}cn(dr,an);dr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Un(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=qk(t,null,t.Y),em(t)};dr.prototype.close=function(){G1(this.g)};dr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=L1(t),t=n);e.j.push(new $F(e.fb++,t)),e.H==3&&em(e)};dr.prototype.N=function(){this.g.h=null,delete this.j,G1(this.g),delete this.g,dr.$.N.call(this)};function Jk(t){$1.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}cn(Jk,$1);function Qk(){H1.call(this),this.status=1}cn(Qk,H1);function Wl(t){this.g=t}cn(Wl,Yk);Wl.prototype.Ba=function(){En(this.g,"a")};Wl.prototype.Aa=function(t){En(this.g,new Jk(t))};Wl.prototype.za=function(t){En(this.g,new Qk)};Wl.prototype.ya=function(){En(this.g,"b")};function ZF(){this.blockSize=-1}function zr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}cn(zr,ZF);zr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function mg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}zr.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)mg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){mg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){mg(this,r),i=0;break}}this.h=i,this.i+=e};zr.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function at(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var e7={};function Y1(t){return-128<=t&&128>t?lF(t,function(e){return new at([e|0],0>e?-1:0)}):new at([t|0],0>t?-1:0)}function ii(t){if(isNaN(t)||!isFinite(t))return Ja;if(0>t)return mn(ii(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=f_;return new at(e,0)}function Xk(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return mn(Xk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ii(Math.pow(e,8)),r=Ja,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ii(Math.pow(e,s)),r=r.R(s).add(ii(o))):(r=r.R(n),r=r.add(ii(o)))}return r}var f_=4294967296,Ja=Y1(0),p_=Y1(1),NT=Y1(16777216);ne=at.prototype;ne.ea=function(){if(vr(this))return-mn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:f_+r)*e,e*=f_}return t};ne.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Fi(this))return"0";if(vr(this))return"-"+mn(this).toString(t);for(var e=ii(Math.pow(t,6)),n=this,r="";;){var i=Cf(n,e).g;n=Af(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Fi(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};ne.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Fi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function vr(t){return t.h==-1}ne.X=function(t){return t=Af(this,t),vr(t)?-1:Fi(t)?0:1};function mn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new at(n,~t.h).add(p_)}ne.abs=function(){return vr(this)?mn(this):this};ne.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new at(n,n[n.length-1]&-2147483648?-1:0)};function Af(t,e){return t.add(mn(e))}ne.R=function(t){if(Fi(this)||Fi(t))return Ja;if(vr(this))return vr(t)?mn(this).R(mn(t)):mn(mn(this).R(t));if(vr(t))return mn(this.R(mn(t)));if(0>this.X(NT)&&0>t.X(NT))return ii(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Zh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Zh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Zh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Zh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new at(n,0)};function Zh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ac(t,e){this.g=t,this.h=e}function Cf(t,e){if(Fi(e))throw Error("division by zero");if(Fi(t))return new ac(Ja,Ja);if(vr(t))return e=Cf(mn(t),e),new ac(mn(e.g),mn(e.h));if(vr(e))return e=Cf(t,mn(e)),new ac(mn(e.g),e.h);if(30<t.g.length){if(vr(t)||vr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=p_,r=e;0>=r.X(t);)n=MT(n),r=MT(r);var i=va(n,1),s=va(r,1);for(r=va(r,2),n=va(n,2);!Fi(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=va(r,1),n=va(n,1)}return e=Af(t,i.R(e)),new ac(i,e)}for(i=Ja;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ii(n),o=s.R(e);vr(o)||0<o.X(t);)n-=r,s=ii(n),o=s.R(e);Fi(s)&&(s=p_),i=i.add(s),t=Af(t,o)}return new ac(i,t)}ne.gb=function(t){return Cf(this,t).h};ne.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new at(n,this.h&t.h)};ne.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new at(n,this.h|t.h)};ne.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new at(n,this.h^t.h)};function MT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new at(n,t.h)}function va(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new at(i,t.h)}If.prototype.createWebChannel=If.prototype.g;dr.prototype.send=dr.prototype.u;dr.prototype.open=dr.prototype.m;dr.prototype.close=dr.prototype.close;Gp.NO_ERROR=0;Gp.TIMEOUT=8;Gp.HTTP_ERROR=6;mk.COMPLETE="complete";gk.EventType=uh;uh.OPEN="a";uh.CLOSE="b";uh.ERROR="c";uh.MESSAGE="d";an.prototype.listen=an.prototype.O;Mt.prototype.listenOnce=Mt.prototype.P;Mt.prototype.getLastError=Mt.prototype.Sa;Mt.prototype.getLastErrorCode=Mt.prototype.Ia;Mt.prototype.getStatus=Mt.prototype.da;Mt.prototype.getResponseJson=Mt.prototype.Wa;Mt.prototype.getResponseText=Mt.prototype.ja;Mt.prototype.send=Mt.prototype.ha;Mt.prototype.setWithCredentials=Mt.prototype.Oa;zr.prototype.digest=zr.prototype.l;zr.prototype.reset=zr.prototype.reset;zr.prototype.update=zr.prototype.j;at.prototype.add=at.prototype.add;at.prototype.multiply=at.prototype.R;at.prototype.modulo=at.prototype.gb;at.prototype.compare=at.prototype.X;at.prototype.toNumber=at.prototype.ea;at.prototype.toString=at.prototype.toString;at.prototype.getBits=at.prototype.D;at.fromNumber=ii;at.fromString=Xk;var t7=function(){return new If},n7=function(){return Wp()},gg=Gp,r7=mk,i7=pa,PT={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ed=gk,s7=Mt,o7=zr,Qa=at;const xT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new Xu("@firebase/firestore");function lc(){return Zo.logLevel}function ee(t,...e){if(Zo.logLevel<=He.DEBUG){const n=e.map(J1);Zo.debug(`Firestore (${Gl}): ${t}`,...n)}}function _i(t,...e){if(Zo.logLevel<=He.ERROR){const n=e.map(J1);Zo.error(`Firestore (${Gl}): ${t}`,...n)}}function pl(t,...e){if(Zo.logLevel<=He.WARN){const n=e.map(J1);Zo.warn(`Firestore (${Gl}): ${t}`,...n)}}function J1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t="Unexpected state"){const e=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: `+t;throw _i(e),new Error(e)}function gt(t,e){t||Re()}function xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ai{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cn.UNAUTHENTICATED))}shutdown(){}}class l7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class c7{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ui,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ui)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string"),new Zk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string"),new Cn(e)}}class u7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class h7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new u7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class f7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(gt(typeof n.token=="string"),this.R=n.token,new d7(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=p7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function nt(t,e){return t<e?-1:t>e?1:0}function ml(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Me(e)}static min(){return new Me(new $t(0,0))}static max(){return new Me(new $t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n,r){n===void 0?n=0:n>e.length&&Re(),r===void 0?r=e.length-n:r>e.length-n&&Re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Su.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Su?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class At extends Su{construct(e,n,r){return new At(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new At(n)}static emptyPath(){return new At([])}}const m7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends Su{construct(e,n,r){return new bn(e,n,r)}static isValidIdentifier(e){return m7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new he(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new he(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new he(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new he(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bn(n)}static emptyPath(){return new bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(At.fromString(e))}static fromName(e){return new ve(At.fromString(e).popFirst(5))}static empty(){return new ve(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new At(e.slice()))}}function g7(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Me.fromTimestamp(r===1e9?new $t(n+1,0):new $t(n,r));return new Hs(i,ve.empty(),e)}function y7(t){return new Hs(t.readTime,t.key,-1)}class Hs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hs(Me.min(),ve.empty(),-1)}static max(){return new Hs(Me.max(),ve.empty(),-1)}}function _7(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==v7)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ui,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Fc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=X1(r.target.error);this.V.reject(new Fc(e,i))}}static open(e,n,r,i){try{return new Q1(n,e.transaction(i,r))}catch(s){throw new Fc(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new T7(n)}}class Ao{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Ao.S(Ht())===12.2&&_i("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),_o(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Wv())return!1;if(Ao.C())return!0;const e=Ht(),n=Ao.S(e),r=0<n&&n<10,i=Ao.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(ee("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Fc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new he(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new he(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Fc(e,o))},i.onupgradeneeded=s=>{ee("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{ee("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=Q1.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ee("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class E7{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return _o(this.k.delete())}}class Fc extends he{constructor(e,n){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function gh(t){return t.name==="IndexedDbTransactionError"}class T7{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ee("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_o(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),_o(this.store.add(e))}get(e){return _o(this.store.get(e)).next(n=>(n===void 0&&(n=null),ee("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),_o(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),_o(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=X1(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new E7(a),c=n(a.primaryKey,a.value,l);if(c instanceof L){const u=c.catch(h=>(l.done(),L.reject(h)));r.push(u)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function _o(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=X1(r.target.error);n(i)}})}let DT=!1;function X1(t){const e=Ao.S(Ht());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DT||(DT=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Z1._e=-1;function tm(t){return t==null}function Rf(t){return t===0&&1/t==-1/0}function w7(t){return typeof t=="number"&&Number.isInteger(t)&&!Rf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ma(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function t2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new td(this.root,e,this.comparator,!1)}getReverseIterator(){return new td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new td(this.root,e,this.comparator,!0)}}class td{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??pn.RED,this.left=i??pn.EMPTY,this.right=s??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new pn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return pn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,n,r,i,s){return this}insert(e,n,r){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VT(this.data.getIterator())}getIteratorFrom(e){return new VT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tn(this.comparator);return n.data=e,n}}class VT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.fields=e,e.sort(bn.comparator)}static empty(){return new ar([])}unionWith(e){let n=new Tn(bn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ml(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new n2("Invalid base64 string: "+s):s}}(e);return new Ln(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ln(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ln.EMPTY_BYTE_STRING=new Ln("");const S7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(t){if(gt(!!t),typeof t=="string"){let e=0;const n=S7.exec(t);if(gt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ft(t.seconds),nanos:Ft(t.nanos)}}function Ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ea(t){return typeof t=="string"?Ln.fromBase64String(t):Ln.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function t0(t){const e=t.mapValue.fields.__previous_value__;return e0(e)?t0(e):e}function Iu(t){const e=zs(t.mapValue.fields.__local_write_time__.timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Au{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ta(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?e0(t)?4:A7(t)?9007199254740991:10:Re()}function vi(t,e){if(t===e)return!0;const n=ta(t);if(n!==ta(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Iu(t).isEqual(Iu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=zs(i.timestampValue),a=zs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ea(i.bytesValue).isEqual(ea(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ft(i.geoPointValue.latitude)===Ft(s.geoPointValue.latitude)&&Ft(i.geoPointValue.longitude)===Ft(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ft(i.integerValue)===Ft(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ft(i.doubleValue),a=Ft(s.doubleValue);return o===a?Rf(o)===Rf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ml(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(LT(o)!==LT(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vi(o[l],a[l])))return!1;return!0}(t,e);default:return Re()}}function Cu(t,e){return(t.values||[]).find(n=>vi(n,e))!==void 0}function gl(t,e){if(t===e)return 0;const n=ta(t),r=ta(e);if(n!==r)return nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ft(s.integerValue||s.doubleValue),l=Ft(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return FT(t.timestampValue,e.timestampValue);case 4:return FT(Iu(t),Iu(e));case 5:return nt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ea(s),l=ea(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=nt(a[c],l[c]);if(u!==0)return u}return nt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=nt(Ft(s.latitude),Ft(o.latitude));return a!==0?a:nt(Ft(s.longitude),Ft(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=gl(a[c],l[c]);if(u)return u}return nt(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===nd.mapValue&&o===nd.mapValue)return 0;if(s===nd.mapValue)return 1;if(o===nd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=nt(l[h],u[h]);if(d!==0)return d;const f=gl(a[l[h]],c[u[h]]);if(f!==0)return f}return nt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Re()}}function FT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const n=zs(t),r=zs(e),i=nt(n.seconds,r.seconds);return i!==0?i:nt(n.nanos,r.nanos)}function yl(t){return m_(t)}function m_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ea(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=m_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${m_(n.fields[o])}`;return i+"}"}(t.mapValue):Re()}function g_(t){return!!t&&"integerValue"in t}function n0(t){return!!t&&"arrayValue"in t}function BT(t){return!!t&&"nullValue"in t}function UT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Md(t){return!!t&&"mapValue"in t}function Bc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ma(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function A7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.value=e}static empty(){return new Yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Md(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bc(n)}setAll(e){let n=bn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Bc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Md(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Md(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ma(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Yn(Bc(this.value))}}function r2(t){const e=[];return ma(t.fields,(n,r)=>{const i=new bn([n]);if(Md(r)){const s=r2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new On(e,0,Me.min(),Me.min(),Me.min(),Yn.empty(),0)}static newFoundDocument(e,n,r,i){return new On(e,1,n,Me.min(),r,i,0)}static newNoDocument(e,n){return new On(e,2,n,Me.min(),Me.min(),Yn.empty(),0)}static newUnknownDocument(e,n){return new On(e,3,n,Me.min(),Me.min(),Yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){this.position=e,this.inclusive=n}}function $T(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ve.comparator(ve.fromName(o.referenceValue),n.key):r=gl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function HT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n="asc"){this.field=e,this.dir=n}}function C7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{}class jt extends i2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new k7(e,n,r):n==="array-contains"?new M7(e,r):n==="in"?new P7(e,r):n==="not-in"?new x7(e,r):n==="array-contains-any"?new D7(e,r):new jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O7(e,r):new N7(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(gl(n,this.value)):n!==null&&ta(this.value)===ta(n)&&this.matchesComparison(gl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bi extends i2{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new bi(e,n)}matches(e){return s2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function s2(t){return t.op==="and"}function o2(t){return R7(t)&&s2(t)}function R7(t){for(const e of t.filters)if(e instanceof bi)return!1;return!0}function y_(t){if(t instanceof jt)return t.field.canonicalString()+t.op.toString()+yl(t.value);if(o2(t))return t.filters.map(e=>y_(e)).join(",");{const e=t.filters.map(n=>y_(n)).join(",");return`${t.op}(${e})`}}function a2(t,e){return t instanceof jt?function(r,i){return i instanceof jt&&r.op===i.op&&r.field.isEqual(i.field)&&vi(r.value,i.value)}(t,e):t instanceof bi?function(r,i){return i instanceof bi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&a2(o,i.filters[a]),!0):!1}(t,e):void Re()}function l2(t){return t instanceof jt?function(n){return`${n.field.canonicalString()} ${n.op} ${yl(n.value)}`}(t):t instanceof bi?function(n){return n.op.toString()+" {"+n.getFilters().map(l2).join(" ,")+"}"}(t):"Filter"}class k7 extends jt{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class O7 extends jt{constructor(e,n){super(e,"in",n),this.keys=c2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class N7 extends jt{constructor(e,n){super(e,"not-in",n),this.keys=c2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function c2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ve.fromName(r.referenceValue))}class M7 extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return n0(n)&&Cu(n.arrayValue,this.value)}}class P7 extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cu(this.value.arrayValue,n)}}class x7 extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Cu(this.value.arrayValue,n)}}class D7 extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!n0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Cu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function zT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new L7(t,e,n,r,i,s,o)}function r0(t){const e=xe(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>y_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),tm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yl(r)).join(",")),e.ce=n}return e.ce}function i0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!C7(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!a2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HT(t.startAt,e.startAt)&&HT(t.endAt,e.endAt)}function __(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function V7(t,e,n,r,i,s,o,a){return new nm(t,e,n,r,i,s,o,a)}function rm(t){return new nm(t)}function jT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function F7(t){return t.collectionGroup!==null}function Uc(t){const e=xe(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Tn(bn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Of(s,r))}),n.has(bn.keyField().canonicalString())||e.le.push(new Of(bn.keyField(),r))}return e.le}function hi(t){const e=xe(t);return e.he||(e.he=B7(e,Uc(t))),e.he}function B7(t,e){if(t.limitType==="F")return zT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Of(i.field,s)});const n=t.endAt?new kf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kf(t.startAt.position,t.startAt.inclusive):null;return zT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function v_(t,e,n){return new nm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function im(t,e){return i0(hi(t),hi(e))&&t.limitType===e.limitType}function u2(t){return`${r0(hi(t))}|lt:${t.limitType}`}function Sa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>l2(i)).join(", ")}]`),tm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yl(i)).join(",")),`Target(${r})`}(hi(t))}; limitType=${t.limitType})`}function sm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ve.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Uc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=$T(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Uc(r),i)||r.endAt&&!function(o,a,l){const c=$T(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Uc(r),i))}(t,e)}function U7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function h2(t){return(e,n)=>{let r=!1;for(const i of Uc(t)){const s=$7(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $7(t,e,n){const r=t.field.isKeyField()?ve.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?gl(l,c):Re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ma(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return t2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=new Rt(ve.comparator);function qi(){return H7}const d2=new Rt(ve.comparator);function gc(...t){let e=d2;for(const n of t)e=e.insert(n.key,n);return e}function f2(t){let e=d2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Co(){return $c()}function p2(){return $c()}function $c(){return new ql(t=>t.toString(),(t,e)=>t.isEqual(e))}const z7=new Rt(ve.comparator),j7=new Tn(ve.comparator);function je(...t){let e=j7;for(const n of t)e=e.add(n);return e}const W7=new Tn(nt);function G7(){return W7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rf(e)?"-0":e}}function g2(t){return{integerValue:""+t}}function q7(t,e){return w7(e)?g2(e):m2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(){this._=void 0}}function K7(t,e,n){return t instanceof Nf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&e0(s)&&(s=t0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof _l?_2(t,e):t instanceof Ru?v2(t,e):function(i,s){const o=y2(i,s),a=WT(o)+WT(i.Ie);return g_(o)&&g_(i.Ie)?g2(a):m2(i.serializer,a)}(t,e)}function Y7(t,e,n){return t instanceof _l?_2(t,e):t instanceof Ru?v2(t,e):n}function y2(t,e){return t instanceof Mf?function(r){return g_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Nf extends om{}class _l extends om{constructor(e){super(),this.elements=e}}function _2(t,e){const n=b2(e);for(const r of t.elements)n.some(i=>vi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ru extends om{constructor(e){super(),this.elements=e}}function v2(t,e){let n=b2(e);for(const r of t.elements)n=n.filter(i=>!vi(i,r));return{arrayValue:{values:n}}}class Mf extends om{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function WT(t){return Ft(t.integerValue||t.doubleValue)}function b2(t){return n0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e,n){this.field=e,this.transform=n}}function Q7(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof _l&&i instanceof _l||r instanceof Ru&&i instanceof Ru?ml(r.elements,i.elements,vi):r instanceof Mf&&i instanceof Mf?vi(r.Ie,i.Ie):r instanceof Nf&&i instanceof Nf}(t.transform,e.transform)}class X7{constructor(e,n){this.version=e,this.transformResults=n}}class ur{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class am{}function E2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new s0(t.key,ur.none()):new yh(t.key,t.data,ur.none());{const n=t.data,r=Yn.empty();let i=new Tn(bn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zs(t.key,r,new ar(i.toArray()),ur.none())}}function Z7(t,e,n){t instanceof yh?function(i,s,o){const a=i.value.clone(),l=qT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zs?function(i,s,o){if(!Pd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=qT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(T2(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hc(t,e,n,r){return t instanceof yh?function(s,o,a,l){if(!Pd(s.precondition,o))return a;const c=s.value.clone(),u=KT(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zs?function(s,o,a,l){if(!Pd(s.precondition,o))return a;const c=KT(s.fieldTransforms,l,o),u=o.data;return u.setAll(T2(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Pd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function eB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=y2(r.transform,i||null);s!=null&&(n===null&&(n=Yn.empty()),n.set(r.field,s))}return n||null}function GT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ml(r,i,(s,o)=>Q7(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yh extends am{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zs extends am{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function T2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qT(t,e,n){const r=new Map;gt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Y7(o,a,n[i]))}return r}function KT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,K7(s,o,e))}return r}class s0 extends am{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tB extends am{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Z7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=p2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=E2(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&ml(this.mutations,e.mutations,(n,r)=>GT(n,r))&&ml(this.baseMutations,e.baseMutations,(n,r)=>GT(n,r))}}class o0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){gt(e.mutations.length===r.length);let i=function(){return z7}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new o0(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Ke;function sB(t){switch(t){default:return Re();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function w2(t){if(t===void 0)return _i("GRPC error has no .code"),V.UNKNOWN;switch(t){case Lt.OK:return V.OK;case Lt.CANCELLED:return V.CANCELLED;case Lt.UNKNOWN:return V.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return V.INTERNAL;case Lt.UNAVAILABLE:return V.UNAVAILABLE;case Lt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Lt.NOT_FOUND:return V.NOT_FOUND;case Lt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Lt.ABORTED:return V.ABORTED;case Lt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Lt.DATA_LOSS:return V.DATA_LOSS;default:return Re()}}(Ke=Lt||(Lt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=new Qa([4294967295,4294967295],0);function YT(t){const e=oB().encode(t),n=new o7;return n.update(e),new Uint8Array(n.digest())}function JT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qa([n,r],0),new Qa([i,s],0)]}class a0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yc(`Invalid padding: ${n}`);if(r<0)throw new yc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Qa.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Qa.fromNumber(r)));return i.compare(aB)===1&&(i=new Qa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=YT(e),[r,i]=JT(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new a0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=YT(e),[r,i]=JT(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,_h.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lm(Me.min(),i,new Rt(nt),qi(),je())}}class _h{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _h(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class S2{constructor(e,n){this.targetId=e,this.fe=n}}class I2{constructor(e,n,r=Ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class QT{constructor(){this.ge=0,this.pe=ZT(),this.ye=Ln.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=je(),n=je(),r=je();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Re()}}),new _h(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=ZT()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,gt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class lB{constructor(e){this.Be=e,this.ke=new Map,this.qe=qi(),this.Qe=XT(),this.Ke=new Rt(nt)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:Re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(__(s))if(r===0){const o=new ve(s.path);this.We(n,o,On.newNoDocument(o,Me.min()))}else gt(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ea(r).toUint8Array()}catch(l){if(l instanceof n2)return pl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new a0(o,i,s)}catch(l){return pl(l instanceof yc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&__(a.target)){const l=new ve(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,On.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=je();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new lm(e,n,this.Ke,this.qe,r);return this.qe=qi(),this.Qe=XT(),this.Ke=new Rt(nt),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new QT,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Tn(nt),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new QT),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function XT(){return new Rt(ve.comparator)}function ZT(){return new Rt(ve.comparator)}const cB={asc:"ASCENDING",desc:"DESCENDING"},uB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hB={and:"AND",or:"OR"};class dB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function b_(t,e){return t.useProto3Json||tm(e)?e:{value:e}}function Pf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fB(t,e){return Pf(t,e.toTimestamp())}function di(t){return gt(!!t),Me.fromTimestamp(function(n){const r=zs(n);return new $t(r.seconds,r.nanos)}(t))}function l0(t,e){return E_(t,e).canonicalString()}function E_(t,e){const n=function(i){return new At(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function C2(t){const e=At.fromString(t);return gt(M2(e)),e}function T_(t,e){return l0(t.databaseId,e.path)}function yg(t,e){const n=C2(e);if(n.get(1)!==t.databaseId.projectId)throw new he(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(k2(n))}function R2(t,e){return l0(t.databaseId,e)}function pB(t){const e=C2(t);return e.length===4?At.emptyPath():k2(e)}function w_(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function k2(t){return gt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ew(t,e,n){return{name:T_(t,e),fields:n.value.mapValue.fields}}function mB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(gt(u===void 0||typeof u=="string"),Ln.fromBase64String(u||"")):(gt(u===void 0||u instanceof Uint8Array),Ln.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?V.UNKNOWN:w2(c.code);return new he(u,c.message||"")}(o);n=new I2(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yg(t,r.document.name),s=di(r.document.updateTime),o=r.document.createTime?di(r.document.createTime):Me.min(),a=new Yn({mapValue:{fields:r.document.fields}}),l=On.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new xd(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yg(t,r.document),s=r.readTime?di(r.readTime):Me.min(),o=On.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yg(t,r.document),s=r.removedTargetIds||[];n=new xd([],s,i,null)}else{if(!("filter"in e))return Re();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new iB(i,s),a=r.targetId;n=new S2(a,o)}}return n}function gB(t,e){let n;if(e instanceof yh)n={update:ew(t,e.key,e.value)};else if(e instanceof s0)n={delete:T_(t,e.key)};else if(e instanceof Zs)n={update:ew(t,e.key,e.data),updateMask:IB(e.fieldMask)};else{if(!(e instanceof tB))return Re();n={verify:T_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Nf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _l)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ru)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:fB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Re()}(t,e.precondition)),n}function yB(t,e){return t&&t.length>0?(gt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?di(i.updateTime):di(s);return o.isEqual(Me.min())&&(o=di(s)),new X7(o,i.transformResults||[])}(n,e))):[]}function _B(t,e){return{documents:[R2(t,e.path)]}}function vB(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=R2(t,i);const s=function(c){if(c.length!==0)return N2(bi.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(d){return{field:Ia(d.field),direction:TB(d.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=b_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function bB(t){let e=pB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){gt(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const d=O2(h);return d instanceof bi&&o2(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(p){return new Of(Aa(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,tm(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new kf(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new kf(f,d)}(n.endAt)),V7(e,i,o,s,a,"F",l,c)}function EB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function O2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Aa(n.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Aa(n.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Aa(n.unaryFilter.field);return jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Aa(n.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(t):t.fieldFilter!==void 0?function(n){return jt.create(Aa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bi.create(n.compositeFilter.filters.map(r=>O2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Re()}}(n.compositeFilter.op))}(t):Re()}function TB(t){return cB[t]}function wB(t){return uB[t]}function SB(t){return hB[t]}function Ia(t){return{fieldPath:t.canonicalString()}}function Aa(t){return bn.fromServerFormat(t.fieldPath)}function N2(t){return t instanceof jt?function(n){if(n.op==="=="){if(UT(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NAN"}};if(BT(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(UT(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NOT_NAN"}};if(BT(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ia(n.field),op:wB(n.op),value:n.value}}}(t):t instanceof bi?function(n){const r=n.getFilters().map(i=>N2(i));return r.length===1?r[0]:{compositeFilter:{op:SB(n.op),filters:r}}}(t):Re()}function IB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function M2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n,r,i,s=Me.min(),o=Me.min(),a=Ln.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e){this.ct=e}}function CB(t){const e=bB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?v_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(){this._n=new kB}addToCollectionParentIndex(e,n){return this._n.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Hs.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class kB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tn(At.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(At.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new vl(0)}static Ln(){return new vl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(){this.changes=new ql(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Hc(r.mutation,i,ar.empty(),$t.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const i=Co();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Co();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qi();const o=$c(),a=function(){return $c()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Zs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Hc(u.mutation,c,u.mutation.getFieldMask(),$t.now())):o.set(c.key,ar.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new NB(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=$c();let i=new Rt((o,a)=>o-a),s=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||ar.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||je()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=p2();u.forEach(d=>{if(!s.has(d)){const f=E2(n.get(d),r.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):F7(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(Co());let a=-1,l=s;return o.next(c=>L.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?L.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,je())).next(u=>({batchId:a,changes:f2(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(r=>{let i=gc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=gc();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const c=function(h,d){return new nm(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,On.newInvalidDocument(u)))});let a=gc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Hc(u.mutation,c,ar.empty(),$t.now()),sm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return L.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:di(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:CB(i.bundledQuery),readTime:di(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(){this.overlays=new Rt(ve.comparator),this.hr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Co();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=Co(),s=n.length+1,o=new ve(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Rt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Co(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Co(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return L.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rB(n,r));let s=this.hr.get(n);s===void 0&&(s=je(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.Pr=new Tn(Xt.Ir),this.Tr=new Tn(Xt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Xt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Xt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ve(new At([])),r=new Xt(n,e),i=new Xt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ve(new At([])),r=new Xt(n,e),i=new Xt(n,e+1);let s=je();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Xt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ve.comparator(e.key,n.key)||nt(e.pr,n.pr)}static Er(e,n){return nt(e.pr,n.pr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Tn(Xt.Ir)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nB(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xt(n,0),i=new Xt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tn(nt);return n.forEach(i=>{const s=new Xt(i,0),o=new Xt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),L.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ve.isDocumentKey(s)||(s=s.child(""));const o=new Xt(new ve(s),0);let a=new Tn(nt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),L.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){gt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return L.forEach(n.mutations,i=>{const s=new Xt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Xt(n,0),i=this.wr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e){this.vr=e,this.docs=function(){return new Rt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let r=qi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():On.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qi();const o=n.path,a=new ve(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||_7(y7(u),r)<=0||(i.has(u.key)||sm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Re()}Fr(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VB(this)}getSize(e){return L.resolve(this.size)}}class VB extends OB{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e){this.persistence=e,this.Mr=new ql(n=>r0(n),i0),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.Or=0,this.Nr=new c0,this.targetCount=0,this.Lr=vl.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),L.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new vl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.qn(n),L.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e,n){this.Br={},this.overlays={},this.kr=new Z1(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new FB(this),this.indexManager=new RB,this.remoteDocumentCache=function(i){return new LB(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new AB(n),this.$r=new PB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new DB(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new UB(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return L.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class UB extends b7{constructor(e){super(),this.currentSequenceNumber=e}}class u0{constructor(e){this.persistence=e,this.zr=new c0,this.jr=null}static Hr(e){return new u0(e)}get Jr(){if(this.jr)return this.jr;throw Re()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),L.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Jr,r=>{const i=ve.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Me.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return L.or([()=>L.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=je(),i=je();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new h0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return g4()?8:Ao.v(Ht())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $B;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(lc()<=He.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),L.resolve()):(lc()<=He.DEBUG&&ee("QueryEngine","Query:",Sa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(lc()<=He.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(n))):L.resolve())}ji(e,n){if(jT(n))return L.resolve(null);let r=hi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=v_(n,null,"F"),r=hi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=je(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,v_(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,i){return jT(n)||i.isEqual(Me.min())?L.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?L.resolve(null):(lc()<=He.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sa(n)),this.es(e,o,n,g7(i,-1)).next(a=>a))})}Zi(e,n){let r=new Tn(h2(e));return n.forEach((i,s)=>{sm(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return lc()<=He.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Sa(n)),this.zi.getDocumentsMatchingQuery(e,n,Hs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Rt(nt),this.rs=new ql(s=>r0(s),i0),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MB(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function jB(t,e,n,r){return new zB(t,e,n,r)}async function P2(t,e){const n=xe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=je();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function WB(t,e){const n=xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=L.resolve();return d.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(m=>{const g=c.docVersions.get(p);gt(g!==null),m.version.compareTo(g)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=je();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function x2(t){const e=xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function GB(t,e){const n=xe(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Ln.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(h,f),function(m,g,_){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(d,f,u)&&a.push(n.Qr.updateTargetData(s,f))});let l=qi(),c=je();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(qB(s,o,e.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!r.isEqual(Me.min())){const u=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.ns=i,s))}function qB(t,e,n){let r=je(),i=je();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function KB(t,e){const n=xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YB(t,e){const n=xe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ss(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function S_(t,e,n){const r=xe(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!gh(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function tw(t,e,n){const r=xe(t);let i=Me.min(),s=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=xe(l),d=h.rs.get(u);return d!==void 0?L.resolve(h.ns.get(d)):h.Qr.getTargetData(c,u)}(r,o,hi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:Me.min(),n?s:je())).next(a=>(JB(r,U7(e),a),{documents:a,hs:s})))}function JB(t,e,n){let r=t.ss.get(e)||Me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}class nw{constructor(){this.activeTargetIds=G7()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QB{constructor(){this.no=new nw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new nw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd=null;function _g(){return rd===null?rd=function(){return 268435456+Math.round(2147483648*Math.random())}():rd++,"0x"+rd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class t8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){const a=_g(),l=this.bo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(n,l,c,i).then(u=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw pl("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){const i=ZB[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const s=_g();return new Promise((o,a)=>{const l=new s7;l.setWithCredentials(!0),l.listenOnce(r7.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gg.NO_ERROR:const u=l.getResponseJson();ee(wn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case gg.TIMEOUT:ee(wn,`RPC '${e}' ${s} timed out`),a(new he(V.DEADLINE_EXCEEDED,"Request time out"));break;case gg.HTTP_ERROR:const h=l.getStatus();if(ee(wn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const p=function(g){const _=g.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(_)>=0?_:V.UNKNOWN}(f.status);a(new he(p,f.message))}else a(new he(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new he(V.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{ee(wn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(wn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const i=_g(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=t7(),a=n7(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ee(wn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const p=new e8({lo:g=>{f?ee(wn,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(d||(ee(wn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),ee(wn,`RPC '${e}' stream ${i} sending:`,g),h.send(g))},ho:()=>h.close()}),m=(g,_,v)=>{g.listen(_,T=>{try{v(T)}catch(I){setTimeout(()=>{throw I},0)}})};return m(h,ed.EventType.OPEN,()=>{f||ee(wn,`RPC '${e}' stream ${i} transport opened.`)}),m(h,ed.EventType.CLOSE,()=>{f||(f=!0,ee(wn,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(h,ed.EventType.ERROR,g=>{f||(f=!0,pl(wn,`RPC '${e}' stream ${i} transport errored:`,g),p.Vo(new he(V.UNAVAILABLE,"The operation could not be completed")))}),m(h,ed.EventType.MESSAGE,g=>{var _;if(!f){const v=g.data[0];gt(!!v);const T=v,I=T.error||((_=T[0])===null||_===void 0?void 0:_.error);if(I){ee(wn,`RPC '${e}' stream ${i} received error:`,I);const A=I.status;let w=function(k){const U=Lt[k];if(U!==void 0)return w2(U)}(A),O=I.message;w===void 0&&(w=V.INTERNAL,O="Unknown error status: "+A+" with message "+I.message),f=!0,p.Vo(new he(w,O)),h.close()}else ee(wn,`RPC '${e}' stream ${i} received:`,v),p.mo(v)}}),m(a,i7.STAT_EVENT,g=>{g.stat===PT.PROXY?ee(wn,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===PT.NOPROXY&&ee(wn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function vg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){return new dB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new D2(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(_i(n.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new he(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n8 extends L2{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=mB(this.serializer,e),r=function(s){if(!("targetChange"in s))return Me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?di(o.readTime):Me.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=w_(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=__(l)?{documents:_B(s,l)}:{query:vB(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=A2(s,o.resumeToken);const c=b_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Me.min())>0){a.readTime=Pf(s,o.snapshotVersion.toTimestamp());const c=b_(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=EB(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=w_(this.serializer),n.removeTarget=e,this.t_(n)}}class r8 extends L2{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=yB(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.T_(r,n)}return gt(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=w_(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gB(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new he(V.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,E_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(V.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,E_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(V.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class s8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(_i(n),this.g_=!1):ee("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(async()=>{ga(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=xe(l);c.v_.add(4),await vh(c),c.x_.set("Unknown"),c.v_.delete(4),await um(c)}(this))})}),this.x_=new s8(r,i)}}async function um(t){if(ga(t))for(const e of t.F_)await e(!0)}async function vh(t){for(const e of t.F_)await e(!1)}function V2(t,e){const n=xe(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),m0(n)?p0(n):Kl(n).Jo()&&f0(n,e))}function d0(t,e){const n=xe(t),r=Kl(n);n.C_.delete(e),r.Jo()&&F2(n,e),n.C_.size===0&&(r.Jo()?r.Xo():ga(n)&&n.x_.set("Unknown"))}function f0(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kl(t).c_(e)}function F2(t,e){t.O_.Oe(e),Kl(t).l_(e)}function p0(t){t.O_=new lB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Kl(t).start(),t.x_.p_()}function m0(t){return ga(t)&&!Kl(t).Ho()&&t.C_.size>0}function ga(t){return xe(t).v_.size===0}function B2(t){t.O_=void 0}async function a8(t){t.C_.forEach((e,n)=>{f0(t,e)})}async function l8(t,e){B2(t),m0(t)?(t.x_.S_(e),p0(t)):t.x_.set("Unknown")}async function c8(t,e,n){if(t.x_.set("Online"),e instanceof I2&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xf(t,r)}else if(e instanceof xd?t.O_.$e(e):e instanceof S2?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Me.min()))try{const r=await x2(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.C_.get(c);u&&s.C_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.C_.get(l);if(!u)return;s.C_.set(l,u.withResumeToken(Ln.EMPTY_BYTE_STRING,u.snapshotVersion)),F2(s,l);const h=new Ss(u.target,l,c,u.sequenceNumber);f0(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await xf(t,r)}}async function xf(t,e,n){if(!gh(e))throw e;t.v_.add(1),await vh(t),t.x_.set("Offline"),n||(n=()=>x2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await um(t)})}function U2(t,e){return e().catch(n=>xf(t,n,e))}async function hm(t){const e=xe(t),n=js(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;u8(e);)try{const i=await KB(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,h8(e,i)}catch(i){await xf(e,i)}$2(e)&&H2(e)}function u8(t){return ga(t)&&t.D_.length<10}function h8(t,e){t.D_.push(e);const n=js(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function $2(t){return ga(t)&&!js(t).Ho()&&t.D_.length>0}function H2(t){js(t).start()}async function d8(t){js(t).d_()}async function f8(t){const e=js(t);for(const n of t.D_)e.I_(n.mutations)}async function p8(t,e,n){const r=t.D_.shift(),i=o0.from(r,e,n);await U2(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hm(t)}async function m8(t,e){e&&js(t).P_&&await async function(r,i){if(function(o){return sB(o)&&o!==V.ABORTED}(i.code)){const s=r.D_.shift();js(r).Zo(),await U2(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await hm(r)}}(t,e),$2(t)&&H2(t)}async function iw(t,e){const n=xe(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ga(n);n.v_.add(3),await vh(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await um(n)}async function g8(t,e){const n=xe(t);e?(n.v_.delete(2),await um(n)):e||(n.v_.add(2),await vh(n),n.x_.set("Unknown"))}function Kl(t){return t.N_||(t.N_=function(n,r,i){const s=xe(n);return s.R_(),new n8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:a8.bind(null,t),To:l8.bind(null,t),u_:c8.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),m0(t)?p0(t):t.x_.set("Unknown")):(await t.N_.stop(),B2(t))})),t.N_}function js(t){return t.L_||(t.L_=function(n,r,i){const s=xe(n);return s.R_(),new r8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:d8.bind(null,t),To:m8.bind(null,t),E_:f8.bind(null,t),T_:p8.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await hm(t)):(await t.L_.stop(),t.D_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new g0(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y0(t,e){if(_i("AsyncQueue",`${e}: ${t}`),gh(t))return new he(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=gc(),this.sortedSet=new Rt(this.comparator)}static emptySet(e){return new Xa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.B_=new Rt(ve.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):Re():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class bl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bl(e,n,Xa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&im(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class _8{constructor(){this.queries=new ql(e=>u2(e),im),this.onlineState="Unknown",this.W_=new Set}}async function _0(t,e){const n=xe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new y8,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=y0(o,`Initialization of query '${Sa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&b0(n)}async function v0(t,e){const n=xe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function v8(t,e){const n=xe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&b0(n)}function b8(t,e,n){const r=xe(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function b0(t){t.W_.forEach(e=>{e.next()})}var I_,ow;(ow=I_||(I_={})).j_="default",ow.Cache="cache";class E0{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new bl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==I_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.key=e}}class j2{constructor(e){this.key=e}}class E8{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=je(),this.mutatedKeys=je(),this.ha=h2(e),this.Pa=new Xa(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new sw,i=n?n.Pa:this.Pa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=sm(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;d&&f?d.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),g=!0):this.da(d,f)||(r.track({type:2,doc:f}),g=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!d&&f?(r.track({type:0,doc:f}),g=!0):d&&!f&&(r.track({type:1,doc:d}),g=!0,(l||c)&&(a=!0)),g&&(f?(o=o.add(f),s=m?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((u,h)=>function(f,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return m(f)-m(p)}(u.type,h.type)||this.ha(u.doc,h.doc)),this.Aa(r),i=i!=null&&i;const a=n&&!i?this.Ra():[],l=this.la.size===0&&this.current&&!i?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new bl(this.query,e.Pa,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new sw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=je(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new j2(r))}),this.la.forEach(r=>{e.has(r)||n.push(new z2(r))}),n}fa(e){this.ua=e.hs,this.la=je();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return bl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class T8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class w8{constructor(e){this.key=e,this.pa=!1}}class S8{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new ql(a=>u2(a),im),this.Sa=new Map,this.ba=new Set,this.Da=new Rt(ve.comparator),this.Ca=new Map,this.va=new c0,this.Fa={},this.Ma=new Map,this.xa=vl.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function I8(t,e,n=!0){const r=J2(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await W2(r,e,n,!0),i}async function A8(t,e){const n=J2(t);await W2(n,e,!0,!1)}async function W2(t,e,n,r){const i=await YB(t.localStore,hi(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await C8(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&V2(t.remoteStore,i),a}async function C8(t,e,n,r,i){t.Na=(h,d,f)=>async function(m,g,_,v){let T=g.view.Ta(_);T.Xi&&(T=await tw(m.localStore,g.query,!1).then(({documents:O})=>g.view.Ta(O,T)));const I=v&&v.targetChanges.get(g.targetId),A=v&&v.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(T,m.isPrimaryClient,I,A);return lw(m,g.targetId,w.Va),w.snapshot}(t,h,d,f);const s=await tw(t.localStore,e,!0),o=new E8(e,s.hs),a=o.Ta(s.documents),l=_h.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);lw(t,n,c.Va);const u=new T8(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function R8(t,e,n){const r=xe(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!im(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await S_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&d0(r.remoteStore,i.targetId),A_(r,i.targetId)}).catch(mh)):(A_(r,i.targetId),await S_(r.localStore,i.targetId,!0))}async function k8(t,e){const n=xe(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),d0(n.remoteStore,r.targetId))}async function O8(t,e,n){const r=V8(t);try{const i=await function(o,a){const l=xe(o),c=$t.now(),u=a.reduce((f,p)=>f.add(p.key),je());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=qi(),m=je();return l.os.getEntries(f,u).next(g=>{p=g,p.forEach((_,v)=>{v.isValidDocument()||(m=m.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(g=>{h=g;const _=[];for(const v of a){const T=eB(v,h.get(v.key).overlayedDocument);T!=null&&_.push(new Zs(v.key,T,r2(T.value.mapValue),ur.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,_,a)}).next(g=>{d=g;const _=g.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(f,g.batchId,_)})}).then(()=>({batchId:d.batchId,changes:f2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new Rt(nt)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,i.batchId,n),await bh(r,i.changes),await hm(r.remoteStore)}catch(i){const s=y0(i,"Failed to persist write");n.reject(s)}}async function G2(t,e){const n=xe(t);try{const r=await GB(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ca.get(s);o&&(gt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?gt(o.pa):i.removedDocuments.size>0&&(gt(o.pa),o.pa=!1))}),await bh(n,r,e)}catch(r){await mh(r)}}function aw(t,e,n){const r=xe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.wa.forEach((s,o)=>{const a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=xe(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.Q_)d.G_(a)&&(c=!0)}),c&&b0(l)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function N8(t,e,n){const r=xe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Rt(ve.comparator);o=o.insert(s,On.newNoDocument(s,Me.min()));const a=je().add(s),l=new lm(Me.min(),new Map,new Rt(nt),o,a);await G2(r,l),r.Da=r.Da.remove(s),r.Ca.delete(e),T0(r)}else await S_(r.localStore,e,!1).then(()=>A_(r,e,n)).catch(mh)}async function M8(t,e){const n=xe(t),r=e.batch.batchId;try{const i=await WB(n.localStore,e);K2(n,r,null),q2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bh(n,i)}catch(i){await mh(i)}}async function P8(t,e,n){const r=xe(t);try{const i=await function(o,a){const l=xe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(gt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);K2(r,e,n),q2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bh(r,i)}catch(i){await mh(i)}}function q2(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function K2(t,e,n){const r=xe(t);let i=r.Fa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function A_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||Y2(t,r)})}function Y2(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(d0(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),T0(t))}function lw(t,e,n){for(const r of n)r instanceof z2?(t.va.addReference(r.key,e),x8(t,r)):r instanceof j2?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||Y2(t,r.key)):Re()}function x8(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.ba.add(r),T0(t))}function T0(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new ve(At.fromString(e)),r=t.xa.next();t.Ca.set(r,new w8(n)),t.Da=t.Da.insert(n,r),V2(t.remoteStore,new Ss(hi(rm(n.path)),r,"TargetPurposeLimboResolution",Z1._e))}}async function bh(t,e,n){const r=xe(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=h0.Ki(l.targetId,c);s.push(u)}}))}),await Promise.all(o),r.ya.u_(i),await async function(l,c){const u=xe(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,d=>L.forEach(d.qi,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>L.forEach(d.Qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!gh(h))throw h;ee("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ns.get(d),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.ns=u.ns.insert(d,m)}}}(r.localStore,s))}async function D8(t,e){const n=xe(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await P2(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(l=>{l.reject(new he(V.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bh(n,r.us)}}function L8(t,e){const n=xe(t),r=n.Ca.get(e);if(r&&r.pa)return je().add(r.key);{let i=je();const s=n.Sa.get(e);if(!s)return i;for(const o of s){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function J2(t){const e=xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=G2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N8.bind(null,e),e.ya.u_=v8.bind(null,e.eventManager),e.ya.La=b8.bind(null,e.eventManager),e}function V8(t){const e=xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P8.bind(null,e),e}class cw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=cm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return jB(this.persistence,new HB,e.initialUser,this.serializer)}createPersistence(e){return new BB(u0.Hr,this.serializer)}createSharedClientState(e){return new QB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class F8{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=D8.bind(null,this.syncEngine),await g8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _8}()}createDatastore(e){const n=cm(e.databaseInfo.databaseId),r=function(s){return new t8(s)}(e.databaseInfo);return function(s,o,a,l){return new i8(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new o8(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>aw(this.syncEngine,n,0),function(){return rw.D()?new rw:new XB}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new S8(i,s,o,a,l,c);return u&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=xe(r);ee("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await vh(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Cn.UNAUTHENTICATED,this.clientId=e2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ee("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ee("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new he(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=y0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bg(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await P2(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $8(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iw(e.remoteStore,i)),t._onlineComponents=e}function U8(t){return t.name==="FirebaseError"?t.code===V.FAILED_PRECONDITION||t.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function $8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await bg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!U8(n))throw n;pl("Error using user provided cache. Falling back to memory cache: "+n),await bg(t,new cw)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await bg(t,new cw);return t._offlineComponents}async function Q2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await uw(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await uw(t,new F8))),t._onlineComponents}function H8(t){return Q2(t).then(e=>e.syncEngine)}async function Df(t){const e=await Q2(t),n=e.eventManager;return n.onListen=I8.bind(null,e.syncEngine),n.onUnlisten=R8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=A8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=k8.bind(null,e.syncEngine),n}function z8(t,e,n={}){const r=new ui;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new w0({next:d=>{o.enqueueAndForget(()=>v0(s,h));const f=d.docs.has(a);!f&&d.fromCache?c.reject(new he(V.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?c.reject(new he(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new E0(rm(a.path),u,{includeMetadataChanges:!0,ta:!0});return _0(s,h)}(await Df(t),t.asyncQueue,e,n,r)),r.promise}function j8(t,e,n={}){const r=new ui;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new w0({next:d=>{o.enqueueAndForget(()=>v0(s,h)),d.fromCache&&l.source==="server"?c.reject(new he(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new E0(a,u,{includeMetadataChanges:!0,ta:!0});return _0(s,h)}(await Df(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t,e,n){if(!n)throw new he(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W8(t,e,n,r){if(e===!0&&r===!0)throw new he(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dw(t){if(!ve.isDocumentKey(t))throw new he(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fw(t){if(ve.isDocumentKey(t))throw new he(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function S0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re()}function hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=S0(t);throw new he(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new he(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new he(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new a7;switch(r.type){case"firstParty":return new h7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hw.get(n);r&&(ee("ComponentProvider","Removing Datastore"),hw.delete(n),r.terminate())}(this),Promise.resolve()}}function G8(t,e,n,r={}){var i;const s=(t=hr(t,dm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Cn.MOCK_USER;else{a=d4(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new he(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Cn(c)}t._authCredentials=new l7(new Zk(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Eh(this.firestore,e,this._query)}}class Hn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class xs extends Eh{constructor(e,n,r){super(e,n,rm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new ve(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function xa(t,e,...n){if(t=on(t),Z2("collection","path",e),t instanceof dm){const r=At.fromString(e,...n);return fw(r),new xs(t,null,r)}{if(!(t instanceof Hn||t instanceof xs))throw new he(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return fw(r),new xs(t.firestore,null,r)}}function Nn(t,e,...n){if(t=on(t),arguments.length===1&&(e=e2.newId()),Z2("doc","path",e),t instanceof dm){const r=At.fromString(e,...n);return dw(r),new Hn(t,null,new ve(r))}{if(!(t instanceof Hn||t instanceof xs))throw new he(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return dw(r),new Hn(t.firestore,t instanceof xs?t.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new D2(this,"async_queue_retry"),this.cu=()=>{const n=vg();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=vg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=vg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new ui;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!gh(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _i("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const i=g0.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&Re()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function mw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ws extends dm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new q8}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||eO(this),this._firestoreClient.terminate()}}function K8(t,e){const n=typeof t=="object"?t:tC(),r=typeof t=="string"?t:e||"(default)",i=ZA(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=u4("firestore");s&&G8(i,...s)}return i}function Th(t){return t._firestoreClient||eO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function eO(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new I7(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,X2(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new B8(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this._byteString=e}static fromBase64String(e){try{return new El(Ln.fromBase64String(e))}catch(n){throw new he(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new El(Ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=/^__.*__$/;class J8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new yh(e,this.data,n,this.fieldTransforms)}}class tO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class mm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new mm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Lf(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(nO(this.Vu)&&Y8.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Q8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cm(e)}Cu(e,n,r,i=!1){return new mm({Vu:e,methodName:n,Du:r,path:bn.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function I0(t){const e=t._freezeSettings(),n=cm(t._databaseId);return new Q8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rO(t,e,n,r,i,s={}){const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);C0("Data must be an object, but it was:",o,r);const a=oO(r,o);let l,c;if(s.merge)l=new ar(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=C_(e,h,n);if(!o.contains(d))throw new he(V.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);lO(u,d)||u.push(d)}l=new ar(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new J8(new Yn(a),l,c)}class gm extends fm{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gm}}function X8(t,e,n){return new mm({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class A0 extends fm{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=X8(this,e,!0),r=this.vu.map(s=>Sh(s,n)),i=new _l(r);return new J7(e.path,i)}isEqual(e){return e instanceof A0&&uu(this.vu,e.vu)}}function iO(t,e,n,r){const i=t.Cu(1,e,n);C0("Data must be an object, but it was:",i,r);const s=[],o=Yn.empty();ma(r,(l,c)=>{const u=R0(e,l,n);c=on(c);const h=i.yu(u);if(c instanceof gm)s.push(u);else{const d=Sh(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new ar(s);return new tO(o,a,i.fieldTransforms)}function sO(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[C_(e,r,n)],l=[i];if(s.length%2!=0)throw new he(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(C_(e,s[d])),l.push(s[d+1]);const c=[],u=Yn.empty();for(let d=a.length-1;d>=0;--d)if(!lO(c,a[d])){const f=a[d];let p=l[d];p=on(p);const m=o.yu(f);if(p instanceof gm)c.push(f);else{const g=Sh(p,m);g!=null&&(c.push(f),u.set(f,g))}}const h=new ar(c);return new tO(u,h,o.fieldTransforms)}function Sh(t,e){if(aO(t=on(t)))return C0("Unsupported field value:",e,t),oO(t,e);if(t instanceof fm)return function(r,i){if(!nO(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Sh(a,i.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return q7(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$t.fromDate(r);return{timestampValue:Pf(i.serializer,s)}}if(r instanceof $t){const s=new $t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pf(i.serializer,s)}}if(r instanceof pm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof El)return{bytesValue:A2(i.serializer,r._byteString)};if(r instanceof Hn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:l0(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${S0(r)}`)}(t,e)}function oO(t,e){const n={};return t2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ma(t,(r,i)=>{const s=Sh(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function aO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $t||t instanceof pm||t instanceof El||t instanceof Hn||t instanceof fm)}function C0(t,e,n){if(!aO(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=S0(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function C_(t,e,n){if((e=on(e))instanceof wh)return e._internalPath;if(typeof e=="string")return R0(t,e);throw Lf("Field path arguments must be of type string or ",t,!1,void 0,n)}const Z8=new RegExp("[~\\*/\\[\\]]");function R0(t,e,n){if(e.search(Z8)>=0)throw Lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wh(...e.split("."))._internalPath}catch{throw Lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new he(V.INVALID_ARGUMENT,a+t+l)}function lO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eU extends cO{data(){return super.data()}}function uO(t,e){return typeof e=="string"?R0(t,e):e instanceof wh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tU{convertValue(e,n="none"){switch(ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ma(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new pm(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=t0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const n=zs(e);return new $t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=At.fromString(e);gt(M2(r));const i=new Au(r.get(1),r.get(3)),s=new ve(r.popFirst(5));return i.isEqual(n)||_i(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fO extends cO{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dd extends fO{data(e={}){return super.data(e)}}class pO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new _c(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dd(this._firestore,this._userDataWriter,r.key,r,new _c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Dd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _c(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Dd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _c(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:nU(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(t){t=hr(t,Hn);const e=hr(t.firestore,Ws);return z8(Th(e),t._key).then(n=>gO(e,t,n))}class O0 extends tU{constructor(e){super(),this.firestore=e}convertBytes(e){return new El(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,n)}}function mO(t){t=hr(t,Eh);const e=hr(t.firestore,Ws),n=Th(e),r=new O0(e);return hO(t._query),j8(n,t._query).then(i=>new pO(e,r,t,i))}function gw(t,e,n){t=hr(t,Hn);const r=hr(t.firestore,Ws),i=dO(t.converter,e,n);return M0(r,[rO(I0(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ur.none())])}function R_(t,e,n,...r){t=hr(t,Hn);const i=hr(t.firestore,Ws),s=I0(i);let o;return o=typeof(e=on(e))=="string"||e instanceof wh?sO(s,"updateDoc",t._key,e,n,r):iO(s,"updateDoc",t._key,e),M0(i,[o.toMutation(t._key,ur.exists(!0))])}function N0(t,...e){var n,r,i;t=on(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||mw(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(mw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof Hn)c=hr(t.firestore,Ws),u=rm(t._key.path),l={next:h=>{e[o]&&e[o](gO(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=hr(t,Eh);c=hr(h.firestore,Ws),u=h._query;const d=new O0(c);l={next:f=>{e[o]&&e[o](new pO(c,d,h,f))},error:e[o+1],complete:e[o+2]},hO(t._query)}return function(d,f,p,m){const g=new w0(m),_=new E0(f,g,p);return d.asyncQueue.enqueueAndForget(async()=>_0(await Df(d),_)),()=>{g.Qa(),d.asyncQueue.enqueueAndForget(async()=>v0(await Df(d),_))}}(Th(c),u,a,l)}function M0(t,e){return function(r,i){const s=new ui;return r.asyncQueue.enqueueAndForget(async()=>O8(await H8(r),i,s)),s.promise}(Th(t),e)}function gO(t,e,n){const r=n.docs.get(e._key),i=new O0(t);return new fO(t,i,e._key,r,new _c(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=I0(e)}set(e,n,r){this._verifyNotCommitted();const i=Eg(e,this._firestore),s=dO(i.converter,n,r),o=rO(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ur.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Eg(e,this._firestore);let o;return o=typeof(n=on(n))=="string"||n instanceof wh?sO(this._dataReader,"WriteBatch.update",s._key,n,r,i):iO(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Eg(e,this._firestore);return this._mutations=this._mutations.concat(new s0(n._key,ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eg(t,e){if((t=on(t)).firestore!==e)throw new he(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function iU(...t){return new A0("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t){return Th(t=hr(t,Ws)),new rU(t,e=>M0(t,e))}(function(e,n=!0){(function(i){Gl=i})(Js),gi(new $r("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ws(new c7(r.getProvider("auth-internal")),new f7(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new he(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),lr(xT,"4.5.0",e),lr(xT,"4.5.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="firebasestorage.googleapis.com",oU="storageBucket",aU=2*60*1e3,lU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Ai{constructor(e,n,r=0){super(Tg(e),`Firebase Storage: ${n} (${Tg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ci.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ei;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ei||(Ei={}));function Tg(t){return"storage/"+t}function cU(){const t="An unknown error occurred, please check the error payload for server response.";return new Ci(Ei.UNKNOWN,t)}function uU(){return new Ci(Ei.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hU(){return new Ci(Ei.CANCELED,"User canceled the upload/download.")}function dU(t){return new Ci(Ei.INVALID_URL,"Invalid URL '"+t+"'.")}function fU(t){return new Ci(Ei.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yw(t){return new Ci(Ei.INVALID_ARGUMENT,t)}function _O(){return new Ci(Ei.APP_DELETED,"The Firebase app was deleted.")}function pU(t){return new Ci(Ei.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Vr.makeFromUrl(e,n)}catch{return new Vr(e,"")}if(r.path==="")return r;throw fU(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===yO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",_=new RegExp(`^https?://${m}/${i}/${g}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:_,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<T.length;I++){const A=T[I],w=A.regex.exec(e);if(w){const O=w[A.indices.bucket];let M=w[A.indices.path];M||(M=""),r=new Vr(O,M),A.postModify(r);break}}if(r==null)throw dU(e);return r}}class mU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function h(g){i=setTimeout(()=>{i=null,t(f,l())},g)}function d(){s&&clearTimeout(s)}function f(g,..._){if(c){d();return}if(g){d(),u.call(null,g,..._);return}if(l()||o){d(),u.call(null,g,..._);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,h(T)}let p=!1;function m(g){p||(p=!0,d(),!c&&(i!==null?(g||(a=2),clearTimeout(i),h(0)):g||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function yU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(t){return t!==void 0}function _w(t,e,n,r){if(r<e)throw yw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw yw(`Invalid value for '${t}'. Expected ${n} or less.`)}function vU(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vf||(Vf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bU(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e,n,r,i,s,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new id(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Vf.NO_ERROR,l=s.getStatus();if(!a||bU(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Vf.ABORT;r(!1,new id(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new id(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());_U(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=cU();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?_O():hU();o(l)}else{const l=uU();o(l)}};this.canceled_?n(!1,new id(!1,null,!0)):this.backoffId_=gU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class id{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function TU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function wU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function SU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function IU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function AU(t,e,n,r,i,s,o=!0){const a=vU(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return SU(c,e),TU(c,n),wU(c,s),IU(c,r),new EU(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function RU(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this._service=e,n instanceof Vr?this._location=n:this._location=Vr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ff(e,n)}get root(){const e=new Vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RU(this._location.path)}get storage(){return this._service}get parent(){const e=CU(this._location.path);if(e===null)return null;const n=new Vr(this._location.bucket,e);return new Ff(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pU(e)}}function vw(t,e){const n=e==null?void 0:e[oU];return n==null?null:Vr.makeFromBucketSpec(n,t)}class kU{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=yO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aU,this._maxUploadRetryTime=lU,this._requests=new Set,i!=null?this._bucket=Vr.makeFromBucketSpec(i,this._host):this._bucket=vw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vr.makeFromBucketSpec(this._url,e):this._bucket=vw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_w("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ff(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new mU(_O());{const o=AU(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const bw="@firebase/storage",Ew="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="storage";function NU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new kU(n,r,i,e,Js)}function MU(){gi(new $r(OU,NU,"PUBLIC").setMultipleInstances(!0)),lr(bw,Ew,""),lr(bw,Ew,"esm2017")}MU();const wg=new WeakMap;function vO(t,e){return wg.has(e)||wg.set(e,t||{f:{},r:{},s:{},u:{}}),wg.get(e)}function PU(t,e,n,r){if(!t)return n;const[i,s]=bO(t);if(!i)return n;const o=vO(void 0,r)[i]||{},a=e||s;return a&&a in o?o[a]:n}function xU(t,e,n,r){if(!t)return;const[i,s]=bO(t);if(!i)return;const o=vO(void 0,r)[i],a=e||s;if(a)return n.then(l=>{o[a]=l}).catch(ei),a}function bO(t){return l5(t)||c5(t)?["f",t.path]:u5(t)?["r",t.toString()]:h5(t)?["s",t.toString()]:[]}const Sg=new WeakMap;function DU(t,e,n){const r=Pp();Sg.has(r)||Sg.set(r,new Map);const i=Sg.get(r),s=xU(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):ei}const LU={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function k_(t,e,n,r){if(!o5(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((a,l)=>{const c=n[l];return a[c.path]=c.data(),a},{});function o(a,l,c,u){l=l||{};const[h,d]=u;Object.getOwnPropertyNames(a).forEach(f=>{const p=Object.getOwnPropertyDescriptor(a,f);p&&!p.enumerable&&Object.defineProperty(h,f,p)});for(const f in a){const p=a[f];if(p==null||p instanceof Date||p instanceof $t||p instanceof pm)h[f]=p;else if(s1(p)){const m=c+f;h[f]=m in n?l[f]:p.path,d[m]=p.converter?p:p.withConverter(r.converter)}else if(Array.isArray(p)){h[f]=Array(p.length);for(let m=0;m<p.length;m++){const g=p[m];g&&g.path in s&&(h[f][m]=s[g.path])}o(p,l[f]||h[f],c+f+".",[h[f],d])}else ha(p)?(h[f]={},o(p,l[f],c+f+".",[h[f],d])):h[f]=p}}return o(t,e,"",i),i}const P0={reset:!1,wait:!0,maxRefDepth:2,converter:LU,snapshotOptions:{serverTimestamps:"estimate"}};function Bf(t){for(const e in t)t[e].unsub()}function O_(t,e,n,r,i,s,o,a,l){const[c,u]=k_(r.data(t.snapshotOptions),i1(e,n),i,t);s.set(e,n,c),N_(t,e,n,i,u,s,o,a,l)}function VU({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},a){const l=Object.create(null);let c=ei;return a.once?k0(t).then(u=>{u.exists()?O_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())}).catch(s):c=N0(t,u=>{u.exists()?O_(a,e,n,u,l,o,r,i,s):(o.set(e,n,null),i())},s),()=>{c(),Bf(l)}}function N_(t,e,n,r,i,s,o,a,l){const c=Object.keys(i);if(Object.keys(r).filter(m=>c.indexOf(m)<0).forEach(m=>{r[m].unsub(),delete r[m]}),!c.length||++o>t.maxRefDepth)return a(n);let h=0;const d=c.length,f=Object.create(null);function p(m){m in f&&++h>=d&&a(n)}c.forEach(m=>{const g=r[m],_=i[m],v=`${n}.${m}`;if(f[v]=!0,g)if(g.path!==_.path)g.unsub();else return;r[m]={data:()=>i1(e,v),unsub:VU({ref:_,target:e,path:v,depth:o,ops:s,resolve:p.bind(null,v),reject:l},t),path:_.path}})}function FU(t,e,n,r,i,s){const o=Object.assign({},P0,s),{snapshotListenOptions:a,snapshotOptions:l,wait:c,once:u}=o,h="value";let d=Ve(c?[]:t.value);c||n.set(t,h,[]);const f=r;let p,m=ei;const g=[],_={added:({newIndex:T,doc:I})=>{g.splice(T,0,Object.create(null));const A=g[T],[w,O]=k_(I.data(l),void 0,A,o);n.add(Ni(d),T,w),N_(o,d,`${h}.${T}`,A,O,n,0,r.bind(null,I),i)},modified:({oldIndex:T,newIndex:I,doc:A})=>{const w=Ni(d),O=g[T],M=w[T],[k,U]=k_(A.data(l),M,O,o);g.splice(I,0,O),n.remove(w,T),n.add(w,I,k),N_(o,d,`${h}.${I}`,O,U,n,0,r,i)},removed:({oldIndex:T})=>{const I=Ni(d);n.remove(I,T),Bf(g.splice(T,1)[0])}};function v(T){const I=T.docChanges(a);if(!p&&I.length){p=!0;let A=0;const w=I.length,O=Object.create(null);for(let M=0;M<w;M++)O[I[M].doc.id]=!0;r=M=>{M&&M.id in O&&++A>=w&&(c&&(n.set(t,h,Ni(d)),d=t),f(Ni(d)),r=ei)}}I.forEach(A=>{_[A.type](A)}),I.length||(c&&(n.set(t,h,Ni(d)),d=t),r(Ni(d)))}return u?mO(e).then(v).catch(i):m=N0(e,v,i),T=>{if(m(),T){const I=typeof T=="function"?T():[];n.set(t,h,I)}g.forEach(Bf)}}function BU(t,e,n,r,i,s){const o=Object.assign({},P0,s),a="value",l=Object.create(null);r=d5(r,()=>i1(t,a));let c=ei;function u(h){h.exists()?O_(o,t,a,h,l,n,0,r,i):(n.set(t,a,null),r(null))}return o.once?k0(e).then(u).catch(i):c=N0(e,u,i),h=>{if(c(),h){const d=typeof h=="function"?h():null;n.set(t,a,d)}Bf(l)}}const Tw=Symbol();function EO(t,e){let n=ei;const r=Object.assign({},P0,e),i=Ni(t),s=r.target||Ve();p5()&&(r.once=!0);const o=PU(i,r.ssrKey,Tw,Pp()),a=o!==Tw;a&&(s.value=o);let l=!a;const c=Ve(!1),u=Ve(),h=lA(),d=Iv();let f=ei;function p(){let _=Ni(t);const v=new Promise((T,I)=>{if(n(r.reset),!_)return n=ei,T(null);c.value=l,l=!0,_.converter||(_=_.withConverter(r.converter)),n=(s1(_)?BU:FU)(s,_,UU,T,I,r)}).catch(T=>(h.value===v&&(u.value=T),Promise.reject(T))).finally(()=>{h.value===v&&(c.value=!1)});h.value=v}let m=ei;(sn(t)||typeof t=="function")&&(m=$i(t,p)),p(),i&&(f=DU(h.value,i,r.ssrKey)),ua()&&SA(()=>h.value),d&&qI(g);function g(_=r.reset){m(),f(),n(_)}return Object.defineProperties(s,{error:{get:()=>u},data:{get:()=>s},pending:{get:()=>c},promise:{get:()=>h},stop:{get:()=>g}})}const UU={set:(t,e,n)=>i5(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function Ld(t,e){return EO(t,{target:Ve([]),...e})}function Tl(t,e){return EO(t,e)}function $U(t){return HU({initialUser:t,dependencies:{popupRedirectResolver:I6,persistence:[LL,SL,IC]}})}const TO=Symbol("VueFireAuth");function HU({dependencies:t,initialUser:e}){return(n,r)=>{const[i,s]=zU(n,r,e,t);g5(i,s)}}function zU(t,e,n,r,i=fL(t,r)){const s=m5(t,e).run(()=>Ve(n));return LC.set(t,s),e.provide(TO,i),[s,i]}function jU(t){return r5?Jn(TO):null}function WU(t,{firebaseApp:e,modules:n=[]}){t.provide(DC,e);for(const r of n)r(e,t)}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ca=typeof document<"u";function GU(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ot=Object.assign;function Ig(t,e){const n={};for(const r in e){const i=e[r];n[r]=jr(i)?i.map(t):t(i)}return n}const zc=()=>{},jr=Array.isArray,wO=/#/g,qU=/&/g,KU=/\//g,YU=/=/g,JU=/\?/g,SO=/\+/g,QU=/%5B/g,XU=/%5D/g,IO=/%5E/g,ZU=/%60/g,AO=/%7B/g,e$=/%7C/g,CO=/%7D/g,t$=/%20/g;function x0(t){return encodeURI(""+t).replace(e$,"|").replace(QU,"[").replace(XU,"]")}function n$(t){return x0(t).replace(AO,"{").replace(CO,"}").replace(IO,"^")}function M_(t){return x0(t).replace(SO,"%2B").replace(t$,"+").replace(wO,"%23").replace(qU,"%26").replace(ZU,"`").replace(AO,"{").replace(CO,"}").replace(IO,"^")}function r$(t){return M_(t).replace(YU,"%3D")}function i$(t){return x0(t).replace(wO,"%23").replace(JU,"%3F")}function s$(t){return t==null?"":i$(t).replace(KU,"%2F")}function ku(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const o$=/\/$/,a$=t=>t.replace(o$,"");function Ag(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=h$(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:ku(o)}}function l$(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ww(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function c$(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&wl(e.matched[r],n.matched[i])&&RO(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function wl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function RO(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!u$(t[n],e[n]))return!1;return!0}function u$(t,e){return jr(t)?Sw(t,e):jr(e)?Sw(e,t):t===e}function Sw(t,e){return jr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function h$(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}var Ou;(function(t){t.pop="pop",t.push="push"})(Ou||(Ou={}));var jc;(function(t){t.back="back",t.forward="forward",t.unknown=""})(jc||(jc={}));function d$(t){if(!t)if(Ca){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),a$(t)}const f$=/^[^#]+#/;function p$(t,e){return t.replace(f$,"#")+e}function m$(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ym=()=>({left:window.scrollX,top:window.scrollY});function g$(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=m$(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Iw(t,e){return(history.state?history.state.position-e:-1)+t}const P_=new Map;function y$(t,e){P_.set(t,e)}function _$(t){const e=P_.get(t);return P_.delete(t),e}let v$=()=>location.protocol+"//"+location.host;function kO(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),ww(l,"")}return ww(n,t)+r+i}function b$(t,e,n,r){let i=[],s=[],o=null;const a=({state:d})=>{const f=kO(t,location),p=n.value,m=e.value;let g=0;if(d){if(n.value=f,e.value=d,o&&o===p){o=null;return}g=m?d.position-m.position:0}else r(f);i.forEach(_=>{_(n.value,p,{delta:g,type:Ou.pop,direction:g?g>0?jc.forward:jc.back:jc.unknown})})};function l(){o=n.value}function c(d){i.push(d);const f=()=>{const p=i.indexOf(d);p>-1&&i.splice(p,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(ot({},d.state,{scroll:ym()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Aw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?ym():null}}function E$(t){const{history:e,location:n}=window,r={value:kO(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:v$()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=ot({},e.state,Aw(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,u,!0),r.value=l}function a(l,c){const u=ot({},i.value,e.state,{forward:l,scroll:ym()});s(u.current,u,!0);const h=ot({},Aw(r.value,l,null),{position:u.position+1},c);s(l,h,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function T$(t){t=d$(t);const e=E$(t),n=b$(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=ot({location:"",base:t,go:r,createHref:p$.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function w$(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),T$(t)}function S$(t){return typeof t=="string"||t&&typeof t=="object"}function OO(t){return typeof t=="string"||typeof t=="symbol"}const as={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NO=Symbol("");var Cw;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Cw||(Cw={}));function Sl(t,e){return ot(new Error,{type:t,[NO]:!0},e)}function Ri(t,e){return t instanceof Error&&NO in t&&(e==null||!!(t.type&e))}const Rw="[^/]+?",I$={sensitive:!1,strict:!1,start:!0,end:!0},A$=/[.+*?^${}()[\]/\\]/g;function C$(t,e){const n=ot({},I$,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(A$,"\\$&"),f+=40;else if(d.type===1){const{value:p,repeatable:m,optional:g,regexp:_}=d;s.push({name:p,repeatable:m,optional:g});const v=_||Rw;if(v!==Rw){f+=10;try{new RegExp(`(${v})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${p}" (${v}): `+I.message)}}let T=m?`((?:${v})(?:/(?:${v}))*)`:`(${v})`;h||(T=g&&c.length<2?`(?:/${T})`:"/"+T),g&&(T+="?"),i+=T,f+=20,g&&(f+=-8),m&&(f+=-20),v===".*"&&(f+=-50)}u.push(f)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",p=s[d-1];h[p.name]=f&&p.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:m,optional:g}=f,_=p in c?c[p]:"";if(jr(_)&&!m)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const v=jr(_)?_.join("/"):_;if(!v)if(g)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${p}"`);u+=v}}return u||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function R$(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function k$(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=R$(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(kw(r))return 1;if(kw(i))return-1}return i.length-r.length}function kw(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const O$={type:0,value:""},N$=/[a-zA-Z0-9_]/;function M$(t){if(!t)return[[]];if(t==="/")return[[O$]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:l==="("?n=2:N$.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}function P$(t,e,n){const r=C$(M$(t.path),n),i=ot(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function x$(t,e){const n=[],r=new Map;e=Mw({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function s(u,h,d){const f=!d,p=D$(u);p.aliasOf=d&&d.record;const m=Mw(e,u),g=[p];if("alias"in u){const T=typeof u.alias=="string"?[u.alias]:u.alias;for(const I of T)g.push(ot({},p,{components:d?d.record.components:p.components,path:I,aliasOf:d?d.record:p}))}let _,v;for(const T of g){const{path:I}=T;if(h&&I[0]!=="/"){const A=h.record.path,w=A[A.length-1]==="/"?"":"/";T.path=h.record.path+(I&&w+I)}if(_=P$(T,h,m),d?d.alias.push(_):(v=v||_,v!==_&&v.alias.push(_),f&&u.name&&!Nw(_)&&o(u.name)),p.children){const A=p.children;for(let w=0;w<A.length;w++)s(A[w],_,d&&d.children[w])}d=d||_,(_.record.components&&Object.keys(_.record.components).length||_.record.name||_.record.redirect)&&l(_)}return v?()=>{o(v)}:zc}function o(u){if(OO(u)){const h=r.get(u);h&&(r.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&k$(u,n[h])>=0&&(u.record.path!==n[h].record.path||!MO(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Nw(u)&&r.set(u.record.name,u)}function c(u,h){let d,f={},p,m;if("name"in u&&u.name){if(d=r.get(u.name),!d)throw Sl(1,{location:u});m=d.record.name,f=ot(Ow(h.params,d.keys.filter(v=>!v.optional).concat(d.parent?d.parent.keys.filter(v=>v.optional):[]).map(v=>v.name)),u.params&&Ow(u.params,d.keys.map(v=>v.name))),p=d.stringify(f)}else if(u.path!=null)p=u.path,d=n.find(v=>v.re.test(p)),d&&(f=d.parse(p),m=d.record.name);else{if(d=h.name?r.get(h.name):n.find(v=>v.re.test(h.path)),!d)throw Sl(1,{location:u,currentLocation:h});m=d.record.name,f=ot({},h.params,u.params),p=d.stringify(f)}const g=[];let _=d;for(;_;)g.unshift(_.record),_=_.parent;return{name:m,path:p,params:f,matched:g,meta:V$(g)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function Ow(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function D$(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:L$(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function L$(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Nw(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function V$(t){return t.reduce((e,n)=>ot(e,n.meta),{})}function Mw(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function MO(t,e){return e.children.some(n=>n===t||MO(t,n))}function F$(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(SO," "),o=s.indexOf("="),a=ku(o<0?s:s.slice(0,o)),l=o<0?null:ku(s.slice(o+1));if(a in e){let c=e[a];jr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Pw(t){let e="";for(let n in t){const r=t[n];if(n=r$(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(jr(r)?r.map(s=>s&&M_(s)):[r&&M_(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function B$(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=jr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const U$=Symbol(""),xw=Symbol(""),_m=Symbol(""),D0=Symbol(""),x_=Symbol("");function cc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ms(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(Sl(4,{from:n,to:e})):d instanceof Error?l(d):S$(d)?l(Sl(2,{from:e,to:d})):(o&&r.enterCallbacks[i]===o&&typeof d=="function"&&o.push(d),a())},u=s(()=>t.call(r&&r.instances[i],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function Cg(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if($$(l)){const u=(l.__vccOpts||l)[e];u&&s.push(ms(u,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=GU(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&ms(f,n,r,o,a,i)()}))}}return s}function $$(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Dw(t){const e=Jn(_m),n=Jn(D0),r=Pt(()=>e.resolve(ze(t.to))),i=Pt(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(wl.bind(null,u));if(d>-1)return d;const f=Lw(l[c-2]);return c>1&&Lw(u)===f&&h[h.length-1].path!==f?h.findIndex(wl.bind(null,l[c-2])):d}),s=Pt(()=>i.value>-1&&W$(n.params,r.value.params)),o=Pt(()=>i.value>-1&&i.value===n.matched.length-1&&RO(n.params,r.value.params));function a(l={}){return j$(l)?e[ze(t.replace)?"replace":"push"](ze(t.to)).catch(zc):Promise.resolve()}return{route:r,href:Pt(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const H$=Cr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Dw,setup(t,{slots:e}){const n=Gu(Dw(t)),{options:r}=Jn(_m),i=Pt(()=>({[Vw(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Vw(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Lo("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),z$=H$;function j$(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function W$(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!jr(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Lw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Vw=(t,e,n)=>t??e??n,G$=Cr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Jn(x_),i=Pt(()=>t.route||r.value),s=Jn(xw,0),o=Pt(()=>{let c=ze(s);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Pt(()=>i.value.matched[o.value]);wd(xw,Pt(()=>o.value+1)),wd(U$,a),wd(x_,i);const l=Ve();return $i(()=>[l.value,a.value,t.name],([c,u,h],[d,f,p])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!wl(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return Fw(n.default,{Component:d,route:c});const f=h.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,g=Lo(d,ot({},p,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return Fw(n.default,{Component:g,route:c})||g}}});function Fw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const q$=G$;function K$(t){const e=x$(t.routes,t),n=t.parseQuery||F$,r=t.stringifyQuery||Pw,i=t.history,s=cc(),o=cc(),a=cc(),l=lA(as);let c=as;Ca&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ig.bind(null,R=>""+R),h=Ig.bind(null,s$),d=Ig.bind(null,ku);function f(R,X){let W,J;return OO(R)?(W=e.getRecordMatcher(R),J=X):J=R,e.addRoute(J,W)}function p(R){const X=e.getRecordMatcher(R);X&&e.removeRoute(X)}function m(){return e.getRoutes().map(R=>R.record)}function g(R){return!!e.getRecordMatcher(R)}function _(R,X){if(X=ot({},X||l.value),typeof R=="string"){const E=Ag(n,R,X.path),C=e.resolve({path:E.path},X),x=i.createHref(E.fullPath);return ot(E,C,{params:d(C.params),hash:ku(E.hash),redirectedFrom:void 0,href:x})}let W;if(R.path!=null)W=ot({},R,{path:Ag(n,R.path,X.path).path});else{const E=ot({},R.params);for(const C in E)E[C]==null&&delete E[C];W=ot({},R,{params:h(E)}),X.params=h(X.params)}const J=e.resolve(W,X),we=R.hash||"";J.params=u(d(J.params));const be=l$(r,ot({},R,{hash:n$(we),path:J.path})),y=i.createHref(be);return ot({fullPath:be,hash:we,query:r===Pw?B$(R.query):R.query||{}},J,{redirectedFrom:void 0,href:y})}function v(R){return typeof R=="string"?Ag(n,R,l.value.path):ot({},R)}function T(R,X){if(c!==R)return Sl(8,{from:X,to:R})}function I(R){return O(R)}function A(R){return I(ot(v(R),{replace:!0}))}function w(R){const X=R.matched[R.matched.length-1];if(X&&X.redirect){const{redirect:W}=X;let J=typeof W=="function"?W(R):W;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=v(J):{path:J},J.params={}),ot({query:R.query,hash:R.hash,params:J.path!=null?{}:R.params},J)}}function O(R,X){const W=c=_(R),J=l.value,we=R.state,be=R.force,y=R.replace===!0,E=w(W);if(E)return O(ot(v(E),{state:typeof E=="object"?ot({},we,E.state):we,force:be,replace:y}),X||W);const C=W;C.redirectedFrom=X;let x;return!be&&c$(r,J,W)&&(x=Sl(16,{to:C,from:J}),Ae(J,J,!0,!1)),(x?Promise.resolve(x):U(C,J)).catch(P=>Ri(P)?Ri(P,2)?P:de(P):D(P,C,J)).then(P=>{if(P){if(Ri(P,2))return O(ot({replace:y},v(P.to),{state:typeof P.to=="object"?ot({},we,P.to.state):we,force:be}),X||C)}else P=$(C,J,!0,y,we);return F(C,J,P),P})}function M(R,X){const W=T(R,X);return W?Promise.reject(W):Promise.resolve()}function k(R){const X=lt.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(R):R()}function U(R,X){let W;const[J,we,be]=Y$(R,X);W=Cg(J.reverse(),"beforeRouteLeave",R,X);for(const E of J)E.leaveGuards.forEach(C=>{W.push(ms(C,R,X))});const y=M.bind(null,R,X);return W.push(y),G(W).then(()=>{W=[];for(const E of s.list())W.push(ms(E,R,X));return W.push(y),G(W)}).then(()=>{W=Cg(we,"beforeRouteUpdate",R,X);for(const E of we)E.updateGuards.forEach(C=>{W.push(ms(C,R,X))});return W.push(y),G(W)}).then(()=>{W=[];for(const E of be)if(E.beforeEnter)if(jr(E.beforeEnter))for(const C of E.beforeEnter)W.push(ms(C,R,X));else W.push(ms(E.beforeEnter,R,X));return W.push(y),G(W)}).then(()=>(R.matched.forEach(E=>E.enterCallbacks={}),W=Cg(be,"beforeRouteEnter",R,X,k),W.push(y),G(W))).then(()=>{W=[];for(const E of o.list())W.push(ms(E,R,X));return W.push(y),G(W)}).catch(E=>Ri(E,8)?E:Promise.reject(E))}function F(R,X,W){a.list().forEach(J=>k(()=>J(R,X,W)))}function $(R,X,W,J,we){const be=T(R,X);if(be)return be;const y=X===as,E=Ca?history.state:{};W&&(J||y?i.replace(R.fullPath,ot({scroll:y&&E&&E.scroll},we)):i.push(R.fullPath,we)),l.value=R,Ae(R,X,W,y),de()}let pe;function q(){pe||(pe=i.listen((R,X,W)=>{if(!me.listening)return;const J=_(R),we=w(J);if(we){O(ot(we,{replace:!0}),J).catch(zc);return}c=J;const be=l.value;Ca&&y$(Iw(be.fullPath,W.delta),ym()),U(J,be).catch(y=>Ri(y,12)?y:Ri(y,2)?(O(y.to,J).then(E=>{Ri(E,20)&&!W.delta&&W.type===Ou.pop&&i.go(-1,!1)}).catch(zc),Promise.reject()):(W.delta&&i.go(-W.delta,!1),D(y,J,be))).then(y=>{y=y||$(J,be,!1),y&&(W.delta&&!Ri(y,8)?i.go(-W.delta,!1):W.type===Ou.pop&&Ri(y,20)&&i.go(-1,!1)),F(J,be,y)}).catch(zc)}))}let z=cc(),N=cc(),B;function D(R,X,W){de(R);const J=N.list();return J.length?J.forEach(we=>we(R,X,W)):console.error(R),Promise.reject(R)}function oe(){return B&&l.value!==as?Promise.resolve():new Promise((R,X)=>{z.add([R,X])})}function de(R){return B||(B=!R,q(),z.list().forEach(([X,W])=>R?W(R):X()),z.reset()),R}function Ae(R,X,W,J){const{scrollBehavior:we}=t;if(!Ca||!we)return Promise.resolve();const be=!W&&_$(Iw(R.fullPath,0))||(J||!W)&&history.state&&history.state.scroll||null;return Ll().then(()=>we(R,X,be)).then(y=>y&&g$(y)).catch(y=>D(y,R,X))}const De=R=>i.go(R);let rt;const lt=new Set,me={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,hasRoute:g,getRoutes:m,resolve:_,options:t,push:I,replace:A,go:De,back:()=>De(-1),forward:()=>De(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:N.add,isReady:oe,install(R){const X=this;R.component("RouterLink",z$),R.component("RouterView",q$),R.config.globalProperties.$router=X,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>ze(l)}),Ca&&!rt&&l.value===as&&(rt=!0,I(i.location).catch(we=>{}));const W={};for(const we in as)Object.defineProperty(W,we,{get:()=>l.value[we],enumerable:!0});R.provide(_m,X),R.provide(D0,sA(W)),R.provide(x_,l);const J=R.unmount;lt.add(R),R.unmount=function(){lt.delete(R),lt.size<1&&(c=as,pe&&pe(),pe=null,l.value=as,rt=!1,B=!1),J()}}};function G(R){return R.reduce((X,W)=>X.then(()=>k(W)),Promise.resolve())}return me}function Y$(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>wl(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>wl(c,l))||i.push(l))}return[n,r,i]}function L0(){return Jn(_m)}function vm(){return Jn(D0)}const J$=["current"],Q$=["current"],X$=["current"],Z$=["src"],eH=Cr({__name:"menuBar.vapor",setup(t){const e=L0(),n=vm(),r=VC();return(i,s)=>(se(),_e("header",null,[S("nav",null,[S("a",{class:"btn",current:ze(n).name=="Home",icon:"",onClick:s[0]||(s[0]=ut(o=>ze(e).push({name:"Home"}),["prevent"]))},"home",8,J$),S("a",{class:"btn",current:ze(n).name=="loginScreen",icon:"",onClick:s[1]||(s[1]=ut(o=>ze(e).push({name:"loginScreen"}),["prevent"]))},"person",8,Q$),ze(r)?(se(),_e("a",{key:0,class:"imgbtn",current:ze(n).name=="loginScreen",onClick:s[2]||(s[2]=ut(o=>ze(e).push({name:"loginScreen"}),["prevent"]))},[ze(r).photoURL?(se(),_e("img",{key:0,class:"bobble",src:ze(r).photoURL},null,8,Z$)):Ze("",!0)],8,X$)):Ze("",!0)])]))}}),eo=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},tH=eo(eH,[["__scopeId","data-v-2c138db2"]]),nH=Cr({__name:"App",setup(t){const e=vm();return(n,r)=>{const i=cx("RouterView");return se(),_e("main",null,[Ue(tH),(se(),fn(px,null,{default:Do(()=>[(se(),fn(i,{key:ze(e).fullPath}))]),_:1}))])}}});function PO(t){return Iv()?(qI(t),!0):!1}function Nu(t){return typeof t=="function"?t():ze(t)}const xO=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const rH=t=>t!=null,iH=()=>{};function DO(t){return t||ua()}function sH(...t){if(t.length!==1)return XP(...t);const e=t[0];return typeof e=="function"?Nv(hA(()=>({get:e,set:iH}))):Ve(e)}function oH(t,e){DO(e)&&Qu(t,e)}function aH(t,e=!0,n){DO()?Ju(t,n):e?t():Ll(t)}function LO(t){var e;const n=Nu(t);return(e=n==null?void 0:n.$el)!=null?e:n}const lH=xO?window:void 0,VO=xO?window.document:void 0;function cH(){const t=Ve(!1),e=ua();return e&&Ju(()=>{t.value=!0},e),t}function uH(t){const e=cH();return Pt(()=>(e.value,!!t()))}function hH(t,e,n={}){const{window:r=lH,...i}=n;let s;const o=uH(()=>r&&"MutationObserver"in r),a=()=>{s&&(s.disconnect(),s=void 0)},l=Pt(()=>{const d=Nu(t),f=(Array.isArray(d)?d:[d]).map(LO).filter(rH);return new Set(f)}),c=$i(()=>l.value,d=>{a(),o.value&&r&&d.size&&(s=new MutationObserver(e),d.forEach(f=>s.observe(f,i)))},{immediate:!0,flush:"post"}),u=()=>s==null?void 0:s.takeRecords(),h=()=>{a(),c()};return PO(h),{isSupported:o,stop:h,takeRecords:u}}function bm(t=null,e={}){var n,r,i;const{document:s=VO,restoreOnUnmount:o=h=>h}=e,a=(n=s==null?void 0:s.title)!=null?n:"",l=sH((r=t??(s==null?void 0:s.title))!=null?r:null),c=t&&typeof t=="function";function u(h){if(!("titleTemplate"in e))return h;const d=e.titleTemplate||"%s";return typeof d=="function"?d(h):Nu(d).replace(/%s/g,h)}return $i(l,(h,d)=>{h!==d&&s&&(s.title=u(typeof h=="string"?h:""))},{immediate:!0}),e.observe&&!e.titleTemplate&&s&&!c&&hH((i=s.head)==null?void 0:i.querySelector("title"),()=>{s&&s.title!==l.value&&(l.value=u(s.title))},{childList:!0}),oH(()=>{if(o){const h=o(a,l.value||"");h!=null&&s&&(s.title=h)}}),l}const Yl=t=>(Ku("data-v-dceb53fe"),t=t(),Yu(),t),dH=Yl(()=>S("h1",{class:"font-size-H"},[mt("Bingo "),S("em",null,"Bongo")],-1)),fH=Yl(()=>S("h2",{class:"font-size-L"},"Simplifying OSRS Clan Bingos",-1)),pH={class:"col-2"},mH={class:"ghost-board"},gH=Yl(()=>S("h2",null,"No more spreadsheets",-1)),yH=Yl(()=>S("p",null," You know how annoying it is to keep track of scores during clan bingos, right? Yeah, it's a pain. ",-1)),_H=Yl(()=>S("p",null," No more dealing with spreadsheets or scribbling down scores - Bingo Bongo has got my back on that front. It's like having a reliable sidekick for our clan events, making everything run smoothly and keeping the stress levels down. ",-1)),vH=Yl(()=>S("div",null,null,-1)),bH=Cr({__name:"home.vapor",setup(t){const e=bm();e.value="Bingo Bongo - an osrs bingo app";const n=L0(),r=new Set,i=s=>{for(;r.size<3;)r.add(Math.floor(Math.random()*9)+1);return r.has(s)?"var(--secondary)":"var(--primary)"};return(s,o)=>(se(),_e(it,null,[dH,fH,S("div",pH,[S("div",mH,[(se(),_e(it,null,mi(9,a=>S("div",{class:"tile",key:a+"tile",style:Bi({"--rotate":Math.random()*6-3+"deg",backgroundColor:i(a)})},null,4)),64))]),S("div",null,[gH,yH,_H,S("a",{class:"btn",big:"",submit:"",onClick:o[0]||(o[0]=a=>ze(n).push({name:"createNewBingo"}))},"Start a new event!")])]),vH],64))}}),EH=eo(bH,[["__scopeId","data-v-dceb53fe"]]);var FO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BO(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var UO={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(FO,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(q){var z=["th","st","nd","rd"],N=q%100;return"["+q+(z[(N-20)%10]||z[N]||z[0])+"]"}},T=function(q,z,N){var B=String(q);return!B||B.length>=z?q:""+Array(z+1-B.length).join(N)+q},I={s:T,z:function(q){var z=-q.utcOffset(),N=Math.abs(z),B=Math.floor(N/60),D=N%60;return(z<=0?"+":"-")+T(B,2,"0")+":"+T(D,2,"0")},m:function q(z,N){if(z.date()<N.date())return-q(N,z);var B=12*(N.year()-z.year())+(N.month()-z.month()),D=z.clone().add(B,h),oe=N-D<0,de=z.clone().add(B+(oe?-1:1),h);return+(-(B+(N-D)/(oe?D-de:de-D))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:h,y:f,w:u,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return q===void 0}},A="en",w={};w[A]=v;var O="$isDayjsObject",M=function(q){return q instanceof $||!(!q||!q[O])},k=function q(z,N,B){var D;if(!z)return A;if(typeof z=="string"){var oe=z.toLowerCase();w[oe]&&(D=oe),N&&(w[oe]=N,D=oe);var de=z.split("-");if(!D&&de.length>1)return q(de[0])}else{var Ae=z.name;w[Ae]=z,D=Ae}return!B&&D&&(A=D),D||!B&&A},U=function(q,z){if(M(q))return q.clone();var N=typeof z=="object"?z:{};return N.date=q,N.args=arguments,new $(N)},F=I;F.l=k,F.i=M,F.w=function(q,z){return U(q,{locale:z.$L,utc:z.$u,x:z.$x,$offset:z.$offset})};var $=function(){function q(N){this.$L=k(N.locale,null,!0),this.parse(N),this.$x=this.$x||N.x||{},this[O]=!0}var z=q.prototype;return z.parse=function(N){this.$d=function(B){var D=B.date,oe=B.utc;if(D===null)return new Date(NaN);if(F.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var de=D.match(g);if(de){var Ae=de[2]-1||0,De=(de[7]||"0").substring(0,3);return oe?new Date(Date.UTC(de[1],Ae,de[3]||1,de[4]||0,de[5]||0,de[6]||0,De)):new Date(de[1],Ae,de[3]||1,de[4]||0,de[5]||0,de[6]||0,De)}}return new Date(D)}(N),this.init()},z.init=function(){var N=this.$d;this.$y=N.getFullYear(),this.$M=N.getMonth(),this.$D=N.getDate(),this.$W=N.getDay(),this.$H=N.getHours(),this.$m=N.getMinutes(),this.$s=N.getSeconds(),this.$ms=N.getMilliseconds()},z.$utils=function(){return F},z.isValid=function(){return this.$d.toString()!==m},z.isSame=function(N,B){var D=U(N);return this.startOf(B)<=D&&D<=this.endOf(B)},z.isAfter=function(N,B){return U(N)<this.startOf(B)},z.isBefore=function(N,B){return this.endOf(B)<U(N)},z.$g=function(N,B,D){return F.u(N)?this[B]:this.set(D,N)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function(N,B){var D=this,oe=!!F.u(B)||B,de=F.p(N),Ae=function(W,J){var we=F.w(D.$u?Date.UTC(D.$y,J,W):new Date(D.$y,J,W),D);return oe?we:we.endOf(c)},De=function(W,J){return F.w(D.toDate()[W].apply(D.toDate("s"),(oe?[0,0,0,0]:[23,59,59,999]).slice(J)),D)},rt=this.$W,lt=this.$M,me=this.$D,G="set"+(this.$u?"UTC":"");switch(de){case f:return oe?Ae(1,0):Ae(31,11);case h:return oe?Ae(1,lt):Ae(0,lt+1);case u:var R=this.$locale().weekStart||0,X=(rt<R?rt+7:rt)-R;return Ae(oe?me-X:me+(6-X),lt);case c:case p:return De(G+"Hours",0);case l:return De(G+"Minutes",1);case a:return De(G+"Seconds",2);case o:return De(G+"Milliseconds",3);default:return this.clone()}},z.endOf=function(N){return this.startOf(N,!1)},z.$set=function(N,B){var D,oe=F.p(N),de="set"+(this.$u?"UTC":""),Ae=(D={},D[c]=de+"Date",D[p]=de+"Date",D[h]=de+"Month",D[f]=de+"FullYear",D[l]=de+"Hours",D[a]=de+"Minutes",D[o]=de+"Seconds",D[s]=de+"Milliseconds",D)[oe],De=oe===c?this.$D+(B-this.$W):B;if(oe===h||oe===f){var rt=this.clone().set(p,1);rt.$d[Ae](De),rt.init(),this.$d=rt.set(p,Math.min(this.$D,rt.daysInMonth())).$d}else Ae&&this.$d[Ae](De);return this.init(),this},z.set=function(N,B){return this.clone().$set(N,B)},z.get=function(N){return this[F.p(N)]()},z.add=function(N,B){var D,oe=this;N=Number(N);var de=F.p(B),Ae=function(lt){var me=U(oe);return F.w(me.date(me.date()+Math.round(lt*N)),oe)};if(de===h)return this.set(h,this.$M+N);if(de===f)return this.set(f,this.$y+N);if(de===c)return Ae(1);if(de===u)return Ae(7);var De=(D={},D[a]=r,D[l]=i,D[o]=n,D)[de]||1,rt=this.$d.getTime()+N*De;return F.w(rt,this)},z.subtract=function(N,B){return this.add(-1*N,B)},z.format=function(N){var B=this,D=this.$locale();if(!this.isValid())return D.invalidDate||m;var oe=N||"YYYY-MM-DDTHH:mm:ssZ",de=F.z(this),Ae=this.$H,De=this.$m,rt=this.$M,lt=D.weekdays,me=D.months,G=D.meridiem,R=function(J,we,be,y){return J&&(J[we]||J(B,oe))||be[we].slice(0,y)},X=function(J){return F.s(Ae%12||12,J,"0")},W=G||function(J,we,be){var y=J<12?"AM":"PM";return be?y.toLowerCase():y};return oe.replace(_,function(J,we){return we||function(be){switch(be){case"YY":return String(B.$y).slice(-2);case"YYYY":return F.s(B.$y,4,"0");case"M":return rt+1;case"MM":return F.s(rt+1,2,"0");case"MMM":return R(D.monthsShort,rt,me,3);case"MMMM":return R(me,rt);case"D":return B.$D;case"DD":return F.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return R(D.weekdaysMin,B.$W,lt,2);case"ddd":return R(D.weekdaysShort,B.$W,lt,3);case"dddd":return lt[B.$W];case"H":return String(Ae);case"HH":return F.s(Ae,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return W(Ae,De,!0);case"A":return W(Ae,De,!1);case"m":return String(De);case"mm":return F.s(De,2,"0");case"s":return String(B.$s);case"ss":return F.s(B.$s,2,"0");case"SSS":return F.s(B.$ms,3,"0");case"Z":return de}return null}(J)||de.replace(":","")})},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function(N,B,D){var oe,de=this,Ae=F.p(B),De=U(N),rt=(De.utcOffset()-this.utcOffset())*r,lt=this-De,me=function(){return F.m(de,De)};switch(Ae){case f:oe=me()/12;break;case h:oe=me();break;case d:oe=me()/3;break;case u:oe=(lt-rt)/6048e5;break;case c:oe=(lt-rt)/864e5;break;case l:oe=lt/i;break;case a:oe=lt/r;break;case o:oe=lt/n;break;default:oe=lt}return D?oe:F.a(oe)},z.daysInMonth=function(){return this.endOf(h).$D},z.$locale=function(){return w[this.$L]},z.locale=function(N,B){if(!N)return this.$L;var D=this.clone(),oe=k(N,B,!0);return oe&&(D.$L=oe),D},z.clone=function(){return F.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},q}(),pe=$.prototype;return U.prototype=pe,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",h],["$y",f],["$D",p]].forEach(function(q){pe[q[1]]=function(z){return this.$g(z,q[0],q[1])}}),U.extend=function(q,z){return q.$i||(q(z,$,U),q.$i=!0),U},U.locale=k,U.isDayjs=M,U.unix=function(q){return U(1e3*q)},U.en=w[A],U.Ls=w,U.p={},U})})(UO);var TH=UO.exports;const $O=BO(TH);var HO={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(FO,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(m){return(m=+m)+(m>68?1900:2e3)},c=function(m){return function(g){this[m]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var _=g.match(/([+-]|\d\d)/g),v=60*_[1]+(+_[2]||0);return v===0?0:_[0]==="+"?-v:v}(m)}],h=function(m){var g=a[m];return g&&(g.indexOf?g:g.s.concat(g.f))},d=function(m,g){var _,v=a.meridiem;if(v){for(var T=1;T<=24;T+=1)if(m.indexOf(v(T,0,g))>-1){_=T>12;break}}else _=m===(g?"pm":"PM");return _},f={A:[o,function(m){this.afternoon=d(m,!1)}],a:[o,function(m){this.afternoon=d(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[i,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[i,c("day")],Do:[o,function(m){var g=a.ordinal,_=m.match(/\d+/);if(this.day=_[0],g)for(var v=1;v<=31;v+=1)g(v).replace(/\[|\]/g,"")===m&&(this.day=v)}],M:[s,c("month")],MM:[i,c("month")],MMM:[o,function(m){var g=h("months"),_=(h("monthsShort")||g.map(function(v){return v.slice(0,3)})).indexOf(m)+1;if(_<1)throw new Error;this.month=_%12||_}],MMMM:[o,function(m){var g=h("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(m){this.year=l(m)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function p(m){var g,_;g=m,_=a&&a.formats;for(var v=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(k,U,F){var $=F&&F.toUpperCase();return U||_[F]||n[F]||_[$].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(pe,q,z){return q||z.slice(1)})})).match(r),T=v.length,I=0;I<T;I+=1){var A=v[I],w=f[A],O=w&&w[0],M=w&&w[1];v[I]=M?{regex:O,parser:M}:A.replace(/^\[|\]$/g,"")}return function(k){for(var U={},F=0,$=0;F<T;F+=1){var pe=v[F];if(typeof pe=="string")$+=pe.length;else{var q=pe.regex,z=pe.parser,N=k.slice($),B=q.exec(N)[0];z.call(U,B),k=k.replace(B,"")}}return function(D){var oe=D.afternoon;if(oe!==void 0){var de=D.hours;oe?de<12&&(D.hours+=12):de===12&&(D.hours=0),delete D.afternoon}}(U),U}}return function(m,g,_){_.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var v=g.prototype,T=v.parse;v.parse=function(I){var A=I.date,w=I.utc,O=I.args;this.$u=w;var M=O[1];if(typeof M=="string"){var k=O[2]===!0,U=O[3]===!0,F=k||U,$=O[2];U&&($=O[2]),a=this.$locale(),!k&&$&&(a=_.Ls[$]),this.$d=function(N,B,D){try{if(["x","X"].indexOf(B)>-1)return new Date((B==="X"?1e3:1)*N);var oe=p(B)(N),de=oe.year,Ae=oe.month,De=oe.day,rt=oe.hours,lt=oe.minutes,me=oe.seconds,G=oe.milliseconds,R=oe.zone,X=new Date,W=De||(de||Ae?1:X.getDate()),J=de||X.getFullYear(),we=0;de&&!Ae||(we=Ae>0?Ae-1:X.getMonth());var be=rt||0,y=lt||0,E=me||0,C=G||0;return R?new Date(Date.UTC(J,we,W,be,y,E,C+60*R.offset*1e3)):D?new Date(Date.UTC(J,we,W,be,y,E,C)):new Date(J,we,W,be,y,E,C)}catch{return new Date("")}}(A,M,w),this.init(),$&&$!==!0&&(this.$L=this.locale($).$L),F&&A!=this.format(M)&&(this.$d=new Date("")),a={}}else if(M instanceof Array)for(var pe=M.length,q=1;q<=pe;q+=1){O[1]=M[q-1];var z=_.apply(this,O);if(z.isValid()){this.$d=z.$d,this.$L=z.$L,this.init();break}q===pe&&(this.$d=new Date(""))}else T.call(this,I)}}})})(HO);var wH=HO.exports;const SH=BO(wH);var IH={},Bw={defaultUserAgent:`WiseOldMan JS Client v${IH.npm_package_version}`,baseAPIUrl:"https://api.wiseoldman.net/v2"};function AH(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ls(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}$O.extend(SH);function D_(t,e){return Array.isArray(t)?t.map(n=>D_(n,e)):t!==null&&typeof t=="object"?Object.fromEntries(Object.keys(t).map(n=>[n,D_(t[n],e)])):e(t)}function CH(t){return!t||typeof t!="string"?!1:t.endsWith("Z")&&$O(t.slice(0,-1),"YYYY-MM-DDTHH:mm:ss.SSS",!0).isValid()}function RH(t){return D_(t,e=>CH(e)?new Date(e):e)}function Uw(t,e,n){if(n){if(t===400)throw new kH(e,n.message,n.data);if(t===403)throw new OH(e,n.message);if(t===404)throw new NH(e,n.message);if(t===429)throw new MH(e,n.message);if(t===500)throw new PH(e,n.message)}}class kH extends Error{constructor(e,n,r){super(n),this.name="BadRequestError",this.resource=e,this.statusCode=400,this.data=r}}class OH extends Error{constructor(e,n){super(n),this.name="ForbiddenError",this.resource=e,this.statusCode=403}}class NH extends Error{constructor(e,n){super(n),this.name="NotFoundError",this.resource=e,this.statusCode=404}}class MH extends Error{constructor(e,n){super(n),this.name="RateLimitError",this.resource=e,this.statusCode=429}}class PH extends Error{constructor(e,n){super(n),this.name="InternalServerError",this.resource=e,this.statusCode=500}}class to{constructor(e,n){this.baseUrl=n,this.headers=Object.assign({Accept:"application/json","Content-Type":"application/json"},e)}buildParams(e){var n=AH(e,[]);const r=new URLSearchParams;Object.keys(n).filter(s=>n[s]!==void 0).forEach(s=>r.set(s,n[s]));const i=r.toString();return i?`?${i}`:""}fetch({method:e,path:n,body:r,params:i}){return ls(this,void 0,void 0,function*(){const s={method:e,body:void 0,headers:this.headers};let o="";return r&&(s.body=JSON.stringify(r)),i&&(o=this.buildParams(i)),yield fetch(this.baseUrl+n+o,s)})}request({method:e,path:n,body:r,params:i}){return ls(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.json();if(s.ok)return RH(o);Uw(s.status,n,o)})}requestText({method:e,path:n,body:r,params:i}){return ls(this,void 0,void 0,function*(){const s=yield this.fetch({method:e,path:n,body:r,params:i}),o=yield s.text();if(s.ok)return o;Uw(s.status,n,JSON.parse(o))})}postRequest(e,n){return ls(this,void 0,void 0,function*(){return yield this.request({method:"POST",path:e,body:n||{}})})}putRequest(e,n){return ls(this,void 0,void 0,function*(){return yield this.request({method:"PUT",path:e,body:n||{}})})}deleteRequest(e,n){return ls(this,void 0,void 0,function*(){return yield this.request({method:"DELETE",path:e,body:n||{}})})}getRequest(e,n){return ls(this,void 0,void 0,function*(){return yield this.request({method:"GET",path:e,params:n})})}getText(e,n){return ls(this,void 0,void 0,function*(){return yield this.requestText({method:"GET",path:e,params:n})})}}class xH extends to{getDeltaLeaderboard(e){return this.getRequest("/deltas/leaderboard",e)}}class DH extends to{searchGroups(e,n){return this.getRequest("/groups",Object.assign({name:e},n))}getGroupDetails(e){return this.getRequest(`/groups/${e}`)}createGroup(e){return this.postRequest("/groups",e)}editGroup(e,n,r){return this.putRequest(`/groups/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteGroup(e,n){return this.deleteRequest(`/groups/${e}`,{verificationCode:n})}addMembers(e,n,r){return this.postRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}removeMembers(e,n,r){return this.deleteRequest(`/groups/${e}/members`,{verificationCode:r,members:n})}changeRole(e,n,r){return this.putRequest(`/groups/${e}/role`,Object.assign(Object.assign({},n),{verificationCode:r}))}updateAll(e,n){return this.postRequest(`/groups/${e}/update-all`,{verificationCode:n})}getGroupCompetitions(e,n){return this.getRequest(`/groups/${e}/competitions`,Object.assign({},n))}getGroupGains(e,n,r){return this.getRequest(`/groups/${e}/gained`,Object.assign(Object.assign({},r),n))}getGroupAchievements(e,n){return this.getRequest(`/groups/${e}/achievements`,Object.assign({},n))}getGroupRecords(e,n,r){return this.getRequest(`/groups/${e}/records`,Object.assign(Object.assign({},r),n))}getGroupHiscores(e,n,r){return this.getRequest(`/groups/${e}/hiscores`,Object.assign(Object.assign({},r),{metric:n}))}getGroupNameChanges(e,n){return this.getRequest(`/groups/${e}/name-changes`,Object.assign({},n))}getGroupStatistics(e){return this.getRequest(`/groups/${e}/statistics`)}getGroupActivity(e,n){return this.getRequest(`/groups/${e}/activity`,Object.assign({},n))}getMembersCSV(e){return this.getText(`/groups/${e}/csv`)}}class LH extends to{searchPlayers(e,n){return this.getRequest("/players/search",Object.assign({username:e},n))}updatePlayer(e){return this.postRequest(`/players/${e}`)}assertPlayerType(e){return this.postRequest(`/players/${e}/assert-type`)}getPlayerDetails(e){return this.getRequest(`/players/${e}`)}getPlayerDetailsById(e){return this.getRequest(`/players/id/${e}`)}getPlayerAchievements(e){return this.getRequest(`/players/${e}/achievements`)}getPlayerAchievementProgress(e){return this.getRequest(`/players/${e}/achievements/progress`)}getPlayerCompetitions(e,n,r){return this.getRequest(`/players/${e}/competitions`,Object.assign(Object.assign({},n),r))}getPlayerCompetitionStandings(e,n){return this.getRequest(`/players/${e}/competitions/standings`,n)}getPlayerGroups(e,n){return this.getRequest(`/players/${e}/groups`,n)}getPlayerGains(e,n){return this.getRequest(`/players/${e}/gained`,n)}getPlayerGainsAsArray(e,n){return this.getRequest(`/players/${e}/gained`,Object.assign(Object.assign({},n),{formatting:"array"}))}getPlayerRecords(e,n){return this.getRequest(`/players/${e}/records`,n)}getPlayerSnapshots(e,n,r){return this.getRequest(`/players/${e}/snapshots`,Object.assign(Object.assign({},n),r))}getPlayerSnapshotTimeline(e,n,r){return this.getRequest(`/players/${e}/snapshots/timeline`,Object.assign(Object.assign({},r),{metric:n}))}getPlayerNames(e){return this.getRequest(`/players/${e}/names`)}getPlayerArchives(e){return this.getRequest(`/players/${e}/archives`)}}class VH extends to{getRecordLeaderboard(e){return this.getRequest("/records/leaderboard",e)}}const pt={OVERALL:"overall",ATTACK:"attack",DEFENCE:"defence",STRENGTH:"strength",HITPOINTS:"hitpoints",RANGED:"ranged",PRAYER:"prayer",MAGIC:"magic",COOKING:"cooking",WOODCUTTING:"woodcutting",FLETCHING:"fletching",FISHING:"fishing",FIREMAKING:"firemaking",CRAFTING:"crafting",SMITHING:"smithing",MINING:"mining",HERBLORE:"herblore",AGILITY:"agility",THIEVING:"thieving",SLAYER:"slayer",FARMING:"farming",RUNECRAFTING:"runecrafting",HUNTER:"hunter",CONSTRUCTION:"construction"},un={LEAGUE_POINTS:"league_points",BOUNTY_HUNTER_HUNTER:"bounty_hunter_hunter",BOUNTY_HUNTER_ROGUE:"bounty_hunter_rogue",CLUE_SCROLLS_ALL:"clue_scrolls_all",CLUE_SCROLLS_BEGINNER:"clue_scrolls_beginner",CLUE_SCROLLS_EASY:"clue_scrolls_easy",CLUE_SCROLLS_MEDIUM:"clue_scrolls_medium",CLUE_SCROLLS_HARD:"clue_scrolls_hard",CLUE_SCROLLS_ELITE:"clue_scrolls_elite",CLUE_SCROLLS_MASTER:"clue_scrolls_master",LAST_MAN_STANDING:"last_man_standing",PVP_ARENA:"pvp_arena",SOUL_WARS_ZEAL:"soul_wars_zeal",GUARDIANS_OF_THE_RIFT:"guardians_of_the_rift",COLOSSEUM_GLORY:"colosseum_glory"},ce={ABYSSAL_SIRE:"abyssal_sire",ALCHEMICAL_HYDRA:"alchemical_hydra",ARTIO:"artio",BARROWS_CHESTS:"barrows_chests",BRYOPHYTA:"bryophyta",CALLISTO:"callisto",CALVARION:"calvarion",CERBERUS:"cerberus",CHAMBERS_OF_XERIC:"chambers_of_xeric",CHAMBERS_OF_XERIC_CM:"chambers_of_xeric_challenge_mode",CHAOS_ELEMENTAL:"chaos_elemental",CHAOS_FANATIC:"chaos_fanatic",COMMANDER_ZILYANA:"commander_zilyana",CORPOREAL_BEAST:"corporeal_beast",CRAZY_ARCHAEOLOGIST:"crazy_archaeologist",DAGANNOTH_PRIME:"dagannoth_prime",DAGANNOTH_REX:"dagannoth_rex",DAGANNOTH_SUPREME:"dagannoth_supreme",DERANGED_ARCHAEOLOGIST:"deranged_archaeologist",DUKE_SUCELLUS:"duke_sucellus",GENERAL_GRAARDOR:"general_graardor",GIANT_MOLE:"giant_mole",GROTESQUE_GUARDIANS:"grotesque_guardians",HESPORI:"hespori",KALPHITE_QUEEN:"kalphite_queen",KING_BLACK_DRAGON:"king_black_dragon",KRAKEN:"kraken",KREEARRA:"kreearra",KRIL_TSUTSAROTH:"kril_tsutsaroth",LUNAR_CHESTS:"lunar_chests",MIMIC:"mimic",NEX:"nex",NIGHTMARE:"nightmare",PHOSANIS_NIGHTMARE:"phosanis_nightmare",OBOR:"obor",PHANTOM_MUSPAH:"phantom_muspah",SARACHNIS:"sarachnis",SCORPIA:"scorpia",SCURRIUS:"scurrius",SKOTIZO:"skotizo",SOL_HEREDIT:"sol_heredit",SPINDEL:"spindel",TEMPOROSS:"tempoross",THE_GAUNTLET:"the_gauntlet",THE_CORRUPTED_GAUNTLET:"the_corrupted_gauntlet",THE_LEVIATHAN:"the_leviathan",THE_WHISPERER:"the_whisperer",THEATRE_OF_BLOOD:"theatre_of_blood",THEATRE_OF_BLOOD_HARD_MODE:"theatre_of_blood_hard_mode",THERMONUCLEAR_SMOKE_DEVIL:"thermonuclear_smoke_devil",TOMBS_OF_AMASCUT:"tombs_of_amascut",TOMBS_OF_AMASCUT_EXPERT:"tombs_of_amascut_expert",TZKAL_ZUK:"tzkal_zuk",TZTOK_JAD:"tztok_jad",VARDORVIS:"vardorvis",VENENATIS:"venenatis",VETION:"vetion",VORKATH:"vorkath",WINTERTODT:"wintertodt",ZALCANO:"zalcano",ZULRAH:"zulrah"},Uf={EHP:"ehp",EHB:"ehb"},L_=Object.assign(Object.assign(Object.assign(Object.assign({},pt),un),ce),Uf),b={ACHIEVER:"achiever",ADAMANT:"adamant",ADEPT:"adept",ADMINISTRATOR:"administrator",ADMIRAL:"admiral",ADVENTURER:"adventurer",AIR:"air",ANCHOR:"anchor",APOTHECARY:"apothecary",ARCHER:"archer",ARMADYLEAN:"armadylean",ARTILLERY:"artillery",ARTISAN:"artisan",ASGARNIAN:"asgarnian",ASSASSIN:"assassin",ASSISTANT:"assistant",ASTRAL:"astral",ATHLETE:"athlete",ATTACKER:"attacker",BANDIT:"bandit",BANDOSIAN:"bandosian",BARBARIAN:"barbarian",BATTLEMAGE:"battlemage",BEAST:"beast",BERSERKER:"berserker",BLISTERWOOD:"blisterwood",BLOOD:"blood",BLUE:"blue",BOB:"bob",BODY:"body",BRASSICAN:"brassican",BRAWLER:"brawler",BRIGADIER:"brigadier",BRIGAND:"brigand",BRONZE:"bronze",BRUISER:"bruiser",BULWARK:"bulwark",BURGLAR:"burglar",BURNT:"burnt",CADET:"cadet",CAPTAIN:"captain",CARRY:"carry",CHAMPION:"champion",CHAOS:"chaos",CLERIC:"cleric",COLLECTOR:"collector",COLONEL:"colonel",COMMANDER:"commander",COMPETITOR:"competitor",COMPLETIONIST:"completionist",CONSTRUCTOR:"constructor",COOK:"cook",COORDINATOR:"coordinator",CORPORAL:"corporal",COSMIC:"cosmic",COUNCILLOR:"councillor",CRAFTER:"crafter",CREW:"crew",CRUSADER:"crusader",CUTPURSE:"cutpurse",DEATH:"death",DEFENDER:"defender",DEFILER:"defiler",DEPUTY_OWNER:"deputy_owner",DESTROYER:"destroyer",DIAMOND:"diamond",DISEASED:"diseased",DOCTOR:"doctor",DOGSBODY:"dogsbody",DRAGON:"dragon",DRAGONSTONE:"dragonstone",DRUID:"druid",DUELLIST:"duellist",EARTH:"earth",ELITE:"elite",EMERALD:"emerald",ENFORCER:"enforcer",EPIC:"epic",EXECUTIVE:"executive",EXPERT:"expert",EXPLORER:"explorer",FARMER:"farmer",FEEDER:"feeder",FIGHTER:"fighter",FIRE:"fire",FIREMAKER:"firemaker",FIRESTARTER:"firestarter",FISHER:"fisher",FLETCHER:"fletcher",FORAGER:"forager",FREMENNIK:"fremennik",GAMER:"gamer",GATHERER:"gatherer",GENERAL:"general",GNOME_CHILD:"gnome_child",GNOME_ELDER:"gnome_elder",GOBLIN:"goblin",GOLD:"gold",GOON:"goon",GREEN:"green",GREY:"grey",GUARDIAN:"guardian",GUTHIXIAN:"guthixian",HARPOON:"harpoon",HEALER:"healer",HELLCAT:"hellcat",HELPER:"helper",HERBOLOGIST:"herbologist",HERO:"hero",HOLY:"holy",HOARDER:"hoarder",HUNTER:"hunter",IGNITOR:"ignitor",ILLUSIONIST:"illusionist",IMP:"imp",INFANTRY:"infantry",INQUISITOR:"inquisitor",IRON:"iron",JADE:"jade",JUSTICIAR:"justiciar",KANDARIN:"kandarin",KARAMJAN:"karamjan",KHARIDIAN:"kharidian",KITTEN:"kitten",KNIGHT:"knight",LABOURER:"labourer",LAW:"law",LEADER:"leader",LEARNER:"learner",LEGACY:"legacy",LEGEND:"legend",LEGIONNAIRE:"legionnaire",LIEUTENANT:"lieutenant",LOOTER:"looter",LUMBERJACK:"lumberjack",MAGIC:"magic",MAGICIAN:"magician",MAJOR:"major",MAPLE:"maple",MARSHAL:"marshal",MASTER:"master",MAXED:"maxed",MEDIATOR:"mediator",MEDIC:"medic",MENTOR:"mentor",MEMBER:"member",MERCHANT:"merchant",MIND:"mind",MINER:"miner",MINION:"minion",MISTHALINIAN:"misthalinian",MITHRIL:"mithril",MODERATOR:"moderator",MONARCH:"monarch",MORYTANIAN:"morytanian",MYSTIC:"mystic",MYTH:"myth",NATURAL:"natural",NATURE:"nature",NECROMANCER:"necromancer",NINJA:"ninja",NOBLE:"noble",NOVICE:"novice",NURSE:"nurse",OAK:"oak",OFFICER:"officer",ONYX:"onyx",OPAL:"opal",ORACLE:"oracle",ORANGE:"orange",OWNER:"owner",PAGE:"page",PALADIN:"paladin",PAWN:"pawn",PILGRIM:"pilgrim",PINE:"pine",PINK:"pink",PREFECT:"prefect",PRIEST:"priest",PRIVATE:"private",PRODIGY:"prodigy",PROSELYTE:"proselyte",PROSPECTOR:"prospector",PROTECTOR:"protector",PURE:"pure",PURPLE:"purple",PYROMANCER:"pyromancer",QUESTER:"quester",RACER:"racer",RAIDER:"raider",RANGER:"ranger",RECORD_CHASER:"record_chaser",RECRUIT:"recruit",RECRUITER:"recruiter",RED_TOPAZ:"red_topaz",RED:"red",ROGUE:"rogue",RUBY:"ruby",RUNE:"rune",RUNECRAFTER:"runecrafter",SAGE:"sage",SAPPHIRE:"sapphire",SARADOMINIST:"saradominist",SAVIOUR:"saviour",SCAVENGER:"scavenger",SCHOLAR:"scholar",SCOURGE:"scourge",SCOUT:"scout",SCRIBE:"scribe",SEER:"seer",SENATOR:"senator",SENTRY:"sentry",SERENIST:"serenist",SERGEANT:"sergeant",SHAMAN:"shaman",SHERIFF:"sheriff",SHORT_GREEN_GUY:"short_green_guy",SKILLER:"skiller",SKULLED:"skulled",SLAYER:"slayer",SMITER:"smiter",SMITH:"smith",SMUGGLER:"smuggler",SNIPER:"sniper",SOUL:"soul",SPECIALIST:"specialist",SPEED_RUNNER:"speed_runner",SPELLCASTER:"spellcaster",SQUIRE:"squire",STAFF:"staff",STEEL:"steel",STRIDER:"strider",STRIKER:"striker",SUMMONER:"summoner",SUPERIOR:"superior",SUPERVISOR:"supervisor",TEACHER:"teacher",TEMPLAR:"templar",THERAPIST:"therapist",THIEF:"thief",TIRANNIAN:"tirannian",TRIALIST:"trialist",TRICKSTER:"trickster",TZKAL:"tzkal",TZTOK:"tztok",UNHOLY:"unholy",VAGRANT:"vagrant",VANGUARD:"vanguard",WALKER:"walker",WANDERER:"wanderer",WARDEN:"warden",WARLOCK:"warlock",WARRIOR:"warrior",WATER:"water",WILD:"wild",WILLOW:"willow",WILY:"wily",WINTUMBER:"wintumber",WITCH:"witch",WIZARD:"wizard",WORKER:"worker",WRATH:"wrath",XERICIAN:"xerician",YELLOW:"yellow",YEW:"yew",ZAMORAKIAN:"zamorakian",ZAROSIAN:"zarosian",ZEALOT:"zealot",ZENYTE:"zenyte"};var Za;(function(t){t.UPCOMING="upcoming",t.ONGOING="ongoing",t.FINISHED="finished"})(Za||(Za={}));var $w;(function(t){t.TEAM="team",t.TEAMS="teams",t.PARTICIPANTS="participants"})($w||($w={}));Za.UPCOMING+"",Za.ONGOING+"",Za.FINISHED+"";Object.values(Za);function Ih(t,e){const n={};return Object.keys(t).forEach(r=>{const i=r;n[i]=e(t[i],i,t)}),n}const FH=[b.ADMINISTRATOR,b.OWNER,b.LEADER,b.DEPUTY_OWNER,b.MODERATOR];Ih({[b.ACHIEVER]:{name:"Achiever"},[b.ADAMANT]:{name:"Adamant"},[b.ADEPT]:{name:"Adept"},[b.ADMINISTRATOR]:{name:"Administrator"},[b.ADMIRAL]:{name:"Admiral"},[b.ADVENTURER]:{name:"Adventurer"},[b.AIR]:{name:"Air"},[b.ANCHOR]:{name:"Anchor"},[b.APOTHECARY]:{name:"Apothecary"},[b.ARCHER]:{name:"Archer"},[b.ARMADYLEAN]:{name:"Armadylean"},[b.ARTILLERY]:{name:"Artillery"},[b.ARTISAN]:{name:"Artisan"},[b.ASGARNIAN]:{name:"Asgarnian"},[b.ASSASSIN]:{name:"Assassin"},[b.ASSISTANT]:{name:"Assistant"},[b.ASTRAL]:{name:"Astral"},[b.ATHLETE]:{name:"Athlete"},[b.ATTACKER]:{name:"Attacker"},[b.BANDIT]:{name:"Bandit"},[b.BANDOSIAN]:{name:"Bandosian"},[b.BARBARIAN]:{name:"Barbarian"},[b.BATTLEMAGE]:{name:"Battlemage"},[b.BEAST]:{name:"Beast"},[b.BERSERKER]:{name:"Berserker"},[b.BLISTERWOOD]:{name:"Blisterwood"},[b.BLOOD]:{name:"Blood"},[b.BLUE]:{name:"Blue"},[b.BOB]:{name:"Bob"},[b.BODY]:{name:"Body"},[b.BRASSICAN]:{name:"Brassican"},[b.BRAWLER]:{name:"Brawler"},[b.BRIGADIER]:{name:"Brigadier"},[b.BRIGAND]:{name:"Brigand"},[b.BRONZE]:{name:"Bronze"},[b.BRUISER]:{name:"Bruiser"},[b.BULWARK]:{name:"Bulwark"},[b.BURGLAR]:{name:"Burglar"},[b.BURNT]:{name:"Burnt"},[b.CADET]:{name:"Cadet"},[b.CAPTAIN]:{name:"Captain"},[b.CARRY]:{name:"Carry"},[b.CHAMPION]:{name:"Champion"},[b.CHAOS]:{name:"Chaos"},[b.CLERIC]:{name:"Cleric"},[b.COLLECTOR]:{name:"Collector"},[b.COLONEL]:{name:"Colonel"},[b.COMMANDER]:{name:"Commander"},[b.COMPETITOR]:{name:"Competitor"},[b.COMPLETIONIST]:{name:"Completionist"},[b.CONSTRUCTOR]:{name:"Constructor"},[b.COOK]:{name:"Cook"},[b.COORDINATOR]:{name:"Coordinator"},[b.CORPORAL]:{name:"Corporal"},[b.COSMIC]:{name:"Cosmic"},[b.COUNCILLOR]:{name:"Councillor"},[b.CRAFTER]:{name:"Crafter"},[b.CREW]:{name:"Crew"},[b.CRUSADER]:{name:"Crusader"},[b.CUTPURSE]:{name:"Cutpurse"},[b.DEATH]:{name:"Death"},[b.DEFENDER]:{name:"Defender"},[b.DEFILER]:{name:"Defiler"},[b.DEPUTY_OWNER]:{name:"Deputy Owner"},[b.DESTROYER]:{name:"Destroyer"},[b.DIAMOND]:{name:"Diamond"},[b.DISEASED]:{name:"Diseased"},[b.DOCTOR]:{name:"Doctor"},[b.DOGSBODY]:{name:"Dogsbody"},[b.DRAGON]:{name:"Dragon"},[b.DRAGONSTONE]:{name:"Dragonstone"},[b.DRUID]:{name:"Druid"},[b.DUELLIST]:{name:"Duellist"},[b.EARTH]:{name:"Earth"},[b.ELITE]:{name:"Elite"},[b.EMERALD]:{name:"Emerald"},[b.ENFORCER]:{name:"Enforcer"},[b.EPIC]:{name:"Epic"},[b.EXECUTIVE]:{name:"Executive"},[b.EXPERT]:{name:"Expert"},[b.EXPLORER]:{name:"Explorer"},[b.FARMER]:{name:"Farmer"},[b.FEEDER]:{name:"Feeder"},[b.FIGHTER]:{name:"Fighter"},[b.FIRE]:{name:"Fire"},[b.FIREMAKER]:{name:"Firemaker"},[b.FIRESTARTER]:{name:"Firestarter"},[b.FISHER]:{name:"Fisher"},[b.FLETCHER]:{name:"Fletcher"},[b.FORAGER]:{name:"Forager"},[b.FREMENNIK]:{name:"Fremennik"},[b.GAMER]:{name:"Gamer"},[b.GATHERER]:{name:"Gatherer"},[b.GENERAL]:{name:"General"},[b.GNOME_CHILD]:{name:"Gnome Child"},[b.GNOME_ELDER]:{name:"Gnome Elder"},[b.GOBLIN]:{name:"Goblin"},[b.GOLD]:{name:"Gold"},[b.GOON]:{name:"Goon"},[b.GREEN]:{name:"Green"},[b.GREY]:{name:"Grey"},[b.GUARDIAN]:{name:"Guardian"},[b.GUTHIXIAN]:{name:"Guthixian"},[b.HARPOON]:{name:"Harpoon"},[b.HEALER]:{name:"Healer"},[b.HELLCAT]:{name:"Hellcat"},[b.HELPER]:{name:"Helper"},[b.HERBOLOGIST]:{name:"Herbologist"},[b.HERO]:{name:"Hero"},[b.HOLY]:{name:"Holy"},[b.HOARDER]:{name:"Hoarder"},[b.HUNTER]:{name:"Hunter"},[b.IGNITOR]:{name:"Ignitor"},[b.ILLUSIONIST]:{name:"Illusionist"},[b.IMP]:{name:"Imp"},[b.INFANTRY]:{name:"Infantry"},[b.INQUISITOR]:{name:"Inquisitor"},[b.IRON]:{name:"Iron"},[b.JADE]:{name:"Jade"},[b.JUSTICIAR]:{name:"Justiciar"},[b.KANDARIN]:{name:"Kandarin"},[b.KARAMJAN]:{name:"Karamjan"},[b.KHARIDIAN]:{name:"Kharidian"},[b.KITTEN]:{name:"Kitten"},[b.KNIGHT]:{name:"Knight"},[b.LABOURER]:{name:"Labourer"},[b.LAW]:{name:"Law"},[b.LEADER]:{name:"Leader"},[b.LEARNER]:{name:"Learner"},[b.LEGACY]:{name:"Legacy"},[b.LEGEND]:{name:"Legend"},[b.LEGIONNAIRE]:{name:"Legionnaire"},[b.LIEUTENANT]:{name:"Lieutenant"},[b.LOOTER]:{name:"Looter"},[b.LUMBERJACK]:{name:"Lumberjack"},[b.MAGIC]:{name:"Magic"},[b.MAGICIAN]:{name:"Magician"},[b.MAJOR]:{name:"Major"},[b.MAPLE]:{name:"Maple"},[b.MARSHAL]:{name:"Marshal"},[b.MASTER]:{name:"Master"},[b.MAXED]:{name:"Maxed"},[b.MEDIATOR]:{name:"Mediator"},[b.MEDIC]:{name:"Medic"},[b.MENTOR]:{name:"Mentor"},[b.MEMBER]:{name:"Member"},[b.MERCHANT]:{name:"Merchant"},[b.MIND]:{name:"Mind"},[b.MINER]:{name:"Miner"},[b.MINION]:{name:"Minion"},[b.MISTHALINIAN]:{name:"Misthalinian"},[b.MITHRIL]:{name:"Mithril"},[b.MODERATOR]:{name:"Moderator"},[b.MONARCH]:{name:"Monarch"},[b.MORYTANIAN]:{name:"Morytanian"},[b.MYSTIC]:{name:"Mystic"},[b.MYTH]:{name:"Myth"},[b.NATURAL]:{name:"Natural"},[b.NATURE]:{name:"Nature"},[b.NECROMANCER]:{name:"Necromancer"},[b.NINJA]:{name:"Ninja"},[b.NOBLE]:{name:"Noble"},[b.NOVICE]:{name:"Novice"},[b.NURSE]:{name:"Nurse"},[b.OAK]:{name:"Oak"},[b.OFFICER]:{name:"Officer"},[b.ONYX]:{name:"Onyx"},[b.OPAL]:{name:"Opal"},[b.ORACLE]:{name:"Oracle"},[b.ORANGE]:{name:"Orange"},[b.OWNER]:{name:"Owner"},[b.PAGE]:{name:"Page"},[b.PALADIN]:{name:"Paladin"},[b.PAWN]:{name:"Pawn"},[b.PILGRIM]:{name:"Pilgrim"},[b.PINE]:{name:"Pine"},[b.PINK]:{name:"Pink"},[b.PREFECT]:{name:"Prefect"},[b.PRIEST]:{name:"Priest"},[b.PRIVATE]:{name:"Private"},[b.PRODIGY]:{name:"Prodigy"},[b.PROSELYTE]:{name:"Proselyte"},[b.PROSPECTOR]:{name:"Prospector"},[b.PROTECTOR]:{name:"Protector"},[b.PURE]:{name:"Pure"},[b.PURPLE]:{name:"Purple"},[b.PYROMANCER]:{name:"Pyromancer"},[b.QUESTER]:{name:"Quester"},[b.RACER]:{name:"Racer"},[b.RAIDER]:{name:"Raider"},[b.RANGER]:{name:"Ranger"},[b.RECORD_CHASER]:{name:"Record-Chaser"},[b.RECRUIT]:{name:"Recruit"},[b.RECRUITER]:{name:"Recruiter"},[b.RED_TOPAZ]:{name:"Red Topaz"},[b.RED]:{name:"Red"},[b.ROGUE]:{name:"Rogue"},[b.RUBY]:{name:"Ruby"},[b.RUNE]:{name:"Rune"},[b.RUNECRAFTER]:{name:"Runecrafter"},[b.SAGE]:{name:"Sage"},[b.SAPPHIRE]:{name:"Sapphire"},[b.SARADOMINIST]:{name:"Saradominist"},[b.SAVIOUR]:{name:"Saviour"},[b.SCAVENGER]:{name:"Scavenger"},[b.SCHOLAR]:{name:"Scholar"},[b.SCOURGE]:{name:"Scourge"},[b.SCOUT]:{name:"Scout"},[b.SCRIBE]:{name:"Scribe"},[b.SEER]:{name:"Seer"},[b.SENATOR]:{name:"Senator"},[b.SENTRY]:{name:"Sentry"},[b.SERENIST]:{name:"Serenist"},[b.SERGEANT]:{name:"Sergeant"},[b.SHAMAN]:{name:"Shaman"},[b.SHERIFF]:{name:"Sheriff"},[b.SHORT_GREEN_GUY]:{name:"Short Green Guy"},[b.SKILLER]:{name:"Skiller"},[b.SKULLED]:{name:"Skulled"},[b.SLAYER]:{name:"Slayer"},[b.SMITER]:{name:"Smiter"},[b.SMITH]:{name:"Smith"},[b.SMUGGLER]:{name:"Smuggler"},[b.SNIPER]:{name:"Sniper"},[b.SOUL]:{name:"Soul"},[b.SPECIALIST]:{name:"Specialist"},[b.SPEED_RUNNER]:{name:"Speed-Runner"},[b.SPELLCASTER]:{name:"Spellcaster"},[b.SQUIRE]:{name:"Squire"},[b.STAFF]:{name:"Staff"},[b.STEEL]:{name:"Steel"},[b.STRIDER]:{name:"Strider"},[b.STRIKER]:{name:"Striker"},[b.SUMMONER]:{name:"Summoner"},[b.SUPERIOR]:{name:"Superior"},[b.SUPERVISOR]:{name:"Supervisor"},[b.TEACHER]:{name:"Teacher"},[b.TEMPLAR]:{name:"Templar"},[b.THERAPIST]:{name:"Therapist"},[b.THIEF]:{name:"Thief"},[b.TIRANNIAN]:{name:"Tirannian"},[b.TRIALIST]:{name:"Trialist"},[b.TRICKSTER]:{name:"Trickster"},[b.TZKAL]:{name:"TzKal"},[b.TZTOK]:{name:"TzTok"},[b.UNHOLY]:{name:"Unholy"},[b.VAGRANT]:{name:"Vagrant"},[b.VANGUARD]:{name:"Vanguard"},[b.WALKER]:{name:"Walker"},[b.WANDERER]:{name:"Wanderer"},[b.WARDEN]:{name:"Warden"},[b.WARLOCK]:{name:"Warlock"},[b.WARRIOR]:{name:"Warrior"},[b.WATER]:{name:"Water"},[b.WILD]:{name:"Wild"},[b.WILLOW]:{name:"Willow"},[b.WILY]:{name:"Wily"},[b.WINTUMBER]:{name:"Wintumber"},[b.WITCH]:{name:"Witch"},[b.WIZARD]:{name:"Wizard"},[b.WORKER]:{name:"Worker"},[b.WRATH]:{name:"Wrath"},[b.XERICIAN]:{name:"Xerician"},[b.YELLOW]:{name:"Yellow"},[b.YEW]:{name:"Yew"},[b.ZAMORAKIAN]:{name:"Zamorakian"},[b.ZAROSIAN]:{name:"Zarosian"},[b.ZEALOT]:{name:"Zealot"},[b.ZENYTE]:{name:"Zenyte"}},(t,e)=>Object.assign(Object.assign({},t),{isPriveleged:FH.includes(e)}));var Il;(function(t){t.SKILL="skill",t.BOSS="boss",t.ACTIVITY="activity",t.COMPUTED="computed"})(Il||(Il={}));var Al;(function(t){t.EXPERIENCE="experience",t.KILLS="kills",t.SCORE="score",t.VALUE="value"})(Al||(Al={}));const BH=Ih({[pt.OVERALL]:{name:"Overall"},[pt.ATTACK]:{name:"Attack",isCombat:!0},[pt.DEFENCE]:{name:"Defence",isCombat:!0},[pt.STRENGTH]:{name:"Strength",isCombat:!0},[pt.HITPOINTS]:{name:"Hitpoints",isCombat:!0},[pt.RANGED]:{name:"Ranged",isCombat:!0},[pt.PRAYER]:{name:"Prayer",isCombat:!0},[pt.MAGIC]:{name:"Magic",isCombat:!0},[pt.COOKING]:{name:"Cooking"},[pt.WOODCUTTING]:{name:"Woodcutting"},[pt.FLETCHING]:{name:"Fletching",isMembers:!0},[pt.FISHING]:{name:"Fishing"},[pt.FIREMAKING]:{name:"Firemaking"},[pt.CRAFTING]:{name:"Crafting"},[pt.SMITHING]:{name:"Smithing"},[pt.MINING]:{name:"Mining"},[pt.HERBLORE]:{name:"Herblore",isMembers:!0},[pt.AGILITY]:{name:"Agility",isMembers:!0},[pt.THIEVING]:{name:"Thieving",isMembers:!0},[pt.SLAYER]:{name:"Slayer",isMembers:!0},[pt.FARMING]:{name:"Farming",isMembers:!0},[pt.RUNECRAFTING]:{name:"Runecrafting"},[pt.HUNTER]:{name:"Hunter",isMembers:!0},[pt.CONSTRUCTION]:{name:"Construction",isMembers:!0}},t=>Object.assign(Object.assign({},t),{type:Il.SKILL,measure:Al.EXPERIENCE,isCombat:"isCombat"in t?t.isCombat:!1,isMembers:"isMembers"in t?t.isMembers:!1})),UH=Ih({[ce.ABYSSAL_SIRE]:{name:"Abyssal Sire"},[ce.ALCHEMICAL_HYDRA]:{name:"Alchemical Hydra"},[ce.ARTIO]:{name:"Artio"},[ce.BARROWS_CHESTS]:{name:"Barrows Chests"},[ce.BRYOPHYTA]:{name:"Bryophyta",isMembers:!1},[ce.CALLISTO]:{name:"Callisto"},[ce.CALVARION]:{name:"Calvar'ion"},[ce.CERBERUS]:{name:"Cerberus"},[ce.CHAMBERS_OF_XERIC]:{name:"Chambers Of Xeric"},[ce.CHAMBERS_OF_XERIC_CM]:{name:"Chambers Of Xeric (CM)"},[ce.CHAOS_ELEMENTAL]:{name:"Chaos Elemental"},[ce.CHAOS_FANATIC]:{name:"Chaos Fanatic"},[ce.COMMANDER_ZILYANA]:{name:"Commander Zilyana"},[ce.CORPOREAL_BEAST]:{name:"Corporeal Beast"},[ce.CRAZY_ARCHAEOLOGIST]:{name:"Crazy Archaeologist"},[ce.DAGANNOTH_PRIME]:{name:"Dagannoth Prime"},[ce.DAGANNOTH_REX]:{name:"Dagannoth Rex"},[ce.DAGANNOTH_SUPREME]:{name:"Dagannoth Supreme"},[ce.DERANGED_ARCHAEOLOGIST]:{name:"Deranged Archaeologist"},[ce.DUKE_SUCELLUS]:{name:"Duke Sucellus"},[ce.GENERAL_GRAARDOR]:{name:"General Graardor"},[ce.GIANT_MOLE]:{name:"Giant Mole"},[ce.GROTESQUE_GUARDIANS]:{name:"Grotesque Guardians"},[ce.HESPORI]:{name:"Hespori"},[ce.KALPHITE_QUEEN]:{name:"Kalphite Queen"},[ce.KING_BLACK_DRAGON]:{name:"King Black Dragon"},[ce.KRAKEN]:{name:"Kraken"},[ce.KREEARRA]:{name:"Kree'Arra"},[ce.KRIL_TSUTSAROTH]:{name:"K'ril Tsutsaroth"},[ce.LUNAR_CHESTS]:{name:"Lunar Chests"},[ce.MIMIC]:{name:"Mimic",minimumValue:1},[ce.NEX]:{name:"Nex"},[ce.NIGHTMARE]:{name:"Nightmare"},[ce.PHOSANIS_NIGHTMARE]:{name:"Phosani's Nightmare"},[ce.OBOR]:{name:"Obor",isMembers:!1},[ce.PHANTOM_MUSPAH]:{name:"Phantom Muspah"},[ce.SARACHNIS]:{name:"Sarachnis"},[ce.SCORPIA]:{name:"Scorpia"},[ce.SCURRIUS]:{name:"Scurrius"},[ce.SKOTIZO]:{name:"Skotizo"},[ce.SOL_HEREDIT]:{name:"Sol Heredit",minimumValue:1},[ce.SPINDEL]:{name:"Spindel"},[ce.TEMPOROSS]:{name:"Tempoross"},[ce.THE_GAUNTLET]:{name:"The Gauntlet"},[ce.THE_CORRUPTED_GAUNTLET]:{name:"The Corrupted Gauntlet"},[ce.THE_LEVIATHAN]:{name:"The Leviathan"},[ce.THE_WHISPERER]:{name:"The Whisperer"},[ce.THEATRE_OF_BLOOD]:{name:"Theatre Of Blood"},[ce.THEATRE_OF_BLOOD_HARD_MODE]:{name:"Theatre Of Blood (HM)"},[ce.THERMONUCLEAR_SMOKE_DEVIL]:{name:"Thermonuclear Smoke Devil"},[ce.TOMBS_OF_AMASCUT]:{name:"Tombs of Amascut"},[ce.TOMBS_OF_AMASCUT_EXPERT]:{name:"Tombs of Amascut (Expert Mode)"},[ce.TZKAL_ZUK]:{name:"TzKal-Zuk",minimumValue:1},[ce.TZTOK_JAD]:{name:"TzTok-Jad"},[ce.VARDORVIS]:{name:"Vardorvis"},[ce.VENENATIS]:{name:"Venenatis"},[ce.VETION]:{name:"Vet'ion"},[ce.VORKATH]:{name:"Vorkath"},[ce.WINTERTODT]:{name:"Wintertodt"},[ce.ZALCANO]:{name:"Zalcano"},[ce.ZULRAH]:{name:"Zulrah"}},t=>Object.assign(Object.assign({},t),{type:Il.BOSS,measure:Al.KILLS,isMembers:"isMembers"in t?t.isMembers:!0,minimumValue:"minimumValue"in t?t.minimumValue:5})),$H=Ih({[un.LEAGUE_POINTS]:{name:"League Points",minimumValue:100},[un.BOUNTY_HUNTER_HUNTER]:{name:"Bounty Hunter (Hunter)",minimumValue:2},[un.BOUNTY_HUNTER_ROGUE]:{name:"Bounty Hunter (Rogue)",minimumValue:2},[un.CLUE_SCROLLS_ALL]:{name:"Clue Scrolls (All)"},[un.CLUE_SCROLLS_BEGINNER]:{name:"Clue Scrolls (Beginner)"},[un.CLUE_SCROLLS_EASY]:{name:"Clue Scrolls (Easy)"},[un.CLUE_SCROLLS_MEDIUM]:{name:"Clue Scrolls (Medium)"},[un.CLUE_SCROLLS_HARD]:{name:"Clue Scrolls (Hard)"},[un.CLUE_SCROLLS_ELITE]:{name:"Clue Scrolls (Elite)"},[un.CLUE_SCROLLS_MASTER]:{name:"Clue Scrolls (Master)"},[un.LAST_MAN_STANDING]:{name:"Last Man Standing",minimumValue:500},[un.PVP_ARENA]:{name:"PvP Arena",minimumValue:2525},[un.SOUL_WARS_ZEAL]:{name:"Soul Wars Zeal",minimumValue:200},[un.GUARDIANS_OF_THE_RIFT]:{name:"Guardians of the Rift",minimumValue:2},[un.COLOSSEUM_GLORY]:{name:"Colosseum Glory",minimumValue:300}},t=>Object.assign(Object.assign({},t),{type:Il.ACTIVITY,measure:Al.SCORE,minimumValue:"minimumValue"in t?t.minimumValue:1})),HH=Ih({[Uf.EHP]:{name:"EHP"},[Uf.EHB]:{name:"EHB"}},t=>Object.assign(Object.assign({},t),{type:Il.COMPUTED,measure:Al.VALUE})),V0=Object.assign(Object.assign(Object.assign(Object.assign({},BH),UH),$H),HH),zH=Object.values(L_),Ah=Object.values(pt),zO=Object.values(ce),jH=Object.values(un);Object.values(Uf);Ah.filter(t=>t!==pt.OVERALL);zO.filter(t=>!V0[t].isMembers);Ah.filter(t=>V0[t].isMembers);Ah.filter(t=>V0[t].isCombat);[...Ah,...zO,...jH];var Hw;(function(t){t.MAIN="main",t.IRONMAN="ironman",t.ULTIMATE="ultimate",t.LVL3="lvl3",t.F2P="f2p",t.F2P_LVL3="f2p_lvl3",t.F2P_IRONMAN="f2p_ironman",t.F2P_LVL3_IRONMAN="f2p_lvl3_ironman"})(Hw||(Hw={}));var zw;(function(t){t[t.TEMPLE_OSRS=0]="TEMPLE_OSRS",t[t.CRYSTAL_MATH_LABS=1]="CRYSTAL_MATH_LABS"})(zw||(zw={}));var jw;(function(t){t[t.HISCORES=0]="HISCORES",t[t.CRYSTAL_MATH_LABS=1]="CRYSTAL_MATH_LABS"})(jw||(jw={}));class WH extends to{getEfficiencyLeaderboards(e,n){return this.getRequest("/efficiency/leaderboard",Object.assign(Object.assign({},e),n))}getEHPRates(e){return this.getRequest("/efficiency/rates",{metric:L_.EHP,type:e})}getEHBRates(e){return this.getRequest("/efficiency/rates",{metric:L_.EHB,type:e})}}class GH extends to{searchNameChanges(e,n){return this.getRequest("/names",Object.assign(Object.assign({},e),n))}submitNameChange(e,n){return this.postRequest("/names",{oldName:e,newName:n})}}class qH extends to{searchCompetitions(e,n){return this.getRequest("/competitions",Object.assign(Object.assign({},e),n))}getCompetitionDetails(e,n){return this.getRequest(`/competitions/${e}`,{metric:n})}getCompetitionDetailsCSV(e,n){return this.getText(`/competitions/${e}/csv`,Object.assign({metric:n.previewMetric},n))}getCompetitionTopHistory(e,n){return this.getRequest(`/competitions/${e}/top-history`,{metric:n})}createCompetition(e){return this.postRequest("/competitions",e)}editCompetition(e,n,r){return this.putRequest(`/competitions/${e}`,Object.assign(Object.assign({},n),{verificationCode:r}))}deleteCompetition(e,n){return this.deleteRequest(`/competitions/${e}`,{verificationCode:n})}addParticipants(e,n,r){return this.postRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}removeParticipants(e,n,r){return this.deleteRequest(`/competitions/${e}/participants`,{verificationCode:r,participants:n})}addTeams(e,n,r){return this.postRequest(`/competitions/${e}/teams`,{verificationCode:r,teams:n})}removeTeams(e,n,r){return this.deleteRequest(`/competitions/${e}/teams`,{verificationCode:r,teamNames:n})}updateAll(e,n){return this.postRequest(`/competitions/${e}/update-all`,{verificationCode:n})}}class KH extends to{constructor(e){const n=(e==null?void 0:e.baseAPIUrl)||Bw.baseAPIUrl,r={"x-user-agent":(e==null?void 0:e.userAgent)||Bw.defaultUserAgent};e!=null&&e.apiKey&&(r["x-api-key"]=e.apiKey),super(r,n),this.deltas=new xH(r,n),this.groups=new DH(r,n),this.players=new LH(r,n),this.records=new VH(r,n),this.efficiency=new WH(r,n),this.nameChanges=new GH(r,n),this.competitions=new qH(r,n)}}const jO=eC({apiKey:"AIzaSyAnOiG77O1ukT9C2x8u1VbMLw7For9C_3w",authDomain:"bingo-50cec.firebaseapp.com",databaseURL:"https://bingo-50cec-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bingo-50cec",storageBucket:"bingo-50cec.appspot.com",messagingSenderId:"866066986693",appId:"1:866066986693:web:de513df8434d232b0562ac",measurementId:"G-8F3EECYHQ0"}),Zt=K8(jO),YH=t=>(Ku("data-v-7ef1f39d"),t=t(),Yu(),t),JH={key:0},QH=YH(()=>S("h1",null,"Hello World",-1)),XH={key:0},ZH={key:2},ez=Cr({__name:"newBoard.vapor",async setup(t){let e,n;const r=([e,n]=al(()=>o1()),e=await e,n(),e),i=Ve(!1),s=Ve(40963),o=Ve(),a=new KH,l=Ve({}),c=Ve({weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),u=Ve({}),h=async()=>{!s.value||s.value<=0||isNaN(s.value)||await a.competitions.getCompetitionDetails(s.value).then(async p=>{if(p!=null&&p.message)throw new Error("Error creating bingo: "+p.message);if((p==null?void 0:p.metric)!="overall")throw new Error("Error creating bingo: Metric should be set to `Overall`");if((p==null?void 0:p.type)!="team")throw new Error("Error creating bingo: Type should be set to `Team`");if(!(p!=null&&p.participations))throw new Error("Error creating bingo: No participants found");if(new Date>p.endsAt)throw new Error("Error creating bingo: Competition has already ended");const m=Nn(Zt,"Boards",s.value.toString());if((await k0(m)).exists())throw new Error("Error creating bingo: Board already exists");u.value={name:p.title,start:p.startsAt,end:p.endsAt},l.value=d(p),i.value=!0}).catch(p=>{o.value=p.message})},d=p=>{var _;const m=Ve(),g=Ve({});return m.value=p.participations,(_=m.value)==null||_.map(v=>{g.value[v.teamName]={teamName:v.teamName,players:[],stats:null}}),m.value.map(v=>{delete v.player.ehb,delete v.player.exp,delete v.player.ehp,g.value[v.teamName].players=[...g.value[v.teamName].players,g.value[v.teamName].players[v.player.username]={...v.player}]}),g.value},f=async()=>{const p=Nn(Zt,"Boards",s.value.toString());r&&await gw(p,{ownerID:r.uid}).then(()=>{const m=Nn(Zt,"Users",r.uid);for(let g in l.value){const _=Nn(xa(Zt,"Boards",p.id,"Groups")),v=l.value[g];gw(Nn(Zt,_.path),{teamName:v.teamName,teamId:_.id,players:l.value[g].players,stats:null})}R_(p,{name:u.value.name,start:u.value.start,end:u.value.end}),R_(m,{boards:iU(p.id)})}),i.value=!1};return(p,m)=>{var g,_;return ze(r)?(se(),_e("div",JH,[QH,o.value?(se(),_e("p",XH,We(o.value),1)):Ze("",!0),In(S("input",{type:"number","onUpdate:modelValue":m[0]||(m[0]=v=>s.value=v),placeholder:"12345 WOM Team competition code",min:"0",onFocusin:m[1]||(m[1]=()=>{o.value=""})},null,544),[[Oi,s.value]]),S("button",{onClick:m[2]||(m[2]=v=>h())},"Create new Bingo"),i.value?(se(),_e("button",{key:1,onClick:m[3]||(m[3]=v=>f())},"finish setup")):Ze("",!0),l.value!==null&&i.value?(se(),_e("div",ZH,[S("h1",null,We(u.value.name),1),u.value.start?(se(),_e(it,{key:0},[S("p",null," Starts: "+We(u.value.start.toLocaleDateString(void 0,c.value)),1),S("code",null,"<t:"+We(((g=u.value.start)==null?void 0:g.valueOf())/1e3)+":F>",1)],64)):Ze("",!0),u.value.end?(se(),_e(it,{key:1},[S("p",null," Ends: "+We(u.value.end.toLocaleDateString(void 0,c.value)),1),S("code",null,"<t:"+We(((_=u.value.end)==null?void 0:_.valueOf())/1e3)+":F>",1)],64)):Ze("",!0),(se(!0),_e(it,null,mi(l.value,v=>(se(),_e("div",{key:v.teamName},[S("h2",null,We(v.teamName),1),(se(!0),_e(it,null,mi(v.players,T=>(se(),_e("div",{key:T.username},[S("div",null,We(T.username),1)]))),128))]))),128))])):Ze("",!0)])):Ze("",!0)}}}),tz=eo(ez,[["__scopeId","data-v-7ef1f39d"]]),nz={key:0},rz=S("h1",null,"Log in",-1),iz=S("p",null,"you need to be signed in to edit, create and moderate a board",-1),sz=S("h1",null,"User details",-1),oz=S("h2",null,"Boards",-1),az=["onClick"],lz=["onClick"],cz=Cr({__name:"loginView.vapor",async setup(t){let e,n;const r=L0(),i=new Pi,s=jU(),o=VC(),a=Ve();if(o.value){const{data:d,promise:f}=Tl(Nn(Zt,"Users",o.value.uid));[e,n]=al(()=>f.value.then(()=>{var p;a.value=(p=d.value)==null?void 0:p.boards})),await e,n()}const l=bm(),c=()=>o.value?"User details":"log in";l.value=c()+" - Bingo Bongo";const u=()=>{$L(s,i).then(()=>{console.log(o),r.push({name:"Home"})}).catch(d=>{const f=d.message;console.error(f)})},h=()=>{bL(s).then(()=>r.push({name:"Home"}))};return(d,f)=>ze(o)?(se(),_e(it,{key:1},[S("div",null,[sz,S("button",{class:"btn",onClick:ut(h,["prevent"])},"Log out")]),S("div",null,[oz,S("ul",null,[(se(!0),_e(it,null,mi(a.value,p=>(se(),_e("li",null,[(se(),_e("label",{key:p},[mt(We(p)+" ",1),S("a",{icon:"",class:"btn",onClick:ut(m=>ze(r).push({name:"editBoard",params:{boardUUID:p}}),["prevent"])},"edit",8,az)])),S("a",{icon:"",class:"btn",onClick:ut(m=>ze(r).push({name:"viewBoard",params:{boardUUID:p}}),["prevent"])},"visibility",8,lz)]))),256))])])],64)):(se(),_e("div",nz,[rz,iz,ze(o)?Ze("",!0):(se(),_e("button",{key:0,class:"btn",onClick:ut(u,["prevent"])},"Log in with Google"))]))}});/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ww(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ti(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ww(Object(n),!0).forEach(function(r){uz(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ww(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vd(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vd=function(e){return typeof e}:Vd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}function uz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ki(){return Ki=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ki.apply(this,arguments)}function hz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function dz(t,e){if(t==null)return{};var n=hz(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var fz="1.15.2";function zi(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var es=zi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ch=zi(/Edge/i),Gw=zi(/firefox/i),Wc=zi(/safari/i)&&!zi(/chrome/i)&&!zi(/android/i),WO=zi(/iP(ad|od|hone)/i),GO=zi(/chrome/i)&&zi(/android/i),qO={capture:!1,passive:!1};function tt(t,e,n){t.addEventListener(e,n,!es&&qO)}function Qe(t,e,n){t.removeEventListener(e,n,!es&&qO)}function $f(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function pz(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Nr(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&$f(t,e):$f(t,e))||r&&t===n)return t;if(t===n)break}while(t=pz(t))}return null}var qw=/\s+/g;function tr(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(qw," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(qw," ")}}function Se(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function el(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Se(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function KO(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function fi(){var t=document.scrollingElement;return t||document.documentElement}function Bt(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,u,h;if(t!==window&&t.parentNode&&t!==fi()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!es))do if(i&&i.getBoundingClientRect&&(Se(i,"transform")!=="none"||n&&Se(i,"position")!=="static")){var d=i.getBoundingClientRect();o-=d.top+parseInt(Se(i,"border-top-width")),a-=d.left+parseInt(Se(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var f=el(i||t),p=f&&f.a,m=f&&f.d;f&&(o/=m,a/=p,h/=p,u/=m,l=o+u,c=a+h)}return{top:o,left:a,bottom:l,right:c,width:h,height:u}}}function Kw(t,e,n){for(var r=Is(t,!0),i=Bt(t)[e];r;){var s=Bt(r)[n],o=void 0;if(n==="top"||n==="left"?o=i>=s:o=i<=s,!o)return r;if(r===fi())break;r=Is(r,!1)}return!1}function Cl(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Ie.ghost&&(r||o[s]!==Ie.dragged)&&Nr(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function F0(t,e){for(var n=t.lastElementChild;n&&(n===Ie.ghost||Se(n,"display")==="none"||e&&!$f(n,e));)n=n.previousElementSibling;return n||null}function yr(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ie.clone&&(!e||$f(t,e))&&n++;return n}function Yw(t){var e=0,n=0,r=fi();if(t)do{var i=el(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function mz(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Is(t,e){if(!t||!t.getBoundingClientRect)return fi();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Se(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return fi();if(r||e)return n;r=!0}}while(n=n.parentNode);return fi()}function gz(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Rg(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Gc;function YO(t,e){return function(){if(!Gc){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Gc=setTimeout(function(){Gc=void 0},e)}}}function yz(){clearTimeout(Gc),Gc=void 0}function JO(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function QO(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function XO(t,e,n){var r={};return Array.from(t.children).forEach(function(i){var s,o,a,l;if(!(!Nr(i,e.draggable,t,!1)||i.animated||i===n)){var c=Bt(i);r.left=Math.min((s=r.left)!==null&&s!==void 0?s:1/0,c.left),r.top=Math.min((o=r.top)!==null&&o!==void 0?o:1/0,c.top),r.right=Math.max((a=r.right)!==null&&a!==void 0?a:-1/0,c.right),r.bottom=Math.max((l=r.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var sr="Sortable"+new Date().getTime();function _z(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Se(i,"display")==="none"||i===Ie.ghost)){t.push({target:i,rect:Bt(i)});var s=Ti({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=el(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(mz(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=Bt(c),d=c.prevFromRect,f=c.prevToRect,p=a.rect,m=el(c,!0);m&&(h.top-=m.f,h.left-=m.e),c.toRect=h,c.thisAnimationDuration&&Rg(d,h)&&!Rg(u,h)&&(p.top-h.top)/(p.left-h.left)===(u.top-h.top)/(u.left-h.left)&&(l=bz(p,d,f,i.options)),Rg(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=i.options.animation),i.animate(c,p,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){Se(r,"transition",""),Se(r,"transform","");var a=el(this.el),l=a&&a.a,c=a&&a.d,u=(i.left-s.left)/(l||1),h=(i.top-s.top)/(c||1);r.animatingX=!!u,r.animatingY=!!h,Se(r,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=vz(r),Se(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Se(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Se(r,"transition",""),Se(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function vz(t){return t.offsetWidth}function bz(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var ba=[],kg={initializeByDefault:!0},Rh={mount:function(e){for(var n in kg)kg.hasOwnProperty(n)&&!(n in e)&&(e[n]=kg[n]);ba.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ba.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";ba.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Ti({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Ti({sortable:n},r)))})},initializePlugins:function(e,n,r,i){ba.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Ki(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return ba.forEach(function(i){typeof i.eventProperties=="function"&&Ki(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return ba.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Ez(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,h=t.newDraggableIndex,d=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[sr],!!e){var m,g=e.options,_="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!es&&!Ch?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=o||n,m.from=a||n,m.item=i||n,m.clone=s,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=h,m.originalEvent=d,m.pullMode=f?f.lastPutMode:void 0;var v=Ti(Ti({},p),Rh.getEventProperties(r,e));for(var T in v)m[T]=v[T];n&&n.dispatchEvent(m),g[_]&&g[_].call(e,m)}}var Tz=["evt"],Gn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=dz(r,Tz);Rh.pluginEvent.bind(Ie)(e,n,Ti({dragEl:Q,parentEl:kt,ghostEl:Ne,rootEl:It,nextEl:mo,lastDownEl:Fd,cloneEl:Ct,cloneHidden:Ts,dragStarted:vc,putSortable:hn,activeSortable:Ie.active,originalEvent:i,oldIndex:Da,oldDraggableIndex:qc,newIndex:nr,newDraggableIndex:gs,hideGhostForTarget:nN,unhideGhostForTarget:rN,cloneNowHidden:function(){Ts=!0},cloneNowShown:function(){Ts=!1},dispatchSortableEvent:function(a){Bn({sortable:n,name:a,originalEvent:i})}},s))};function Bn(t){Ez(Ti({putSortable:hn,cloneEl:Ct,targetEl:Q,rootEl:It,oldIndex:Da,oldDraggableIndex:qc,newIndex:nr,newDraggableIndex:gs},t))}var Q,kt,Ne,It,mo,Fd,Ct,Ts,Da,nr,qc,gs,sd,hn,Ra=!1,Hf=!1,zf=[],uo,Or,Og,Ng,Jw,Qw,vc,Ea,Kc,Yc=!1,od=!1,Bd,Sn,Mg=[],V_=!1,jf=[],Em=typeof document<"u",ad=WO,Xw=Ch||es?"cssFloat":"float",wz=Em&&!GO&&!WO&&"draggable"in document.createElement("div"),ZO=function(){if(Em){if(es)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),eN=function(e,n){var r=Se(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Cl(e,0,n),o=Cl(e,1,n),a=s&&Se(s),l=o&&Se(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Bt(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Bt(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[Xw]==="none"||o&&r[Xw]==="none"&&c+u>i)?"vertical":"horizontal"},Sz=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},Iz=function(e,n){var r;return zf.some(function(i){var s=i[sr].options.emptyInsertThreshold;if(!(!s||F0(i))){var o=Bt(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},tN=function(e){function n(s,o){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,u),o)(a,l,c,u);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var r={},i=e.group;(!i||Vd(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},nN=function(){!ZO&&Ne&&Se(Ne,"display","none")},rN=function(){!ZO&&Ne&&Se(Ne,"display","")};Em&&!GO&&document.addEventListener("click",function(t){if(Hf)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Hf=!1,!1},!0);var ho=function(e){if(Q){e=e.touches?e.touches[0]:e;var n=Iz(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[sr]._onDragOver(r)}}},Az=function(e){Q&&Q.parentNode[sr]._isOutsideThisEl(e.target)};function Ie(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ki({},e),t[sr]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return eN(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ie.supportPointer!==!1&&"PointerEvent"in window&&!Wc,emptyInsertThreshold:5};Rh.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);tN(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:wz,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?tt(t,"pointerdown",this._onTapStart):(tt(t,"mousedown",this._onTapStart),tt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(tt(t,"dragover",this),tt(t,"dragenter",this)),zf.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ki(this,_z())}Ie.prototype={constructor:Ie,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ea=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=i.filter;if(xz(r),!Q&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Wc&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Nr(l,i.draggable,r,!1),!(l&&l.animated)&&Fd!==l)){if(Da=yr(l),qc=yr(l,i.draggable),typeof u=="function"){if(u.call(this,e,l,this)){Bn({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Gn("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=Nr(c,h.trim(),r,!1),h)return Bn({sortable:n,rootEl:h,name:"filter",targetEl:l,fromEl:r,toEl:r}),Gn("filter",n,{evt:e}),!0}),u)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Nr(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Q&&r.parentNode===s){var c=Bt(r);if(It=s,Q=r,kt=Q.parentNode,mo=Q.nextSibling,Fd=r,sd=o.group,Ie.dragged=Q,uo={target:Q,clientX:(n||e).clientX,clientY:(n||e).clientY},Jw=uo.clientX-c.left,Qw=uo.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Q.style["will-change"]="all",l=function(){if(Gn("delayEnded",i,{evt:e}),Ie.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Gw&&i.nativeDraggable&&(Q.draggable=!0),i._triggerDragStart(e,n),Bn({sortable:i,name:"choose",originalEvent:e}),tr(Q,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){KO(Q,u.trim(),Pg)}),tt(a,"dragover",ho),tt(a,"mousemove",ho),tt(a,"touchmove",ho),tt(a,"mouseup",i._onDrop),tt(a,"touchend",i._onDrop),tt(a,"touchcancel",i._onDrop),Gw&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Q.draggable=!0),Gn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Ch||es))){if(Ie.eventCanceled){this._onDrop();return}tt(a,"mouseup",i._disableDelayedDrag),tt(a,"touchend",i._disableDelayedDrag),tt(a,"touchcancel",i._disableDelayedDrag),tt(a,"mousemove",i._delayedDragTouchMoveHandler),tt(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&tt(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Q&&Pg(Q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Qe(e,"mouseup",this._disableDelayedDrag),Qe(e,"touchend",this._disableDelayedDrag),Qe(e,"touchcancel",this._disableDelayedDrag),Qe(e,"mousemove",this._delayedDragTouchMoveHandler),Qe(e,"touchmove",this._delayedDragTouchMoveHandler),Qe(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?tt(document,"pointermove",this._onTouchMove):n?tt(document,"touchmove",this._onTouchMove):tt(document,"mousemove",this._onTouchMove):(tt(Q,"dragend",this),tt(It,"dragstart",this._onDragStart));try{document.selection?Ud(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Ra=!1,It&&Q){Gn("dragStarted",this,{evt:n}),this.nativeDraggable&&tt(document,"dragover",Az);var r=this.options;!e&&tr(Q,r.dragClass,!1),tr(Q,r.ghostClass,!0),Ie.active=this,e&&this._appendGhost(),Bn({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Or){this._lastX=Or.clientX,this._lastY=Or.clientY,nN();for(var e=document.elementFromPoint(Or.clientX,Or.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Or.clientX,Or.clientY),e!==n);)n=e;if(Q.parentNode[sr]._isOutsideThisEl(e),n)do{if(n[sr]){var r=void 0;if(r=n[sr]._onDragOver({clientX:Or.clientX,clientY:Or.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);rN()}},_onTouchMove:function(e){if(uo){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Ne&&el(Ne,!0),a=Ne&&o&&o.a,l=Ne&&o&&o.d,c=ad&&Sn&&Yw(Sn),u=(s.clientX-uo.clientX+i.x)/(a||1)+(c?c[0]-Mg[0]:0)/(a||1),h=(s.clientY-uo.clientY+i.y)/(l||1)+(c?c[1]-Mg[1]:0)/(l||1);if(!Ie.active&&!Ra){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Ne){o?(o.e+=u-(Og||0),o.f+=h-(Ng||0)):o={a:1,b:0,c:0,d:1,e:u,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Se(Ne,"webkitTransform",d),Se(Ne,"mozTransform",d),Se(Ne,"msTransform",d),Se(Ne,"transform",d),Og=u,Ng=h,Or=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ne){var e=this.options.fallbackOnBody?document.body:It,n=Bt(Q,!0,ad,!0,e),r=this.options;if(ad){for(Sn=e;Se(Sn,"position")==="static"&&Se(Sn,"transform")==="none"&&Sn!==document;)Sn=Sn.parentNode;Sn!==document.body&&Sn!==document.documentElement?(Sn===document&&(Sn=fi()),n.top+=Sn.scrollTop,n.left+=Sn.scrollLeft):Sn=fi(),Mg=Yw(Sn)}Ne=Q.cloneNode(!0),tr(Ne,r.ghostClass,!1),tr(Ne,r.fallbackClass,!0),tr(Ne,r.dragClass,!0),Se(Ne,"transition",""),Se(Ne,"transform",""),Se(Ne,"box-sizing","border-box"),Se(Ne,"margin",0),Se(Ne,"top",n.top),Se(Ne,"left",n.left),Se(Ne,"width",n.width),Se(Ne,"height",n.height),Se(Ne,"opacity","0.8"),Se(Ne,"position",ad?"absolute":"fixed"),Se(Ne,"zIndex","100000"),Se(Ne,"pointerEvents","none"),Ie.ghost=Ne,e.appendChild(Ne),Se(Ne,"transform-origin",Jw/parseInt(Ne.style.width)*100+"% "+Qw/parseInt(Ne.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Gn("dragStart",this,{evt:e}),Ie.eventCanceled){this._onDrop();return}Gn("setupClone",this),Ie.eventCanceled||(Ct=QO(Q),Ct.removeAttribute("id"),Ct.draggable=!1,Ct.style["will-change"]="",this._hideClone(),tr(Ct,this.options.chosenClass,!1),Ie.clone=Ct),r.cloneId=Ud(function(){Gn("clone",r),!Ie.eventCanceled&&(r.options.removeCloneOnHide||It.insertBefore(Ct,Q),r._hideClone(),Bn({sortable:r,name:"clone"}))}),!n&&tr(Q,s.dragClass,!0),n?(Hf=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Qe(document,"mouseup",r._onDrop),Qe(document,"touchend",r._onDrop),Qe(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Q)),tt(document,"drop",r),Se(Q,"transform","translateZ(0)")),Ra=!0,r._dragStartId=Ud(r._dragStarted.bind(r,n,e)),tt(document,"selectstart",r),vc=!0,Wc&&Se(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Ie.active,u=sd===l,h=a.sort,d=hn||c,f,p=this,m=!1;if(V_)return;function g(D,oe){Gn(D,p,Ti({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:h,fromSortable:d,target:r,completed:v,onMove:function(Ae,De){return ld(It,n,Q,i,Ae,Bt(Ae),e,De)},changed:T},oe))}function _(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function v(D){return g("dragOverCompleted",{insertion:D}),D&&(u?c._hideClone():c._showClone(p),p!==d&&(tr(Q,hn?hn.options.ghostClass:c.options.ghostClass,!1),tr(Q,a.ghostClass,!0)),hn!==p&&p!==Ie.active?hn=p:p===Ie.active&&hn&&(hn=null),d===p&&(p._ignoreWhileAnimating=r),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(r===Q&&!Q.animated||r===n&&!r.animated)&&(Ea=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Q.parentNode[sr]._isOutsideThisEl(e.target),!D&&ho(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function T(){nr=yr(Q),gs=yr(Q,a.draggable),Bn({sortable:p,name:"change",toEl:n,newIndex:nr,newDraggableIndex:gs,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Nr(r,a.draggable,n,!0),g("dragOver"),Ie.eventCanceled)return m;if(Q.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return v(!1);if(Hf=!1,c&&!a.disabled&&(u?h||(o=kt!==It):hn===this||(this.lastPutMode=sd.checkPull(this,c,Q,e))&&l.checkPut(this,c,Q,e))){if(f=this._getDirection(e,r)==="vertical",i=Bt(Q),g("dragOverValid"),Ie.eventCanceled)return m;if(o)return kt=It,_(),this._hideClone(),g("revert"),Ie.eventCanceled||(mo?It.insertBefore(Q,mo):It.appendChild(Q)),v(!0);var I=F0(n,a.draggable);if(!I||Oz(e,f,this)&&!I.animated){if(I===Q)return v(!1);if(I&&n===e.target&&(r=I),r&&(s=Bt(r)),ld(It,n,Q,i,r,s,e,!!r)!==!1)return _(),I&&I.nextSibling?n.insertBefore(Q,I.nextSibling):n.appendChild(Q),kt=n,T(),v(!0)}else if(I&&kz(e,f,this)){var A=Cl(n,0,a,!0);if(A===Q)return v(!1);if(r=A,s=Bt(r),ld(It,n,Q,i,r,s,e,!1)!==!1)return _(),n.insertBefore(Q,A),kt=n,T(),v(!0)}else if(r.parentNode===n){s=Bt(r);var w=0,O,M=Q.parentNode!==n,k=!Sz(Q.animated&&Q.toRect||i,r.animated&&r.toRect||s,f),U=f?"top":"left",F=Kw(r,"top","top")||Kw(Q,"top","top"),$=F?F.scrollTop:void 0;Ea!==r&&(O=s[U],Yc=!1,od=!k&&a.invertSwap||M),w=Nz(e,r,s,f,k?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,od,Ea===r);var pe;if(w!==0){var q=yr(Q);do q-=w,pe=kt.children[q];while(pe&&(Se(pe,"display")==="none"||pe===Ne))}if(w===0||pe===r)return v(!1);Ea=r,Kc=w;var z=r.nextElementSibling,N=!1;N=w===1;var B=ld(It,n,Q,i,r,s,e,N);if(B!==!1)return(B===1||B===-1)&&(N=B===1),V_=!0,setTimeout(Rz,30),_(),N&&!z?n.appendChild(Q):r.parentNode.insertBefore(Q,N?z:r),F&&JO(F,0,$-F.scrollTop),kt=Q.parentNode,O!==void 0&&!od&&(Bd=Math.abs(O-Bt(r)[U])),T(),v(!0)}if(n.contains(Q))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Qe(document,"mousemove",this._onTouchMove),Qe(document,"touchmove",this._onTouchMove),Qe(document,"pointermove",this._onTouchMove),Qe(document,"dragover",ho),Qe(document,"mousemove",ho),Qe(document,"touchmove",ho)},_offUpEvents:function(){var e=this.el.ownerDocument;Qe(e,"mouseup",this._onDrop),Qe(e,"touchend",this._onDrop),Qe(e,"pointerup",this._onDrop),Qe(e,"touchcancel",this._onDrop),Qe(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(nr=yr(Q),gs=yr(Q,r.draggable),Gn("drop",this,{evt:e}),kt=Q&&Q.parentNode,nr=yr(Q),gs=yr(Q,r.draggable),Ie.eventCanceled){this._nulling();return}Ra=!1,od=!1,Yc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),F_(this.cloneId),F_(this._dragStartId),this.nativeDraggable&&(Qe(document,"drop",this),Qe(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wc&&Se(document.body,"user-select",""),Se(Q,"transform",""),e&&(vc&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Ne&&Ne.parentNode&&Ne.parentNode.removeChild(Ne),(It===kt||hn&&hn.lastPutMode!=="clone")&&Ct&&Ct.parentNode&&Ct.parentNode.removeChild(Ct),Q&&(this.nativeDraggable&&Qe(Q,"dragend",this),Pg(Q),Q.style["will-change"]="",vc&&!Ra&&tr(Q,hn?hn.options.ghostClass:this.options.ghostClass,!1),tr(Q,this.options.chosenClass,!1),Bn({sortable:this,name:"unchoose",toEl:kt,newIndex:null,newDraggableIndex:null,originalEvent:e}),It!==kt?(nr>=0&&(Bn({rootEl:kt,name:"add",toEl:kt,fromEl:It,originalEvent:e}),Bn({sortable:this,name:"remove",toEl:kt,originalEvent:e}),Bn({rootEl:kt,name:"sort",toEl:kt,fromEl:It,originalEvent:e}),Bn({sortable:this,name:"sort",toEl:kt,originalEvent:e})),hn&&hn.save()):nr!==Da&&nr>=0&&(Bn({sortable:this,name:"update",toEl:kt,originalEvent:e}),Bn({sortable:this,name:"sort",toEl:kt,originalEvent:e})),Ie.active&&((nr==null||nr===-1)&&(nr=Da,gs=qc),Bn({sortable:this,name:"end",toEl:kt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Gn("nulling",this),It=Q=kt=Ne=mo=Ct=Fd=Ts=uo=Or=vc=nr=gs=Da=qc=Ea=Kc=hn=sd=Ie.dragged=Ie.ghost=Ie.clone=Ie.active=null,jf.forEach(function(e){e.checked=!0}),jf.length=Og=Ng=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Q&&(this._onDragOver(e),Cz(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Nr(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||Pz(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Nr(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Nr(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Rh.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&tN(r)},destroy:function(){Gn("destroy",this);var e=this.el;e[sr]=null,Qe(e,"mousedown",this._onTapStart),Qe(e,"touchstart",this._onTapStart),Qe(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qe(e,"dragover",this),Qe(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),zf.splice(zf.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ts){if(Gn("hideClone",this),Ie.eventCanceled)return;Se(Ct,"display","none"),this.options.removeCloneOnHide&&Ct.parentNode&&Ct.parentNode.removeChild(Ct),Ts=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ts){if(Gn("showClone",this),Ie.eventCanceled)return;Q.parentNode==It&&!this.options.group.revertClone?It.insertBefore(Ct,Q):mo?It.insertBefore(Ct,mo):It.appendChild(Ct),this.options.group.revertClone&&this.animate(Q,Ct),Se(Ct,"display",""),Ts=!1}}};function Cz(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function ld(t,e,n,r,i,s,o,a){var l,c=t[sr],u=c.options.onMove,h;return window.CustomEvent&&!es&&!Ch?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Bt(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),u&&(h=u.call(c,l,o)),h}function Pg(t){t.draggable=!1}function Rz(){V_=!1}function kz(t,e,n){var r=Bt(Cl(n.el,0,n.options,!0)),i=XO(n.el,n.options,Ne),s=10;return e?t.clientX<i.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<i.top-s||t.clientY<r.bottom&&t.clientX<r.left}function Oz(t,e,n){var r=Bt(F0(n.el,n.options.draggable)),i=XO(n.el,n.options,Ne),s=10;return e?t.clientX>i.right+s||t.clientY>r.bottom&&t.clientX>r.left:t.clientY>i.bottom+s||t.clientX>r.right&&t.clientY>r.top}function Nz(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,h=r?n.bottom:n.right,d=!1;if(!o){if(a&&Bd<c*i){if(!Yc&&(Kc===1?l>u+c*s/2:l<h-c*s/2)&&(Yc=!0),Yc)d=!0;else if(Kc===1?l<u+Bd:l>h-Bd)return-Kc}else if(l>u+c*(1-i)/2&&l<h-c*(1-i)/2)return Mz(e)}return d=d||o,d&&(l<u+c*s/2||l>h-c*s/2)?l>u+c/2?1:-1:0}function Mz(t){return yr(Q)<yr(t)?1:-1}function Pz(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function xz(t){jf.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&jf.push(r)}}function Ud(t){return setTimeout(t,0)}function F_(t){return clearTimeout(t)}Em&&tt(document,"touchmove",function(t){(Ie.active||Ra)&&t.cancelable&&t.preventDefault()});Ie.utils={on:tt,off:Qe,css:Se,find:KO,is:function(e,n){return!!Nr(e,n,e,!1)},extend:gz,throttle:YO,closest:Nr,toggleClass:tr,clone:QO,index:yr,nextTick:Ud,cancelNextTick:F_,detectDirection:eN,getChild:Cl};Ie.get=function(t){return t[sr]};Ie.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ie.utils=Ti(Ti({},Ie.utils),r.utils)),Rh.mount(r)})};Ie.create=function(t,e){return new Ie(t,e)};Ie.version=fz;var Vt=[],bc,B_,U_=!1,xg,Dg,Wf,Ec;function Dz(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?tt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?tt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?tt(document,"touchmove",this._handleFallbackAutoScroll):tt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Qe(document,"dragover",this._handleAutoScroll):(Qe(document,"pointermove",this._handleFallbackAutoScroll),Qe(document,"touchmove",this._handleFallbackAutoScroll),Qe(document,"mousemove",this._handleFallbackAutoScroll)),Zw(),$d(),yz()},nulling:function(){Wf=B_=bc=U_=Ec=xg=Dg=null,Vt.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(Wf=n,r||this.options.forceAutoScrollFallback||Ch||es||Wc){Lg(n,this.options,a,r);var l=Is(a,!0);U_&&(!Ec||s!==xg||o!==Dg)&&(Ec&&Zw(),Ec=setInterval(function(){var c=Is(document.elementFromPoint(s,o),!0);c!==l&&(l=c,$d()),Lg(n,i.options,c,r)},10),xg=s,Dg=o)}else{if(!this.options.bubbleScroll||Is(a,!0)===fi()){$d();return}Lg(n,this.options,Is(a,!1),!1)}}},Ki(t,{pluginName:"scroll",initializeByDefault:!0})}function $d(){Vt.forEach(function(t){clearInterval(t.pid)}),Vt=[]}function Zw(){clearInterval(Ec)}var Lg=YO(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=fi(),c=!1,u;B_!==n&&(B_=n,$d(),bc=e.scroll,u=e.scrollFn,bc===!0&&(bc=Is(n,!0)));var h=0,d=bc;do{var f=d,p=Bt(f),m=p.top,g=p.bottom,_=p.left,v=p.right,T=p.width,I=p.height,A=void 0,w=void 0,O=f.scrollWidth,M=f.scrollHeight,k=Se(f),U=f.scrollLeft,F=f.scrollTop;f===l?(A=T<O&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),w=I<M&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(A=T<O&&(k.overflowX==="auto"||k.overflowX==="scroll"),w=I<M&&(k.overflowY==="auto"||k.overflowY==="scroll"));var $=A&&(Math.abs(v-i)<=o&&U+T<O)-(Math.abs(_-i)<=o&&!!U),pe=w&&(Math.abs(g-s)<=o&&F+I<M)-(Math.abs(m-s)<=o&&!!F);if(!Vt[h])for(var q=0;q<=h;q++)Vt[q]||(Vt[q]={});(Vt[h].vx!=$||Vt[h].vy!=pe||Vt[h].el!==f)&&(Vt[h].el=f,Vt[h].vx=$,Vt[h].vy=pe,clearInterval(Vt[h].pid),($!=0||pe!=0)&&(c=!0,Vt[h].pid=setInterval((function(){r&&this.layer===0&&Ie.active._onTouchMove(Wf);var z=Vt[this.layer].vy?Vt[this.layer].vy*a:0,N=Vt[this.layer].vx?Vt[this.layer].vx*a:0;typeof u=="function"&&u.call(Ie.dragged.parentNode[sr],N,z,t,Wf,Vt[this.layer].el)!=="continue"||JO(Vt[this.layer].el,N,z)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=Is(d,!1)));U_=c}},30),iN=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function B0(){}B0.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Cl(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:iN};Ki(B0,{pluginName:"revertOnSpill"});function U0(){}U0.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:iN};Ki(U0,{pluginName:"removeOnSpill"});Ie.mount(new Dz);Ie.mount(U0,B0);function Lz(t,e,n={}){let r;const{document:i=VO,...s}=n,o={onUpdate:u=>{sN(e,u.oldIndex,u.newIndex)}},a=()=>{const u=typeof t=="string"?i==null?void 0:i.querySelector(t):LO(t);!u||r!==void 0||(r=new Ie(u,{...o,...s}))},l=()=>{r==null||r.destroy(),r=void 0},c=(u,h)=>{if(h!==void 0)r==null||r.option(u,h);else return r==null?void 0:r.option(u)};return aH(a),PO(l),{stop:l,start:a,option:c}}function sN(t,e,n){const r=sn(t),i=r?[...Nu(t)]:Nu(t);if(n>=0&&n<i.length){const s=i.splice(e,1)[0];Ll(()=>{i.splice(n,0,s),r&&(t.value=i)})}}function Vz(){let t=["Bal","Bar","Dal","Dar","Den","Dok","Jar","Jik","Lar","Rak","Ral","Ril","Sig","Tal","Thor","Ton"],e=["dar","dor","dur","kal","kar","kir","kur","lah","lak","lim","lor","rak","tin","ton","tor","vald"],n=["Rockcrusher","Spinewielder","Skullbearer","Dräpare"];return t[Math.floor(Math.random()*t.length)]+e[Math.floor(Math.random()*e.length)]+" "+n[Math.floor(Math.random()*n.length)]}function Vg(t=4){let e=t,n="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<e;i++)n+=r.charAt(Math.floor(Math.random()*r.length));return n}function dn(t){this.content=t}dn.prototype={constructor:dn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new dn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new dn(n)},addToStart:function(t,e){return new dn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new dn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new dn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=dn.from(t),t.size?new dn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=dn.from(t),t.size?new dn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=dn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};dn.from=function(t){if(t instanceof dn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new dn(e)};function oN(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=oN(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function aN(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=aN(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class H{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new H(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new H(r,i)}cutByIndex(e,n){return e==n?H.empty:e==0&&n==this.content.length?this:new H(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new H(i,s)}addToStart(e){return new H([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new H(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return oN(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return aN(this,e,n,r)}findIndex(e,n=-1){if(e==0)return cd(0,e);if(e==this.size)return cd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?cd(r+1,o):cd(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return H.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new H(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return H.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new H(n||e,r)}static from(e){if(!e)return H.empty;if(e instanceof H)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new H([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}H.empty=new H([],0);const Fg={index:0,offset:0};function cd(t,e){return Fg.index=t,Fg.offset=e,Fg}function Gf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Gf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Gf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ht=class $_{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Gf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);return r.create(n.attrs)}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return $_.none;if(e instanceof $_)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ht.none=[];class qf extends Error{}class ie{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=cN(this.content,e+this.openStart,n);return r&&new ie(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ie(lN(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ie.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ie(H.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new ie(e,r,i)}}ie.empty=new ie(H.empty,0,0);function lN(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(lN(s.content,e-i-1,n-i-1)))}function cN(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=cN(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function Fz(t,e,n){if(n.openStart>t.depth)throw new qf("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new qf("Inconsistent open depths");return uN(t,e,n,0)}function uN(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=uN(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return $o(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Bz(n,t);return $o(s,dN(t,o,a,e,r))}else return $o(s,Kf(t,e,r))}function hN(t,e){if(!e.type.compatibleContent(t.type))throw new qf("Cannot join "+e.type.name+" onto "+t.type.name)}function H_(t,e,n){let r=t.node(n);return hN(r,e.node(n)),r}function Uo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Jc(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Uo(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Uo(i.child(a),r);e&&e.depth==n&&e.textOffset&&Uo(e.nodeBefore,r)}function $o(t,e){return t.type.checkContent(e),t.copy(e)}function dN(t,e,n,r,i){let s=t.depth>i&&H_(t,e,i+1),o=r.depth>i&&H_(n,r,i+1),a=[];return Jc(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(hN(s,o),Uo($o(s,dN(t,e,n,r,i+1)),a)):(s&&Uo($o(s,Kf(t,e,i+1)),a),Jc(e,n,i,a),o&&Uo($o(o,Kf(n,r,i+1)),a)),Jc(r,null,i,a),new H(a)}function Kf(t,e,n){let r=[];if(Jc(null,t,n,r),t.depth>n){let i=H_(t,e,n+1);Uo($o(i,Kf(t,e,n+1)),r)}return Jc(e,null,n,r),new H(r)}function Bz(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(H.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Mu{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ht.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Yf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Mu(n,r,s)}static resolveCached(e,n){for(let i=0;i<Bg.length;i++){let s=Bg[i];if(s.pos==n&&s.doc==e)return s}let r=Bg[Ug]=Mu.resolve(e,n);return Ug=(Ug+1)%Uz,r}}let Bg=[],Ug=0,Uz=12;class Yf{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const $z=Object.create(null);let Ho=class z_{constructor(e,n,r,i=ht.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||H.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Gf(this.attrs,n||e.defaultAttrs||$z)&&ht.sameSet(this.marks,r||ht.none)}copy(e=null){return e==this.content?this:new z_(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new z_(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ie.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new ie(c,i.depth-o,s.depth-o)}replace(e,n,r){return Fz(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Mu.resolveCached(this,e)}resolveNoCache(e){return Mu.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),fN(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=H.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=ht.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!ht.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=H.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,i,r)}};Ho.prototype.text=void 0;class Jf extends Ho{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):fN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Jf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Jf(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function fN(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class na{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Hz(e,n);if(r.next==null)return na.empty;let i=pN(r);r.next&&r.err("Unexpected trailing text");let s=Yz(Kz(i));return Jz(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return H.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:h}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(h)==-1){i.push(h);let d=s(h,a.concat(u));if(d)return d}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}na.empty=new na(!0);class Hz{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function pN(t){let e=[];do e.push(zz(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function zz(t){let e=[];do e.push(jz(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function jz(t){let e=qz(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Wz(t,e);else break;return e}function eS(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Wz(t,e){let n=eS(t),r=n;return t.eat(",")&&(t.next!="}"?r=eS(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Gz(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function qz(t){if(t.eat("(")){let e=pN(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Gz(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Kz(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function mN(t,e){return e-t}function tS(t,e){let n=[];return r(e),n.sort(mN);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function Yz(t){let e=Object.create(null);return n(tS(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);tS(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new na(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(mN);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function Jz(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function gN(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function yN(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function _N(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new Qz(t[n]);return e}let nS=class vN{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=_N(r.attrs),this.defaultAttrs=gN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==na.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:yN(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ho(this,this.computeAttrs(e),H.from(n),ht.setFrom(r))}createChecked(e=null,n,r){return n=H.from(n),this.checkContent(n),new Ho(this,this.computeAttrs(e),n,ht.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=H.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(H.empty,!0);return s?new Ho(this,e,n.append(s),ht.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ht.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new vN(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};class Qz{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class Tm{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=_N(i.attrs),this.excluded=null;let s=gN(this.attrs);this.instance=s?new ht(this,s):null}create(e=null){return!e&&this.instance?this.instance:new ht(this,yN(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Tm(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}}class Xz{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=dn.from(e.nodes),n.marks=dn.from(e.marks||{}),this.nodes=nS.compile(this.spec.nodes,this),this.marks=Tm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=r[o]||(r[o]=na.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?rS(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:rS(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof nS){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Jf(r,r.defaultAttrs,e,ht.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Ho.fromJSON(this,e)}markFromJSON(e){return ht.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function rS(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Zz(t){return t.tag!=null}function ej(t){return t.style!=null}class Rl{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(r=>{Zz(r)?this.tags.push(r):ej(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let i=e.nodes[r.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new sS(this,n,!1);return r.addAll(e,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new sS(this,n,!0);return r.addAll(e,n.from,n.to),ie.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(rj(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=oS(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=oS(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Rl(e,Rl.schemaRules(e)))}}const bN={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},EN={ol:!0,ul:!0},Qf=1,Xf=2,Qc=4;function iS(t,e,n){return e!=null?(e?Qf:0)|(e==="full"?Xf:0):t&&t.whitespace=="pre"?Qf|Xf:n&~Qc}class ud{constructor(e,n,r,i,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.pendingMarks=i,this.solid=s,this.options=a,this.content=[],this.activeMarks=ht.none,this.stashMarks=[],this.match=o||(a&Qc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(H.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Qf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=H.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(H.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,r=this.pendingMarks;n<r.length;n++){let i=r[n];(this.type?this.type.allowsMarkType(i.type):sj(i.type,e))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!bN.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class sS{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0;let i=n.topNode,s,o=iS(null,n.preserveWhitespace,0)|(r?Qc:0);i?s=new ud(i.type,i.attrs,ht.none,ht.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new ud(null,null,ht.none,ht.none,!0,null,o):s=new ud(e.schema.topNodeType,null,ht.none,ht.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let r=e.getAttribute("style");if(!r)return n();let i=this.readStyles(ij(r));if(!i)return;let[s,o]=i,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,r=this.top;if(r.options&Xf||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(r.options&Qf)r.options&Xf?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let i=r.content[r.content.length-1],s=e.previousSibling;(!i||s&&s.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let r=e.nodeName.toLowerCase(),i;EN.hasOwnProperty(r)&&this.parser.normalizeLists&&nj(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,n));if(s?s.ignore:tj.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(bN.hasOwnProperty(r))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?i:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=ht.none,r=ht.none;for(let i=0;i<e.length;i+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[i],e[i+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(r=a.addToSet(r))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,r]}addElementByRule(e,n,r){let i,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):i=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}i&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,r){let i=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=r==null?null:e.childNodes[r];s!=o;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s);this.findAtPoint(e,i)}findPlace(e){let n,r;for(let i=this.open;i>=0;i--){let s=this.nodes[i],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(r);for(let i=0;i<n.length;i++)this.enterInner(n[i],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let r=n.activeMarks;for(let i=0;i<e.marks.length;i++)(!n.type||n.type.allowsMarkType(e.marks[i].type))&&(r=e.marks[i].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}enter(e,n,r){let i=this.findPlace(e.create(n));return i&&this.enterInner(e,n,!0,r),i}enterInner(e,n=null,r=!1,i){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=iS(e,i,s.options);s.options&Qc&&s.content.length==0&&(o|=Qc),this.nodes.push(new ud(e,n,s.activeMarks,s.pendingMarks,r,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let n=oj(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let r=this.open;r>=0;r--){let i=this.nodes[r];if(i.pendingMarks.lastIndexOf(e)>-1)i.pendingMarks=e.removeFromSet(i.pendingMarks);else{i.activeMarks=e.removeFromSet(i.activeMarks);let o=i.popFromStashMark(e);o&&i.type&&i.type.allowsMarkType(o.type)&&(i.activeMarks=o.addToSet(i.activeMarks))}if(i==n)break}}}function nj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&EN.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function rj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ij(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,r=[];for(;n=e.exec(t);)r.push(n[1],n[2].trim());return r}function oS(t){let e={};for(let n in t)e[n]=t[n];return e}function sj(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}function oj(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}class si{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=$g(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=si.renderSpec($g(n),this.nodes[e.type.name](e));if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&si.renderSpec($g(r),i(e,n))}static renderSpec(e,n,r=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));let o,a=r?e.createElementNS(r,i):e.createElement(i),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let h=u.indexOf(" ");h>0?a.setAttributeNS(u.slice(0,h),u.slice(h+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let h=n[u];if(h===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:d,contentDOM:f}=si.renderSpec(e,h,r);if(a.appendChild(d),f){if(o)throw new RangeError("Multiple content holes");o=f}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new si(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=aS(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return aS(e.marks)}}function aS(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function $g(t){return t.document||window.document}const TN=65535,wN=Math.pow(2,16);function aj(t,e){return t+e*wN}function lS(t){return t&TN}function lj(t){return(t-(t&TN))/wN}const SN=1,IN=2,Hd=4,AN=8;class j_{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&AN)>0}get deletedBefore(){return(this.delInfo&(SN|Hd))>0}get deletedAfter(){return(this.delInfo&(IN|Hd))>0}get deletedAcross(){return(this.delInfo&Hd)>0}}class or{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&or.empty)return or.empty}recover(e){let n=0,r=lS(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+lj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],h=l+c;if(e<=h){let d=c?e==l?-1:e==h?1:n:n,f=l+i+(d<0?0:u);if(r)return f;let p=e==(n<0?l:h)?null:aj(a/3,e-l),m=e==l?IN:e==h?SN:Hd;return(n<0?e!=l:e!=h)&&(m|=AN),new j_(f,m,p)}i+=u-c}return r?e+i:new j_(e+i,0,null)}touches(e,n){let r=0,i=lS(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new or(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?or.empty:new or(e<0?[0,-e,0]:[0,0,e])}}or.empty=new or([]);class tl{constructor(e=[],n,r=0,i=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=i}slice(e=0,n=this.maps.length){return new tl(this.maps,this.mirror,e,n)}copy(){return new tl(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let i=e.getMirror(n);this.appendMap(e.maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e.maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new tl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new j_(e,i,null)}}const Hg=Object.create(null);class Vn{getMap(){return or.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Hg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Hg)throw new RangeError("Duplicate use of step JSON ID "+e);return Hg[e]=n,n.prototype.jsonID=e,n}}class Ut{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ut(e,null)}static fail(e){return new Ut(null,e)}static fromReplace(e,n,r,i){try{return Ut.ok(e.replace(n,r,i))}catch(s){if(s instanceof qf)return Ut.fail(s.message);throw s}}}function $0(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy($0(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return H.fromArray(r)}class As extends Vn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ie($0(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Ut.fromReplace(e,this.from,this.to,s)}invert(){return new oi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new As(n.pos,r.pos,this.mark)}merge(e){return e instanceof As&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new As(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new As(n.from,n.to,e.markFromJSON(n.mark))}}Vn.jsonID("addMark",As);class oi extends Vn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ie($0(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Ut.fromReplace(e,this.from,this.to,r)}invert(){return new As(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new oi(n.pos,r.pos,this.mark)}merge(e){return e instanceof oi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new oi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new oi(n.from,n.to,e.markFromJSON(n.mark))}}Vn.jsonID("removeMark",oi);class Cs extends Vn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ut.fromReplace(e,this.pos,this.pos+1,new ie(H.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Cs(this.pos,n.marks[i]);return new Cs(this.pos,this.mark)}}return new kl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Cs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Cs(n.pos,e.markFromJSON(n.mark))}}Vn.jsonID("addNodeMark",Cs);class kl extends Vn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ut.fromReplace(e,this.pos,this.pos+1,new ie(H.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Cs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new kl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new kl(n.pos,e.markFromJSON(n.mark))}}Vn.jsonID("removeNodeMark",kl);class en extends Vn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&W_(e,this.from,this.to)?Ut.fail("Structure replace would overwrite content"):Ut.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new or([this.from,this.to-this.from,this.slice.size])}invert(e){return new en(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new en(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof en)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ie.empty:new ie(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new en(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ie.empty:new ie(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new en(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new en(n.from,n.to,ie.fromJSON(e,n.slice),!!n.structure)}}Vn.jsonID("replace",en);class nn extends Vn{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(W_(e,this.from,this.gapFrom)||W_(e,this.gapTo,this.to)))return Ut.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ut.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ut.fromReplace(e,this.from,this.to,r):Ut.fail("Content does not fit in gap")}getMap(){return new or([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new nn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new nn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new nn(n.from,n.to,n.gapFrom,n.gapTo,ie.fromJSON(e,n.slice),n.insert,!!n.structure)}}Vn.jsonID("replaceAround",nn);function W_(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function cj(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&u.type.allowsMarkType(r.type)){let d=Math.max(c,e),f=Math.min(c+l.nodeSize,n),p=r.addToSet(h);for(let m=0;m<h.length;m++)h[m].isInSet(p)||(o&&o.to==d&&o.mark.eq(h[m])?o.to=f:i.push(o=new oi(d,f,h[m])));a&&a.to==d?a.to=f:s.push(a=new As(d,f,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function uj(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Tm){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let h=l[u],d;for(let f=0;f<i.length;f++){let p=i[f];p.step==s-1&&h.eq(i[f].style)&&(d=p)}d?(d.to=c,d.step=s):i.push({style:h,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new oi(o.from,o.to,o.style)))}function hj(t,e,n,r=n.contentMatch){let i=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<i.childCount;a++){let l=i.child(a),c=o+l.nodeSize,u=r.matchType(l.type);if(!u)s.push(new en(o,c,ie.empty));else{r=u;for(let h=0;h<l.marks.length;h++)n.allowsMarkType(l.marks[h].type)||t.step(new oi(o,c,l.marks[h]));if(l.isText&&!n.spec.code){let h,d=/\r?\n|\r/g,f;for(;h=d.exec(l.text);)f||(f=new ie(H.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new en(o+h.index,o+h.index+h[0].length,f))}}o=c}if(!r.validEnd){let a=r.fillBefore(H.empty,!0);t.replace(o,o,new ie(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function dj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Jl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!dj(i,s,o))break}return null}function fj(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=H.empty,h=0;for(let p=s,m=!1;p>n;p--)m||r.index(p)>0?(m=!0,u=H.from(r.node(p).copy(u)),h++):l--;let d=H.empty,f=0;for(let p=s,m=!1;p>n;p--)m||i.after(p+1)<i.end(p)?(m=!0,d=H.from(i.node(p).copy(d)),f++):c++;t.step(new nn(l,c,o,a,new ie(u.append(d),h,f),u.size-h,!0))}function H0(t,e,n=null,r=t){let i=pj(t,e),s=i&&mj(r,e);return s?i.map(cS).concat({type:e,attrs:n}).concat(s.map(cS)):null}function cS(t){return{type:t,attrs:null}}function pj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function mj(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function gj(t,e,n){let r=H.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=H.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new nn(i,s,i,s,new ie(r,0,0),n.length,!0))}function yj(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(r,i)&&_j(t.doc,t.mapping.slice(s).map(a),r)){t.clearIncompatible(t.mapping.slice(s).map(a,1),r);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return t.step(new nn(c,u,c+1,u-1,new ie(H.from(r.create(i,null,o.marks)),0,0),1,!0)),!1}})}function _j(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function vj(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new nn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ie(H.from(o),0,0),1,!0))}function nl(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let h=i.node(c),d=i.index(c);if(h.type.spec.isolating)return!1;let f=h.content.cutByIndex(d,h.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||h;if(!h.canReplace(d+1,h.childCount)||!m.type.validContent(f))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function bj(t,e,n=1,r){let i=t.doc.resolve(e),s=H.empty,o=H.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=H.from(i.node(a).copy(s));let u=r&&r[c];o=H.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new en(e,e,new ie(s.append(o),n,n),!0))}function no(t,e){let n=t.resolve(e),r=n.index();return CN(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function CN(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function wm(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&CN(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Ej(t,e,n){let r=new en(e-n,e+n,ie.empty,!0);t.step(r)}function Tj(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function RN(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let h=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=h&&c.canReplaceWith(l,l,h[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Sm(t,e,n=e,r=ie.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return kN(i,s,r)?new en(e,n,r):new wj(i,s,r).fit()}function kN(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class wj{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=H.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=H.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ie(s,o,a);return e>-1?new nn(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new en(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=zg(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,h=null;if(n==1&&(o?c.matchType(o.type)||(h=c.fillBefore(H.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:h};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=zg(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ie(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=zg(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new ie(Tc(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ie(Tc(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:h,type:d}=this.frontier[n];if(i){for(let m=0;m<i.childCount;m++)u.push(i.child(m));h=h.matchFragment(i)}let f=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=h.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(h=g,u.push(ON(m.mark(d.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=wc(this.placed,n,H.from(u)),this.frontier[n].match=h,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<f;m++){let _=g.lastChild;this.frontier.push({type:_.type,match:_.contentMatchAt(_.childCount)}),g=_.content}this.unplaced=p?e==0?ie.empty:new ie(Tc(o.content,e-1,1),e-1,f<0?o.openEnd:e-1):new ie(Tc(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!jg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=jg(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=jg(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=wc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=wc(this.placed,this.depth,H.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(H.empty,!0);n.childCount&&(this.placed=wc(this.placed,this.frontier.length,n))}}function Tc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Tc(t.firstChild.content,e-1,n)))}function wc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(wc(t.lastChild.content,e-1,n)))}function zg(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function ON(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,ON(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(H.empty,!0)))),t.copy(r)}function jg(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!Sj(n,s.content,o)?a:null}function Sj(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Ij(t){return t.spec.defining||t.spec.definingForContent}function Aj(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(kN(i,s,r))return t.step(new en(e,n,r));let o=MN(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let d=i.depth,f=i.pos-1;d>0;d--,f--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?a=d:i.before(d)==f&&o.splice(1,0,-d)}let l=o.indexOf(a),c=[],u=r.openStart;for(let d=r.content,f=0;;f++){let p=d.firstChild;if(c.push(p),f==r.openStart)break;d=p.content}for(let d=u-1;d>=0;d--){let f=c[d],p=Ij(f.type);if(p&&!f.sameMarkup(i.node(Math.abs(a)-1)))u=d;else if(p||!f.type.isTextblock)break}for(let d=r.openStart;d>=0;d--){let f=(d+u+1)%(r.openStart+1),p=c[f];if(p)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],_=!0;g<0&&(_=!1,g=-g);let v=i.node(g-1),T=i.index(g-1);if(v.canReplaceWith(T,T,p.type,p.marks))return t.replace(i.before(g),_?s.after(g):n,new ie(NN(r.content,0,r.openStart,f),f,r.openEnd))}}let h=t.steps.length;for(let d=o.length-1;d>=0&&(t.replace(e,n,r),!(t.steps.length>h));d--){let f=o[d];f<0||(e=i.before(f),n=s.after(f))}}function NN(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(NN(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(H.empty,!0))}return t}function Cj(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Tj(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ie(H.from(r),0,0))}function Rj(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=MN(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o)return t.delete(r.before(o),n);t.delete(e,n)}function MN(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class rl extends Vn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ut.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ut.fromReplace(e,this.pos,this.pos+1,new ie(H.from(i),0,n.isLeaf?0:1))}getMap(){return or.empty}invert(e){return new rl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new rl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new rl(n.pos,n.attr,n.value)}}Vn.jsonID("attr",rl);class Pu extends Vn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Ut.ok(r)}getMap(){return or.empty}invert(e){return new Pu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Pu(n.attr,n.value)}}Vn.jsonID("docAttr",Pu);let Ol=class extends Error{};Ol=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Ol.prototype=Object.create(Error.prototype);Ol.prototype.constructor=Ol;Ol.prototype.name="TransformError";class kj{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new tl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Ol(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ie.empty){let i=Sm(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ie(H.from(r),0,0))}delete(e,n){return this.replace(e,n,ie.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Aj(this,e,n,r),this}replaceRangeWith(e,n,r){return Cj(this,e,n,r),this}deleteRange(e,n){return Rj(this,e,n),this}lift(e,n){return fj(this,e,n),this}join(e,n=1){return Ej(this,e,n),this}wrap(e,n){return gj(this,e,n),this}setBlockType(e,n=e,r,i=null){return yj(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return vj(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new rl(e,n,r)),this}setDocAttribute(e,n){return this.step(new Pu(e,n)),this}addNodeMark(e,n){return this.step(new Cs(e,n)),this}removeNodeMark(e,n){if(!(n instanceof ht)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new kl(e,n)),this}split(e,n=1,r){return bj(this,e,n,r),this}addMark(e,n,r){return cj(this,e,n,r),this}removeMark(e,n,r){return uj(this,e,n,r),this}clearIncompatible(e,n,r){return hj(this,e,n,r),this}}const Wg=Object.create(null);class Be{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Oj(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ie.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?ie.empty:n),a==0&&dS(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),dS(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Pe(e):ka(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?ka(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):ka(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ur(e.node(0))}static atStart(e){return ka(e,e,0,0,1)||new Ur(e)}static atEnd(e){return ka(e,e,e.content.size,e.childCount,-1)||new Ur(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Wg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Wg)throw new RangeError("Duplicate use of selection JSON ID "+e);return Wg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Pe.between(this.$anchor,this.$head).getBookmark()}}Be.prototype.visible=!0;class Oj{constructor(e,n){this.$from=e,this.$to=n}}let uS=!1;function hS(t){!uS&&!t.parent.inlineContent&&(uS=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Pe extends Be{constructor(e,n=e){hS(e),hS(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Be.near(r);let i=e.resolve(n.map(this.anchor));return new Pe(i.parent.inlineContent?i:r,r)}replace(e,n=ie.empty){if(super.replace(e,n),n==ie.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Pe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Im(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Pe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Be.findFrom(n,r,!0)||Be.findFrom(n,-r,!0);if(s)n=s.$head;else return Be.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Be.findFrom(e,-r,!0)||Be.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Pe(e,n)}}Be.jsonID("text",Pe);class Im{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Im(e.map(this.anchor),e.map(this.head))}resolve(e){return Pe.between(e.resolve(this.anchor),e.resolve(this.head))}}class Te extends Be{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Be.near(s):new Te(s)}content(){return new ie(H.from(this.node),0,0)}eq(e){return e instanceof Te&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new z0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Te(e.resolve(n.anchor))}static create(e,n){return new Te(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Te.prototype.visible=!1;Be.jsonID("node",Te);class z0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Im(r,r):new z0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Te.isSelectable(r)?new Te(n):Be.near(n)}}class Ur extends Be{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ie.empty){if(n==ie.empty){e.delete(0,e.doc.content.size);let r=Be.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ur(e)}map(e){return new Ur(e)}eq(e){return e instanceof Ur}getBookmark(){return Nj}}Be.jsonID("all",Ur);const Nj={map(){return this},resolve(t){return new Ur(t)}};function ka(t,e,n,r,i,s=!1){if(e.inlineContent)return Pe.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Te.isSelectable(a))return Te.create(t,n-(i<0?a.nodeSize:0))}else{let l=ka(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function dS(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof en||i instanceof nn))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(Be.near(t.doc.resolve(o),n))}const fS=1,hd=2,pS=4;class Mj extends kj{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|fS)&~hd,this.storedMarks=null,this}get selectionSet(){return(this.updated&fS)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=hd,this}ensureMarks(e){return ht.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&hd)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~hd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ht.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(Be.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=pS,this}get scrolledIntoView(){return(this.updated&pS)>0}}function mS(t,e){return!e||!t?t:t.bind(e)}class Sc{constructor(e,n,r){this.name=e,this.init=mS(n.init,r),this.apply=mS(n.apply,r)}}const Pj=[new Sc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Sc("selection",{init(t,e){return t.selection||Be.atStart(e.doc)},apply(t){return t.selection}}),new Sc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Sc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Gg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Pj.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Sc(r.key,r.spec.state,r))})}}class La{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let h=0;h<this.config.plugins.length;h++)i.push(h<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new La(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Mj(this)}static create(e){let n=new Gg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new La(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Gg(this.schema,e.plugins),r=n.fields,i=new La(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Gg(e.schema,e.plugins),s=new La(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ho.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Be.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function PN(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=PN(i,e,{})),n[r]=i}return n}class Rr{constructor(e){this.spec=e,this.props={},e.props&&PN(e.props,this,this.props),this.key=e.key?e.key.key:xN("plugin")}getState(e){return e[this.key]}}const qg=Object.create(null);function xN(t){return t in qg?t+"$"+ ++qg[t]:(qg[t]=0,t+"$")}class ro{constructor(e="key"){this.key=xN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const gn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},xu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let G_=null;const Mi=function(t,e,n){let r=G_||(G_=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},xj=function(){G_=null},ra=function(t,e,n,r){return n&&(gS(t,e,n,r,-1)||gS(t,e,n,r,1))},Dj=/^(img|br|input|textarea|hr)$/i;function gS(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Zr(t))){let s=t.parentNode;if(!s||s.nodeType!=1||kh(t)||Dj.test(t.nodeName)||t.contentEditable=="false")return!1;e=gn(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Zr(t):0}else return!1}}function Zr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Lj(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Zr(t)}else if(t.parentNode&&!kh(t))e=gn(t),t=t.parentNode;else return null}}function Vj(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!kh(t))e=gn(t)+1,t=t.parentNode;else return null}}function Fj(t,e,n){for(let r=e==0,i=e==Zr(t);r||i;){if(t==n)return!0;let s=gn(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Zr(t)}}function kh(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Am=function(t){return t.focusNode&&ra(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function vo(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Bj(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Uj(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const wi=typeof navigator<"u"?navigator:null,yS=typeof document<"u"?document:null,io=wi&&wi.userAgent||"",q_=/Edge\/(\d+)/.exec(io),DN=/MSIE \d/.exec(io),K_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(io),Xn=!!(DN||K_||q_),Ds=DN?document.documentMode:K_?+K_[1]:q_?+q_[1]:0,Wr=!Xn&&/gecko\/(\d+)/i.test(io);Wr&&+(/Firefox\/(\d+)/.exec(io)||[0,0])[1];const Y_=!Xn&&/Chrome\/(\d+)/.exec(io),$n=!!Y_,$j=Y_?+Y_[1]:0,zn=!Xn&&!!wi&&/Apple Computer/.test(wi.vendor),Nl=zn&&(/Mobile\/\w+/.test(io)||!!wi&&wi.maxTouchPoints>2),_r=Nl||(wi?/Mac/.test(wi.platform):!1),Hj=wi?/Win/.test(wi.platform):!1,Pr=/Android \d/.test(io),Oh=!!yS&&"webkitFontSmoothing"in yS.documentElement.style,zj=Oh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function jj(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ki(t,e){return typeof t=="number"?t:t[e]}function Wj(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function _S(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=xu(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?jj(s):Wj(a),u=0,h=0;if(e.top<c.top+ki(r,"top")?h=-(c.top-e.top+ki(i,"top")):e.bottom>c.bottom-ki(r,"bottom")&&(h=e.bottom-e.top>c.bottom-c.top?e.top+ki(i,"top")-c.top:e.bottom-c.bottom+ki(i,"bottom")),e.left<c.left+ki(r,"left")?u=-(c.left-e.left+ki(i,"left")):e.right>c.right-ki(r,"right")&&(u=e.right-c.right+ki(i,"right")),u||h)if(l)s.defaultView.scrollBy(u,h);else{let d=a.scrollLeft,f=a.scrollTop;h&&(a.scrollTop+=h),u&&(a.scrollLeft+=u);let p=a.scrollLeft-d,m=a.scrollTop-f;e={left:e.left-p,top:e.top-m,right:e.right-p,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function Gj(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:LN(t.dom)}}function LN(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=xu(r));return e}function qj({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;VN(n,r==0?0:r-e)}function VN(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Ta=null;function Kj(t){if(t.setActive)return t.setActive();if(Ta)return t.focus(Ta);let e=LN(t);t.focus(Ta==null?{get preventScroll(){return Ta={preventScroll:!0},!0}}:void 0),Ta||(Ta=!1,VN(e,0))}function FN(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,h=0;u;u=u.nextSibling,h++){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Mi(u).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.top<=o&&p.bottom>=a){o=Math.max(p.bottom,o),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){n=u,r=m,i=m&&n.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(s=h+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(s=h+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?Yj(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:FN(n,i)}function Yj(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=us(r,1);if(s.top!=s.bottom&&j0(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function j0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Jj(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Qj(t,e,n){let{node:r,offset:i}=FN(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function Xj(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>r.left||l.top>r.top?i=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(i=a.posAfter)),!a.contentDOM&&i<0&&!a.node.isText)return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function BN(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(j0(e,c))return BN(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function Zj(t,e){let n=t.dom.ownerDocument,r,i=0,s=Uj(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!j0(e,c)||(o=BN(t.dom,e,c),!o))return null}if(zn)for(let c=o;r&&c;c=xu(c))c.draggable&&(r=void 0);if(o=Jj(o,e),r){if(Wr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],h;u.nodeName=="IMG"&&(h=u.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}let c;Oh&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=Xj(t,r,i,e))}a==null&&(a=Qj(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function vS(t){return t.top<t.bottom||t.left<t.right}function us(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(vS(r))return r}return Array.prototype.find.call(n,vS)||t.getBoundingClientRect()}const eW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function UN(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Oh||Wr;if(r.nodeType==3)if(o&&(eW.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=us(Mi(r,i,i),n);if(Wr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=us(Mi(r,i-1,i-1),-1);if(c.top==l.top){let u=us(Mi(r,i,i+1),-1);if(u.top!=l.top)return uc(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,uc(us(Mi(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Zr(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return Kg(l.getBoundingClientRect(),!1)}if(s==null&&i<Zr(r)){let l=r.childNodes[i];if(l.nodeType==1)return Kg(l.getBoundingClientRect(),!0)}return Kg(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Zr(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Mi(l,Zr(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return uc(us(c,1),!1)}if(s==null&&i<Zr(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Mi(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return uc(us(c,-1),!0)}return uc(us(r.nodeType==3?Mi(r):r,-n),n>=0)}function uc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Kg(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function $N(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function tW(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return $N(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=UN(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Mi(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const nW=/[\u0590-\u08ac]/;function rW(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return!nW.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:$N(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:h}=t.domSelectionRange(),d=a.caretBidiLevel;a.modify("move",n,"character");let f=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:p,focusOffset:m}=t.domSelectionRange(),g=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,h),l&&(l!=u||c!=h)&&a.extend&&a.extend(l,c)}catch{}return d!=null&&(a.caretBidiLevel=d),g})}let bS=null,ES=null,TS=!1;function iW(t,e,n){return bS==e&&ES==n?TS:(bS=e,ES=n,TS=n=="up"||n=="down"?tW(t,e,n):rW(t,e,n))}const Ir=0,wS=1,Ro=2,Si=3;class Nh{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ir,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>gn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof zN){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof HN&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?gn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?gn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let h=a;h>0;h--){let d=this.children[h-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){i=gn(d.dom)+1;break}e-=d.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let h=this.children[u];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){s=gn(h.dom);break}n+=h.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let d=0,f=0;d<this.children.length;d++){let p=this.children[d],m=f+p.size;if(s>f&&o<m)return p.setSelection(e-f-p.border,n-f-p.border,r,i);f=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.getSelection(),u=!1;if((Wr||zn)&&e==n){let{node:d,offset:f}=a;if(d.nodeType==3){if(u=!!(f&&d.nodeValue[f-1]==`
`),u&&f==d.nodeValue.length)for(let p=d,m;p;p=p.parentNode){if(m=p.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:gn(m)+1});break}let g=p.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let p=d.childNodes[f-1];u=p&&(p.nodeName=="BR"||p.contentEditable=="false")}}if(Wr&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let d=c.focusNode.childNodes[c.focusOffset];d&&d.contentEditable=="false"&&(i=!0)}if(!(i||u&&zn)&&ra(a.node,a.offset,c.anchorNode,c.anchorOffset)&&ra(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let f=a;a=l,l=f}let d=document.createRange();d.setEnd(l.node,l.offset),d.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(d)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Ro:wS,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Si:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ro:Si}r=o}this.dirty=Ro}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ro:wS;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class HN extends Nh{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ir&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class sW extends Nh{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ia extends Nh{constructor(e,n,r,i){super(e,[],r,i),this.mark=n}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=si.renderSpec(document,n.type.spec.toDOM(n,r))),new ia(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&Si||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Si&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ir){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ir}}slice(e,n,r){let i=ia.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=X_(s,n,o,r)),e>0&&(s=X_(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}}class Ls extends Nh{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,h=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:h}=si.renderSpec(document,n.type.spec.toDOM(n)));!h&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let d=u;return u=GN(u,r,n),c?l=new oW(e,n,r,i,u,h||null,d,c,s,o+1):n.isText?new Cm(e,n,r,i,u,d,s):new Ls(e,n,r,i,u,h||null,d,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>H.empty)}return e}matchesNode(e,n,r){return this.dirty==Ir&&e.eq(this.node)&&Q_(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new lW(this,o&&o.node,e);hW(this.node,this.innerDeco,(c,u,h)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!h&&l.syncToMarks(u==this.node.childCount?ht.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,h,d)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,h,d)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(f=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,h,f,e)||l.updateNextNode(c,u,h,e,d,i)||l.addNode(c,u,h,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Ro)&&(o&&this.protectLocalComposition(e,o),jN(this.contentDOM,this.children,e),Nl&&dW(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Pe)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=fW(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new sW(this,s,n,i);e.input.compositionNodes.push(o),this.children=X_(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Si||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ir}updateOuterDeco(e){if(Q_(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=WN(this.dom,this.nodeDOM,J_(this.outerDeco,this.node,n),J_(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function SS(t,e,n,r,i){GN(r,e,t);let s=new Ls(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Cm extends Ls{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Si||this.dirty!=Ir&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ir||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ir,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Cm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Si)}get domAtom(){return!1}isText(e){return this.node.text==e}}class zN extends Nh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ir&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class oW extends Ls{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==Si)return!1;if(this.spec.update){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function jN(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=IS(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof ia){let l=r?r.previousSibling:t.lastChild;jN(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=IS(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Xc=function(t){t&&(this.nodeName=t)};Xc.prototype=Object.create(null);const ko=[new Xc];function J_(t,e,n){if(t.length==0)return ko;let r=n?ko[0]:new Xc,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Xc(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Xc(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function WN(t,e,n,r){if(n==ko&&r==ko)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=ko[0]),i=l}aW(i,a||ko[0],o)}return i}function aW(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function GN(t,e,n){return WN(t,t,ko,J_(e,n,t.nodeType!=1))}function Q_(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function IS(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class lW{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=cW(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ir,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ia.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Si&&o.dom==o.contentDOM&&(o.dirty=Ro),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ls){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,h,d=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Si&&Q_(n,l.outerDeco));if(!d&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(h=this.recreateWrapper(l,e,n,r,i,o)))return this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Ro,h.updateChildren(i,o+1),h.dirty=Ir),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=Ls.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Ls.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new HN(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ia;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Cm)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((zn||$n)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new zN(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function cW(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ia)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function uW(t,e){return t.type.side-e.type.side}function hW(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,h;for(;o<i.length&&i[o].to==s;){let g=i[o++];g.widget&&(u?(h||(h=[u])).push(g):u=g)}if(u)if(h){h.sort(uW);for(let g=0;g<h.length;g++)n(h[g],c,!!l)}else n(u,c,!!l);let d,f;if(l)f=-1,d=l,l=null;else if(c<t.childCount)f=c,d=t.child(c++);else break;for(let g=0;g<a.length;g++)a[g].to<=s&&a.splice(g--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let p=s+d.nodeSize;if(d.isText){let g=p;o<i.length&&i[o].from<g&&(g=i[o].from);for(let _=0;_<a.length;_++)a[_].to<g&&(g=a[_].to);g<p&&(l=d.cut(g-s),d=d.cut(0,g-s),p=g,f=-1)}else for(;o<i.length&&i[o].to<p;)o++;let m=d.isInline&&!d.isLeaf?a.filter(g=>!g.inline):a.slice();r(d,m,e.forChild(s,d),f),s=p}}function dW(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function fW(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function X_(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function W0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Am(n)){for(l=a;i&&!i.node;)i=i.parent;let u=i.node;if(i&&u.isAtom&&Te.isSelectable(u)&&i.parent&&!(u.isInline&&Fj(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new Te(o==h?a:r.resolve(h))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=r.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=G0(t,l,a,u)}return c}function qN(t){return t.editable?t.hasFocus():YN(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ji(t,e=!1){let n=t.state.selection;if(KN(t,n),!!qN(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&$n){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ra(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)mW(t);else{let{anchor:r,head:i}=n,s,o;AS&&!(n instanceof Pe)&&(n.$from.parent.inlineContent||(s=CS(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=CS(t,n.to))),t.docView.setSelection(r,i,t.root,e),AS&&(s&&RS(s),o&&RS(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&pW(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const AS=zn||$n&&$j<63;function CS(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(zn&&i&&i.contentEditable=="false")return Yg(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Yg(i);if(s)return Yg(s)}}function Yg(t){return t.contentEditable="true",zn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function RS(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function pW(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!qN(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function mW(t){let e=t.domSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setEnd(r.parentNode,gn(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Xn&&Ds<=11&&(r.disabled=!0,r.disabled=!1)}function KN(t,e){if(e instanceof Te){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(kS(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else kS(t)}function kS(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function G0(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Pe.between(e,n,r)}function OS(t){return t.editable&&!t.hasFocus()?!1:YN(t)}function YN(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function gW(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ra(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Z_(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Be.findFrom(s,e)}function ys(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function NS(t,e,n){let r=t.state.selection;if(r instanceof Pe)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ys(t,new Pe(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Z_(t.state,e);return i&&i instanceof Te?ys(t,i):!1}else if(!(_r&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Te.isSelectable(s)?ys(t,new Te(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Oh?ys(t,new Pe(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Te&&r.node.isInline)return ys(t,new Pe(e>0?r.$to:r.$from));{let i=Z_(t.state,e);return i?ys(t,i):!1}}}function Zf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Zc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function wa(t,e){return e<0?yW(t):_W(t)}function yW(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Wr&&n.nodeType==1&&r<Zf(n)&&Zc(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Zc(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(JN(n))break;{let a=n.previousSibling;for(;a&&Zc(a,-1);)i=n.parentNode,s=gn(a),a=a.previousSibling;if(a)n=a,r=Zf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?ev(t,n,r):i&&ev(t,i,s)}function _W(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Zf(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Zc(a,1))s=n,o=++r;else break}else{if(JN(n))break;{let a=n.nextSibling;for(;a&&Zc(a,1);)s=a.parentNode,o=gn(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Zf(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&ev(t,s,o)}function JN(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function vW(t,e){for(;t&&e==t.childNodes.length&&!kh(t);)e=gn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function bW(t,e){for(;t&&!e&&!kh(t);)e=gn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function ev(t,e,n){if(e.nodeType!=3){let s,o;(o=vW(e,n))?(e=o,n=0):(s=bW(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(Am(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&ji(t)},50)}function MS(t,e){let n=t.state.doc.resolve(e);if(!($n||Hj)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function PS(t,e,n){let r=t.state.selection;if(r instanceof Pe&&!r.empty||n.indexOf("s")>-1||_r&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Z_(t.state,e);if(o&&o instanceof Te)return ys(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof Ur?Be.near(o,e):Be.findFrom(o,e);return a?ys(t,a):!1}return!1}function xS(t,e){if(!(t.state.selection instanceof Pe))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function DS(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function EW(t){if(!zn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;DS(t,r,"true"),setTimeout(()=>DS(t,r,"false"),20)}return!1}function TW(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function wW(t,e){let n=e.keyCode,r=TW(e);if(n==8||_r&&n==72&&r=="c")return xS(t,-1)||wa(t,-1);if(n==46&&!e.shiftKey||_r&&n==68&&r=="c")return xS(t,1)||wa(t,1);if(n==13||n==27)return!0;if(n==37||_r&&n==66&&r=="c"){let i=n==37?MS(t,t.state.selection.from)=="ltr"?-1:1:-1;return NS(t,i,r)||wa(t,i)}else if(n==39||_r&&n==70&&r=="c"){let i=n==39?MS(t,t.state.selection.from)=="ltr"?1:-1:1;return NS(t,i,r)||wa(t,i)}else{if(n==38||_r&&n==80&&r=="c")return PS(t,-1,r)||wa(t,-1);if(n==40||_r&&n==78&&r=="c")return EW(t)||PS(t,1,r)||wa(t,1);if(r==(_r?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function QN(t,e){t.someProp("transformCopied",f=>{e=f(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let f=r.firstChild;n.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let o=t.someProp("clipboardSerializer")||si.fromSchema(t.state.schema),a=rM(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,h=0;for(;c&&c.nodeType==1&&(u=nM[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),h++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${h?` -${h}`:""} ${JSON.stringify(n)}`);let d=t.someProp("clipboardTextSerializer",f=>f(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:d}}function XN(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",d=>{e=d(e,s||r,t)}),s)return e?new ie(H.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ie.empty;let h=t.someProp("clipboardTextParser",d=>d(e,i,r,t));if(h)a=h;else{let d=i.marks(),{schema:f}=t.state,p=si.fromSchema(f);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(p.serializeNode(f.text(m,d)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),o=AW(n),Oh&&CW(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let h=+u[3];h>0;h--){let d=o.firstChild;for(;d&&d.nodeType!=1;)d=d.nextSibling;if(!d)break;o=d}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Rl.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(d){return d.nodeName=="BR"&&!d.nextSibling&&d.parentNode&&!SW.test(d.parentNode.nodeName)?{ignore:!0}:null}})),u)a=RW(LS(a,+u[1],+u[2]),u[4]);else if(a=ie.maxOpen(IW(a.content,i),!0),a.openStart||a.openEnd){let h=0,d=0;for(let f=a.content.firstChild;h<a.openStart&&!f.type.spec.isolating;h++,f=f.firstChild);for(let f=a.content.lastChild;d<a.openEnd&&!f.type.spec.isolating;d++,f=f.lastChild);a=LS(a,h,d)}return t.someProp("transformPasted",h=>{a=h(a,t)}),a}const SW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function IW(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&eM(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=tM(o[o.length-1],s.length));let u=ZN(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return H.from(o)}return t}function ZN(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,H.from(t));return t}function eM(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=eM(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(H.from(ZN(n,t,i+1))))}}function tM(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,tM(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(H.empty,!0);return t.copy(n.append(r))}function tv(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=tv(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(H.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function LS(t,e,n){return e<t.openStart&&(t=new ie(tv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ie(tv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const nM={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let VS=null;function rM(){return VS||(VS=document.implementation.createHTMLDocument("title"))}function AW(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=rM().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&nM[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function CW(t){let e=t.querySelectorAll($n?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function RW(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=H.from(l.create(r[a+1],i)),s++,o++}return new ie(i,s,o)}const jn={},Wn={},kW={touchstart:!0,touchmove:!0};class OW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function NW(t){for(let e in jn){let n=jn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{PW(t,r)&&!q0(t,r)&&(t.editable||!(r.type in Wn))&&n(t,r)},kW[e]?{passive:!0}:void 0)}zn&&t.dom.addEventListener("input",()=>null),nv(t)}function Rs(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function MW(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function nv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>q0(t,r))})}function q0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function PW(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function xW(t,e){!q0(t,e)&&jn[e.type]&&(t.editable||!(e.type in Wn))&&jn[e.type](t,e)}Wn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!sM(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Pr&&$n&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Nl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,vo(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||wW(t,n)?n.preventDefault():Rs(t,"key")};Wn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Wn.keypress=(t,e)=>{let n=e;if(sM(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||_r&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Pe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function Rm(t){return{left:t.clientX,top:t.clientY}}function DW(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function K0(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function il(t,e,n){t.focused||t.focus();let r=t.state.tr.setSelection(e);n=="pointer"&&r.setMeta("pointer",!0),t.dispatch(r)}function LW(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Te.isSelectable(r)?(il(t,new Te(n),"pointer"),!0):!1}function VW(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Te&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Te.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(il(t,Te.create(t.state.doc,i),"pointer"),!0):!1}function FW(t,e,n,r,i){return K0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?VW(t,n):LW(t,n))}function BW(t,e,n,r){return K0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function UW(t,e,n,r){return K0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||$W(t,n,r)}function $W(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(il(t,Pe.create(r,0,r.content.size),"pointer"),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)il(t,Pe.create(r,a+1,a+1+o.content.size),"pointer");else if(Te.isSelectable(o))il(t,Te.create(r,a),"pointer");else continue;return!0}}function Y0(t){return ep(t)}const iM=_r?"metaKey":"ctrlKey";jn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Y0(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&DW(n,t.input.lastClick)&&!n[iM]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(Rm(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new HW(t,o,n,!!r)):(s=="doubleClick"?BW:UW)(t,o.pos,o.inside,n)?n.preventDefault():Rs(t,"pointer"))};class HW{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[iM],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Te&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Wr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Rs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ji(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Rm(e))),this.updateAllowDefault(e),this.allowDefault||!n?Rs(this.view,"pointer"):FW(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||zn&&this.mightDrag&&!this.mightDrag.node.isAtom||$n&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(il(this.view,Be.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Rs(this.view,"pointer")}move(e){this.updateAllowDefault(e),Rs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}jn.touchstart=t=>{t.input.lastTouch=Date.now(),Y0(t),Rs(t,"pointer")};jn.touchmove=t=>{t.input.lastTouch=Date.now(),Rs(t,"pointer")};jn.contextmenu=t=>Y0(t);function sM(t,e){return t.composing?!0:zn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const zW=Pr?5e3:-1;Wn.compositionstart=Wn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),ep(t,!0),t.markCursor=null;else if(ep(t),Wr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}oM(t,zW)};Wn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,oM(t,20))};function oM(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>ep(t),e))}function aM(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=WW());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function jW(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Lj(e.focusNode,e.focusOffset),r=Vj(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n}function WW(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function ep(t,e=!1){if(!(Pr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),aM(t),e||t.docView&&t.docView.dirty){let n=W0(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function GW(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Du=Xn&&Ds<15||Nl&&zj<604;jn.copy=Wn.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Du?null:n.clipboardData,o=r.content(),{dom:a,text:l}=QN(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):GW(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function qW(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function KW(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Lu(t,r.value,null,i,e):Lu(t,r.textContent,r.innerHTML,i,e)},50)}function Lu(t,e,n,r,i){let s=XN(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||ie.empty)))return!0;if(!s)return!1;let o=qW(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function lM(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Wn.paste=(t,e)=>{let n=e;if(t.composing&&!Pr)return;let r=Du?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Lu(t,lM(r),r.getData("text/html"),i,n)?n.preventDefault():KW(t,n)};class cM{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const uM=_r?"altKey":"ctrlKey";jn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Rm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Te?i.to-1:i.to))){if(r&&r.mightDrag)o=Te.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let u=t.docView.nearestDesc(n.target,!0);u&&u.node.type.spec.draggable&&u!=t.docView&&(o=Te.create(t.state.doc,u.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c}=QN(t,a);n.dataTransfer.clearData(),n.dataTransfer.setData(Du?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Du||n.dataTransfer.setData("text/plain",c),t.dragging=new cM(a,!n[uM],o)};jn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Wn.dragover=Wn.dragenter=(t,e)=>e.preventDefault();Wn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Rm(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",p=>{o=p(o,t)}):o=XN(t,lM(n.dataTransfer),Du?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[uM]);if(t.someProp("handleDrop",p=>p(t,n,o||ie.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?RN(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),h=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=c.doc;if(h?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(d))return;let f=c.doc.resolve(u);if(h&&Te.isSelectable(o.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Te(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,_,v)=>p=v),c.setSelection(G0(t,f,c.doc.resolve(p)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};jn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ji(t)},20))};jn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};jn.beforeinput=(t,e)=>{if($n&&Pr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,vo(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Wn)jn[t]=Wn[t];function Vu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class tp{constructor(e,n){this.toDOM=e,this.spec=n||zo,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new wr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof tp&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Vu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Vs{constructor(e,n){this.attrs=e,this.spec=n||zo}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new wr(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Vs&&Vu(this.attrs,e.attrs)&&Vu(this.spec,e.spec)}static is(e){return e.type instanceof Vs}destroy(){}}class J0{constructor(e,n){this.attrs=e,this.spec=n||zo}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new wr(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof J0&&Vu(this.attrs,e.attrs)&&Vu(this.spec,e.spec)}destroy(){}}class wr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new wr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new wr(e,e,new tp(n,r))}static inline(e,n,r,i){return new wr(e,n,new Vs(r,i))}static node(e,n,r,i){return new wr(e,n,new J0(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Vs}get widget(){return this.type instanceof tp}}const Oa=[],zo={};class zt{constructor(e,n){this.local=e.length?e:Oa,this.children=n.length?n:Oa}static create(e,n){return n.length?np(n,e,0,zo):An}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==An||e.maps.length==0?this:this.mapInner(e,n,0,0,r||zo)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?YW(this.children,o||[],e,n,r,i,s):o?new zt(o.sort(jo),Oa):An}add(e,n){return n.length?this==An?zt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=dM(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,np(u,a,c+1,zo)),s+=3}});let o=hM(s?fM(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new zt(o.length?this.local.concat(o).sort(jo):this.local,i||this.children)}remove(e){return e.length==0||this==An?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,h;u<e.length;u++)(h=e[u])&&h.from>a&&h.to<l&&(e[u]=null,(o||(o=[])).push(h));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=An?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new zt(i,r):An}forChild(e,n){if(this==An)return this;if(n.isLeaf)return zt.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Vs){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new zt(i.sort(jo),Oa);return r?new ws([a,r]):a}return r||An}eq(e){if(this==e)return!0;if(!(e instanceof zt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Q0(this.localsInner(e))}localsInner(e){if(this==An)return Oa;if(e.inlineContent||!this.local.some(Vs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Vs||n.push(this.local[r]);return n}}zt.empty=new zt([],[]);zt.removeOverlap=Q0;const An=zt.empty;class ws{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,zo));return ws.from(r)}forChild(e,n){if(n.isLeaf)return zt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=An&&(s instanceof ws?r=r.concat(s.members):r.push(s))}return ws.from(r)}eq(e){if(!(e instanceof ws)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Q0(r?n:n.sort(jo)):Oa}static from(e){switch(e.length){case 0:return An;case 1:return e[0];default:return new ws(e.every(n=>n instanceof zt)?e:e.reduce((n,r)=>n.concat(r instanceof zt?r:r.members),[]))}}}function YW(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let h=0;n.maps[c].forEach((d,f,p,m)=>{let g=m-p-(f-d);for(let _=0;_<a.length;_+=3){let v=a[_+1];if(v<0||d>v+u-h)continue;let T=a[_]+u-h;f>=T?a[_+1]=d<=T?-2:-1:d>=u&&g&&(a[_]+=g,a[_+1]+=g)}h+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),h=u-i;if(h<0||h>=r.content.size){l=!0;continue}let d=n.map(t[c+1]+s,-1),f=d-i,{index:p,offset:m}=r.content.findIndex(h),g=r.maybeChild(p);if(g&&m==h&&m+g.nodeSize==f){let _=a[c+2].mapInner(n,g,u+1,t[c]+s+1,o);_!=An?(a[c]=h,a[c+1]=f,a[c+2]=_):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=JW(a,t,e,n,i,s,o),u=np(c,r,0,o);e=u.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,d=0;h<u.children.length;h+=3){let f=u.children[h];for(;d<a.length&&a[d]<f;)d+=3;a.splice(d,0,u.children[h],u.children[h+1],u.children[h+2])}}return new zt(e.sort(jo),a)}function hM(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new wr(i.from+e,i.to+e,i.type))}return n}function JW(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let h=l.local[u].map(r,i,c);h?n.push(h):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function dM(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function fM(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function np(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=dM(t,a,l+n);if(c){s=!0;let u=np(c,a,n+l+1,r);u!=An&&i.push(l,l+a.nodeSize,u)}});let o=hM(s?fM(t):t,-n).sort(jo);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new zt(o,i):An}function jo(t,e){return t.from-e.from||t.to-e.to}function Q0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),FS(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),FS(e,i,r.copy(s.from,r.to)));break}}}return e}function FS(t,e,n){for(;e<t.length&&jo(n,t[e])>0;)e++;t.splice(e,0,n)}function Jg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=An&&e.push(r)}),t.cursorWrapper&&e.push(zt.create(t.state.doc,[t.cursorWrapper.deco])),ws.from(e)}const QW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},XW=Xn&&Ds<=11;class ZW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class eG{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ZW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Xn&&Ds<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),XW&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,QW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(OS(this.view)){if(this.suppressingSelectionUpdates)return ji(this.view);if(Xn&&Ds<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ra(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=xu(s))n.add(s);for(let s=e.anchorNode;s;s=xu(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&OS(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let h=this.registerMutation(n[u],l);h&&(s=s<0?h.from:Math.min(h.from,s),o=o<0?h.to:Math.max(h.to,o),h.typeOver&&(a=!0))}if(Wr&&l.length>1){let u=l.filter(h=>h.nodeName=="BR");if(u.length==2){let h=u[0],d=u[1];h.parentNode&&h.parentNode.parentNode==d.parentNode?d.remove():h.remove()}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Am(r)&&(c=W0(e))&&c.eq(Be.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ji(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),tG(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ji(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Xn&&Ds<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:h,nextSibling:d}=e.addedNodes[u];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d)}let o=i&&i.parentNode==e.target?gn(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?gn(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let BS=new WeakMap,US=!1;function tG(t){if(!BS.has(t)&&(BS.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Wr,US)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),US=!0}}function $S(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return ra(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function nG(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return $S(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?$S(t,n):null}function rG(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Am(l)||c.push({node:l.focusNode,offset:l.focusOffset})),$n&&t.input.lastKeyCode===8)for(let g=s;g>i;g--){let _=r.childNodes[g-1],v=_.pmViewDesc;if(_.nodeName=="BR"&&!v){s=g;break}if(!v||v.size)break}let h=t.state.doc,d=t.someProp("domParser")||Rl.fromSchema(t.state.schema),f=h.resolve(o),p=null,m=d.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:s,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:iG,context:f});if(c&&c[0].pos!=null){let g=c[0].pos,_=c[1]&&c[1].pos;_==null&&(_=g),p={anchor:g+o,head:_+o}}return{doc:m,sel:p,from:o,to:a}}function iG(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(zn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||zn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const sG=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function oG(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let k=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,U=W0(t,k);if(U&&!t.state.selection.eq(U)){if($n&&Pr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",$=>$(t,vo(13,"Enter"))))return;let F=t.state.tr.setSelection(U);k=="pointer"?F.setMeta("pointer",!0):k=="key"&&F.scrollIntoView(),s&&F.setMeta("composition",s),t.dispatch(F)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=rG(t,e,n),u=t.state.doc,h=u.slice(c.from,c.to),d,f;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(d=t.state.selection.to,f="end"):(d=t.state.selection.from,f="start"),t.input.lastKeyCode=null;let p=cG(h.content,c.doc.content,c.from,d,f);if((Nl&&t.input.lastIOSEnter>Date.now()-225||Pr)&&i.some(k=>k.nodeType==1&&!sG.test(k.nodeName))&&(!p||p.endA>=p.endB)&&t.someProp("handleKeyDown",k=>k(t,vo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof Pe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let k=HS(t,t.state.doc,c.sel);if(k&&!k.eq(t.state.selection)){let U=t.state.tr.setSelection(k);s&&U.setMeta("composition",s),t.dispatch(U)}}return}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&p.start==p.endB&&t.state.selection instanceof Pe&&(p.start>t.state.selection.from&&p.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?p.start=t.state.selection.from:p.endA<t.state.selection.to&&p.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(p.endB+=t.state.selection.to-p.endA,p.endA=t.state.selection.to)),Xn&&Ds<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)=="  "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),g=c.doc.resolveNoCache(p.endB-c.from),_=u.resolve(p.start),v=m.sameParent(g)&&m.parent.inlineContent&&_.end()>=p.endA,T;if((Nl&&t.input.lastIOSEnter>Date.now()-225&&(!v||i.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!v&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(T=Be.findFrom(c.doc.resolve(m.pos+1),1,!0))&&T.head==g.pos)&&t.someProp("handleKeyDown",k=>k(t,vo(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>p.start&&lG(u,p.start,p.endA,m,g)&&t.someProp("handleKeyDown",k=>k(t,vo(8,"Backspace")))){Pr&&$n&&t.domObserver.suppressSelectionUpdates();return}$n&&Pr&&p.endB==p.start&&(t.input.lastAndroidDelete=Date.now()),Pr&&!v&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,g=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(k){return k(t,vo(13,"Enter"))})},20));let I=p.start,A=p.endA,w,O,M;if(v){if(m.pos==g.pos)Xn&&Ds<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ji(t),20)),w=t.state.tr.delete(I,A),O=u.resolve(p.start).marksAcross(u.resolve(p.endA));else if(p.endA==p.endB&&(M=aG(m.parent.content.cut(m.parentOffset,g.parentOffset),_.parent.content.cut(_.parentOffset,p.endA-_.start()))))w=t.state.tr,M.type=="add"?w.addMark(I,A,M.mark):w.removeMark(I,A,M.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let k=m.parent.textBetween(m.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",U=>U(t,I,A,k)))return;w=t.state.tr.insertText(k,I,A)}}if(w||(w=t.state.tr.replace(I,A,c.doc.slice(p.start-c.from,p.endB-c.from))),c.sel){let k=HS(t,w.doc,c.sel);k&&!($n&&Pr&&t.composing&&k.empty&&(p.start!=p.endB||t.input.lastAndroidDelete<Date.now()-100)&&(k.head==I||k.head==w.mapping.map(A)-1)||Xn&&k.empty&&k.head==I)&&w.setSelection(k)}O&&w.ensureMarks(O),s&&w.setMeta("composition",s),t.dispatch(w.scrollIntoView())}function HS(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:G0(t,e.resolve(n.anchor),e.resolve(n.head))}function aG(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(H.from(c).eq(t))return{mark:a,type:o}}function lG(t,e,n,r,i){if(n-e<=i.pos-r.pos||Qg(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(Qg(s,!0,!0));return!o.parent.isTextblock||o.pos>n||Qg(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Qg(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function cG(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&zS(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&zS(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function zS(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class uG{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new OW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(KS),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=GS(this),WS(this),this.nodeViews=qS(this),this.docView=SS(this.state.doc,jS(this),Jg(this),this.dom,this),this.domObserver=new eG(this,(r,i,s,o)=>oG(this,r,i,s,o)),this.domObserver.start(),NW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&nv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(KS),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(aM(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let f=qS(this);dG(f,this.nodeViews)&&(this.nodeViews=f,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&nv(this),this.editable=GS(this),WS(this);let l=Jg(this),c=jS(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",h=s||!this.docView.matchesNode(e.doc,c,l);(h||!e.selection.eq(i.selection))&&(o=!0);let d=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Gj(this);if(o){this.domObserver.stop();let f=h&&(Xn||$n)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&hG(i.selection,e.selection);if(h){let p=$n?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=jW(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=SS(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&gW(this))?ji(this,f):(KN(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():d&&qj(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Te){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&_S(this,n.getBoundingClientRect(),e)}else _S(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new cM(e.slice,e.move,i<0?void 0:Te.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Xn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Kj(this.dom),ji(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Zj(this,e)}coordsAtPos(e,n=1){return UN(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return iW(this,n||this.state,e)}pasteHTML(e,n){return Lu(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Lu(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(MW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Jg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,xj())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return xW(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return zn&&this.root.nodeType===11&&Bj(this.dom.ownerDocument)==this.dom&&nG(this,e)||e}domSelection(){return this.root.getSelection()}}function jS(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[wr.node(0,t.state.doc.content.size,e)]}function WS(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:wr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function GS(t){return!t.someProp("editable",e=>e(t.state)===!1)}function hG(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function qS(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function dG(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function KS(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Gs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fG=typeof navigator<"u"&&/Mac/.test(navigator.platform),pG=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yn=0;yn<10;yn++)Gs[48+yn]=Gs[96+yn]=String(yn);for(var yn=1;yn<=24;yn++)Gs[yn+111]="F"+yn;for(var yn=65;yn<=90;yn++)Gs[yn]=String.fromCharCode(yn+32),rp[yn]=String.fromCharCode(yn);for(var Xg in Gs)rp.hasOwnProperty(Xg)||(rp[Xg]=Gs[Xg]);function mG(t){var e=fG&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||pG&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?rp:Gs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const gG=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function yG(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))gG?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function _G(t){let e=Object.create(null);for(let n in t)e[yG(n)]=t[n];return e}function Zg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function vG(t){return new Rr({props:{handleKeyDown:pM(t)}})}function pM(t){let e=_G(t);return function(n,r){let i=mG(r),s,o=e[Zg(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Zg(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Gs[r.keyCode])&&s!=i){let a=e[Zg(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const bG=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function mM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const EG=(t,e,n)=>{let r=mM(t,n);if(!r)return!1;let i=X0(r);if(!i){let o=r.blockRange(),a=o&&Jl(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(!s.type.spec.isolating&&vM(t,i,e))return!0;if(r.parent.content.size==0&&(Ml(s,"end")||Te.isSelectable(s))){let o=Sm(t.doc,r.before(),r.after(),ie.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ml(s,"end")?Be.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):Te.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},TG=(t,e,n)=>{let r=mM(t,n);if(!r)return!1;let i=X0(r);return i?gM(t,i,e):!1},wG=(t,e,n)=>{let r=yM(t,n);if(!r)return!1;let i=Z0(r);return i?gM(t,i,e):!1};function gM(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Sm(t.doc,s,l,ie.empty);if(!c||c.from!=s||c instanceof en&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Pe.create(u.doc,s)),n(u.scrollIntoView())}return!0}function Ml(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const SG=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=X0(r)}let o=s&&s.nodeBefore;return!o||!Te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Te.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function X0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function yM(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const IG=(t,e,n)=>{let r=yM(t,n);if(!r)return!1;let i=Z0(r);if(!i)return!1;let s=i.nodeAfter;if(vM(t,i,e))return!0;if(r.parent.content.size==0&&(Ml(s,"start")||Te.isSelectable(s))){let o=Sm(t.doc,r.before(),r.after(),ie.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ml(s,"start")?Be.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Te.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},AG=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Z0(r)}let o=s&&s.nodeAfter;return!o||!Te.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Te.create(t.doc,s.pos)).scrollIntoView()),!0)};function Z0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const CG=(t,e)=>{let n=t.selection,r=n instanceof Te,i;if(r){if(n.node.isTextblock||!no(t.doc,n.from))return!1;i=n.from}else if(i=wm(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Te.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},RG=(t,e)=>{let n=t.selection,r;if(n instanceof Te){if(n.node.isTextblock||!no(t.doc,n.to))return!1;r=n.to}else if(r=wm(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},kG=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Jl(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},OG=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function _M(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const NG=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=_M(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Be.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},MG=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Ur||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=_M(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Pe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},PG=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(nl(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Jl(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)},xG=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Te.create(t.doc,i))),!0)};function DG(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||no(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function vM(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s,o;if(r.type.spec.isolating||i.type.spec.isolating)return!1;if(DG(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=r.contentMatchAt(r.childCount)).findWrapping(i.type))&&o.matchType(s[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,d=H.empty;for(let m=s.length-1;m>=0;m--)d=H.from(s[m].create(null,d));d=H.from(r.copy(d));let f=t.tr.step(new nn(e.pos-1,h,e.pos,h,new ie(d,1,0),s.length,!0)),p=h+2*s.length;no(f.doc,p)&&f.join(p),n(f.scrollIntoView())}return!0}let l=Be.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Jl(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&Ml(i,"start",!0)&&Ml(r,"end")){let h=r,d=[];for(;d.push(h),!h.isTextblock;)h=h.lastChild;let f=i,p=1;for(;!f.isTextblock;f=f.firstChild)p++;if(h.canReplace(h.childCount,h.childCount,f.content)){if(n){let m=H.empty;for(let _=d.length-1;_>=0;_--)m=H.from(d[_].copy(m));let g=t.tr.step(new nn(e.pos-d.length,e.pos+i.nodeSize,e.pos+p,e.pos+i.nodeSize-p,new ie(m,d.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function bM(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Pe.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const LG=bM(-1),VG=bM(1);function FG(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&H0(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function YS(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),h=u.index();i=u.parent.canReplaceWith(h,h+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function BG(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&i.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(i.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);l=new Yf(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new Yf(i,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=H0(l,t,e,o);return c?(r&&r(UG(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function UG(t,e,n,r,i){let s=H.empty;for(let u=n.length-1;u>=0;u--)s=H.from(n[u].type.create(n[u].attrs,s));t.step(new nn(e.start-(r?2:0),e.end,e.start,e.end,new ie(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,h=e.endIndex,d=!0;u<h;u++,d=!1)!d&&nl(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function $G(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?HG(e,n,t,s):zG(e,n,s):!0:!1}}function HG(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new nn(s-1,o,s,o,new ie(H.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Yf(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Jl(r);if(a==null)return!1;i.lift(r,a);let l=i.mapping.map(s,-1)-1;return no(i.doc,l)&&i.join(l),e(i.scrollIntoView()),!0}function zG(t,e,n){let r=t.tr,i=n.parent;for(let f=n.end,p=n.endIndex-1,m=n.startIndex;p>m;p--)f-=i.child(p).nodeSize,r.delete(f-1,f+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?H.empty:H.from(i))))return!1;let h=s.pos,d=h+o.nodeSize;return r.step(new nn(h-(a?1:0),d+(l?1:0),h+1,d-1,new ie((a?H.empty:H.from(i.copy(H.empty))).append(l?H.empty:H.from(i.copy(H.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function jG(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=H.from(c?t.create():null),h=new ie(H.from(t.create(null,H.from(a.type.create(null,u)))),c?3:1,0),d=s.start,f=s.end;n(e.tr.step(new nn(d-(c?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}function km(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class Om{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const h=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(d=>d===!0)),h={...Object.fromEntries(Object.entries(r).map(([d,f])=>[d,(...m)=>{const g=this.buildProps(c,n),_=f(...m)(g);return a.push(_),h}])),run:u};return h}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:km({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class WG{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function ue(t,e,n){return t.config[e]===void 0&&t.parent?ue(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?ue(t.parent,e,n):null}):t.config[e]}function Nm(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function EM(t){const e=[],{nodeExtensions:n,markExtensions:r}=Nm(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=ue(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(h=>{Object.entries(u.attributes).forEach(([d,f])=>{e.push({type:h,name:d,attribute:{...s,...f}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=ue(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,h])=>{const d={...s,...h};typeof(d==null?void 0:d.default)=="function"&&(d.default=d.default()),d!=null&&d.isRequired&&(d==null?void 0:d.default)===void 0&&delete d.default,e.push({type:o.name,name:u,attribute:d})})}),e}function ln(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function qt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?s.split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else i==="style"?r[i]=[r[i],s].join("; "):r[i]=s}),r},{})}function rv(t,e){return e.filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>qt(n,r),{})}function TM(t){return typeof t=="function"}function Fe(t,e=void 0,...n){return TM(t)?e?t.bind(e)(...n):t(...n):t}function GG(t={}){return Object.keys(t).length===0&&t.constructor===Object}function qG(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function JS(t,e){return t.style?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):qG(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function QS(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&GG(n)?!1:n!=null))}function KG(t,e){var n;const r=EM(t),{nodeExtensions:i,markExtensions:s}=Nm(t),o=(n=i.find(c=>ue(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(_=>_.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((_,v)=>{const T=ue(v,"extendNodeSchema",h);return{..._,...T?T(c):{}}},{}),f=QS({...d,content:Fe(ue(c,"content",h)),marks:Fe(ue(c,"marks",h)),group:Fe(ue(c,"group",h)),inline:Fe(ue(c,"inline",h)),atom:Fe(ue(c,"atom",h)),selectable:Fe(ue(c,"selectable",h)),draggable:Fe(ue(c,"draggable",h)),code:Fe(ue(c,"code",h)),defining:Fe(ue(c,"defining",h)),isolating:Fe(ue(c,"isolating",h)),attrs:Object.fromEntries(u.map(_=>{var v;return[_.name,{default:(v=_==null?void 0:_.attribute)===null||v===void 0?void 0:v.default}]}))}),p=Fe(ue(c,"parseHTML",h));p&&(f.parseDOM=p.map(_=>JS(_,u)));const m=ue(c,"renderHTML",h);m&&(f.toDOM=_=>m({node:_,HTMLAttributes:rv(_,u)}));const g=ue(c,"renderText",h);return g&&(f.toText=g),[c.name,f]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),h={name:c.name,options:c.options,storage:c.storage,editor:e},d=t.reduce((g,_)=>{const v=ue(_,"extendMarkSchema",h);return{...g,...v?v(c):{}}},{}),f=QS({...d,inclusive:Fe(ue(c,"inclusive",h)),excludes:Fe(ue(c,"excludes",h)),group:Fe(ue(c,"group",h)),spanning:Fe(ue(c,"spanning",h)),code:Fe(ue(c,"code",h)),attrs:Object.fromEntries(u.map(g=>{var _;return[g.name,{default:(_=g==null?void 0:g.attribute)===null||_===void 0?void 0:_.default}]}))}),p=Fe(ue(c,"parseHTML",h));p&&(f.parseDOM=p.map(g=>JS(g,u)));const m=ue(c,"renderHTML",h);return m&&(f.toDOM=g=>m({mark:g,HTMLAttributes:rv(g,u)})),[c.name,f]}));return new Xz({topNode:o,nodes:a,marks:l})}function ey(t,e){return e.nodes[t]||e.marks[t]||null}function XS(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}const YG=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=u.slice(0,Math.max(0,r-s))}),n};function eb(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Mm{constructor(e){this.find=e.find,this.handler=e.handler}}const JG=(t,e)=>{if(eb(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ty(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(d=>d.type.spec.code))return!1;let u=!1;const h=YG(c)+s;return o.forEach(d=>{if(u)return;const f=JG(h,d.find);if(!f)return;const p=l.state.tr,m=km({state:l.state,transaction:p}),g={from:r-(f[0].length-s.length),to:i},{commands:_,chain:v,can:T}=new Om({editor:n,state:m});d.handler({state:m,range:g,match:f,commands:_,chain:v,can:T})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:i,text:s}),l.dispatch(p),u=!0)}),u}function QG(t){const{editor:e,rules:n}=t,r=new Rr({state:{init(){return null},apply(i,s){const o=i.getMeta(r);return o||(i.selectionSet||i.docChanged?null:s)}},props:{handleTextInput(i,s,o,a){return ty({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&ty({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?ty({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function XG(t){return typeof t=="number"}class ZG{constructor(e){this.find=e.find,this.handler=e.handler}}const eq=(t,e,n)=>{if(eb(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function tq(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new Om({editor:e,state:n}),h=[];return n.doc.nodesBetween(r,i,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(r,p),g=Math.min(i,p+f.content.size),_=f.textBetween(m-p,g-p,void 0,"￼");eq(_,s.find,o).forEach(T=>{if(T.index===void 0)return;const I=m+T.index+1,A=I+T[0].length,w={from:n.tr.mapping.map(I),to:n.tr.mapping.map(A)},O=s.handler({state:n,range:w,match:T,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});h.push(O)})}),h.every(f=>f!==null)}function nq(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a=typeof DragEvent<"u"?new DragEvent("drop"):null;return n.map(c=>new Rr({view(u){const h=d=>{var f;r=!((f=u.dom.parentElement)===null||f===void 0)&&f.contains(d.target)?u.dom.parentElement:null};return window.addEventListener("dragstart",h),{destroy(){window.removeEventListener("dragstart",h)}}},props:{handleDOMEvents:{drop:(u,h)=>(s=r===u.dom.parentElement,a=h,!1),paste:(u,h)=>{var d;const f=(d=h.clipboardData)===null||d===void 0?void 0:d.getData("text/html");return o=h,i=!!(f!=null&&f.includes("data-pm-slice")),!1}}},appendTransaction:(u,h,d)=>{const f=u[0],p=f.getMeta("uiEvent")==="paste"&&!i,m=f.getMeta("uiEvent")==="drop"&&!s;if(!p&&!m)return;const g=h.doc.content.findDiffStart(d.doc.content),_=h.doc.content.findDiffEnd(d.doc.content);if(!XG(g)||!_||g===_.b)return;const v=d.tr,T=km({state:d,transaction:v});if(!(!tq({editor:e,state:T,from:Math.max(g-1,0),to:_.b-1,rule:c,pasteEvent:o,dropEvent:a})||!v.steps.length))return a=typeof DragEvent<"u"?new DragEvent("drop"):null,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}}))}function rq(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return[...new Set(e)]}class Va{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Va.resolve(e),this.schema=KG(this.extensions,n),this.extensions.forEach(r=>{var i;this.editor.extensionStorage[r.name]=r.storage;const s={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:ey(r.name,this.schema)};r.type==="mark"&&(!((i=Fe(ue(r,"keepOnSplit",s)))!==null&&i!==void 0)||i)&&this.splittableMarks.push(r.name);const o=ue(r,"onBeforeCreate",s);o&&this.editor.on("beforeCreate",o);const a=ue(r,"onCreate",s);a&&this.editor.on("create",a);const l=ue(r,"onUpdate",s);l&&this.editor.on("update",l);const c=ue(r,"onSelectionUpdate",s);c&&this.editor.on("selectionUpdate",c);const u=ue(r,"onTransaction",s);u&&this.editor.on("transaction",u);const h=ue(r,"onFocus",s);h&&this.editor.on("focus",h);const d=ue(r,"onBlur",s);d&&this.editor.on("blur",d);const f=ue(r,"onDestroy",s);f&&this.editor.on("destroy",f)})}static resolve(e){const n=Va.sort(Va.flatten(e)),r=rq(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=ue(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=ue(r,"priority")||100,o=ue(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ey(n.name,this.schema)},i=ue(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Va.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:ey(o.name,this.schema)},l=[],c=ue(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&o.config.exitable&&(u.ArrowRight=()=>Ii.handleExit({editor:e,mark:o})),c){const m=Object.fromEntries(Object.entries(c()).map(([g,_])=>[g,()=>_({editor:e})]));u={...u,...m}}const h=vG(u);l.push(h);const d=ue(o,"addInputRules",a);XS(o,e.options.enableInputRules)&&d&&r.push(...d());const f=ue(o,"addPasteRules",a);XS(o,e.options.enablePasteRules)&&f&&i.push(...f());const p=ue(o,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[QG({editor:e,rules:r}),...nq({editor:e,rules:i}),...s]}get attributes(){return EM(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Nm(this.extensions);return Object.fromEntries(n.filter(r=>!!ue(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:ln(r.name,this.schema)},o=ue(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,h)=>{const d=rv(l,i);return o()({editor:e,node:l,getPos:u,decorations:h,HTMLAttributes:d,extension:r})};return[r.name,a]}))}}function iq(t){return Object.prototype.toString.call(t).slice(8,-1)}function ny(t){return iq(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Pm(t,e){const n={...t};return ny(t)&&ny(e)&&Object.keys(e).forEach(r=>{ny(e[r])?r in t?n[r]=Pm(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class fr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Fe(ue(this,"addOptions",{name:this.name}))),this.storage=Fe(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new fr(e)}configure(e={}){const n=this.extend();return n.options=Pm(this.options,e),n.storage=Fe(ue(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new fr({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Fe(ue(n,"addOptions",{name:n.name})),n.storage=Fe(ue(n,"addStorage",{name:n.name,options:n.options})),n}}function wM(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="",l=!0;return t.nodesBetween(r,i,(c,u,h,d)=>{var f;const p=o==null?void 0:o[c.type.name];if(p)return c.isBlock&&!l&&(a+=s,l=!0),h&&(a+=p({node:c,pos:u,parent:h,index:d,range:e})),!1;c.isText?(a+=(f=c==null?void 0:c.text)===null||f===void 0?void 0:f.slice(Math.max(r,u)-u,i-u),l=!1):c.isBlock&&!l&&(a+=s,l=!0)}),a}function SM(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const sq=fr.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new Rr({key:new ro("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=SM(n);return wM(r,{from:o,to:a},{textSerializers:l})}}})]}}),oq=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),aq=(t=!1)=>({commands:e})=>e.setContent("",t),lq=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,h=c.resolve(u.map(l)),d=c.resolve(u.map(l+a.nodeSize)),f=h.blockRange(d);if(!f)return;const p=Jl(f);if(a.type.isTextblock){const{defaultType:m}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(f.start,m)}(p||p===0)&&e.lift(f,p)})}),!0},cq=t=>e=>t(e),uq=()=>({state:t,dispatch:e})=>MG(t,e),hq=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Pe(r.doc.resolve(o-1))),!0},dq=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},fq=t=>({tr:e,state:n,dispatch:r})=>{const i=ln(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},pq=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},mq=()=>({state:t,dispatch:e})=>bG(t,e),gq=()=>({commands:t})=>t.keyboardShortcut("Enter"),yq=()=>({state:t,dispatch:e})=>NG(t,e);function ip(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:eb(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function iv(t,e,n={}){return t.find(r=>r.type===e&&ip(r.attrs,n))}function _q(t,e,n={}){return!!iv(t,e,n)}function tb(t,e,n={}){if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if(t.parentOffset===r.offset&&r.offset!==0&&(r=t.parent.childBefore(t.parentOffset)),!r.node)return;const i=iv([...r.node.marks],e,n);if(!i)return;let s=r.index,o=t.start()+r.offset,a=s+1,l=o+r.node.nodeSize;for(iv([...r.node.marks],e,n);s>0&&i.isInSet(t.parent.child(s-1).marks);)s-=1,o-=t.parent.child(s).nodeSize;for(;a<t.parent.childCount&&_q([...t.parent.child(a).marks],e,n);)l+=t.parent.child(a).nodeSize,a+=1;return{from:o,to:l}}function so(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const vq=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=so(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const h=tb(l,s,e);if(h&&h.from<=c&&h.to>=u){const d=Pe.create(o,h.from,h.to);n.setSelection(d)}}return!0},bq=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function IM(t){return t instanceof Pe}function Oo(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function AM(t,e=null){if(!e)return null;const n=Be.atStart(t),r=Be.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Pe.create(t,Oo(0,i,s),Oo(t.content.size,i,s)):Pe.create(t,Oo(e,i,s),Oo(e,i,s))}function nb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Eq=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{nb()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!IM(n.state.selection))return o(),!0;const a=AM(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Tq=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),wq=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),CM=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&CM(r)}return t};function ZS(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return CM(n)}function sp(t,e,n){if(n={slice:!0,parseOptions:{},...n},typeof t=="object"&&t!==null)try{return Array.isArray(t)&&t.length>0?H.fromArray(t.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),sp("",e,n)}if(typeof t=="string"){const r=Rl.fromSchema(e);return n.slice?r.parseSlice(ZS(t),n.parseOptions).content:r.parse(ZS(t),n.parseOptions)}return sp("",e,n)}function Sq(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof en||i instanceof nn))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(Be.near(t.doc.resolve(o),n))}const Iq=t=>t.toString().startsWith("<"),Aq=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{if(i){n={parseOptions:{},updateSelection:!0,...n};const o=sp(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if(o.toString()==="<>")return!0;let{from:a,to:l}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},c=!0,u=!0;if((Iq(o)?o:[o]).forEach(d=>{d.check(),c=c?d.isText&&d.marks.length===0:!1,u=u?d.isBlock:!1}),a===l&&u){const{parent:d}=r.doc.resolve(a);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(a-=1,l+=1)}c?Array.isArray(e)?r.insertText(e.map(d=>d.text||"").join(""),a,l):typeof e=="object"&&e&&e.text?r.insertText(e.text,a,l):r.insertText(e,a,l):r.replaceWith(a,l,o),n.updateSelection&&Sq(r,r.steps.length-1,-1)}return!0},Cq=()=>({state:t,dispatch:e})=>CG(t,e),Rq=()=>({state:t,dispatch:e})=>RG(t,e),kq=()=>({state:t,dispatch:e})=>EG(t,e),Oq=()=>({state:t,dispatch:e})=>IG(t,e),Nq=()=>({tr:t,state:e,dispatch:n})=>{try{const r=wm(e.doc,e.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),n&&n(t),!0)}catch{return!1}},Mq=()=>({state:t,dispatch:e,tr:n})=>{try{const r=wm(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Pq=()=>({state:t,dispatch:e})=>TG(t,e),xq=()=>({state:t,dispatch:e})=>wG(t,e);function rb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Dq(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))nb()||rb()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const Lq=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=Dq(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Fu(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?ln(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(h,d)=>{if(h.isText)return;const f=Math.max(r,d),p=Math.min(i,d+h.nodeSize);a.push({node:h,from:f,to:p})});const l=i-r,c=a.filter(h=>o?o.name===h.node.type.name:!0).filter(h=>ip(h.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((h,d)=>h+d.to-d.from,0)>=l}const Vq=(t,e={})=>({state:n,dispatch:r})=>{const i=ln(t,n.schema);return Fu(n,i,e)?kG(n,r):!1},Fq=()=>({state:t,dispatch:e})=>PG(t,e),Bq=t=>({state:e,dispatch:n})=>{const r=ln(t,e.schema);return $G(r)(e,n)},Uq=()=>({state:t,dispatch:e})=>OG(t,e);function xm(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function eI(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const $q=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=xm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=ln(t,r.schema)),a==="mark"&&(o=so(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,eI(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&n.addMark(u,u+c.nodeSize,o.create(eI(h.attrs,e)))})})}),!0):!1},Hq=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),zq=()=>({tr:t,commands:e})=>e.setTextSelection({from:0,to:t.doc.content.size}),jq=()=>({state:t,dispatch:e})=>SG(t,e),Wq=()=>({state:t,dispatch:e})=>AG(t,e),Gq=()=>({state:t,dispatch:e})=>xG(t,e),qq=()=>({state:t,dispatch:e})=>VG(t,e),Kq=()=>({state:t,dispatch:e})=>LG(t,e);function RM(t,e,n={}){return sp(t,e,{slice:!1,parseOptions:n})}const Yq=(t,e=!1,n={})=>({tr:r,editor:i,dispatch:s})=>{const{doc:o}=r,a=RM(t,i.schema,n);return s&&r.replaceWith(0,o.content.size,a).setMeta("preventUpdate",!e),!0};function Dm(t,e){const n=so(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function Jq(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Qq(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function ib(t){return e=>Qq(e.$from,t)}function Xq(t,e){const n=si.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function Zq(t,e){const n={from:0,to:t.content.size};return wM(t,n,e)}function eK(t,e){const n=ln(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function tK(t,e){const n=xm(typeof e=="string"?e:e.name,t.schema);return n==="node"?eK(t,e):n==="mark"?Dm(t,e):{}}function kM(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t-1),o=tb(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function zd(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function sv(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?so(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>s?s.name===h.type.name:!0).find(h=>ip(h.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:h,$to:d})=>{const f=h.pos,p=d.pos;t.doc.nodesBetween(f,p,(m,g)=>{if(!m.isText&&!m.marks.length)return;const _=Math.max(f,g),v=Math.min(p,g+m.nodeSize),T=v-_;o+=T,a.push(...m.marks.map(I=>({mark:I,from:_,to:v})))})}),o===0)return!1;const l=a.filter(h=>s?s.name===h.mark.type.name:!0).filter(h=>ip(h.mark.attrs,n,{strict:!1})).reduce((h,d)=>h+d.to-d.from,0),c=a.filter(h=>s?h.mark.type!==s&&h.mark.type.excludes(s):!0).reduce((h,d)=>h+d.to-d.from,0);return(l>0?l+c:l)>=o}function nK(t,e,n={}){if(!e)return Fu(t,null,n)||sv(t,null,n);const r=xm(e,t.schema);return r==="node"?Fu(t,e,n):r==="mark"?sv(t,e,n):!1}function tI(t,e){const{nodeExtensions:n}=Nm(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Fe(ue(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function rK(t){var e;const n=(e=t.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=t.toJSON();return JSON.stringify(n)===JSON.stringify(r)}function iK(t,e,n){var r;const{selection:i}=e;let s=null;if(IM(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,h,d)=>{if(c)return!1;if(u.isInline){const f=!d||d.type.allowsMarkType(n),p=!!n.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(n));c=f&&p}return!c}),c})}const sK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=so(t,r.schema);if(i)if(o){const c=Dm(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,h=c.$to.pos;r.doc.nodesBetween(u,h,(d,f)=>{const p=Math.max(f,u),m=Math.min(f+d.nodeSize,h);d.marks.find(_=>_.type===l)?d.marks.forEach(_=>{l===_.type&&n.addMark(p,m,l.create({..._.attrs,...e}))}):n.addMark(p,m,l.create(e))})});return iK(r,n,l)},oK=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),aK=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=ln(t,n.schema);return s.isTextblock?i().command(({commands:o})=>YS(s,e)(n)?!0:o.clearNodes()).command(({state:o})=>YS(s,e)(o,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},lK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Oo(t,0,r.content.size),s=Te.create(r,i);e.setSelection(s)}return!0},cK=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Pe.atStart(r).from,a=Pe.atEnd(r).to,l=Oo(i,o,a),c=Oo(s,o,a),u=Pe.create(r,l,c);e.setSelection(u)}return!0},uK=t=>({state:e,dispatch:n})=>{const r=ln(t,e.schema);return jG(r)(e,n)};function nI(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const hK=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=zd(c,a.node().type.name,a.node().attrs);if(s instanceof Te&&s.node.isBlock)return!a.parentOffset||!nl(o,a.pos)?!1:(r&&(t&&nI(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(r){const h=l.parentOffset===l.parent.content.size;s instanceof Pe&&e.deleteSelection();const d=a.depth===0?void 0:Jq(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=h&&d?[{type:d,attrs:u}]:void 0,p=nl(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&nl(e.doc,e.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(p=!0,f=d?[{type:d,attrs:u}]:void 0),p&&(e.split(e.mapping.map(a.pos),1,f),d&&!h&&!a.parentOffset&&a.parent.type!==d)){const m=e.mapping.map(a.before()),g=e.doc.resolve(m);a.node(-1).canReplaceWith(g.index(),g.index()+1,d)&&e.setNodeMarkup(e.mapping.map(a.before()),d)}t&&nI(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return!0},dK=t=>({tr:e,state:n,dispatch:r,editor:i})=>{var s;const o=ln(t,n.schema),{$from:a,$to:l}=n.selection,c=n.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(l))return!1;const u=a.node(-1);if(u.type!==o)return!1;const h=i.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==o||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=H.empty;const _=a.index(-1)?1:a.index(-2)?2:3;for(let O=a.depth-_;O>=a.depth-3;O-=1)g=H.from(a.node(O).copy(g));const v=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,T=zd(h,a.node().type.name,a.node().attrs),I=((s=o.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(T))||void 0;g=g.append(H.from(o.createAndFill(null,I)||void 0));const A=a.before(a.depth-(_-1));e.replace(A,a.after(-v),new ie(g,4-_,0));let w=-1;e.doc.nodesBetween(A,e.doc.content.size,(O,M)=>{if(w>-1)return!1;O.isTextblock&&O.content.size===0&&(w=M+1)}),w>-1&&e.setSelection(Pe.near(e.doc.resolve(w))),e.scrollIntoView()}return!0}const d=l.pos===a.end()?u.contentMatchAt(0).defaultType:null,f=zd(h,u.type.name,u.attrs),p=zd(h,a.node().type.name,a.node().attrs);e.delete(a.pos,l.pos);const m=d?[{type:o,attrs:f},{type:d,attrs:p}]:[{type:o,attrs:f}];if(!nl(e.doc,a.pos,2))return!1;if(r){const{selection:g,storedMarks:_}=n,{splittableMarks:v}=i.extensionManager,T=_||g.$to.parentOffset&&g.$from.marks();if(e.split(a.pos,2,m).scrollIntoView(),!T||!r)return!0;const I=T.filter(A=>v.includes(A.type.name));e.ensureMarks(I)}return!0},ry=(t,e)=>{const n=ib(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&no(t.doc,n.pos)&&t.join(n.pos),!0},iy=(t,e)=>{const n=ib(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&no(t.doc,r)&&t.join(r),!0},fK=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:h,splittableMarks:d}=i.extensionManager,f=ln(t,o.schema),p=ln(e,o.schema),{selection:m,storedMarks:g}=o,{$from:_,$to:v}=m,T=_.blockRange(v),I=g||m.$to.parentOffset&&m.$from.marks();if(!T)return!1;const A=ib(w=>tI(w.type.name,h))(m);if(T.depth>=1&&A&&T.depth-A.depth<=1){if(A.node.type===f)return c.liftListItem(p);if(tI(A.node.type.name,h)&&f.validContent(A.node.content)&&a)return l().command(()=>(s.setNodeMarkup(A.pos,f),!0)).command(()=>ry(s,f)).command(()=>iy(s,f)).run()}return!n||!I||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>ry(s,f)).command(()=>iy(s,f)).run():l().command(()=>{const w=u().wrapInList(f,r),O=I.filter(M=>d.includes(M.type.name));return s.ensureMarks(O),w?!0:c.clearNodes()}).wrapInList(f,r).command(()=>ry(s,f)).command(()=>iy(s,f)).run()},pK=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=so(t,r.schema);return sv(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},mK=(t,e,n={})=>({state:r,commands:i})=>{const s=ln(t,r.schema),o=ln(e,r.schema);return Fu(r,s,n)?i.setNode(o):i.setNode(s,n)},gK=(t,e={})=>({state:n,commands:r})=>{const i=ln(t,n.schema);return Fu(n,i,e)?r.lift(i):r.wrapIn(i,e)},yK=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},_K=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},vK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=so(t,r.schema),{$from:c,empty:u,ranges:h}=a;if(!i)return!0;if(u&&o){let{from:d,to:f}=a;const p=(s=c.marks().find(g=>g.type===l))===null||s===void 0?void 0:s.attrs,m=tb(c,l,p);m&&(d=m.from,f=m.to),n.removeMark(d,f,l)}else h.forEach(d=>{n.removeMark(d.$from.pos,d.$to.pos,l)});return n.removeStoredMark(l),!0},bK=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=xm(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=ln(t,r.schema)),a==="mark"&&(o=so(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;r.doc.nodesBetween(c,u,(h,d)=>{s&&s===h.type&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(f=>{if(o===f.type){const p=Math.max(d,c),m=Math.min(d+h.nodeSize,u);n.addMark(p,m,o.create({...f.attrs,...e}))}})})}),!0):!1},EK=(t,e={})=>({state:n,dispatch:r})=>{const i=ln(t,n.schema);return FG(i,e)(n,r)},TK=(t,e={})=>({state:n,dispatch:r})=>{const i=ln(t,n.schema);return BG(i,e)(n,r)};var wK=Object.freeze({__proto__:null,blur:oq,clearContent:aq,clearNodes:lq,command:cq,createParagraphNear:uq,cut:hq,deleteCurrentNode:dq,deleteNode:fq,deleteRange:pq,deleteSelection:mq,enter:gq,exitCode:yq,extendMarkRange:vq,first:bq,focus:Eq,forEach:Tq,insertContent:wq,insertContentAt:Aq,joinUp:Cq,joinDown:Rq,joinBackward:kq,joinForward:Oq,joinItemBackward:Nq,joinItemForward:Mq,joinTextblockBackward:Pq,joinTextblockForward:xq,keyboardShortcut:Lq,lift:Vq,liftEmptyBlock:Fq,liftListItem:Bq,newlineInCode:Uq,resetAttributes:$q,scrollIntoView:Hq,selectAll:zq,selectNodeBackward:jq,selectNodeForward:Wq,selectParentNode:Gq,selectTextblockEnd:qq,selectTextblockStart:Kq,setContent:Yq,setMark:sK,setMeta:oK,setNode:aK,setNodeSelection:lK,setTextSelection:cK,sinkListItem:uK,splitBlock:hK,splitListItem:dK,toggleList:fK,toggleMark:pK,toggleNode:mK,toggleWrap:gK,undoInputRule:yK,unsetAllMarks:_K,unsetMark:vK,updateAttributes:bK,wrapIn:EK,wrapInList:TK});const SK=fr.create({name:"commands",addCommands(){return{...wK}}}),IK=fr.create({name:"editable",addProseMirrorPlugins(){return[new Rr({key:new ro("editable"),props:{editable:()=>this.editor.options.editable}})]}}),AK=fr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Rr({key:new ro("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),CK=fr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:h}=l,{pos:d,parent:f}=h,p=h.parent.isTextblock&&d>0?a.doc.resolve(d-1):h,m=p.parent.type.spec.isolating,g=h.pos-h.parentOffset,_=m&&p.parent.childCount===1?g===h.pos:Be.atStart(c).from===d;return!u||!_||!f.type.isTextblock||f.textContent.length?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return nb()||rb()?s:i},addProseMirrorPlugins(){return[new Rr({key:new ro("clearDocument"),appendTransaction:(t,e,n)=>{if(!(t.some(p=>p.docChanged)&&!e.doc.eq(n.doc)))return;const{empty:i,from:s,to:o}=e.selection,a=Be.atStart(e.doc).from,l=Be.atEnd(e.doc).to;if(i||!(s===a&&o===l)||!(n.doc.textBetween(0,n.doc.content.size," "," ").length===0))return;const h=n.tr,d=km({state:n,transaction:h}),{commands:f}=new Om({editor:this.editor,state:d});if(f.clearNodes(),!!h.steps.length)return h}})]}}),RK=fr.create({name:"tabindex",addProseMirrorPlugins(){return[new Rr({key:new ro("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var kK=Object.freeze({__proto__:null,ClipboardTextSerializer:sq,Commands:SK,Editable:IK,FocusEvents:AK,Keymap:CK,Tabindex:RK});class bo{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new bo(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new bo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new bo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=this.pos+r+(i?0:1),o=this.resolvedPos.doc.resolve(s);if(!i&&o.depth<=this.depth)return;const a=new bo(o,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new bo(o,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];return this.isBlock||!this.children||this.children.length===0||this.children.forEach(s=>{if(s.node.type.name===e){if(Object.keys(n).length>0){const o=s.node.attrs,a=Object.keys(n);for(let l=0;l<a.length;l+=1){const c=a[l];if(o[c]!==n[c])return}}if(i.push(s),r)return}i=i.concat(s.querySelectorAll(e))}),i}setAttribute(e){const n=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(n.from).run()}}const OK=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function NK(t,e,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute(`data-tiptap-style${n?`-${n}`:""}`,""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}let MK=class extends WG{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=NK(OK,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=TM(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});this.view.updateState(i)}unregisterPlugin(e){if(this.isDestroyed)return;const n=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(i=>!i.key.startsWith(n))});this.view.updateState(r)}createExtensionManager(){const n=[...this.options.enableCoreExtensions?Object.values(kK):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r==null?void 0:r.type));this.extensionManager=new Va(n,this)}createCommandManager(){this.commandManager=new Om({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){const e=RM(this.options.content,this.schema,this.options.parseOptions),n=AM(e,this.options.autofocus);this.view=new uG(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:La.create({doc:e,selection:n||void 0})});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return tK(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return nK(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Xq(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return Zq(this.state.doc,{blockSeparator:n,textSerializers:{...SM(this.schema),...r}})}get isEmpty(){return rK(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new bo(n,this)}get $doc(){return this.$pos(0)}};function Pl(t){return new Mm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Fe(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(kM(n.from,n.to,e.doc).filter(f=>f.mark.type.excluded.find(m=>m===t.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const d=n.from+l+o.length;s.addMark(n.from+l,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function PK(t){return new Mm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Fe(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const h=r[0][r[0].length-1];s.insertText(h,o+r[0].length-1),s.replaceWith(u,a,l)}else r[0]&&s.insert(o-1,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a));s.scrollIntoView()}})}function ov(t){return new Mm({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Fe(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Bu(t){return new Mm({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Fe(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&H0(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:h,storedMarks:d}=e,{splittableMarks:f}=t.editor.extensionManager,p=d||h.$to.parentOffset&&h.$from.marks();if(p){const m=p.filter(g=>f.includes(g.type.name));o.ensureMarks(m)}}if(t.keepAttributes){const h=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(h,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&no(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class Ii{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Fe(ue(this,"addOptions",{name:this.name}))),this.storage=Fe(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ii(e)}configure(e={}){const n=this.extend();return n.options=Pm(this.options,e),n.storage=Fe(ue(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new Ii({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Fe(ue(n,"addOptions",{name:n.name})),n.storage=Fe(ue(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}let pr=class av{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Fe(ue(this,"addOptions",{name:this.name}))),this.storage=Fe(ue(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new av(e)}configure(e={}){const n=this.extend();return n.options=Pm(this.options,e),n.storage=Fe(ue(n,"addStorage",{name:n.name,options:n.options})),n}extend(e={}){const n=new av({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Fe(ue(n,"addOptions",{name:n.name})),n.storage=Fe(ue(n,"addStorage",{name:n.name,options:n.options})),n}};function xl(t){return new ZG({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Fe(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),h=n.from+l.indexOf(a),d=h+a.length;if(kM(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(g=>g===t.type&&g!==p.mark.type)).filter(p=>p.to>h).length)return null;d<n.to&&o.delete(d,n.to),h>n.from&&o.delete(n.from+u,h),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}const xK=/^\s*>\s$/,DK=pr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Bu({find:xK,type:this.type})]}}),LK=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,VK=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,FK=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,BK=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,UK=Ii.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Pl({find:LK,type:this.type}),Pl({find:FK,type:this.type})]},addPasteRules(){return[xl({find:VK,type:this.type}),xl({find:BK,type:this.type})]}}),$K=pr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",qt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),rI=Ii.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Dm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),iI=/^\s*([-+*])\s$/,HK=pr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($K.name,this.editor.getAttributes(rI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Bu({find:iI,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bu({find:iI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(rI.name),editor:this.editor})),[t]}}),zK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,jK=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,WK=Ii.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Pl({find:zK,type:this.type})]},addPasteRules(){return[xl({find:jK,type:this.type})]}}),GK=/^```([a-z]+)?[\s\n]$/,qK=/^~~~([a-z]+)?[\s\n]$/,KK=pr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",qt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0||r.nodeAt(a)?!1:t.commands.exitCode()}}},addInputRules(){return[ov({find:GK,type:this.type,getAttributes:t=>({language:t[1]})}),ov({find:qK,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Rr({key:new ro("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o}=t.state;return o.replaceSelectionWith(this.type.create({language:s})),o.setSelection(Pe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.insertText(n.replace(/\r\n?/g,`
`)),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),YK=pr.create({name:"doc",topNode:!0,content:"block+"});function JK(t={}){return new Rr({view(e){return new QK(e,t)}})}class QK{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),h=a?u.bottom:u.top;a&&l&&(h=(h+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:h-this.width/2,bottom:h+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=RN(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const XK=fr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[JK(this.options)]}});class Ot extends Be{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ot.valid(r)?new Ot(r):Be.near(r)}content(){return ie.empty}eq(e){return e instanceof Ot&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ot(e.resolve(n.pos))}getBookmark(){return new sb(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!ZK(e)||!eY(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ot.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Ot.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Te.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Ot.valid(a))return a}return null}}}Ot.prototype.visible=!1;Ot.findFrom=Ot.findGapCursorFrom;Be.jsonID("gapcursor",Ot);class sb{constructor(e){this.pos=e}map(e){return new sb(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ot.valid(n)?new Ot(n):Be.near(n)}}function ZK(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function eY(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function tY(){return new Rr({props:{decorations:sY,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ot.valid(n)?new Ot(n):null},handleClick:rY,handleKeyDown:nY,handleDOMEvents:{beforeinput:iY}}})}const nY=pM({ArrowLeft:dd("horiz",-1),ArrowRight:dd("horiz",1),ArrowUp:dd("vert",-1),ArrowDown:dd("vert",1)});function dd(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Pe){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Ot.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Ot(c))),!0):!1}}function rY(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ot.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Te.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ot(r))),!0)}function iY(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ot))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=H.empty;for(let o=r.length-1;o>=0;o--)i=H.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new ie(i,0,0));return s.setSelection(Pe.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function sY(t){if(!(t.selection instanceof Ot))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",zt.create(t.doc,[wr.widget(t.selection.head,e,{key:"gapcursor"})])}const oY=fr.create({name:"gapCursor",addProseMirrorPlugins(){return[tY()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Fe(ue(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),aY=pr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",qt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const h=l.filter(d=>a.includes(d.type.name));c.ensureMarks(h)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),lY=pr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,qt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>ov({find:new RegExp(`^(#{1,${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var op=200,rn=function(){};rn.prototype.append=function(e){return e.length?(e=rn.from(e),!this.length&&e||e.length<op&&this.leafAppend(e)||this.length<op&&e.leafPrepend(this)||this.appendInner(e)):this};rn.prototype.prepend=function(e){return e.length?rn.from(e).append(this):this};rn.prototype.appendInner=function(e){return new cY(this,e)};rn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?rn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};rn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};rn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};rn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};rn.from=function(e){return e instanceof rn?e:e&&e.length?new OM(e):rn.empty};var OM=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=op)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=op)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(rn);rn.empty=new OM([]);var cY=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(rn);const uY=500;class Dr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((h,d)=>{if(!h.step){i||(i=this.remapping(r,d+1),s=i.maps.length),s--,u.push(h);return}if(i){u.push(new Yr(h.map));let f=h.step.map(i.slice(s)),p;f&&o.maybeStep(f).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],c.push(new Yr(p,void 0,void 0,c.length+u.length))),s--,p&&i.appendMap(p,s)}else o.maybeStep(h.step);if(h.selection)return a=i?h.selection.map(i.slice(s)):h.selection,l=new Dr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let h=e.steps[u].invert(e.docs[u]),d=new Yr(e.mapping.maps[u],h,n),f;(f=l&&l.merge(d))&&(d=f,u?s.pop():a=a.slice(0,a.length-1)),s.push(d),n&&(o++,n=void 0),i||(l=d)}let c=o-r.depth;return c>dY&&(a=hY(a,c),o-=c),new Dr(a.append(s),o)}remapping(e,n){let r=new tl;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Dr(this.items.append(e.map(n=>new Yr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(d=>{d.selection&&a--},i);let l=n;this.items.forEach(d=>{let f=s.getMirror(--l);if(f==null)return;o=Math.min(o,f);let p=s.maps[f];if(d.step){let m=e.steps[f].invert(e.docs[f]),g=d.selection&&d.selection.map(s.slice(l+1,f));g&&a++,r.push(new Yr(p,m,g))}else r.push(new Yr(p))},i);let c=[];for(let d=n;d<o;d++)c.push(new Yr(s.maps[d]));let u=this.items.slice(0,i).append(c).append(r),h=new Dr(u,a);return h.emptyItemCount()>uY&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let h=new Yr(c.invert(),l,u),d,f=i.length-1;(d=i.length&&i[f].merge(h))?i[f]=d:i.push(h)}}else o.map&&r--},this.items.length,0),new Dr(rn.from(i.reverse()),s)}}Dr.empty=new Dr(rn.empty,0);function hY(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Yr{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Yr(n.getMap().invert(),n,this.selection)}}}class _s{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const dY=20;function fY(t,e,n,r){let i=n.getMeta(Wo),s;if(i)return i.historyState;n.getMeta(gY)&&(t=new _s(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Wo))return o.getMeta(Wo).redo?new _s(t.done.addTransform(n,void 0,r,jd(e)),t.undone,sI(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new _s(t.done,t.undone.addTransform(n,void 0,r,jd(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!pY(n,t.prevRanges)),c=o?sy(t.prevRanges,n.mapping):sI(n.mapping.maps[n.steps.length-1]);return new _s(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,jd(e)),Dr.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new _s(t.done.rebased(n,s),t.undone.rebased(n,s),sy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new _s(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),sy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function pY(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function sI(t){let e=[];return t.forEach((n,r,i,s)=>e.push(i,s)),e}function sy(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function mY(t,e,n){let r=jd(e),i=Wo.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new _s(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Wo,{redo:n,historyState:l})}let oy=!1,oI=null;function jd(t){let e=t.plugins;if(oI!=e){oy=!1,oI=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){oy=!0;break}}return oy}const Wo=new ro("history"),gY=new ro("closeHistory");function yY(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Rr({key:Wo,state:{init(){return new _s(Dr.empty,Dr.empty,null,0,-1)},apply(e,n,r){return fY(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?MM:r=="historyRedo"?PM:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function NM(t,e){return(n,r)=>{let i=Wo.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=mY(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const MM=NM(!1,!0),PM=NM(!0,!0),_Y=fr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>MM(t,e),redo:()=>({state:t,dispatch:e})=>PM(t,e)}},addProseMirrorPlugins(){return[yY(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),vY=pr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",qt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{$to:n}=e.selection,r=t();return n.parentOffset===0?r.insertContentAt(Math.max(n.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:i,dispatch:s})=>{var o;if(s){const{$to:a}=i.selection,l=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(Pe.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(Te.create(i.doc,a.pos)):i.setSelection(Pe.create(i.doc,a.pos));else{const c=(o=a.parent.type.contentMatch.defaultType)===null||o===void 0?void 0:o.create();c&&(i.insert(l,c),i.setSelection(Pe.create(i.doc,l+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[PK({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),bY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,EY=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,TY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,wY=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,SY=Ii.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Pl({find:bY,type:this.type}),Pl({find:TY,type:this.type})]},addPasteRules(){return[xl({find:EY,type:this.type}),xl({find:wY,type:this.type})]}}),IY=pr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",qt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),AY=pr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",qt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),aI=Ii.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["span",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Dm(t,this.type);return Object.entries(n).some(([,i])=>!!i)?!0:e.unsetMark(this.name)}}}}),lI=/^(\d+)\.\s$/,CY=pr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",qt(this.options.HTMLAttributes,n),0]:["ol",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(AY.name,this.editor.getAttributes(aI.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Bu({find:lI,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Bu({find:lI,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(aI.name)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),RY=pr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),kY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,OY=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,NY=Ii.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",qt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){const t={};return rb()?t["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():t["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),t},addInputRules(){return[Pl({find:kY,type:this.type})]},addPasteRules(){return[xl({find:OY,type:this.type})]}}),MY=pr.create({name:"text",group:"inline"}),PY=fr.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,h,d,f,p,m,g,_;const v=[];return this.options.blockquote!==!1&&v.push(DK.configure((t=this.options)===null||t===void 0?void 0:t.blockquote)),this.options.bold!==!1&&v.push(UK.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&v.push(HK.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&v.push(WK.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&v.push(KK.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&v.push(YK.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&v.push(XK.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&v.push(oY.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&v.push(aY.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&v.push(lY.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&v.push(_Y.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&v.push(vY.configure((h=this.options)===null||h===void 0?void 0:h.horizontalRule)),this.options.italic!==!1&&v.push(SY.configure((d=this.options)===null||d===void 0?void 0:d.italic)),this.options.listItem!==!1&&v.push(IY.configure((f=this.options)===null||f===void 0?void 0:f.listItem)),this.options.orderedList!==!1&&v.push(CY.configure((p=this.options)===null||p===void 0?void 0:p.orderedList)),this.options.paragraph!==!1&&v.push(RY.configure((m=this.options)===null||m===void 0?void 0:m.paragraph)),this.options.strike!==!1&&v.push(NY.configure((g=this.options)===null||g===void 0?void 0:g.strike)),this.options.text!==!1&&v.push(MY.configure((_=this.options)===null||_===void 0?void 0:_.text)),v}});function cI(t){return hA((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}class xY extends MK{constructor(e={}){return super(e),this.vueRenderers=Gu(new Map),this.contentComponent=null,this.reactiveState=cI(this.view.state),this.reactiveExtensionStorage=cI(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),_p(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,n){super.registerPlugin(e,n),this.reactiveState.value=this.view.state}unregisterPlugin(e){super.unregisterPlugin(e),this.reactiveState.value=this.view.state}}const DY=Cr({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=Ve(),n=ua();return wx(()=>{const r=t.editor;r&&r.options.element&&e.value&&Ll(()=>{if(!e.value||!r.options.element.firstChild)return;const i=ze(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=n.ctx._,r.setOptions({element:i}),r.createNodeViews()})}),Qu(()=>{const r=t.editor;if(!r||(r.isDestroyed||r.view.setProps({nodeViews:{}}),r.contentComponent=null,!r.options.element.firstChild))return;const i=document.createElement("div");i.append(...r.options.element.childNodes),r.setOptions({element:i})}),{rootEl:e}},render(){const t=[];return this.editor&&this.editor.vueRenderers.forEach(e=>{const n=Lo(rD,{to:e.teleportElement,key:e.id},Lo(e.component,{ref:e.id,...e.props}));t.push(n)}),Lo("div",{ref:e=>{this.rootEl=e}},...t)}}),LY={class:"editor"},VY={class:"controlls"},FY={__name:"tiptapEditor.vapor",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,i=Ve(null);return $i(()=>n.modelValue,s=>{i.value.getHTML()!==s&&i.value.commands.setContent(s,!1)}),Ju(()=>{i.value=new xY({extensions:[PY],content:n.modelValue,onUpdate:()=>{r("update:modelValue",i.value.getHTML())}})}),Qu(()=>{i.value.destroy()}),(s,o)=>(se(),_e("div",LY,[Ue(ze(DY),{editor:i.value,class:"editor-content"},null,8,["editor"]),S("div",VY,[S("button",{icon:"",big:"",onClick:o[0]||(o[0]=a=>i.value.chain().focus().toggleBold().run())},"format_bold"),S("button",{icon:"",big:"",onClick:o[1]||(o[1]=a=>i.value.chain().focus().toggleItalic().run())},"format_italic"),S("button",{icon:"",big:"",onClick:o[2]||(o[2]=a=>i.value.chain().focus().toggleBulletList().run())}," format_list_bulleted "),S("button",{icon:"",big:"",onClick:o[3]||(o[3]=a=>i.value.chain().focus().toggleOrderedList().run())}," format_list_numbered ")])]))}},BY=eo(FY,[["__scopeId","data-v-4b690c27"]]),UY={class:"header"},$Y={class:"body"},HY={class:"controls"},zY=Cr({__name:"modal.vapor",setup(t,{expose:e}){const n=Ve();return e({showModal:()=>{n.value&&n.value.showModal()},closeModal:()=>{n.value&&n.value.close()}}),(s,o)=>(se(),_e("dialog",{ref_key:"dialog",ref:n,class:"danger"},[S("div",UY,[Jt(s.$slots,"header",{},void 0,!0)]),S("div",$Y,[Jt(s.$slots,"body",{},void 0,!0)]),S("div",HY,[Jt(s.$slots,"controls",{},void 0,!0)])],512))}}),jY=eo(zY,[["__scopeId","data-v-3eb9aebc"]]);function ay(t){return t===0?!1:Array.isArray(t)&&t.length===0?!0:!t}function WY(t){return(...e)=>!t(...e)}function GY(t,e){return t===void 0&&(t="undefined"),t===null&&(t="null"),t===!1&&(t="false"),t.toString().toLowerCase().indexOf(e.trim())!==-1}function xM(t,e,n,r){return e?t.filter(i=>GY(r(i,n),e)).sort((i,s)=>r(i,n).length-r(s,n).length):t}function qY(t){return t.filter(e=>!e.$isLabel)}function ly(t,e){return n=>n.reduce((r,i)=>i[t]&&i[t].length?(r.push({$groupLabel:i[e],$isLabel:!0}),r.concat(i[t])):r,[])}function KY(t,e,n,r,i){return s=>s.map(o=>{if(!o[n])return console.warn("Options passed to vue-multiselect do not contain groups, despite the config."),[];const a=xM(o[n],t,e,i);return a.length?{[r]:o[r],[n]:a}:[]})}const uI=(...t)=>e=>t.reduce((n,r)=>r(n),e);var YY={data(){return{search:"",isOpen:!1,preferredOpenDirection:"below",optimizedHeight:this.maxHeight}},props:{internalSearch:{type:Boolean,default:!0},options:{type:Array,required:!0},multiple:{type:Boolean,default:!1},trackBy:{type:String},label:{type:String},searchable:{type:Boolean,default:!0},clearOnSelect:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},placeholder:{type:String,default:"Select option"},allowEmpty:{type:Boolean,default:!0},resetAfter:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!0},customLabel:{type:Function,default(t,e){return ay(t)?"":e?t[e]:t}},taggable:{type:Boolean,default:!1},tagPlaceholder:{type:String,default:"Press enter to create a tag"},tagPosition:{type:String,default:"top"},max:{type:[Number,Boolean],default:!1},id:{default:null},optionsLimit:{type:Number,default:1e3},groupValues:{type:String},groupLabel:{type:String},groupSelect:{type:Boolean,default:!1},blockKeys:{type:Array,default(){return[]}},preserveSearch:{type:Boolean,default:!1},preselectFirst:{type:Boolean,default:!1},preventAutofocus:{type:Boolean,default:!1}},mounted(){!this.multiple&&this.max&&console.warn("[Vue-Multiselect warn]: Max prop should not be used when prop Multiple equals false."),this.preselectFirst&&!this.internalValue.length&&this.options.length&&this.select(this.filteredOptions[0])},computed:{internalValue(){return this.modelValue||this.modelValue===0?Array.isArray(this.modelValue)?this.modelValue:[this.modelValue]:[]},filteredOptions(){const t=this.search||"",e=t.toLowerCase().trim();let n=this.options.concat();return this.internalSearch?n=this.groupValues?this.filterAndFlat(n,e,this.label):xM(n,e,this.label,this.customLabel):n=this.groupValues?ly(this.groupValues,this.groupLabel)(n):n,n=this.hideSelected?n.filter(WY(this.isSelected)):n,this.taggable&&e.length&&!this.isExistingOption(e)&&(this.tagPosition==="bottom"?n.push({isTag:!0,label:t}):n.unshift({isTag:!0,label:t})),n.slice(0,this.optionsLimit)},valueKeys(){return this.trackBy?this.internalValue.map(t=>t[this.trackBy]):this.internalValue},optionKeys(){return(this.groupValues?this.flatAndStrip(this.options):this.options).map(e=>this.customLabel(e,this.label).toString().toLowerCase())},currentOptionLabel(){return this.multiple?this.searchable?"":this.placeholder:this.internalValue.length?this.getOptionLabel(this.internalValue[0]):this.searchable?"":this.placeholder}},watch:{internalValue:{handler(){this.resetAfter&&this.internalValue.length&&(this.search="",this.$emit("update:modelValue",this.multiple?[]:null))},deep:!0},search(){this.$emit("search-change",this.search)}},emits:["open","search-change","close","select","update:modelValue","remove","tag"],methods:{getValue(){return this.multiple?this.internalValue:this.internalValue.length===0?null:this.internalValue[0]},filterAndFlat(t,e,n){return uI(KY(e,n,this.groupValues,this.groupLabel,this.customLabel),ly(this.groupValues,this.groupLabel))(t)},flatAndStrip(t){return uI(ly(this.groupValues,this.groupLabel),qY)(t)},updateSearch(t){this.search=t},isExistingOption(t){return this.options?this.optionKeys.indexOf(t)>-1:!1},isSelected(t){const e=this.trackBy?t[this.trackBy]:t;return this.valueKeys.indexOf(e)>-1},isOptionDisabled(t){return!!t.$isDisabled},getOptionLabel(t){if(ay(t))return"";if(t.isTag)return t.label;if(t.$isLabel)return t.$groupLabel;const e=this.customLabel(t,this.label);return ay(e)?"":e},select(t,e){if(t.$isLabel&&this.groupSelect){this.selectGroup(t);return}if(!(this.blockKeys.indexOf(e)!==-1||this.disabled||t.$isDisabled||t.$isLabel)&&!(this.max&&this.multiple&&this.internalValue.length===this.max)&&!(e==="Tab"&&!this.pointerDirty)){if(t.isTag)this.$emit("tag",t.label,this.id),this.search="",this.closeOnSelect&&!this.multiple&&this.deactivate();else{if(this.isSelected(t)){e!=="Tab"&&this.removeElement(t);return}this.multiple?this.$emit("update:modelValue",this.internalValue.concat([t])):this.$emit("update:modelValue",t),this.$emit("select",t,this.id),this.clearOnSelect&&(this.search="")}this.closeOnSelect&&this.deactivate()}},selectGroup(t){const e=this.options.find(n=>n[this.groupLabel]===t.$groupLabel);if(e){if(this.wholeGroupSelected(e)){this.$emit("remove",e[this.groupValues],this.id);const n=this.internalValue.filter(r=>e[this.groupValues].indexOf(r)===-1);this.$emit("update:modelValue",n)}else{let n=e[this.groupValues].filter(r=>!(this.isOptionDisabled(r)||this.isSelected(r)));this.max&&n.splice(this.max-this.internalValue.length),this.$emit("select",n,this.id),this.$emit("update:modelValue",this.internalValue.concat(n))}this.closeOnSelect&&this.deactivate()}},wholeGroupSelected(t){return t[this.groupValues].every(e=>this.isSelected(e)||this.isOptionDisabled(e))},wholeGroupDisabled(t){return t[this.groupValues].every(this.isOptionDisabled)},removeElement(t,e=!0){if(this.disabled||t.$isDisabled)return;if(!this.allowEmpty&&this.internalValue.length<=1){this.deactivate();return}const n=typeof t=="object"?this.valueKeys.indexOf(t[this.trackBy]):this.valueKeys.indexOf(t);if(this.multiple){const r=this.internalValue.slice(0,n).concat(this.internalValue.slice(n+1));this.$emit("update:modelValue",r)}else this.$emit("update:modelValue",null);this.$emit("remove",t,this.id),this.closeOnSelect&&e&&this.deactivate()},removeLastElement(){this.blockKeys.indexOf("Delete")===-1&&this.search.length===0&&Array.isArray(this.internalValue)&&this.internalValue.length&&this.removeElement(this.internalValue[this.internalValue.length-1],!1)},activate(){this.isOpen||this.disabled||(this.adjustPosition(),this.groupValues&&this.pointer===0&&this.filteredOptions.length&&(this.pointer=1),this.isOpen=!0,this.searchable?(this.preserveSearch||(this.search=""),this.preventAutofocus||this.$nextTick(()=>this.$refs.search&&this.$refs.search.focus())):this.preventAutofocus||typeof this.$el<"u"&&this.$el.focus(),this.$emit("open",this.id))},deactivate(){this.isOpen&&(this.isOpen=!1,this.searchable?this.$refs.search!==null&&typeof this.$refs.search<"u"&&this.$refs.search.blur():typeof this.$el<"u"&&this.$el.blur(),this.preserveSearch||(this.search=""),this.$emit("close",this.getValue(),this.id))},toggle(){this.isOpen?this.deactivate():this.activate()},adjustPosition(){if(typeof window>"u")return;const t=this.$el.getBoundingClientRect().top,e=window.innerHeight-this.$el.getBoundingClientRect().bottom;e>this.maxHeight||e>t||this.openDirection==="below"||this.openDirection==="bottom"?(this.preferredOpenDirection="below",this.optimizedHeight=Math.min(e-40,this.maxHeight)):(this.preferredOpenDirection="above",this.optimizedHeight=Math.min(t-40,this.maxHeight))}}},JY={data(){return{pointer:0,pointerDirty:!1}},props:{showPointer:{type:Boolean,default:!0},optionHeight:{type:Number,default:40}},computed:{pointerPosition(){return this.pointer*this.optionHeight},visibleElements(){return this.optimizedHeight/this.optionHeight}},watch:{filteredOptions(){this.pointerAdjust()},isOpen(){this.pointerDirty=!1},pointer(){this.$refs.search&&this.$refs.search.setAttribute("aria-activedescendant",this.id+"-"+this.pointer.toString())}},methods:{optionHighlight(t,e){return{"multiselect__option--highlight":t===this.pointer&&this.showPointer,"multiselect__option--selected":this.isSelected(e)}},groupHighlight(t,e){if(!this.groupSelect)return["multiselect__option--disabled",{"multiselect__option--group":e.$isLabel}];const n=this.options.find(r=>r[this.groupLabel]===e.$groupLabel);return n&&!this.wholeGroupDisabled(n)?["multiselect__option--group",{"multiselect__option--highlight":t===this.pointer&&this.showPointer},{"multiselect__option--group-selected":this.wholeGroupSelected(n)}]:"multiselect__option--disabled"},addPointerElement({key:t}="Enter"){this.filteredOptions.length>0&&this.select(this.filteredOptions[this.pointer],t),this.pointerReset()},pointerForward(){this.pointer<this.filteredOptions.length-1&&(this.pointer++,this.$refs.list.scrollTop<=this.pointerPosition-(this.visibleElements-1)*this.optionHeight&&(this.$refs.list.scrollTop=this.pointerPosition-(this.visibleElements-1)*this.optionHeight),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()),this.pointerDirty=!0},pointerBackward(){this.pointer>0?(this.pointer--,this.$refs.list.scrollTop>=this.pointerPosition&&(this.$refs.list.scrollTop=this.pointerPosition),this.filteredOptions[this.pointer]&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerBackward()):this.filteredOptions[this.pointer]&&this.filteredOptions[0].$isLabel&&!this.groupSelect&&this.pointerForward(),this.pointerDirty=!0},pointerReset(){this.closeOnSelect&&(this.pointer=0,this.$refs.list&&(this.$refs.list.scrollTop=0))},pointerAdjust(){this.pointer>=this.filteredOptions.length-1&&(this.pointer=this.filteredOptions.length?this.filteredOptions.length-1:0),this.filteredOptions.length>0&&this.filteredOptions[this.pointer].$isLabel&&!this.groupSelect&&this.pointerForward()},pointerSet(t){this.pointer=t,this.pointerDirty=!0}}},Wd={name:"vue-multiselect",mixins:[YY,JY],compatConfig:{MODE:3,ATTR_ENUMERATED_COERCION:!1},props:{name:{type:String,default:""},modelValue:{type:null,default(){return[]}},selectLabel:{type:String,default:"Press enter to select"},selectGroupLabel:{type:String,default:"Press enter to select group"},selectedLabel:{type:String,default:"Selected"},deselectLabel:{type:String,default:"Press enter to remove"},deselectGroupLabel:{type:String,default:"Press enter to deselect group"},showLabels:{type:Boolean,default:!0},limit:{type:Number,default:99999},maxHeight:{type:Number,default:300},limitText:{type:Function,default:t=>`and ${t} more`},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},openDirection:{type:String,default:""},showNoOptions:{type:Boolean,default:!0},showNoResults:{type:Boolean,default:!0},tabindex:{type:Number,default:0}},computed:{hasOptionGroup(){return this.groupValues&&this.groupLabel&&this.groupSelect},isSingleLabelVisible(){return(this.singleValue||this.singleValue===0)&&(!this.isOpen||!this.searchable)&&!this.visibleValues.length},isPlaceholderVisible(){return!this.internalValue.length&&(!this.searchable||!this.isOpen)},visibleValues(){return this.multiple?this.internalValue.slice(0,this.limit):[]},singleValue(){return this.internalValue[0]},deselectLabelText(){return this.showLabels?this.deselectLabel:""},deselectGroupLabelText(){return this.showLabels?this.deselectGroupLabel:""},selectLabelText(){return this.showLabels?this.selectLabel:""},selectGroupLabelText(){return this.showLabels?this.selectGroupLabel:""},selectedLabelText(){return this.showLabels?this.selectedLabel:""},inputStyle(){return this.searchable||this.multiple&&this.modelValue&&this.modelValue.length?this.isOpen?{width:"100%"}:{width:"0",position:"absolute",padding:"0"}:""},contentStyle(){return this.options.length?{display:"inline-block"}:{display:"block"}},isAbove(){return this.openDirection==="above"||this.openDirection==="top"?!0:this.openDirection==="below"||this.openDirection==="bottom"?!1:this.preferredOpenDirection==="above"},showSearchInput(){return this.searchable&&(this.hasSingleSelectedSlot&&(this.visibleSingleValue||this.visibleSingleValue===0)?this.isOpen:!0)}}};const QY={ref:"tags",class:"multiselect__tags"},XY={class:"multiselect__tags-wrap"},ZY={class:"multiselect__spinner"},eJ={key:0},tJ={class:"multiselect__option"},nJ={class:"multiselect__option"},rJ=mt("No elements found. Consider changing the search query."),iJ={class:"multiselect__option"},sJ=mt("List is empty.");function oJ(t,e,n,r,i,s){return se(),fn("div",{tabindex:t.searchable?-1:n.tabindex,class:[{"multiselect--active":t.isOpen,"multiselect--disabled":n.disabled,"multiselect--above":s.isAbove,"multiselect--has-options-group":s.hasOptionGroup},"multiselect"],onFocus:e[14]||(e[14]=o=>t.activate()),onBlur:e[15]||(e[15]=o=>t.searchable?!1:t.deactivate()),onKeydown:[e[16]||(e[16]=Kr(ut(o=>t.pointerForward(),["self","prevent"]),["down"])),e[17]||(e[17]=Kr(ut(o=>t.pointerBackward(),["self","prevent"]),["up"]))],onKeypress:e[18]||(e[18]=Kr(ut(o=>t.addPointerElement(o),["stop","self"]),["enter","tab"])),onKeyup:e[19]||(e[19]=Kr(o=>t.deactivate(),["esc"])),role:"combobox","aria-owns":"listbox-"+t.id},[Jt(t.$slots,"caret",{toggle:t.toggle},()=>[Ue("div",{onMousedown:e[1]||(e[1]=ut(o=>t.toggle(),["prevent","stop"])),class:"multiselect__select"},null,32)]),Jt(t.$slots,"clear",{search:t.search}),Ue("div",QY,[Jt(t.$slots,"selection",{search:t.search,remove:t.removeElement,values:s.visibleValues,isOpen:t.isOpen},()=>[In(Ue("div",XY,[(se(!0),fn(it,null,mi(s.visibleValues,(o,a)=>Jt(t.$slots,"tag",{option:o,search:t.search,remove:t.removeElement},()=>[(se(),fn("span",{class:"multiselect__tag",key:a},[Ue("span",{textContent:We(t.getOptionLabel(o))},null,8,["textContent"]),Ue("i",{tabindex:"1",onKeypress:Kr(ut(l=>t.removeElement(o),["prevent"]),["enter"]),onMousedown:ut(l=>t.removeElement(o),["prevent"]),class:"multiselect__tag-icon"},null,40,["onKeypress","onMousedown"])]))])),256))],512),[[ec,s.visibleValues.length>0]]),t.internalValue&&t.internalValue.length>n.limit?Jt(t.$slots,"limit",{key:0},()=>[Ue("strong",{class:"multiselect__strong",textContent:We(n.limitText(t.internalValue.length-n.limit))},null,8,["textContent"])]):Ze("v-if",!0)]),Ue(ef,{name:"multiselect__loading"},{default:Do(()=>[Jt(t.$slots,"loading",{},()=>[In(Ue("div",ZY,null,512),[[ec,n.loading]])])]),_:3}),t.searchable?(se(),fn("input",{key:0,ref:"search",name:n.name,id:t.id,type:"text",autocomplete:"off",spellcheck:!1,placeholder:t.placeholder,style:s.inputStyle,value:t.search,disabled:n.disabled,tabindex:n.tabindex,onInput:e[2]||(e[2]=o=>t.updateSearch(o.target.value)),onFocus:e[3]||(e[3]=ut(o=>t.activate(),["prevent"])),onBlur:e[4]||(e[4]=ut(o=>t.deactivate(),["prevent"])),onKeyup:e[5]||(e[5]=Kr(o=>t.deactivate(),["esc"])),onKeydown:[e[6]||(e[6]=Kr(ut(o=>t.pointerForward(),["prevent"]),["down"])),e[7]||(e[7]=Kr(ut(o=>t.pointerBackward(),["prevent"]),["up"])),e[9]||(e[9]=Kr(ut(o=>t.removeLastElement(),["stop"]),["delete"]))],onKeypress:e[8]||(e[8]=Kr(ut(o=>t.addPointerElement(o),["prevent","stop","self"]),["enter"])),class:"multiselect__input","aria-controls":"listbox-"+t.id},null,44,["name","id","placeholder","value","disabled","tabindex","aria-controls"])):Ze("v-if",!0),s.isSingleLabelVisible?(se(),fn("span",{key:1,class:"multiselect__single",onMousedown:e[10]||(e[10]=ut((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[Jt(t.$slots,"singleLabel",{option:s.singleValue},()=>[mt(We(t.currentOptionLabel),1)])],32)):Ze("v-if",!0),s.isPlaceholderVisible?(se(),fn("span",{key:2,class:"multiselect__placeholder",onMousedown:e[11]||(e[11]=ut((...o)=>t.toggle&&t.toggle(...o),["prevent"]))},[Jt(t.$slots,"placeholder",{},()=>[mt(We(t.placeholder),1)])],32)):Ze("v-if",!0)],512),Ue(ef,{name:"multiselect"},{default:Do(()=>[In(Ue("div",{class:"multiselect__content-wrapper",onFocus:e[12]||(e[12]=(...o)=>t.activate&&t.activate(...o)),tabindex:"-1",onMousedown:e[13]||(e[13]=ut(()=>{},["prevent"])),style:{maxHeight:t.optimizedHeight+"px"},ref:"list"},[Ue("ul",{class:"multiselect__content",style:s.contentStyle,role:"listbox",id:"listbox-"+t.id},[Jt(t.$slots,"beforeList"),t.multiple&&t.max===t.internalValue.length?(se(),fn("li",eJ,[Ue("span",tJ,[Jt(t.$slots,"maxElements",{},()=>[mt("Maximum of "+We(t.max)+" options selected. First remove a selected option to select another.",1)])])])):Ze("v-if",!0),!t.max||t.internalValue.length<t.max?(se(!0),fn(it,{key:1},mi(t.filteredOptions,(o,a)=>(se(),fn("li",{class:"multiselect__element",key:a,id:t.id+"-"+a,role:o&&(o.$isLabel||o.$isDisabled)?null:"option"},[o&&(o.$isLabel||o.$isDisabled)?Ze("v-if",!0):(se(),fn("span",{key:0,class:[t.optionHighlight(a,o),"multiselect__option"],onClick:ut(l=>t.select(o),["stop"]),onMouseenter:ut(l=>t.pointerSet(a),["self"]),"data-select":o&&o.isTag?t.tagPlaceholder:s.selectLabelText,"data-selected":s.selectedLabelText,"data-deselect":s.deselectLabelText},[Jt(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Ue("span",null,We(t.getOptionLabel(o)),1)])],42,["onClick","onMouseenter","data-select","data-selected","data-deselect"])),o&&(o.$isLabel||o.$isDisabled)?(se(),fn("span",{key:1,"data-select":t.groupSelect&&s.selectGroupLabelText,"data-deselect":t.groupSelect&&s.deselectGroupLabelText,class:[t.groupHighlight(a,o),"multiselect__option"],onMouseenter:ut(l=>t.groupSelect&&t.pointerSet(a),["self"]),onMousedown:ut(l=>t.selectGroup(o),["prevent"])},[Jt(t.$slots,"option",{option:o,search:t.search,index:a},()=>[Ue("span",null,We(t.getOptionLabel(o)),1)])],42,["data-select","data-deselect","onMouseenter","onMousedown"])):Ze("v-if",!0)],8,["id","role"]))),128)):Ze("v-if",!0),In(Ue("li",null,[Ue("span",nJ,[Jt(t.$slots,"noResult",{search:t.search},()=>[rJ])])],512),[[ec,n.showNoResults&&t.filteredOptions.length===0&&t.search&&!n.loading]]),In(Ue("li",null,[Ue("span",iJ,[Jt(t.$slots,"noOptions",{},()=>[sJ])])],512),[[ec,n.showNoOptions&&(t.options.length===0||s.hasOptionGroup===!0&&t.filteredOptions.length===0)&&!t.search&&!n.loading]]),Jt(t.$slots,"afterList")],12,["id"])],36),[[ec,t.isOpen]])]),_:3})],42,["tabindex","aria-owns"])}Wd.render=oJ;const Dt=t=>(Ku("data-v-a8c4a6f7"),t=t(),Yu(),t),aJ={id:"board-info"},lJ={key:0},cJ={key:0,id:"controlls-are-editing"},uJ={key:1,id:"controlls-are-viewing"},hJ=["src"],dJ=["onClick"],fJ=["onClick"],pJ={key:0},mJ=Dt(()=>S("h3",{class:"font-size-S"},"Description",-1)),gJ=Dt(()=>S("h3",{class:"font-size-S"},"Image",-1)),yJ=["src"],_J=Dt(()=>S("br",null,null,-1)),vJ=Dt(()=>S("h3",{class:"font-size-S"},"Tile type",-1)),bJ=Dt(()=>S("p",null,"Choose any of the different tile types.",-1)),EJ=Dt(()=>S("hr",null,null,-1)),TJ=Dt(()=>S("h3",{class:"font-size-S"},"Metric",-1)),wJ=Dt(()=>S("p",null,"Search and select the metric you want to associate with this tile.",-1)),SJ=Dt(()=>S("hr",null,null,-1)),IJ={key:0},AJ=Dt(()=>S("h3",{class:"font-size-S"},"Repeatable tile",-1)),CJ=Dt(()=>S("p",null,"Can the competitors complete the tile multiple times and gain points each time?",-1)),RJ=Dt(()=>S("hr",null,null,-1)),kJ=Dt(()=>S("h3",{class:"font-size-S"},"Points and count",-1)),OJ=Dt(()=>S("p",null,"the points the competitors will get when they complete the tile",-1)),NJ=Dt(()=>S("p",null,[mt(" amount that is needed to complete the tile "),S("br"),S("em",null,"a.e. 200.000.000 slayer exp or 5 unique barrows items")],-1)),MJ=Dt(()=>S("p",null,[mt(" this is the minimum required amount for the tile"),S("br"),S("em",null,"a.e. if the count is 5 and you want the team to collect at least one of each item, the minimum would be 1")],-1)),PJ=Dt(()=>S("p",null,[mt(" this is the maximum amount for the tile"),S("br"),S("em",null,"a.e. if the count is 5 and you want the team to collect at most two of each item, the maximum would be 2")],-1)),xJ={key:1},DJ={key:2},LJ=Dt(()=>S("h3",{class:"font-size-S"},"Drops",-1)),VJ=Dt(()=>S("p",null,"add drops to the list of valid drops",-1)),FJ=["onClick"],BJ={key:3},UJ=Dt(()=>S("h3",{class:"font-size-S"},"Need Any or All?",-1)),$J=Dt(()=>S("p",null,"do the competors need to achieve all of the requirements to complete the tile?",-1)),HJ=Cr({__name:"editBoard.vapor",async setup(t){var rt,lt;let e,n;const r=bm();r.value="Edit board - Bingo Bongo";const i=Ve(zH.filter(me=>!["ehb","ehp","league_points"].includes(me))),s=Ve(),o=Ve(!1),a=Ve(),l=Ve(),c=Ve(null),u=Ve(),h=Ve(0),d=()=>{a.value&&a.value.showModal&&a.value.showModal()},f=()=>{a.value&&a.value.closeModal&&a.value.closeModal()},p=()=>{c.value&&(c.value.drops?c.value.drops.push({id:Vg(),name:u.value}):c.value.drops=[{id:Vg(),name:u.value}])},m=me=>{c.value&&c.value.drops&&c.value.drops.indexOf(me)>-1&&c.value.drops.splice(c.value.drops.indexOf(me),1)};window.addEventListener("keydown",me=>{switch(me.key){case"Escape":a.value&&a.value.closeModal&&(a.value.closeModal(),l.value.close(),s.value=null,c.value=null,o.value=!1,o.value=!1);break}});const g=Ve(null),_=Ve(),v=Ve(!1),T=vm(),{data:I,promise:A}=Tl(Nn(Zt,"Boards",T.params.boardUUID));[e,n]=al(()=>A.value),await e,n();const w=Ve(((rt=I.value)==null?void 0:rt.boardWidth)||5);let O=Ve([]),M=[];const{data:k,promise:U}=Ld(xa(Zt,"Boards",T.params.boardUUID,"Tiles"));[e,n]=al(()=>U.value),await e,n();const F=Ve(k.value);(lt=I.value)!=null&&lt.orderOfList?O.value=I.value.orderOfList:O.value=F.value.map(me=>me.id);const $=Pt(()=>F.value===void 0?[]:F.value.toSorted((me,G)=>O.value.indexOf(me.id)-O.value.indexOf(G.id)));Lz(g,$,{inverted:!0,handle:".handle",ghostClass:"blue-background-class",onUpdate:me=>{sN($.value,me.oldIndex,me.newIndex),Ll(()=>{O.value=$.value.map(G=>G.id)})}});const pe=()=>{const me=Vg(),G=Vz();F.value.push({id:me,title:G,description:"a sample description",image:"https://oldschool.runescape.wiki/images/Frog_%28Ruins_of_Camdozaal%29.png?6ae5e",type:"drop",needAny:!1,points:0,count:0,repeatable:!1}),O.value.push(me)},q=()=>{s.value&&(F.value=F.value.filter(me=>me.id!==s.value.id),O.value=$.value.map(me=>me.id),f())},z=()=>{s.value=null,f()},N=me=>{var G;me==="add"?w.value=Math.min(w.value+1,12):me==="remove"&&(w.value=Math.max(w.value-1,3)),(G=g.value)==null||G.style.setProperty("--width",w.value.toString())},B=async()=>{v.value=!1;try{const me=Nn(Zt,"Boards",T.params.boardUUID),G=xa(me,"Tiles"),R=sU(Zt);R.update(me,{orderOfList:O.value,boardWidth:w.value});const X=await mO(G),W={};X.forEach(be=>{const y=be.id;W[y]=!0;const E=be.data(),C=F.value.find(x=>x.id===y);if(C){if(JSON.stringify(C)!==JSON.stringify(E)){const x=Nn(G,y);R.set(x,{id:C.id,title:C.title,description:C.description,image:C.image,type:C.type,needAny:C.needAny,points:C.points,count:C.count})}}else{const x=Nn(G,y);R.delete(x)}}),F.value.forEach(be=>{if(!W[be.id]){const y=Nn(G,be.id);R.set(y,{id:be.id,title:be.title,description:be.description,image:be.image,type:be.type,needAny:be.needAny,points:be.points,count:be.count})}}),await R.commit();const{data:J,promise:we}=Ld(xa(Zt,"Boards",T.params.boardUUID,"Tiles"),{once:!0});await we.value,F.value=J.value}catch(me){console.error("Error synchronizing tiles:",me)}},D=async()=>{F.value=k.value,w.value=h.value,v.value=!1,O.value=M},oe=()=>{const me=[...k.value];F.value=me,M=O.value,h.value=w.value,v.value=!0},de=async()=>{R_(Nn(Zt,"Boards",T.params.boardUUID,"Tiles",c.value.id),{...c.value}),o.value=!1,l.value.close(),s.value=c.value;const{data:me,promise:G}=Ld(xa(Zt,"Boards",T.params.boardUUID,"Tiles"),{once:!0});await G.value,F.value=me.value},Ae=()=>{o.value=!1,l.value.close(),c.value=null,s.value=null},De=()=>{const me={...s.value};c.value=me,o.value=!0,l.value.showModal()};return(me,G)=>{var R,X,W,J,we,be;return se(),_e(it,null,[S("section",aJ,[ze(I)?(se(),_e("h1",lJ,We(ze(I).name),1)):Ze("",!0),S("code",null," Board ID: "+We(ze(T).params.boardUUID),1)]),v.value?(se(),_e("section",cJ,[S("button",{onClick:G[0]||(G[0]=y=>N("remove"))},"-"),In(S("input",{id:"widthInputElement",ref_key:"widthInputForm",ref:_,class:"widthInput","onUpdate:modelValue":G[1]||(G[1]=y=>w.value=y),type:"number",min:"3",max:"12",onBlur:G[2]||(G[2]=()=>{w.value=Math.min(w.value,12),w.value=Math.max(w.value,3)})},null,544),[[Oi,w.value]]),S("button",{onClick:G[3]||(G[3]=y=>N("add"))},"+"),S("button",{submit:"",onClick:G[4]||(G[4]=y=>B())},"save"),S("button",{cancel:"",onClick:G[5]||(G[5]=y=>D())},"cancel")])):(se(),_e("section",uJ,[S("button",{onClick:G[6]||(G[6]=y=>oe())},"edit")])),S("section",{ref_key:"el",ref:g,class:"board",style:Bi({"--width":w.value,position:"relative"})},[(se(!0),_e(it,null,mi($.value,y=>(se(),_e("div",{class:mp(["tile",{handle:v.value}]),style:Bi({"--_image":`url('${y.image}')`}),key:y.id},[S("img",{class:"tile--image",src:y.image},null,8,hJ),v.value?(se(),_e("button",{key:0,icon:"",cancel:"",onClick:()=>{s.value=y,d()}}," delete ",8,dJ)):Ze("",!0),v.value?(se(),_e("button",{key:1,icon:"",onClick:()=>{s.value=y,De()}}," edit ",8,fJ)):Ze("",!0)],6))),128)),F.value.length<100?(se(),_e("button",{key:0,class:"add_tile",icon:"",onClick:G[7]||(G[7]=y=>pe()),style:Bi({order:$.value.length+1})}," add_box ",4)):Ze("",!0)],4),Ue(jY,{ref_key:"modalEle",ref:a},{header:Do(()=>{var y;return[mt(" Delete tile: "+We((y=s.value)==null?void 0:y.title),1)]}),body:Do(()=>{var y;return[mt(" are you sure you want to delete the tile "+We((y=s.value)==null?void 0:y.title),1)]}),controls:Do(()=>[S("button",{submit:"",onClick:q},"REMOVE"),S("button",{cancel:"",onClick:z},"Cancel")]),_:1},512),S("dialog",{ref_key:"asideModalEle",ref:l},[s.value&&c.value?(se(),_e("div",pJ,[S("div",null,[S("h2",null,[mt(" Edit tile: "+We((R=c.value)==null?void 0:R.title)+" ",1),S("small",null,[S("code",null,We((X=c.value)==null?void 0:X.id),1)])]),In(S("input",{type:"text","onUpdate:modelValue":G[8]||(G[8]=y=>c.value.title=y)},null,512),[[Oi,c.value.title]]),mJ,Ue(BY,{class:"editable",modelValue:c.value.description,"onUpdate:modelValue":G[9]||(G[9]=y=>c.value.description=y)},null,8,["modelValue"])]),S("div",null,[gJ,S("img",{src:c.value.image},null,8,yJ),_J,S("label",null,[mt("Image URL: "),In(S("input",{required:"",type:"url","onUpdate:modelValue":G[10]||(G[10]=y=>c.value.image=y)},null,512),[[Oi,c.value.image]])])]),S("div",null,[vJ,bJ,Ue(ze(Wd),{modelValue:c.value.type,"onUpdate:modelValue":G[11]||(G[11]=y=>c.value.type=y),options:["drop","exp","kc"],"close-on-select":!0,"clear-on-select":!1,"allow-empty":!0,placeholder:"Choose a tile Type"},null,8,["modelValue"])]),EJ,S("div",null,[TJ,wJ,((W=c.value)==null?void 0:W.type)!=="exp"?(se(),fn(ze(Wd),{key:0,modelValue:c.value.metric,"onUpdate:modelValue":G[12]||(G[12]=y=>c.value.metric=y),options:i.value,"close-on-select":!0,"clear-on-select":!1,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"])):(se(),fn(ze(Wd),{key:1,modelValue:c.value.metric,"onUpdate:modelValue":G[13]||(G[13]=y=>c.value.metric=y),options:ze(Ah),"close-on-select":!0,"clear-on-select":!1,"allow-empty":!0,placeholder:"Choose a metric to track progress"},null,8,["modelValue","options"]))]),SJ,c.value&&((J=c.value.repeatable)!=null&&J.toString())?(se(),_e("div",IJ,[AJ,CJ,S("label",null,[mt("Repeatable "),In(S("input",{type:"checkbox","onUpdate:modelValue":G[14]||(G[14]=y=>c.value.repeatable=y)},null,512),[[aE,c.value.repeatable]]),mt(" "+We(c.value.repeatable),1)])])):Ze("",!0),RJ,S("div",null,[kJ,OJ,S("label",null,[mt("points value: "),In(S("input",{type:"number",min:"0","onUpdate:modelValue":G[15]||(G[15]=y=>c.value.points=y)},null,512),[[Oi,c.value.points]])]),NJ,S("label",null,[mt("count: "),In(S("input",{type:"number",min:"0","onUpdate:modelValue":G[16]||(G[16]=y=>c.value.count=y)},null,512),[[Oi,c.value.count]])]),MJ,S("label",null,[mt("minimum count: "),c.value!==null?In((se(),_e("input",{key:0,placeholder:"unset",type:"number",min:"0",onBlur:G[17]||(G[17]=()=>{c.value&&c.value.min!=null&&(c.value.min=c.value.min<0?0:c.value.min)}),"onUpdate:modelValue":G[18]||(G[18]=y=>c.value.min=y)},null,544)),[[Oi,c.value.min]]):Ze("",!0)]),PJ,S("label",null,[mt("maximum count: "),In(S("input",{placeholder:"unset",type:"number",min:"0",onBlur:G[19]||(G[19]=()=>{c.value&&c.value.max!=null&&(c.value.max=c.value.max<0?0:c.value.max)}),"onUpdate:modelValue":G[20]||(G[20]=y=>c.value.max=y)},null,544),[[Oi,c.value.max]])])]),((we=c.value)==null?void 0:we.type)=="drop"?(se(),_e("hr",xJ)):Ze("",!0),((be=c.value)==null?void 0:be.type)=="drop"?(se(),_e("div",DJ,[LJ,VJ,S("ul",null,[(se(!0),_e(it,null,mi(c.value.drops,y=>(se(),_e("li",null,[mt(We(y)+" ",1),S("button",{icon:"",cancel:"",onClick:E=>m(y)},"delete",8,FJ)]))),256)),S("li",null,[In(S("input",{type:"text","onUpdate:modelValue":G[21]||(G[21]=y=>u.value=y)},null,512),[[Oi,u.value]]),S("button",{onClick:p},"Add Drop")])])])):Ze("",!0),c.value&&c.value.needAny.toString()?(se(),_e("div",BJ,[UJ,$J,S("label",null,[mt("All"),In(S("input",{type:"checkbox",choice:"","onUpdate:modelValue":G[22]||(G[22]=y=>c.value.needAny=y)},null,512),[[aE,c.value.needAny]]),mt("Any")])])):Ze("",!0)])):Ze("",!0),S("button",{submit:"",onClick:de},"Save changes"),S("button",{cancel:"",onClick:Ae},"Cancel")],512)],64)}}}),zJ=eo(HJ,[["__scopeId","data-v-a8c4a6f7"]]),jJ=t=>(Ku("data-v-f8591ebd"),t=t(),Yu(),t),WJ=["onClick"],GJ=["src"],qJ=["src"],KJ=["innerHTML"],YJ={key:0},JJ={key:1},QJ={key:2},XJ={key:3},ZJ=jJ(()=>S("p",null,"valid Drops",-1)),eQ=Cr({__name:"viewBoard.vapor",async setup(t){var g,_;let e,n;const r=vm(),i=bm(),s=Ve(),{data:o,promise:a}=Tl(Nn(Zt,"Boards",r.params.boardUUID));[e,n]=al(()=>a.value),await e,n(),(g=o.value)!=null&&g.name&&(i.value=o.value.name+" - Bingo Bongo");const{data:l,promise:c}=Ld(xa(Zt,"Boards",r.params.boardUUID,"Tiles"));[e,n]=al(()=>c.value),await e,n();const u=Ve(l.value);(_=o.value)!=null&&_.orderOfList?s.value=o.value.orderOfList:s.value=u.value.map(v=>v.id);const h=Pt(()=>u.value===void 0?[]:u.value.toSorted((v,T)=>s.value.indexOf(v.id)-s.value.indexOf(T.id))),d=Ve(),f=Ve(void 0),p=v=>{var T;d.value=v,(T=f.value)==null||T.showModal()},m=()=>{var v;(v=f.value)==null||v.close()};return(v,T)=>{var I,A,w;return ze(o)?(se(),_e(it,{key:0},[S("h1",null,We(ze(o).name),1),S("section",{ref:"el",class:"board",style:Bi({"--width":ze(o).boardWidth,position:"relative"})},[(se(!0),_e(it,null,mi(h.value,O=>(se(),_e("div",{class:"tile",style:Bi({"--_image":`url('${O.image}')`}),key:O.id,onClick:ut(M=>p(O),["prevent"])},[S("img",{class:"tile--image",src:O.image},null,8,GJ)],12,WJ))),128))],4),S("dialog",{ref_key:"asideModalEle",ref:f,class:"modal"},[d.value?(se(),_e(it,{key:0},[S("button",{onClick:ut(m,["prevent"]),icon:""},"close"),S("div",null,[S("img",{src:d.value.image},null,8,qJ)]),S("div",null,[S("h2",null,We((I=d.value)==null?void 0:I.title),1),S("div",{innerHTML:d.value.description},null,8,KJ)]),d.value.type?(se(),_e("div",YJ,[S("p",null,"type: "+We(d.value.type),1)])):Ze("",!0),d.value.metric?(se(),_e("div",JJ,[S("p",null,"metric: "+We(d.value.metric),1)])):Ze("",!0),(A=d.value.repeatable)!=null&&A.toString()?(se(),_e("div",QJ,[S("p",null,We(d.value.repeatable),1)])):Ze("",!0),S("div",null,[S("p",null,"points: "+We(d.value.points),1),S("p",null,"count: "+We(d.value.count),1),S("p",null,"minimum count: "+We(d.value.min),1),S("p",null,"maximum count: "+We(d.value.max),1)]),((w=d.value)==null?void 0:w.type)=="drop"?(se(),_e("div",XJ,[ZJ,S("ul",null,[(se(!0),_e(it,null,mi(d.value.drops,O=>(se(),_e("li",null,We(O),1))),256))])])):Ze("",!0),S("div",null,[S("p",null,"need any:"+We(d.value.needAny),1)])],64)):Ze("",!0)],512)],64)):Ze("",!0)}}}),tQ=eo(eQ,[["__scopeId","data-v-f8591ebd"]]),nQ={},DM=t=>(Ku("data-v-9b1c0c5b"),t=t(),Yu(),t),rQ=oD('<h1 data-v-9b1c0c5b>Theme preview page</h1><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>Colors</h2><div class="wrapper" data-v-9b1c0c5b><div class="block bg-background border" data-v-9b1c0c5b>background</div><div class="block bg-bgalt" data-v-9b1c0c5b>alt bg</div><div class="block bg-bgaccent" data-v-9b1c0c5b>accent bg</div><div class="block bg-primary-100" data-v-9b1c0c5b>primary-100</div><div class="block bg-primary" data-v-9b1c0c5b>primary</div><div class="block bg-primary-900" data-v-9b1c0c5b>primary-900</div><div class="block bg-secondary-100" data-v-9b1c0c5b>secondary-100</div><div class="block bg-secondary" data-v-9b1c0c5b>secondary</div><div class="block bg-secondary-900" data-v-9b1c0c5b>secondary-900</div><div class="block bg-accent-100" data-v-9b1c0c5b>accent-100</div><div class="block bg-accent" data-v-9b1c0c5b>accent</div><div class="block bg-accent-900" data-v-9b1c0c5b>accent-900</div></div></section><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>This is a Heading</h2><h3 data-v-9b1c0c5b>This is a Heading</h3><h4 data-v-9b1c0c5b>This is a Heading</h4><h5 data-v-9b1c0c5b>This is a Heading</h5><p data-v-9b1c0c5b>This is a paragraph.</p><p data-v-9b1c0c5b><code data-v-9b1c0c5b>this is code</code></p><p data-v-9b1c0c5b><a href="https://www.example.com" data-v-9b1c0c5b>This is a link</a></p><p data-v-9b1c0c5b><a href="https://www.example.com" target="_blank" data-v-9b1c0c5b>This is an external link</a></p></section><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>Unordered lists</h2><ul data-v-9b1c0c5b><li data-v-9b1c0c5b>List Item 1</li><li data-v-9b1c0c5b>List Item 2</li><li data-v-9b1c0c5b>List Item 3</li></ul></section><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>Ordered lists</h2><ol data-v-9b1c0c5b><li data-v-9b1c0c5b>List Item 1</li><li data-v-9b1c0c5b>List Item 2</li><li data-v-9b1c0c5b>List Item 3</li></ol></section><section data-v-9b1c0c5b><h2 data-v-9b1c0c5b>Table</h2><table data-v-9b1c0c5b><tr data-v-9b1c0c5b><th data-v-9b1c0c5b>Header 1</th><th data-v-9b1c0c5b>Header 2</th></tr><tr data-v-9b1c0c5b><td data-v-9b1c0c5b>Data 1</td><td data-v-9b1c0c5b>Data 2</td></tr></table></section>',6),iQ=DM(()=>S("section",null,[S("h2",null,"Inputs"),S("section",null,[S("div",null,[S("label",{for:"input-text"},"Input Text:")]),S("input",{type:"text",id:"input-text",name:"input-text"})]),S("label",null,"Input Radio:"),S("br"),S("input",{type:"radio",id:"input-radio1",name:"input-radio",value:"radio1"}),S("label",{for:"input-radio1"},"Radio 1"),S("br"),S("input",{type:"radio",id:"input-radio2",name:"input-radio",value:"radio2"}),S("label",{for:"input-radio2"},"Radio 2"),S("br"),S("div",null,[S("label",{for:"input-checkbox"},"Input Checkbox:"),S("br"),S("input",{type:"checkbox",id:"input-checkbox",name:"input-checkbox",value:"checkbox1"}),mt("Checkbox 1"),S("br"),S("input",{type:"checkbox",checked:"",id:"input-checkbox",name:"input-checkbox",value:"checkbox2"}),mt("Checkbox 2"),S("br")]),S("button",null,"Button"),S("button",{outline:""},"outline"),S("button",{cancel:""},"cancel"),S("button",{submit:""},"submit")],-1)),sQ=DM(()=>S("section",null,[S("h2",null,"Combination elements"),S("section",null,[S("button",null,"add"),S("input",{type:"text",class:"width-2"}),S("button",null,"subtract")]),S("section",null,[S("span",{type:"text",class:"input width-10",contenteditable:""}),S("button",null,"subtract")])],-1));function oQ(t,e){return se(),_e(it,null,[rQ,iQ,sQ],64)}const aQ=eo(nQ,[["render",oQ],["__scopeId","data-v-9b1c0c5b"]]),LM=K$({history:w$(),routes:[{path:"/new",name:"createNewBingo",component:tz},{path:"/login",name:"loginScreen",component:cz},{path:"/view/:boardUUID",name:"viewBoard",component:tQ},{path:"/edit/:boardUUID",name:"editBoard",component:zJ},{path:"/color/",name:"color",component:aQ},{path:"/",name:"Home",component:EH}]});LM.beforeEach(async t=>{if(t.name=="editBoard"&&!await cQ(t.params.boardUUID))return{name:"loginScreen"};if(t.name=="createNewBingo"&&!await lQ())return{name:"loginScreen"}});const lQ=async()=>{var e;const t=await o1();if(t){const{data:n,promise:r}=Tl(Nn(Zt,"Users",t.uid));if(await r.value,(e=n.value)!=null&&e.banned&&n.value.banned)return!n.value.banned}return!!(t!=null&&t.uid)},cQ=async t=>{var i;const e=await o1();if(e){const{data:s,promise:o}=Tl(Nn(Zt,"Users",e.uid));if(await o.value,(i=s.value)!=null&&i.banned&&s.value.banned)return!s.value.banned}const{data:n,promise:r}=Tl(Nn(Zt,"Boards",t));return await r.value,n.value&&e?n.value.ownerID==e.uid:!1};function hI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hI(Object(n),!0).forEach(function(r){Kt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ap(t){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ap(t)}function uQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hQ(t,e,n){return e&&dI(t.prototype,e),n&&dI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ob(t,e){return fQ(t)||mQ(t,e)||VM(t,e)||yQ()}function Mh(t){return dQ(t)||pQ(t)||VM(t)||gQ()}function dQ(t){if(Array.isArray(t))return lv(t)}function fQ(t){if(Array.isArray(t))return t}function pQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function VM(t,e){if(t){if(typeof t=="string")return lv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lv(t,e)}}function lv(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fI=function(){},ab={},FM={},BM=null,UM={mark:fI,measure:fI};try{typeof window<"u"&&(ab=window),typeof document<"u"&&(FM=document),typeof MutationObserver<"u"&&(BM=MutationObserver),typeof performance<"u"&&(UM=performance)}catch{}var _Q=ab.navigator||{},pI=_Q.userAgent,mI=pI===void 0?"":pI,qs=ab,Tt=FM,gI=BM,fd=UM;qs.document;var ts=!!Tt.documentElement&&!!Tt.head&&typeof Tt.addEventListener=="function"&&typeof Tt.createElement=="function",$M=~mI.indexOf("MSIE")||~mI.indexOf("Trident/"),pd,md,gd,yd,_d,Yi="___FONT_AWESOME___",cv=16,HM="fa",zM="svg-inline--fa",sa="data-fa-i2svg",uv="data-fa-pseudo-element",vQ="data-fa-pseudo-element-pending",lb="data-prefix",cb="data-icon",yI="fontawesome-i2svg",bQ="async",EQ=["HTML","HEAD","STYLE","SCRIPT"],jM=function(){try{return!0}catch{return!1}}(),bt="classic",Nt="sharp",ub=[bt,Nt];function Ph(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[bt]}})}var Uu=Ph((pd={},Kt(pd,bt,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),Kt(pd,Nt,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),pd)),$u=Ph((md={},Kt(md,bt,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Kt(md,Nt,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),md)),Hu=Ph((gd={},Kt(gd,bt,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Kt(gd,Nt,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),gd)),TQ=Ph((yd={},Kt(yd,bt,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Kt(yd,Nt,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),yd)),wQ=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,WM="fa-layers-text",SQ=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,IQ=Ph((_d={},Kt(_d,bt,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Kt(_d,Nt,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),_d)),GM=[1,2,3,4,5,6,7,8,9,10],AQ=GM.concat([11,12,13,14,15,16,17,18,19,20]),CQ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],No={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},zu=new Set;Object.keys($u[bt]).map(zu.add.bind(zu));Object.keys($u[Nt]).map(zu.add.bind(zu));var RQ=[].concat(ub,Mh(zu),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",No.GROUP,No.SWAP_OPACITY,No.PRIMARY,No.SECONDARY]).concat(GM.map(function(t){return"".concat(t,"x")})).concat(AQ.map(function(t){return"w-".concat(t)})),eu=qs.FontAwesomeConfig||{};function kQ(t){var e=Tt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function OQ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Tt&&typeof Tt.querySelector=="function"){var NQ=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];NQ.forEach(function(t){var e=ob(t,2),n=e[0],r=e[1],i=OQ(kQ(n));i!=null&&(eu[r]=i)})}var qM={styleDefault:"solid",familyDefault:"classic",cssPrefix:HM,replacementClass:zM,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};eu.familyPrefix&&(eu.cssPrefix=eu.familyPrefix);var Dl=ae(ae({},qM),eu);Dl.autoReplaceSvg||(Dl.observeMutations=!1);var fe={};Object.keys(qM).forEach(function(t){Object.defineProperty(fe,t,{enumerable:!0,set:function(n){Dl[t]=n,tu.forEach(function(r){return r(fe)})},get:function(){return Dl[t]}})});Object.defineProperty(fe,"familyPrefix",{enumerable:!0,set:function(e){Dl.cssPrefix=e,tu.forEach(function(n){return n(fe)})},get:function(){return Dl.cssPrefix}});qs.FontAwesomeConfig=fe;var tu=[];function MQ(t){return tu.push(t),function(){tu.splice(tu.indexOf(t),1)}}var cs=cv,ai={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function PQ(t){if(!(!t||!ts)){var e=Tt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Tt.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Tt.head.insertBefore(e,r),t}}var xQ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function ju(){for(var t=12,e="";t-- >0;)e+=xQ[Math.random()*62|0];return e}function Ql(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function hb(t){return t.classList?Ql(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function KM(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function DQ(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(KM(t[n]),'" ')},"").trim()}function Lm(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function db(t){return t.size!==ai.size||t.x!==ai.x||t.y!==ai.y||t.rotate!==ai.rotate||t.flipX||t.flipY}function LQ(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function VQ(t){var e=t.transform,n=t.width,r=n===void 0?cv:n,i=t.height,s=i===void 0?cv:i,o=t.startCentered,a=o===void 0?!1:o,l="";return a&&$M?l+="translate(".concat(e.x/cs-r/2,"em, ").concat(e.y/cs-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/cs,"em), calc(-50% + ").concat(e.y/cs,"em)) "):l+="translate(".concat(e.x/cs,"em, ").concat(e.y/cs,"em) "),l+="scale(".concat(e.size/cs*(e.flipX?-1:1),", ").concat(e.size/cs*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var FQ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function YM(){var t=HM,e=zM,n=fe.cssPrefix,r=fe.replacementClass,i=FQ;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var _I=!1;function cy(){fe.autoAddCss&&!_I&&(PQ(YM()),_I=!0)}var BQ={mixout:function(){return{dom:{css:YM,insertCss:cy}}},hooks:function(){return{beforeDOMElementCreation:function(){cy()},beforeI2svg:function(){cy()}}}},Ji=qs||{};Ji[Yi]||(Ji[Yi]={});Ji[Yi].styles||(Ji[Yi].styles={});Ji[Yi].hooks||(Ji[Yi].hooks={});Ji[Yi].shims||(Ji[Yi].shims=[]);var Fr=Ji[Yi],JM=[],UQ=function t(){Tt.removeEventListener("DOMContentLoaded",t),lp=1,JM.map(function(e){return e()})},lp=!1;ts&&(lp=(Tt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Tt.readyState),lp||Tt.addEventListener("DOMContentLoaded",UQ));function $Q(t){ts&&(lp?setTimeout(t,0):JM.push(t))}function xh(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?KM(t):"<".concat(e," ").concat(DQ(r),">").concat(s.map(xh).join(""),"</").concat(e,">")}function vI(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var HQ=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},uy=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?HQ(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function zQ(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function hv(t){var e=zQ(t);return e.length===1?e[0].toString(16):null}function jQ(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function bI(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function dv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=bI(e);typeof Fr.hooks.addPack=="function"&&!i?Fr.hooks.addPack(t,bI(e)):Fr.styles[t]=ae(ae({},Fr.styles[t]||{}),s),t==="fas"&&dv("fa",e)}var vd,bd,Ed,Fa=Fr.styles,WQ=Fr.shims,GQ=(vd={},Kt(vd,bt,Object.values(Hu[bt])),Kt(vd,Nt,Object.values(Hu[Nt])),vd),fb=null,QM={},XM={},ZM={},eP={},tP={},qQ=(bd={},Kt(bd,bt,Object.keys(Uu[bt])),Kt(bd,Nt,Object.keys(Uu[Nt])),bd);function KQ(t){return~RQ.indexOf(t)}function YQ(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!KQ(i)?i:null}var nP=function(){var e=function(s){return uy(Fa,function(o,a,l){return o[l]=uy(a,s,{}),o},{})};QM=e(function(i,s,o){if(s[3]&&(i[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){i[l.toString(16)]=o})}return i}),XM=e(function(i,s,o){if(i[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){i[l]=o})}return i}),tP=e(function(i,s,o){var a=s[2];return i[o]=o,a.forEach(function(l){i[l]=o}),i});var n="far"in Fa||fe.autoFetchSvg,r=uy(WQ,function(i,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!n&&(a="fas"),typeof o=="string"&&(i.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:a,iconName:l}),i},{names:{},unicodes:{}});ZM=r.names,eP=r.unicodes,fb=Vm(fe.styleDefault,{family:fe.familyDefault})};MQ(function(t){fb=Vm(t.styleDefault,{family:fe.familyDefault})});nP();function pb(t,e){return(QM[t]||{})[e]}function JQ(t,e){return(XM[t]||{})[e]}function Mo(t,e){return(tP[t]||{})[e]}function rP(t){return ZM[t]||{prefix:null,iconName:null}}function QQ(t){var e=eP[t],n=pb("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function Ks(){return fb}var mb=function(){return{prefix:null,iconName:null,rest:[]}};function Vm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?bt:n,i=Uu[r][t],s=$u[r][t]||$u[r][i],o=t in Fr.styles?t:null;return s||o||null}var EI=(Ed={},Kt(Ed,bt,Object.keys(Hu[bt])),Kt(Ed,Nt,Object.keys(Hu[Nt])),Ed);function Fm(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.skipLookups,i=r===void 0?!1:r,s=(e={},Kt(e,bt,"".concat(fe.cssPrefix,"-").concat(bt)),Kt(e,Nt,"".concat(fe.cssPrefix,"-").concat(Nt)),e),o=null,a=bt;(t.includes(s[bt])||t.some(function(c){return EI[bt].includes(c)}))&&(a=bt),(t.includes(s[Nt])||t.some(function(c){return EI[Nt].includes(c)}))&&(a=Nt);var l=t.reduce(function(c,u){var h=YQ(fe.cssPrefix,u);if(Fa[u]?(u=GQ[a].includes(u)?TQ[a][u]:u,o=u,c.prefix=u):qQ[a].indexOf(u)>-1?(o=u,c.prefix=Vm(u,{family:a})):h?c.iconName=h:u!==fe.replacementClass&&u!==s[bt]&&u!==s[Nt]&&c.rest.push(u),!i&&c.prefix&&c.iconName){var d=o==="fa"?rP(c.iconName):{},f=Mo(c.prefix,c.iconName);d.prefix&&(o=null),c.iconName=d.iconName||f||c.iconName,c.prefix=d.prefix||c.prefix,c.prefix==="far"&&!Fa.far&&Fa.fas&&!fe.autoFetchSvg&&(c.prefix="fas")}return c},mb());return(t.includes("fa-brands")||t.includes("fab"))&&(l.prefix="fab"),(t.includes("fa-duotone")||t.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===Nt&&(Fa.fass||fe.autoFetchSvg)&&(l.prefix="fass",l.iconName=Mo(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||o==="fa")&&(l.prefix=Ks()||"fas"),l}var XQ=function(){function t(){uQ(this,t),this.definitions={}}return hQ(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){n.definitions[a]=ae(ae({},n.definitions[a]||{}),o[a]),dv(a,o[a]);var l=Hu[bt][a];l&&dv(l,o[a]),nP()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var o=i[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];n[a]||(n[a]={}),u.length>0&&u.forEach(function(h){typeof h=="string"&&(n[a][h]=c)}),n[a][l]=c}),n}}]),t}(),TI=[],Ba={},sl={},ZQ=Object.keys(sl);function eX(t,e){var n=e.mixoutsTo;return TI=t,Ba={},Object.keys(sl).forEach(function(r){ZQ.indexOf(r)===-1&&delete sl[r]}),TI.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),ap(i[o])==="object"&&Object.keys(i[o]).forEach(function(a){n[o]||(n[o]={}),n[o][a]=i[o][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(o){Ba[o]||(Ba[o]=[]),Ba[o].push(s[o])})}r.provides&&r.provides(sl)}),n}function fv(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=Ba[t]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function oa(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Ba[t]||[];i.forEach(function(s){s.apply(null,n)})}function Qi(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return sl[t]?sl[t].apply(null,e):void 0}function pv(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||Ks();if(e)return e=Mo(n,e)||e,vI(iP.definitions,n,e)||vI(Fr.styles,n,e)}var iP=new XQ,tX=function(){fe.autoReplaceSvg=!1,fe.observeMutations=!1,oa("noAuto")},nX={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ts?(oa("beforeI2svg",e),Qi("pseudoElements2svg",e),Qi("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;fe.autoReplaceSvg===!1&&(fe.autoReplaceSvg=!0),fe.observeMutations=!0,$Q(function(){iX({autoReplaceSvgRoot:n}),oa("watch",e)})}},rX={icon:function(e){if(e===null)return null;if(ap(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Mo(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=Vm(e[0]);return{prefix:r,iconName:Mo(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(fe.cssPrefix,"-"))>-1||e.match(wQ))){var i=Fm(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||Ks(),iconName:Mo(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=Ks();return{prefix:s,iconName:Mo(s,e)||e}}}},mr={noAuto:tX,config:fe,dom:nX,parse:rX,library:iP,findIconDefinition:pv,toHtml:xh},iX=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?Tt:n;(Object.keys(Fr.styles).length>0||fe.autoFetchSvg)&&ts&&fe.autoReplaceSvg&&mr.dom.i2svg({node:r})};function Bm(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return xh(r)})}}),Object.defineProperty(t,"node",{get:function(){if(ts){var r=Tt.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function sX(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,o=t.transform;if(db(o)&&n.found&&!r.found){var a=n.width,l=n.height,c={x:a/l/2,y:.5};i.style=Lm(ae(ae({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function oX(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,o=s===!0?"".concat(e,"-").concat(fe.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ae(ae({},i),{},{id:o}),children:r}]}]}function gb(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,o=t.transform,a=t.symbol,l=t.title,c=t.maskId,u=t.titleId,h=t.extra,d=t.watchable,f=d===void 0?!1:d,p=r.found?r:n,m=p.width,g=p.height,_=i==="fak",v=[fe.replacementClass,s?"".concat(fe.cssPrefix,"-").concat(s):""].filter(function(k){return h.classes.indexOf(k)===-1}).filter(function(k){return k!==""||!!k}).concat(h.classes).join(" "),T={children:[],attributes:ae(ae({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:v,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},I=_&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(T.attributes[sa]=""),l&&(T.children.push({tag:"title",attributes:{id:T.attributes["aria-labelledby"]||"title-".concat(u||ju())},children:[l]}),delete T.attributes.title);var A=ae(ae({},T),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:ae(ae({},I),h.styles)}),w=r.found&&n.found?Qi("generateAbstractMask",A)||{children:[],attributes:{}}:Qi("generateAbstractIcon",A)||{children:[],attributes:{}},O=w.children,M=w.attributes;return A.children=O,A.attributes=M,a?oX(A):sX(A)}function wI(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,o=t.extra,a=t.watchable,l=a===void 0?!1:a,c=ae(ae(ae({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[sa]="");var u=ae({},o.styles);db(i)&&(u.transform=VQ({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=Lm(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function aX(t){var e=t.content,n=t.title,r=t.extra,i=ae(ae(ae({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=Lm(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var hy=Fr.styles;function mv(t){var e=t[0],n=t[1],r=t.slice(4),i=ob(r,1),s=i[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(fe.cssPrefix,"-").concat(No.GROUP)},children:[{tag:"path",attributes:{class:"".concat(fe.cssPrefix,"-").concat(No.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(fe.cssPrefix,"-").concat(No.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:o}}var lX={found:!1,width:512,height:512};function cX(t,e){!jM&&!fe.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function gv(t,e){var n=e;return e==="fa"&&fe.styleDefault!==null&&(e=Ks()),new Promise(function(r,i){if(Qi("missingIconAbstract"),n==="fa"){var s=rP(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&hy[e]&&hy[e][t]){var o=hy[e][t];return r(mv(o))}cX(t,e),r(ae(ae({},lX),{},{icon:fe.showMissingIcons&&t?Qi("missingIconAbstract")||{}:{}}))})}var SI=function(){},yv=fe.measurePerformance&&fd&&fd.mark&&fd.measure?fd:{mark:SI,measure:SI},Ic='FA "6.5.1"',uX=function(e){return yv.mark("".concat(Ic," ").concat(e," begins")),function(){return sP(e)}},sP=function(e){yv.mark("".concat(Ic," ").concat(e," ends")),yv.measure("".concat(Ic," ").concat(e),"".concat(Ic," ").concat(e," begins"),"".concat(Ic," ").concat(e," ends"))},yb={begin:uX,end:sP},Gd=function(){};function II(t){var e=t.getAttribute?t.getAttribute(sa):null;return typeof e=="string"}function hX(t){var e=t.getAttribute?t.getAttribute(lb):null,n=t.getAttribute?t.getAttribute(cb):null;return e&&n}function dX(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(fe.replacementClass)}function fX(){if(fe.autoReplaceSvg===!0)return qd.replace;var t=qd[fe.autoReplaceSvg];return t||qd.replace}function pX(t){return Tt.createElementNS("http://www.w3.org/2000/svg",t)}function mX(t){return Tt.createElement(t)}function oP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?pX:mX:n;if(typeof t=="string")return Tt.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var s=t.children||[];return s.forEach(function(o){i.appendChild(oP(o,{ceFn:r}))}),i}function gX(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var qd={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(oP(i),n)}),n.getAttribute(sa)===null&&fe.keepOriginalSource){var r=Tt.createComment(gX(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~hb(n).indexOf(fe.replacementClass))return qd.replace(e);var i=new RegExp("".concat(fe.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,l){return l===fe.replacementClass||l.match(i)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var o=r.map(function(a){return xh(a)}).join(`
`);n.setAttribute(sa,""),n.innerHTML=o}};function AI(t){t()}function aP(t,e){var n=typeof e=="function"?e:Gd;if(t.length===0)n();else{var r=AI;fe.mutateApproach===bQ&&(r=qs.requestAnimationFrame||AI),r(function(){var i=fX(),s=yb.begin("mutate");t.map(i),s(),n()})}}var _b=!1;function lP(){_b=!0}function _v(){_b=!1}var cp=null;function CI(t){if(gI&&fe.observeMutations){var e=t.treeCallback,n=e===void 0?Gd:e,r=t.nodeCallback,i=r===void 0?Gd:r,s=t.pseudoElementsCallback,o=s===void 0?Gd:s,a=t.observeMutationsRoot,l=a===void 0?Tt:a;cp=new gI(function(c){if(!_b){var u=Ks();Ql(c).forEach(function(h){if(h.type==="childList"&&h.addedNodes.length>0&&!II(h.addedNodes[0])&&(fe.searchPseudoElements&&o(h.target),n(h.target)),h.type==="attributes"&&h.target.parentNode&&fe.searchPseudoElements&&o(h.target.parentNode),h.type==="attributes"&&II(h.target)&&~CQ.indexOf(h.attributeName))if(h.attributeName==="class"&&hX(h.target)){var d=Fm(hb(h.target)),f=d.prefix,p=d.iconName;h.target.setAttribute(lb,f||u),p&&h.target.setAttribute(cb,p)}else dX(h.target)&&i(h.target)})}}),ts&&cp.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function yX(){cp&&cp.disconnect()}function _X(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function vX(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=Fm(hb(t));return i.prefix||(i.prefix=Ks()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=JQ(i.prefix,t.innerText)||pb(i.prefix,hv(t.innerText))),!i.iconName&&fe.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function bX(t){var e=Ql(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return fe.autoA11y&&(n?e["aria-labelledby"]="".concat(fe.replacementClass,"-title-").concat(r||ju()):(e["aria-hidden"]="true",e.focusable="false")),e}function EX(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ai,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function RI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=vX(t),r=n.iconName,i=n.prefix,s=n.rest,o=bX(t),a=fv("parseNodeAttributes",{},t),l=e.styleParser?_X(t):[];return ae({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:ai,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var TX=Fr.styles;function cP(t){var e=fe.autoReplaceSvg==="nest"?RI(t,{styleParser:!1}):RI(t);return~e.extra.classes.indexOf(WM)?Qi("generateLayersText",t,e):Qi("generateSvgReplacementMutation",t,e)}var Ys=new Set;ub.map(function(t){Ys.add("fa-".concat(t))});Object.keys(Uu[bt]).map(Ys.add.bind(Ys));Object.keys(Uu[Nt]).map(Ys.add.bind(Ys));Ys=Mh(Ys);function kI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ts)return Promise.resolve();var n=Tt.documentElement.classList,r=function(h){return n.add("".concat(yI,"-").concat(h))},i=function(h){return n.remove("".concat(yI,"-").concat(h))},s=fe.autoFetchSvg?Ys:ub.map(function(u){return"fa-".concat(u)}).concat(Object.keys(TX));s.includes("fa")||s.push("fa");var o=[".".concat(WM,":not([").concat(sa,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(sa,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=Ql(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();var l=yb.begin("onTree"),c=a.reduce(function(u,h){try{var d=cP(h);d&&u.push(d)}catch(f){jM||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise(function(u,h){Promise.all(c).then(function(d){aP(d,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(d){l(),h(d)})})}function wX(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;cP(t).then(function(n){n&&aP([n],e)})}function SX(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:pv(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:pv(i||{})),t(r,ae(ae({},n),{},{mask:i}))}}var IX=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?ai:r,s=n.symbol,o=s===void 0?!1:s,a=n.mask,l=a===void 0?null:a,c=n.maskId,u=c===void 0?null:c,h=n.title,d=h===void 0?null:h,f=n.titleId,p=f===void 0?null:f,m=n.classes,g=m===void 0?[]:m,_=n.attributes,v=_===void 0?{}:_,T=n.styles,I=T===void 0?{}:T;if(e){var A=e.prefix,w=e.iconName,O=e.icon;return Bm(ae({type:"icon"},e),function(){return oa("beforeDOMElementCreation",{iconDefinition:e,params:n}),fe.autoA11y&&(d?v["aria-labelledby"]="".concat(fe.replacementClass,"-title-").concat(p||ju()):(v["aria-hidden"]="true",v.focusable="false")),gb({icons:{main:mv(O),mask:l?mv(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:A,iconName:w,transform:ae(ae({},ai),i),symbol:o,title:d,maskId:u,titleId:p,extra:{attributes:v,styles:I,classes:g}})})}},AX={mixout:function(){return{icon:SX(IX)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=kI,n.nodeCallback=wX,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?Tt:r,s=n.callback,o=s===void 0?function(){}:s;return kI(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,o=r.titleId,a=r.prefix,l=r.transform,c=r.symbol,u=r.mask,h=r.maskId,d=r.extra;return new Promise(function(f,p){Promise.all([gv(i,a),u.iconName?gv(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var g=ob(m,2),_=g[0],v=g[1];f([n,gb({icons:{main:_,mask:v},prefix:a,iconName:i,transform:l,symbol:c,maskId:h,title:s,titleId:o,extra:d,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.transform,a=n.styles,l=Lm(a);l.length>0&&(i.style=l);var c;return db(o)&&(c=Qi("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),r.push(c||s.icon),{children:r,attributes:i}}}},CX={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return Bm({type:"layer"},function(){oa("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(fe.cssPrefix,"-layers")].concat(Mh(s)).join(" ")},children:o}]})}}}},RX={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,o=r.classes,a=o===void 0?[]:o,l=r.attributes,c=l===void 0?{}:l,u=r.styles,h=u===void 0?{}:u;return Bm({type:"counter",content:n},function(){return oa("beforeDOMElementCreation",{content:n,params:r}),aX({content:n.toString(),title:s,extra:{attributes:c,styles:h,classes:["".concat(fe.cssPrefix,"-layers-counter")].concat(Mh(a))}})})}}}},kX={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?ai:i,o=r.title,a=o===void 0?null:o,l=r.classes,c=l===void 0?[]:l,u=r.attributes,h=u===void 0?{}:u,d=r.styles,f=d===void 0?{}:d;return Bm({type:"text",content:n},function(){return oa("beforeDOMElementCreation",{content:n,params:r}),wI({content:n,transform:ae(ae({},ai),s),title:a,extra:{attributes:h,styles:f,classes:["".concat(fe.cssPrefix,"-layers-text")].concat(Mh(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,o=r.extra,a=null,l=null;if($M){var c=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();a=u.width/c,l=u.height/c}return fe.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([n,wI({content:n.innerHTML,width:a,height:l,transform:s,title:i,extra:o,watchable:!0})])}}},OX=new RegExp('"',"ug"),OI=[1105920,1112319];function NX(t){var e=t.replace(OX,""),n=jQ(e,0),r=n>=OI[0]&&n<=OI[1],i=e.length===2?e[0]===e[1]:!1;return{value:hv(i?e[0]:e),isSecondary:r||i}}function NI(t,e){var n="".concat(vQ).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=Ql(t.children),o=s.filter(function(O){return O.getAttribute(uv)===e})[0],a=qs.getComputedStyle(t,e),l=a.getPropertyValue("font-family").match(SQ),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return t.removeChild(o),r();if(l&&u!=="none"&&u!==""){var h=a.getPropertyValue("content"),d=~["Sharp"].indexOf(l[2])?Nt:bt,f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?$u[d][l[2].toLowerCase()]:IQ[d][c],p=NX(h),m=p.value,g=p.isSecondary,_=l[0].startsWith("FontAwesome"),v=pb(f,m),T=v;if(_){var I=QQ(m);I.iconName&&I.prefix&&(v=I.iconName,f=I.prefix)}if(v&&!g&&(!o||o.getAttribute(lb)!==f||o.getAttribute(cb)!==T)){t.setAttribute(n,T),o&&t.removeChild(o);var A=EX(),w=A.extra;w.attributes[uv]=e,gv(v,f).then(function(O){var M=gb(ae(ae({},A),{},{icons:{main:O,mask:mb()},prefix:f,iconName:T,extra:w,watchable:!0})),k=Tt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(k,t.firstChild):t.appendChild(k),k.outerHTML=M.map(function(U){return xh(U)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function MX(t){return Promise.all([NI(t,"::before"),NI(t,"::after")])}function PX(t){return t.parentNode!==document.head&&!~EQ.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(uv)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function MI(t){if(ts)return new Promise(function(e,n){var r=Ql(t.querySelectorAll("*")).filter(PX).map(MX),i=yb.begin("searchPseudoElements");lP(),Promise.all(r).then(function(){i(),_v(),e()}).catch(function(){i(),_v(),n()})})}var xX={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=MI,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?Tt:r;fe.searchPseudoElements&&MI(i)}}},PI=!1,DX={mixout:function(){return{dom:{unwatch:function(){lP(),PI=!0}}}},hooks:function(){return{bootstrap:function(){CI(fv("mutationObserverCallbacks",{}))},noAuto:function(){yX()},watch:function(n){var r=n.observeMutationsRoot;PI?_v():CI(fv("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},xI=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return r.flipX=!0,r;if(o&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(o){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},LX={mixout:function(){return{parse:{transform:function(n){return xI(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=xI(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,o=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),c="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),h={transform:"".concat(l," ").concat(c," ").concat(u)},d={transform:"translate(".concat(o/2*-1," -256)")},f={outer:a,inner:h,path:d};return{tag:"g",attributes:ae({},f.outer),children:[{tag:"g",attributes:ae({},f.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ae(ae({},r.icon.attributes),f.path)}]}]}}}},dy={x:0,y:0,width:"100%",height:"100%"};function DI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function VX(t){return t.tag==="g"?t.children:[t]}var FX={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?Fm(i.split(" ").map(function(o){return o.trim()})):mb();return s.prefix||(s.prefix=Ks()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.mask,a=n.maskId,l=n.transform,c=s.width,u=s.icon,h=o.width,d=o.icon,f=LQ({transform:l,containerWidth:h,iconWidth:c}),p={tag:"rect",attributes:ae(ae({},dy),{},{fill:"white"})},m=u.children?{children:u.children.map(DI)}:{},g={tag:"g",attributes:ae({},f.inner),children:[DI(ae({tag:u.tag,attributes:ae(ae({},u.attributes),f.path)},m))]},_={tag:"g",attributes:ae({},f.outer),children:[g]},v="mask-".concat(a||ju()),T="clip-".concat(a||ju()),I={tag:"mask",attributes:ae(ae({},dy),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,_]},A={tag:"defs",children:[{tag:"clipPath",attributes:{id:T},children:VX(d)},I]};return r.push(A,{tag:"rect",attributes:ae({fill:"currentColor","clip-path":"url(#".concat(T,")"),mask:"url(#".concat(v,")")},dy)}),{children:r,attributes:i}}}},BX={provides:function(e){var n=!1;qs.matchMedia&&(n=qs.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:ae(ae({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=ae(ae({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:ae(ae({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:ae(ae({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ae(ae({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:ae(ae({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:ae(ae({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ae(ae({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},UX={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},$X=[BQ,AX,CX,RX,kX,xX,DX,LX,FX,BX,UX];eX($X,{mixoutsTo:mr});mr.noAuto;mr.config;var qe=mr.library;mr.dom;var vv=mr.parse;mr.findIconDefinition;mr.toHtml;var HX=mr.icon;mr.layer;mr.text;mr.counter;var zX={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},jX={prefix:"fas",iconName:"users-rectangle",icon:[640,512,[],"e594","M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H544c53 0 96-43 96-96V96c0-53-43-96-96-96H96zM64 96c0-17.7 14.3-32 32-32H544c17.7 0 32 14.3 32 32V416c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V96zm159.8 80a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM96 309.3c0 14.7 11.9 26.7 26.7 26.7h56.1c8-34.1 32.8-61.7 65.2-73.6c-7.5-4.1-16.2-6.4-25.3-6.4H149.3C119.9 256 96 279.9 96 309.3zM461.2 336h56.1c14.7 0 26.7-11.9 26.7-26.7c0-29.5-23.9-53.3-53.3-53.3H421.3c-9.2 0-17.8 2.3-25.3 6.4c32.4 11.9 57.2 39.5 65.2 73.6zM372 289c-3.9-.7-7.9-1-12-1H280c-4.1 0-8.1 .3-12 1c-26 4.4-47.3 22.7-55.9 47c-2.7 7.5-4.1 15.6-4.1 24c0 13.3 10.7 24 24 24H408c13.3 0 24-10.7 24-24c0-8.4-1.4-16.5-4.1-24c-8.6-24.3-29.9-42.6-55.9-47zM512 176a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM320 256a64 64 0 1 0 0-128 64 64 0 1 0 0 128z"]},WX={prefix:"fas",iconName:"spaghetti-monster-flying",icon:[640,512,["pastafarianism"],"f67b","M208 64a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 0c0 16.2-6 31.1-16 42.3l15.6 31.2c18.7-6 39.9-9.5 64.4-9.5s45.8 3.5 64.4 9.5L400 106.3C390 95.1 384 80.2 384 64c0-35.3 28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64c-1.7 0-3.4-.1-5.1-.2L427.8 158c21.1 13.6 37.7 30.2 51.4 46.4c7.1 8.3 13.5 16.6 19.3 24l1.4 1.8c6.3 8.1 11.6 14.8 16.7 20.4C527.3 262.3 532.7 264 536 264c2.5 0 4.3-.6 7.1-3.3c3.7-3.5 7.1-8.8 12.5-17.4l.6-.9c4.6-7.4 11-17.6 19.4-25.7c9.7-9.3 22.9-16.7 40.4-16.7c13.3 0 24 10.7 24 24s-10.7 24-24 24c-2.5 0-4.3 .6-7.1 3.3c-3.7 3.5-7.1 8.8-12.5 17.4l-.6 .9c-4.6 7.4-11 17.6-19.4 25.7c-9.7 9.3-22.9 16.7-40.4 16.7c-18.5 0-32.9-8.5-44.3-18.6c-3.1 4-6.6 8.3-10.5 12.7c1.4 4.3 2.8 8.5 4 12.5c.9 3 1.8 5.8 2.6 8.6c3 9.8 5.5 18.2 8.6 25.9c3.9 9.8 7.4 15.4 10.8 18.5c2.6 2.4 5.9 4.3 12.8 4.3c8.7 0 16.9-4.2 33.7-13.2c15-8 35.7-18.8 62.3-18.8c13.3 0 24 10.7 24 24s-10.7 24-24 24c-13.4 0-24.7 5.2-39.7 13.2c-1 .6-2.1 1.1-3.2 1.7C559.9 414 541.4 424 520 424c-18.4 0-33.6-6.1-45.5-17.2c-11.1-10.3-17.9-23.7-22.7-36c-3.6-9-6.7-19.1-9.5-28.5c-16.4 12.3-36.1 23.6-58.9 31.3c3.6 10.8 8.4 23.5 14.4 36.2c7.5 15.9 16.2 30.4 25.8 40.5C433 460.5 441.2 464 448 464c13.3 0 24 10.7 24 24s-10.7 24-24 24c-25.2 0-45-13.5-59.5-28.8c-14.5-15.4-25.7-34.9-34.2-53c-8-17-14.1-33.8-18.3-46.9c-5.2 .4-10.6 .6-16 .6s-10.8-.2-16-.6c-4.2 13-10.3 29.9-18.3 46.9c-8.5 18.1-19.8 37.6-34.2 53C237 498.5 217.2 512 192 512c-13.3 0-24-10.7-24-24s10.7-24 24-24c6.8 0 15-3.5 24.5-13.7c9.5-10.1 18.3-24.6 25.8-40.5c5.9-12.6 10.7-25.4 14.4-36.2c-22.8-7.7-42.5-19-58.9-31.3c-2.9 9.4-6 19.5-9.5 28.5c-4.8 12.2-11.6 25.6-22.7 36C153.6 417.9 138.4 424 120 424c-21.4 0-39.9-10-53.1-17.1l0 0c-1.1-.6-2.2-1.2-3.2-1.7c-15-8-26.3-13.2-39.7-13.2c-13.3 0-24-10.7-24-24s10.7-24 24-24c26.6 0 47.3 10.8 62.3 18.8c16.8 9 25 13.2 33.7 13.2c6.8 0 10.2-1.9 12.8-4.3c3.4-3.2 7-8.8 10.8-18.5c3-7.7 5.6-16.1 8.6-25.9c.8-2.7 1.7-5.6 2.6-8.6c1.2-4 2.6-8.2 4-12.5c-3.9-4.5-7.4-8.8-10.5-12.7C136.9 303.5 122.5 312 104 312c-17.5 0-30.7-7.4-40.4-16.7c-8.4-8.1-14.8-18.3-19.4-25.7l-.6-.9c-5.4-8.6-8.8-13.9-12.5-17.4c-2.8-2.7-4.6-3.3-7.1-3.3c-13.3 0-24-10.7-24-24s10.7-24 24-24c17.5 0 30.7 7.4 40.4 16.7c8.4 8.1 14.8 18.3 19.4 25.7l.6 .9c5.4 8.6 8.8 13.9 12.5 17.4c2.8 2.7 4.6 3.3 7.1 3.3c3.3 0 8.7-1.7 19.4-13.4c5.1-5.6 10.4-12.3 16.7-20.4l1.4-1.8c5.8-7.4 12.2-15.7 19.3-24c13.8-16.2 30.3-32.8 51.4-46.4l-15.1-30.2c-1.7 .1-3.4 .2-5.1 .2c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64zm208 0a16 16 0 1 0 -32 0 16 16 0 1 0 32 0z"]},GX={prefix:"fas",iconName:"spoon",icon:[512,512,[129348,61873,"utensil-spoon"],"f2e5","M245.8 220.9c-14.5-17.6-21.8-39.2-21.8-60.8C224 80 320 0 416 0c53 0 96 43 96 96c0 96-80 192-160.2 192c-21.6 0-43.2-7.3-60.8-21.8L54.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L245.8 220.9z"]},qX={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]},KX={prefix:"fas",iconName:"paw",icon:[512,512,[],"f1b0","M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5s.3-86.2 32.6-96.8s70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3S-2.7 179.3 21.8 165.3s59.7 .9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7c-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2C84.9 480 64 459.1 64 433.3v-1.6c0-10.4 1.6-20.8 5.2-30.5zM421.8 282.7c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3s29.1 51.7 10.2 84.1s-54 47.3-78.5 33.3zM310.1 189.7c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5s46.9 53.9 32.6 96.8s-52.1 69.1-84.4 58.5z"]},YX={prefix:"fas",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},JX={prefix:"fas",iconName:"ghost",icon:[384,512,[128123],"f6e2","M40.1 467.1l-11.2 9c-3.2 2.5-7.1 3.9-11.1 3.9C8 480 0 472 0 462.2V192C0 86 86 0 192 0S384 86 384 192V462.2c0 9.8-8 17.8-17.8 17.8c-4 0-7.9-1.4-11.1-3.9l-11.2-9c-13.4-10.7-32.8-9-44.1 3.9L269.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6l-26.6-30.5c-12.7-14.6-35.4-14.6-48.2 0L141.3 506c-3.3 3.8-8.2 6-13.3 6s-9.9-2.2-13.3-6L84.2 471c-11.3-12.9-30.7-14.6-44.1-3.9zM160 192a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},QX={prefix:"fas",iconName:"tree",icon:[448,512,[127794],"f1bb","M210.6 5.9L62 169.4c-3.9 4.2-6 9.8-6 15.5C56 197.7 66.3 208 79.1 208H104L30.6 281.4c-4.2 4.2-6.6 10-6.6 16C24 309.9 34.1 320 46.6 320H80L5.4 409.5C1.9 413.7 0 419 0 424.5c0 13 10.5 23.5 23.5 23.5H192v32c0 17.7 14.3 32 32 32s32-14.3 32-32V448H424.5c13 0 23.5-10.5 23.5-23.5c0-5.5-1.9-10.8-5.4-15L368 320h33.4c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16L344 208h24.9c12.7 0 23.1-10.3 23.1-23.1c0-5.7-2.1-11.3-6-15.5L237.4 5.9C234 2.1 229.1 0 224 0s-10 2.1-13.4 5.9z"]},XX={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},ZX={prefix:"fas",iconName:"shapes",icon:[512,512,["triangle-circle-square"],"f61f","M315.4 15.5C309.7 5.9 299.2 0 288 0s-21.7 5.9-27.4 15.5l-96 160c-5.9 9.9-6.1 22.2-.4 32.2s16.3 16.2 27.8 16.2H384c11.5 0 22.2-6.2 27.8-16.2s5.5-22.3-.4-32.2l-96-160zM288 312V456c0 22.1 17.9 40 40 40H472c22.1 0 40-17.9 40-40V312c0-22.1-17.9-40-40-40H328c-22.1 0-40 17.9-40 40zM128 512a128 128 0 1 0 0-256 128 128 0 1 0 0 256z"]},eZ={prefix:"fas",iconName:"right-to-bracket",icon:[512,512,["sign-in-alt"],"f2f6","M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},tZ={prefix:"fas",iconName:"user-group",icon:[640,512,[128101,"user-friends"],"f500","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM609.3 512H471.4c5.4-9.4 8.6-20.3 8.6-32v-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2h61.4C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"]},nZ={prefix:"fas",iconName:"fire",icon:[448,512,[128293],"f06d","M159.3 5.4c7.8-7.3 19.9-7.2 27.7 .1c27.6 25.9 53.5 53.8 77.7 84c11-14.4 23.5-30.1 37-42.9c7.9-7.4 20.1-7.4 28 .1c34.6 33 63.9 76.6 84.5 118c20.3 40.8 33.8 82.5 33.8 111.9C448 404.2 348.2 512 224 512C98.4 512 0 404.1 0 276.5c0-38.4 17.8-85.3 45.4-131.7C73.3 97.7 112.7 48.6 159.3 5.4zM225.7 416c25.3 0 47.7-7 68.8-21c42.1-29.4 53.4-88.2 28.1-134.4c-4.5-9-16-9.6-22.5-2l-25.2 29.3c-6.6 7.6-18.5 7.4-24.7-.5c-16.5-21-46-58.5-62.8-79.8c-6.3-8-18.3-8.1-24.7-.1c-33.8 42.5-50.8 69.3-50.8 99.4C112 375.4 162.6 416 225.7 416z"]},rZ={prefix:"fas",iconName:"eye-low-vision",icon:[640,512,["low-vision"],"f2a8","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223 149.5c48.6-44.3 123-50.8 179.3-11.7c60.8 42.4 78.9 123.2 44.2 186.9L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3L223 149.5zm-139.9 12c-11 14.4-20.5 28.7-28.4 42.2l339 265.7c18.7-5.5 36.2-13 52.6-21.8L83.1 161.5zm-50 86.3c-1.8 6.8-1.3 14 1.4 20.5c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c3.1 0 6.1-.1 9.2-.2L33.1 247.8z"]},iZ={prefix:"fas",iconName:"crow",icon:[640,512,[],"f520","M456 0c-48.6 0-88 39.4-88 88v29.2L12.5 390.6c-14 10.8-16.6 30.9-5.9 44.9s30.9 16.6 44.9 5.9L126.1 384H259.2l46.6 113.1c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3L311.1 384H352c1.1 0 2.1 0 3.2 0l46.6 113.2c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3l-42-102C484.9 354.1 544 280 544 192V128v-8l80.5-20.1c8.6-2.1 13.8-10.8 11.6-19.4C629 52 603.4 32 574 32H523.9C507.7 12.5 483.3 0 456 0zm0 64a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"]},sZ={prefix:"fas",iconName:"frog",icon:[576,512,[],"f52e","M368 32c41.7 0 75.9 31.8 79.7 72.5l85.6 26.3c25.4 7.8 42.8 31.3 42.8 57.9c0 21.8-11.7 41.9-30.7 52.7L400.8 323.5 493.3 416H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H480c-8.5 0-16.6-3.4-22.6-9.4L346.9 360.2c11.7-36 3.2-77.1-25.4-105.7c-40.6-40.6-106.3-40.6-146.9-.1L101 324.4c-6.4 6.1-6.7 16.2-.6 22.6s16.2 6.6 22.6 .6l73.8-70.2 .1-.1 .1-.1c3.5-3.5 7.3-6.6 11.3-9.2c27.9-18.5 65.9-15.4 90.5 9.2c24.7 24.7 27.7 62.9 9 90.9c-2.6 3.8-5.6 7.5-9 10.9L261.8 416H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H64c-35.3 0-64-28.7-64-64C0 249.6 127 112.9 289.3 97.5C296.2 60.2 328.8 32 368 32zm0 104a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},oZ={prefix:"fas",iconName:"feather-pointed",icon:[512,512,["feather-alt"],"f56b","M278.5 215.6L23 471c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l74.8-74.8c7.4 4.6 15.3 8.2 23.8 10.5C200.3 452.8 270 454.5 338 409.4c12.2-8.1 5.8-25.4-8.8-25.4l-16.1 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l97.7-29.3c3.4-1 6.4-3.1 8.4-6.1c4.4-6.4 8.6-12.9 12.6-19.6c6.2-10.3-1.5-23-13.5-23l-38.6 0c-5.1 0-9.2-4.1-9.2-9.2c0-4.1 2.7-7.6 6.5-8.8l80.9-24.3c4.6-1.4 8.4-4.8 10.2-9.3C494.5 163 507.8 86.1 511.9 36.8c.8-9.9-3-19.6-10-26.6s-16.7-10.8-26.6-10C391.5 7 228.5 40.5 137.4 131.6C57.3 211.7 56.7 302.3 71.3 356.4c2.1 7.9 12 9.6 17.8 3.8L253.6 195.8c6.2-6.2 16.4-6.2 22.6 0c5.4 5.4 6.1 13.6 2.2 19.8z"]},aZ={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},lZ={prefix:"fas",iconName:"hat-cowboy",icon:[640,512,[],"f8c0","M320 64c14.4 0 22.3-7 30.8-14.4C360.4 41.1 370.7 32 392 32c49.3 0 84.4 152.2 97.9 221.9C447.8 272.1 390.9 288 320 288s-127.8-15.9-169.9-34.1C163.6 184.2 198.7 32 248 32c21.3 0 31.6 9.1 41.2 17.6C297.7 57 305.6 64 320 64zM111.1 270.7c47.2 24.5 117.5 49.3 209 49.3s161.8-24.8 208.9-49.3c24.8-12.9 49.8-28.3 70.1-47.7c7.9-7.9 20.2-9.2 29.6-3.3c9.5 5.9 13.5 17.9 9.9 28.5c-13.5 37.7-38.4 72.3-66.1 100.6C523.7 398.9 443.6 448 320 448s-203.6-49.1-252.5-99.2C39.8 320.4 14.9 285.8 1.4 248.1c-3.6-10.6 .4-22.6 9.9-28.5c9.5-5.9 21.7-4.5 29.6 3.3c20.4 19.4 45.3 34.8 70.1 47.7z"]},cZ={prefix:"fas",iconName:"cat",icon:[576,512,[128008],"f6be","M320 192h17.1c22.1 38.3 63.5 64 110.9 64c11 0 21.8-1.4 32-4v4 32V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V339.2L280 448h56c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-53 0-96-43-96-96V192.5c0-16.1-12-29.8-28-31.8l-7.9-1c-17.5-2.2-30-18.2-27.8-35.7s18.2-30 35.7-27.8l7.9 1c48 6 84.1 46.8 84.1 95.3v85.3c34.4-51.7 93.2-85.8 160-85.8zm160 26.5v0c-10 3.5-20.8 5.5-32 5.5c-28.4 0-54-12.4-71.6-32h0c-3.7-4.1-7-8.5-9.9-13.2C357.3 164 352 146.6 352 128v0V32 12 10.7C352 4.8 356.7 .1 362.6 0h.2c3.3 0 6.4 1.6 8.4 4.2l0 .1L384 21.3l27.2 36.3L416 64h64l4.8-6.4L512 21.3 524.8 4.3l0-.1c2-2.6 5.1-4.2 8.4-4.2h.2C539.3 .1 544 4.8 544 10.7V12 32v96c0 17.3-4.6 33.6-12.6 47.6c-11.3 19.8-29.6 35.2-51.4 42.9zM432 128a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},uZ={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},hZ={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]},dZ={prefix:"fas",iconName:"hat-wizard",icon:[512,512,[],"f6e8","M64 416L168.6 180.7c15.3-34.4 40.3-63.5 72-83.7l146.9-94c3-1.9 6.5-2.9 10-2.9C407.7 0 416 8.3 416 18.6v1.6c0 2.6-.5 5.1-1.4 7.5L354.8 176.9c-1.9 4.7-2.8 9.7-2.8 14.7c0 5.5 1.2 11 3.4 16.1L448 416H240.9l11.8-35.4 40.4-13.5c6.5-2.2 10.9-8.3 10.9-15.2s-4.4-13-10.9-15.2l-40.4-13.5-13.5-40.4C237 276.4 230.9 272 224 272s-13 4.4-15.2 10.9l-13.5 40.4-40.4 13.5C148.4 339 144 345.1 144 352s4.4 13 10.9 15.2l40.4 13.5L207.1 416H64zM279.6 141.5c-1.1-3.3-4.1-5.5-7.6-5.5s-6.5 2.2-7.6 5.5l-6.7 20.2-20.2 6.7c-3.3 1.1-5.5 4.1-5.5 7.6s2.2 6.5 5.5 7.6l20.2 6.7 6.7 20.2c1.1 3.3 4.1 5.5 7.6 5.5s6.5-2.2 7.6-5.5l6.7-20.2 20.2-6.7c3.3-1.1 5.5-4.1 5.5-7.6s-2.2-6.5-5.5-7.6l-20.2-6.7-6.7-20.2zM32 448H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},fZ={prefix:"fas",iconName:"table-cells-large",icon:[512,512,["th-large"],"f009","M448 96V224H288V96H448zm0 192V416H288V288H448zM224 224H64V96H224V224zM64 288H224V416H64V288zM64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64z"]},pZ={prefix:"fas",iconName:"dove",icon:[512,512,[128330],"f4ba","M160.8 96.5c14 17 31 30.9 49.5 42.2c25.9 15.8 53.7 25.9 77.7 31.6V138.8C265.8 108.5 250 71.5 248.6 28c-.4-11.3-7.5-21.5-18.4-24.4c-7.6-2-15.8-.2-21 5.8c-13.3 15.4-32.7 44.6-48.4 87.2zM320 144v30.6l0 0v1.3l0 0 0 32.1c-60.8-5.1-185-43.8-219.3-157.2C97.4 40 87.9 32 76.6 32c-7.9 0-15.3 3.9-18.8 11C46.8 65.9 32 112.1 32 176c0 116.9 80.1 180.5 118.4 202.8L11.8 416.6C6.7 418 2.6 421.8 .9 426.8s-.8 10.6 2.3 14.8C21.7 466.2 77.3 512 160 512c3.6 0 7.2-1.2 10-3.5L245.6 448H320c88.4 0 160-71.6 160-160V128l29.9-44.9c1.3-2 2.1-4.4 2.1-6.8c0-6.8-5.5-12.3-12.3-12.3H400c-44.2 0-80 35.8-80 80zm80-16a16 16 0 1 1 0 32 16 16 0 1 1 0-32z"]},mZ={prefix:"fas",iconName:"list-ul",icon:[512,512,["list-dots"],"f0ca","M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"]},gZ={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},yZ={prefix:"fas",iconName:"users-line",icon:[640,512,[],"e592","M211.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM32 256c0 17.7 14.3 32 32 32h85.6c10.1-39.4 38.6-71.5 75.8-86.6c-9.7-6-21.2-9.4-33.4-9.4H96c-35.3 0-64 28.7-64 64zm461.6 32H576c17.7 0 32-14.3 32-32c0-35.3-28.7-64-64-64H448c-11.7 0-22.7 3.1-32.1 8.6c38.1 14.8 67.4 47.3 77.7 87.4zM391.2 226.4c-6.9-1.6-14.2-2.4-21.6-2.4h-96c-8.5 0-16.7 1.1-24.5 3.1c-30.8 8.1-55.6 31.1-66.1 60.9c-3.5 10-5.5 20.8-5.5 32c0 17.7 14.3 32 32 32h224c17.7 0 32-14.3 32-32c0-11.2-1.9-22-5.5-32c-10.8-30.7-36.8-54.2-68.9-61.6zM563.2 96a64 64 0 1 0 -128 0 64 64 0 1 0 128 0zM321.6 192a80 80 0 1 0 0-160 80 80 0 1 0 0 160zM32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32H608c17.7 0 32-14.3 32-32s-14.3-32-32-32H32z"]},_Z={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2v82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9V380.8c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},vZ={prefix:"fas",iconName:"disease",icon:[512,512,[],"f7fa","M236.4 61.4L227 75.5c-21.3 32-59.4 48.5-97.3 42.1l-59.6-9.9C33.4 101.6 0 129.9 .1 167.1c0 15.9 6.4 31.2 17.6 42.5l29.2 29.2c11 11 17.2 25.9 17.2 41.5c0 15.8-6.4 30.9-17.7 42L33.3 335.1C22.2 345.9 16 360.7 16 376.2c0 36.8 34.1 64.2 70.1 56.2l62.3-13.8c7.7-1.7 15.7-2.6 23.6-2.6h10c27.2 0 53.7 9.3 75 26.3L287.8 467c10.5 8.4 23.6 13 37 13c32.7 0 59.3-26.5 59.3-59.3l0-25.2c0-34.9 21.4-66.2 53.9-78.8l36.9-14.3c22.4-8.7 37.2-30.3 37.2-54.3c0-28.1-20.1-52.3-47.8-57.3l-28-5.1c-36.5-6.7-65.4-34.5-73.6-70.7l-7.1-31.5C348.9 53.4 322.1 32 291.3 32c-22 0-42.6 11-54.9 29.4zM160 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 16a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zm0 80a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},bZ={prefix:"fas",iconName:"shield",icon:[512,512,[128737,"shield-blank"],"f132","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0z"]},EZ={prefix:"fas",iconName:"hippo",icon:[640,512,[129435],"f6ed","M407 47c9.4-9.4 24.6-9.4 33.9 0l17.2 17.2c1.9-.1 3.9-.2 5.8-.2h32c11.2 0 21.9 2.3 31.6 6.5L543 55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9L564 101.9c7.6 12.2 12 26.7 12 42.1c0 10.2 7.4 18.8 16.7 23c27.9 12.5 47.3 40.5 47.3 73c0 26.2-12.6 49.4-32 64v32c0 8.8-7.2 16-16 16H560c-8.8 0-16-7.2-16-16V320H480v16c0 8.8-7.2 16-16 16H432c-8.8 0-16-7.2-16-16V318.4c-11.8-2.4-22.7-7.4-32-14.4c-1.5-1.1-2.9-2.3-4.3-3.5c-17-14.7-27.7-36.4-27.7-60.5c0-8.8-7.2-16-16-16s-16 7.2-16 16c0 44.7 26.2 83.2 64 101.2V352c0 17.7 14.3 32 32 32h32v64c0 17.7-14.3 32-32 32H352c-17.7 0-32-14.3-32-32V372c-19.8 7.7-41.4 12-64 12s-44.2-4.3-64-12v76c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V329.1L45.9 369.7c-5.4 12.1-19.6 17.6-31.7 12.2S-3.3 362.4 2.1 350.3L24 300.9c5.3-11.9 8-24.7 8-37.7C32 155.7 117.2 68 223.8 64.1l.2-.1h7.2H256h32c41.7 0 83.4 12.1 117.2 25.7c1.7-1.8 3.5-3.6 5.3-5.2L407 81c-9.4-9.4-9.4-24.6 0-33.9zm73 185a24 24 0 1 0 -48 0 24 24 0 1 0 48 0zm88 24a24 24 0 1 0 0-48 24 24 0 1 0 0 48zM480 144a16 16 0 1 0 -32 0 16 16 0 1 0 32 0zm48 16a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"]},TZ={prefix:"fas",iconName:"hand-fist",icon:[448,512,[9994,"fist-raised"],"f6de","M192 0c17.7 0 32 14.3 32 32V144H160V32c0-17.7 14.3-32 32-32zM64 64c0-17.7 14.3-32 32-32s32 14.3 32 32v80H64V64zm192 0c0-17.7 14.3-32 32-32s32 14.3 32 32v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V64zm96 64c0-17.7 14.3-32 32-32s32 14.3 32 32v64c0 17.7-14.3 32-32 32s-32-14.3-32-32V128zm-96 88l0-.6c9.4 5.4 20.3 8.6 32 8.6c13.2 0 25.4-4 35.6-10.8c8.7 24.9 32.5 42.8 60.4 42.8c11.7 0 22.6-3.1 32-8.6V256c0 52.3-25.1 98.8-64 128v96c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V401.6c-17.3-7.9-33.2-18.8-46.9-32.5L69.5 357.5C45.5 333.5 32 300.9 32 267V240c0-35.3 28.7-64 64-64h88c22.1 0 40 17.9 40 40s-17.9 40-40 40H128c-8.8 0-16 7.2-16 16s7.2 16 16 16h56c39.8 0 72-32.2 72-72z"]},wZ={prefix:"fas",iconName:"users-gear",icon:[640,512,["users-cog"],"f509","M144 160A80 80 0 1 0 144 0a80 80 0 1 0 0 160zm368 0A80 80 0 1 0 512 0a80 80 0 1 0 0 160zM0 298.7C0 310.4 9.6 320 21.3 320H234.7c.2 0 .4 0 .7 0c-26.6-23.5-43.3-57.8-43.3-96c0-7.6 .7-15 1.9-22.3c-13.6-6.3-28.7-9.7-44.6-9.7H106.7C47.8 192 0 239.8 0 298.7zM320 320c24 0 45.9-8.8 62.7-23.3c2.5-3.7 5.2-7.3 8-10.7c2.7-3.3 5.7-6.1 9-8.3C410 262.3 416 243.9 416 224c0-53-43-96-96-96s-96 43-96 96s43 96 96 96zm65.4 60.2c-10.3-5.9-18.1-16.2-20.8-28.2H261.3C187.7 352 128 411.7 128 485.3c0 14.7 11.9 26.7 26.7 26.7H455.2c-2.1-5.2-3.2-10.9-3.2-16.4v-3c-1.3-.7-2.7-1.5-4-2.3l-2.6 1.5c-16.8 9.7-40.5 8-54.7-9.7c-4.5-5.6-8.6-11.5-12.4-17.6l-.1-.2-.1-.2-2.4-4.1-.1-.2-.1-.2c-3.4-6.2-6.4-12.6-9-19.3c-8.2-21.2 2.2-42.6 19-52.3l2.7-1.5c0-.8 0-1.5 0-2.3s0-1.5 0-2.3l-2.7-1.5zM533.3 192H490.7c-15.9 0-31 3.5-44.6 9.7c1.3 7.2 1.9 14.7 1.9 22.3c0 17.4-3.5 33.9-9.7 49c2.5 .9 4.9 2 7.1 3.3l2.6 1.5c1.3-.8 2.6-1.6 4-2.3v-3c0-19.4 13.3-39.1 35.8-42.6c7.9-1.2 16-1.9 24.2-1.9s16.3 .6 24.2 1.9c22.5 3.5 35.8 23.2 35.8 42.6v3c1.3 .7 2.7 1.5 4 2.3l2.6-1.5c16.8-9.7 40.5-8 54.7 9.7c2.3 2.8 4.5 5.8 6.6 8.7c-2.1-57.1-49-102.7-106.6-102.7zm91.3 163.9c6.3-3.6 9.5-11.1 6.8-18c-2.1-5.5-4.6-10.8-7.4-15.9l-2.3-4c-3.1-5.1-6.5-9.9-10.2-14.5c-4.6-5.7-12.7-6.7-19-3l-2.9 1.7c-9.2 5.3-20.4 4-29.6-1.3s-16.1-14.5-16.1-25.1v-3.4c0-7.3-4.9-13.8-12.1-14.9c-6.5-1-13.1-1.5-19.9-1.5s-13.4 .5-19.9 1.5c-7.2 1.1-12.1 7.6-12.1 14.9v3.4c0 10.6-6.9 19.8-16.1 25.1s-20.4 6.6-29.6 1.3l-2.9-1.7c-6.3-3.6-14.4-2.6-19 3c-3.7 4.6-7.1 9.5-10.2 14.6l-2.3 3.9c-2.8 5.1-5.3 10.4-7.4 15.9c-2.6 6.8 .5 14.3 6.8 17.9l2.9 1.7c9.2 5.3 13.7 15.8 13.7 26.4s-4.5 21.1-13.7 26.4l-3 1.7c-6.3 3.6-9.5 11.1-6.8 17.9c2.1 5.5 4.6 10.7 7.4 15.8l2.4 4.1c3 5.1 6.4 9.9 10.1 14.5c4.6 5.7 12.7 6.7 19 3l2.9-1.7c9.2-5.3 20.4-4 29.6 1.3s16.1 14.5 16.1 25.1v3.4c0 7.3 4.9 13.8 12.1 14.9c6.5 1 13.1 1.5 19.9 1.5s13.4-.5 19.9-1.5c7.2-1.1 12.1-7.6 12.1-14.9v-3.4c0-10.6 6.9-19.8 16.1-25.1s20.4-6.6 29.6-1.3l2.9 1.7c6.3 3.6 14.4 2.6 19-3c3.7-4.6 7.1-9.4 10.1-14.5l2.4-4.2c2.8-5.1 5.3-10.3 7.4-15.8c2.6-6.8-.5-14.3-6.8-17.9l-3-1.7c-9.2-5.3-13.7-15.8-13.7-26.4s4.5-21.1 13.7-26.4l3-1.7zM472 384a40 40 0 1 1 80 0 40 40 0 1 1 -80 0z"]};function LI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LI(Object(n),!0).forEach(function(r){qn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function up(t){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},up(t)}function qn(t,e,n){return e=CZ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IZ(t,e){if(t==null)return{};var n=SZ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AZ(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CZ(t){var e=AZ(t,"string");return typeof e=="symbol"?e:String(e)}var RZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uP={exports:{}};(function(t){(function(e){var n=function(_,v,T){if(!c(v)||h(v)||d(v)||f(v)||l(v))return v;var I,A=0,w=0;if(u(v))for(I=[],w=v.length;A<w;A++)I.push(n(_,v[A],T));else{I={};for(var O in v)Object.prototype.hasOwnProperty.call(v,O)&&(I[_(O,T)]=n(_,v[O],T))}return I},r=function(_,v){v=v||{};var T=v.separator||"_",I=v.split||/(?=[A-Z])/;return _.split(I).join(T)},i=function(_){return p(_)?_:(_=_.replace(/[\-_\s]+(.)?/g,function(v,T){return T?T.toUpperCase():""}),_.substr(0,1).toLowerCase()+_.substr(1))},s=function(_){var v=i(_);return v.substr(0,1).toUpperCase()+v.substr(1)},o=function(_,v){return r(_,v).toLowerCase()},a=Object.prototype.toString,l=function(_){return typeof _=="function"},c=function(_){return _===Object(_)},u=function(_){return a.call(_)=="[object Array]"},h=function(_){return a.call(_)=="[object Date]"},d=function(_){return a.call(_)=="[object RegExp]"},f=function(_){return a.call(_)=="[object Boolean]"},p=function(_){return _=_-0,_===_},m=function(_,v){var T=v&&"process"in v?v.process:v;return typeof T!="function"?_:function(I,A){return T(I,_,A)}},g={camelize:i,decamelize:o,pascalize:s,depascalize:o,camelizeKeys:function(_,v){return n(m(i,v),_)},decamelizeKeys:function(_,v){return n(m(o,v),_,v)},pascalizeKeys:function(_,v){return n(m(s,v),_)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};t.exports?t.exports=g:e.humps=g})(RZ)})(uP);var kZ=uP.exports,OZ=["class","style"];function NZ(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=kZ.camelize(n.slice(0,r)),s=n.slice(r+1).trim();return e[i]=s,e},{})}function MZ(t){return t.split(/\s+/).reduce(function(e,n){return e[n]=!0,e},{})}function hP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string")return t;var r=(t.children||[]).map(function(l){return hP(l)}),i=Object.keys(t.attributes||{}).reduce(function(l,c){var u=t.attributes[c];switch(c){case"class":l.class=MZ(u);break;case"style":l.style=NZ(u);break;default:l.attrs[c]=u}return l},{attrs:{},class:{},style:{}});n.class;var s=n.style,o=s===void 0?{}:s,a=IZ(n,OZ);return Lo(t.tag,xi(xi(xi({},e),{},{class:i.class,style:xi(xi({},i.style),o)},i.attrs),a),r)}var dP=!1;try{dP=!0}catch{}function PZ(){if(!dP&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function fy(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?qn({},t,e):{}}function xZ(t){var e,n=(e={"fa-spin":t.spin,"fa-pulse":t.pulse,"fa-fw":t.fixedWidth,"fa-border":t.border,"fa-li":t.listItem,"fa-inverse":t.inverse,"fa-flip":t.flip===!0,"fa-flip-horizontal":t.flip==="horizontal"||t.flip==="both","fa-flip-vertical":t.flip==="vertical"||t.flip==="both"},qn(e,"fa-".concat(t.size),t.size!==null),qn(e,"fa-rotate-".concat(t.rotation),t.rotation!==null),qn(e,"fa-pull-".concat(t.pull),t.pull!==null),qn(e,"fa-swap-opacity",t.swapOpacity),qn(e,"fa-bounce",t.bounce),qn(e,"fa-shake",t.shake),qn(e,"fa-beat",t.beat),qn(e,"fa-fade",t.fade),qn(e,"fa-beat-fade",t.beatFade),qn(e,"fa-flash",t.flash),qn(e,"fa-spin-pulse",t.spinPulse),qn(e,"fa-spin-reverse",t.spinReverse),e);return Object.keys(n).map(function(r){return n[r]?r:null}).filter(function(r){return r})}function VI(t){if(t&&up(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(vv.icon)return vv.icon(t);if(t===null)return null;if(up(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}var DZ=Cr({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,n){var r=n.attrs,i=Pt(function(){return VI(e.icon)}),s=Pt(function(){return fy("classes",xZ(e))}),o=Pt(function(){return fy("transform",typeof e.transform=="string"?vv.transform(e.transform):e.transform)}),a=Pt(function(){return fy("mask",VI(e.mask))}),l=Pt(function(){return HX(i.value,xi(xi(xi(xi({},s.value),o.value),a.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});$i(l,function(u){if(!u)return PZ("Could not find one or more icon(s)",i.value,a.value)},{immediate:!0});var c=Pt(function(){return l.value?hP(l.value.abstract[0],{},r):null});return function(){return c.value}}});qe.add(tZ);qe.add(hZ);qe.add(XX);qe.add(uZ);qe.add(rZ);qe.add(mZ);qe.add(eZ);qe.add(zX);qe.add(jX);qe.add(YX);qe.add(fZ);qe.add(ZX);qe.add(yZ);qe.add(wZ);qe.add(gZ);qe.add(qX);qe.add(bZ);qe.add(_Z);qe.add(WX);qe.add(KX);qe.add(EZ);qe.add(iZ);qe.add(sZ);qe.add(oZ);qe.add(vZ);qe.add(cZ);qe.add(pZ);qe.add(GX);qe.add(JX);qe.add(aZ);qe.add(TZ);qe.add(dZ);qe.add(lZ);qe.add(QX);qe.add(nZ);const Dh=YD(nH);Dh.use(e4());Dh.use(WU,{firebaseApp:jO,modules:[$U()]});Dh.use(LM);Dh.component("FontAwesomeIcon",DZ);Dh.mount("#app");
